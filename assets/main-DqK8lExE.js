var _l=Object.defineProperty;var xl=(_e,_,et)=>_ in _e?_l(_e,_,{enumerable:!0,configurable:!0,writable:!0,value:et}):_e[_]=et;var en=(_e,_,et)=>xl(_e,typeof _!="symbol"?_+"":_,et);function _mergeNamespaces(_e,_){for(var et=0;et<_.length;et++){const tt=_[et];if(typeof tt!="string"&&!Array.isArray(tt)){for(const rt in tt)if(rt!=="default"&&!(rt in _e)){const it=Object.getOwnPropertyDescriptor(tt,rt);it&&Object.defineProperty(_e,rt,it.get?it:{enumerable:!0,get:()=>tt[rt]})}}}return Object.freeze(Object.defineProperty(_e,Symbol.toStringTag,{value:"Module"}))}(function(){const _=document.createElement("link").relList;if(_&&_.supports&&_.supports("modulepreload"))return;for(const rt of document.querySelectorAll('link[rel="modulepreload"]'))tt(rt);new MutationObserver(rt=>{for(const it of rt)if(it.type==="childList")for(const st of it.addedNodes)st.tagName==="LINK"&&st.rel==="modulepreload"&&tt(st)}).observe(document,{childList:!0,subtree:!0});function et(rt){const it={};return rt.integrity&&(it.integrity=rt.integrity),rt.referrerPolicy&&(it.referrerPolicy=rt.referrerPolicy),rt.crossOrigin==="use-credentials"?it.credentials="include":rt.crossOrigin==="anonymous"?it.credentials="omit":it.credentials="same-origin",it}function tt(rt){if(rt.ep)return;rt.ep=!0;const it=et(rt);fetch(rt.href,it)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(_e){return _e&&_e.__esModule&&Object.prototype.hasOwnProperty.call(_e,"default")?_e.default:_e}function getAugmentedNamespace(_e){if(_e.__esModule)return _e;var _=_e.default;if(typeof _=="function"){var et=function tt(){return this instanceof tt?Reflect.construct(_,arguments,this.constructor):_.apply(this,arguments)};et.prototype=_.prototype}else et={};return Object.defineProperty(et,"__esModule",{value:!0}),Object.keys(_e).forEach(function(tt){var rt=Object.getOwnPropertyDescriptor(_e,tt);Object.defineProperty(et,tt,rt.get?rt:{enumerable:!0,get:function(){return _e[tt]}})}),et}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$3=Symbol.for("react.element"),n$3=Symbol.for("react.portal"),p$4=Symbol.for("react.fragment"),q$2=Symbol.for("react.strict_mode"),r$2=Symbol.for("react.profiler"),t$2=Symbol.for("react.provider"),u$1=Symbol.for("react.context"),v$3=Symbol.for("react.forward_ref"),w$2=Symbol.for("react.suspense"),x$2=Symbol.for("react.memo"),y$2=Symbol.for("react.lazy"),z$2=Symbol.iterator;function A$2(_e){return _e===null||typeof _e!="object"?null:(_e=z$2&&_e[z$2]||_e["@@iterator"],typeof _e=="function"?_e:null)}var B$1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$1=Object.assign,D$1={};function E$1(_e,_,et){this.props=_e,this.context=_,this.refs=D$1,this.updater=et||B$1}E$1.prototype.isReactComponent={};E$1.prototype.setState=function(_e,_){if(typeof _e!="object"&&typeof _e!="function"&&_e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,_e,_,"setState")};E$1.prototype.forceUpdate=function(_e){this.updater.enqueueForceUpdate(this,_e,"forceUpdate")};function F(){}F.prototype=E$1.prototype;function G$1(_e,_,et){this.props=_e,this.context=_,this.refs=D$1,this.updater=et||B$1}var H$2=G$1.prototype=new F;H$2.constructor=G$1;C$1(H$2,E$1.prototype);H$2.isPureReactComponent=!0;var I$1=Array.isArray,J=Object.prototype.hasOwnProperty,K$1={current:null},L$1={key:!0,ref:!0,__self:!0,__source:!0};function M$2(_e,_,et){var tt,rt={},it=null,st=null;if(_!=null)for(tt in _.ref!==void 0&&(st=_.ref),_.key!==void 0&&(it=""+_.key),_)J.call(_,tt)&&!L$1.hasOwnProperty(tt)&&(rt[tt]=_[tt]);var at=arguments.length-2;if(at===1)rt.children=et;else if(1<at){for(var ct=Array(at),ut=0;ut<at;ut++)ct[ut]=arguments[ut+2];rt.children=ct}if(_e&&_e.defaultProps)for(tt in at=_e.defaultProps,at)rt[tt]===void 0&&(rt[tt]=at[tt]);return{$$typeof:l$3,type:_e,key:it,ref:st,props:rt,_owner:K$1.current}}function N$2(_e,_){return{$$typeof:l$3,type:_e.type,key:_,ref:_e.ref,props:_e.props,_owner:_e._owner}}function O$1(_e){return typeof _e=="object"&&_e!==null&&_e.$$typeof===l$3}function escape$1(_e){var _={"=":"=0",":":"=2"};return"$"+_e.replace(/[=:]/g,function(et){return _[et]})}var P$1=/\/+/g;function Q$1(_e,_){return typeof _e=="object"&&_e!==null&&_e.key!=null?escape$1(""+_e.key):_.toString(36)}function R$1(_e,_,et,tt,rt){var it=typeof _e;(it==="undefined"||it==="boolean")&&(_e=null);var st=!1;if(_e===null)st=!0;else switch(it){case"string":case"number":st=!0;break;case"object":switch(_e.$$typeof){case l$3:case n$3:st=!0}}if(st)return st=_e,rt=rt(st),_e=tt===""?"."+Q$1(st,0):tt,I$1(rt)?(et="",_e!=null&&(et=_e.replace(P$1,"$&/")+"/"),R$1(rt,_,et,"",function(ut){return ut})):rt!=null&&(O$1(rt)&&(rt=N$2(rt,et+(!rt.key||st&&st.key===rt.key?"":(""+rt.key).replace(P$1,"$&/")+"/")+_e)),_.push(rt)),1;if(st=0,tt=tt===""?".":tt+":",I$1(_e))for(var at=0;at<_e.length;at++){it=_e[at];var ct=tt+Q$1(it,at);st+=R$1(it,_,et,ct,rt)}else if(ct=A$2(_e),typeof ct=="function")for(_e=ct.call(_e),at=0;!(it=_e.next()).done;)it=it.value,ct=tt+Q$1(it,at++),st+=R$1(it,_,et,ct,rt);else if(it==="object")throw _=String(_e),Error("Objects are not valid as a React child (found: "+(_==="[object Object]"?"object with keys {"+Object.keys(_e).join(", ")+"}":_)+"). If you meant to render a collection of children, use an array instead.");return st}function S$2(_e,_,et){if(_e==null)return _e;var tt=[],rt=0;return R$1(_e,tt,"","",function(it){return _.call(et,it,rt++)}),tt}function T$1(_e){if(_e._status===-1){var _=_e._result;_=_(),_.then(function(et){(_e._status===0||_e._status===-1)&&(_e._status=1,_e._result=et)},function(et){(_e._status===0||_e._status===-1)&&(_e._status=2,_e._result=et)}),_e._status===-1&&(_e._status=0,_e._result=_)}if(_e._status===1)return _e._result.default;throw _e._result}var U$1={current:null},V$1={transition:null},W$1={ReactCurrentDispatcher:U$1,ReactCurrentBatchConfig:V$1,ReactCurrentOwner:K$1};function X$1(){throw Error("act(...) is not supported in production builds of React.")}react_production_min.Children={map:S$2,forEach:function(_e,_,et){S$2(_e,function(){_.apply(this,arguments)},et)},count:function(_e){var _=0;return S$2(_e,function(){_++}),_},toArray:function(_e){return S$2(_e,function(_){return _})||[]},only:function(_e){if(!O$1(_e))throw Error("React.Children.only expected to receive a single React element child.");return _e}};react_production_min.Component=E$1;react_production_min.Fragment=p$4;react_production_min.Profiler=r$2;react_production_min.PureComponent=G$1;react_production_min.StrictMode=q$2;react_production_min.Suspense=w$2;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$1;react_production_min.act=X$1;react_production_min.cloneElement=function(_e,_,et){if(_e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+_e+".");var tt=C$1({},_e.props),rt=_e.key,it=_e.ref,st=_e._owner;if(_!=null){if(_.ref!==void 0&&(it=_.ref,st=K$1.current),_.key!==void 0&&(rt=""+_.key),_e.type&&_e.type.defaultProps)var at=_e.type.defaultProps;for(ct in _)J.call(_,ct)&&!L$1.hasOwnProperty(ct)&&(tt[ct]=_[ct]===void 0&&at!==void 0?at[ct]:_[ct])}var ct=arguments.length-2;if(ct===1)tt.children=et;else if(1<ct){at=Array(ct);for(var ut=0;ut<ct;ut++)at[ut]=arguments[ut+2];tt.children=at}return{$$typeof:l$3,type:_e.type,key:rt,ref:it,props:tt,_owner:st}};react_production_min.createContext=function(_e){return _e={$$typeof:u$1,_currentValue:_e,_currentValue2:_e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},_e.Provider={$$typeof:t$2,_context:_e},_e.Consumer=_e};react_production_min.createElement=M$2;react_production_min.createFactory=function(_e){var _=M$2.bind(null,_e);return _.type=_e,_};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(_e){return{$$typeof:v$3,render:_e}};react_production_min.isValidElement=O$1;react_production_min.lazy=function(_e){return{$$typeof:y$2,_payload:{_status:-1,_result:_e},_init:T$1}};react_production_min.memo=function(_e,_){return{$$typeof:x$2,type:_e,compare:_===void 0?null:_}};react_production_min.startTransition=function(_e){var _=V$1.transition;V$1.transition={};try{_e()}finally{V$1.transition=_}};react_production_min.unstable_act=X$1;react_production_min.useCallback=function(_e,_){return U$1.current.useCallback(_e,_)};react_production_min.useContext=function(_e){return U$1.current.useContext(_e)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(_e){return U$1.current.useDeferredValue(_e)};react_production_min.useEffect=function(_e,_){return U$1.current.useEffect(_e,_)};react_production_min.useId=function(){return U$1.current.useId()};react_production_min.useImperativeHandle=function(_e,_,et){return U$1.current.useImperativeHandle(_e,_,et)};react_production_min.useInsertionEffect=function(_e,_){return U$1.current.useInsertionEffect(_e,_)};react_production_min.useLayoutEffect=function(_e,_){return U$1.current.useLayoutEffect(_e,_)};react_production_min.useMemo=function(_e,_){return U$1.current.useMemo(_e,_)};react_production_min.useReducer=function(_e,_,et){return U$1.current.useReducer(_e,_,et)};react_production_min.useRef=function(_e){return U$1.current.useRef(_e)};react_production_min.useState=function(_e){return U$1.current.useState(_e)};react_production_min.useSyncExternalStore=function(_e,_,et){return U$1.current.useSyncExternalStore(_e,_,et)};react_production_min.useTransition=function(){return U$1.current.useTransition()};react_production_min.version="18.3.1";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$2=reactExports,k$2=Symbol.for("react.element"),l$2=Symbol.for("react.fragment"),m$3=Object.prototype.hasOwnProperty,n$2=f$2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$3={key:!0,ref:!0,__self:!0,__source:!0};function q$1(_e,_,et){var tt,rt={},it=null,st=null;et!==void 0&&(it=""+et),_.key!==void 0&&(it=""+_.key),_.ref!==void 0&&(st=_.ref);for(tt in _)m$3.call(_,tt)&&!p$3.hasOwnProperty(tt)&&(rt[tt]=_[tt]);if(_e&&_e.defaultProps)for(tt in _=_e.defaultProps,_)rt[tt]===void 0&&(rt[tt]=_[tt]);return{$$typeof:k$2,type:_e,key:it,ref:st,props:rt,_owner:n$2.current}}reactJsxRuntime_production_min.Fragment=l$2;reactJsxRuntime_production_min.jsx=q$1;reactJsxRuntime_production_min.jsxs=q$1;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(_e){function _(Nt,zt){var Ut=Nt.length;Nt.push(zt);e:for(;0<Ut;){var Vt=Ut-1>>>1,Ht=Nt[Vt];if(0<rt(Ht,zt))Nt[Vt]=zt,Nt[Ut]=Ht,Ut=Vt;else break e}}function et(Nt){return Nt.length===0?null:Nt[0]}function tt(Nt){if(Nt.length===0)return null;var zt=Nt[0],Ut=Nt.pop();if(Ut!==zt){Nt[0]=Ut;e:for(var Vt=0,Ht=Nt.length,sr=Ht>>>1;Vt<sr;){var ir=2*(Vt+1)-1,er=Nt[ir],dr=ir+1,gr=Nt[dr];if(0>rt(er,Ut))dr<Ht&&0>rt(gr,er)?(Nt[Vt]=gr,Nt[dr]=Ut,Vt=dr):(Nt[Vt]=er,Nt[ir]=Ut,Vt=ir);else if(dr<Ht&&0>rt(gr,Ut))Nt[Vt]=gr,Nt[dr]=Ut,Vt=dr;else break e}}return zt}function rt(Nt,zt){var Ut=Nt.sortIndex-zt.sortIndex;return Ut!==0?Ut:Nt.id-zt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var it=performance;_e.unstable_now=function(){return it.now()}}else{var st=Date,at=st.now();_e.unstable_now=function(){return st.now()-at}}var ct=[],ut=[],dt=1,ot=null,nt=3,lt=!1,ht=!1,ft=!1,gt=typeof setTimeout=="function"?setTimeout:null,mt=typeof clearTimeout=="function"?clearTimeout:null,yt=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function bt(Nt){for(var zt=et(ut);zt!==null;){if(zt.callback===null)tt(ut);else if(zt.startTime<=Nt)tt(ut),zt.sortIndex=zt.expirationTime,_(ct,zt);else break;zt=et(ut)}}function _t(Nt){if(ft=!1,bt(Nt),!ht)if(et(ct)!==null)ht=!0,kt(vt);else{var zt=et(ut);zt!==null&&Lt(_t,zt.startTime-Nt)}}function vt(Nt,zt){ht=!1,ft&&(ft=!1,mt(Tt),Tt=-1),lt=!0;var Ut=nt;try{for(bt(zt),ot=et(ct);ot!==null&&(!(ot.expirationTime>zt)||Nt&&!Ot());){var Vt=ot.callback;if(typeof Vt=="function"){ot.callback=null,nt=ot.priorityLevel;var Ht=Vt(ot.expirationTime<=zt);zt=_e.unstable_now(),typeof Ht=="function"?ot.callback=Ht:ot===et(ct)&&tt(ct),bt(zt)}else tt(ct);ot=et(ct)}if(ot!==null)var sr=!0;else{var ir=et(ut);ir!==null&&Lt(_t,ir.startTime-zt),sr=!1}return sr}finally{ot=null,nt=Ut,lt=!1}}var xt=!1,wt=null,Tt=-1,St=5,Et=-1;function Ot(){return!(_e.unstable_now()-Et<St)}function Rt(){if(wt!==null){var Nt=_e.unstable_now();Et=Nt;var zt=!0;try{zt=wt(!0,Nt)}finally{zt?Pt():(xt=!1,wt=null)}}else xt=!1}var Pt;if(typeof yt=="function")Pt=function(){yt(Rt)};else if(typeof MessageChannel<"u"){var Mt=new MessageChannel,$t=Mt.port2;Mt.port1.onmessage=Rt,Pt=function(){$t.postMessage(null)}}else Pt=function(){gt(Rt,0)};function kt(Nt){wt=Nt,xt||(xt=!0,Pt())}function Lt(Nt,zt){Tt=gt(function(){Nt(_e.unstable_now())},zt)}_e.unstable_IdlePriority=5,_e.unstable_ImmediatePriority=1,_e.unstable_LowPriority=4,_e.unstable_NormalPriority=3,_e.unstable_Profiling=null,_e.unstable_UserBlockingPriority=2,_e.unstable_cancelCallback=function(Nt){Nt.callback=null},_e.unstable_continueExecution=function(){ht||lt||(ht=!0,kt(vt))},_e.unstable_forceFrameRate=function(Nt){0>Nt||125<Nt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):St=0<Nt?Math.floor(1e3/Nt):5},_e.unstable_getCurrentPriorityLevel=function(){return nt},_e.unstable_getFirstCallbackNode=function(){return et(ct)},_e.unstable_next=function(Nt){switch(nt){case 1:case 2:case 3:var zt=3;break;default:zt=nt}var Ut=nt;nt=zt;try{return Nt()}finally{nt=Ut}},_e.unstable_pauseExecution=function(){},_e.unstable_requestPaint=function(){},_e.unstable_runWithPriority=function(Nt,zt){switch(Nt){case 1:case 2:case 3:case 4:case 5:break;default:Nt=3}var Ut=nt;nt=Nt;try{return zt()}finally{nt=Ut}},_e.unstable_scheduleCallback=function(Nt,zt,Ut){var Vt=_e.unstable_now();switch(typeof Ut=="object"&&Ut!==null?(Ut=Ut.delay,Ut=typeof Ut=="number"&&0<Ut?Vt+Ut:Vt):Ut=Vt,Nt){case 1:var Ht=-1;break;case 2:Ht=250;break;case 5:Ht=1073741823;break;case 4:Ht=1e4;break;default:Ht=5e3}return Ht=Ut+Ht,Nt={id:dt++,callback:zt,priorityLevel:Nt,startTime:Ut,expirationTime:Ht,sortIndex:-1},Ut>Vt?(Nt.sortIndex=Ut,_(ut,Nt),et(ct)===null&&Nt===et(ut)&&(ft?(mt(Tt),Tt=-1):ft=!0,Lt(_t,Ut-Vt))):(Nt.sortIndex=Ht,_(ct,Nt),ht||lt||(ht=!0,kt(vt))),Nt},_e.unstable_shouldYield=Ot,_e.unstable_wrapCallback=function(Nt){var zt=nt;return function(){var Ut=nt;nt=zt;try{return Nt.apply(this,arguments)}finally{nt=Ut}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p$2(_e){for(var _="https://reactjs.org/docs/error-decoder.html?invariant="+_e,et=1;et<arguments.length;et++)_+="&args[]="+encodeURIComponent(arguments[et]);return"Minified React error #"+_e+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(_e,_){ha(_e,_),ha(_e+"Capture",_)}function ha(_e,_){for(ea[_e]=_,_e=0;_e<_.length;_e++)da.add(_[_e])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(_e){return ja.call(ma,_e)?!0:ja.call(la,_e)?!1:ka.test(_e)?ma[_e]=!0:(la[_e]=!0,!1)}function pa(_e,_,et,tt){if(et!==null&&et.type===0)return!1;switch(typeof _){case"function":case"symbol":return!0;case"boolean":return tt?!1:et!==null?!et.acceptsBooleans:(_e=_e.toLowerCase().slice(0,5),_e!=="data-"&&_e!=="aria-");default:return!1}}function qa(_e,_,et,tt){if(_===null||typeof _>"u"||pa(_e,_,et,tt))return!0;if(tt)return!1;if(et!==null)switch(et.type){case 3:return!_;case 4:return _===!1;case 5:return isNaN(_);case 6:return isNaN(_)||1>_}return!1}function v$2(_e,_,et,tt,rt,it,st){this.acceptsBooleans=_===2||_===3||_===4,this.attributeName=tt,this.attributeNamespace=rt,this.mustUseProperty=et,this.propertyName=_e,this.type=_,this.sanitizeURL=it,this.removeEmptyString=st}var z$1={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(_e){z$1[_e]=new v$2(_e,0,!1,_e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(_e){var _=_e[0];z$1[_]=new v$2(_,1,!1,_e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(_e){z$1[_e]=new v$2(_e,2,!1,_e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(_e){z$1[_e]=new v$2(_e,2,!1,_e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(_e){z$1[_e]=new v$2(_e,3,!1,_e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(_e){z$1[_e]=new v$2(_e,3,!0,_e,null,!1,!1)});["capture","download"].forEach(function(_e){z$1[_e]=new v$2(_e,4,!1,_e,null,!1,!1)});["cols","rows","size","span"].forEach(function(_e){z$1[_e]=new v$2(_e,6,!1,_e,null,!1,!1)});["rowSpan","start"].forEach(function(_e){z$1[_e]=new v$2(_e,5,!1,_e.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(_e){return _e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(_e){var _=_e.replace(ra,sa);z$1[_]=new v$2(_,1,!1,_e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(_e){var _=_e.replace(ra,sa);z$1[_]=new v$2(_,1,!1,_e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(_e){var _=_e.replace(ra,sa);z$1[_]=new v$2(_,1,!1,_e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(_e){z$1[_e]=new v$2(_e,1,!1,_e.toLowerCase(),null,!1,!1)});z$1.xlinkHref=new v$2("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(_e){z$1[_e]=new v$2(_e,1,!1,_e.toLowerCase(),null,!0,!0)});function ta(_e,_,et,tt){var rt=z$1.hasOwnProperty(_)?z$1[_]:null;(rt!==null?rt.type!==0:tt||!(2<_.length)||_[0]!=="o"&&_[0]!=="O"||_[1]!=="n"&&_[1]!=="N")&&(qa(_,et,rt,tt)&&(et=null),tt||rt===null?oa(_)&&(et===null?_e.removeAttribute(_):_e.setAttribute(_,""+et)):rt.mustUseProperty?_e[rt.propertyName]=et===null?rt.type===3?!1:"":et:(_=rt.attributeName,tt=rt.attributeNamespace,et===null?_e.removeAttribute(_):(rt=rt.type,et=rt===3||rt===4&&et===!0?"":""+et,tt?_e.setAttributeNS(tt,_,et):_e.setAttribute(_,et))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(_e){return _e===null||typeof _e!="object"?null:(_e=Ja&&_e[Ja]||_e["@@iterator"],typeof _e=="function"?_e:null)}var A$1=Object.assign,La;function Ma(_e){if(La===void 0)try{throw Error()}catch(et){var _=et.stack.trim().match(/\n( *(at )?)/);La=_&&_[1]||""}return`
`+La+_e}var Na=!1;function Oa(_e,_){if(!_e||Na)return"";Na=!0;var et=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(_)if(_=function(){throw Error()},Object.defineProperty(_.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_,[])}catch(ut){var tt=ut}Reflect.construct(_e,[],_)}else{try{_.call()}catch(ut){tt=ut}_e.call(_.prototype)}else{try{throw Error()}catch(ut){tt=ut}_e()}}catch(ut){if(ut&&tt&&typeof ut.stack=="string"){for(var rt=ut.stack.split(`
`),it=tt.stack.split(`
`),st=rt.length-1,at=it.length-1;1<=st&&0<=at&&rt[st]!==it[at];)at--;for(;1<=st&&0<=at;st--,at--)if(rt[st]!==it[at]){if(st!==1||at!==1)do if(st--,at--,0>at||rt[st]!==it[at]){var ct=`
`+rt[st].replace(" at new "," at ");return _e.displayName&&ct.includes("<anonymous>")&&(ct=ct.replace("<anonymous>",_e.displayName)),ct}while(1<=st&&0<=at);break}}}finally{Na=!1,Error.prepareStackTrace=et}return(_e=_e?_e.displayName||_e.name:"")?Ma(_e):""}function Pa(_e){switch(_e.tag){case 5:return Ma(_e.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return _e=Oa(_e.type,!1),_e;case 11:return _e=Oa(_e.type.render,!1),_e;case 1:return _e=Oa(_e.type,!0),_e;default:return""}}function Qa(_e){if(_e==null)return null;if(typeof _e=="function")return _e.displayName||_e.name||null;if(typeof _e=="string")return _e;switch(_e){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof _e=="object")switch(_e.$$typeof){case Ca:return(_e.displayName||"Context")+".Consumer";case Ba:return(_e._context.displayName||"Context")+".Provider";case Da:var _=_e.render;return _e=_e.displayName,_e||(_e=_.displayName||_.name||"",_e=_e!==""?"ForwardRef("+_e+")":"ForwardRef"),_e;case Ga:return _=_e.displayName||null,_!==null?_:Qa(_e.type)||"Memo";case Ha:_=_e._payload,_e=_e._init;try{return Qa(_e(_))}catch{}}return null}function Ra(_e){var _=_e.type;switch(_e.tag){case 24:return"Cache";case 9:return(_.displayName||"Context")+".Consumer";case 10:return(_._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return _e=_.render,_e=_e.displayName||_e.name||"",_.displayName||(_e!==""?"ForwardRef("+_e+")":"ForwardRef");case 7:return"Fragment";case 5:return _;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(_);case 8:return _===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof _=="function")return _.displayName||_.name||null;if(typeof _=="string")return _}return null}function Sa(_e){switch(typeof _e){case"boolean":case"number":case"string":case"undefined":return _e;case"object":return _e;default:return""}}function Ta(_e){var _=_e.type;return(_e=_e.nodeName)&&_e.toLowerCase()==="input"&&(_==="checkbox"||_==="radio")}function Ua(_e){var _=Ta(_e)?"checked":"value",et=Object.getOwnPropertyDescriptor(_e.constructor.prototype,_),tt=""+_e[_];if(!_e.hasOwnProperty(_)&&typeof et<"u"&&typeof et.get=="function"&&typeof et.set=="function"){var rt=et.get,it=et.set;return Object.defineProperty(_e,_,{configurable:!0,get:function(){return rt.call(this)},set:function(st){tt=""+st,it.call(this,st)}}),Object.defineProperty(_e,_,{enumerable:et.enumerable}),{getValue:function(){return tt},setValue:function(st){tt=""+st},stopTracking:function(){_e._valueTracker=null,delete _e[_]}}}}function Va(_e){_e._valueTracker||(_e._valueTracker=Ua(_e))}function Wa(_e){if(!_e)return!1;var _=_e._valueTracker;if(!_)return!0;var et=_.getValue(),tt="";return _e&&(tt=Ta(_e)?_e.checked?"true":"false":_e.value),_e=tt,_e!==et?(_.setValue(_e),!0):!1}function Xa(_e){if(_e=_e||(typeof document<"u"?document:void 0),typeof _e>"u")return null;try{return _e.activeElement||_e.body}catch{return _e.body}}function Ya(_e,_){var et=_.checked;return A$1({},_,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:et??_e._wrapperState.initialChecked})}function Za(_e,_){var et=_.defaultValue==null?"":_.defaultValue,tt=_.checked!=null?_.checked:_.defaultChecked;et=Sa(_.value!=null?_.value:et),_e._wrapperState={initialChecked:tt,initialValue:et,controlled:_.type==="checkbox"||_.type==="radio"?_.checked!=null:_.value!=null}}function ab(_e,_){_=_.checked,_!=null&&ta(_e,"checked",_,!1)}function bb(_e,_){ab(_e,_);var et=Sa(_.value),tt=_.type;if(et!=null)tt==="number"?(et===0&&_e.value===""||_e.value!=et)&&(_e.value=""+et):_e.value!==""+et&&(_e.value=""+et);else if(tt==="submit"||tt==="reset"){_e.removeAttribute("value");return}_.hasOwnProperty("value")?cb(_e,_.type,et):_.hasOwnProperty("defaultValue")&&cb(_e,_.type,Sa(_.defaultValue)),_.checked==null&&_.defaultChecked!=null&&(_e.defaultChecked=!!_.defaultChecked)}function db(_e,_,et){if(_.hasOwnProperty("value")||_.hasOwnProperty("defaultValue")){var tt=_.type;if(!(tt!=="submit"&&tt!=="reset"||_.value!==void 0&&_.value!==null))return;_=""+_e._wrapperState.initialValue,et||_===_e.value||(_e.value=_),_e.defaultValue=_}et=_e.name,et!==""&&(_e.name=""),_e.defaultChecked=!!_e._wrapperState.initialChecked,et!==""&&(_e.name=et)}function cb(_e,_,et){(_!=="number"||Xa(_e.ownerDocument)!==_e)&&(et==null?_e.defaultValue=""+_e._wrapperState.initialValue:_e.defaultValue!==""+et&&(_e.defaultValue=""+et))}var eb=Array.isArray;function fb(_e,_,et,tt){if(_e=_e.options,_){_={};for(var rt=0;rt<et.length;rt++)_["$"+et[rt]]=!0;for(et=0;et<_e.length;et++)rt=_.hasOwnProperty("$"+_e[et].value),_e[et].selected!==rt&&(_e[et].selected=rt),rt&&tt&&(_e[et].defaultSelected=!0)}else{for(et=""+Sa(et),_=null,rt=0;rt<_e.length;rt++){if(_e[rt].value===et){_e[rt].selected=!0,tt&&(_e[rt].defaultSelected=!0);return}_!==null||_e[rt].disabled||(_=_e[rt])}_!==null&&(_.selected=!0)}}function gb(_e,_){if(_.dangerouslySetInnerHTML!=null)throw Error(p$2(91));return A$1({},_,{value:void 0,defaultValue:void 0,children:""+_e._wrapperState.initialValue})}function hb(_e,_){var et=_.value;if(et==null){if(et=_.children,_=_.defaultValue,et!=null){if(_!=null)throw Error(p$2(92));if(eb(et)){if(1<et.length)throw Error(p$2(93));et=et[0]}_=et}_==null&&(_=""),et=_}_e._wrapperState={initialValue:Sa(et)}}function ib(_e,_){var et=Sa(_.value),tt=Sa(_.defaultValue);et!=null&&(et=""+et,et!==_e.value&&(_e.value=et),_.defaultValue==null&&_e.defaultValue!==et&&(_e.defaultValue=et)),tt!=null&&(_e.defaultValue=""+tt)}function jb(_e){var _=_e.textContent;_===_e._wrapperState.initialValue&&_!==""&&_!==null&&(_e.value=_)}function kb(_e){switch(_e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(_e,_){return _e==null||_e==="http://www.w3.org/1999/xhtml"?kb(_):_e==="http://www.w3.org/2000/svg"&&_==="foreignObject"?"http://www.w3.org/1999/xhtml":_e}var mb,nb=function(_e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(_,et,tt,rt){MSApp.execUnsafeLocalFunction(function(){return _e(_,et,tt,rt)})}:_e}(function(_e,_){if(_e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in _e)_e.innerHTML=_;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+_.valueOf().toString()+"</svg>",_=mb.firstChild;_e.firstChild;)_e.removeChild(_e.firstChild);for(;_.firstChild;)_e.appendChild(_.firstChild)}});function ob(_e,_){if(_){var et=_e.firstChild;if(et&&et===_e.lastChild&&et.nodeType===3){et.nodeValue=_;return}}_e.textContent=_}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(_e){qb.forEach(function(_){_=_+_e.charAt(0).toUpperCase()+_e.substring(1),pb[_]=pb[_e]})});function rb(_e,_,et){return _==null||typeof _=="boolean"||_===""?"":et||typeof _!="number"||_===0||pb.hasOwnProperty(_e)&&pb[_e]?(""+_).trim():_+"px"}function sb(_e,_){_e=_e.style;for(var et in _)if(_.hasOwnProperty(et)){var tt=et.indexOf("--")===0,rt=rb(et,_[et],tt);et==="float"&&(et="cssFloat"),tt?_e.setProperty(et,rt):_e[et]=rt}}var tb=A$1({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(_e,_){if(_){if(tb[_e]&&(_.children!=null||_.dangerouslySetInnerHTML!=null))throw Error(p$2(137,_e));if(_.dangerouslySetInnerHTML!=null){if(_.children!=null)throw Error(p$2(60));if(typeof _.dangerouslySetInnerHTML!="object"||!("__html"in _.dangerouslySetInnerHTML))throw Error(p$2(61))}if(_.style!=null&&typeof _.style!="object")throw Error(p$2(62))}}function vb(_e,_){if(_e.indexOf("-")===-1)return typeof _.is=="string";switch(_e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(_e){return _e=_e.target||_e.srcElement||window,_e.correspondingUseElement&&(_e=_e.correspondingUseElement),_e.nodeType===3?_e.parentNode:_e}var yb=null,zb=null,Ab=null;function Bb(_e){if(_e=Cb(_e)){if(typeof yb!="function")throw Error(p$2(280));var _=_e.stateNode;_&&(_=Db(_),yb(_e.stateNode,_e.type,_))}}function Eb(_e){zb?Ab?Ab.push(_e):Ab=[_e]:zb=_e}function Fb(){if(zb){var _e=zb,_=Ab;if(Ab=zb=null,Bb(_e),_)for(_e=0;_e<_.length;_e++)Bb(_[_e])}}function Gb(_e,_){return _e(_)}function Hb(){}var Ib=!1;function Jb(_e,_,et){if(Ib)return _e(_,et);Ib=!0;try{return Gb(_e,_,et)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(_e,_){var et=_e.stateNode;if(et===null)return null;var tt=Db(et);if(tt===null)return null;et=tt[_];e:switch(_){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(tt=!tt.disabled)||(_e=_e.type,tt=!(_e==="button"||_e==="input"||_e==="select"||_e==="textarea")),_e=!tt;break e;default:_e=!1}if(_e)return null;if(et&&typeof et!="function")throw Error(p$2(231,_,typeof et));return et}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(_e,_,et,tt,rt,it,st,at,ct){var ut=Array.prototype.slice.call(arguments,3);try{_.apply(et,ut)}catch(dt){this.onError(dt)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(_e){Ob=!0,Pb=_e}};function Tb(_e,_,et,tt,rt,it,st,at,ct){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(_e,_,et,tt,rt,it,st,at,ct){if(Tb.apply(this,arguments),Ob){if(Ob){var ut=Pb;Ob=!1,Pb=null}else throw Error(p$2(198));Qb||(Qb=!0,Rb=ut)}}function Vb(_e){var _=_e,et=_e;if(_e.alternate)for(;_.return;)_=_.return;else{_e=_;do _=_e,_.flags&4098&&(et=_.return),_e=_.return;while(_e)}return _.tag===3?et:null}function Wb(_e){if(_e.tag===13){var _=_e.memoizedState;if(_===null&&(_e=_e.alternate,_e!==null&&(_=_e.memoizedState)),_!==null)return _.dehydrated}return null}function Xb(_e){if(Vb(_e)!==_e)throw Error(p$2(188))}function Yb(_e){var _=_e.alternate;if(!_){if(_=Vb(_e),_===null)throw Error(p$2(188));return _!==_e?null:_e}for(var et=_e,tt=_;;){var rt=et.return;if(rt===null)break;var it=rt.alternate;if(it===null){if(tt=rt.return,tt!==null){et=tt;continue}break}if(rt.child===it.child){for(it=rt.child;it;){if(it===et)return Xb(rt),_e;if(it===tt)return Xb(rt),_;it=it.sibling}throw Error(p$2(188))}if(et.return!==tt.return)et=rt,tt=it;else{for(var st=!1,at=rt.child;at;){if(at===et){st=!0,et=rt,tt=it;break}if(at===tt){st=!0,tt=rt,et=it;break}at=at.sibling}if(!st){for(at=it.child;at;){if(at===et){st=!0,et=it,tt=rt;break}if(at===tt){st=!0,tt=it,et=rt;break}at=at.sibling}if(!st)throw Error(p$2(189))}}if(et.alternate!==tt)throw Error(p$2(190))}if(et.tag!==3)throw Error(p$2(188));return et.stateNode.current===et?_e:_}function Zb(_e){return _e=Yb(_e),_e!==null?$b(_e):null}function $b(_e){if(_e.tag===5||_e.tag===6)return _e;for(_e=_e.child;_e!==null;){var _=$b(_e);if(_!==null)return _;_e=_e.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(_e){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,_e,void 0,(_e.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(_e){return _e>>>=0,_e===0?32:31-(pc(_e)/qc|0)|0}var rc=64,sc=4194304;function tc(_e){switch(_e&-_e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return _e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return _e}}function uc(_e,_){var et=_e.pendingLanes;if(et===0)return 0;var tt=0,rt=_e.suspendedLanes,it=_e.pingedLanes,st=et&268435455;if(st!==0){var at=st&~rt;at!==0?tt=tc(at):(it&=st,it!==0&&(tt=tc(it)))}else st=et&~rt,st!==0?tt=tc(st):it!==0&&(tt=tc(it));if(tt===0)return 0;if(_!==0&&_!==tt&&!(_&rt)&&(rt=tt&-tt,it=_&-_,rt>=it||rt===16&&(it&4194240)!==0))return _;if(tt&4&&(tt|=et&16),_=_e.entangledLanes,_!==0)for(_e=_e.entanglements,_&=tt;0<_;)et=31-oc(_),rt=1<<et,tt|=_e[et],_&=~rt;return tt}function vc(_e,_){switch(_e){case 1:case 2:case 4:return _+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(_e,_){for(var et=_e.suspendedLanes,tt=_e.pingedLanes,rt=_e.expirationTimes,it=_e.pendingLanes;0<it;){var st=31-oc(it),at=1<<st,ct=rt[st];ct===-1?(!(at&et)||at&tt)&&(rt[st]=vc(at,_)):ct<=_&&(_e.expiredLanes|=at),it&=~at}}function xc(_e){return _e=_e.pendingLanes&-1073741825,_e!==0?_e:_e&1073741824?1073741824:0}function yc(){var _e=rc;return rc<<=1,!(rc&4194240)&&(rc=64),_e}function zc(_e){for(var _=[],et=0;31>et;et++)_.push(_e);return _}function Ac(_e,_,et){_e.pendingLanes|=_,_!==536870912&&(_e.suspendedLanes=0,_e.pingedLanes=0),_e=_e.eventTimes,_=31-oc(_),_e[_]=et}function Bc(_e,_){var et=_e.pendingLanes&~_;_e.pendingLanes=_,_e.suspendedLanes=0,_e.pingedLanes=0,_e.expiredLanes&=_,_e.mutableReadLanes&=_,_e.entangledLanes&=_,_=_e.entanglements;var tt=_e.eventTimes;for(_e=_e.expirationTimes;0<et;){var rt=31-oc(et),it=1<<rt;_[rt]=0,tt[rt]=-1,_e[rt]=-1,et&=~it}}function Cc(_e,_){var et=_e.entangledLanes|=_;for(_e=_e.entanglements;et;){var tt=31-oc(et),rt=1<<tt;rt&_|_e[tt]&_&&(_e[tt]|=_),et&=~rt}}var C=0;function Dc(_e){return _e&=-_e,1<_e?4<_e?_e&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(_e,_){switch(_e){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(_.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(_.pointerId)}}function Tc(_e,_,et,tt,rt,it){return _e===null||_e.nativeEvent!==it?(_e={blockedOn:_,domEventName:et,eventSystemFlags:tt,nativeEvent:it,targetContainers:[rt]},_!==null&&(_=Cb(_),_!==null&&Fc(_)),_e):(_e.eventSystemFlags|=tt,_=_e.targetContainers,rt!==null&&_.indexOf(rt)===-1&&_.push(rt),_e)}function Uc(_e,_,et,tt,rt){switch(_){case"focusin":return Lc=Tc(Lc,_e,_,et,tt,rt),!0;case"dragenter":return Mc=Tc(Mc,_e,_,et,tt,rt),!0;case"mouseover":return Nc=Tc(Nc,_e,_,et,tt,rt),!0;case"pointerover":var it=rt.pointerId;return Oc.set(it,Tc(Oc.get(it)||null,_e,_,et,tt,rt)),!0;case"gotpointercapture":return it=rt.pointerId,Pc.set(it,Tc(Pc.get(it)||null,_e,_,et,tt,rt)),!0}return!1}function Vc(_e){var _=Wc(_e.target);if(_!==null){var et=Vb(_);if(et!==null){if(_=et.tag,_===13){if(_=Wb(et),_!==null){_e.blockedOn=_,Ic(_e.priority,function(){Gc(et)});return}}else if(_===3&&et.stateNode.current.memoizedState.isDehydrated){_e.blockedOn=et.tag===3?et.stateNode.containerInfo:null;return}}}_e.blockedOn=null}function Xc(_e){if(_e.blockedOn!==null)return!1;for(var _=_e.targetContainers;0<_.length;){var et=Yc(_e.domEventName,_e.eventSystemFlags,_[0],_e.nativeEvent);if(et===null){et=_e.nativeEvent;var tt=new et.constructor(et.type,et);wb=tt,et.target.dispatchEvent(tt),wb=null}else return _=Cb(et),_!==null&&Fc(_),_e.blockedOn=et,!1;_.shift()}return!0}function Zc(_e,_,et){Xc(_e)&&et.delete(_)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(_e,_){_e.blockedOn===_&&(_e.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(_e){function _(rt){return ad(rt,_e)}if(0<Kc.length){ad(Kc[0],_e);for(var et=1;et<Kc.length;et++){var tt=Kc[et];tt.blockedOn===_e&&(tt.blockedOn=null)}}for(Lc!==null&&ad(Lc,_e),Mc!==null&&ad(Mc,_e),Nc!==null&&ad(Nc,_e),Oc.forEach(_),Pc.forEach(_),et=0;et<Qc.length;et++)tt=Qc[et],tt.blockedOn===_e&&(tt.blockedOn=null);for(;0<Qc.length&&(et=Qc[0],et.blockedOn===null);)Vc(et),et.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(_e,_,et,tt){var rt=C,it=cd.transition;cd.transition=null;try{C=1,fd(_e,_,et,tt)}finally{C=rt,cd.transition=it}}function gd(_e,_,et,tt){var rt=C,it=cd.transition;cd.transition=null;try{C=4,fd(_e,_,et,tt)}finally{C=rt,cd.transition=it}}function fd(_e,_,et,tt){if(dd){var rt=Yc(_e,_,et,tt);if(rt===null)hd(_e,_,tt,id,et),Sc(_e,tt);else if(Uc(rt,_e,_,et,tt))tt.stopPropagation();else if(Sc(_e,tt),_&4&&-1<Rc.indexOf(_e)){for(;rt!==null;){var it=Cb(rt);if(it!==null&&Ec(it),it=Yc(_e,_,et,tt),it===null&&hd(_e,_,tt,id,et),it===rt)break;rt=it}rt!==null&&tt.stopPropagation()}else hd(_e,_,tt,null,et)}}var id=null;function Yc(_e,_,et,tt){if(id=null,_e=xb(tt),_e=Wc(_e),_e!==null)if(_=Vb(_e),_===null)_e=null;else if(et=_.tag,et===13){if(_e=Wb(_),_e!==null)return _e;_e=null}else if(et===3){if(_.stateNode.current.memoizedState.isDehydrated)return _.tag===3?_.stateNode.containerInfo:null;_e=null}else _!==_e&&(_e=null);return id=_e,null}function jd(_e){switch(_e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var _e,_=ld,et=_.length,tt,rt="value"in kd?kd.value:kd.textContent,it=rt.length;for(_e=0;_e<et&&_[_e]===rt[_e];_e++);var st=et-_e;for(tt=1;tt<=st&&_[et-tt]===rt[it-tt];tt++);return md=rt.slice(_e,1<tt?1-tt:void 0)}function od(_e){var _=_e.keyCode;return"charCode"in _e?(_e=_e.charCode,_e===0&&_===13&&(_e=13)):_e=_,_e===10&&(_e=13),32<=_e||_e===13?_e:0}function pd(){return!0}function qd(){return!1}function rd(_e){function _(et,tt,rt,it,st){this._reactName=et,this._targetInst=rt,this.type=tt,this.nativeEvent=it,this.target=st,this.currentTarget=null;for(var at in _e)_e.hasOwnProperty(at)&&(et=_e[at],this[at]=et?et(it):it[at]);return this.isDefaultPrevented=(it.defaultPrevented!=null?it.defaultPrevented:it.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$1(_.prototype,{preventDefault:function(){this.defaultPrevented=!0;var et=this.nativeEvent;et&&(et.preventDefault?et.preventDefault():typeof et.returnValue!="unknown"&&(et.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var et=this.nativeEvent;et&&(et.stopPropagation?et.stopPropagation():typeof et.cancelBubble!="unknown"&&(et.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),_}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(_e){return _e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A$1({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A$1({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(_e){return _e.relatedTarget===void 0?_e.fromElement===_e.srcElement?_e.toElement:_e.fromElement:_e.relatedTarget},movementX:function(_e){return"movementX"in _e?_e.movementX:(_e!==yd&&(yd&&_e.type==="mousemove"?(wd=_e.screenX-yd.screenX,xd=_e.screenY-yd.screenY):xd=wd=0,yd=_e),wd)},movementY:function(_e){return"movementY"in _e?_e.movementY:xd}}),Bd=rd(Ad),Cd=A$1({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A$1({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A$1({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A$1({},sd,{clipboardData:function(_e){return"clipboardData"in _e?_e.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A$1({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(_e){var _=this.nativeEvent;return _.getModifierState?_.getModifierState(_e):(_e=Od[_e])?!!_[_e]:!1}function zd(){return Pd}var Qd=A$1({},ud,{key:function(_e){if(_e.key){var _=Md[_e.key]||_e.key;if(_!=="Unidentified")return _}return _e.type==="keypress"?(_e=od(_e),_e===13?"Enter":String.fromCharCode(_e)):_e.type==="keydown"||_e.type==="keyup"?Nd[_e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(_e){return _e.type==="keypress"?od(_e):0},keyCode:function(_e){return _e.type==="keydown"||_e.type==="keyup"?_e.keyCode:0},which:function(_e){return _e.type==="keypress"?od(_e):_e.type==="keydown"||_e.type==="keyup"?_e.keyCode:0}}),Rd=rd(Qd),Sd=A$1({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$1({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$1({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$1({},Ad,{deltaX:function(_e){return"deltaX"in _e?_e.deltaX:"wheelDeltaX"in _e?-_e.wheelDeltaX:0},deltaY:function(_e){return"deltaY"in _e?_e.deltaY:"wheelDeltaY"in _e?-_e.wheelDeltaY:"wheelDelta"in _e?-_e.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&"CompositionEvent"in window,be=null;ia&&"documentMode"in document&&(be=document.documentMode);var ce=ia&&"TextEvent"in window&&!be,de=ia&&(!ae||be&&8<be&&11>=be),ee=" ",fe=!1;function ge(_e,_){switch(_e){case"keyup":return $d.indexOf(_.keyCode)!==-1;case"keydown":return _.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(_e){return _e=_e.detail,typeof _e=="object"&&"data"in _e?_e.data:null}var ie=!1;function je(_e,_){switch(_e){case"compositionend":return he(_);case"keypress":return _.which!==32?null:(fe=!0,ee);case"textInput":return _e=_.data,_e===ee&&fe?null:_e;default:return null}}function ke(_e,_){if(ie)return _e==="compositionend"||!ae&&ge(_e,_)?(_e=nd(),md=ld=kd=null,ie=!1,_e):null;switch(_e){case"paste":return null;case"keypress":if(!(_.ctrlKey||_.altKey||_.metaKey)||_.ctrlKey&&_.altKey){if(_.char&&1<_.char.length)return _.char;if(_.which)return String.fromCharCode(_.which)}return null;case"compositionend":return de&&_.locale!=="ko"?null:_.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(_e){var _=_e&&_e.nodeName&&_e.nodeName.toLowerCase();return _==="input"?!!le[_e.type]:_==="textarea"}function ne(_e,_,et,tt){Eb(tt),_=oe(_,"onChange"),0<_.length&&(et=new td("onChange","change",null,et,tt),_e.push({event:et,listeners:_}))}var pe=null,qe=null;function re(_e){se(_e,0)}function te(_e){var _=ue(_e);if(Wa(_))return _e}function ve(_e,_){if(_e==="change")return _}var we=!1;if(ia){var xe;if(ia){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe=pe=null)}function Be(_e){if(_e.propertyName==="value"&&te(qe)){var _=[];ne(_,qe,_e,xb(_e)),Jb(re,_)}}function Ce(_e,_,et){_e==="focusin"?(Ae(),pe=_,qe=et,pe.attachEvent("onpropertychange",Be)):_e==="focusout"&&Ae()}function De(_e){if(_e==="selectionchange"||_e==="keyup"||_e==="keydown")return te(qe)}function Ee(_e,_){if(_e==="click")return te(_)}function Fe(_e,_){if(_e==="input"||_e==="change")return te(_)}function Ge(_e,_){return _e===_&&(_e!==0||1/_e===1/_)||_e!==_e&&_!==_}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(_e,_){if(He(_e,_))return!0;if(typeof _e!="object"||_e===null||typeof _!="object"||_===null)return!1;var et=Object.keys(_e),tt=Object.keys(_);if(et.length!==tt.length)return!1;for(tt=0;tt<et.length;tt++){var rt=et[tt];if(!ja.call(_,rt)||!He(_e[rt],_[rt]))return!1}return!0}function Je(_e){for(;_e&&_e.firstChild;)_e=_e.firstChild;return _e}function Ke(_e,_){var et=Je(_e);_e=0;for(var tt;et;){if(et.nodeType===3){if(tt=_e+et.textContent.length,_e<=_&&tt>=_)return{node:et,offset:_-_e};_e=tt}e:{for(;et;){if(et.nextSibling){et=et.nextSibling;break e}et=et.parentNode}et=void 0}et=Je(et)}}function Le(_e,_){return _e&&_?_e===_?!0:_e&&_e.nodeType===3?!1:_&&_.nodeType===3?Le(_e,_.parentNode):"contains"in _e?_e.contains(_):_e.compareDocumentPosition?!!(_e.compareDocumentPosition(_)&16):!1:!1}function Me(){for(var _e=window,_=Xa();_ instanceof _e.HTMLIFrameElement;){try{var et=typeof _.contentWindow.location.href=="string"}catch{et=!1}if(et)_e=_.contentWindow;else break;_=Xa(_e.document)}return _}function Ne(_e){var _=_e&&_e.nodeName&&_e.nodeName.toLowerCase();return _&&(_==="input"&&(_e.type==="text"||_e.type==="search"||_e.type==="tel"||_e.type==="url"||_e.type==="password")||_==="textarea"||_e.contentEditable==="true")}function Oe(_e){var _=Me(),et=_e.focusedElem,tt=_e.selectionRange;if(_!==et&&et&&et.ownerDocument&&Le(et.ownerDocument.documentElement,et)){if(tt!==null&&Ne(et)){if(_=tt.start,_e=tt.end,_e===void 0&&(_e=_),"selectionStart"in et)et.selectionStart=_,et.selectionEnd=Math.min(_e,et.value.length);else if(_e=(_=et.ownerDocument||document)&&_.defaultView||window,_e.getSelection){_e=_e.getSelection();var rt=et.textContent.length,it=Math.min(tt.start,rt);tt=tt.end===void 0?it:Math.min(tt.end,rt),!_e.extend&&it>tt&&(rt=tt,tt=it,it=rt),rt=Ke(et,it);var st=Ke(et,tt);rt&&st&&(_e.rangeCount!==1||_e.anchorNode!==rt.node||_e.anchorOffset!==rt.offset||_e.focusNode!==st.node||_e.focusOffset!==st.offset)&&(_=_.createRange(),_.setStart(rt.node,rt.offset),_e.removeAllRanges(),it>tt?(_e.addRange(_),_e.extend(st.node,st.offset)):(_.setEnd(st.node,st.offset),_e.addRange(_)))}}for(_=[],_e=et;_e=_e.parentNode;)_e.nodeType===1&&_.push({element:_e,left:_e.scrollLeft,top:_e.scrollTop});for(typeof et.focus=="function"&&et.focus(),et=0;et<_.length;et++)_e=_[et],_e.element.scrollLeft=_e.left,_e.element.scrollTop=_e.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;function Ue(_e,_,et){var tt=et.window===et?et.document:et.nodeType===9?et:et.ownerDocument;Te||Qe==null||Qe!==Xa(tt)||(tt=Qe,"selectionStart"in tt&&Ne(tt)?tt={start:tt.selectionStart,end:tt.selectionEnd}:(tt=(tt.ownerDocument&&tt.ownerDocument.defaultView||window).getSelection(),tt={anchorNode:tt.anchorNode,anchorOffset:tt.anchorOffset,focusNode:tt.focusNode,focusOffset:tt.focusOffset}),Se&&Ie(Se,tt)||(Se=tt,tt=oe(Re,"onSelect"),0<tt.length&&(_=new td("onSelect","select",null,_,et),_e.push({event:_,listeners:tt}),_.target=Qe)))}function Ve(_e,_){var et={};return et[_e.toLowerCase()]=_.toLowerCase(),et["Webkit"+_e]="webkit"+_,et["Moz"+_e]="moz"+_,et}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(_e){if(Xe[_e])return Xe[_e];if(!We[_e])return _e;var _=We[_e],et;for(et in _)if(_.hasOwnProperty(et)&&et in Ye)return Xe[_e]=_[et];return _e}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(_e,_){df.set(_e,_),fa(_,[_e])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(_e,_,et){var tt=_e.type||"unknown-event";_e.currentTarget=et,Ub(tt,_,void 0,_e),_e.currentTarget=null}function se(_e,_){_=(_&4)!==0;for(var et=0;et<_e.length;et++){var tt=_e[et],rt=tt.event;tt=tt.listeners;e:{var it=void 0;if(_)for(var st=tt.length-1;0<=st;st--){var at=tt[st],ct=at.instance,ut=at.currentTarget;if(at=at.listener,ct!==it&&rt.isPropagationStopped())break e;nf(rt,at,ut),it=ct}else for(st=0;st<tt.length;st++){if(at=tt[st],ct=at.instance,ut=at.currentTarget,at=at.listener,ct!==it&&rt.isPropagationStopped())break e;nf(rt,at,ut),it=ct}}}if(Qb)throw _e=Rb,Qb=!1,Rb=null,_e}function D(_e,_){var et=_[of];et===void 0&&(et=_[of]=new Set);var tt=_e+"__bubble";et.has(tt)||(pf(_,_e,2,!1),et.add(tt))}function qf(_e,_,et){var tt=0;_&&(tt|=4),pf(et,_e,tt,_)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(_e){if(!_e[rf]){_e[rf]=!0,da.forEach(function(et){et!=="selectionchange"&&(mf.has(et)||qf(et,!1,_e),qf(et,!0,_e))});var _=_e.nodeType===9?_e:_e.ownerDocument;_===null||_[rf]||(_[rf]=!0,qf("selectionchange",!1,_))}}function pf(_e,_,et,tt){switch(jd(_)){case 1:var rt=ed;break;case 4:rt=gd;break;default:rt=fd}et=rt.bind(null,_,et,_e),rt=void 0,!Lb||_!=="touchstart"&&_!=="touchmove"&&_!=="wheel"||(rt=!0),tt?rt!==void 0?_e.addEventListener(_,et,{capture:!0,passive:rt}):_e.addEventListener(_,et,!0):rt!==void 0?_e.addEventListener(_,et,{passive:rt}):_e.addEventListener(_,et,!1)}function hd(_e,_,et,tt,rt){var it=tt;if(!(_&1)&&!(_&2)&&tt!==null)e:for(;;){if(tt===null)return;var st=tt.tag;if(st===3||st===4){var at=tt.stateNode.containerInfo;if(at===rt||at.nodeType===8&&at.parentNode===rt)break;if(st===4)for(st=tt.return;st!==null;){var ct=st.tag;if((ct===3||ct===4)&&(ct=st.stateNode.containerInfo,ct===rt||ct.nodeType===8&&ct.parentNode===rt))return;st=st.return}for(;at!==null;){if(st=Wc(at),st===null)return;if(ct=st.tag,ct===5||ct===6){tt=it=st;continue e}at=at.parentNode}}tt=tt.return}Jb(function(){var ut=it,dt=xb(et),ot=[];e:{var nt=df.get(_e);if(nt!==void 0){var lt=td,ht=_e;switch(_e){case"keypress":if(od(et)===0)break e;case"keydown":case"keyup":lt=Rd;break;case"focusin":ht="focus",lt=Fd;break;case"focusout":ht="blur",lt=Fd;break;case"beforeblur":case"afterblur":lt=Fd;break;case"click":if(et.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":lt=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":lt=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":lt=Vd;break;case $e:case af:case bf:lt=Hd;break;case cf:lt=Xd;break;case"scroll":lt=vd;break;case"wheel":lt=Zd;break;case"copy":case"cut":case"paste":lt=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":lt=Td}var ft=(_&4)!==0,gt=!ft&&_e==="scroll",mt=ft?nt!==null?nt+"Capture":null:nt;ft=[];for(var yt=ut,bt;yt!==null;){bt=yt;var _t=bt.stateNode;if(bt.tag===5&&_t!==null&&(bt=_t,mt!==null&&(_t=Kb(yt,mt),_t!=null&&ft.push(tf(yt,_t,bt)))),gt)break;yt=yt.return}0<ft.length&&(nt=new lt(nt,ht,null,et,dt),ot.push({event:nt,listeners:ft}))}}if(!(_&7)){e:{if(nt=_e==="mouseover"||_e==="pointerover",lt=_e==="mouseout"||_e==="pointerout",nt&&et!==wb&&(ht=et.relatedTarget||et.fromElement)&&(Wc(ht)||ht[uf]))break e;if((lt||nt)&&(nt=dt.window===dt?dt:(nt=dt.ownerDocument)?nt.defaultView||nt.parentWindow:window,lt?(ht=et.relatedTarget||et.toElement,lt=ut,ht=ht?Wc(ht):null,ht!==null&&(gt=Vb(ht),ht!==gt||ht.tag!==5&&ht.tag!==6)&&(ht=null)):(lt=null,ht=ut),lt!==ht)){if(ft=Bd,_t="onMouseLeave",mt="onMouseEnter",yt="mouse",(_e==="pointerout"||_e==="pointerover")&&(ft=Td,_t="onPointerLeave",mt="onPointerEnter",yt="pointer"),gt=lt==null?nt:ue(lt),bt=ht==null?nt:ue(ht),nt=new ft(_t,yt+"leave",lt,et,dt),nt.target=gt,nt.relatedTarget=bt,_t=null,Wc(dt)===ut&&(ft=new ft(mt,yt+"enter",ht,et,dt),ft.target=bt,ft.relatedTarget=gt,_t=ft),gt=_t,lt&&ht)t:{for(ft=lt,mt=ht,yt=0,bt=ft;bt;bt=vf(bt))yt++;for(bt=0,_t=mt;_t;_t=vf(_t))bt++;for(;0<yt-bt;)ft=vf(ft),yt--;for(;0<bt-yt;)mt=vf(mt),bt--;for(;yt--;){if(ft===mt||mt!==null&&ft===mt.alternate)break t;ft=vf(ft),mt=vf(mt)}ft=null}else ft=null;lt!==null&&wf(ot,nt,lt,ft,!1),ht!==null&&gt!==null&&wf(ot,gt,ht,ft,!0)}}e:{if(nt=ut?ue(ut):window,lt=nt.nodeName&&nt.nodeName.toLowerCase(),lt==="select"||lt==="input"&&nt.type==="file")var vt=ve;else if(me(nt))if(we)vt=Fe;else{vt=De;var xt=Ce}else(lt=nt.nodeName)&&lt.toLowerCase()==="input"&&(nt.type==="checkbox"||nt.type==="radio")&&(vt=Ee);if(vt&&(vt=vt(_e,ut))){ne(ot,vt,et,dt);break e}xt&&xt(_e,nt,ut),_e==="focusout"&&(xt=nt._wrapperState)&&xt.controlled&&nt.type==="number"&&cb(nt,"number",nt.value)}switch(xt=ut?ue(ut):window,_e){case"focusin":(me(xt)||xt.contentEditable==="true")&&(Qe=xt,Re=ut,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue(ot,et,dt);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(ot,et,dt)}var wt;if(ae)e:{switch(_e){case"compositionstart":var Tt="onCompositionStart";break e;case"compositionend":Tt="onCompositionEnd";break e;case"compositionupdate":Tt="onCompositionUpdate";break e}Tt=void 0}else ie?ge(_e,et)&&(Tt="onCompositionEnd"):_e==="keydown"&&et.keyCode===229&&(Tt="onCompositionStart");Tt&&(de&&et.locale!=="ko"&&(ie||Tt!=="onCompositionStart"?Tt==="onCompositionEnd"&&ie&&(wt=nd()):(kd=dt,ld="value"in kd?kd.value:kd.textContent,ie=!0)),xt=oe(ut,Tt),0<xt.length&&(Tt=new Ld(Tt,_e,null,et,dt),ot.push({event:Tt,listeners:xt}),wt?Tt.data=wt:(wt=he(et),wt!==null&&(Tt.data=wt)))),(wt=ce?je(_e,et):ke(_e,et))&&(ut=oe(ut,"onBeforeInput"),0<ut.length&&(dt=new Ld("onBeforeInput","beforeinput",null,et,dt),ot.push({event:dt,listeners:ut}),dt.data=wt))}se(ot,_)})}function tf(_e,_,et){return{instance:_e,listener:_,currentTarget:et}}function oe(_e,_){for(var et=_+"Capture",tt=[];_e!==null;){var rt=_e,it=rt.stateNode;rt.tag===5&&it!==null&&(rt=it,it=Kb(_e,et),it!=null&&tt.unshift(tf(_e,it,rt)),it=Kb(_e,_),it!=null&&tt.push(tf(_e,it,rt))),_e=_e.return}return tt}function vf(_e){if(_e===null)return null;do _e=_e.return;while(_e&&_e.tag!==5);return _e||null}function wf(_e,_,et,tt,rt){for(var it=_._reactName,st=[];et!==null&&et!==tt;){var at=et,ct=at.alternate,ut=at.stateNode;if(ct!==null&&ct===tt)break;at.tag===5&&ut!==null&&(at=ut,rt?(ct=Kb(et,it),ct!=null&&st.unshift(tf(et,ct,at))):rt||(ct=Kb(et,it),ct!=null&&st.push(tf(et,ct,at)))),et=et.return}st.length!==0&&_e.push({event:_,listeners:st})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(_e){return(typeof _e=="string"?_e:""+_e).replace(xf,`
`).replace(yf,"")}function Af(_e,_,et){if(_=zf(_),zf(_e)!==_&&et)throw Error(p$2(425))}function Bf(){}var Cf=null,Df=null;function Ef(_e,_){return _e==="textarea"||_e==="noscript"||typeof _.children=="string"||typeof _.children=="number"||typeof _.dangerouslySetInnerHTML=="object"&&_.dangerouslySetInnerHTML!==null&&_.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(_e){return Hf.resolve(null).then(_e).catch(If)}:Ff;function If(_e){setTimeout(function(){throw _e})}function Kf(_e,_){var et=_,tt=0;do{var rt=et.nextSibling;if(_e.removeChild(et),rt&&rt.nodeType===8)if(et=rt.data,et==="/$"){if(tt===0){_e.removeChild(rt),bd(_);return}tt--}else et!=="$"&&et!=="$?"&&et!=="$!"||tt++;et=rt}while(et);bd(_)}function Lf(_e){for(;_e!=null;_e=_e.nextSibling){var _=_e.nodeType;if(_===1||_===3)break;if(_===8){if(_=_e.data,_==="$"||_==="$!"||_==="$?")break;if(_==="/$")return null}}return _e}function Mf(_e){_e=_e.previousSibling;for(var _=0;_e;){if(_e.nodeType===8){var et=_e.data;if(et==="$"||et==="$!"||et==="$?"){if(_===0)return _e;_--}else et==="/$"&&_++}_e=_e.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(_e){var _=_e[Of];if(_)return _;for(var et=_e.parentNode;et;){if(_=et[uf]||et[Of]){if(et=_.alternate,_.child!==null||et!==null&&et.child!==null)for(_e=Mf(_e);_e!==null;){if(et=_e[Of])return et;_e=Mf(_e)}return _}_e=et,et=_e.parentNode}return null}function Cb(_e){return _e=_e[Of]||_e[uf],!_e||_e.tag!==5&&_e.tag!==6&&_e.tag!==13&&_e.tag!==3?null:_e}function ue(_e){if(_e.tag===5||_e.tag===6)return _e.stateNode;throw Error(p$2(33))}function Db(_e){return _e[Pf]||null}var Sf=[],Tf=-1;function Uf(_e){return{current:_e}}function E(_e){0>Tf||(_e.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G(_e,_){Tf++,Sf[Tf]=_e.current,_e.current=_}var Vf={},H$1=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(_e,_){var et=_e.type.contextTypes;if(!et)return Vf;var tt=_e.stateNode;if(tt&&tt.__reactInternalMemoizedUnmaskedChildContext===_)return tt.__reactInternalMemoizedMaskedChildContext;var rt={},it;for(it in et)rt[it]=_[it];return tt&&(_e=_e.stateNode,_e.__reactInternalMemoizedUnmaskedChildContext=_,_e.__reactInternalMemoizedMaskedChildContext=rt),rt}function Zf(_e){return _e=_e.childContextTypes,_e!=null}function $f(){E(Wf),E(H$1)}function ag(_e,_,et){if(H$1.current!==Vf)throw Error(p$2(168));G(H$1,_),G(Wf,et)}function bg(_e,_,et){var tt=_e.stateNode;if(_=_.childContextTypes,typeof tt.getChildContext!="function")return et;tt=tt.getChildContext();for(var rt in tt)if(!(rt in _))throw Error(p$2(108,Ra(_e)||"Unknown",rt));return A$1({},et,tt)}function cg(_e){return _e=(_e=_e.stateNode)&&_e.__reactInternalMemoizedMergedChildContext||Vf,Xf=H$1.current,G(H$1,_e),G(Wf,Wf.current),!0}function dg(_e,_,et){var tt=_e.stateNode;if(!tt)throw Error(p$2(169));et?(_e=bg(_e,_,Xf),tt.__reactInternalMemoizedMergedChildContext=_e,E(Wf),E(H$1),G(H$1,_e)):E(Wf),G(Wf,et)}var eg=null,fg=!1,gg=!1;function hg(_e){eg===null?eg=[_e]:eg.push(_e)}function ig(_e){fg=!0,hg(_e)}function jg(){if(!gg&&eg!==null){gg=!0;var _e=0,_=C;try{var et=eg;for(C=1;_e<et.length;_e++){var tt=et[_e];do tt=tt(!0);while(tt!==null)}eg=null,fg=!1}catch(rt){throw eg!==null&&(eg=eg.slice(_e+1)),ac(fc,jg),rt}finally{C=_,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(_e,_){kg[lg++]=ng,kg[lg++]=mg,mg=_e,ng=_}function ug(_e,_,et){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=_e;var tt=rg;_e=sg;var rt=32-oc(tt)-1;tt&=~(1<<rt),et+=1;var it=32-oc(_)+rt;if(30<it){var st=rt-rt%5;it=(tt&(1<<st)-1).toString(32),tt>>=st,rt-=st,rg=1<<32-oc(_)+rt|et<<rt|tt,sg=it+_e}else rg=1<<it|et<<rt|tt,sg=_e}function vg(_e){_e.return!==null&&(tg(_e,1),ug(_e,1,0))}function wg(_e){for(;_e===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;_e===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I=!1,zg=null;function Ag(_e,_){var et=Bg(5,null,null,0);et.elementType="DELETED",et.stateNode=_,et.return=_e,_=_e.deletions,_===null?(_e.deletions=[et],_e.flags|=16):_.push(et)}function Cg(_e,_){switch(_e.tag){case 5:var et=_e.type;return _=_.nodeType!==1||et.toLowerCase()!==_.nodeName.toLowerCase()?null:_,_!==null?(_e.stateNode=_,xg=_e,yg=Lf(_.firstChild),!0):!1;case 6:return _=_e.pendingProps===""||_.nodeType!==3?null:_,_!==null?(_e.stateNode=_,xg=_e,yg=null,!0):!1;case 13:return _=_.nodeType!==8?null:_,_!==null?(et=qg!==null?{id:rg,overflow:sg}:null,_e.memoizedState={dehydrated:_,treeContext:et,retryLane:1073741824},et=Bg(18,null,null,0),et.stateNode=_,et.return=_e,_e.child=et,xg=_e,yg=null,!0):!1;default:return!1}}function Dg(_e){return(_e.mode&1)!==0&&(_e.flags&128)===0}function Eg(_e){if(I){var _=yg;if(_){var et=_;if(!Cg(_e,_)){if(Dg(_e))throw Error(p$2(418));_=Lf(et.nextSibling);var tt=xg;_&&Cg(_e,_)?Ag(tt,et):(_e.flags=_e.flags&-4097|2,I=!1,xg=_e)}}else{if(Dg(_e))throw Error(p$2(418));_e.flags=_e.flags&-4097|2,I=!1,xg=_e}}}function Fg(_e){for(_e=_e.return;_e!==null&&_e.tag!==5&&_e.tag!==3&&_e.tag!==13;)_e=_e.return;xg=_e}function Gg(_e){if(_e!==xg)return!1;if(!I)return Fg(_e),I=!0,!1;var _;if((_=_e.tag!==3)&&!(_=_e.tag!==5)&&(_=_e.type,_=_!=="head"&&_!=="body"&&!Ef(_e.type,_e.memoizedProps)),_&&(_=yg)){if(Dg(_e))throw Hg(),Error(p$2(418));for(;_;)Ag(_e,_),_=Lf(_.nextSibling)}if(Fg(_e),_e.tag===13){if(_e=_e.memoizedState,_e=_e!==null?_e.dehydrated:null,!_e)throw Error(p$2(317));e:{for(_e=_e.nextSibling,_=0;_e;){if(_e.nodeType===8){var et=_e.data;if(et==="/$"){if(_===0){yg=Lf(_e.nextSibling);break e}_--}else et!=="$"&&et!=="$!"&&et!=="$?"||_++}_e=_e.nextSibling}yg=null}}else yg=xg?Lf(_e.stateNode.nextSibling):null;return!0}function Hg(){for(var _e=yg;_e;)_e=Lf(_e.nextSibling)}function Ig(){yg=xg=null,I=!1}function Jg(_e){zg===null?zg=[_e]:zg.push(_e)}var Kg=ua.ReactCurrentBatchConfig;function Lg(_e,_,et){if(_e=et.ref,_e!==null&&typeof _e!="function"&&typeof _e!="object"){if(et._owner){if(et=et._owner,et){if(et.tag!==1)throw Error(p$2(309));var tt=et.stateNode}if(!tt)throw Error(p$2(147,_e));var rt=tt,it=""+_e;return _!==null&&_.ref!==null&&typeof _.ref=="function"&&_.ref._stringRef===it?_.ref:(_=function(st){var at=rt.refs;st===null?delete at[it]:at[it]=st},_._stringRef=it,_)}if(typeof _e!="string")throw Error(p$2(284));if(!et._owner)throw Error(p$2(290,_e))}return _e}function Mg(_e,_){throw _e=Object.prototype.toString.call(_),Error(p$2(31,_e==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":_e))}function Ng(_e){var _=_e._init;return _(_e._payload)}function Og(_e){function _(mt,yt){if(_e){var bt=mt.deletions;bt===null?(mt.deletions=[yt],mt.flags|=16):bt.push(yt)}}function et(mt,yt){if(!_e)return null;for(;yt!==null;)_(mt,yt),yt=yt.sibling;return null}function tt(mt,yt){for(mt=new Map;yt!==null;)yt.key!==null?mt.set(yt.key,yt):mt.set(yt.index,yt),yt=yt.sibling;return mt}function rt(mt,yt){return mt=Pg(mt,yt),mt.index=0,mt.sibling=null,mt}function it(mt,yt,bt){return mt.index=bt,_e?(bt=mt.alternate,bt!==null?(bt=bt.index,bt<yt?(mt.flags|=2,yt):bt):(mt.flags|=2,yt)):(mt.flags|=1048576,yt)}function st(mt){return _e&&mt.alternate===null&&(mt.flags|=2),mt}function at(mt,yt,bt,_t){return yt===null||yt.tag!==6?(yt=Qg(bt,mt.mode,_t),yt.return=mt,yt):(yt=rt(yt,bt),yt.return=mt,yt)}function ct(mt,yt,bt,_t){var vt=bt.type;return vt===ya?dt(mt,yt,bt.props.children,_t,bt.key):yt!==null&&(yt.elementType===vt||typeof vt=="object"&&vt!==null&&vt.$$typeof===Ha&&Ng(vt)===yt.type)?(_t=rt(yt,bt.props),_t.ref=Lg(mt,yt,bt),_t.return=mt,_t):(_t=Rg(bt.type,bt.key,bt.props,null,mt.mode,_t),_t.ref=Lg(mt,yt,bt),_t.return=mt,_t)}function ut(mt,yt,bt,_t){return yt===null||yt.tag!==4||yt.stateNode.containerInfo!==bt.containerInfo||yt.stateNode.implementation!==bt.implementation?(yt=Sg(bt,mt.mode,_t),yt.return=mt,yt):(yt=rt(yt,bt.children||[]),yt.return=mt,yt)}function dt(mt,yt,bt,_t,vt){return yt===null||yt.tag!==7?(yt=Tg(bt,mt.mode,_t,vt),yt.return=mt,yt):(yt=rt(yt,bt),yt.return=mt,yt)}function ot(mt,yt,bt){if(typeof yt=="string"&&yt!==""||typeof yt=="number")return yt=Qg(""+yt,mt.mode,bt),yt.return=mt,yt;if(typeof yt=="object"&&yt!==null){switch(yt.$$typeof){case va:return bt=Rg(yt.type,yt.key,yt.props,null,mt.mode,bt),bt.ref=Lg(mt,null,yt),bt.return=mt,bt;case wa:return yt=Sg(yt,mt.mode,bt),yt.return=mt,yt;case Ha:var _t=yt._init;return ot(mt,_t(yt._payload),bt)}if(eb(yt)||Ka(yt))return yt=Tg(yt,mt.mode,bt,null),yt.return=mt,yt;Mg(mt,yt)}return null}function nt(mt,yt,bt,_t){var vt=yt!==null?yt.key:null;if(typeof bt=="string"&&bt!==""||typeof bt=="number")return vt!==null?null:at(mt,yt,""+bt,_t);if(typeof bt=="object"&&bt!==null){switch(bt.$$typeof){case va:return bt.key===vt?ct(mt,yt,bt,_t):null;case wa:return bt.key===vt?ut(mt,yt,bt,_t):null;case Ha:return vt=bt._init,nt(mt,yt,vt(bt._payload),_t)}if(eb(bt)||Ka(bt))return vt!==null?null:dt(mt,yt,bt,_t,null);Mg(mt,bt)}return null}function lt(mt,yt,bt,_t,vt){if(typeof _t=="string"&&_t!==""||typeof _t=="number")return mt=mt.get(bt)||null,at(yt,mt,""+_t,vt);if(typeof _t=="object"&&_t!==null){switch(_t.$$typeof){case va:return mt=mt.get(_t.key===null?bt:_t.key)||null,ct(yt,mt,_t,vt);case wa:return mt=mt.get(_t.key===null?bt:_t.key)||null,ut(yt,mt,_t,vt);case Ha:var xt=_t._init;return lt(mt,yt,bt,xt(_t._payload),vt)}if(eb(_t)||Ka(_t))return mt=mt.get(bt)||null,dt(yt,mt,_t,vt,null);Mg(yt,_t)}return null}function ht(mt,yt,bt,_t){for(var vt=null,xt=null,wt=yt,Tt=yt=0,St=null;wt!==null&&Tt<bt.length;Tt++){wt.index>Tt?(St=wt,wt=null):St=wt.sibling;var Et=nt(mt,wt,bt[Tt],_t);if(Et===null){wt===null&&(wt=St);break}_e&&wt&&Et.alternate===null&&_(mt,wt),yt=it(Et,yt,Tt),xt===null?vt=Et:xt.sibling=Et,xt=Et,wt=St}if(Tt===bt.length)return et(mt,wt),I&&tg(mt,Tt),vt;if(wt===null){for(;Tt<bt.length;Tt++)wt=ot(mt,bt[Tt],_t),wt!==null&&(yt=it(wt,yt,Tt),xt===null?vt=wt:xt.sibling=wt,xt=wt);return I&&tg(mt,Tt),vt}for(wt=tt(mt,wt);Tt<bt.length;Tt++)St=lt(wt,mt,Tt,bt[Tt],_t),St!==null&&(_e&&St.alternate!==null&&wt.delete(St.key===null?Tt:St.key),yt=it(St,yt,Tt),xt===null?vt=St:xt.sibling=St,xt=St);return _e&&wt.forEach(function(Ot){return _(mt,Ot)}),I&&tg(mt,Tt),vt}function ft(mt,yt,bt,_t){var vt=Ka(bt);if(typeof vt!="function")throw Error(p$2(150));if(bt=vt.call(bt),bt==null)throw Error(p$2(151));for(var xt=vt=null,wt=yt,Tt=yt=0,St=null,Et=bt.next();wt!==null&&!Et.done;Tt++,Et=bt.next()){wt.index>Tt?(St=wt,wt=null):St=wt.sibling;var Ot=nt(mt,wt,Et.value,_t);if(Ot===null){wt===null&&(wt=St);break}_e&&wt&&Ot.alternate===null&&_(mt,wt),yt=it(Ot,yt,Tt),xt===null?vt=Ot:xt.sibling=Ot,xt=Ot,wt=St}if(Et.done)return et(mt,wt),I&&tg(mt,Tt),vt;if(wt===null){for(;!Et.done;Tt++,Et=bt.next())Et=ot(mt,Et.value,_t),Et!==null&&(yt=it(Et,yt,Tt),xt===null?vt=Et:xt.sibling=Et,xt=Et);return I&&tg(mt,Tt),vt}for(wt=tt(mt,wt);!Et.done;Tt++,Et=bt.next())Et=lt(wt,mt,Tt,Et.value,_t),Et!==null&&(_e&&Et.alternate!==null&&wt.delete(Et.key===null?Tt:Et.key),yt=it(Et,yt,Tt),xt===null?vt=Et:xt.sibling=Et,xt=Et);return _e&&wt.forEach(function(Rt){return _(mt,Rt)}),I&&tg(mt,Tt),vt}function gt(mt,yt,bt,_t){if(typeof bt=="object"&&bt!==null&&bt.type===ya&&bt.key===null&&(bt=bt.props.children),typeof bt=="object"&&bt!==null){switch(bt.$$typeof){case va:e:{for(var vt=bt.key,xt=yt;xt!==null;){if(xt.key===vt){if(vt=bt.type,vt===ya){if(xt.tag===7){et(mt,xt.sibling),yt=rt(xt,bt.props.children),yt.return=mt,mt=yt;break e}}else if(xt.elementType===vt||typeof vt=="object"&&vt!==null&&vt.$$typeof===Ha&&Ng(vt)===xt.type){et(mt,xt.sibling),yt=rt(xt,bt.props),yt.ref=Lg(mt,xt,bt),yt.return=mt,mt=yt;break e}et(mt,xt);break}else _(mt,xt);xt=xt.sibling}bt.type===ya?(yt=Tg(bt.props.children,mt.mode,_t,bt.key),yt.return=mt,mt=yt):(_t=Rg(bt.type,bt.key,bt.props,null,mt.mode,_t),_t.ref=Lg(mt,yt,bt),_t.return=mt,mt=_t)}return st(mt);case wa:e:{for(xt=bt.key;yt!==null;){if(yt.key===xt)if(yt.tag===4&&yt.stateNode.containerInfo===bt.containerInfo&&yt.stateNode.implementation===bt.implementation){et(mt,yt.sibling),yt=rt(yt,bt.children||[]),yt.return=mt,mt=yt;break e}else{et(mt,yt);break}else _(mt,yt);yt=yt.sibling}yt=Sg(bt,mt.mode,_t),yt.return=mt,mt=yt}return st(mt);case Ha:return xt=bt._init,gt(mt,yt,xt(bt._payload),_t)}if(eb(bt))return ht(mt,yt,bt,_t);if(Ka(bt))return ft(mt,yt,bt,_t);Mg(mt,bt)}return typeof bt=="string"&&bt!==""||typeof bt=="number"?(bt=""+bt,yt!==null&&yt.tag===6?(et(mt,yt.sibling),yt=rt(yt,bt),yt.return=mt,mt=yt):(et(mt,yt),yt=Qg(bt,mt.mode,_t),yt.return=mt,mt=yt),st(mt)):et(mt,yt)}return gt}var Ug=Og(!0),Vg=Og(!1),Wg=Uf(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah(_e){var _=Wg.current;E(Wg),_e._currentValue=_}function bh(_e,_,et){for(;_e!==null;){var tt=_e.alternate;if((_e.childLanes&_)!==_?(_e.childLanes|=_,tt!==null&&(tt.childLanes|=_)):tt!==null&&(tt.childLanes&_)!==_&&(tt.childLanes|=_),_e===et)break;_e=_e.return}}function ch(_e,_){Xg=_e,Zg=Yg=null,_e=_e.dependencies,_e!==null&&_e.firstContext!==null&&(_e.lanes&_&&(dh=!0),_e.firstContext=null)}function eh(_e){var _=_e._currentValue;if(Zg!==_e)if(_e={context:_e,memoizedValue:_,next:null},Yg===null){if(Xg===null)throw Error(p$2(308));Yg=_e,Xg.dependencies={lanes:0,firstContext:_e}}else Yg=Yg.next=_e;return _}var fh=null;function gh(_e){fh===null?fh=[_e]:fh.push(_e)}function hh(_e,_,et,tt){var rt=_.interleaved;return rt===null?(et.next=et,gh(_)):(et.next=rt.next,rt.next=et),_.interleaved=et,ih(_e,tt)}function ih(_e,_){_e.lanes|=_;var et=_e.alternate;for(et!==null&&(et.lanes|=_),et=_e,_e=_e.return;_e!==null;)_e.childLanes|=_,et=_e.alternate,et!==null&&(et.childLanes|=_),et=_e,_e=_e.return;return et.tag===3?et.stateNode:null}var jh=!1;function kh(_e){_e.updateQueue={baseState:_e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh(_e,_){_e=_e.updateQueue,_.updateQueue===_e&&(_.updateQueue={baseState:_e.baseState,firstBaseUpdate:_e.firstBaseUpdate,lastBaseUpdate:_e.lastBaseUpdate,shared:_e.shared,effects:_e.effects})}function mh(_e,_){return{eventTime:_e,lane:_,tag:0,payload:null,callback:null,next:null}}function nh(_e,_,et){var tt=_e.updateQueue;if(tt===null)return null;if(tt=tt.shared,K&2){var rt=tt.pending;return rt===null?_.next=_:(_.next=rt.next,rt.next=_),tt.pending=_,ih(_e,et)}return rt=tt.interleaved,rt===null?(_.next=_,gh(tt)):(_.next=rt.next,rt.next=_),tt.interleaved=_,ih(_e,et)}function oh(_e,_,et){if(_=_.updateQueue,_!==null&&(_=_.shared,(et&4194240)!==0)){var tt=_.lanes;tt&=_e.pendingLanes,et|=tt,_.lanes=et,Cc(_e,et)}}function ph(_e,_){var et=_e.updateQueue,tt=_e.alternate;if(tt!==null&&(tt=tt.updateQueue,et===tt)){var rt=null,it=null;if(et=et.firstBaseUpdate,et!==null){do{var st={eventTime:et.eventTime,lane:et.lane,tag:et.tag,payload:et.payload,callback:et.callback,next:null};it===null?rt=it=st:it=it.next=st,et=et.next}while(et!==null);it===null?rt=it=_:it=it.next=_}else rt=it=_;et={baseState:tt.baseState,firstBaseUpdate:rt,lastBaseUpdate:it,shared:tt.shared,effects:tt.effects},_e.updateQueue=et;return}_e=et.lastBaseUpdate,_e===null?et.firstBaseUpdate=_:_e.next=_,et.lastBaseUpdate=_}function qh(_e,_,et,tt){var rt=_e.updateQueue;jh=!1;var it=rt.firstBaseUpdate,st=rt.lastBaseUpdate,at=rt.shared.pending;if(at!==null){rt.shared.pending=null;var ct=at,ut=ct.next;ct.next=null,st===null?it=ut:st.next=ut,st=ct;var dt=_e.alternate;dt!==null&&(dt=dt.updateQueue,at=dt.lastBaseUpdate,at!==st&&(at===null?dt.firstBaseUpdate=ut:at.next=ut,dt.lastBaseUpdate=ct))}if(it!==null){var ot=rt.baseState;st=0,dt=ut=ct=null,at=it;do{var nt=at.lane,lt=at.eventTime;if((tt&nt)===nt){dt!==null&&(dt=dt.next={eventTime:lt,lane:0,tag:at.tag,payload:at.payload,callback:at.callback,next:null});e:{var ht=_e,ft=at;switch(nt=_,lt=et,ft.tag){case 1:if(ht=ft.payload,typeof ht=="function"){ot=ht.call(lt,ot,nt);break e}ot=ht;break e;case 3:ht.flags=ht.flags&-65537|128;case 0:if(ht=ft.payload,nt=typeof ht=="function"?ht.call(lt,ot,nt):ht,nt==null)break e;ot=A$1({},ot,nt);break e;case 2:jh=!0}}at.callback!==null&&at.lane!==0&&(_e.flags|=64,nt=rt.effects,nt===null?rt.effects=[at]:nt.push(at))}else lt={eventTime:lt,lane:nt,tag:at.tag,payload:at.payload,callback:at.callback,next:null},dt===null?(ut=dt=lt,ct=ot):dt=dt.next=lt,st|=nt;if(at=at.next,at===null){if(at=rt.shared.pending,at===null)break;nt=at,at=nt.next,nt.next=null,rt.lastBaseUpdate=nt,rt.shared.pending=null}}while(!0);if(dt===null&&(ct=ot),rt.baseState=ct,rt.firstBaseUpdate=ut,rt.lastBaseUpdate=dt,_=rt.shared.interleaved,_!==null){rt=_;do st|=rt.lane,rt=rt.next;while(rt!==_)}else it===null&&(rt.shared.lanes=0);rh|=st,_e.lanes=st,_e.memoizedState=ot}}function sh(_e,_,et){if(_e=_.effects,_.effects=null,_e!==null)for(_=0;_<_e.length;_++){var tt=_e[_],rt=tt.callback;if(rt!==null){if(tt.callback=null,tt=et,typeof rt!="function")throw Error(p$2(191,rt));rt.call(tt)}}}var th={},uh=Uf(th),vh=Uf(th),wh=Uf(th);function xh(_e){if(_e===th)throw Error(p$2(174));return _e}function yh(_e,_){switch(G(wh,_),G(vh,_e),G(uh,th),_e=_.nodeType,_e){case 9:case 11:_=(_=_.documentElement)?_.namespaceURI:lb(null,"");break;default:_e=_e===8?_.parentNode:_,_=_e.namespaceURI||null,_e=_e.tagName,_=lb(_,_e)}E(uh),G(uh,_)}function zh(){E(uh),E(vh),E(wh)}function Ah(_e){xh(wh.current);var _=xh(uh.current),et=lb(_,_e.type);_!==et&&(G(vh,_e),G(uh,et))}function Bh(_e){vh.current===_e&&(E(uh),E(vh))}var L=Uf(0);function Ch(_e){for(var _=_e;_!==null;){if(_.tag===13){var et=_.memoizedState;if(et!==null&&(et=et.dehydrated,et===null||et.data==="$?"||et.data==="$!"))return _}else if(_.tag===19&&_.memoizedProps.revealOrder!==void 0){if(_.flags&128)return _}else if(_.child!==null){_.child.return=_,_=_.child;continue}if(_===_e)break;for(;_.sibling===null;){if(_.return===null||_.return===_e)return null;_=_.return}_.sibling.return=_.return,_=_.sibling}return null}var Dh=[];function Eh(){for(var _e=0;_e<Dh.length;_e++)Dh[_e]._workInProgressVersionPrimary=null;Dh.length=0}var Fh=ua.ReactCurrentDispatcher,Gh=ua.ReactCurrentBatchConfig,Hh=0,M$1=null,N$1=null,O=null,Ih=!1,Jh=!1,Kh=0,Lh=0;function P(){throw Error(p$2(321))}function Mh(_e,_){if(_===null)return!1;for(var et=0;et<_.length&&et<_e.length;et++)if(!He(_e[et],_[et]))return!1;return!0}function Nh(_e,_,et,tt,rt,it){if(Hh=it,M$1=_,_.memoizedState=null,_.updateQueue=null,_.lanes=0,Fh.current=_e===null||_e.memoizedState===null?Oh:Ph,_e=et(tt,rt),Jh){it=0;do{if(Jh=!1,Kh=0,25<=it)throw Error(p$2(301));it+=1,O=N$1=null,_.updateQueue=null,Fh.current=Qh,_e=et(tt,rt)}while(Jh)}if(Fh.current=Rh,_=N$1!==null&&N$1.next!==null,Hh=0,O=N$1=M$1=null,Ih=!1,_)throw Error(p$2(300));return _e}function Sh(){var _e=Kh!==0;return Kh=0,_e}function Th(){var _e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return O===null?M$1.memoizedState=O=_e:O=O.next=_e,O}function Uh(){if(N$1===null){var _e=M$1.alternate;_e=_e!==null?_e.memoizedState:null}else _e=N$1.next;var _=O===null?M$1.memoizedState:O.next;if(_!==null)O=_,N$1=_e;else{if(_e===null)throw Error(p$2(310));N$1=_e,_e={memoizedState:N$1.memoizedState,baseState:N$1.baseState,baseQueue:N$1.baseQueue,queue:N$1.queue,next:null},O===null?M$1.memoizedState=O=_e:O=O.next=_e}return O}function Vh(_e,_){return typeof _=="function"?_(_e):_}function Wh(_e){var _=Uh(),et=_.queue;if(et===null)throw Error(p$2(311));et.lastRenderedReducer=_e;var tt=N$1,rt=tt.baseQueue,it=et.pending;if(it!==null){if(rt!==null){var st=rt.next;rt.next=it.next,it.next=st}tt.baseQueue=rt=it,et.pending=null}if(rt!==null){it=rt.next,tt=tt.baseState;var at=st=null,ct=null,ut=it;do{var dt=ut.lane;if((Hh&dt)===dt)ct!==null&&(ct=ct.next={lane:0,action:ut.action,hasEagerState:ut.hasEagerState,eagerState:ut.eagerState,next:null}),tt=ut.hasEagerState?ut.eagerState:_e(tt,ut.action);else{var ot={lane:dt,action:ut.action,hasEagerState:ut.hasEagerState,eagerState:ut.eagerState,next:null};ct===null?(at=ct=ot,st=tt):ct=ct.next=ot,M$1.lanes|=dt,rh|=dt}ut=ut.next}while(ut!==null&&ut!==it);ct===null?st=tt:ct.next=at,He(tt,_.memoizedState)||(dh=!0),_.memoizedState=tt,_.baseState=st,_.baseQueue=ct,et.lastRenderedState=tt}if(_e=et.interleaved,_e!==null){rt=_e;do it=rt.lane,M$1.lanes|=it,rh|=it,rt=rt.next;while(rt!==_e)}else rt===null&&(et.lanes=0);return[_.memoizedState,et.dispatch]}function Xh(_e){var _=Uh(),et=_.queue;if(et===null)throw Error(p$2(311));et.lastRenderedReducer=_e;var tt=et.dispatch,rt=et.pending,it=_.memoizedState;if(rt!==null){et.pending=null;var st=rt=rt.next;do it=_e(it,st.action),st=st.next;while(st!==rt);He(it,_.memoizedState)||(dh=!0),_.memoizedState=it,_.baseQueue===null&&(_.baseState=it),et.lastRenderedState=it}return[it,tt]}function Yh(){}function Zh(_e,_){var et=M$1,tt=Uh(),rt=_(),it=!He(tt.memoizedState,rt);if(it&&(tt.memoizedState=rt,dh=!0),tt=tt.queue,$h(ai.bind(null,et,tt,_e),[_e]),tt.getSnapshot!==_||it||O!==null&&O.memoizedState.tag&1){if(et.flags|=2048,bi(9,ci.bind(null,et,tt,rt,_),void 0,null),Q===null)throw Error(p$2(349));Hh&30||di(et,_,rt)}return rt}function di(_e,_,et){_e.flags|=16384,_e={getSnapshot:_,value:et},_=M$1.updateQueue,_===null?(_={lastEffect:null,stores:null},M$1.updateQueue=_,_.stores=[_e]):(et=_.stores,et===null?_.stores=[_e]:et.push(_e))}function ci(_e,_,et,tt){_.value=et,_.getSnapshot=tt,ei(_)&&fi(_e)}function ai(_e,_,et){return et(function(){ei(_)&&fi(_e)})}function ei(_e){var _=_e.getSnapshot;_e=_e.value;try{var et=_();return!He(_e,et)}catch{return!0}}function fi(_e){var _=ih(_e,1);_!==null&&gi(_,_e,1,-1)}function hi(_e){var _=Th();return typeof _e=="function"&&(_e=_e()),_.memoizedState=_.baseState=_e,_e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:_e},_.queue=_e,_e=_e.dispatch=ii.bind(null,M$1,_e),[_.memoizedState,_e]}function bi(_e,_,et,tt){return _e={tag:_e,create:_,destroy:et,deps:tt,next:null},_=M$1.updateQueue,_===null?(_={lastEffect:null,stores:null},M$1.updateQueue=_,_.lastEffect=_e.next=_e):(et=_.lastEffect,et===null?_.lastEffect=_e.next=_e:(tt=et.next,et.next=_e,_e.next=tt,_.lastEffect=_e)),_e}function ji(){return Uh().memoizedState}function ki(_e,_,et,tt){var rt=Th();M$1.flags|=_e,rt.memoizedState=bi(1|_,et,void 0,tt===void 0?null:tt)}function li(_e,_,et,tt){var rt=Uh();tt=tt===void 0?null:tt;var it=void 0;if(N$1!==null){var st=N$1.memoizedState;if(it=st.destroy,tt!==null&&Mh(tt,st.deps)){rt.memoizedState=bi(_,et,it,tt);return}}M$1.flags|=_e,rt.memoizedState=bi(1|_,et,it,tt)}function mi(_e,_){return ki(8390656,8,_e,_)}function $h(_e,_){return li(2048,8,_e,_)}function ni(_e,_){return li(4,2,_e,_)}function oi(_e,_){return li(4,4,_e,_)}function pi(_e,_){if(typeof _=="function")return _e=_e(),_(_e),function(){_(null)};if(_!=null)return _e=_e(),_.current=_e,function(){_.current=null}}function qi(_e,_,et){return et=et!=null?et.concat([_e]):null,li(4,4,pi.bind(null,_,_e),et)}function ri(){}function si(_e,_){var et=Uh();_=_===void 0?null:_;var tt=et.memoizedState;return tt!==null&&_!==null&&Mh(_,tt[1])?tt[0]:(et.memoizedState=[_e,_],_e)}function ti(_e,_){var et=Uh();_=_===void 0?null:_;var tt=et.memoizedState;return tt!==null&&_!==null&&Mh(_,tt[1])?tt[0]:(_e=_e(),et.memoizedState=[_e,_],_e)}function ui(_e,_,et){return Hh&21?(He(et,_)||(et=yc(),M$1.lanes|=et,rh|=et,_e.baseState=!0),_):(_e.baseState&&(_e.baseState=!1,dh=!0),_e.memoizedState=et)}function vi(_e,_){var et=C;C=et!==0&&4>et?et:4,_e(!0);var tt=Gh.transition;Gh.transition={};try{_e(!1),_()}finally{C=et,Gh.transition=tt}}function wi(){return Uh().memoizedState}function xi(_e,_,et){var tt=yi(_e);if(et={lane:tt,action:et,hasEagerState:!1,eagerState:null,next:null},zi(_e))Ai(_,et);else if(et=hh(_e,_,et,tt),et!==null){var rt=R();gi(et,_e,tt,rt),Bi(et,_,tt)}}function ii(_e,_,et){var tt=yi(_e),rt={lane:tt,action:et,hasEagerState:!1,eagerState:null,next:null};if(zi(_e))Ai(_,rt);else{var it=_e.alternate;if(_e.lanes===0&&(it===null||it.lanes===0)&&(it=_.lastRenderedReducer,it!==null))try{var st=_.lastRenderedState,at=it(st,et);if(rt.hasEagerState=!0,rt.eagerState=at,He(at,st)){var ct=_.interleaved;ct===null?(rt.next=rt,gh(_)):(rt.next=ct.next,ct.next=rt),_.interleaved=rt;return}}catch{}finally{}et=hh(_e,_,rt,tt),et!==null&&(rt=R(),gi(et,_e,tt,rt),Bi(et,_,tt))}}function zi(_e){var _=_e.alternate;return _e===M$1||_!==null&&_===M$1}function Ai(_e,_){Jh=Ih=!0;var et=_e.pending;et===null?_.next=_:(_.next=et.next,et.next=_),_e.pending=_}function Bi(_e,_,et){if(et&4194240){var tt=_.lanes;tt&=_e.pendingLanes,et|=tt,_.lanes=et,Cc(_e,et)}}var Rh={readContext:eh,useCallback:P,useContext:P,useEffect:P,useImperativeHandle:P,useInsertionEffect:P,useLayoutEffect:P,useMemo:P,useReducer:P,useRef:P,useState:P,useDebugValue:P,useDeferredValue:P,useTransition:P,useMutableSource:P,useSyncExternalStore:P,useId:P,unstable_isNewReconciler:!1},Oh={readContext:eh,useCallback:function(_e,_){return Th().memoizedState=[_e,_===void 0?null:_],_e},useContext:eh,useEffect:mi,useImperativeHandle:function(_e,_,et){return et=et!=null?et.concat([_e]):null,ki(4194308,4,pi.bind(null,_,_e),et)},useLayoutEffect:function(_e,_){return ki(4194308,4,_e,_)},useInsertionEffect:function(_e,_){return ki(4,2,_e,_)},useMemo:function(_e,_){var et=Th();return _=_===void 0?null:_,_e=_e(),et.memoizedState=[_e,_],_e},useReducer:function(_e,_,et){var tt=Th();return _=et!==void 0?et(_):_,tt.memoizedState=tt.baseState=_,_e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_e,lastRenderedState:_},tt.queue=_e,_e=_e.dispatch=xi.bind(null,M$1,_e),[tt.memoizedState,_e]},useRef:function(_e){var _=Th();return _e={current:_e},_.memoizedState=_e},useState:hi,useDebugValue:ri,useDeferredValue:function(_e){return Th().memoizedState=_e},useTransition:function(){var _e=hi(!1),_=_e[0];return _e=vi.bind(null,_e[1]),Th().memoizedState=_e,[_,_e]},useMutableSource:function(){},useSyncExternalStore:function(_e,_,et){var tt=M$1,rt=Th();if(I){if(et===void 0)throw Error(p$2(407));et=et()}else{if(et=_(),Q===null)throw Error(p$2(349));Hh&30||di(tt,_,et)}rt.memoizedState=et;var it={value:et,getSnapshot:_};return rt.queue=it,mi(ai.bind(null,tt,it,_e),[_e]),tt.flags|=2048,bi(9,ci.bind(null,tt,it,et,_),void 0,null),et},useId:function(){var _e=Th(),_=Q.identifierPrefix;if(I){var et=sg,tt=rg;et=(tt&~(1<<32-oc(tt)-1)).toString(32)+et,_=":"+_+"R"+et,et=Kh++,0<et&&(_+="H"+et.toString(32)),_+=":"}else et=Lh++,_=":"+_+"r"+et.toString(32)+":";return _e.memoizedState=_},unstable_isNewReconciler:!1},Ph={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Wh,useRef:ji,useState:function(){return Wh(Vh)},useDebugValue:ri,useDeferredValue:function(_e){var _=Uh();return ui(_,N$1.memoizedState,_e)},useTransition:function(){var _e=Wh(Vh)[0],_=Uh().memoizedState;return[_e,_]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1},Qh={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Xh,useRef:ji,useState:function(){return Xh(Vh)},useDebugValue:ri,useDeferredValue:function(_e){var _=Uh();return N$1===null?_.memoizedState=_e:ui(_,N$1.memoizedState,_e)},useTransition:function(){var _e=Xh(Vh)[0],_=Uh().memoizedState;return[_e,_]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1};function Ci(_e,_){if(_e&&_e.defaultProps){_=A$1({},_),_e=_e.defaultProps;for(var et in _e)_[et]===void 0&&(_[et]=_e[et]);return _}return _}function Di(_e,_,et,tt){_=_e.memoizedState,et=et(tt,_),et=et==null?_:A$1({},_,et),_e.memoizedState=et,_e.lanes===0&&(_e.updateQueue.baseState=et)}var Ei={isMounted:function(_e){return(_e=_e._reactInternals)?Vb(_e)===_e:!1},enqueueSetState:function(_e,_,et){_e=_e._reactInternals;var tt=R(),rt=yi(_e),it=mh(tt,rt);it.payload=_,et!=null&&(it.callback=et),_=nh(_e,it,rt),_!==null&&(gi(_,_e,rt,tt),oh(_,_e,rt))},enqueueReplaceState:function(_e,_,et){_e=_e._reactInternals;var tt=R(),rt=yi(_e),it=mh(tt,rt);it.tag=1,it.payload=_,et!=null&&(it.callback=et),_=nh(_e,it,rt),_!==null&&(gi(_,_e,rt,tt),oh(_,_e,rt))},enqueueForceUpdate:function(_e,_){_e=_e._reactInternals;var et=R(),tt=yi(_e),rt=mh(et,tt);rt.tag=2,_!=null&&(rt.callback=_),_=nh(_e,rt,tt),_!==null&&(gi(_,_e,tt,et),oh(_,_e,tt))}};function Fi(_e,_,et,tt,rt,it,st){return _e=_e.stateNode,typeof _e.shouldComponentUpdate=="function"?_e.shouldComponentUpdate(tt,it,st):_.prototype&&_.prototype.isPureReactComponent?!Ie(et,tt)||!Ie(rt,it):!0}function Gi(_e,_,et){var tt=!1,rt=Vf,it=_.contextType;return typeof it=="object"&&it!==null?it=eh(it):(rt=Zf(_)?Xf:H$1.current,tt=_.contextTypes,it=(tt=tt!=null)?Yf(_e,rt):Vf),_=new _(et,it),_e.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Ei,_e.stateNode=_,_._reactInternals=_e,tt&&(_e=_e.stateNode,_e.__reactInternalMemoizedUnmaskedChildContext=rt,_e.__reactInternalMemoizedMaskedChildContext=it),_}function Hi(_e,_,et,tt){_e=_.state,typeof _.componentWillReceiveProps=="function"&&_.componentWillReceiveProps(et,tt),typeof _.UNSAFE_componentWillReceiveProps=="function"&&_.UNSAFE_componentWillReceiveProps(et,tt),_.state!==_e&&Ei.enqueueReplaceState(_,_.state,null)}function Ii(_e,_,et,tt){var rt=_e.stateNode;rt.props=et,rt.state=_e.memoizedState,rt.refs={},kh(_e);var it=_.contextType;typeof it=="object"&&it!==null?rt.context=eh(it):(it=Zf(_)?Xf:H$1.current,rt.context=Yf(_e,it)),rt.state=_e.memoizedState,it=_.getDerivedStateFromProps,typeof it=="function"&&(Di(_e,_,it,et),rt.state=_e.memoizedState),typeof _.getDerivedStateFromProps=="function"||typeof rt.getSnapshotBeforeUpdate=="function"||typeof rt.UNSAFE_componentWillMount!="function"&&typeof rt.componentWillMount!="function"||(_=rt.state,typeof rt.componentWillMount=="function"&&rt.componentWillMount(),typeof rt.UNSAFE_componentWillMount=="function"&&rt.UNSAFE_componentWillMount(),_!==rt.state&&Ei.enqueueReplaceState(rt,rt.state,null),qh(_e,et,rt,tt),rt.state=_e.memoizedState),typeof rt.componentDidMount=="function"&&(_e.flags|=4194308)}function Ji(_e,_){try{var et="",tt=_;do et+=Pa(tt),tt=tt.return;while(tt);var rt=et}catch(it){rt=`
Error generating stack: `+it.message+`
`+it.stack}return{value:_e,source:_,stack:rt,digest:null}}function Ki(_e,_,et){return{value:_e,source:null,stack:et??null,digest:_??null}}function Li(_e,_){try{console.error(_.value)}catch(et){setTimeout(function(){throw et})}}var Mi=typeof WeakMap=="function"?WeakMap:Map;function Ni(_e,_,et){et=mh(-1,et),et.tag=3,et.payload={element:null};var tt=_.value;return et.callback=function(){Oi||(Oi=!0,Pi=tt),Li(_e,_)},et}function Qi(_e,_,et){et=mh(-1,et),et.tag=3;var tt=_e.type.getDerivedStateFromError;if(typeof tt=="function"){var rt=_.value;et.payload=function(){return tt(rt)},et.callback=function(){Li(_e,_)}}var it=_e.stateNode;return it!==null&&typeof it.componentDidCatch=="function"&&(et.callback=function(){Li(_e,_),typeof tt!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var st=_.stack;this.componentDidCatch(_.value,{componentStack:st!==null?st:""})}),et}function Si(_e,_,et){var tt=_e.pingCache;if(tt===null){tt=_e.pingCache=new Mi;var rt=new Set;tt.set(_,rt)}else rt=tt.get(_),rt===void 0&&(rt=new Set,tt.set(_,rt));rt.has(et)||(rt.add(et),_e=Ti.bind(null,_e,_,et),_.then(_e,_e))}function Ui(_e){do{var _;if((_=_e.tag===13)&&(_=_e.memoizedState,_=_!==null?_.dehydrated!==null:!0),_)return _e;_e=_e.return}while(_e!==null);return null}function Vi(_e,_,et,tt,rt){return _e.mode&1?(_e.flags|=65536,_e.lanes=rt,_e):(_e===_?_e.flags|=65536:(_e.flags|=128,et.flags|=131072,et.flags&=-52805,et.tag===1&&(et.alternate===null?et.tag=17:(_=mh(-1,1),_.tag=2,nh(et,_,1))),et.lanes|=1),_e)}var Wi=ua.ReactCurrentOwner,dh=!1;function Xi(_e,_,et,tt){_.child=_e===null?Vg(_,null,et,tt):Ug(_,_e.child,et,tt)}function Yi(_e,_,et,tt,rt){et=et.render;var it=_.ref;return ch(_,rt),tt=Nh(_e,_,et,tt,it,rt),et=Sh(),_e!==null&&!dh?(_.updateQueue=_e.updateQueue,_.flags&=-2053,_e.lanes&=~rt,Zi(_e,_,rt)):(I&&et&&vg(_),_.flags|=1,Xi(_e,_,tt,rt),_.child)}function $i(_e,_,et,tt,rt){if(_e===null){var it=et.type;return typeof it=="function"&&!aj(it)&&it.defaultProps===void 0&&et.compare===null&&et.defaultProps===void 0?(_.tag=15,_.type=it,bj(_e,_,it,tt,rt)):(_e=Rg(et.type,null,tt,_,_.mode,rt),_e.ref=_.ref,_e.return=_,_.child=_e)}if(it=_e.child,!(_e.lanes&rt)){var st=it.memoizedProps;if(et=et.compare,et=et!==null?et:Ie,et(st,tt)&&_e.ref===_.ref)return Zi(_e,_,rt)}return _.flags|=1,_e=Pg(it,tt),_e.ref=_.ref,_e.return=_,_.child=_e}function bj(_e,_,et,tt,rt){if(_e!==null){var it=_e.memoizedProps;if(Ie(it,tt)&&_e.ref===_.ref)if(dh=!1,_.pendingProps=tt=it,(_e.lanes&rt)!==0)_e.flags&131072&&(dh=!0);else return _.lanes=_e.lanes,Zi(_e,_,rt)}return cj(_e,_,et,tt,rt)}function dj(_e,_,et){var tt=_.pendingProps,rt=tt.children,it=_e!==null?_e.memoizedState:null;if(tt.mode==="hidden")if(!(_.mode&1))_.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(ej,fj),fj|=et;else{if(!(et&1073741824))return _e=it!==null?it.baseLanes|et:et,_.lanes=_.childLanes=1073741824,_.memoizedState={baseLanes:_e,cachePool:null,transitions:null},_.updateQueue=null,G(ej,fj),fj|=_e,null;_.memoizedState={baseLanes:0,cachePool:null,transitions:null},tt=it!==null?it.baseLanes:et,G(ej,fj),fj|=tt}else it!==null?(tt=it.baseLanes|et,_.memoizedState=null):tt=et,G(ej,fj),fj|=tt;return Xi(_e,_,rt,et),_.child}function gj(_e,_){var et=_.ref;(_e===null&&et!==null||_e!==null&&_e.ref!==et)&&(_.flags|=512,_.flags|=2097152)}function cj(_e,_,et,tt,rt){var it=Zf(et)?Xf:H$1.current;return it=Yf(_,it),ch(_,rt),et=Nh(_e,_,et,tt,it,rt),tt=Sh(),_e!==null&&!dh?(_.updateQueue=_e.updateQueue,_.flags&=-2053,_e.lanes&=~rt,Zi(_e,_,rt)):(I&&tt&&vg(_),_.flags|=1,Xi(_e,_,et,rt),_.child)}function hj(_e,_,et,tt,rt){if(Zf(et)){var it=!0;cg(_)}else it=!1;if(ch(_,rt),_.stateNode===null)ij(_e,_),Gi(_,et,tt),Ii(_,et,tt,rt),tt=!0;else if(_e===null){var st=_.stateNode,at=_.memoizedProps;st.props=at;var ct=st.context,ut=et.contextType;typeof ut=="object"&&ut!==null?ut=eh(ut):(ut=Zf(et)?Xf:H$1.current,ut=Yf(_,ut));var dt=et.getDerivedStateFromProps,ot=typeof dt=="function"||typeof st.getSnapshotBeforeUpdate=="function";ot||typeof st.UNSAFE_componentWillReceiveProps!="function"&&typeof st.componentWillReceiveProps!="function"||(at!==tt||ct!==ut)&&Hi(_,st,tt,ut),jh=!1;var nt=_.memoizedState;st.state=nt,qh(_,tt,st,rt),ct=_.memoizedState,at!==tt||nt!==ct||Wf.current||jh?(typeof dt=="function"&&(Di(_,et,dt,tt),ct=_.memoizedState),(at=jh||Fi(_,et,at,tt,nt,ct,ut))?(ot||typeof st.UNSAFE_componentWillMount!="function"&&typeof st.componentWillMount!="function"||(typeof st.componentWillMount=="function"&&st.componentWillMount(),typeof st.UNSAFE_componentWillMount=="function"&&st.UNSAFE_componentWillMount()),typeof st.componentDidMount=="function"&&(_.flags|=4194308)):(typeof st.componentDidMount=="function"&&(_.flags|=4194308),_.memoizedProps=tt,_.memoizedState=ct),st.props=tt,st.state=ct,st.context=ut,tt=at):(typeof st.componentDidMount=="function"&&(_.flags|=4194308),tt=!1)}else{st=_.stateNode,lh(_e,_),at=_.memoizedProps,ut=_.type===_.elementType?at:Ci(_.type,at),st.props=ut,ot=_.pendingProps,nt=st.context,ct=et.contextType,typeof ct=="object"&&ct!==null?ct=eh(ct):(ct=Zf(et)?Xf:H$1.current,ct=Yf(_,ct));var lt=et.getDerivedStateFromProps;(dt=typeof lt=="function"||typeof st.getSnapshotBeforeUpdate=="function")||typeof st.UNSAFE_componentWillReceiveProps!="function"&&typeof st.componentWillReceiveProps!="function"||(at!==ot||nt!==ct)&&Hi(_,st,tt,ct),jh=!1,nt=_.memoizedState,st.state=nt,qh(_,tt,st,rt);var ht=_.memoizedState;at!==ot||nt!==ht||Wf.current||jh?(typeof lt=="function"&&(Di(_,et,lt,tt),ht=_.memoizedState),(ut=jh||Fi(_,et,ut,tt,nt,ht,ct)||!1)?(dt||typeof st.UNSAFE_componentWillUpdate!="function"&&typeof st.componentWillUpdate!="function"||(typeof st.componentWillUpdate=="function"&&st.componentWillUpdate(tt,ht,ct),typeof st.UNSAFE_componentWillUpdate=="function"&&st.UNSAFE_componentWillUpdate(tt,ht,ct)),typeof st.componentDidUpdate=="function"&&(_.flags|=4),typeof st.getSnapshotBeforeUpdate=="function"&&(_.flags|=1024)):(typeof st.componentDidUpdate!="function"||at===_e.memoizedProps&&nt===_e.memoizedState||(_.flags|=4),typeof st.getSnapshotBeforeUpdate!="function"||at===_e.memoizedProps&&nt===_e.memoizedState||(_.flags|=1024),_.memoizedProps=tt,_.memoizedState=ht),st.props=tt,st.state=ht,st.context=ct,tt=ut):(typeof st.componentDidUpdate!="function"||at===_e.memoizedProps&&nt===_e.memoizedState||(_.flags|=4),typeof st.getSnapshotBeforeUpdate!="function"||at===_e.memoizedProps&&nt===_e.memoizedState||(_.flags|=1024),tt=!1)}return jj(_e,_,et,tt,it,rt)}function jj(_e,_,et,tt,rt,it){gj(_e,_);var st=(_.flags&128)!==0;if(!tt&&!st)return rt&&dg(_,et,!1),Zi(_e,_,it);tt=_.stateNode,Wi.current=_;var at=st&&typeof et.getDerivedStateFromError!="function"?null:tt.render();return _.flags|=1,_e!==null&&st?(_.child=Ug(_,_e.child,null,it),_.child=Ug(_,null,at,it)):Xi(_e,_,at,it),_.memoizedState=tt.state,rt&&dg(_,et,!0),_.child}function kj(_e){var _=_e.stateNode;_.pendingContext?ag(_e,_.pendingContext,_.pendingContext!==_.context):_.context&&ag(_e,_.context,!1),yh(_e,_.containerInfo)}function lj(_e,_,et,tt,rt){return Ig(),Jg(rt),_.flags|=256,Xi(_e,_,et,tt),_.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(_e){return{baseLanes:_e,cachePool:null,transitions:null}}function oj(_e,_,et){var tt=_.pendingProps,rt=L.current,it=!1,st=(_.flags&128)!==0,at;if((at=st)||(at=_e!==null&&_e.memoizedState===null?!1:(rt&2)!==0),at?(it=!0,_.flags&=-129):(_e===null||_e.memoizedState!==null)&&(rt|=1),G(L,rt&1),_e===null)return Eg(_),_e=_.memoizedState,_e!==null&&(_e=_e.dehydrated,_e!==null)?(_.mode&1?_e.data==="$!"?_.lanes=8:_.lanes=1073741824:_.lanes=1,null):(st=tt.children,_e=tt.fallback,it?(tt=_.mode,it=_.child,st={mode:"hidden",children:st},!(tt&1)&&it!==null?(it.childLanes=0,it.pendingProps=st):it=pj(st,tt,0,null),_e=Tg(_e,tt,et,null),it.return=_,_e.return=_,it.sibling=_e,_.child=it,_.child.memoizedState=nj(et),_.memoizedState=mj,_e):qj(_,st));if(rt=_e.memoizedState,rt!==null&&(at=rt.dehydrated,at!==null))return rj(_e,_,st,tt,at,rt,et);if(it){it=tt.fallback,st=_.mode,rt=_e.child,at=rt.sibling;var ct={mode:"hidden",children:tt.children};return!(st&1)&&_.child!==rt?(tt=_.child,tt.childLanes=0,tt.pendingProps=ct,_.deletions=null):(tt=Pg(rt,ct),tt.subtreeFlags=rt.subtreeFlags&14680064),at!==null?it=Pg(at,it):(it=Tg(it,st,et,null),it.flags|=2),it.return=_,tt.return=_,tt.sibling=it,_.child=tt,tt=it,it=_.child,st=_e.child.memoizedState,st=st===null?nj(et):{baseLanes:st.baseLanes|et,cachePool:null,transitions:st.transitions},it.memoizedState=st,it.childLanes=_e.childLanes&~et,_.memoizedState=mj,tt}return it=_e.child,_e=it.sibling,tt=Pg(it,{mode:"visible",children:tt.children}),!(_.mode&1)&&(tt.lanes=et),tt.return=_,tt.sibling=null,_e!==null&&(et=_.deletions,et===null?(_.deletions=[_e],_.flags|=16):et.push(_e)),_.child=tt,_.memoizedState=null,tt}function qj(_e,_){return _=pj({mode:"visible",children:_},_e.mode,0,null),_.return=_e,_e.child=_}function sj(_e,_,et,tt){return tt!==null&&Jg(tt),Ug(_,_e.child,null,et),_e=qj(_,_.pendingProps.children),_e.flags|=2,_.memoizedState=null,_e}function rj(_e,_,et,tt,rt,it,st){if(et)return _.flags&256?(_.flags&=-257,tt=Ki(Error(p$2(422))),sj(_e,_,st,tt)):_.memoizedState!==null?(_.child=_e.child,_.flags|=128,null):(it=tt.fallback,rt=_.mode,tt=pj({mode:"visible",children:tt.children},rt,0,null),it=Tg(it,rt,st,null),it.flags|=2,tt.return=_,it.return=_,tt.sibling=it,_.child=tt,_.mode&1&&Ug(_,_e.child,null,st),_.child.memoizedState=nj(st),_.memoizedState=mj,it);if(!(_.mode&1))return sj(_e,_,st,null);if(rt.data==="$!"){if(tt=rt.nextSibling&&rt.nextSibling.dataset,tt)var at=tt.dgst;return tt=at,it=Error(p$2(419)),tt=Ki(it,tt,void 0),sj(_e,_,st,tt)}if(at=(st&_e.childLanes)!==0,dh||at){if(tt=Q,tt!==null){switch(st&-st){case 4:rt=2;break;case 16:rt=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:rt=32;break;case 536870912:rt=268435456;break;default:rt=0}rt=rt&(tt.suspendedLanes|st)?0:rt,rt!==0&&rt!==it.retryLane&&(it.retryLane=rt,ih(_e,rt),gi(tt,_e,rt,-1))}return tj(),tt=Ki(Error(p$2(421))),sj(_e,_,st,tt)}return rt.data==="$?"?(_.flags|=128,_.child=_e.child,_=uj.bind(null,_e),rt._reactRetry=_,null):(_e=it.treeContext,yg=Lf(rt.nextSibling),xg=_,I=!0,zg=null,_e!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=_e.id,sg=_e.overflow,qg=_),_=qj(_,tt.children),_.flags|=4096,_)}function vj(_e,_,et){_e.lanes|=_;var tt=_e.alternate;tt!==null&&(tt.lanes|=_),bh(_e.return,_,et)}function wj(_e,_,et,tt,rt){var it=_e.memoizedState;it===null?_e.memoizedState={isBackwards:_,rendering:null,renderingStartTime:0,last:tt,tail:et,tailMode:rt}:(it.isBackwards=_,it.rendering=null,it.renderingStartTime=0,it.last=tt,it.tail=et,it.tailMode=rt)}function xj(_e,_,et){var tt=_.pendingProps,rt=tt.revealOrder,it=tt.tail;if(Xi(_e,_,tt.children,et),tt=L.current,tt&2)tt=tt&1|2,_.flags|=128;else{if(_e!==null&&_e.flags&128)e:for(_e=_.child;_e!==null;){if(_e.tag===13)_e.memoizedState!==null&&vj(_e,et,_);else if(_e.tag===19)vj(_e,et,_);else if(_e.child!==null){_e.child.return=_e,_e=_e.child;continue}if(_e===_)break e;for(;_e.sibling===null;){if(_e.return===null||_e.return===_)break e;_e=_e.return}_e.sibling.return=_e.return,_e=_e.sibling}tt&=1}if(G(L,tt),!(_.mode&1))_.memoizedState=null;else switch(rt){case"forwards":for(et=_.child,rt=null;et!==null;)_e=et.alternate,_e!==null&&Ch(_e)===null&&(rt=et),et=et.sibling;et=rt,et===null?(rt=_.child,_.child=null):(rt=et.sibling,et.sibling=null),wj(_,!1,rt,et,it);break;case"backwards":for(et=null,rt=_.child,_.child=null;rt!==null;){if(_e=rt.alternate,_e!==null&&Ch(_e)===null){_.child=rt;break}_e=rt.sibling,rt.sibling=et,et=rt,rt=_e}wj(_,!0,et,null,it);break;case"together":wj(_,!1,null,null,void 0);break;default:_.memoizedState=null}return _.child}function ij(_e,_){!(_.mode&1)&&_e!==null&&(_e.alternate=null,_.alternate=null,_.flags|=2)}function Zi(_e,_,et){if(_e!==null&&(_.dependencies=_e.dependencies),rh|=_.lanes,!(et&_.childLanes))return null;if(_e!==null&&_.child!==_e.child)throw Error(p$2(153));if(_.child!==null){for(_e=_.child,et=Pg(_e,_e.pendingProps),_.child=et,et.return=_;_e.sibling!==null;)_e=_e.sibling,et=et.sibling=Pg(_e,_e.pendingProps),et.return=_;et.sibling=null}return _.child}function yj(_e,_,et){switch(_.tag){case 3:kj(_),Ig();break;case 5:Ah(_);break;case 1:Zf(_.type)&&cg(_);break;case 4:yh(_,_.stateNode.containerInfo);break;case 10:var tt=_.type._context,rt=_.memoizedProps.value;G(Wg,tt._currentValue),tt._currentValue=rt;break;case 13:if(tt=_.memoizedState,tt!==null)return tt.dehydrated!==null?(G(L,L.current&1),_.flags|=128,null):et&_.child.childLanes?oj(_e,_,et):(G(L,L.current&1),_e=Zi(_e,_,et),_e!==null?_e.sibling:null);G(L,L.current&1);break;case 19:if(tt=(et&_.childLanes)!==0,_e.flags&128){if(tt)return xj(_e,_,et);_.flags|=128}if(rt=_.memoizedState,rt!==null&&(rt.rendering=null,rt.tail=null,rt.lastEffect=null),G(L,L.current),tt)break;return null;case 22:case 23:return _.lanes=0,dj(_e,_,et)}return Zi(_e,_,et)}var zj,Aj,Bj,Cj;zj=function(_e,_){for(var et=_.child;et!==null;){if(et.tag===5||et.tag===6)_e.appendChild(et.stateNode);else if(et.tag!==4&&et.child!==null){et.child.return=et,et=et.child;continue}if(et===_)break;for(;et.sibling===null;){if(et.return===null||et.return===_)return;et=et.return}et.sibling.return=et.return,et=et.sibling}};Aj=function(){};Bj=function(_e,_,et,tt){var rt=_e.memoizedProps;if(rt!==tt){_e=_.stateNode,xh(uh.current);var it=null;switch(et){case"input":rt=Ya(_e,rt),tt=Ya(_e,tt),it=[];break;case"select":rt=A$1({},rt,{value:void 0}),tt=A$1({},tt,{value:void 0}),it=[];break;case"textarea":rt=gb(_e,rt),tt=gb(_e,tt),it=[];break;default:typeof rt.onClick!="function"&&typeof tt.onClick=="function"&&(_e.onclick=Bf)}ub(et,tt);var st;et=null;for(ut in rt)if(!tt.hasOwnProperty(ut)&&rt.hasOwnProperty(ut)&&rt[ut]!=null)if(ut==="style"){var at=rt[ut];for(st in at)at.hasOwnProperty(st)&&(et||(et={}),et[st]="")}else ut!=="dangerouslySetInnerHTML"&&ut!=="children"&&ut!=="suppressContentEditableWarning"&&ut!=="suppressHydrationWarning"&&ut!=="autoFocus"&&(ea.hasOwnProperty(ut)?it||(it=[]):(it=it||[]).push(ut,null));for(ut in tt){var ct=tt[ut];if(at=rt!=null?rt[ut]:void 0,tt.hasOwnProperty(ut)&&ct!==at&&(ct!=null||at!=null))if(ut==="style")if(at){for(st in at)!at.hasOwnProperty(st)||ct&&ct.hasOwnProperty(st)||(et||(et={}),et[st]="");for(st in ct)ct.hasOwnProperty(st)&&at[st]!==ct[st]&&(et||(et={}),et[st]=ct[st])}else et||(it||(it=[]),it.push(ut,et)),et=ct;else ut==="dangerouslySetInnerHTML"?(ct=ct?ct.__html:void 0,at=at?at.__html:void 0,ct!=null&&at!==ct&&(it=it||[]).push(ut,ct)):ut==="children"?typeof ct!="string"&&typeof ct!="number"||(it=it||[]).push(ut,""+ct):ut!=="suppressContentEditableWarning"&&ut!=="suppressHydrationWarning"&&(ea.hasOwnProperty(ut)?(ct!=null&&ut==="onScroll"&&D("scroll",_e),it||at===ct||(it=[])):(it=it||[]).push(ut,ct))}et&&(it=it||[]).push("style",et);var ut=it;(_.updateQueue=ut)&&(_.flags|=4)}};Cj=function(_e,_,et,tt){et!==tt&&(_.flags|=4)};function Dj(_e,_){if(!I)switch(_e.tailMode){case"hidden":_=_e.tail;for(var et=null;_!==null;)_.alternate!==null&&(et=_),_=_.sibling;et===null?_e.tail=null:et.sibling=null;break;case"collapsed":et=_e.tail;for(var tt=null;et!==null;)et.alternate!==null&&(tt=et),et=et.sibling;tt===null?_||_e.tail===null?_e.tail=null:_e.tail.sibling=null:tt.sibling=null}}function S$1(_e){var _=_e.alternate!==null&&_e.alternate.child===_e.child,et=0,tt=0;if(_)for(var rt=_e.child;rt!==null;)et|=rt.lanes|rt.childLanes,tt|=rt.subtreeFlags&14680064,tt|=rt.flags&14680064,rt.return=_e,rt=rt.sibling;else for(rt=_e.child;rt!==null;)et|=rt.lanes|rt.childLanes,tt|=rt.subtreeFlags,tt|=rt.flags,rt.return=_e,rt=rt.sibling;return _e.subtreeFlags|=tt,_e.childLanes=et,_}function Ej(_e,_,et){var tt=_.pendingProps;switch(wg(_),_.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$1(_),null;case 1:return Zf(_.type)&&$f(),S$1(_),null;case 3:return tt=_.stateNode,zh(),E(Wf),E(H$1),Eh(),tt.pendingContext&&(tt.context=tt.pendingContext,tt.pendingContext=null),(_e===null||_e.child===null)&&(Gg(_)?_.flags|=4:_e===null||_e.memoizedState.isDehydrated&&!(_.flags&256)||(_.flags|=1024,zg!==null&&(Fj(zg),zg=null))),Aj(_e,_),S$1(_),null;case 5:Bh(_);var rt=xh(wh.current);if(et=_.type,_e!==null&&_.stateNode!=null)Bj(_e,_,et,tt,rt),_e.ref!==_.ref&&(_.flags|=512,_.flags|=2097152);else{if(!tt){if(_.stateNode===null)throw Error(p$2(166));return S$1(_),null}if(_e=xh(uh.current),Gg(_)){tt=_.stateNode,et=_.type;var it=_.memoizedProps;switch(tt[Of]=_,tt[Pf]=it,_e=(_.mode&1)!==0,et){case"dialog":D("cancel",tt),D("close",tt);break;case"iframe":case"object":case"embed":D("load",tt);break;case"video":case"audio":for(rt=0;rt<lf.length;rt++)D(lf[rt],tt);break;case"source":D("error",tt);break;case"img":case"image":case"link":D("error",tt),D("load",tt);break;case"details":D("toggle",tt);break;case"input":Za(tt,it),D("invalid",tt);break;case"select":tt._wrapperState={wasMultiple:!!it.multiple},D("invalid",tt);break;case"textarea":hb(tt,it),D("invalid",tt)}ub(et,it),rt=null;for(var st in it)if(it.hasOwnProperty(st)){var at=it[st];st==="children"?typeof at=="string"?tt.textContent!==at&&(it.suppressHydrationWarning!==!0&&Af(tt.textContent,at,_e),rt=["children",at]):typeof at=="number"&&tt.textContent!==""+at&&(it.suppressHydrationWarning!==!0&&Af(tt.textContent,at,_e),rt=["children",""+at]):ea.hasOwnProperty(st)&&at!=null&&st==="onScroll"&&D("scroll",tt)}switch(et){case"input":Va(tt),db(tt,it,!0);break;case"textarea":Va(tt),jb(tt);break;case"select":case"option":break;default:typeof it.onClick=="function"&&(tt.onclick=Bf)}tt=rt,_.updateQueue=tt,tt!==null&&(_.flags|=4)}else{st=rt.nodeType===9?rt:rt.ownerDocument,_e==="http://www.w3.org/1999/xhtml"&&(_e=kb(et)),_e==="http://www.w3.org/1999/xhtml"?et==="script"?(_e=st.createElement("div"),_e.innerHTML="<script><\/script>",_e=_e.removeChild(_e.firstChild)):typeof tt.is=="string"?_e=st.createElement(et,{is:tt.is}):(_e=st.createElement(et),et==="select"&&(st=_e,tt.multiple?st.multiple=!0:tt.size&&(st.size=tt.size))):_e=st.createElementNS(_e,et),_e[Of]=_,_e[Pf]=tt,zj(_e,_,!1,!1),_.stateNode=_e;e:{switch(st=vb(et,tt),et){case"dialog":D("cancel",_e),D("close",_e),rt=tt;break;case"iframe":case"object":case"embed":D("load",_e),rt=tt;break;case"video":case"audio":for(rt=0;rt<lf.length;rt++)D(lf[rt],_e);rt=tt;break;case"source":D("error",_e),rt=tt;break;case"img":case"image":case"link":D("error",_e),D("load",_e),rt=tt;break;case"details":D("toggle",_e),rt=tt;break;case"input":Za(_e,tt),rt=Ya(_e,tt),D("invalid",_e);break;case"option":rt=tt;break;case"select":_e._wrapperState={wasMultiple:!!tt.multiple},rt=A$1({},tt,{value:void 0}),D("invalid",_e);break;case"textarea":hb(_e,tt),rt=gb(_e,tt),D("invalid",_e);break;default:rt=tt}ub(et,rt),at=rt;for(it in at)if(at.hasOwnProperty(it)){var ct=at[it];it==="style"?sb(_e,ct):it==="dangerouslySetInnerHTML"?(ct=ct?ct.__html:void 0,ct!=null&&nb(_e,ct)):it==="children"?typeof ct=="string"?(et!=="textarea"||ct!=="")&&ob(_e,ct):typeof ct=="number"&&ob(_e,""+ct):it!=="suppressContentEditableWarning"&&it!=="suppressHydrationWarning"&&it!=="autoFocus"&&(ea.hasOwnProperty(it)?ct!=null&&it==="onScroll"&&D("scroll",_e):ct!=null&&ta(_e,it,ct,st))}switch(et){case"input":Va(_e),db(_e,tt,!1);break;case"textarea":Va(_e),jb(_e);break;case"option":tt.value!=null&&_e.setAttribute("value",""+Sa(tt.value));break;case"select":_e.multiple=!!tt.multiple,it=tt.value,it!=null?fb(_e,!!tt.multiple,it,!1):tt.defaultValue!=null&&fb(_e,!!tt.multiple,tt.defaultValue,!0);break;default:typeof rt.onClick=="function"&&(_e.onclick=Bf)}switch(et){case"button":case"input":case"select":case"textarea":tt=!!tt.autoFocus;break e;case"img":tt=!0;break e;default:tt=!1}}tt&&(_.flags|=4)}_.ref!==null&&(_.flags|=512,_.flags|=2097152)}return S$1(_),null;case 6:if(_e&&_.stateNode!=null)Cj(_e,_,_e.memoizedProps,tt);else{if(typeof tt!="string"&&_.stateNode===null)throw Error(p$2(166));if(et=xh(wh.current),xh(uh.current),Gg(_)){if(tt=_.stateNode,et=_.memoizedProps,tt[Of]=_,(it=tt.nodeValue!==et)&&(_e=xg,_e!==null))switch(_e.tag){case 3:Af(tt.nodeValue,et,(_e.mode&1)!==0);break;case 5:_e.memoizedProps.suppressHydrationWarning!==!0&&Af(tt.nodeValue,et,(_e.mode&1)!==0)}it&&(_.flags|=4)}else tt=(et.nodeType===9?et:et.ownerDocument).createTextNode(tt),tt[Of]=_,_.stateNode=tt}return S$1(_),null;case 13:if(E(L),tt=_.memoizedState,_e===null||_e.memoizedState!==null&&_e.memoizedState.dehydrated!==null){if(I&&yg!==null&&_.mode&1&&!(_.flags&128))Hg(),Ig(),_.flags|=98560,it=!1;else if(it=Gg(_),tt!==null&&tt.dehydrated!==null){if(_e===null){if(!it)throw Error(p$2(318));if(it=_.memoizedState,it=it!==null?it.dehydrated:null,!it)throw Error(p$2(317));it[Of]=_}else Ig(),!(_.flags&128)&&(_.memoizedState=null),_.flags|=4;S$1(_),it=!1}else zg!==null&&(Fj(zg),zg=null),it=!0;if(!it)return _.flags&65536?_:null}return _.flags&128?(_.lanes=et,_):(tt=tt!==null,tt!==(_e!==null&&_e.memoizedState!==null)&&tt&&(_.child.flags|=8192,_.mode&1&&(_e===null||L.current&1?T===0&&(T=3):tj())),_.updateQueue!==null&&(_.flags|=4),S$1(_),null);case 4:return zh(),Aj(_e,_),_e===null&&sf(_.stateNode.containerInfo),S$1(_),null;case 10:return ah(_.type._context),S$1(_),null;case 17:return Zf(_.type)&&$f(),S$1(_),null;case 19:if(E(L),it=_.memoizedState,it===null)return S$1(_),null;if(tt=(_.flags&128)!==0,st=it.rendering,st===null)if(tt)Dj(it,!1);else{if(T!==0||_e!==null&&_e.flags&128)for(_e=_.child;_e!==null;){if(st=Ch(_e),st!==null){for(_.flags|=128,Dj(it,!1),tt=st.updateQueue,tt!==null&&(_.updateQueue=tt,_.flags|=4),_.subtreeFlags=0,tt=et,et=_.child;et!==null;)it=et,_e=tt,it.flags&=14680066,st=it.alternate,st===null?(it.childLanes=0,it.lanes=_e,it.child=null,it.subtreeFlags=0,it.memoizedProps=null,it.memoizedState=null,it.updateQueue=null,it.dependencies=null,it.stateNode=null):(it.childLanes=st.childLanes,it.lanes=st.lanes,it.child=st.child,it.subtreeFlags=0,it.deletions=null,it.memoizedProps=st.memoizedProps,it.memoizedState=st.memoizedState,it.updateQueue=st.updateQueue,it.type=st.type,_e=st.dependencies,it.dependencies=_e===null?null:{lanes:_e.lanes,firstContext:_e.firstContext}),et=et.sibling;return G(L,L.current&1|2),_.child}_e=_e.sibling}it.tail!==null&&B()>Gj&&(_.flags|=128,tt=!0,Dj(it,!1),_.lanes=4194304)}else{if(!tt)if(_e=Ch(st),_e!==null){if(_.flags|=128,tt=!0,et=_e.updateQueue,et!==null&&(_.updateQueue=et,_.flags|=4),Dj(it,!0),it.tail===null&&it.tailMode==="hidden"&&!st.alternate&&!I)return S$1(_),null}else 2*B()-it.renderingStartTime>Gj&&et!==1073741824&&(_.flags|=128,tt=!0,Dj(it,!1),_.lanes=4194304);it.isBackwards?(st.sibling=_.child,_.child=st):(et=it.last,et!==null?et.sibling=st:_.child=st,it.last=st)}return it.tail!==null?(_=it.tail,it.rendering=_,it.tail=_.sibling,it.renderingStartTime=B(),_.sibling=null,et=L.current,G(L,tt?et&1|2:et&1),_):(S$1(_),null);case 22:case 23:return Hj(),tt=_.memoizedState!==null,_e!==null&&_e.memoizedState!==null!==tt&&(_.flags|=8192),tt&&_.mode&1?fj&1073741824&&(S$1(_),_.subtreeFlags&6&&(_.flags|=8192)):S$1(_),null;case 24:return null;case 25:return null}throw Error(p$2(156,_.tag))}function Ij(_e,_){switch(wg(_),_.tag){case 1:return Zf(_.type)&&$f(),_e=_.flags,_e&65536?(_.flags=_e&-65537|128,_):null;case 3:return zh(),E(Wf),E(H$1),Eh(),_e=_.flags,_e&65536&&!(_e&128)?(_.flags=_e&-65537|128,_):null;case 5:return Bh(_),null;case 13:if(E(L),_e=_.memoizedState,_e!==null&&_e.dehydrated!==null){if(_.alternate===null)throw Error(p$2(340));Ig()}return _e=_.flags,_e&65536?(_.flags=_e&-65537|128,_):null;case 19:return E(L),null;case 4:return zh(),null;case 10:return ah(_.type._context),null;case 22:case 23:return Hj(),null;case 24:return null;default:return null}}var Jj=!1,U=!1,Kj=typeof WeakSet=="function"?WeakSet:Set,V=null;function Lj(_e,_){var et=_e.ref;if(et!==null)if(typeof et=="function")try{et(null)}catch(tt){W(_e,_,tt)}else et.current=null}function Mj(_e,_,et){try{et()}catch(tt){W(_e,_,tt)}}var Nj=!1;function Oj(_e,_){if(Cf=dd,_e=Me(),Ne(_e)){if("selectionStart"in _e)var et={start:_e.selectionStart,end:_e.selectionEnd};else e:{et=(et=_e.ownerDocument)&&et.defaultView||window;var tt=et.getSelection&&et.getSelection();if(tt&&tt.rangeCount!==0){et=tt.anchorNode;var rt=tt.anchorOffset,it=tt.focusNode;tt=tt.focusOffset;try{et.nodeType,it.nodeType}catch{et=null;break e}var st=0,at=-1,ct=-1,ut=0,dt=0,ot=_e,nt=null;t:for(;;){for(var lt;ot!==et||rt!==0&&ot.nodeType!==3||(at=st+rt),ot!==it||tt!==0&&ot.nodeType!==3||(ct=st+tt),ot.nodeType===3&&(st+=ot.nodeValue.length),(lt=ot.firstChild)!==null;)nt=ot,ot=lt;for(;;){if(ot===_e)break t;if(nt===et&&++ut===rt&&(at=st),nt===it&&++dt===tt&&(ct=st),(lt=ot.nextSibling)!==null)break;ot=nt,nt=ot.parentNode}ot=lt}et=at===-1||ct===-1?null:{start:at,end:ct}}else et=null}et=et||{start:0,end:0}}else et=null;for(Df={focusedElem:_e,selectionRange:et},dd=!1,V=_;V!==null;)if(_=V,_e=_.child,(_.subtreeFlags&1028)!==0&&_e!==null)_e.return=_,V=_e;else for(;V!==null;){_=V;try{var ht=_.alternate;if(_.flags&1024)switch(_.tag){case 0:case 11:case 15:break;case 1:if(ht!==null){var ft=ht.memoizedProps,gt=ht.memoizedState,mt=_.stateNode,yt=mt.getSnapshotBeforeUpdate(_.elementType===_.type?ft:Ci(_.type,ft),gt);mt.__reactInternalSnapshotBeforeUpdate=yt}break;case 3:var bt=_.stateNode.containerInfo;bt.nodeType===1?bt.textContent="":bt.nodeType===9&&bt.documentElement&&bt.removeChild(bt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$2(163))}}catch(_t){W(_,_.return,_t)}if(_e=_.sibling,_e!==null){_e.return=_.return,V=_e;break}V=_.return}return ht=Nj,Nj=!1,ht}function Pj(_e,_,et){var tt=_.updateQueue;if(tt=tt!==null?tt.lastEffect:null,tt!==null){var rt=tt=tt.next;do{if((rt.tag&_e)===_e){var it=rt.destroy;rt.destroy=void 0,it!==void 0&&Mj(_,et,it)}rt=rt.next}while(rt!==tt)}}function Qj(_e,_){if(_=_.updateQueue,_=_!==null?_.lastEffect:null,_!==null){var et=_=_.next;do{if((et.tag&_e)===_e){var tt=et.create;et.destroy=tt()}et=et.next}while(et!==_)}}function Rj(_e){var _=_e.ref;if(_!==null){var et=_e.stateNode;switch(_e.tag){case 5:_e=et;break;default:_e=et}typeof _=="function"?_(_e):_.current=_e}}function Sj(_e){var _=_e.alternate;_!==null&&(_e.alternate=null,Sj(_)),_e.child=null,_e.deletions=null,_e.sibling=null,_e.tag===5&&(_=_e.stateNode,_!==null&&(delete _[Of],delete _[Pf],delete _[of],delete _[Qf],delete _[Rf])),_e.stateNode=null,_e.return=null,_e.dependencies=null,_e.memoizedProps=null,_e.memoizedState=null,_e.pendingProps=null,_e.stateNode=null,_e.updateQueue=null}function Tj(_e){return _e.tag===5||_e.tag===3||_e.tag===4}function Uj(_e){e:for(;;){for(;_e.sibling===null;){if(_e.return===null||Tj(_e.return))return null;_e=_e.return}for(_e.sibling.return=_e.return,_e=_e.sibling;_e.tag!==5&&_e.tag!==6&&_e.tag!==18;){if(_e.flags&2||_e.child===null||_e.tag===4)continue e;_e.child.return=_e,_e=_e.child}if(!(_e.flags&2))return _e.stateNode}}function Vj(_e,_,et){var tt=_e.tag;if(tt===5||tt===6)_e=_e.stateNode,_?et.nodeType===8?et.parentNode.insertBefore(_e,_):et.insertBefore(_e,_):(et.nodeType===8?(_=et.parentNode,_.insertBefore(_e,et)):(_=et,_.appendChild(_e)),et=et._reactRootContainer,et!=null||_.onclick!==null||(_.onclick=Bf));else if(tt!==4&&(_e=_e.child,_e!==null))for(Vj(_e,_,et),_e=_e.sibling;_e!==null;)Vj(_e,_,et),_e=_e.sibling}function Wj(_e,_,et){var tt=_e.tag;if(tt===5||tt===6)_e=_e.stateNode,_?et.insertBefore(_e,_):et.appendChild(_e);else if(tt!==4&&(_e=_e.child,_e!==null))for(Wj(_e,_,et),_e=_e.sibling;_e!==null;)Wj(_e,_,et),_e=_e.sibling}var X=null,Xj=!1;function Yj(_e,_,et){for(et=et.child;et!==null;)Zj(_e,_,et),et=et.sibling}function Zj(_e,_,et){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,et)}catch{}switch(et.tag){case 5:U||Lj(et,_);case 6:var tt=X,rt=Xj;X=null,Yj(_e,_,et),X=tt,Xj=rt,X!==null&&(Xj?(_e=X,et=et.stateNode,_e.nodeType===8?_e.parentNode.removeChild(et):_e.removeChild(et)):X.removeChild(et.stateNode));break;case 18:X!==null&&(Xj?(_e=X,et=et.stateNode,_e.nodeType===8?Kf(_e.parentNode,et):_e.nodeType===1&&Kf(_e,et),bd(_e)):Kf(X,et.stateNode));break;case 4:tt=X,rt=Xj,X=et.stateNode.containerInfo,Xj=!0,Yj(_e,_,et),X=tt,Xj=rt;break;case 0:case 11:case 14:case 15:if(!U&&(tt=et.updateQueue,tt!==null&&(tt=tt.lastEffect,tt!==null))){rt=tt=tt.next;do{var it=rt,st=it.destroy;it=it.tag,st!==void 0&&(it&2||it&4)&&Mj(et,_,st),rt=rt.next}while(rt!==tt)}Yj(_e,_,et);break;case 1:if(!U&&(Lj(et,_),tt=et.stateNode,typeof tt.componentWillUnmount=="function"))try{tt.props=et.memoizedProps,tt.state=et.memoizedState,tt.componentWillUnmount()}catch(at){W(et,_,at)}Yj(_e,_,et);break;case 21:Yj(_e,_,et);break;case 22:et.mode&1?(U=(tt=U)||et.memoizedState!==null,Yj(_e,_,et),U=tt):Yj(_e,_,et);break;default:Yj(_e,_,et)}}function ak(_e){var _=_e.updateQueue;if(_!==null){_e.updateQueue=null;var et=_e.stateNode;et===null&&(et=_e.stateNode=new Kj),_.forEach(function(tt){var rt=bk.bind(null,_e,tt);et.has(tt)||(et.add(tt),tt.then(rt,rt))})}}function ck(_e,_){var et=_.deletions;if(et!==null)for(var tt=0;tt<et.length;tt++){var rt=et[tt];try{var it=_e,st=_,at=st;e:for(;at!==null;){switch(at.tag){case 5:X=at.stateNode,Xj=!1;break e;case 3:X=at.stateNode.containerInfo,Xj=!0;break e;case 4:X=at.stateNode.containerInfo,Xj=!0;break e}at=at.return}if(X===null)throw Error(p$2(160));Zj(it,st,rt),X=null,Xj=!1;var ct=rt.alternate;ct!==null&&(ct.return=null),rt.return=null}catch(ut){W(rt,_,ut)}}if(_.subtreeFlags&12854)for(_=_.child;_!==null;)dk(_,_e),_=_.sibling}function dk(_e,_){var et=_e.alternate,tt=_e.flags;switch(_e.tag){case 0:case 11:case 14:case 15:if(ck(_,_e),ek(_e),tt&4){try{Pj(3,_e,_e.return),Qj(3,_e)}catch(ft){W(_e,_e.return,ft)}try{Pj(5,_e,_e.return)}catch(ft){W(_e,_e.return,ft)}}break;case 1:ck(_,_e),ek(_e),tt&512&&et!==null&&Lj(et,et.return);break;case 5:if(ck(_,_e),ek(_e),tt&512&&et!==null&&Lj(et,et.return),_e.flags&32){var rt=_e.stateNode;try{ob(rt,"")}catch(ft){W(_e,_e.return,ft)}}if(tt&4&&(rt=_e.stateNode,rt!=null)){var it=_e.memoizedProps,st=et!==null?et.memoizedProps:it,at=_e.type,ct=_e.updateQueue;if(_e.updateQueue=null,ct!==null)try{at==="input"&&it.type==="radio"&&it.name!=null&&ab(rt,it),vb(at,st);var ut=vb(at,it);for(st=0;st<ct.length;st+=2){var dt=ct[st],ot=ct[st+1];dt==="style"?sb(rt,ot):dt==="dangerouslySetInnerHTML"?nb(rt,ot):dt==="children"?ob(rt,ot):ta(rt,dt,ot,ut)}switch(at){case"input":bb(rt,it);break;case"textarea":ib(rt,it);break;case"select":var nt=rt._wrapperState.wasMultiple;rt._wrapperState.wasMultiple=!!it.multiple;var lt=it.value;lt!=null?fb(rt,!!it.multiple,lt,!1):nt!==!!it.multiple&&(it.defaultValue!=null?fb(rt,!!it.multiple,it.defaultValue,!0):fb(rt,!!it.multiple,it.multiple?[]:"",!1))}rt[Pf]=it}catch(ft){W(_e,_e.return,ft)}}break;case 6:if(ck(_,_e),ek(_e),tt&4){if(_e.stateNode===null)throw Error(p$2(162));rt=_e.stateNode,it=_e.memoizedProps;try{rt.nodeValue=it}catch(ft){W(_e,_e.return,ft)}}break;case 3:if(ck(_,_e),ek(_e),tt&4&&et!==null&&et.memoizedState.isDehydrated)try{bd(_.containerInfo)}catch(ft){W(_e,_e.return,ft)}break;case 4:ck(_,_e),ek(_e);break;case 13:ck(_,_e),ek(_e),rt=_e.child,rt.flags&8192&&(it=rt.memoizedState!==null,rt.stateNode.isHidden=it,!it||rt.alternate!==null&&rt.alternate.memoizedState!==null||(fk=B())),tt&4&&ak(_e);break;case 22:if(dt=et!==null&&et.memoizedState!==null,_e.mode&1?(U=(ut=U)||dt,ck(_,_e),U=ut):ck(_,_e),ek(_e),tt&8192){if(ut=_e.memoizedState!==null,(_e.stateNode.isHidden=ut)&&!dt&&_e.mode&1)for(V=_e,dt=_e.child;dt!==null;){for(ot=V=dt;V!==null;){switch(nt=V,lt=nt.child,nt.tag){case 0:case 11:case 14:case 15:Pj(4,nt,nt.return);break;case 1:Lj(nt,nt.return);var ht=nt.stateNode;if(typeof ht.componentWillUnmount=="function"){tt=nt,et=nt.return;try{_=tt,ht.props=_.memoizedProps,ht.state=_.memoizedState,ht.componentWillUnmount()}catch(ft){W(tt,et,ft)}}break;case 5:Lj(nt,nt.return);break;case 22:if(nt.memoizedState!==null){gk(ot);continue}}lt!==null?(lt.return=nt,V=lt):gk(ot)}dt=dt.sibling}e:for(dt=null,ot=_e;;){if(ot.tag===5){if(dt===null){dt=ot;try{rt=ot.stateNode,ut?(it=rt.style,typeof it.setProperty=="function"?it.setProperty("display","none","important"):it.display="none"):(at=ot.stateNode,ct=ot.memoizedProps.style,st=ct!=null&&ct.hasOwnProperty("display")?ct.display:null,at.style.display=rb("display",st))}catch(ft){W(_e,_e.return,ft)}}}else if(ot.tag===6){if(dt===null)try{ot.stateNode.nodeValue=ut?"":ot.memoizedProps}catch(ft){W(_e,_e.return,ft)}}else if((ot.tag!==22&&ot.tag!==23||ot.memoizedState===null||ot===_e)&&ot.child!==null){ot.child.return=ot,ot=ot.child;continue}if(ot===_e)break e;for(;ot.sibling===null;){if(ot.return===null||ot.return===_e)break e;dt===ot&&(dt=null),ot=ot.return}dt===ot&&(dt=null),ot.sibling.return=ot.return,ot=ot.sibling}}break;case 19:ck(_,_e),ek(_e),tt&4&&ak(_e);break;case 21:break;default:ck(_,_e),ek(_e)}}function ek(_e){var _=_e.flags;if(_&2){try{e:{for(var et=_e.return;et!==null;){if(Tj(et)){var tt=et;break e}et=et.return}throw Error(p$2(160))}switch(tt.tag){case 5:var rt=tt.stateNode;tt.flags&32&&(ob(rt,""),tt.flags&=-33);var it=Uj(_e);Wj(_e,it,rt);break;case 3:case 4:var st=tt.stateNode.containerInfo,at=Uj(_e);Vj(_e,at,st);break;default:throw Error(p$2(161))}}catch(ct){W(_e,_e.return,ct)}_e.flags&=-3}_&4096&&(_e.flags&=-4097)}function hk(_e,_,et){V=_e,ik(_e)}function ik(_e,_,et){for(var tt=(_e.mode&1)!==0;V!==null;){var rt=V,it=rt.child;if(rt.tag===22&&tt){var st=rt.memoizedState!==null||Jj;if(!st){var at=rt.alternate,ct=at!==null&&at.memoizedState!==null||U;at=Jj;var ut=U;if(Jj=st,(U=ct)&&!ut)for(V=rt;V!==null;)st=V,ct=st.child,st.tag===22&&st.memoizedState!==null?jk(rt):ct!==null?(ct.return=st,V=ct):jk(rt);for(;it!==null;)V=it,ik(it),it=it.sibling;V=rt,Jj=at,U=ut}kk(_e)}else rt.subtreeFlags&8772&&it!==null?(it.return=rt,V=it):kk(_e)}}function kk(_e){for(;V!==null;){var _=V;if(_.flags&8772){var et=_.alternate;try{if(_.flags&8772)switch(_.tag){case 0:case 11:case 15:U||Qj(5,_);break;case 1:var tt=_.stateNode;if(_.flags&4&&!U)if(et===null)tt.componentDidMount();else{var rt=_.elementType===_.type?et.memoizedProps:Ci(_.type,et.memoizedProps);tt.componentDidUpdate(rt,et.memoizedState,tt.__reactInternalSnapshotBeforeUpdate)}var it=_.updateQueue;it!==null&&sh(_,it,tt);break;case 3:var st=_.updateQueue;if(st!==null){if(et=null,_.child!==null)switch(_.child.tag){case 5:et=_.child.stateNode;break;case 1:et=_.child.stateNode}sh(_,st,et)}break;case 5:var at=_.stateNode;if(et===null&&_.flags&4){et=at;var ct=_.memoizedProps;switch(_.type){case"button":case"input":case"select":case"textarea":ct.autoFocus&&et.focus();break;case"img":ct.src&&(et.src=ct.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(_.memoizedState===null){var ut=_.alternate;if(ut!==null){var dt=ut.memoizedState;if(dt!==null){var ot=dt.dehydrated;ot!==null&&bd(ot)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$2(163))}U||_.flags&512&&Rj(_)}catch(nt){W(_,_.return,nt)}}if(_===_e){V=null;break}if(et=_.sibling,et!==null){et.return=_.return,V=et;break}V=_.return}}function gk(_e){for(;V!==null;){var _=V;if(_===_e){V=null;break}var et=_.sibling;if(et!==null){et.return=_.return,V=et;break}V=_.return}}function jk(_e){for(;V!==null;){var _=V;try{switch(_.tag){case 0:case 11:case 15:var et=_.return;try{Qj(4,_)}catch(ct){W(_,et,ct)}break;case 1:var tt=_.stateNode;if(typeof tt.componentDidMount=="function"){var rt=_.return;try{tt.componentDidMount()}catch(ct){W(_,rt,ct)}}var it=_.return;try{Rj(_)}catch(ct){W(_,it,ct)}break;case 5:var st=_.return;try{Rj(_)}catch(ct){W(_,st,ct)}}}catch(ct){W(_,_.return,ct)}if(_===_e){V=null;break}var at=_.sibling;if(at!==null){at.return=_.return,V=at;break}V=_.return}}var lk=Math.ceil,mk=ua.ReactCurrentDispatcher,nk=ua.ReactCurrentOwner,ok=ua.ReactCurrentBatchConfig,K=0,Q=null,Y=null,Z=0,fj=0,ej=Uf(0),T=0,pk=null,rh=0,qk=0,rk=0,sk=null,tk=null,fk=0,Gj=1/0,uk=null,Oi=!1,Pi=null,Ri=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R(){return K&6?B():Ak!==-1?Ak:Ak=B()}function yi(_e){return _e.mode&1?K&2&&Z!==0?Z&-Z:Kg.transition!==null?(Bk===0&&(Bk=yc()),Bk):(_e=C,_e!==0||(_e=window.event,_e=_e===void 0?16:jd(_e.type)),_e):1}function gi(_e,_,et,tt){if(50<yk)throw yk=0,zk=null,Error(p$2(185));Ac(_e,et,tt),(!(K&2)||_e!==Q)&&(_e===Q&&(!(K&2)&&(qk|=et),T===4&&Ck(_e,Z)),Dk(_e,tt),et===1&&K===0&&!(_.mode&1)&&(Gj=B()+500,fg&&jg()))}function Dk(_e,_){var et=_e.callbackNode;wc(_e,_);var tt=uc(_e,_e===Q?Z:0);if(tt===0)et!==null&&bc(et),_e.callbackNode=null,_e.callbackPriority=0;else if(_=tt&-tt,_e.callbackPriority!==_){if(et!=null&&bc(et),_===1)_e.tag===0?ig(Ek.bind(null,_e)):hg(Ek.bind(null,_e)),Jf(function(){!(K&6)&&jg()}),et=null;else{switch(Dc(tt)){case 1:et=fc;break;case 4:et=gc;break;case 16:et=hc;break;case 536870912:et=jc;break;default:et=hc}et=Fk(et,Gk.bind(null,_e))}_e.callbackPriority=_,_e.callbackNode=et}}function Gk(_e,_){if(Ak=-1,Bk=0,K&6)throw Error(p$2(327));var et=_e.callbackNode;if(Hk()&&_e.callbackNode!==et)return null;var tt=uc(_e,_e===Q?Z:0);if(tt===0)return null;if(tt&30||tt&_e.expiredLanes||_)_=Ik(_e,tt);else{_=tt;var rt=K;K|=2;var it=Jk();(Q!==_e||Z!==_)&&(uk=null,Gj=B()+500,Kk(_e,_));do try{Lk();break}catch(at){Mk(_e,at)}while(!0);$g(),mk.current=it,K=rt,Y!==null?_=0:(Q=null,Z=0,_=T)}if(_!==0){if(_===2&&(rt=xc(_e),rt!==0&&(tt=rt,_=Nk(_e,rt))),_===1)throw et=pk,Kk(_e,0),Ck(_e,tt),Dk(_e,B()),et;if(_===6)Ck(_e,tt);else{if(rt=_e.current.alternate,!(tt&30)&&!Ok(rt)&&(_=Ik(_e,tt),_===2&&(it=xc(_e),it!==0&&(tt=it,_=Nk(_e,it))),_===1))throw et=pk,Kk(_e,0),Ck(_e,tt),Dk(_e,B()),et;switch(_e.finishedWork=rt,_e.finishedLanes=tt,_){case 0:case 1:throw Error(p$2(345));case 2:Pk(_e,tk,uk);break;case 3:if(Ck(_e,tt),(tt&130023424)===tt&&(_=fk+500-B(),10<_)){if(uc(_e,0)!==0)break;if(rt=_e.suspendedLanes,(rt&tt)!==tt){R(),_e.pingedLanes|=_e.suspendedLanes&rt;break}_e.timeoutHandle=Ff(Pk.bind(null,_e,tk,uk),_);break}Pk(_e,tk,uk);break;case 4:if(Ck(_e,tt),(tt&4194240)===tt)break;for(_=_e.eventTimes,rt=-1;0<tt;){var st=31-oc(tt);it=1<<st,st=_[st],st>rt&&(rt=st),tt&=~it}if(tt=rt,tt=B()-tt,tt=(120>tt?120:480>tt?480:1080>tt?1080:1920>tt?1920:3e3>tt?3e3:4320>tt?4320:1960*lk(tt/1960))-tt,10<tt){_e.timeoutHandle=Ff(Pk.bind(null,_e,tk,uk),tt);break}Pk(_e,tk,uk);break;case 5:Pk(_e,tk,uk);break;default:throw Error(p$2(329))}}}return Dk(_e,B()),_e.callbackNode===et?Gk.bind(null,_e):null}function Nk(_e,_){var et=sk;return _e.current.memoizedState.isDehydrated&&(Kk(_e,_).flags|=256),_e=Ik(_e,_),_e!==2&&(_=tk,tk=et,_!==null&&Fj(_)),_e}function Fj(_e){tk===null?tk=_e:tk.push.apply(tk,_e)}function Ok(_e){for(var _=_e;;){if(_.flags&16384){var et=_.updateQueue;if(et!==null&&(et=et.stores,et!==null))for(var tt=0;tt<et.length;tt++){var rt=et[tt],it=rt.getSnapshot;rt=rt.value;try{if(!He(it(),rt))return!1}catch{return!1}}}if(et=_.child,_.subtreeFlags&16384&&et!==null)et.return=_,_=et;else{if(_===_e)break;for(;_.sibling===null;){if(_.return===null||_.return===_e)return!0;_=_.return}_.sibling.return=_.return,_=_.sibling}}return!0}function Ck(_e,_){for(_&=~rk,_&=~qk,_e.suspendedLanes|=_,_e.pingedLanes&=~_,_e=_e.expirationTimes;0<_;){var et=31-oc(_),tt=1<<et;_e[et]=-1,_&=~tt}}function Ek(_e){if(K&6)throw Error(p$2(327));Hk();var _=uc(_e,0);if(!(_&1))return Dk(_e,B()),null;var et=Ik(_e,_);if(_e.tag!==0&&et===2){var tt=xc(_e);tt!==0&&(_=tt,et=Nk(_e,tt))}if(et===1)throw et=pk,Kk(_e,0),Ck(_e,_),Dk(_e,B()),et;if(et===6)throw Error(p$2(345));return _e.finishedWork=_e.current.alternate,_e.finishedLanes=_,Pk(_e,tk,uk),Dk(_e,B()),null}function Qk(_e,_){var et=K;K|=1;try{return _e(_)}finally{K=et,K===0&&(Gj=B()+500,fg&&jg())}}function Rk(_e){wk!==null&&wk.tag===0&&!(K&6)&&Hk();var _=K;K|=1;var et=ok.transition,tt=C;try{if(ok.transition=null,C=1,_e)return _e()}finally{C=tt,ok.transition=et,K=_,!(K&6)&&jg()}}function Hj(){fj=ej.current,E(ej)}function Kk(_e,_){_e.finishedWork=null,_e.finishedLanes=0;var et=_e.timeoutHandle;if(et!==-1&&(_e.timeoutHandle=-1,Gf(et)),Y!==null)for(et=Y.return;et!==null;){var tt=et;switch(wg(tt),tt.tag){case 1:tt=tt.type.childContextTypes,tt!=null&&$f();break;case 3:zh(),E(Wf),E(H$1),Eh();break;case 5:Bh(tt);break;case 4:zh();break;case 13:E(L);break;case 19:E(L);break;case 10:ah(tt.type._context);break;case 22:case 23:Hj()}et=et.return}if(Q=_e,Y=_e=Pg(_e.current,null),Z=fj=_,T=0,pk=null,rk=qk=rh=0,tk=sk=null,fh!==null){for(_=0;_<fh.length;_++)if(et=fh[_],tt=et.interleaved,tt!==null){et.interleaved=null;var rt=tt.next,it=et.pending;if(it!==null){var st=it.next;it.next=rt,tt.next=st}et.pending=tt}fh=null}return _e}function Mk(_e,_){do{var et=Y;try{if($g(),Fh.current=Rh,Ih){for(var tt=M$1.memoizedState;tt!==null;){var rt=tt.queue;rt!==null&&(rt.pending=null),tt=tt.next}Ih=!1}if(Hh=0,O=N$1=M$1=null,Jh=!1,Kh=0,nk.current=null,et===null||et.return===null){T=1,pk=_,Y=null;break}e:{var it=_e,st=et.return,at=et,ct=_;if(_=Z,at.flags|=32768,ct!==null&&typeof ct=="object"&&typeof ct.then=="function"){var ut=ct,dt=at,ot=dt.tag;if(!(dt.mode&1)&&(ot===0||ot===11||ot===15)){var nt=dt.alternate;nt?(dt.updateQueue=nt.updateQueue,dt.memoizedState=nt.memoizedState,dt.lanes=nt.lanes):(dt.updateQueue=null,dt.memoizedState=null)}var lt=Ui(st);if(lt!==null){lt.flags&=-257,Vi(lt,st,at,it,_),lt.mode&1&&Si(it,ut,_),_=lt,ct=ut;var ht=_.updateQueue;if(ht===null){var ft=new Set;ft.add(ct),_.updateQueue=ft}else ht.add(ct);break e}else{if(!(_&1)){Si(it,ut,_),tj();break e}ct=Error(p$2(426))}}else if(I&&at.mode&1){var gt=Ui(st);if(gt!==null){!(gt.flags&65536)&&(gt.flags|=256),Vi(gt,st,at,it,_),Jg(Ji(ct,at));break e}}it=ct=Ji(ct,at),T!==4&&(T=2),sk===null?sk=[it]:sk.push(it),it=st;do{switch(it.tag){case 3:it.flags|=65536,_&=-_,it.lanes|=_;var mt=Ni(it,ct,_);ph(it,mt);break e;case 1:at=ct;var yt=it.type,bt=it.stateNode;if(!(it.flags&128)&&(typeof yt.getDerivedStateFromError=="function"||bt!==null&&typeof bt.componentDidCatch=="function"&&(Ri===null||!Ri.has(bt)))){it.flags|=65536,_&=-_,it.lanes|=_;var _t=Qi(it,at,_);ph(it,_t);break e}}it=it.return}while(it!==null)}Sk(et)}catch(vt){_=vt,Y===et&&et!==null&&(Y=et=et.return);continue}break}while(!0)}function Jk(){var _e=mk.current;return mk.current=Rh,_e===null?Rh:_e}function tj(){(T===0||T===3||T===2)&&(T=4),Q===null||!(rh&268435455)&&!(qk&268435455)||Ck(Q,Z)}function Ik(_e,_){var et=K;K|=2;var tt=Jk();(Q!==_e||Z!==_)&&(uk=null,Kk(_e,_));do try{Tk();break}catch(rt){Mk(_e,rt)}while(!0);if($g(),K=et,mk.current=tt,Y!==null)throw Error(p$2(261));return Q=null,Z=0,T}function Tk(){for(;Y!==null;)Uk(Y)}function Lk(){for(;Y!==null&&!cc();)Uk(Y)}function Uk(_e){var _=Vk(_e.alternate,_e,fj);_e.memoizedProps=_e.pendingProps,_===null?Sk(_e):Y=_,nk.current=null}function Sk(_e){var _=_e;do{var et=_.alternate;if(_e=_.return,_.flags&32768){if(et=Ij(et,_),et!==null){et.flags&=32767,Y=et;return}if(_e!==null)_e.flags|=32768,_e.subtreeFlags=0,_e.deletions=null;else{T=6,Y=null;return}}else if(et=Ej(et,_,fj),et!==null){Y=et;return}if(_=_.sibling,_!==null){Y=_;return}Y=_=_e}while(_!==null);T===0&&(T=5)}function Pk(_e,_,et){var tt=C,rt=ok.transition;try{ok.transition=null,C=1,Wk(_e,_,et,tt)}finally{ok.transition=rt,C=tt}return null}function Wk(_e,_,et,tt){do Hk();while(wk!==null);if(K&6)throw Error(p$2(327));et=_e.finishedWork;var rt=_e.finishedLanes;if(et===null)return null;if(_e.finishedWork=null,_e.finishedLanes=0,et===_e.current)throw Error(p$2(177));_e.callbackNode=null,_e.callbackPriority=0;var it=et.lanes|et.childLanes;if(Bc(_e,it),_e===Q&&(Y=Q=null,Z=0),!(et.subtreeFlags&2064)&&!(et.flags&2064)||vk||(vk=!0,Fk(hc,function(){return Hk(),null})),it=(et.flags&15990)!==0,et.subtreeFlags&15990||it){it=ok.transition,ok.transition=null;var st=C;C=1;var at=K;K|=4,nk.current=null,Oj(_e,et),dk(et,_e),Oe(Df),dd=!!Cf,Df=Cf=null,_e.current=et,hk(et),dc(),K=at,C=st,ok.transition=it}else _e.current=et;if(vk&&(vk=!1,wk=_e,xk=rt),it=_e.pendingLanes,it===0&&(Ri=null),mc(et.stateNode),Dk(_e,B()),_!==null)for(tt=_e.onRecoverableError,et=0;et<_.length;et++)rt=_[et],tt(rt.value,{componentStack:rt.stack,digest:rt.digest});if(Oi)throw Oi=!1,_e=Pi,Pi=null,_e;return xk&1&&_e.tag!==0&&Hk(),it=_e.pendingLanes,it&1?_e===zk?yk++:(yk=0,zk=_e):yk=0,jg(),null}function Hk(){if(wk!==null){var _e=Dc(xk),_=ok.transition,et=C;try{if(ok.transition=null,C=16>_e?16:_e,wk===null)var tt=!1;else{if(_e=wk,wk=null,xk=0,K&6)throw Error(p$2(331));var rt=K;for(K|=4,V=_e.current;V!==null;){var it=V,st=it.child;if(V.flags&16){var at=it.deletions;if(at!==null){for(var ct=0;ct<at.length;ct++){var ut=at[ct];for(V=ut;V!==null;){var dt=V;switch(dt.tag){case 0:case 11:case 15:Pj(8,dt,it)}var ot=dt.child;if(ot!==null)ot.return=dt,V=ot;else for(;V!==null;){dt=V;var nt=dt.sibling,lt=dt.return;if(Sj(dt),dt===ut){V=null;break}if(nt!==null){nt.return=lt,V=nt;break}V=lt}}}var ht=it.alternate;if(ht!==null){var ft=ht.child;if(ft!==null){ht.child=null;do{var gt=ft.sibling;ft.sibling=null,ft=gt}while(ft!==null)}}V=it}}if(it.subtreeFlags&2064&&st!==null)st.return=it,V=st;else e:for(;V!==null;){if(it=V,it.flags&2048)switch(it.tag){case 0:case 11:case 15:Pj(9,it,it.return)}var mt=it.sibling;if(mt!==null){mt.return=it.return,V=mt;break e}V=it.return}}var yt=_e.current;for(V=yt;V!==null;){st=V;var bt=st.child;if(st.subtreeFlags&2064&&bt!==null)bt.return=st,V=bt;else e:for(st=yt;V!==null;){if(at=V,at.flags&2048)try{switch(at.tag){case 0:case 11:case 15:Qj(9,at)}}catch(vt){W(at,at.return,vt)}if(at===st){V=null;break e}var _t=at.sibling;if(_t!==null){_t.return=at.return,V=_t;break e}V=at.return}}if(K=rt,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,_e)}catch{}tt=!0}return tt}finally{C=et,ok.transition=_}}return!1}function Xk(_e,_,et){_=Ji(et,_),_=Ni(_e,_,1),_e=nh(_e,_,1),_=R(),_e!==null&&(Ac(_e,1,_),Dk(_e,_))}function W(_e,_,et){if(_e.tag===3)Xk(_e,_e,et);else for(;_!==null;){if(_.tag===3){Xk(_,_e,et);break}else if(_.tag===1){var tt=_.stateNode;if(typeof _.type.getDerivedStateFromError=="function"||typeof tt.componentDidCatch=="function"&&(Ri===null||!Ri.has(tt))){_e=Ji(et,_e),_e=Qi(_,_e,1),_=nh(_,_e,1),_e=R(),_!==null&&(Ac(_,1,_e),Dk(_,_e));break}}_=_.return}}function Ti(_e,_,et){var tt=_e.pingCache;tt!==null&&tt.delete(_),_=R(),_e.pingedLanes|=_e.suspendedLanes&et,Q===_e&&(Z&et)===et&&(T===4||T===3&&(Z&130023424)===Z&&500>B()-fk?Kk(_e,0):rk|=et),Dk(_e,_)}function Yk(_e,_){_===0&&(_e.mode&1?(_=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):_=1);var et=R();_e=ih(_e,_),_e!==null&&(Ac(_e,_,et),Dk(_e,et))}function uj(_e){var _=_e.memoizedState,et=0;_!==null&&(et=_.retryLane),Yk(_e,et)}function bk(_e,_){var et=0;switch(_e.tag){case 13:var tt=_e.stateNode,rt=_e.memoizedState;rt!==null&&(et=rt.retryLane);break;case 19:tt=_e.stateNode;break;default:throw Error(p$2(314))}tt!==null&&tt.delete(_),Yk(_e,et)}var Vk;Vk=function(_e,_,et){if(_e!==null)if(_e.memoizedProps!==_.pendingProps||Wf.current)dh=!0;else{if(!(_e.lanes&et)&&!(_.flags&128))return dh=!1,yj(_e,_,et);dh=!!(_e.flags&131072)}else dh=!1,I&&_.flags&1048576&&ug(_,ng,_.index);switch(_.lanes=0,_.tag){case 2:var tt=_.type;ij(_e,_),_e=_.pendingProps;var rt=Yf(_,H$1.current);ch(_,et),rt=Nh(null,_,tt,_e,rt,et);var it=Sh();return _.flags|=1,typeof rt=="object"&&rt!==null&&typeof rt.render=="function"&&rt.$$typeof===void 0?(_.tag=1,_.memoizedState=null,_.updateQueue=null,Zf(tt)?(it=!0,cg(_)):it=!1,_.memoizedState=rt.state!==null&&rt.state!==void 0?rt.state:null,kh(_),rt.updater=Ei,_.stateNode=rt,rt._reactInternals=_,Ii(_,tt,_e,et),_=jj(null,_,tt,!0,it,et)):(_.tag=0,I&&it&&vg(_),Xi(null,_,rt,et),_=_.child),_;case 16:tt=_.elementType;e:{switch(ij(_e,_),_e=_.pendingProps,rt=tt._init,tt=rt(tt._payload),_.type=tt,rt=_.tag=Zk(tt),_e=Ci(tt,_e),rt){case 0:_=cj(null,_,tt,_e,et);break e;case 1:_=hj(null,_,tt,_e,et);break e;case 11:_=Yi(null,_,tt,_e,et);break e;case 14:_=$i(null,_,tt,Ci(tt.type,_e),et);break e}throw Error(p$2(306,tt,""))}return _;case 0:return tt=_.type,rt=_.pendingProps,rt=_.elementType===tt?rt:Ci(tt,rt),cj(_e,_,tt,rt,et);case 1:return tt=_.type,rt=_.pendingProps,rt=_.elementType===tt?rt:Ci(tt,rt),hj(_e,_,tt,rt,et);case 3:e:{if(kj(_),_e===null)throw Error(p$2(387));tt=_.pendingProps,it=_.memoizedState,rt=it.element,lh(_e,_),qh(_,tt,null,et);var st=_.memoizedState;if(tt=st.element,it.isDehydrated)if(it={element:tt,isDehydrated:!1,cache:st.cache,pendingSuspenseBoundaries:st.pendingSuspenseBoundaries,transitions:st.transitions},_.updateQueue.baseState=it,_.memoizedState=it,_.flags&256){rt=Ji(Error(p$2(423)),_),_=lj(_e,_,tt,et,rt);break e}else if(tt!==rt){rt=Ji(Error(p$2(424)),_),_=lj(_e,_,tt,et,rt);break e}else for(yg=Lf(_.stateNode.containerInfo.firstChild),xg=_,I=!0,zg=null,et=Vg(_,null,tt,et),_.child=et;et;)et.flags=et.flags&-3|4096,et=et.sibling;else{if(Ig(),tt===rt){_=Zi(_e,_,et);break e}Xi(_e,_,tt,et)}_=_.child}return _;case 5:return Ah(_),_e===null&&Eg(_),tt=_.type,rt=_.pendingProps,it=_e!==null?_e.memoizedProps:null,st=rt.children,Ef(tt,rt)?st=null:it!==null&&Ef(tt,it)&&(_.flags|=32),gj(_e,_),Xi(_e,_,st,et),_.child;case 6:return _e===null&&Eg(_),null;case 13:return oj(_e,_,et);case 4:return yh(_,_.stateNode.containerInfo),tt=_.pendingProps,_e===null?_.child=Ug(_,null,tt,et):Xi(_e,_,tt,et),_.child;case 11:return tt=_.type,rt=_.pendingProps,rt=_.elementType===tt?rt:Ci(tt,rt),Yi(_e,_,tt,rt,et);case 7:return Xi(_e,_,_.pendingProps,et),_.child;case 8:return Xi(_e,_,_.pendingProps.children,et),_.child;case 12:return Xi(_e,_,_.pendingProps.children,et),_.child;case 10:e:{if(tt=_.type._context,rt=_.pendingProps,it=_.memoizedProps,st=rt.value,G(Wg,tt._currentValue),tt._currentValue=st,it!==null)if(He(it.value,st)){if(it.children===rt.children&&!Wf.current){_=Zi(_e,_,et);break e}}else for(it=_.child,it!==null&&(it.return=_);it!==null;){var at=it.dependencies;if(at!==null){st=it.child;for(var ct=at.firstContext;ct!==null;){if(ct.context===tt){if(it.tag===1){ct=mh(-1,et&-et),ct.tag=2;var ut=it.updateQueue;if(ut!==null){ut=ut.shared;var dt=ut.pending;dt===null?ct.next=ct:(ct.next=dt.next,dt.next=ct),ut.pending=ct}}it.lanes|=et,ct=it.alternate,ct!==null&&(ct.lanes|=et),bh(it.return,et,_),at.lanes|=et;break}ct=ct.next}}else if(it.tag===10)st=it.type===_.type?null:it.child;else if(it.tag===18){if(st=it.return,st===null)throw Error(p$2(341));st.lanes|=et,at=st.alternate,at!==null&&(at.lanes|=et),bh(st,et,_),st=it.sibling}else st=it.child;if(st!==null)st.return=it;else for(st=it;st!==null;){if(st===_){st=null;break}if(it=st.sibling,it!==null){it.return=st.return,st=it;break}st=st.return}it=st}Xi(_e,_,rt.children,et),_=_.child}return _;case 9:return rt=_.type,tt=_.pendingProps.children,ch(_,et),rt=eh(rt),tt=tt(rt),_.flags|=1,Xi(_e,_,tt,et),_.child;case 14:return tt=_.type,rt=Ci(tt,_.pendingProps),rt=Ci(tt.type,rt),$i(_e,_,tt,rt,et);case 15:return bj(_e,_,_.type,_.pendingProps,et);case 17:return tt=_.type,rt=_.pendingProps,rt=_.elementType===tt?rt:Ci(tt,rt),ij(_e,_),_.tag=1,Zf(tt)?(_e=!0,cg(_)):_e=!1,ch(_,et),Gi(_,tt,rt),Ii(_,tt,rt,et),jj(null,_,tt,!0,_e,et);case 19:return xj(_e,_,et);case 22:return dj(_e,_,et)}throw Error(p$2(156,_.tag))};function Fk(_e,_){return ac(_e,_)}function $k(_e,_,et,tt){this.tag=_e,this.key=et,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=_,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=tt,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(_e,_,et,tt){return new $k(_e,_,et,tt)}function aj(_e){return _e=_e.prototype,!(!_e||!_e.isReactComponent)}function Zk(_e){if(typeof _e=="function")return aj(_e)?1:0;if(_e!=null){if(_e=_e.$$typeof,_e===Da)return 11;if(_e===Ga)return 14}return 2}function Pg(_e,_){var et=_e.alternate;return et===null?(et=Bg(_e.tag,_,_e.key,_e.mode),et.elementType=_e.elementType,et.type=_e.type,et.stateNode=_e.stateNode,et.alternate=_e,_e.alternate=et):(et.pendingProps=_,et.type=_e.type,et.flags=0,et.subtreeFlags=0,et.deletions=null),et.flags=_e.flags&14680064,et.childLanes=_e.childLanes,et.lanes=_e.lanes,et.child=_e.child,et.memoizedProps=_e.memoizedProps,et.memoizedState=_e.memoizedState,et.updateQueue=_e.updateQueue,_=_e.dependencies,et.dependencies=_===null?null:{lanes:_.lanes,firstContext:_.firstContext},et.sibling=_e.sibling,et.index=_e.index,et.ref=_e.ref,et}function Rg(_e,_,et,tt,rt,it){var st=2;if(tt=_e,typeof _e=="function")aj(_e)&&(st=1);else if(typeof _e=="string")st=5;else e:switch(_e){case ya:return Tg(et.children,rt,it,_);case za:st=8,rt|=8;break;case Aa:return _e=Bg(12,et,_,rt|2),_e.elementType=Aa,_e.lanes=it,_e;case Ea:return _e=Bg(13,et,_,rt),_e.elementType=Ea,_e.lanes=it,_e;case Fa:return _e=Bg(19,et,_,rt),_e.elementType=Fa,_e.lanes=it,_e;case Ia:return pj(et,rt,it,_);default:if(typeof _e=="object"&&_e!==null)switch(_e.$$typeof){case Ba:st=10;break e;case Ca:st=9;break e;case Da:st=11;break e;case Ga:st=14;break e;case Ha:st=16,tt=null;break e}throw Error(p$2(130,_e==null?_e:typeof _e,""))}return _=Bg(st,et,_,rt),_.elementType=_e,_.type=tt,_.lanes=it,_}function Tg(_e,_,et,tt){return _e=Bg(7,_e,tt,_),_e.lanes=et,_e}function pj(_e,_,et,tt){return _e=Bg(22,_e,tt,_),_e.elementType=Ia,_e.lanes=et,_e.stateNode={isHidden:!1},_e}function Qg(_e,_,et){return _e=Bg(6,_e,null,_),_e.lanes=et,_e}function Sg(_e,_,et){return _=Bg(4,_e.children!==null?_e.children:[],_e.key,_),_.lanes=et,_.stateNode={containerInfo:_e.containerInfo,pendingChildren:null,implementation:_e.implementation},_}function al(_e,_,et,tt,rt){this.tag=_,this.containerInfo=_e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=tt,this.onRecoverableError=rt,this.mutableSourceEagerHydrationData=null}function bl(_e,_,et,tt,rt,it,st,at,ct){return _e=new al(_e,_,et,at,ct),_===1?(_=1,it===!0&&(_|=8)):_=0,it=Bg(3,null,null,_),_e.current=it,it.stateNode=_e,it.memoizedState={element:tt,isDehydrated:et,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh(it),_e}function cl(_e,_,et){var tt=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:tt==null?null:""+tt,children:_e,containerInfo:_,implementation:et}}function dl(_e){if(!_e)return Vf;_e=_e._reactInternals;e:{if(Vb(_e)!==_e||_e.tag!==1)throw Error(p$2(170));var _=_e;do{switch(_.tag){case 3:_=_.stateNode.context;break e;case 1:if(Zf(_.type)){_=_.stateNode.__reactInternalMemoizedMergedChildContext;break e}}_=_.return}while(_!==null);throw Error(p$2(171))}if(_e.tag===1){var et=_e.type;if(Zf(et))return bg(_e,et,_)}return _}function el(_e,_,et,tt,rt,it,st,at,ct){return _e=bl(et,tt,!0,_e,rt,it,st,at,ct),_e.context=dl(null),et=_e.current,tt=R(),rt=yi(et),it=mh(tt,rt),it.callback=_??null,nh(et,it,rt),_e.current.lanes=rt,Ac(_e,rt,tt),Dk(_e,tt),_e}function fl(_e,_,et,tt){var rt=_.current,it=R(),st=yi(rt);return et=dl(et),_.context===null?_.context=et:_.pendingContext=et,_=mh(it,st),_.payload={element:_e},tt=tt===void 0?null:tt,tt!==null&&(_.callback=tt),_e=nh(rt,_,st),_e!==null&&(gi(_e,rt,st,it),oh(_e,rt,st)),st}function gl(_e){if(_e=_e.current,!_e.child)return null;switch(_e.child.tag){case 5:return _e.child.stateNode;default:return _e.child.stateNode}}function hl(_e,_){if(_e=_e.memoizedState,_e!==null&&_e.dehydrated!==null){var et=_e.retryLane;_e.retryLane=et!==0&&et<_?et:_}}function il(_e,_){hl(_e,_),(_e=_e.alternate)&&hl(_e,_)}var kl=typeof reportError=="function"?reportError:function(_e){console.error(_e)};function ll(_e){this._internalRoot=_e}ml.prototype.render=ll.prototype.render=function(_e){var _=this._internalRoot;if(_===null)throw Error(p$2(409));fl(_e,_,null,null)};ml.prototype.unmount=ll.prototype.unmount=function(){var _e=this._internalRoot;if(_e!==null){this._internalRoot=null;var _=_e.containerInfo;Rk(function(){fl(null,_e,null,null)}),_[uf]=null}};function ml(_e){this._internalRoot=_e}ml.prototype.unstable_scheduleHydration=function(_e){if(_e){var _=Hc();_e={blockedOn:null,target:_e,priority:_};for(var et=0;et<Qc.length&&_!==0&&_<Qc[et].priority;et++);Qc.splice(et,0,_e),et===0&&Vc(_e)}};function nl(_e){return!(!_e||_e.nodeType!==1&&_e.nodeType!==9&&_e.nodeType!==11)}function ol(_e){return!(!_e||_e.nodeType!==1&&_e.nodeType!==9&&_e.nodeType!==11&&(_e.nodeType!==8||_e.nodeValue!==" react-mount-point-unstable "))}function pl(){}function ql(_e,_,et,tt,rt){if(rt){if(typeof tt=="function"){var it=tt;tt=function(){var ut=gl(st);it.call(ut)}}var st=el(_,tt,_e,0,null,!1,!1,"",pl);return _e._reactRootContainer=st,_e[uf]=st.current,sf(_e.nodeType===8?_e.parentNode:_e),Rk(),st}for(;rt=_e.lastChild;)_e.removeChild(rt);if(typeof tt=="function"){var at=tt;tt=function(){var ut=gl(ct);at.call(ut)}}var ct=bl(_e,0,!1,null,null,!1,!1,"",pl);return _e._reactRootContainer=ct,_e[uf]=ct.current,sf(_e.nodeType===8?_e.parentNode:_e),Rk(function(){fl(_,ct,et,tt)}),ct}function rl(_e,_,et,tt,rt){var it=et._reactRootContainer;if(it){var st=it;if(typeof rt=="function"){var at=rt;rt=function(){var ct=gl(st);at.call(ct)}}fl(_,st,_e,rt)}else st=ql(et,_,_e,rt,tt);return gl(st)}Ec=function(_e){switch(_e.tag){case 3:var _=_e.stateNode;if(_.current.memoizedState.isDehydrated){var et=tc(_.pendingLanes);et!==0&&(Cc(_,et|1),Dk(_,B()),!(K&6)&&(Gj=B()+500,jg()))}break;case 13:Rk(function(){var tt=ih(_e,1);if(tt!==null){var rt=R();gi(tt,_e,1,rt)}}),il(_e,1)}};Fc=function(_e){if(_e.tag===13){var _=ih(_e,134217728);if(_!==null){var et=R();gi(_,_e,134217728,et)}il(_e,134217728)}};Gc=function(_e){if(_e.tag===13){var _=yi(_e),et=ih(_e,_);if(et!==null){var tt=R();gi(et,_e,_,tt)}il(_e,_)}};Hc=function(){return C};Ic=function(_e,_){var et=C;try{return C=_e,_()}finally{C=et}};yb=function(_e,_,et){switch(_){case"input":if(bb(_e,et),_=et.name,et.type==="radio"&&_!=null){for(et=_e;et.parentNode;)et=et.parentNode;for(et=et.querySelectorAll("input[name="+JSON.stringify(""+_)+'][type="radio"]'),_=0;_<et.length;_++){var tt=et[_];if(tt!==_e&&tt.form===_e.form){var rt=Db(tt);if(!rt)throw Error(p$2(90));Wa(tt),bb(tt,rt)}}}break;case"textarea":ib(_e,et);break;case"select":_=et.value,_!=null&&fb(_e,!!et.multiple,_,!1)}};Gb=Qk;Hb=Rk;var sl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Qk]},tl={findFiberByHostInstance:Wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ul={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(_e){return _e=Zb(_e),_e===null?null:_e.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{kc=vl.inject(ul),lc=vl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl;reactDom_production_min.createPortal=function(_e,_){var et=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl(_))throw Error(p$2(200));return cl(_e,_,null,et)};reactDom_production_min.createRoot=function(_e,_){if(!nl(_e))throw Error(p$2(299));var et=!1,tt="",rt=kl;return _!=null&&(_.unstable_strictMode===!0&&(et=!0),_.identifierPrefix!==void 0&&(tt=_.identifierPrefix),_.onRecoverableError!==void 0&&(rt=_.onRecoverableError)),_=bl(_e,1,!1,null,null,et,!1,tt,rt),_e[uf]=_.current,sf(_e.nodeType===8?_e.parentNode:_e),new ll(_)};reactDom_production_min.findDOMNode=function(_e){if(_e==null)return null;if(_e.nodeType===1)return _e;var _=_e._reactInternals;if(_===void 0)throw typeof _e.render=="function"?Error(p$2(188)):(_e=Object.keys(_e).join(","),Error(p$2(268,_e)));return _e=Zb(_),_e=_e===null?null:_e.stateNode,_e};reactDom_production_min.flushSync=function(_e){return Rk(_e)};reactDom_production_min.hydrate=function(_e,_,et){if(!ol(_))throw Error(p$2(200));return rl(null,_e,_,!0,et)};reactDom_production_min.hydrateRoot=function(_e,_,et){if(!nl(_e))throw Error(p$2(405));var tt=et!=null&&et.hydratedSources||null,rt=!1,it="",st=kl;if(et!=null&&(et.unstable_strictMode===!0&&(rt=!0),et.identifierPrefix!==void 0&&(it=et.identifierPrefix),et.onRecoverableError!==void 0&&(st=et.onRecoverableError)),_=el(_,null,_e,1,et??null,rt,!1,it,st),_e[uf]=_.current,sf(_e),tt)for(_e=0;_e<tt.length;_e++)et=tt[_e],rt=et._getVersion,rt=rt(et._source),_.mutableSourceEagerHydrationData==null?_.mutableSourceEagerHydrationData=[et,rt]:_.mutableSourceEagerHydrationData.push(et,rt);return new ml(_)};reactDom_production_min.render=function(_e,_,et){if(!ol(_))throw Error(p$2(200));return rl(null,_e,_,!1,et)};reactDom_production_min.unmountComponentAtNode=function(_e){if(!ol(_e))throw Error(p$2(40));return _e._reactRootContainer?(Rk(function(){rl(null,null,_e,!1,function(){_e._reactRootContainer=null,_e[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Qk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(_e,_,et,tt){if(!ol(et))throw Error(p$2(200));if(_e==null||_e._reactInternals===void 0)throw Error(p$2(38));return rl(_e,_,et,!1,tt)};reactDom_production_min.version="18.3.1-next-f1338f8080-20240426";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(_e){console.error(_e)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports,createRoot,m$2=reactDomExports;createRoot=m$2.createRoot,m$2.hydrateRoot;const cx=(..._e)=>_e.filter(Boolean).map(_=>_.trim()).join(" ");function getErrorMessage$1(_e,_){return`${_e} returned \`undefined\`. Seems you forgot to wrap component within ${_}`}function createContext$1(_e={}){const{name:_,strict:et=!0,hookName:tt="useContext",providerName:rt="Provider",errorMessage:it,defaultValue:st}=_e,at=reactExports.createContext(st);at.displayName=_;function ct(){var dt;const ut=reactExports.useContext(at);if(!ut&&et){const ot=new Error(it??getErrorMessage$1(tt,rt));throw ot.name="ContextError",(dt=Error.captureStackTrace)==null||dt.call(Error,ot,ct),ot}return ut}return[at.Provider,ct,at]}function callAll$1(..._e){return function(...et){_e.forEach(tt=>tt==null?void 0:tt(...et))}}const clsx$1=(..._e)=>_e.map(_=>{var et;return(et=_==null?void 0:_.trim)==null?void 0:et.call(_)}).filter(Boolean).join(" "),eventRegex=/^on[A-Z]/;function mergeProps$1(..._e){let _={};for(let et of _e){for(let tt in _){if(eventRegex.test(tt)&&typeof _[tt]=="function"&&typeof et[tt]=="function"){_[tt]=callAll$1(_[tt],et[tt]);continue}if(tt==="className"||tt==="class"){_[tt]=clsx$1(_[tt],et[tt]);continue}if(tt==="style"){_[tt]=Object.assign({},_[tt]??{},et[tt]??{});continue}_[tt]=et[tt]!==void 0?et[tt]:_[tt]}for(let tt in et)_[tt]===void 0&&(_[tt]=et[tt])}return _}const EMPTY_STYLES=Object.freeze({}),EMPTY_SLOT_STYLES=Object.freeze({});function memoize(_e){var _=Object.create(null);return function(et){return _[et]===void 0&&(_[et]=_e(et)),_[et]}}var reactPropsRegex=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,isPropValid$1=memoize(function(_e){return reactPropsRegex.test(_e)||_e.charCodeAt(0)===111&&_e.charCodeAt(1)===110&&_e.charCodeAt(2)<91});function sheetForTag(_e){if(_e.sheet)return _e.sheet;for(var _=0;_<document.styleSheets.length;_++)if(document.styleSheets[_].ownerNode===_e)return document.styleSheets[_]}function createStyleElement(_e){var _=document.createElement("style");return _.setAttribute("data-emotion",_e.key),_e.nonce!==void 0&&_.setAttribute("nonce",_e.nonce),_.appendChild(document.createTextNode("")),_.setAttribute("data-s",""),_}var StyleSheet=function(){function _e(et){var tt=this;this._insertTag=function(rt){var it;tt.tags.length===0?tt.insertionPoint?it=tt.insertionPoint.nextSibling:tt.prepend?it=tt.container.firstChild:it=tt.before:it=tt.tags[tt.tags.length-1].nextSibling,tt.container.insertBefore(rt,it),tt.tags.push(rt)},this.isSpeedy=et.speedy===void 0?!0:et.speedy,this.tags=[],this.ctr=0,this.nonce=et.nonce,this.key=et.key,this.container=et.container,this.prepend=et.prepend,this.insertionPoint=et.insertionPoint,this.before=null}var _=_e.prototype;return _.hydrate=function(tt){tt.forEach(this._insertTag)},_.insert=function(tt){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(createStyleElement(this));var rt=this.tags[this.tags.length-1];if(this.isSpeedy){var it=sheetForTag(rt);try{it.insertRule(tt,it.cssRules.length)}catch{}}else rt.appendChild(document.createTextNode(tt));this.ctr++},_.flush=function(){this.tags.forEach(function(tt){var rt;return(rt=tt.parentNode)==null?void 0:rt.removeChild(tt)}),this.tags=[],this.ctr=0},_e}(),MS="-ms-",MOZ="-moz-",WEBKIT="-webkit-",COMMENT="comm",RULESET="rule",DECLARATION="decl",IMPORT="@import",KEYFRAMES="@keyframes",LAYER="@layer",abs$3=Math.abs,from=String.fromCharCode,assign$1=Object.assign;function hash(_e,_){return charat(_e,0)^45?(((_<<2^charat(_e,0))<<2^charat(_e,1))<<2^charat(_e,2))<<2^charat(_e,3):0}function trim(_e){return _e.trim()}function match$1(_e,_){return(_e=_.exec(_e))?_e[0]:_e}function replace$1(_e,_,et){return _e.replace(_,et)}function indexof(_e,_){return _e.indexOf(_)}function charat(_e,_){return _e.charCodeAt(_)|0}function substr(_e,_,et){return _e.slice(_,et)}function strlen(_e){return _e.length}function sizeof(_e){return _e.length}function append(_e,_){return _.push(_e),_e}function combine$1(_e,_){return _e.map(_).join("")}var line=1,column=1,length=0,position=0,character=0,characters="";function node(_e,_,et,tt,rt,it,st){return{value:_e,root:_,parent:et,type:tt,props:rt,children:it,line,column,length:st,return:""}}function copy(_e,_){return assign$1(node("",null,null,"",null,null,0),_e,{length:-_e.length},_)}function char(){return character}function prev(){return character=position>0?charat(characters,--position):0,column--,character===10&&(column=1,line--),character}function next(){return character=position<length?charat(characters,position++):0,column++,character===10&&(column=1,line++),character}function peek(){return charat(characters,position)}function caret(){return position}function slice(_e,_){return substr(characters,_e,_)}function token(_e){switch(_e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function alloc(_e){return line=column=1,length=strlen(characters=_e),position=0,[]}function dealloc(_e){return characters="",_e}function delimit(_e){return trim(slice(position-1,delimiter(_e===91?_e+2:_e===40?_e+1:_e)))}function whitespace(_e){for(;(character=peek())&&character<33;)next();return token(_e)>2||token(character)>3?"":" "}function escaping(_e,_){for(;--_&&next()&&!(character<48||character>102||character>57&&character<65||character>70&&character<97););return slice(_e,caret()+(_<6&&peek()==32&&next()==32))}function delimiter(_e){for(;next();)switch(character){case _e:return position;case 34:case 39:_e!==34&&_e!==39&&delimiter(character);break;case 40:_e===41&&delimiter(_e);break;case 92:next();break}return position}function commenter(_e,_){for(;next()&&_e+character!==57;)if(_e+character===84&&peek()===47)break;return"/*"+slice(_,position-1)+"*"+from(_e===47?_e:next())}function identifier(_e){for(;!token(peek());)next();return slice(_e,position)}function compile(_e){return dealloc(parse$3("",null,null,null,[""],_e=alloc(_e),0,[0],_e))}function parse$3(_e,_,et,tt,rt,it,st,at,ct){for(var ut=0,dt=0,ot=st,nt=0,lt=0,ht=0,ft=1,gt=1,mt=1,yt=0,bt="",_t=rt,vt=it,xt=tt,wt=bt;gt;)switch(ht=yt,yt=next()){case 40:if(ht!=108&&charat(wt,ot-1)==58){indexof(wt+=replace$1(delimit(yt),"&","&\f"),"&\f")!=-1&&(mt=-1);break}case 34:case 39:case 91:wt+=delimit(yt);break;case 9:case 10:case 13:case 32:wt+=whitespace(ht);break;case 92:wt+=escaping(caret()-1,7);continue;case 47:switch(peek()){case 42:case 47:append(comment(commenter(next(),caret()),_,et),ct);break;default:wt+="/"}break;case 123*ft:at[ut++]=strlen(wt)*mt;case 125*ft:case 59:case 0:switch(yt){case 0:case 125:gt=0;case 59+dt:mt==-1&&(wt=replace$1(wt,/\f/g,"")),lt>0&&strlen(wt)-ot&&append(lt>32?declaration(wt+";",tt,et,ot-1):declaration(replace$1(wt," ","")+";",tt,et,ot-2),ct);break;case 59:wt+=";";default:if(append(xt=ruleset(wt,_,et,ut,dt,rt,at,bt,_t=[],vt=[],ot),it),yt===123)if(dt===0)parse$3(wt,_,xt,xt,_t,it,ot,at,vt);else switch(nt===99&&charat(wt,3)===110?100:nt){case 100:case 108:case 109:case 115:parse$3(_e,xt,xt,tt&&append(ruleset(_e,xt,xt,0,0,rt,at,bt,rt,_t=[],ot),vt),rt,vt,ot,at,tt?_t:vt);break;default:parse$3(wt,xt,xt,xt,[""],vt,0,at,vt)}}ut=dt=lt=0,ft=mt=1,bt=wt="",ot=st;break;case 58:ot=1+strlen(wt),lt=ht;default:if(ft<1){if(yt==123)--ft;else if(yt==125&&ft++==0&&prev()==125)continue}switch(wt+=from(yt),yt*ft){case 38:mt=dt>0?1:(wt+="\f",-1);break;case 44:at[ut++]=(strlen(wt)-1)*mt,mt=1;break;case 64:peek()===45&&(wt+=delimit(next())),nt=peek(),dt=ot=strlen(bt=wt+=identifier(caret())),yt++;break;case 45:ht===45&&strlen(wt)==2&&(ft=0)}}return it}function ruleset(_e,_,et,tt,rt,it,st,at,ct,ut,dt){for(var ot=rt-1,nt=rt===0?it:[""],lt=sizeof(nt),ht=0,ft=0,gt=0;ht<tt;++ht)for(var mt=0,yt=substr(_e,ot+1,ot=abs$3(ft=st[ht])),bt=_e;mt<lt;++mt)(bt=trim(ft>0?nt[mt]+" "+yt:replace$1(yt,/&\f/g,nt[mt])))&&(ct[gt++]=bt);return node(_e,_,et,rt===0?RULESET:at,ct,ut,dt)}function comment(_e,_,et){return node(_e,_,et,COMMENT,from(char()),substr(_e,2,-2),0)}function declaration(_e,_,et,tt){return node(_e,_,et,DECLARATION,substr(_e,0,tt),substr(_e,tt+1,-1),tt)}function serialize$1(_e,_){for(var et="",tt=sizeof(_e),rt=0;rt<tt;rt++)et+=_(_e[rt],rt,_e,_)||"";return et}function stringify$2(_e,_,et,tt){switch(_e.type){case LAYER:if(_e.children.length)break;case IMPORT:case DECLARATION:return _e.return=_e.return||_e.value;case COMMENT:return"";case KEYFRAMES:return _e.return=_e.value+"{"+serialize$1(_e.children,tt)+"}";case RULESET:_e.value=_e.props.join(",")}return strlen(et=serialize$1(_e.children,tt))?_e.return=_e.value+"{"+et+"}":""}function middleware(_e){var _=sizeof(_e);return function(et,tt,rt,it){for(var st="",at=0;at<_;at++)st+=_e[at](et,tt,rt,it)||"";return st}}function rulesheet(_e){return function(_){_.root||(_=_.return)&&_e(_)}}var identifierWithPointTracking=function(_,et,tt){for(var rt=0,it=0;rt=it,it=peek(),rt===38&&it===12&&(et[tt]=1),!token(it);)next();return slice(_,position)},toRules=function(_,et){var tt=-1,rt=44;do switch(token(rt)){case 0:rt===38&&peek()===12&&(et[tt]=1),_[tt]+=identifierWithPointTracking(position-1,et,tt);break;case 2:_[tt]+=delimit(rt);break;case 4:if(rt===44){_[++tt]=peek()===58?"&\f":"",et[tt]=_[tt].length;break}default:_[tt]+=from(rt)}while(rt=next());return _},getRules=function(_,et){return dealloc(toRules(alloc(_),et))},fixedElements=new WeakMap,compat=function(_){if(!(_.type!=="rule"||!_.parent||_.length<1)){for(var et=_.value,tt=_.parent,rt=_.column===tt.column&&_.line===tt.line;tt.type!=="rule";)if(tt=tt.parent,!tt)return;if(!(_.props.length===1&&et.charCodeAt(0)!==58&&!fixedElements.get(tt))&&!rt){fixedElements.set(_,!0);for(var it=[],st=getRules(et,it),at=tt.props,ct=0,ut=0;ct<st.length;ct++)for(var dt=0;dt<at.length;dt++,ut++)_.props[ut]=it[ct]?st[ct].replace(/&\f/g,at[dt]):at[dt]+" "+st[ct]}}},removeLabel=function(_){if(_.type==="decl"){var et=_.value;et.charCodeAt(0)===108&&et.charCodeAt(2)===98&&(_.return="",_.value="")}};function prefix(_e,_){switch(hash(_e,_)){case 5103:return WEBKIT+"print-"+_e+_e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return WEBKIT+_e+_e;case 5349:case 4246:case 4810:case 6968:case 2756:return WEBKIT+_e+MOZ+_e+MS+_e+_e;case 6828:case 4268:return WEBKIT+_e+MS+_e+_e;case 6165:return WEBKIT+_e+MS+"flex-"+_e+_e;case 5187:return WEBKIT+_e+replace$1(_e,/(\w+).+(:[^]+)/,WEBKIT+"box-$1$2"+MS+"flex-$1$2")+_e;case 5443:return WEBKIT+_e+MS+"flex-item-"+replace$1(_e,/flex-|-self/,"")+_e;case 4675:return WEBKIT+_e+MS+"flex-line-pack"+replace$1(_e,/align-content|flex-|-self/,"")+_e;case 5548:return WEBKIT+_e+MS+replace$1(_e,"shrink","negative")+_e;case 5292:return WEBKIT+_e+MS+replace$1(_e,"basis","preferred-size")+_e;case 6060:return WEBKIT+"box-"+replace$1(_e,"-grow","")+WEBKIT+_e+MS+replace$1(_e,"grow","positive")+_e;case 4554:return WEBKIT+replace$1(_e,/([^-])(transform)/g,"$1"+WEBKIT+"$2")+_e;case 6187:return replace$1(replace$1(replace$1(_e,/(zoom-|grab)/,WEBKIT+"$1"),/(image-set)/,WEBKIT+"$1"),_e,"")+_e;case 5495:case 3959:return replace$1(_e,/(image-set\([^]*)/,WEBKIT+"$1$`$1");case 4968:return replace$1(replace$1(_e,/(.+:)(flex-)?(.*)/,WEBKIT+"box-pack:$3"+MS+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+WEBKIT+_e+_e;case 4095:case 3583:case 4068:case 2532:return replace$1(_e,/(.+)-inline(.+)/,WEBKIT+"$1$2")+_e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(strlen(_e)-1-_>6)switch(charat(_e,_+1)){case 109:if(charat(_e,_+4)!==45)break;case 102:return replace$1(_e,/(.+:)(.+)-([^]+)/,"$1"+WEBKIT+"$2-$3$1"+MOZ+(charat(_e,_+3)==108?"$3":"$2-$3"))+_e;case 115:return~indexof(_e,"stretch")?prefix(replace$1(_e,"stretch","fill-available"),_)+_e:_e}break;case 4949:if(charat(_e,_+1)!==115)break;case 6444:switch(charat(_e,strlen(_e)-3-(~indexof(_e,"!important")&&10))){case 107:return replace$1(_e,":",":"+WEBKIT)+_e;case 101:return replace$1(_e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+WEBKIT+(charat(_e,14)===45?"inline-":"")+"box$3$1"+WEBKIT+"$2$3$1"+MS+"$2box$3")+_e}break;case 5936:switch(charat(_e,_+11)){case 114:return WEBKIT+_e+MS+replace$1(_e,/[svh]\w+-[tblr]{2}/,"tb")+_e;case 108:return WEBKIT+_e+MS+replace$1(_e,/[svh]\w+-[tblr]{2}/,"tb-rl")+_e;case 45:return WEBKIT+_e+MS+replace$1(_e,/[svh]\w+-[tblr]{2}/,"lr")+_e}return WEBKIT+_e+MS+_e+_e}return _e}var prefixer=function(_,et,tt,rt){if(_.length>-1&&!_.return)switch(_.type){case DECLARATION:_.return=prefix(_.value,_.length);break;case KEYFRAMES:return serialize$1([copy(_,{value:replace$1(_.value,"@","@"+WEBKIT)})],rt);case RULESET:if(_.length)return combine$1(_.props,function(it){switch(match$1(it,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return serialize$1([copy(_,{props:[replace$1(it,/:(read-\w+)/,":"+MOZ+"$1")]})],rt);case"::placeholder":return serialize$1([copy(_,{props:[replace$1(it,/:(plac\w+)/,":"+WEBKIT+"input-$1")]}),copy(_,{props:[replace$1(it,/:(plac\w+)/,":"+MOZ+"$1")]}),copy(_,{props:[replace$1(it,/:(plac\w+)/,MS+"input-$1")]})],rt)}return""})}},defaultStylisPlugins=[prefixer],createCache=function(_){var et=_.key;if(et==="css"){var tt=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(tt,function(ft){var gt=ft.getAttribute("data-emotion");gt.indexOf(" ")!==-1&&(document.head.appendChild(ft),ft.setAttribute("data-s",""))})}var rt=_.stylisPlugins||defaultStylisPlugins,it={},st,at=[];st=_.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+et+' "]'),function(ft){for(var gt=ft.getAttribute("data-emotion").split(" "),mt=1;mt<gt.length;mt++)it[gt[mt]]=!0;at.push(ft)});var ct,ut=[compat,removeLabel];{var dt,ot=[stringify$2,rulesheet(function(ft){dt.insert(ft)})],nt=middleware(ut.concat(rt,ot)),lt=function(gt){return serialize$1(compile(gt),nt)};ct=function(gt,mt,yt,bt){dt=yt,lt(gt?gt+"{"+mt.styles+"}":mt.styles),bt&&(ht.inserted[mt.name]=!0)}}var ht={key:et,sheet:new StyleSheet({key:et,container:st,nonce:_.nonce,speedy:_.speedy,prepend:_.prepend,insertionPoint:_.insertionPoint}),nonce:_.nonce,inserted:it,registered:{},insert:ct};return ht.sheet.hydrate(at),ht},reactIs$1={exports:{}},reactIs_production_min={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b$1=typeof Symbol=="function"&&Symbol.for,c$1=b$1?Symbol.for("react.element"):60103,d$1=b$1?Symbol.for("react.portal"):60106,e$1=b$1?Symbol.for("react.fragment"):60107,f$1=b$1?Symbol.for("react.strict_mode"):60108,g$1=b$1?Symbol.for("react.profiler"):60114,h$1=b$1?Symbol.for("react.provider"):60109,k$1=b$1?Symbol.for("react.context"):60110,l$1=b$1?Symbol.for("react.async_mode"):60111,m$1=b$1?Symbol.for("react.concurrent_mode"):60111,n$1=b$1?Symbol.for("react.forward_ref"):60112,p$1=b$1?Symbol.for("react.suspense"):60113,q=b$1?Symbol.for("react.suspense_list"):60120,r$1=b$1?Symbol.for("react.memo"):60115,t$1=b$1?Symbol.for("react.lazy"):60116,v$1=b$1?Symbol.for("react.block"):60121,w$1=b$1?Symbol.for("react.fundamental"):60117,x$1=b$1?Symbol.for("react.responder"):60118,y$1=b$1?Symbol.for("react.scope"):60119;function z(_e){if(typeof _e=="object"&&_e!==null){var _=_e.$$typeof;switch(_){case c$1:switch(_e=_e.type,_e){case l$1:case m$1:case e$1:case g$1:case f$1:case p$1:return _e;default:switch(_e=_e&&_e.$$typeof,_e){case k$1:case n$1:case t$1:case r$1:case h$1:return _e;default:return _}}case d$1:return _}}}function A(_e){return z(_e)===m$1}reactIs_production_min.AsyncMode=l$1;reactIs_production_min.ConcurrentMode=m$1;reactIs_production_min.ContextConsumer=k$1;reactIs_production_min.ContextProvider=h$1;reactIs_production_min.Element=c$1;reactIs_production_min.ForwardRef=n$1;reactIs_production_min.Fragment=e$1;reactIs_production_min.Lazy=t$1;reactIs_production_min.Memo=r$1;reactIs_production_min.Portal=d$1;reactIs_production_min.Profiler=g$1;reactIs_production_min.StrictMode=f$1;reactIs_production_min.Suspense=p$1;reactIs_production_min.isAsyncMode=function(_e){return A(_e)||z(_e)===l$1};reactIs_production_min.isConcurrentMode=A;reactIs_production_min.isContextConsumer=function(_e){return z(_e)===k$1};reactIs_production_min.isContextProvider=function(_e){return z(_e)===h$1};reactIs_production_min.isElement=function(_e){return typeof _e=="object"&&_e!==null&&_e.$$typeof===c$1};reactIs_production_min.isForwardRef=function(_e){return z(_e)===n$1};reactIs_production_min.isFragment=function(_e){return z(_e)===e$1};reactIs_production_min.isLazy=function(_e){return z(_e)===t$1};reactIs_production_min.isMemo=function(_e){return z(_e)===r$1};reactIs_production_min.isPortal=function(_e){return z(_e)===d$1};reactIs_production_min.isProfiler=function(_e){return z(_e)===g$1};reactIs_production_min.isStrictMode=function(_e){return z(_e)===f$1};reactIs_production_min.isSuspense=function(_e){return z(_e)===p$1};reactIs_production_min.isValidElementType=function(_e){return typeof _e=="string"||typeof _e=="function"||_e===e$1||_e===m$1||_e===g$1||_e===f$1||_e===p$1||_e===q||typeof _e=="object"&&_e!==null&&(_e.$$typeof===t$1||_e.$$typeof===r$1||_e.$$typeof===h$1||_e.$$typeof===k$1||_e.$$typeof===n$1||_e.$$typeof===w$1||_e.$$typeof===x$1||_e.$$typeof===y$1||_e.$$typeof===v$1)};reactIs_production_min.typeOf=z;reactIs$1.exports=reactIs_production_min;var reactIsExports=reactIs$1.exports,reactIs=reactIsExports,FORWARD_REF_STATICS={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},MEMO_STATICS={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},TYPE_STATICS={};TYPE_STATICS[reactIs.ForwardRef]=FORWARD_REF_STATICS;TYPE_STATICS[reactIs.Memo]=MEMO_STATICS;var isBrowser$1=!0;function getRegisteredStyles(_e,_,et){var tt="";return et.split(" ").forEach(function(rt){_e[rt]!==void 0?_.push(_e[rt]+";"):rt&&(tt+=rt+" ")}),tt}var registerStyles=function(_,et,tt){var rt=_.key+"-"+et.name;(tt===!1||isBrowser$1===!1)&&_.registered[rt]===void 0&&(_.registered[rt]=et.styles)},insertStyles=function(_,et,tt){registerStyles(_,et,tt);var rt=_.key+"-"+et.name;if(_.inserted[et.name]===void 0){var it=et;do _.insert(et===it?"."+rt:"",it,_.sheet,!0),it=it.next;while(it!==void 0)}};function murmur2(_e){for(var _=0,et,tt=0,rt=_e.length;rt>=4;++tt,rt-=4)et=_e.charCodeAt(tt)&255|(_e.charCodeAt(++tt)&255)<<8|(_e.charCodeAt(++tt)&255)<<16|(_e.charCodeAt(++tt)&255)<<24,et=(et&65535)*1540483477+((et>>>16)*59797<<16),et^=et>>>24,_=(et&65535)*1540483477+((et>>>16)*59797<<16)^(_&65535)*1540483477+((_>>>16)*59797<<16);switch(rt){case 3:_^=(_e.charCodeAt(tt+2)&255)<<16;case 2:_^=(_e.charCodeAt(tt+1)&255)<<8;case 1:_^=_e.charCodeAt(tt)&255,_=(_&65535)*1540483477+((_>>>16)*59797<<16)}return _^=_>>>13,_=(_&65535)*1540483477+((_>>>16)*59797<<16),((_^_>>>15)>>>0).toString(36)}var unitlessKeys={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},hyphenateRegex=/[A-Z]|^ms/g,animationRegex=/_EMO_([^_]+?)_([^]*?)_EMO_/g,isCustomProperty=function(_){return _.charCodeAt(1)===45},isProcessableValue=function(_){return _!=null&&typeof _!="boolean"},processStyleName=memoize(function(_e){return isCustomProperty(_e)?_e:_e.replace(hyphenateRegex,"-$&").toLowerCase()}),processStyleValue=function(_,et){switch(_){case"animation":case"animationName":if(typeof et=="string")return et.replace(animationRegex,function(tt,rt,it){return cursor$1={name:rt,styles:it,next:cursor$1},rt})}return unitlessKeys[_]!==1&&!isCustomProperty(_)&&typeof et=="number"&&et!==0?et+"px":et};function handleInterpolation(_e,_,et){if(et==null)return"";var tt=et;if(tt.__emotion_styles!==void 0)return tt;switch(typeof et){case"boolean":return"";case"object":{var rt=et;if(rt.anim===1)return cursor$1={name:rt.name,styles:rt.styles,next:cursor$1},rt.name;var it=et;if(it.styles!==void 0){var st=it.next;if(st!==void 0)for(;st!==void 0;)cursor$1={name:st.name,styles:st.styles,next:cursor$1},st=st.next;var at=it.styles+";";return at}return createStringFromObject(_e,_,et)}case"function":{if(_e!==void 0){var ct=cursor$1,ut=et(_e);return cursor$1=ct,handleInterpolation(_e,_,ut)}break}}var dt=et;if(_==null)return dt;var ot=_[dt];return ot!==void 0?ot:dt}function createStringFromObject(_e,_,et){var tt="";if(Array.isArray(et))for(var rt=0;rt<et.length;rt++)tt+=handleInterpolation(_e,_,et[rt])+";";else for(var it in et){var st=et[it];if(typeof st!="object"){var at=st;_!=null&&_[at]!==void 0?tt+=it+"{"+_[at]+"}":isProcessableValue(at)&&(tt+=processStyleName(it)+":"+processStyleValue(it,at)+";")}else if(Array.isArray(st)&&typeof st[0]=="string"&&(_==null||_[st[0]]===void 0))for(var ct=0;ct<st.length;ct++)isProcessableValue(st[ct])&&(tt+=processStyleName(it)+":"+processStyleValue(it,st[ct])+";");else{var ut=handleInterpolation(_e,_,st);switch(it){case"animation":case"animationName":{tt+=processStyleName(it)+":"+ut+";";break}default:tt+=it+"{"+ut+"}"}}}return tt}var labelPattern=/label:\s*([^\s;{]+)\s*(;|$)/g,cursor$1;function serializeStyles(_e,_,et){if(_e.length===1&&typeof _e[0]=="object"&&_e[0]!==null&&_e[0].styles!==void 0)return _e[0];var tt=!0,rt="";cursor$1=void 0;var it=_e[0];if(it==null||it.raw===void 0)tt=!1,rt+=handleInterpolation(et,_,it);else{var st=it;rt+=st[0]}for(var at=1;at<_e.length;at++)if(rt+=handleInterpolation(et,_,_e[at]),tt){var ct=it;rt+=ct[at]}labelPattern.lastIndex=0;for(var ut="",dt;(dt=labelPattern.exec(rt))!==null;)ut+="-"+dt[1];var ot=murmur2(rt)+ut;return{name:ot,styles:rt,next:cursor$1}}var syncFallback=function(_){return _()},useInsertionEffect=React$1.useInsertionEffect?React$1.useInsertionEffect:!1,useInsertionEffectAlwaysWithSyncFallback=useInsertionEffect||syncFallback,useInsertionEffectWithLayoutFallback=useInsertionEffect||reactExports.useLayoutEffect,EmotionCacheContext=reactExports.createContext(typeof HTMLElement<"u"?createCache({key:"css"}):null);EmotionCacheContext.Provider;var withEmotionCache=function(_){return reactExports.forwardRef(function(et,tt){var rt=reactExports.useContext(EmotionCacheContext);return _(et,rt,tt)})},ThemeContext=reactExports.createContext({}),hasOwn$2={}.hasOwnProperty,typePropName="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",createEmotionProps=function(_,et){var tt={};for(var rt in et)hasOwn$2.call(et,rt)&&(tt[rt]=et[rt]);return tt[typePropName]=_,tt},Insertion$1=function(_){var et=_.cache,tt=_.serialized,rt=_.isStringTag;return registerStyles(et,tt,rt),useInsertionEffectAlwaysWithSyncFallback(function(){return insertStyles(et,tt,rt)}),null},Emotion=withEmotionCache(function(_e,_,et){var tt=_e.css;typeof tt=="string"&&_.registered[tt]!==void 0&&(tt=_.registered[tt]);var rt=_e[typePropName],it=[tt],st="";typeof _e.className=="string"?st=getRegisteredStyles(_.registered,it,_e.className):_e.className!=null&&(st=_e.className+" ");var at=serializeStyles(it,void 0,reactExports.useContext(ThemeContext));st+=_.key+"-"+at.name;var ct={};for(var ut in _e)hasOwn$2.call(_e,ut)&&ut!=="css"&&ut!==typePropName&&(ct[ut]=_e[ut]);return ct.className=st,et&&(ct.ref=et),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(Insertion$1,{cache:_,serialized:at,isStringTag:typeof rt=="string"}),reactExports.createElement(rt,ct))}),Emotion$1=Emotion,jsx=function(_,et){var tt=arguments;if(et==null||!hasOwn$2.call(et,"css"))return reactExports.createElement.apply(void 0,tt);var rt=tt.length,it=new Array(rt);it[0]=Emotion$1,it[1]=createEmotionProps(_,et);for(var st=2;st<rt;st++)it[st]=tt[st];return reactExports.createElement.apply(null,it)};(function(_e){var _;_||(_=_e.JSX||(_e.JSX={}))})(jsx);var Global=withEmotionCache(function(_e,_){var et=_e.styles,tt=serializeStyles([et],void 0,reactExports.useContext(ThemeContext)),rt=reactExports.useRef();return useInsertionEffectWithLayoutFallback(function(){var it=_.key+"-global",st=new _.sheet.constructor({key:it,nonce:_.sheet.nonce,container:_.sheet.container,speedy:_.sheet.isSpeedy}),at=!1,ct=document.querySelector('style[data-emotion="'+it+" "+tt.name+'"]');return _.sheet.tags.length&&(st.before=_.sheet.tags[0]),ct!==null&&(at=!0,ct.setAttribute("data-emotion",it),st.hydrate([ct])),rt.current=[st,at],function(){st.flush()}},[_]),useInsertionEffectWithLayoutFallback(function(){var it=rt.current,st=it[0],at=it[1];if(at){it[1]=!1;return}if(tt.next!==void 0&&insertStyles(_,tt.next,!0),st.tags.length){var ct=st.tags[st.tags.length-1].nextElementSibling;st.before=ct,st.flush()}_.insert("",tt,st,!1)},[_,tt.name]),null});function assignRef(_e,_){if(_e!=null){if(typeof _e=="function"){_e(_);return}try{_e.current=_}catch{throw new Error(`Cannot assign value '${_}' to ref '${_e}'`)}}}function mergeRefs(..._e){return _=>{_e.forEach(et=>{assignRef(et,_)})}}function compact$3(_e){const _=Object.assign({},_e);for(let et in _)_[et]===void 0&&delete _[et];return _}function interopDefault(_e){return _e.default||_e}const isObject$4=_e=>_e!=null&&typeof _e=="object"&&!Array.isArray(_e),isString$2=_e=>typeof _e=="string",isFunction$2=_e=>typeof _e=="function";function getElementRef(_e){var et;const _=reactExports.version;return!isString$2(_)||_.startsWith("18.")?_e==null?void 0:_e.ref:(et=_e==null?void 0:_e.props)==null?void 0:et.ref}const[ChakraContextProvider,useChakraContext]=createContext$1({name:"ChakraContext",strict:!0,providerName:"<ChakraProvider />"});function ChakraProvider(_e){const{value:_,children:et}=_e;return jsxRuntimeExports.jsxs(ChakraContextProvider,{value:_,children:[!_._config.disableLayers&&jsxRuntimeExports.jsx(Global,{styles:_.layers.atRule}),jsxRuntimeExports.jsx(Global,{styles:_._global}),et]})}const splitProps=(_e,_)=>{const et=Object.getOwnPropertyDescriptors(_e),tt=Object.keys(et),rt=st=>{const at={};for(let ct=0;ct<st.length;ct++){const ut=st[ct];et[ut]&&(Object.defineProperty(at,ut,et[ut]),delete et[ut])}return at},it=st=>rt(Array.isArray(st)?st:tt.filter(st));return[_].map(it).concat(rt(tt))},htmlProps=new Set(["htmlWidth","htmlHeight","htmlSize","htmlTranslate"]);function isHtmlProp(_e){return typeof _e=="string"&&htmlProps.has(_e)}function useResolvedProps(_e,_,et){const{css:tt,isValidProperty:rt}=useChakraContext(),{children:it,...st}=_e,at=reactExports.useMemo(()=>{const[nt,lt]=splitProps(st,yt=>et(yt,_.variantKeys)),[ht,ft]=splitProps(lt,_.variantKeys),[gt,mt]=splitProps(ft,rt);return{forwardedProps:nt,variantProps:ht,styleProps:gt,elementProps:mt}},[_.variantKeys,et,st,rt]),{css:ct,...ut}=at.styleProps,dt=reactExports.useMemo(()=>{const nt={...at.variantProps};return _.variantKeys.includes("colorPalette")||(nt.colorPalette=st.colorPalette),_.variantKeys.includes("orientation")||(nt.orientation=st.orientation),_(nt)},[_,at.variantProps,st.colorPalette,st.orientation]);return{styles:reactExports.useMemo(()=>tt(dt,...toArray$1(ct),ut),[tt,dt,ct,ut]),props:{...at.forwardedProps,...at.elementProps,children:it}}}const toArray$1=_e=>(Array.isArray(_e)?_e:[_e]).filter(Boolean).flat(),isPropValid=interopDefault(isPropValid$1),testOmitPropsOnStringTag=isPropValid,testOmitPropsOnComponent=_e=>_e!=="theme",composeShouldForwardProps=(_e,_,et)=>{let tt;if(_){const rt=_.shouldForwardProp;tt=_e.__emotion_forwardProp&&rt?it=>_e.__emotion_forwardProp(it)&&rt(it):rt}return typeof tt!="function"&&et&&(tt=_e.__emotion_forwardProp),tt};let isBrowser=typeof document<"u";const Insertion=({cache:_e,serialized:_,isStringTag:et})=>{registerStyles(_e,_,et);const tt=useInsertionEffectAlwaysWithSyncFallback(()=>insertStyles(_e,_,et));if(!isBrowser&&tt!==void 0){let rt=_.name,it=_.next;for(;it!==void 0;)rt=cx(rt,it.name),it=it.next;return jsxRuntimeExports.jsx("style",{"data-emotion":cx(_e.key,rt),dangerouslySetInnerHTML:{__html:tt},nonce:_e.sheet.nonce})}return null},createStyled=(_e,_={},et={})=>{const tt=_e.__emotion_real===_e,rt=tt&&_e.__emotion_base||_e;let it,st;et!==void 0&&(it=et.label,st=et.target);let at=[];const ct=withEmotionCache((ut,dt,ot)=>{var Mt;const{cva:nt,isValidProperty:lt}=useChakraContext(),ht=_.__cva__?_:nt(_),ft=mergeCva$1(_e.__emotion_cva,ht),gt=$t=>(kt,Lt)=>$t.includes(kt)?!0:!(Lt!=null&&Lt.includes(kt))&&!lt(kt);!et.shouldForwardProp&&et.forwardProps&&(et.shouldForwardProp=gt(et.forwardProps));const mt=($t,kt)=>{const Lt=typeof _e=="string"&&_e.charCodeAt(0)>96?testOmitPropsOnStringTag:testOmitPropsOnComponent,Nt=!(kt!=null&&kt.includes($t))&&!lt($t);return Lt($t)&&Nt},yt=composeShouldForwardProps(_e,et,tt)||mt,bt=reactExports.useMemo(()=>Object.assign({},et.defaultProps,compact$3(ut)),[ut]),{props:_t,styles:vt}=useResolvedProps(bt,ft,yt);let xt="",wt=[vt],Tt=_t;if(_t.theme==null){Tt={};for(let $t in _t)Tt[$t]=_t[$t];Tt.theme=reactExports.useContext(ThemeContext)}typeof _t.className=="string"?xt=getRegisteredStyles(dt.registered,wt,_t.className):_t.className!=null&&(xt=cx(xt,_t.className));const St=serializeStyles(at.concat(wt),dt.registered,Tt);xt=cx(xt,`${dt.key}-${St.name}`),st!==void 0&&(xt=cx(xt,st));const Et=!yt("as");let Ot=Et&&_t.as||rt,Rt={};for(let $t in _t)if(!(Et&&$t==="as")){if(isHtmlProp($t)){const kt=$t.replace("html","").toLowerCase();Rt[kt]=_t[$t];continue}yt($t)&&(Rt[$t]=_t[$t])}Rt.className=xt.trim(),Rt.ref=ot;const Pt=et.forwardAsChild||((Mt=et.forwardProps)==null?void 0:Mt.includes("asChild"));if(_t.asChild&&!Pt){const $t=reactExports.Children.only(_t.children);Ot=$t.type,Rt.children=null,Reflect.deleteProperty(Rt,"asChild"),Rt=mergeProps$1(Rt,$t.props),Rt.ref=mergeRefs(ot,getElementRef($t))}return Rt.as&&Pt?(Rt.as=void 0,jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(Insertion,{cache:dt,serialized:St,isStringTag:typeof Ot=="string"}),jsxRuntimeExports.jsx(Ot,{asChild:!0,...Rt,children:jsxRuntimeExports.jsx(_t.as,{children:Rt.children})})]})):jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(Insertion,{cache:dt,serialized:St,isStringTag:typeof Ot=="string"}),jsxRuntimeExports.jsx(Ot,{...Rt})]})});return ct.displayName=it!==void 0?it:`chakra(${typeof rt=="string"?rt:rt.displayName||rt.name||"Component"})`,ct.__emotion_real=ct,ct.__emotion_base=rt,ct.__emotion_forwardProp=et.shouldForwardProp,ct.__emotion_cva=_,Object.defineProperty(ct,"toString",{value(){return`.${st}`}}),ct},styledFn=createStyled.bind(),cache=new Map,chakraImpl=new Proxy(styledFn,{apply(_e,_,et){return styledFn(...et)},get(_e,_){return cache.has(_)||cache.set(_,styledFn(_)),cache.get(_)}}),chakra=chakraImpl,mergeCva$1=(_e,_)=>_e&&!_?_e:!_e&&_?_:_e.merge(_);function useRecipe(_e){const{key:_,recipe:et}=_e,tt=useChakraContext();return reactExports.useMemo(()=>{const rt=et||(_!=null?tt.getRecipe(_):{});return tt.cva(structuredClone(rt))},[_,et,tt])}const upperFirst$1=_e=>_e.charAt(0).toUpperCase()+_e.slice(1);function createRecipeContext(_e){const{key:_,recipe:et}=_e,tt=upperFirst$1(_||et.className||"Component"),[rt,it]=createContext$1({strict:!1,name:`${tt}PropsContext`,providerName:`${tt}PropsContext`});function st(ut){const{unstyled:dt,...ot}=ut,nt=useRecipe({key:_,recipe:ot.recipe||et}),[lt,ht]=nt.splitVariantProps(ot);return{styles:dt?EMPTY_STYLES:nt(lt),className:nt.className,props:ht}}const at=(ut,dt)=>{const ot=chakra(ut,{},dt),nt=reactExports.forwardRef((lt,ht)=>{const ft=mergeProps$1(it(),lt),{styles:gt,className:mt,props:yt}=st(ft);return jsxRuntimeExports.jsx(ot,{...yt,ref:ht,css:[gt,ft.css],className:cx(mt,ft.className)})});return nt.displayName=ut.displayName||ut.name,nt};function ct(){return rt}return{withContext:at,PropsProvider:rt,withPropsProvider:ct,usePropsContext:it,useRecipeResult:st}}var clamp$1=_e=>Math.max(0,Math.min(1,_e)),wrap$2=(_e,_)=>_e.map((et,tt)=>_e[(Math.max(_,0)+tt)%_e.length]),isObject$3=_e=>typeof _e=="object"&&_e!==null,MAX_Z_INDEX=2147483647,dataAttr=_e=>_e?"":void 0,ELEMENT_NODE=1,DOCUMENT_NODE=9,DOCUMENT_FRAGMENT_NODE=11,isHTMLElement=_e=>isObject$3(_e)&&_e.nodeType===ELEMENT_NODE&&typeof _e.nodeName=="string",isDocument=_e=>isObject$3(_e)&&_e.nodeType===DOCUMENT_NODE,isWindow=_e=>isObject$3(_e)&&_e===_e.window,isNode=_e=>isObject$3(_e)&&_e.nodeType!==void 0,isShadowRoot=_e=>isNode(_e)&&_e.nodeType===DOCUMENT_FRAGMENT_NODE&&"host"in _e,isElementVisible=_e=>isHTMLElement(_e)?_e.offsetWidth>0||_e.offsetHeight>0||_e.getClientRects().length>0:!1;function contains(_e,_){var tt;if(!_e||!_||!isHTMLElement(_e)||!isHTMLElement(_))return!1;const et=(tt=_.getRootNode)==null?void 0:tt.call(_);if(_e===_||_e.contains(_))return!0;if(et&&isShadowRoot(et)){let rt=_;for(;rt;){if(_e===rt)return!0;rt=rt.parentNode||rt.host}}return!1}function getDocument(_e){return isDocument(_e)?_e:isWindow(_e)?_e.document:(_e==null?void 0:_e.ownerDocument)??document}function getWindow(_e){var _;return isShadowRoot(_e)?getWindow(_e.host):isDocument(_e)?_e.defaultView??window:isHTMLElement(_e)?((_=_e.ownerDocument)==null?void 0:_.defaultView)??window:window}function getActiveElement(_e){let _=_e.activeElement;for(;_!=null&&_.shadowRoot;){const et=_.shadowRoot.activeElement;if(et===_)break;_=et}return _}var isDom=()=>typeof document<"u";function getPlatform(){const _e=navigator.userAgentData;return(_e==null?void 0:_e.platform)??navigator.platform}var pt=_e=>isDom()&&_e.test(getPlatform()),vn=_e=>isDom()&&_e.test(navigator.vendor),isSafari=()=>isApple()&&vn(/apple/i),isApple=()=>pt(/mac|iphone|ipad|ipod/i),addDomEvent=(_e,_,et,tt)=>{const rt=typeof _e=="function"?_e():_e;return rt==null||rt.addEventListener(_,et,tt),()=>{rt==null||rt.removeEventListener(_,et,tt)}};function getDescriptor(_e,_){const{type:et="HTMLInputElement",property:tt="value"}=_,rt=getWindow(_e)[et].prototype;return Object.getOwnPropertyDescriptor(rt,tt)??{}}function getElementType(_e){if(_e.localName==="input")return"HTMLInputElement";if(_e.localName==="textarea")return"HTMLTextAreaElement";if(_e.localName==="select")return"HTMLSelectElement"}function setElementValue(_e,_,et="value"){var rt;const tt=getElementType(_e);tt&&((rt=getDescriptor(_e,{type:tt,property:et}).set)==null||rt.call(_e,_)),_e.setAttribute(et,_)}function dispatchInputValueEvent(_e,_){const{value:et,bubbles:tt=!0}=_;if(!_e)return;const rt=getWindow(_e);_e instanceof rt.HTMLInputElement&&(setElementValue(_e,`${et}`),_e.dispatchEvent(new rt.Event("input",{bubbles:tt})))}var isFrame=_e=>isHTMLElement(_e)&&_e.tagName==="IFRAME",focusableSelector="input:not([type='hidden']):not([disabled]), select:not([disabled]), textarea:not([disabled]), a[href], button:not([disabled]), [tabindex], iframe, object, embed, area[href], audio[controls], video[controls], [contenteditable]:not([contenteditable='false']), details > summary:first-of-type",getFocusables=(_e,_=!1)=>{if(!_e)return[];const et=Array.from(_e.querySelectorAll(focusableSelector));(_==!0||_=="if-empty"&&et.length===0)&&isHTMLElement(_e)&&isFocusable(_e)&&et.unshift(_e);const rt=et.filter(isFocusable);return rt.forEach((it,st)=>{if(isFrame(it)&&it.contentDocument){const at=it.contentDocument.body;rt.splice(st,1,...getFocusables(at))}}),rt};function isFocusable(_e){return!_e||_e.closest("[inert]")?!1:_e.matches(focusableSelector)&&isElementVisible(_e)}function raf(_e){const _=globalThis.requestAnimationFrame(_e);return()=>{globalThis.cancelAnimationFrame(_)}}function getRelativePoint(_e,_){const{left:et,top:tt,width:rt,height:it}=_.getBoundingClientRect(),st={x:_e.x-et,y:_e.y-tt},at={x:clamp$1(st.x/rt),y:clamp$1(st.y/it)};function ct(ut={}){const{dir:dt="ltr",orientation:ot="horizontal",inverted:nt}=ut,lt=typeof nt=="object"?nt.x:nt,ht=typeof nt=="object"?nt.y:nt;return ot==="horizontal"?dt==="rtl"||lt?1-at.x:at.x:ht?1-at.y:at.y}return{offset:st,percent:at,getPercentValue:ct}}function queryAll(_e,_){return Array.from((_e==null?void 0:_e.querySelectorAll(_))??[])}function query(_e,_){return(_e==null?void 0:_e.querySelector(_))??null}var defaultItemToId=_e=>_e.id;function itemById(_e,_,et=defaultItemToId){return _e.find(tt=>et(tt)===_)}function indexOfId(_e,_,et=defaultItemToId){const tt=itemById(_e,_,et);return tt?_e.indexOf(tt):-1}function nextById(_e,_,et=!0){let tt=indexOfId(_e,_);return tt=et?(tt+1)%_e.length:Math.min(tt+1,_e.length-1),_e[tt]}function prevById(_e,_,et=!0){let tt=indexOfId(_e,_);return tt===-1?et?_e[_e.length-1]:null:(tt=et?(tt-1+_e.length)%_e.length:Math.max(0,tt-1),_e[tt])}function createScope(_e){const _={getRootNode:et=>{var tt;return((tt=et.getRootNode)==null?void 0:tt.call(et))??document},getDoc:et=>getDocument(_.getRootNode(et)),getWin:et=>_.getDoc(et).defaultView??window,getActiveElement:et=>getActiveElement(_.getRootNode(et)),isActiveElement:(et,tt)=>tt===_.getActiveElement(et),getById:(et,tt)=>_.getRootNode(et).getElementById(tt),setValue:(et,tt)=>{et==null||tt==null||setElementValue(et,tt.toString())}};return{..._,..._e}}var sanitize=_e=>_e.split("").map(_=>{const et=_.charCodeAt(0);return et>0&&et<128?_:et>=128&&et<=255?`/x${et.toString(16)}`.replace("/","\\"):""}).join("").trim(),getValueText=_e=>{var _;return sanitize(((_=_e.dataset)==null?void 0:_.valuetext)??_e.textContent??"")},match=(_e,_)=>_e.trim().toLowerCase().startsWith(_.toLowerCase());function getByText(_e,_,et,tt=defaultItemToId){const rt=et?indexOfId(_e,et,tt):-1;let it=et?wrap$2(_e,rt):_e;return _.length===1&&(it=it.filter(at=>tt(at)!==et)),it.find(at=>match(getValueText(at),_))}function getByTypeaheadImpl(_e,_){const{state:et,activeId:tt,key:rt,timeout:it=350,itemToId:st}=_,at=et.keysSoFar+rt,ut=at.length>1&&Array.from(at).every(ht=>ht===at[0])?at[0]:at;let dt=_e.slice();const ot=getByText(dt,ut,tt,st);function nt(){clearTimeout(et.timer),et.timer=-1}function lt(ht){et.keysSoFar=ht,nt(),ht!==""&&(et.timer=+setTimeout(()=>{lt(""),nt()},it))}return lt(at),ot}var getByTypeahead=Object.assign(getByTypeaheadImpl,{defaultOptions:{keysSoFar:"",timer:-1},isValidEvent:isValidTypeaheadEvent});function isValidTypeaheadEvent(_e){return _e.key.length===1&&!_e.ctrlKey&&!_e.metaKey}function getErrorMessage(_e,_){return`${_e} returned \`undefined\`. Seems you forgot to wrap component within ${_}`}function createContext(_e={}){const{name:_,strict:et=!0,hookName:tt="useContext",providerName:rt="Provider",errorMessage:it,defaultValue:st}=_e,at=reactExports.createContext(st);at.displayName=_;function ct(){var dt;const ut=reactExports.useContext(at);if(!ut&&et){const ot=new Error(it??getErrorMessage(tt,rt));throw ot.name="ContextError",(dt=Error.captureStackTrace)==null||dt.call(Error,ot,ct),ot}return ut}return[at.Provider,ct,at]}function setRef(_e,_){typeof _e=="function"?_e(_):_e!=null&&(_e.current=_)}function composeRefs(..._e){return _=>{for(const et of _e)setRef(et,_)}}const TRACK_MEMO_SYMBOL=Symbol(),GET_ORIGINAL_SYMBOL=Symbol(),AFFECTED_PROPERTY="a",IS_TARGET_COPIED_PROPERTY="f",PROXY_PROPERTY="p",PROXY_CACHE_PROPERTY="c",TARGET_CACHE_PROPERTY="t",HAS_KEY_PROPERTY="h",ALL_OWN_KEYS_PROPERTY="w",HAS_OWN_KEY_PROPERTY="o",KEYS_PROPERTY="k";let newProxy=(_e,_)=>new Proxy(_e,_);const getProto$2=Object.getPrototypeOf,objectsToTrack=new WeakMap,isObjectToTrack=_e=>_e&&(objectsToTrack.has(_e)?objectsToTrack.get(_e):getProto$2(_e)===Object.prototype||getProto$2(_e)===Array.prototype),isObject$2=_e=>typeof _e=="object"&&_e!==null,needsToCopyTargetObject=_e=>Object.values(Object.getOwnPropertyDescriptors(_e)).some(_=>!_.configurable&&!_.writable),copyTargetObject=_e=>{if(Array.isArray(_e))return Array.from(_e);const _=Object.getOwnPropertyDescriptors(_e);return Object.values(_).forEach(et=>{et.configurable=!0}),Object.create(getProto$2(_e),_)},createProxyHandler=(_e,_)=>{const et={[IS_TARGET_COPIED_PROPERTY]:_};let tt=!1;const rt=(at,ct)=>{if(!tt){let ut=et[AFFECTED_PROPERTY].get(_e);if(ut||(ut={},et[AFFECTED_PROPERTY].set(_e,ut)),at===ALL_OWN_KEYS_PROPERTY)ut[ALL_OWN_KEYS_PROPERTY]=!0;else{let dt=ut[at];dt||(dt=new Set,ut[at]=dt),dt.add(ct)}}},it=()=>{tt=!0,et[AFFECTED_PROPERTY].delete(_e)},st={get(at,ct){return ct===GET_ORIGINAL_SYMBOL?_e:(rt(KEYS_PROPERTY,ct),createProxy$2(Reflect.get(at,ct),et[AFFECTED_PROPERTY],et[PROXY_CACHE_PROPERTY],et[TARGET_CACHE_PROPERTY]))},has(at,ct){return ct===TRACK_MEMO_SYMBOL?(it(),!0):(rt(HAS_KEY_PROPERTY,ct),Reflect.has(at,ct))},getOwnPropertyDescriptor(at,ct){return rt(HAS_OWN_KEY_PROPERTY,ct),Reflect.getOwnPropertyDescriptor(at,ct)},ownKeys(at){return rt(ALL_OWN_KEYS_PROPERTY),Reflect.ownKeys(at)}};return _&&(st.set=st.deleteProperty=()=>!1),[st,et]},getOriginalObject=_e=>_e[GET_ORIGINAL_SYMBOL]||_e,createProxy$2=(_e,_,et,tt)=>{if(!isObjectToTrack(_e))return _e;let rt=tt&&tt.get(_e);if(!rt){const ct=getOriginalObject(_e);needsToCopyTargetObject(ct)?rt=[ct,copyTargetObject(ct)]:rt=[ct],tt==null||tt.set(_e,rt)}const[it,st]=rt;let at=et&&et.get(it);return(!at||at[1][IS_TARGET_COPIED_PROPERTY]!==!!st)&&(at=createProxyHandler(it,!!st),at[1][PROXY_PROPERTY]=newProxy(st||it,at[0]),et&&et.set(it,at)),at[1][AFFECTED_PROPERTY]=_,at[1][PROXY_CACHE_PROPERTY]=et,at[1][TARGET_CACHE_PROPERTY]=tt,at[1][PROXY_PROPERTY]},isAllOwnKeysChanged=(_e,_)=>{const et=Reflect.ownKeys(_e),tt=Reflect.ownKeys(_);return et.length!==tt.length||et.some((rt,it)=>rt!==tt[it])},isChanged=(_e,_,et,tt,rt=Object.is)=>{if(rt(_e,_))return!1;if(!isObject$2(_e)||!isObject$2(_))return!0;const it=et.get(getOriginalObject(_e));if(!it)return!0;if(tt){if(tt.get(_e)===_)return!1;tt.set(_e,_)}let st=null;for(const at of it[HAS_KEY_PROPERTY]||[])if(st=Reflect.has(_e,at)!==Reflect.has(_,at),st)return st;if(it[ALL_OWN_KEYS_PROPERTY]===!0){if(st=isAllOwnKeysChanged(_e,_),st)return st}else for(const at of it[HAS_OWN_KEY_PROPERTY]||[]){const ct=!!Reflect.getOwnPropertyDescriptor(_e,at),ut=!!Reflect.getOwnPropertyDescriptor(_,at);if(st=ct!==ut,st)return st}for(const at of it[KEYS_PROPERTY]||[])if(st=isChanged(_e[at],_[at],et,tt,rt),st)return st;if(st===null)throw new Error("invalid used");return st},getUntracked=_e=>isObjectToTrack(_e)&&_e[GET_ORIGINAL_SYMBOL]||null,markToTrack=(_e,_=!0)=>{objectsToTrack.set(_e,_)};function glob(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}function globalRef(_e,_){const et=glob();return et?(et[_e]||(et[_e]=_()),et[_e]):_()}var refSet=globalRef("__zag__refSet",()=>new WeakSet),isReactElement=_e=>typeof _e=="object"&&_e!==null&&"$$typeof"in _e&&"props"in _e,isVueElement=_e=>typeof _e=="object"&&_e!==null&&"__v_isVNode"in _e,isDOMElement=_e=>typeof _e=="object"&&_e!==null&&"nodeType"in _e&&typeof _e.nodeName=="string",isElement$1=_e=>isReactElement(_e)||isVueElement(_e)||isDOMElement(_e),isObject$1=_e=>_e!==null&&typeof _e=="object",canProxy=_e=>isObject$1(_e)&&!refSet.has(_e)&&(Array.isArray(_e)||!(Symbol.iterator in _e))&&!isElement$1(_e)&&!(_e instanceof WeakMap)&&!(_e instanceof WeakSet)&&!(_e instanceof Error)&&!(_e instanceof Number)&&!(_e instanceof Date)&&!(_e instanceof String)&&!(_e instanceof RegExp)&&!(_e instanceof ArrayBuffer)&&!(_e instanceof Promise);function set(_e,_,et){typeof et.value=="object"&&!canProxy(et.value)&&(et.value=clone$1(et.value)),!et.enumerable||et.get||et.set||!et.configurable||!et.writable||_==="__proto__"?Object.defineProperty(_e,_,et):_e[_]=et.value}function clone$1(_e){if(typeof _e!="object")return _e;var _=0,et,tt,rt,it=Object.prototype.toString.call(_e);if(it==="[object Object]"?rt=Object.create(Object.getPrototypeOf(_e)||null):it==="[object Array]"?rt=Array(_e.length):it==="[object Set]"?(rt=new Set,_e.forEach(function(st){rt.add(clone$1(st))})):it==="[object Map]"?(rt=new Map,_e.forEach(function(st,at){rt.set(clone$1(at),clone$1(st))})):it==="[object Date]"?rt=new Date(+_e):it==="[object RegExp]"?rt=new RegExp(_e.source,_e.flags):it==="[object DataView]"?rt=new _e.constructor(clone$1(_e.buffer)):it==="[object ArrayBuffer]"?rt=_e.slice(0):it==="[object Blob]"?rt=_e.slice():it.slice(-6)==="Array]"&&(rt=new _e.constructor(_e)),rt){for(tt=Object.getOwnPropertySymbols(_e);_<tt.length;_++)set(rt,tt[_],Object.getOwnPropertyDescriptor(_e,tt[_]));for(_=0,tt=Object.getOwnPropertyNames(_e);_<tt.length;_++)Object.hasOwnProperty.call(rt,et=tt[_])&&rt[et]===_e[et]||set(rt,et,Object.getOwnPropertyDescriptor(_e,et))}return rt||_e}var proxyStateMap=globalRef("__zag__proxyStateMap",()=>new WeakMap),buildProxyFunction=(_e=Object.is,_=(at,ct)=>new Proxy(at,ct),et=new WeakMap,tt=(at,ct)=>{const ut=et.get(at);if((ut==null?void 0:ut[0])===ct)return ut[1];const dt=Array.isArray(at)?[]:Object.create(Object.getPrototypeOf(at));return markToTrack(dt,!0),et.set(at,[ct,dt]),Reflect.ownKeys(at).forEach(ot=>{const nt=Reflect.get(at,ot);refSet.has(nt)?(markToTrack(nt,!1),dt[ot]=nt):proxyStateMap.has(nt)?dt[ot]=snapshot(nt):dt[ot]=nt}),Object.freeze(dt)},rt=new WeakMap,it=[1,1],st=at=>{if(!isObject$1(at))throw new Error("object required");const ct=rt.get(at);if(ct)return ct;let ut=it[0];const dt=new Set,ot=(wt,Tt=++it[0])=>{ut!==Tt&&(ut=Tt,dt.forEach(St=>St(wt,Tt)))};let nt=it[1];const lt=(wt=++it[1])=>(nt!==wt&&!dt.size&&(nt=wt,ft.forEach(([Tt])=>{const St=Tt[1](wt);St>ut&&(ut=St)})),ut),ht=wt=>(Tt,St)=>{const Et=[...Tt];Et[1]=[wt,...Et[1]],ot(Et,St)},ft=new Map,gt=(wt,Tt)=>{if(dt.size){const St=Tt[3](ht(wt));ft.set(wt,[Tt,St])}else ft.set(wt,[Tt])},mt=wt=>{var St;const Tt=ft.get(wt);Tt&&(ft.delete(wt),(St=Tt[1])==null||St.call(Tt))},yt=wt=>(dt.add(wt),dt.size===1&&ft.forEach(([St,Et],Ot)=>{const Rt=St[3](ht(Ot));ft.set(Ot,[St,Rt])}),()=>{dt.delete(wt),dt.size===0&&ft.forEach(([St,Et],Ot)=>{Et&&(Et(),ft.set(Ot,[St]))})}),bt=Array.isArray(at)?[]:Object.create(Object.getPrototypeOf(at)),vt=_(bt,{deleteProperty(wt,Tt){const St=Reflect.get(wt,Tt);mt(Tt);const Et=Reflect.deleteProperty(wt,Tt);return Et&&ot(["delete",[Tt],St]),Et},set(wt,Tt,St,Et){var Mt;const Ot=Reflect.has(wt,Tt),Rt=Reflect.get(wt,Tt,Et);if(Ot&&(_e(Rt,St)||rt.has(St)&&_e(Rt,rt.get(St))))return!0;mt(Tt),isObject$1(St)&&(St=getUntracked(St)||St);let Pt=St;if(!((Mt=Object.getOwnPropertyDescriptor(wt,Tt))!=null&&Mt.set)){!proxyStateMap.has(St)&&canProxy(St)&&(Pt=proxy(St));const $t=!refSet.has(Pt)&&proxyStateMap.get(Pt);$t&&gt(Tt,$t)}return Reflect.set(wt,Tt,Pt,Et),ot(["set",[Tt],St,Rt]),!0}});rt.set(at,vt);const xt=[bt,lt,tt,yt];return proxyStateMap.set(vt,xt),Reflect.ownKeys(at).forEach(wt=>{const Tt=Object.getOwnPropertyDescriptor(at,wt);Tt.get||Tt.set?Object.defineProperty(bt,wt,Tt):vt[wt]=at[wt]}),vt})=>[st,proxyStateMap,refSet,_e,_,canProxy,et,tt,rt,it],[proxyFunction]=buildProxyFunction();function proxy(_e={}){return proxyFunction(_e)}function subscribe$1(_e,_,et){const tt=proxyStateMap.get(_e);let rt;const it=[],st=tt[3];let at=!1;const ut=st(dt=>{if(it.push(dt),et){_(it.splice(0));return}rt||(rt=Promise.resolve().then(()=>{rt=void 0,at&&_(it.splice(0))}))});return at=!0,()=>{at=!1,ut()}}function snapshot(_e){const _=proxyStateMap.get(_e),[et,tt,rt]=_;return rt(et,tt())}function ref$1(_e){return refSet.add(_e),_e}function proxyWithComputed(_e,_){Object.keys(_).forEach(rt=>{if(Object.getOwnPropertyDescriptor(_e,rt))throw new Error("object property already defined");const it=_[rt],{get:st,set:at}=typeof it=="function"?{get:it}:it,ct={};ct.get=()=>st(snapshot(tt)),at&&(ct.set=ut=>at(tt,ut)),Object.defineProperty(_e,rt,ct)});const tt=proxy(_e);return tt}var first=_e=>_e[0],last=_e=>_e[_e.length-1];function clear(_e){for(;_e.length>0;)_e.pop();return _e}var runIfFn=(_e,..._)=>(typeof _e=="function"?_e(..._):_e)??void 0,cast=_e=>_e,noop$2=()=>{},callAll=(..._e)=>(..._)=>{_e.forEach(function(et){et==null||et(..._)})},uuid=(()=>{let _e=0;return()=>(_e++,_e.toString(36))})(),isArray$4=_e=>Array.isArray(_e),isObjectLike=_e=>_e!=null&&typeof _e=="object",isObject=_e=>isObjectLike(_e)&&!isArray$4(_e),isNumber$1=_e=>typeof _e=="number"&&!Number.isNaN(_e),isString$1=_e=>typeof _e=="string",isFunction$1=_e=>typeof _e=="function",hasProp=(_e,_)=>Object.prototype.hasOwnProperty.call(_e,_),baseGetTag=_e=>Object.prototype.toString.call(_e),fnToString$1=Function.prototype.toString,objectCtorString=fnToString$1.call(Object),isPlainObject$1=_e=>{if(!isObjectLike(_e)||baseGetTag(_e)!="[object Object]")return!1;const _=Object.getPrototypeOf(_e);if(_===null)return!0;const et=hasProp(_,"constructor")&&_.constructor;return typeof et=="function"&&et instanceof et&&fnToString$1.call(et)==objectCtorString},{floor:floor$2,abs:abs$2,round:round$3,min:min$2,max:max$2,pow:pow$2,sign:sign$4}=Math,isNaN$1=_e=>Number.isNaN(_e),nan=_e=>isNaN$1(_e)?0:_e,wrap$1=(_e,_)=>(_e%_+_)%_,roundValue=(_e,_,et)=>round$3((nan(_e)-_)/et)*et+_,clampValue=(_e,_,et)=>min$2(max$2(nan(_e),_),et),getValuePercent=(_e,_,et)=>(nan(_e)-_)/(et-_),getPercentValue=(_e,_,et,tt)=>clampValue(roundValue(_e*(et-_)+_,_,tt),_,et),roundToDpr=(_e,_)=>typeof _=="number"?floor$2(_e*_+.5)/_:round$3(_e),getValueTransformer=(_e,_)=>{const[et,tt]=_e,[rt,it]=_;return st=>et===tt||rt===it?rt:rt+(it-rt)/(tt-et)*(st-et)};function compact$2(_e){if(!isPlainObject2(_e)||_e===void 0)return _e;const _=Reflect.ownKeys(_e).filter(tt=>typeof tt=="string"),et={};for(const tt of _){const rt=_e[tt];rt!==void 0&&(et[tt]=compact$2(rt))}return et}var isPlainObject2=_e=>_e&&typeof _e=="object"&&_e.constructor===Object;function warn(..._e){_e.length===1?_e[0]:_e[1],_e.length===2&&_e[0]}function invariant(..._e){_e.length===1?_e[0]:_e[1],_e.length===2&&_e[0]}var __defProp$1=Object.defineProperty,__defNormalProp$1=(_e,_,et)=>_ in _e?__defProp$1(_e,_,{enumerable:!0,configurable:!0,writable:!0,value:et}):_e[_]=et,__publicField$1=(_e,_,et)=>__defNormalProp$1(_e,typeof _!="symbol"?_+"":_,et);function deepMerge(_e,..._){for(const et of _){const tt=compact$2(et);for(const rt in tt)isPlainObject$1(et[rt])?(_e[rt]||(_e[rt]={}),deepMerge(_e[rt],et[rt])):_e[rt]=et[rt]}return _e}function toEvent(_e){return isString$1(_e)?{type:_e}:_e}function toArray(_e){return _e?isArray$4(_e)?_e.slice():[_e]:[]}function isGuardHelper(_e){return isObject(_e)&&_e.predicate!=null}var Truthy=()=>!0;function exec(_e,_,et,tt){return rt=>{var it;return isString$1(rt)?!!((it=_e[rt])!=null&&it.call(_e,_,et,tt)):isFunction$1(rt)?rt(_,et,tt):rt.predicate(_e)(_,et,tt)}}function or$1(..._e){return{predicate:_=>(et,tt,rt)=>_e.map(exec(_,et,tt,rt)).some(Boolean)}}function and$1(..._e){return{predicate:_=>(et,tt,rt)=>_e.map(exec(_,et,tt,rt)).every(Boolean)}}function not$1(_e){return{predicate:_=>(et,tt,rt)=>!exec(_,et,tt,rt)(_e)}}function stateIn(..._e){return(_,et,tt)=>tt.state.matches(..._e)}var guards={or:or$1,and:and$1,not:not$1,stateIn};function determineGuardFn(_e,_){return _e=_e??Truthy,(et,tt,rt)=>{if(isString$1(_e)){const it=_[_e];return isFunction$1(it)?it(et,tt,rt):it}return isGuardHelper(_e)?_e.predicate(_)(et,tt,rt):_e==null?void 0:_e(et,tt,rt)}}function determineActionsFn(_e,_){return(et,tt,rt)=>isGuardHelper(_e)?_e.predicate(_)(et,tt,rt):_e}function createProxy$1(_e){var it,st;const _=_e.computed??cast({}),et=_e.context??cast({}),tt=_e.initial?(st=(it=_e.states)==null?void 0:it[_e.initial])==null?void 0:st.tags:[],rt=proxy({value:_e.initial??"",previousValue:"",event:cast({}),previousEvent:cast({}),context:proxyWithComputed(et,_),done:!1,tags:tt??[],hasTag(at){return this.tags.includes(at)},matches(...at){return at.includes(this.value)},can(at){return cast(this).nextEvents.includes(at)},get nextEvents(){var ut,dt;const at=((dt=(ut=_e.states)==null?void 0:ut[this.value])==null?void 0:dt.on)??{},ct=(_e==null?void 0:_e.on)??{};return Object.keys({...at,...ct})},get changed(){return this.event.value==="machine.init"||!this.previousValue?!1:this.value!==this.previousValue}});return cast(rt)}function determineDelayFn(_e,_){return(et,tt)=>{if(isNumber$1(_e))return _e;if(isFunction$1(_e))return _e(et,tt);if(isString$1(_e)){const rt=Number.parseFloat(_e);if(!Number.isNaN(rt))return rt;if(_){const it=_==null?void 0:_[_e];return invariant(it==null,`[@zag-js/core > determine-delay] Cannot determine delay for \`${_e}\`. It doesn't exist in \`options.delays\``),isFunction$1(it)?it(et,tt):it}}}}function toTarget(_e){return isString$1(_e)?{target:_e}:_e}function determineTransitionFn(_e,_){return(et,tt,rt)=>toArray(_e).map(toTarget).find(it=>determineGuardFn(it.guard,_)(et,tt,rt)??it.target??it.actions)}var Machine=class{constructor(_e,_){var et,tt,rt,it,st;__publicField$1(this,"status","Not Started"),__publicField$1(this,"state"),__publicField$1(this,"initialState"),__publicField$1(this,"initialContext"),__publicField$1(this,"id"),__publicField$1(this,"type","machine"),__publicField$1(this,"activityEvents",new Map),__publicField$1(this,"delayedEvents",new Map),__publicField$1(this,"stateListeners",new Set),__publicField$1(this,"doneListeners",new Set),__publicField$1(this,"contextWatchers",new Set),__publicField$1(this,"removeStateListener",noop$2),__publicField$1(this,"parent"),__publicField$1(this,"children",new Map),__publicField$1(this,"guardMap"),__publicField$1(this,"actionMap"),__publicField$1(this,"delayMap"),__publicField$1(this,"activityMap"),__publicField$1(this,"sync"),__publicField$1(this,"options"),__publicField$1(this,"config"),__publicField$1(this,"_created",()=>{if(!this.config.created)return;const at=toEvent("machine.created");this.executeActions(this.config.created,at)}),__publicField$1(this,"start",at=>{if(this.state.value="",this.state.tags=[],this.status==="Running")return this;this.status="Running",this.removeStateListener=subscribe$1(this.state,()=>{this.stateListeners.forEach(lt=>{lt(this.stateSnapshot)})},this.sync),this.setupContextWatchers(),this.executeActivities(toEvent("machine.start"),toArray(this.config.activities),"machine.start"),this.executeActions(this.config.entry,toEvent("machine.start"));const ct=toEvent("machine.init"),ut=isObject(at)?at.value:at,dt=isObject(at)?at.context:void 0;dt&&this.setContext(dt);const ot={target:ut??this.config.initial},nt=this.getNextStateInfo(ot,ct);return this.initialState=nt,this.performStateChangeEffects(this.state.value,nt,ct),this}),__publicField$1(this,"setupContextWatchers",()=>{const{watch:at}=this.config;if(!at)return;let ct=snapshot(this.state.context);const ut=subscribe$1(this.state.context,()=>{var ot;const dt=snapshot(this.state.context);for(const[nt,lt]of Object.entries(at))(((ot=this.options.compareFns)==null?void 0:ot[nt])??Object.is)(ct[nt],dt[nt])||this.executeActions(lt,this.state.event);ct=dt});this.contextWatchers.add(ut)}),__publicField$1(this,"stop",()=>{if(this.status!=="Stopped")return this.performExitEffects(this.state.value,toEvent("machine.stop")),this.executeActions(this.config.exit,toEvent("machine.stop")),this.setState(""),this.setEvent("machine.stop"),this.stopStateListeners(),this.stopChildren(),this.stopActivities(),this.stopDelayedEvents(),this.stopContextWatchers(),this.status="Stopped",this}),__publicField$1(this,"stopStateListeners",()=>{this.removeStateListener(),this.stateListeners.clear()}),__publicField$1(this,"stopContextWatchers",()=>{this.contextWatchers.forEach(at=>at()),this.contextWatchers.clear()}),__publicField$1(this,"stopDelayedEvents",()=>{this.delayedEvents.forEach(at=>{at.forEach(ct=>ct())}),this.delayedEvents.clear()}),__publicField$1(this,"stopActivities",at=>{var ct,ut;at?((ct=this.activityEvents.get(at))==null||ct.forEach(dt=>dt()),(ut=this.activityEvents.get(at))==null||ut.clear(),this.activityEvents.delete(at)):(this.activityEvents.forEach(dt=>{dt.forEach(ot=>ot()),dt.clear()}),this.activityEvents.clear())}),__publicField$1(this,"sendChild",(at,ct)=>{const ut=toEvent(at),dt=runIfFn(ct,this.contextSnapshot),ot=this.children.get(dt);ot||invariant(`[@zag-js/core] Cannot send '${ut.type}' event to unknown child`),ot.send(ut)}),__publicField$1(this,"stopChild",at=>{this.children.has(at)||invariant(`[@zag-js/core > stop-child] Cannot stop unknown child ${at}`),this.children.get(at).stop(),this.children.delete(at)}),__publicField$1(this,"removeChild",at=>{this.children.delete(at)}),__publicField$1(this,"stopChildren",()=>{this.children.forEach(at=>at.stop()),this.children.clear()}),__publicField$1(this,"setParent",at=>{this.parent=at}),__publicField$1(this,"spawn",(at,ct)=>{const ut=runIfFn(at);return ct&&(ut.id=ct),ut.type="machine.actor",ut.setParent(this),this.children.set(ut.id,cast(ut)),ut.onDone(()=>{this.removeChild(ut.id)}).start(),cast(ref$1(ut))}),__publicField$1(this,"stopActivity",at=>{var ut;if(!this.state.value)return;const ct=this.activityEvents.get(this.state.value);(ut=ct==null?void 0:ct.get(at))==null||ut(),ct==null||ct.delete(at)}),__publicField$1(this,"addActivityCleanup",(at,ct,ut)=>{var dt;at&&(this.activityEvents.has(at)?(dt=this.activityEvents.get(at))==null||dt.set(ct,ut):this.activityEvents.set(at,new Map([[ct,ut]])))}),__publicField$1(this,"setState",at=>{this.state.previousValue=this.state.value,this.state.value=at;const ct=this.getStateNode(at);at==null?clear(this.state.tags):this.state.tags=toArray(ct==null?void 0:ct.tags)}),__publicField$1(this,"setContext",at=>{at&&deepMerge(this.state.context,compact$2(at))}),__publicField$1(this,"setOptions",at=>{const ct=compact$2(at);this.actionMap={...this.actionMap,...ct.actions},this.delayMap={...this.delayMap,...ct.delays},this.activityMap={...this.activityMap,...ct.activities},this.guardMap={...this.guardMap,...ct.guards}}),__publicField$1(this,"getStateNode",at=>{var ct;if(at)return(ct=this.config.states)==null?void 0:ct[at]}),__publicField$1(this,"getNextStateInfo",(at,ct)=>{const ut=this.determineTransition(at,ct),dt=!(ut!=null&&ut.target),ot=(ut==null?void 0:ut.target)??this.state.value,nt=this.state.value!==ot,lt=this.getStateNode(ot),ft={reenter:!dt&&!nt&&!(ut!=null&&ut.internal),transition:ut,stateNode:lt,target:ot,changed:nt};return this.log("NextState:",`[${ct.type}]`,this.state.value,"---->",ft.target),ft}),__publicField$1(this,"getAfterActions",(at,ct)=>{let ut;const dt=this.state.value;return{entry:()=>{ut=globalThis.setTimeout(()=>{const ot=this.getNextStateInfo(at,this.state.event);this.performStateChangeEffects(dt,ot,this.state.event)},ct)},exit:()=>{globalThis.clearTimeout(ut)}}}),__publicField$1(this,"getDelayedEventActions",at=>{const ct=this.getStateNode(at),ut=this.state.event;if(!ct||!ct.after)return;const dt=[],ot=[];if(isArray$4(ct.after)){const nt=this.determineTransition(ct.after,ut);if(!nt)return;if(!hasProp(nt,"delay"))throw new Error(`[@zag-js/core > after] Delay is required for after transition: ${JSON.stringify(nt)}`);const ht=determineDelayFn(nt.delay,this.delayMap)(this.contextSnapshot,ut),ft=this.getAfterActions(nt,ht);return dt.push(ft.entry),ot.push(ft.exit),{entries:dt,exits:ot}}if(isObject(ct.after))for(const nt in ct.after){const lt=ct.after[nt],ft=determineDelayFn(nt,this.delayMap)(this.contextSnapshot,ut),gt=this.getAfterActions(lt,ft);dt.push(gt.entry),ot.push(gt.exit)}return{entries:dt,exits:ot}}),__publicField$1(this,"executeActions",(at,ct)=>{var dt;const ut=determineActionsFn(at,this.guardMap)(this.contextSnapshot,ct,this.guardMeta);for(const ot of toArray(ut)){const nt=isString$1(ot)?(dt=this.actionMap)==null?void 0:dt[ot]:ot;warn(isString$1(ot)&&!nt,`[@zag-js/core > execute-actions] No implementation found for action: \`${ot}\``),nt==null||nt(this.state.context,ct,this.meta)}}),__publicField$1(this,"executeActivities",(at,ct,ut)=>{var dt;for(const ot of ct){const nt=isString$1(ot)?(dt=this.activityMap)==null?void 0:dt[ot]:ot;if(!nt){warn(`[@zag-js/core > execute-activity] No implementation found for activity: \`${ot}\``);continue}const lt=nt(this.state.context,at,this.meta);if(lt){const ht=isString$1(ot)?ot:ot.name||uuid();this.addActivityCleanup(ut??this.state.value,ht,lt)}}}),__publicField$1(this,"createEveryActivities",(at,ct)=>{if(at)if(isArray$4(at)){const ut=toArray(at).find(lt=>{const ht=lt.delay,gt=determineDelayFn(ht,this.delayMap)(this.contextSnapshot,this.state.event);return determineGuardFn(lt.guard,this.guardMap)(this.contextSnapshot,this.state.event,this.guardMeta)??gt!=null});if(!ut)return;const ot=determineDelayFn(ut.delay,this.delayMap)(this.contextSnapshot,this.state.event);ct(()=>{const lt=globalThis.setInterval(()=>{this.executeActions(ut.actions,this.state.event)},ot);return()=>{globalThis.clearInterval(lt)}})}else for(const ut in at){const dt=at==null?void 0:at[ut],nt=determineDelayFn(ut,this.delayMap)(this.contextSnapshot,this.state.event);ct(()=>{const ht=globalThis.setInterval(()=>{this.executeActions(dt,this.state.event)},nt);return()=>{globalThis.clearInterval(ht)}})}}),__publicField$1(this,"setEvent",at=>{this.state.previousEvent=this.state.event,this.state.event=ref$1(toEvent(at))}),__publicField$1(this,"performExitEffects",(at,ct)=>{const ut=this.state.value;if(ut==="")return;const dt=at?this.getStateNode(at):void 0;this.stopActivities(ut);const ot=determineActionsFn(dt==null?void 0:dt.exit,this.guardMap)(this.contextSnapshot,ct,this.guardMeta),nt=toArray(ot),lt=this.delayedEvents.get(ut);lt&&nt.push(...lt),this.executeActions(nt,ct),this.delayedEvents.delete(ut)}),__publicField$1(this,"performEntryEffects",(at,ct)=>{const ut=this.getStateNode(at),dt=toArray(ut==null?void 0:ut.activities);this.createEveryActivities(ut==null?void 0:ut.every,ht=>{dt.unshift(ht)}),dt.length>0&&this.executeActivities(ct,dt);const ot=determineActionsFn(ut==null?void 0:ut.entry,this.guardMap)(this.contextSnapshot,ct,this.guardMeta),nt=toArray(ot),lt=this.getDelayedEventActions(at);ut!=null&&ut.after&&lt&&(this.delayedEvents.set(at,lt==null?void 0:lt.exits),nt.push(...lt.entries)),this.executeActions(nt,ct),(ut==null?void 0:ut.type)==="final"&&(this.state.done=!0,this.doneListeners.forEach(ht=>{ht(this.stateSnapshot)}),this.stop())}),__publicField$1(this,"performTransitionEffects",(at,ct)=>{const ut=this.determineTransition(at,ct);this.executeActions(ut==null?void 0:ut.actions,ct)}),__publicField$1(this,"performStateChangeEffects",(at,ct,ut)=>{this.setEvent(ut);const dt=ct.changed||ct.reenter;dt&&this.performExitEffects(at,ut),this.performTransitionEffects(ct.transition,ut),this.setState(ct.target),dt&&this.performEntryEffects(ct.target,ut)}),__publicField$1(this,"determineTransition",(at,ct)=>{const ut=determineTransitionFn(at,this.guardMap);return ut==null?void 0:ut(this.contextSnapshot,ct,this.guardMeta)}),__publicField$1(this,"sendParent",at=>{var ut;this.parent||invariant("[@zag-js/core > send-parent] Cannot send event to an unknown parent");const ct=toEvent(at);(ut=this.parent)==null||ut.send(ct)}),__publicField$1(this,"log",(...at)=>{}),__publicField$1(this,"send",at=>{const ct=toEvent(at);this.transition(this.state.value,ct)}),__publicField$1(this,"transition",(at,ct)=>{var lt,ht;const ut=isString$1(at)?this.getStateNode(at):at==null?void 0:at.stateNode,dt=toEvent(ct);if(!ut&&!this.config.on){const ft=this.status==="Stopped"?"[@zag-js/core > transition] Cannot transition a stopped machine":`[@zag-js/core > transition] State does not have a definition for \`state\`: ${at}, \`event\`: ${dt.type}`;warn(ft);return}const ot=((lt=ut==null?void 0:ut.on)==null?void 0:lt[dt.type])??((ht=this.config.on)==null?void 0:ht[dt.type]),nt=this.getNextStateInfo(ot,dt);return this.performStateChangeEffects(this.state.value,nt,dt),nt.stateNode}),__publicField$1(this,"subscribe",at=>(this.stateListeners.add(at),this.status==="Running"&&at(this.stateSnapshot),()=>{this.stateListeners.delete(at)})),__publicField$1(this,"onDone",at=>(this.doneListeners.add(at),this)),__publicField$1(this,"onTransition",at=>(this.stateListeners.add(at),this.status==="Running"&&at(this.stateSnapshot),this)),this.config=clone$1(_e),this.options=clone$1(_??{}),this.id=this.config.id??`machine-${uuid()}`,this.guardMap=((et=this.options)==null?void 0:et.guards)??{},this.actionMap=((tt=this.options)==null?void 0:tt.actions)??{},this.delayMap=((rt=this.options)==null?void 0:rt.delays)??{},this.activityMap=((it=this.options)==null?void 0:it.activities)??{},this.sync=((st=this.options)==null?void 0:st.sync)??!1,this.state=createProxy$1(this.config),this.initialContext=snapshot(this.state.context)}get stateSnapshot(){return cast(snapshot(this.state))}getState(){return this.stateSnapshot}get contextSnapshot(){return this.stateSnapshot.context}get self(){const _e=this;return{id:this.id,send:this.send.bind(this),sendParent:this.sendParent.bind(this),sendChild:this.sendChild.bind(this),stop:this.stop.bind(this),stopChild:this.stopChild.bind(this),spawn:this.spawn.bind(this),stopActivity:this.stopActivity.bind(this),get state(){return _e.stateSnapshot},get initialContext(){return _e.initialContext},get initialState(){var _;return((_=_e.initialState)==null?void 0:_.target)??""}}}get meta(){var _e;return{state:this.stateSnapshot,guards:this.guardMap,send:this.send.bind(this),self:this.self,initialContext:this.initialContext,initialState:((_e=this.initialState)==null?void 0:_e.target)??"",getState:()=>this.stateSnapshot,getAction:_=>this.actionMap[_],getGuard:_=>this.guardMap[_]}}get guardMeta(){return{state:this.stateSnapshot}}get[Symbol.toStringTag](){return"Machine"}getHydrationState(){const _e=this.getState();return{value:_e.value,tags:_e.tags}}},createMachine=(_e,_)=>new Machine(_e,_),isMachine=_e=>_e instanceof Machine||(_e==null?void 0:_e.type)==="machine",clsx=(..._e)=>_e.map(_=>{var et;return(et=_==null?void 0:_.trim)==null?void 0:et.call(_)}).filter(Boolean).join(" "),CSS_REGEX=/((?:--)?(?:\w+-?)+)\s*:\s*([^;]*)/g,serialize=_e=>{const _={};let et;for(;et=CSS_REGEX.exec(_e);)_[et[1]]=et[2];return _},css=(_e,_)=>{if(isString$1(_e)){if(isString$1(_))return`${_e};${_}`;_e=serialize(_e)}else isString$1(_)&&(_=serialize(_));return Object.assign({},_e??{},_??{})};function mergeProps(..._e){let _={};for(let et of _e){for(let tt in _){if(tt.startsWith("on")&&typeof _[tt]=="function"&&typeof et[tt]=="function"){_[tt]=callAll(et[tt],_[tt]);continue}if(tt==="className"||tt==="class"){_[tt]=clsx(_[tt],et[tt]);continue}if(tt==="style"){_[tt]=css(_[tt],et[tt]);continue}_[tt]=et[tt]!==void 0?et[tt]:_[tt]}for(let tt in et)_[tt]===void 0&&(_[tt]=et[tt])}return _}function getRef(_e){var tt,rt;let _=(tt=Object.getOwnPropertyDescriptor(_e.props,"ref"))==null?void 0:tt.get,et=_&&"isReactWarning"in _&&_.isReactWarning;return et?_e.ref:(_=(rt=Object.getOwnPropertyDescriptor(_e,"ref"))==null?void 0:rt.get,et=_&&"isReactWarning"in _&&_.isReactWarning,et?_e.props.ref:_e.props.ref||_e.ref)}const withAsChild=_e=>{const _=reactExports.memo(reactExports.forwardRef((et,tt)=>{const{asChild:rt,children:it,...st}=et;if(!rt)return reactExports.createElement(_e,{...st,ref:tt},it);const at=reactExports.Children.only(it);if(!reactExports.isValidElement(at))return null;const ct=getRef(at);return reactExports.cloneElement(at,{...mergeProps(st,at.props),ref:tt?composeRefs(tt,ct):ct})}));return _.displayName=_e.displayName||_e.name,_},jsxFactory=()=>{const _e=new Map;return new Proxy(withAsChild,{apply(_,et,tt){return withAsChild(tt[0])},get(_,et){const tt=et;return _e.has(tt)||_e.set(tt,withAsChild(tt)),_e.get(tt)}})},ark=jsxFactory();function createNormalizer(_e){return new Proxy({},{get(){return _e}})}var createProps$1=()=>_e=>Array.from(new Set(_e)),normalizeProps=createNormalizer(_e=>_e),isArrayLike=_e=>(_e==null?void 0:_e.constructor.name)==="Array",isArrayEqual=(_e,_)=>{if(_e.length!==_.length)return!1;for(let et=0;et<_e.length;et++)if(!isEqual(_e[et],_[et]))return!1;return!0},isEqual=(_e,_)=>{if(Object.is(_e,_))return!0;if(_e==null&&_!=null||_e!=null&&_==null)return!1;if(typeof(_e==null?void 0:_e.isEqual)=="function"&&typeof(_==null?void 0:_.isEqual)=="function")return _e.isEqual(_);if(typeof _e=="function"&&typeof _=="function")return _e.toString()===_.toString();if(isArrayLike(_e)&&isArrayLike(_))return isArrayEqual(Array.from(_e),Array.from(_));if(typeof _e!="object"||typeof _!="object")return!1;const et=Object.keys(_??Object.create(null)),tt=et.length;for(let rt=0;rt<tt;rt++)if(!Reflect.has(_e,et[rt]))return!1;for(let rt=0;rt<tt;rt++){const it=et[rt];if(!isEqual(_e[it],_[it]))return!1}return!0},fnToString=Function.prototype.toString;fnToString.call(Object);function compact$1(_e){if(!isPlainObject(_e)||_e===void 0)return _e;const _=Reflect.ownKeys(_e).filter(tt=>typeof tt=="string"),et={};for(const tt of _){const rt=_e[tt];rt!==void 0&&(et[tt]=compact$1(rt))}return et}var isPlainObject=_e=>_e&&typeof _e=="object"&&_e.constructor===Object;function useUpdateEffect(_e,_){const et=reactExports.useRef(!1),tt=reactExports.useRef(!1);reactExports.useEffect(()=>{if(et.current&&tt.current)return _e();tt.current=!0},_),reactExports.useEffect(()=>(et.current=!0,()=>{et.current=!1}),[])}var targetCache=globalRef("__zag__targetCache",()=>new WeakMap);function useSnapshot(_e,_){const{actions:et,context:tt,sync:rt}={},it=reactExports.useRef(void 0),st=reactExports.useRef(void 0),at=reactExports.useSyncExternalStore(reactExports.useCallback(ot=>subscribe$1(_e.state,ot,rt),[rt]),()=>{const ot=snapshot(_e.state);try{if(it.current&&st.current&&!isChanged(it.current,ot,st.current,new WeakMap))return it.current}catch{}return ot},()=>snapshot(_e.state));_e.setOptions({actions:et});const ct=reactExports.useMemo(()=>compact$1(tt??{}),[tt]);useUpdateEffect(()=>{const ot=Object.entries(ct),nt=_e.contextSnapshot??{};ot.map(([ft,gt])=>({key:ft,curr:gt,prev:nt[ft],equal:isEqual(nt[ft],gt)})).every(({equal:ft})=>ft)||_e.setContext(ct)},[ct]);const ut=new WeakMap;reactExports.useEffect(()=>{it.current=at,st.current=ut});const dt=reactExports.useMemo(()=>new WeakMap,[]);return createProxy$2(at,ut,dt,targetCache)}function useActor(_e){return[useSnapshot(_e),_e.send]}function useConstant(_e){const _=reactExports.useRef(void 0);return _.current||(_.current={v:_e()}),_.current.v}var useSafeLayoutEffect=typeof document<"u"?reactExports.useLayoutEffect:reactExports.useEffect;function useService(_e,_){const{state:et,context:tt}={},rt=useConstant(()=>{const st=typeof _e=="function"?_e():_e;return tt&&st.setContext(tt),st._created(),st}),it=reactExports.useRef(void 0);return useSafeLayoutEffect(()=>{const st=et??it.current;return rt.start(st),()=>{rt.stop()}},[]),rt}function useMachine(_e,_){const et=useService(_e);return[useSnapshot(et),et.send,et]}const colorMix=(_e,_)=>{var ct;if(!_e||typeof _e!="string")return{invalid:!0,value:_e};const[et,tt]=_e.split("/");if(!et||!tt||et==="currentBg")return{invalid:!0,value:et};const rt=_(`colors.${et}`),it=(ct=_.raw(`opacity.${tt}`))==null?void 0:ct.value;if(!it&&isNaN(Number(tt)))return{invalid:!0,value:et};const st=it?Number(it)*100+"%":`${tt}%`,at=rt??et;return{invalid:!1,color:at,value:`color-mix(in srgb, ${at} ${st}, transparent)`}},createColorMixTransform=_e=>(_,et)=>{const tt=et.utils.colorMix(_);if(tt.invalid)return{[_e]:_};const rt="--mix-"+_e;return{[rt]:tt.value,[_e]:`var(${rt}, ${tt.color})`}};function clone(_e){if(_e===null||typeof _e!="object")return _e;if(Array.isArray(_e))return _e.map(et=>clone(et));const _=Object.create(Object.getPrototypeOf(_e));for(const et of Object.keys(_e))_[et]=clone(_e[et]);return _}function merge$1(_e,_){if(_==null)return _e;for(const et of Object.keys(_))if(!(_[et]===void 0||et==="__proto__"))if(!isObject$4(_e[et])&&isObject$4(_[et]))Object.assign(_e,{[et]:_[et]});else if(_e[et]&&isObject$4(_[et]))merge$1(_e[et],_[et]);else if(Array.isArray(_[et])&&Array.isArray(_e[et])){let tt=0;for(;tt<_[et].length;tt++)isObject$4(_e[et][tt])&&isObject$4(_[et][tt])?merge$1(_e[et][tt],_[et][tt]):_e[et][tt]=_[et][tt]}else Object.assign(_e,{[et]:_[et]});return _e}function mergeWith(_e,..._){for(const et of _)merge$1(_e,et);return _e}const defineConditions=_e=>_e,defineRecipe=_e=>_e,defineSlotRecipe=_e=>_e,defineKeyframes=_e=>_e,defineGlobalStyles=_e=>_e,defineStyle=_e=>_e,defineTextStyles=_e=>_e,defineAnimationStyles=_e=>_e,defineLayerStyles=_e=>_e;function createProxy(){const _e=_=>_;return new Proxy(_e,{get(){return _e}})}const defineTokens=createProxy(),defineSemanticTokens=createProxy(),defineConfig=_e=>_e,mergeConfigs=(..._e)=>mergeWith({},..._e.map(clone)),escRegex=/[^a-zA-Z0-9_\u0081-\uffff-]/g;function esc$1(_e){return`${_e}`.replace(escRegex,_=>`\\${_}`)}const dashCaseRegex=/[A-Z]/g;function dashCase(_e){return _e.replace(dashCaseRegex,_=>`-${_.toLowerCase()}`)}function cssVar(_e,_={}){const{fallback:et="",prefix:tt=""}=_,rt=dashCase(["-",tt,esc$1(_e)].filter(Boolean).join("-"));return{var:rt,ref:`var(${rt}${et?`, ${et}`:""})`}}const isCssVar=_e=>/^var\(--.+\)$/.test(_e),wrap=(_e,_)=>_!=null?`${_e}(${_})`:_,deg=_e=>{if(isCssVar(_e)||_e==null)return _e;const _=typeof _e=="string"&&!_e.endsWith("deg");return typeof _e=="number"||_?`${_e}deg`:_e},createFocusRing=_e=>({values:["outside","inside","mixed","none"],transform(_,{token:et}){const tt=et("colors.colorPalette.focusRing");return{inside:{"--focus-ring-color":tt,[_e]:{outlineOffset:"0px",outlineWidth:"var(--focus-ring-width, 1px)",outlineColor:"var(--focus-ring-color)",outlineStyle:"var(--focus-ring-style, solid)",borderColor:"var(--focus-ring-color)"}},outside:{"--focus-ring-color":tt,[_e]:{outlineWidth:"var(--focus-ring-width, 2px)",outlineOffset:"var(--focus-ring-offset, 2px)",outlineStyle:"var(--focus-ring-style, solid)",outlineColor:"var(--focus-ring-color)"}},mixed:{"--focus-ring-color":tt,[_e]:{outlineWidth:"var(--focus-ring-width, 3px)",outlineStyle:"var(--focus-ring-style, solid)",outlineColor:"color-mix(in srgb, var(--focus-ring-color), transparent 60%)",borderColor:"var(--focus-ring-color)"}},none:{"--focus-ring-color":tt,[_e]:{outline:"none"}}}[_]??{}}}),divideColor=createColorMixTransform("borderColor"),createTransition=_e=>({transition:_e,transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionDuration:"150ms"}),defaultConditions=defineConditions({hover:["@media (hover: hover)","&:is(:hover, [data-hover]):not(:disabled, [data-disabled])"],active:"&:is(:active, [data-active]):not(:disabled, [data-disabled], [data-state=open])",focus:"&:is(:focus, [data-focus])",focusWithin:"&:is(:focus-within, [data-focus-within])",focusVisible:"&:is(:focus-visible, [data-focus-visible])",disabled:"&:is(:disabled, [disabled], [data-disabled], [aria-disabled=true])",visited:"&:visited",target:"&:target",readOnly:"&:is([data-readonly], [aria-readonly=true], [readonly])",readWrite:"&:read-write",empty:"&:is(:empty, [data-empty])",checked:"&:is(:checked, [data-checked], [aria-checked=true], [data-state=checked])",enabled:"&:enabled",expanded:"&:is([aria-expanded=true], [data-expanded], [data-state=expanded])",highlighted:"&[data-highlighted]",complete:"&[data-complete]",incomplete:"&[data-incomplete]",dragging:"&[data-dragging]",before:"&::before",after:"&::after",firstLetter:"&::first-letter",firstLine:"&::first-line",marker:"&::marker",selection:"&::selection",file:"&::file-selector-button",backdrop:"&::backdrop",first:"&:first-of-type",last:"&:last-of-type",notFirst:"&:not(:first-of-type)",notLast:"&:not(:last-of-type)",only:"&:only-child",even:"&:nth-of-type(even)",odd:"&:nth-of-type(odd)",peerFocus:".peer:is(:focus, [data-focus]) ~ &",peerHover:".peer:is(:hover, [data-hover]):not(:disabled, [data-disabled]) ~ &",peerActive:".peer:is(:active, [data-active]):not(:disabled, [data-disabled]) ~ &",peerFocusWithin:".peer:focus-within ~ &",peerFocusVisible:".peer:is(:focus-visible, [data-focus-visible]) ~ &",peerDisabled:".peer:is(:disabled, [disabled], [data-disabled]) ~ &",peerChecked:".peer:is(:checked, [data-checked], [aria-checked=true], [data-state=checked]) ~ &",peerInvalid:".peer:is(:invalid, [data-invalid], [aria-invalid=true]) ~ &",peerExpanded:".peer:is([aria-expanded=true], [data-expanded], [data-state=expanded]) ~ &",peerPlaceholderShown:".peer:placeholder-shown ~ &",groupFocus:".group:is(:focus, [data-focus]) &",groupHover:".group:is(:hover, [data-hover]):not(:disabled, [data-disabled]) &",groupActive:".group:is(:active, [data-active]):not(:disabled, [data-disabled]) &",groupFocusWithin:".group:focus-within &",groupFocusVisible:".group:is(:focus-visible, [data-focus-visible]) &",groupDisabled:".group:is(:disabled, [disabled], [data-disabled]) &",groupChecked:".group:is(:checked, [data-checked], [aria-checked=true], [data-state=checked]) &",groupExpanded:".group:is([aria-expanded=true], [data-expanded], [data-state=expanded]) &",groupInvalid:".group:invalid &",indeterminate:"&:is(:indeterminate, [data-indeterminate], [aria-checked=mixed], [data-state=indeterminate])",required:"&:is([data-required], [aria-required=true])",valid:"&:is([data-valid], [data-state=valid])",invalid:"&:is([data-invalid], [aria-invalid=true], [data-state=invalid])",autofill:"&:autofill",inRange:"&:is(:in-range, [data-in-range])",outOfRange:"&:is(:out-of-range, [data-outside-range])",placeholder:"&::placeholder, &[data-placeholder]",placeholderShown:"&:is(:placeholder-shown, [data-placeholder-shown])",pressed:"&:is([aria-pressed=true], [data-pressed])",selected:"&:is([aria-selected=true], [data-selected])",grabbed:"&:is([aria-grabbed=true], [data-grabbed])",underValue:"&[data-state=under-value]",overValue:"&[data-state=over-value]",atValue:"&[data-state=at-value]",default:"&:default",optional:"&:optional",open:"&:is([open], [data-open], [data-state=open])",closed:"&:is([closed], [data-closed], [data-state=closed])",fullscreen:"&is(:fullscreen, [data-fullscreen])",loading:"&:is([data-loading], [aria-busy=true])",hidden:"&:is([hidden], [data-hidden])",current:"&[data-current]",currentPage:"&[aria-current=page]",currentStep:"&[aria-current=step]",today:"&[data-today]",unavailable:"&[data-unavailable]",rangeStart:"&[data-range-start]",rangeEnd:"&[data-range-end]",now:"&[data-now]",topmost:"&[data-topmost]",motionReduce:"@media (prefers-reduced-motion: reduce)",motionSafe:"@media (prefers-reduced-motion: no-preference)",print:"@media print",landscape:"@media (orientation: landscape)",portrait:"@media (orientation: portrait)",dark:".dark &, .dark .chakra-theme:not(.light) &",light:":root &, .light &",osDark:"@media (prefers-color-scheme: dark)",osLight:"@media (prefers-color-scheme: light)",highContrast:"@media (forced-colors: active)",lessContrast:"@media (prefers-contrast: less)",moreContrast:"@media (prefers-contrast: more)",ltr:"[dir=ltr] &",rtl:"[dir=rtl] &",scrollbar:"&::-webkit-scrollbar",scrollbarThumb:"&::-webkit-scrollbar-thumb",scrollbarTrack:"&::-webkit-scrollbar-track",horizontal:"&[data-orientation=horizontal]",vertical:"&[data-orientation=vertical]",icon:"& :where(svg)",starting:"@starting-style"}),currentBgVar=cssVar("bg-currentcolor"),isCurrentBgVar=_e=>_e===currentBgVar.ref||_e==="currentBg",colorValues=_e=>({..._e("colors"),currentBg:currentBgVar}),defaultBaseConfig=defineConfig({conditions:defaultConditions,utilities:{background:{values:colorValues,shorthand:["bg"],transform(_e,_){if(isCurrentBgVar(_.raw))return{background:currentBgVar.ref};const et=createColorMixTransform("background")(_e,_);return{...et,[currentBgVar.var]:et==null?void 0:et.background}}},backgroundColor:{values:colorValues,shorthand:["bgColor"],transform(_e,_){if(isCurrentBgVar(_.raw))return{backgroundColor:currentBgVar.ref};const et=createColorMixTransform("backgroundColor")(_e,_);return{...et,[currentBgVar.var]:et==null?void 0:et.backgroundColor}}},backgroundSize:{shorthand:["bgSize"]},backgroundPosition:{shorthand:["bgPos"]},backgroundRepeat:{shorthand:["bgRepeat"]},backgroundAttachment:{shorthand:["bgAttachment"]},backgroundClip:{shorthand:["bgClip"],values:["text"],transform(_e){return _e==="text"?{color:"transparent",backgroundClip:"text"}:{backgroundClip:_e}}},backgroundGradient:{shorthand:["bgGradient"],values(_e){return{..._e("gradients"),"to-t":"linear-gradient(to top, var(--gradient))","to-tr":"linear-gradient(to top right, var(--gradient))","to-r":"linear-gradient(to right, var(--gradient))","to-br":"linear-gradient(to bottom right, var(--gradient))","to-b":"linear-gradient(to bottom, var(--gradient))","to-bl":"linear-gradient(to bottom left, var(--gradient))","to-l":"linear-gradient(to left, var(--gradient))","to-tl":"linear-gradient(to top left, var(--gradient))"}},transform(_e){return{"--gradient-stops":"var(--gradient-from), var(--gradient-to)","--gradient":"var(--gradient-via-stops, var(--gradient-stops))",backgroundImage:_e}}},gradientFrom:{values:colorValues,transform:createColorMixTransform("--gradient-from")},gradientTo:{values:colorValues,transform:createColorMixTransform("--gradient-to")},gradientVia:{values:colorValues,transform(_e,_){return{...createColorMixTransform("--gradient-via")(_e,_),"--gradient-via-stops":"var(--gradient-from), var(--gradient-via), var(--gradient-to)"}}},backgroundImage:{values:"gradients",shorthand:["bgImg","bgImage"]},border:{values:"borders"},borderTop:{values:"borders"},borderLeft:{values:"borders"},borderBlockStart:{values:"borders"},borderRight:{values:"borders"},borderInlineEnd:{values:"borders"},borderBottom:{values:"borders"},borderBlockEnd:{values:"borders"},borderInlineStart:{values:"borders",shorthand:["borderStart"]},borderInline:{values:"borders",shorthand:["borderX"]},borderBlock:{values:"borders",shorthand:["borderY"]},borderColor:{values:colorValues,transform:createColorMixTransform("borderColor")},borderTopColor:{values:colorValues,transform:createColorMixTransform("borderTopColor")},borderBlockStartColor:{values:colorValues,transform:createColorMixTransform("borderBlockStartColor")},borderBottomColor:{values:colorValues,transform:createColorMixTransform("borderBottomColor")},borderBlockEndColor:{values:colorValues,transform:createColorMixTransform("borderBlockEndColor")},borderLeftColor:{values:colorValues,transform:createColorMixTransform("borderLeftColor")},borderInlineStartColor:{values:colorValues,shorthand:["borderStartColor"],transform:createColorMixTransform("borderInlineStartColor")},borderRightColor:{values:colorValues,transform:createColorMixTransform("borderRightColor")},borderInlineEndColor:{values:colorValues,shorthand:["borderEndColor"],transform:createColorMixTransform("borderInlineEndColor")},borderStyle:{values:"borderStyles"},borderTopStyle:{values:"borderStyles"},borderBlockStartStyle:{values:"borderStyles"},borderBottomStyle:{values:"borderStyles"},borderBlockEndStyle:{values:"borderStyles"},borderInlineStartStyle:{values:"borderStyles",shorthand:["borderStartStyle"]},borderInlineEndStyle:{values:"borderStyles",shorthand:["borderEndStyle"]},borderLeftStyle:{values:"borderStyles"},borderRightStyle:{values:"borderStyles"},borderRadius:{values:"radii",shorthand:["rounded"]},borderTopLeftRadius:{values:"radii",shorthand:["roundedTopLeft"]},borderStartStartRadius:{values:"radii",shorthand:["roundedStartStart","borderTopStartRadius"]},borderEndStartRadius:{values:"radii",shorthand:["roundedEndStart","borderBottomStartRadius"]},borderTopRightRadius:{values:"radii",shorthand:["roundedTopRight"]},borderStartEndRadius:{values:"radii",shorthand:["roundedStartEnd","borderTopEndRadius"]},borderEndEndRadius:{values:"radii",shorthand:["roundedEndEnd","borderBottomEndRadius"]},borderBottomLeftRadius:{values:"radii",shorthand:["roundedBottomLeft"]},borderBottomRightRadius:{values:"radii",shorthand:["roundedBottomRight"]},borderInlineStartRadius:{values:"radii",property:"borderRadius",shorthand:["roundedStart","borderStartRadius"],transform:_e=>({borderStartStartRadius:_e,borderEndStartRadius:_e})},borderInlineEndRadius:{values:"radii",property:"borderRadius",shorthand:["roundedEnd","borderEndRadius"],transform:_e=>({borderStartEndRadius:_e,borderEndEndRadius:_e})},borderTopRadius:{values:"radii",property:"borderRadius",shorthand:["roundedTop"],transform:_e=>({borderTopLeftRadius:_e,borderTopRightRadius:_e})},borderBottomRadius:{values:"radii",property:"borderRadius",shorthand:["roundedBottom"],transform:_e=>({borderBottomLeftRadius:_e,borderBottomRightRadius:_e})},borderLeftRadius:{values:"radii",property:"borderRadius",shorthand:["roundedLeft"],transform:_e=>({borderTopLeftRadius:_e,borderBottomLeftRadius:_e})},borderRightRadius:{values:"radii",property:"borderRadius",shorthand:["roundedRight"],transform:_e=>({borderTopRightRadius:_e,borderBottomRightRadius:_e})},borderWidth:{values:"borderWidths"},borderBlockStartWidth:{values:"borderWidths"},borderTopWidth:{values:"borderWidths"},borderBottomWidth:{values:"borderWidths"},borderBlockEndWidth:{values:"borderWidths"},borderRightWidth:{values:"borderWidths"},borderInlineWidth:{values:"borderWidths",shorthand:["borderXWidth"]},borderInlineStartWidth:{values:"borderWidths",shorthand:["borderStartWidth"]},borderInlineEndWidth:{values:"borderWidths",shorthand:["borderEndWidth"]},borderLeftWidth:{values:"borderWidths"},borderBlockWidth:{values:"borderWidths",shorthand:["borderYWidth"]},color:{values:colorValues,transform:createColorMixTransform("color")},fill:{values:colorValues,transform:createColorMixTransform("fill")},stroke:{values:colorValues,transform:createColorMixTransform("stroke")},accentColor:{values:colorValues,transform:createColorMixTransform("accentColor")},divideX:{values:{type:"string"},transform(_e){return{"& > :not(style, [hidden]) ~ :not(style, [hidden])":{borderInlineStartWidth:_e,borderInlineEndWidth:"0px"}}}},divideY:{values:{type:"string"},transform(_e){return{"& > :not(style, [hidden]) ~ :not(style, [hidden])":{borderTopWidth:_e,borderBottomWidth:"0px"}}}},divideColor:{values:colorValues,transform(_e,_){return{"& > :not(style, [hidden]) ~ :not(style, [hidden])":divideColor(_e,_)}}},divideStyle:{property:"borderStyle",transform(_e){return{"& > :not(style, [hidden]) ~ :not(style, [hidden])":{borderStyle:_e}}}},boxShadow:{values:"shadows",shorthand:["shadow"]},boxShadowColor:{values:colorValues,transform:createColorMixTransform("--shadow-color"),shorthand:["shadowColor"]},mixBlendMode:{shorthand:["blendMode"]},backgroundBlendMode:{shorthand:["bgBlendMode"]},opacity:{values:"opacity"},filter:{transform(_e){return _e!=="auto"?{filter:_e}:{filter:"var(--blur) var(--brightness) var(--contrast) var(--grayscale) var(--hue-rotate) var(--invert) var(--saturate) var(--sepia) var(--drop-shadow)"}}},blur:{values:"blurs",transform:_e=>({"--blur":wrap("blur",_e)})},brightness:{transform:_e=>({"--brightness":wrap("brightness",_e)})},contrast:{transform:_e=>({"--contrast":wrap("contrast",_e)})},grayscale:{transform:_e=>({"--grayscale":wrap("grayscale",_e)})},hueRotate:{transform:_e=>({"--hue-rotate":wrap("hue-rotate",deg(_e))})},invert:{transform:_e=>({"--invert":wrap("invert",_e)})},saturate:{transform:_e=>({"--saturate":wrap("saturate",_e)})},sepia:{transform:_e=>({"--sepia":wrap("sepia",_e)})},dropShadow:{transform:_e=>({"--drop-shadow":wrap("drop-shadow",_e)})},backdropFilter:{transform(_e){return _e!=="auto"?{backdropFilter:_e}:{backdropFilter:"var(--backdrop-blur) var(--backdrop-brightness) var(--backdrop-contrast) var(--backdrop-grayscale) var(--backdrop-hue-rotate) var(--backdrop-invert) var(--backdrop-opacity) var(--backdrop-saturate) var(--backdrop-sepia)"}}},backdropBlur:{values:"blurs",transform:_e=>({"--backdrop-blur":wrap("blur",_e)})},backdropBrightness:{transform:_e=>({"--backdrop-brightness":wrap("brightness",_e)})},backdropContrast:{transform:_e=>({"--backdrop-contrast":wrap("contrast",_e)})},backdropGrayscale:{transform:_e=>({"--backdrop-grayscale":wrap("grayscale",_e)})},backdropHueRotate:{transform:_e=>({"--backdrop-hue-rotate":wrap("hue-rotate",deg(_e))})},backdropInvert:{transform:_e=>({"--backdrop-invert":wrap("invert",_e)})},backdropOpacity:{transform:_e=>({"--backdrop-opacity":wrap("opacity",_e)})},backdropSaturate:{transform:_e=>({"--backdrop-saturate":wrap("saturate",_e)})},backdropSepia:{transform:_e=>({"--backdrop-sepia":wrap("sepia",_e)})},flexBasis:{values:"sizes"},gap:{values:"spacing"},rowGap:{values:"spacing",shorthand:["gapY"]},columnGap:{values:"spacing",shorthand:["gapX"]},flexDirection:{shorthand:["flexDir"]},gridGap:{values:"spacing"},gridColumnGap:{values:"spacing"},gridRowGap:{values:"spacing"},outlineColor:{values:colorValues,transform:createColorMixTransform("outlineColor")},focusRing:createFocusRing("&:is(:focus, [data-focus])"),focusVisibleRing:createFocusRing("&:is(:focus-visible, [data-focus-visible])"),focusRingColor:{values:colorValues,transform:createColorMixTransform("--focus-ring-color")},focusRingOffset:{values:"spacing",transform:_e=>({"--focus-ring-offset":_e})},focusRingWidth:{values:"borderWidths",property:"outlineWidth",transform:_e=>({"--focus-ring-width":_e})},focusRingStyle:{values:"borderStyles",property:"outlineStyle",transform:_e=>({"--focus-ring-style":_e})},aspectRatio:{values:"aspectRatios"},width:{values:"sizes",shorthand:["w"]},inlineSize:{values:"sizes"},height:{values:"sizes",shorthand:["h"]},blockSize:{values:"sizes"},boxSize:{values:"sizes",property:"width",transform:_e=>({width:_e,height:_e})},minWidth:{values:"sizes",shorthand:["minW"]},minInlineSize:{values:"sizes"},minHeight:{values:"sizes",shorthand:["minH"]},minBlockSize:{values:"sizes"},maxWidth:{values:"sizes",shorthand:["maxW"]},maxInlineSize:{values:"sizes"},maxHeight:{values:"sizes",shorthand:["maxH"]},maxBlockSize:{values:"sizes"},hideFrom:{values:"breakpoints",transform:(_e,{raw:_,token:et})=>({[et.raw(`breakpoints.${_}`)?`@breakpoint ${_}`:`@media screen and (min-width: ${_e})`]:{display:"none"}})},hideBelow:{values:"breakpoints",transform(_e,{raw:_,token:et}){return{[et.raw(`breakpoints.${_}`)?`@breakpoint ${_}Down`:`@media screen and (max-width: ${_e})`]:{display:"none"}}}},overscrollBehavior:{shorthand:["overscroll"]},overscrollBehaviorX:{shorthand:["overscrollX"]},overscrollBehaviorY:{shorthand:["overscrollY"]},scrollbar:{values:["visible","hidden"],transform(_e){switch(_e){case"visible":return{msOverflowStyle:"auto",scrollbarWidth:"auto","&::-webkit-scrollbar":{display:"block"}};case"hidden":return{msOverflowStyle:"none",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}};default:return{}}}},scrollbarColor:{values:colorValues,transform:createColorMixTransform("scrollbarColor")},scrollbarGutter:{values:"spacing"},scrollbarWidth:{values:"sizes"},scrollMargin:{values:"spacing"},scrollMarginTop:{values:"spacing"},scrollMarginBottom:{values:"spacing"},scrollMarginLeft:{values:"spacing"},scrollMarginRight:{values:"spacing"},scrollMarginX:{values:"spacing",transform:_e=>({scrollMarginLeft:_e,scrollMarginRight:_e})},scrollMarginY:{values:"spacing",transform:_e=>({scrollMarginTop:_e,scrollMarginBottom:_e})},scrollPadding:{values:"spacing"},scrollPaddingTop:{values:"spacing"},scrollPaddingBottom:{values:"spacing"},scrollPaddingLeft:{values:"spacing"},scrollPaddingRight:{values:"spacing"},scrollPaddingInline:{values:"spacing",shorthand:["scrollPaddingX"]},scrollPaddingBlock:{values:"spacing",shorthand:["scrollPaddingY"]},scrollSnapType:{values:{none:"none",x:"x var(--scroll-snap-strictness)",y:"y var(--scroll-snap-strictness)",both:"both var(--scroll-snap-strictness)"}},scrollSnapStrictness:{values:["mandatory","proximity"],transform:_e=>({"--scroll-snap-strictness":_e})},scrollSnapMargin:{values:"spacing"},scrollSnapMarginTop:{values:"spacing"},scrollSnapMarginBottom:{values:"spacing"},scrollSnapMarginLeft:{values:"spacing"},scrollSnapMarginRight:{values:"spacing"},listStylePosition:{shorthand:["listStylePos"]},listStyleImage:{shorthand:["listStyleImg"]},position:{shorthand:["pos"]},zIndex:{values:"zIndex"},inset:{values:"spacing"},insetInline:{values:"spacing",shorthand:["insetX"]},insetBlock:{values:"spacing",shorthand:["insetY"]},top:{values:"spacing"},insetBlockStart:{values:"spacing"},bottom:{values:"spacing"},insetBlockEnd:{values:"spacing"},left:{values:"spacing"},right:{values:"spacing"},insetInlineStart:{values:"spacing",shorthand:["insetStart"]},insetInlineEnd:{values:"spacing",shorthand:["insetEnd"]},ring:{transform(_e){return{"--ring-offset-shadow":"var(--ring-inset) 0 0 0 var(--ring-offset-width) var(--ring-offset-color)","--ring-shadow":"var(--ring-inset) 0 0 0 calc(var(--ring-width) + var(--ring-offset-width)) var(--ring-color)","--ring-width":_e,boxShadow:"var(--ring-offset-shadow), var(--ring-shadow), var(--shadow, 0 0 #0000)"}}},ringColor:{values:colorValues,transform:createColorMixTransform("--ring-color")},ringOffset:{transform:_e=>({"--ring-offset-width":_e})},ringOffsetColor:{values:colorValues,transform:createColorMixTransform("--ring-offset-color")},ringInset:{transform:_e=>({"--ring-inset":_e})},margin:{values:"spacing",shorthand:["m"]},marginTop:{values:"spacing",shorthand:["mt"]},marginBlockStart:{values:"spacing",shorthand:["mt"]},marginRight:{values:"spacing",shorthand:["mr"]},marginBottom:{values:"spacing",shorthand:["mb"]},marginBlockEnd:{values:"spacing"},marginLeft:{values:"spacing",shorthand:["ml"]},marginInlineStart:{values:"spacing",shorthand:["ms","marginStart"]},marginInlineEnd:{values:"spacing",shorthand:["me","marginEnd"]},marginInline:{values:"spacing",shorthand:["mx","marginX"]},marginBlock:{values:"spacing",shorthand:["my","marginY"]},padding:{values:"spacing",shorthand:["p"]},paddingTop:{values:"spacing",shorthand:["pt"]},paddingRight:{values:"spacing",shorthand:["pr"]},paddingBottom:{values:"spacing",shorthand:["pb"]},paddingBlockStart:{values:"spacing"},paddingBlockEnd:{values:"spacing"},paddingLeft:{values:"spacing",shorthand:["pl"]},paddingInlineStart:{values:"spacing",shorthand:["ps","paddingStart"]},paddingInlineEnd:{values:"spacing",shorthand:["pe","paddingEnd"]},paddingInline:{values:"spacing",shorthand:["px","paddingX"]},paddingBlock:{values:"spacing",shorthand:["py","paddingY"]},textDecoration:{shorthand:["textDecor"]},textDecorationColor:{values:colorValues,transform:createColorMixTransform("textDecorationColor")},textShadow:{values:"shadows"},transform:{transform:_e=>{let _=_e;return _e==="auto"&&(_="translateX(var(--translate-x, 0)) translateY(var(--translate-y, 0)) rotate(var(--rotate, 0)) scaleX(var(--scale-x, 1)) scaleY(var(--scale-y, 1)) skewX(var(--skew-x, 0)) skewY(var(--skew-y, 0))"),_e==="auto-gpu"&&(_="translate3d(var(--translate-x, 0), var(--translate-y, 0), 0) rotate(var(--rotate, 0)) scaleX(var(--scale-x, 1)) scaleY(var(--scale-y, 1)) skewX(var(--skew-x, 0)) skewY(var(--skew-y, 0))"),{transform:_}}},skewX:{transform:_e=>({"--skew-x":deg(_e)})},skewY:{transform:_e=>({"--skew-y":deg(_e)})},scaleX:{transform:_e=>({"--scale-x":_e})},scaleY:{transform:_e=>({"--scale-y":_e})},scale:{transform(_e){return _e!=="auto"?{scale:_e}:{scale:"var(--scale-x, 1) var(--scale-y, 1)"}}},spaceXReverse:{values:{type:"boolean"},transform(_e){return{"& > :not(style, [hidden]) ~ :not(style, [hidden])":{"--space-x-reverse":_e?"1":void 0}}}},spaceX:{property:"marginInlineStart",values:"spacing",transform:_e=>({"& > :not(style, [hidden]) ~ :not(style, [hidden])":{"--space-x-reverse":"0",marginInlineStart:`calc(${_e} * calc(1 - var(--space-x-reverse)))`,marginInlineEnd:`calc(${_e} * var(--space-x-reverse))`}})},spaceYReverse:{values:{type:"boolean"},transform(_e){return{"& > :not(style, [hidden]) ~ :not(style, [hidden])":{"--space-y-reverse":_e?"1":void 0}}}},spaceY:{property:"marginTop",values:"spacing",transform:_e=>({"& > :not(style, [hidden]) ~ :not(style, [hidden])":{"--space-y-reverse":"0",marginTop:`calc(${_e} * calc(1 - var(--space-y-reverse)))`,marginBottom:`calc(${_e} * var(--space-y-reverse))`}})},rotate:{transform(_e){return _e!=="auto"?{rotate:deg(_e)}:{rotate:"var(--rotate-x, 0) var(--rotate-y, 0) var(--rotate-z, 0)"}}},rotateX:{transform(_e){return{"--rotate-x":deg(_e)}}},rotateY:{transform(_e){return{"--rotate-y":deg(_e)}}},translate:{transform(_e){return _e!=="auto"?{translate:_e}:{translate:"var(--translate-x) var(--translate-y)"}}},translateX:{values:"spacing",transform:_e=>({"--translate-x":_e})},translateY:{values:"spacing",transform:_e=>({"--translate-y":_e})},transition:{values:["all","common","colors","opacity","position","backgrounds","size","shadow","transform"],transform(_e){switch(_e){case"all":return createTransition("all");case"position":return createTransition("left, right, top, bottom, inset-inline, inset-block");case"colors":return createTransition("color, background-color, border-color, text-decoration-color, fill, stroke");case"opacity":return createTransition("opacity");case"shadow":return createTransition("box-shadow");case"transform":return createTransition("transform");case"size":return createTransition("width, height");case"backgrounds":return createTransition("background, background-color, background-image, background-position");case"common":return createTransition("color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter");default:return{transition:_e}}}},transitionDuration:{values:"durations"},transitionProperty:{values:{common:"background-color, border-color, color, fill, stroke, opacity, box-shadow, translate, transform",colors:"background-color, border-color, color, fill, stroke",size:"width, height",position:"left, right, top, bottom, inset-inline, inset-block",background:"background, background-color, background-image, background-position"}},transitionTimingFunction:{values:"easings"},animation:{values:"animations"},animationDuration:{values:"durations"},animationDelay:{values:"durations"},animationTimingFunction:{values:"easings"},fontFamily:{values:"fonts"},fontSize:{values:"fontSizes"},fontWeight:{values:"fontWeights"},lineHeight:{values:"lineHeights"},letterSpacing:{values:"letterSpacings"},textIndent:{values:"spacing"},truncate:{values:{type:"boolean"},transform(_e){return _e===!0?{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}:{}}},lineClamp:{transform(_e){return _e==="none"?{WebkitLineClamp:"unset"}:{overflow:"hidden",display:"-webkit-box",WebkitLineClamp:_e,WebkitBoxOrient:"vertical",textWrap:"wrap"}}},srOnly:{values:{type:"boolean"},transform(_e){return srMapping[_e]||{}}},debug:{values:{type:"boolean"},transform(_e){return _e?{outline:"1px solid blue !important","& > *":{outline:"1px solid red !important"}}:{}}},caretColor:{values:colorValues,transform:createColorMixTransform("caretColor")},cursor:{values:"cursor"}}}),srMapping={true:{position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"},false:{position:"static",width:"auto",height:"auto",padding:"0",margin:"0",overflow:"visible",clip:"auto",whiteSpace:"normal"}};var userGeneratedStr="",userGenerated=userGeneratedStr.split(","),cssPropertiesStr="WebkitAppearance,WebkitBorderBefore,WebkitBorderBeforeColor,WebkitBorderBeforeStyle,WebkitBorderBeforeWidth,WebkitBoxReflect,WebkitLineClamp,WebkitMask,WebkitMaskAttachment,WebkitMaskClip,WebkitMaskComposite,WebkitMaskImage,WebkitMaskOrigin,WebkitMaskPosition,WebkitMaskPositionX,WebkitMaskPositionY,WebkitMaskRepeat,WebkitMaskRepeatX,WebkitMaskRepeatY,WebkitMaskSize,WebkitOverflowScrolling,WebkitTapHighlightColor,WebkitTextFillColor,WebkitTextStroke,WebkitTextStrokeColor,WebkitTextStrokeWidth,WebkitTouchCallout,WebkitUserModify,accentColor,alignContent,alignItems,alignSelf,alignTracks,all,animation,animationComposition,animationDelay,animationDirection,animationDuration,animationFillMode,animationIterationCount,animationName,animationPlayState,animationRange,animationRangeEnd,animationRangeStart,animationTimingFunction,animationTimeline,appearance,aspectRatio,azimuth,backdropFilter,backfaceVisibility,background,backgroundAttachment,backgroundBlendMode,backgroundClip,backgroundColor,backgroundImage,backgroundOrigin,backgroundPosition,backgroundPositionX,backgroundPositionY,backgroundRepeat,backgroundSize,blockSize,border,borderBlock,borderBlockColor,borderBlockStyle,borderBlockWidth,borderBlockEnd,borderBlockEndColor,borderBlockEndStyle,borderBlockEndWidth,borderBlockStart,borderBlockStartColor,borderBlockStartStyle,borderBlockStartWidth,borderBottom,borderBottomColor,borderBottomLeftRadius,borderBottomRightRadius,borderBottomStyle,borderBottomWidth,borderCollapse,borderColor,borderEndEndRadius,borderEndStartRadius,borderImage,borderImageOutset,borderImageRepeat,borderImageSlice,borderImageSource,borderImageWidth,borderInline,borderInlineEnd,borderInlineColor,borderInlineStyle,borderInlineWidth,borderInlineEndColor,borderInlineEndStyle,borderInlineEndWidth,borderInlineStart,borderInlineStartColor,borderInlineStartStyle,borderInlineStartWidth,borderLeft,borderLeftColor,borderLeftStyle,borderLeftWidth,borderRadius,borderRight,borderRightColor,borderRightStyle,borderRightWidth,borderSpacing,borderStartEndRadius,borderStartStartRadius,borderStyle,borderTop,borderTopColor,borderTopLeftRadius,borderTopRightRadius,borderTopStyle,borderTopWidth,borderWidth,bottom,boxAlign,boxDecorationBreak,boxDirection,boxFlex,boxFlexGroup,boxLines,boxOrdinalGroup,boxOrient,boxPack,boxShadow,boxSizing,breakAfter,breakBefore,breakInside,captionSide,caret,caretColor,caretShape,clear,clip,clipPath,color,colorScheme,columnCount,columnFill,columnGap,columnRule,columnRuleColor,columnRuleStyle,columnRuleWidth,columnSpan,columnWidth,columns,contain,containIntrinsicSize,containIntrinsicBlockSize,containIntrinsicHeight,containIntrinsicInlineSize,containIntrinsicWidth,container,containerName,containerType,content,contentVisibility,counterIncrement,counterReset,counterSet,cursor,direction,display,emptyCells,filter,flex,flexBasis,flexDirection,flexFlow,flexGrow,flexShrink,flexWrap,float,font,fontFamily,fontFeatureSettings,fontKerning,fontLanguageOverride,fontOpticalSizing,fontPalette,fontVariationSettings,fontSize,fontSizeAdjust,fontSmooth,fontStretch,fontStyle,fontSynthesis,fontSynthesisPosition,fontSynthesisSmallCaps,fontSynthesisStyle,fontSynthesisWeight,fontVariant,fontVariantAlternates,fontVariantCaps,fontVariantEastAsian,fontVariantEmoji,fontVariantLigatures,fontVariantNumeric,fontVariantPosition,fontWeight,forcedColorAdjust,gap,grid,gridArea,gridAutoColumns,gridAutoFlow,gridAutoRows,gridColumn,gridColumnEnd,gridColumnGap,gridColumnStart,gridGap,gridRow,gridRowEnd,gridRowGap,gridRowStart,gridTemplate,gridTemplateAreas,gridTemplateColumns,gridTemplateRows,hangingPunctuation,height,hyphenateCharacter,hyphenateLimitChars,hyphens,imageOrientation,imageRendering,imageResolution,imeMode,initialLetter,initialLetterAlign,inlineSize,inputSecurity,inset,insetBlock,insetBlockEnd,insetBlockStart,insetInline,insetInlineEnd,insetInlineStart,isolation,justifyContent,justifyItems,justifySelf,justifyTracks,left,letterSpacing,lineBreak,lineClamp,lineHeight,lineHeightStep,listStyle,listStyleImage,listStylePosition,listStyleType,margin,marginBlock,marginBlockEnd,marginBlockStart,marginBottom,marginInline,marginInlineEnd,marginInlineStart,marginLeft,marginRight,marginTop,marginTrim,mask,maskBorder,maskBorderMode,maskBorderOutset,maskBorderRepeat,maskBorderSlice,maskBorderSource,maskBorderWidth,maskClip,maskComposite,maskImage,maskMode,maskOrigin,maskPosition,maskRepeat,maskSize,maskType,masonryAutoFlow,mathDepth,mathShift,mathStyle,maxBlockSize,maxHeight,maxInlineSize,maxLines,maxWidth,minBlockSize,minHeight,minInlineSize,minWidth,mixBlendMode,objectFit,objectPosition,offset,offsetAnchor,offsetDistance,offsetPath,offsetPosition,offsetRotate,opacity,order,orphans,outline,outlineColor,outlineOffset,outlineStyle,outlineWidth,overflow,overflowAnchor,overflowBlock,overflowClipBox,overflowClipMargin,overflowInline,overflowWrap,overflowX,overflowY,overlay,overscrollBehavior,overscrollBehaviorBlock,overscrollBehaviorInline,overscrollBehaviorX,overscrollBehaviorY,padding,paddingBlock,paddingBlockEnd,paddingBlockStart,paddingBottom,paddingInline,paddingInlineEnd,paddingInlineStart,paddingLeft,paddingRight,paddingTop,page,pageBreakAfter,pageBreakBefore,pageBreakInside,paintOrder,perspective,perspectiveOrigin,placeContent,placeItems,placeSelf,pointerEvents,position,printColorAdjust,quotes,resize,right,rotate,rowGap,rubyAlign,rubyMerge,rubyPosition,scale,scrollbarColor,scrollbarGutter,scrollbarWidth,scrollBehavior,scrollMargin,scrollMarginBlock,scrollMarginBlockStart,scrollMarginBlockEnd,scrollMarginBottom,scrollMarginInline,scrollMarginInlineStart,scrollMarginInlineEnd,scrollMarginLeft,scrollMarginRight,scrollMarginTop,scrollPadding,scrollPaddingBlock,scrollPaddingBlockStart,scrollPaddingBlockEnd,scrollPaddingBottom,scrollPaddingInline,scrollPaddingInlineStart,scrollPaddingInlineEnd,scrollPaddingLeft,scrollPaddingRight,scrollPaddingTop,scrollSnapAlign,scrollSnapCoordinate,scrollSnapDestination,scrollSnapPointsX,scrollSnapPointsY,scrollSnapStop,scrollSnapType,scrollSnapTypeX,scrollSnapTypeY,scrollTimeline,scrollTimelineAxis,scrollTimelineName,shapeImageThreshold,shapeMargin,shapeOutside,tabSize,tableLayout,textAlign,textAlignLast,textCombineUpright,textDecoration,textDecorationColor,textDecorationLine,textDecorationSkip,textDecorationSkipInk,textDecorationStyle,textDecorationThickness,textEmphasis,textEmphasisColor,textEmphasisPosition,textEmphasisStyle,textIndent,textJustify,textOrientation,textOverflow,textRendering,textShadow,textSizeAdjust,textTransform,textUnderlineOffset,textUnderlinePosition,textWrap,timelineScope,top,touchAction,transform,transformBox,transformOrigin,transformStyle,transition,transitionBehavior,transitionDelay,transitionDuration,transitionProperty,transitionTimingFunction,translate,unicodeBidi,userSelect,verticalAlign,viewTimeline,viewTimelineAxis,viewTimelineInset,viewTimelineName,viewTransitionName,visibility,whiteSpace,whiteSpaceCollapse,widows,width,willChange,wordBreak,wordSpacing,wordWrap,writingMode,zIndex,zoom,alignmentBaseline,baselineShift,clipRule,colorInterpolation,colorRendering,dominantBaseline,fill,fillOpacity,fillRule,floodColor,floodOpacity,glyphOrientationVertical,lightingColor,marker,markerEnd,markerMid,markerStart,shapeRendering,stopColor,stopOpacity,stroke,strokeDasharray,strokeDashoffset,strokeLinecap,strokeLinejoin,strokeMiterlimit,strokeOpacity,strokeWidth,textAnchor,vectorEffect",allCssProperties=cssPropertiesStr.split(",").concat(userGenerated),properties=new Map(allCssProperties.map(_e=>[_e,!0]));function memo$1(_e){const _=Object.create(null);return et=>(_[et]===void 0&&(_[et]=_e(et)),_[et])}var cssPropertySelectorRegex=/&|@/,isCssProperty=memo$1(_e=>properties.has(_e)||_e.startsWith("--")||cssPropertySelectorRegex.test(_e));const isNotNullish=_e=>_e!=null;function walkObject(_e,_,et={}){const{stop:tt,getKey:rt}=et;function it(st,at=[]){if(isObject$4(st)||Array.isArray(st)){const ct={};for(const[ut,dt]of Object.entries(st)){const ot=(rt==null?void 0:rt(ut,dt))??ut,nt=[...at,ot];if(tt!=null&&tt(st,nt))return _(st,at);const lt=it(dt,nt);isNotNullish(lt)&&(ct[ot]=lt)}return ct}return _(st,at)}return it(_e)}function mapObject(_e,_){return Array.isArray(_e)?_e.map(et=>_(et)):isObject$4(_e)?walkObject(_e,et=>_(et)):_e!=null?_(_e):_e}function flatten(_e,_){const et={};return walkObject(_e,(tt,rt)=>{tt&&(et[rt.join(".")]=tt.value)},{stop:_}),et}const memo=_e=>{const _=Object.create(null);function et(...tt){const rt=JSON.stringify(tt);return _[rt]===void 0&&(_[rt]=_e(...tt)),_[rt]}return et},BASE_FONT_SIZE=16,UNIT_PX="px",UNIT_EM="em",UNIT_REM="rem";function getUnit(_e=""){const _=new RegExp(String.raw`-?\d+(?:\.\d+|\d*)`),et=new RegExp(`${UNIT_PX}|${UNIT_EM}|${UNIT_REM}`),tt=_e.match(new RegExp(`${_.source}(${et.source})`));return tt==null?void 0:tt[1]}function toPx(_e=""){if(typeof _e=="number")return`${_e}px`;const _=getUnit(_e);if(!_||_===UNIT_PX)return _e;if(_===UNIT_EM||_===UNIT_REM)return`${parseFloat(_e)*BASE_FONT_SIZE}${UNIT_PX}`}function toRem(_e=""){const _=getUnit(_e);if(!_||_===UNIT_REM)return _e;if(_===UNIT_EM)return`${parseFloat(_e)}${UNIT_REM}`;if(_===UNIT_PX)return`${parseFloat(_e)/BASE_FONT_SIZE}${UNIT_REM}`}const capitalize=_e=>_e.charAt(0).toUpperCase()+_e.slice(1);function createBreakpoints(_e){const _=sort(_e),et=Object.fromEntries(_);function tt(nt){return et[nt]}function rt(nt){return build(tt(nt))}function it(){const nt=Object.keys(et),lt=getPermutations(nt),ht=nt.flatMap(ft=>{const gt=tt(ft),mt=[`${ft}Down`,build({max:adjust(gt.min)})],yt=[ft,build({min:gt.min})],bt=[`${ft}Only`,rt(ft)];return[yt,bt,mt]}).filter(([,ft])=>ft!=="").concat(lt.map(([ft,gt])=>{const mt=tt(ft),yt=tt(gt);return[`${ft}To${capitalize(gt)}`,build({min:mt.min,max:adjust(yt.min)})]}));return Object.fromEntries(ht)}function st(){const nt=it();return Object.fromEntries(Object.entries(nt))}const at=st(),ct=nt=>at[nt];function ut(){return["base",...Object.keys(et)]}function dt(nt){return build({min:tt(nt).min})}function ot(nt){return build({max:adjust(tt(nt).min)})}return{values:Object.values(et),only:rt,keys:ut,conditions:at,getCondition:ct,up:dt,down:ot}}function adjust(_e){const _=parseFloat(toPx(_e)??"")-.04;return toRem(`${_}px`)}function sort(_e){return Object.entries(_e).sort(([,et],[,tt])=>parseInt(et,10)<parseInt(tt,10)?-1:1).map(([et,tt],rt,it)=>{var at;let st=null;return rt<=it.length-1&&(st=(at=it[rt+1])==null?void 0:at[1]),st!=null&&(st=adjust(st)),[et,{name:et,min:toRem(tt),max:st}]})}function getPermutations(_e){const _=[];return _e.forEach((et,tt)=>{let rt=tt;rt++;let it=_e[rt];for(;it;)_.push([et,it]),rt++,it=_e[rt]}),_}function build({min:_e,max:_}){return _e==null&&_==null?"":["@media screen",_e&&`(min-width: ${_e})`,_&&`(max-width: ${_})`].filter(Boolean).join(" and ")}const mapEntries$1=(_e,_)=>Object.fromEntries(Object.entries(_e).map(([et,tt])=>_(et,tt))),createConditions=_e=>{const{breakpoints:_,conditions:et={}}=_e,tt=mapEntries$1(et,(dt,ot)=>[`_${dt}`,ot]),rt=Object.assign({},tt,_.conditions);function it(){return Object.keys(rt)}function st(dt){return it().includes(dt)||/^@|&|&$/.test(dt)||dt.startsWith("_")}function at(dt){return dt.filter(ot=>ot!=="base").sort((ot,nt)=>{const lt=st(ot),ht=st(nt);return lt&&!ht?1:!lt&&ht?-1:0})}function ct(dt){return dt.startsWith("@breakpoint")?_.getCondition(dt.replace("@breakpoint ","")):dt}function ut(dt){return Reflect.get(rt,dt)||dt}return{keys:it,sort:at,has:st,resolve:ut,breakpoints:_.keys(),expandAtRule:ct}},createMediaQueryRegex=_e=>({minMax:new RegExp(`(!?\\(\\s*min(-device-)?-${_e})(.|
)+\\(\\s*max(-device)?-${_e}`,"i"),min:new RegExp(`\\(\\s*min(-device)?-${_e}`,"i"),maxMin:new RegExp(`(!?\\(\\s*max(-device)?-${_e})(.|
)+\\(\\s*min(-device)?-${_e}`,"i"),max:new RegExp(`\\(\\s*max(-device)?-${_e}`,"i")}),widthRegex=createMediaQueryRegex("width"),heightRegex=createMediaQueryRegex("height"),createQueryTester=_e=>({isMin:_testQuery(_e.minMax,_e.maxMin,_e.min),isMax:_testQuery(_e.maxMin,_e.minMax,_e.max)}),{isMin:isMinWidth,isMax:isMaxWidth}=createQueryTester(widthRegex),{isMin:isMinHeight,isMax:isMaxHeight}=createQueryTester(heightRegex),isPrint=/print/i,isPrintOnly=/^print$/i,isLength=/(-?\d*\.?\d+)(ch|em|ex|px|rem)/,lengthExec=/(\d)/,maxValue=Number.MAX_VALUE,multipliers={ch:8.8984375,em:16,rem:16,ex:8.296875,px:1};function getQueryLength(_e){const _=isLength.exec(_e)||(isMinWidth(_e)||isMinHeight(_e)?lengthExec.exec(_e):null);if(!_)return maxValue;if(_[0]==="0")return 0;const et=parseFloat(_[1]),tt=_[2];return et*(multipliers[tt]||1)}function _testQuery(_e,_,et){return tt=>_e.test(tt)||!_.test(tt)&&et.test(tt)}function _testIsPrint(_e,_){const et=isPrint.test(_e),tt=isPrintOnly.test(_e),rt=isPrint.test(_),it=isPrintOnly.test(_);return et&&rt?!tt&&it?1:tt&&!it?-1:_e.localeCompare(_):et?1:rt?-1:null}const sortAtParams=memo((_e,_)=>{const et=_testIsPrint(_e,_);if(et!==null)return et;const tt=isMinWidth(_e)||isMinHeight(_e),rt=isMaxWidth(_e)||isMaxHeight(_e),it=isMinWidth(_)||isMinHeight(_),st=isMaxWidth(_)||isMaxHeight(_);if(tt&&st)return-1;if(rt&&it)return 1;const at=getQueryLength(_e),ct=getQueryLength(_);return at===maxValue&&ct===maxValue?_e.localeCompare(_):at===maxValue?1:ct===maxValue?-1:at!==ct?at>ct?rt?-1:1:rt?1:-1:_e.localeCompare(_)});function sortQueries(_e){return _e.sort(([_],[et])=>sortAtParams(_,et))}function sortAtRules(_e){const _=[],et=[],tt={};for(const[st,at]of Object.entries(_e))st.startsWith("@media")?_.push([st,at]):st.startsWith("@container")?et.push([st,at]):isObject$4(at)?tt[st]=sortAtRules(at):tt[st]=at;const rt=sortQueries(_),it=sortQueries(et);return{...tt,...Object.fromEntries(rt),...Object.fromEntries(it)}}const importantRegex=/\s*!(important)?/i,isImportant=_e=>isString$2(_e)?importantRegex.test(_e):!1,withoutImportant=_e=>isString$2(_e)?_e.replace(importantRegex,"").trim():_e;function createCssFn(_e){const{transform:_,conditions:et,normalize:tt}=_e,rt=mergeCss(_e);return memo((...it)=>{const st=rt(...it),at=tt(st),ct=Object.create(null);return walkObject(at,(ut,dt)=>{const ot=isImportant(ut);if(ut==null)return;const[nt,...lt]=et.sort(dt).map(et.resolve);ot&&(ut=withoutImportant(ut));let ht=_(nt,ut)??Object.create(null);ht=walkObject(ht,ft=>isString$2(ft)&&ot?`${ft} !important`:ft,{getKey:ft=>et.expandAtRule(ft)}),mergeByPath(ct,lt.flat(),ht)}),sortAtRules(ct)})}function mergeByPath(_e,_,et){let tt=_e;for(const rt of _)rt&&(tt[rt]||(tt[rt]=Object.create(null)),tt=tt[rt]);mergeWith(tt,et)}function compactFn(..._e){return _e.filter(_=>isObject$4(_)&&Object.keys(compact$3(_)).length>0)}function mergeCss(_e){function _(et){const tt=compactFn(...et);return tt.length===1?tt:tt.map(rt=>_e.normalize(rt))}return memo((...et)=>mergeWith({},..._(et)))}function omit(_e,_=[]){const et=Object.assign({},_e);for(const tt of _)tt in et&&delete et[tt];return et}const uniq=(..._e)=>{const _=_e.filter(Boolean);return Array.from(new Set(_))},defaults$2=_e=>({base:{},variants:{},defaultVariants:{},compoundVariants:[],..._e});function createRecipeFn(_e){const{css:_,conditions:et,normalize:tt,layers:rt}=_e;function it(at={}){const{base:ct,variants:ut,defaultVariants:dt,compoundVariants:ot}=defaults$2(at),nt=createCssFn({conditions:et,normalize:tt,transform(yt,bt){var _t;return(_t=ut[yt])==null?void 0:_t[bt]}}),lt=(yt={})=>{const bt=tt({...dt,...compact$3(yt)});let _t={...ct};mergeWith(_t,nt(bt));const vt=st(ot,bt);return rt.wrap("recipes",_(_t,vt))},ht=Object.keys(ut),ft=yt=>{const bt=omit(yt,["recipe"]),[_t,vt]=splitProps(bt,ht);return ht.includes("colorPalette")||(_t.colorPalette=yt.colorPalette||dt.colorPalette),ht.includes("orientation")&&(vt.orientation=yt.orientation),[_t,vt]},gt=Object.fromEntries(Object.entries(ut).map(([yt,bt])=>[yt,Object.keys(bt)]));return Object.assign(yt=>_(lt(yt)),{className:at.className,__cva__:!0,variantMap:gt,variantKeys:ht,raw:lt,config:at,splitVariantProps:ft,merge(yt){return it(mergeCva(_e)(this,yt))}})}function st(at,ct){let ut={};return at.forEach(dt=>{Object.entries(dt).every(([nt,lt])=>nt==="css"?!0:(Array.isArray(lt)?lt:[lt]).some(ft=>ct[nt]===ft))&&(ut=_(ut,dt.css))}),ut}return it}function mergeCva(_e){const{css:_}=_e;return function(tt,rt){const it=defaults$2(rt.config),st=uniq(tt.variantKeys,Object.keys(rt.variants)),at=_(tt.base,it.base),ct=Object.fromEntries(st.map(nt=>[nt,_(tt.config.variants[nt],it.variants[nt])])),ut=mergeWith(tt.config.defaultVariants,it.defaultVariants),dt=[...tt.compoundVariants,...it.compoundVariants];return{className:cx(tt.className,rt.className),base:at,variants:ct,defaultVariants:ut,compoundVariants:dt}}}const defaultLayers={reset:"reset",base:"base",tokens:"tokens",recipes:"recipes"},layerOrder={reset:0,base:1,tokens:2,recipes:3};function createLayers(_e){const _=_e.layers??defaultLayers,tt=Object.values(_).sort((rt,it)=>layerOrder[rt]-layerOrder[it]);return{names:tt,atRule:`@layer ${tt.join(", ")};`,wrap(rt,it){return _e.disableLayers?it:{[`@layer ${_[rt]}`]:it}}}}function createNormalizeFn(_e){const{utility:_,normalize:et}=_e,{hasShorthand:tt,resolveShorthand:rt}=_;return function(it){return walkObject(it,et,{stop:st=>Array.isArray(st),getKey:tt?rt:void 0})}}function createPreflight(_e){const{preflight:_}=_e;if(!_)return{};const{scope:et="",level:tt="parent"}=isObject$4(_)?_:{};let rt="";et&&tt==="parent"?rt=`${et} `:et&&tt==="element"&&(rt=`&${et}`);const it={"*":{margin:"0px",padding:"0px",font:"inherit",wordWrap:"break-word",WebkitTapHighlightColor:"transparent"},"*, *::before, *::after, *::backdrop":{boxSizing:"border-box",borderWidth:"0px",borderStyle:"solid",borderColor:"var(--global-color-border, currentColor)"},hr:{height:"0px",color:"inherit",borderTopWidth:"1px"},body:{minHeight:"100dvh",position:"relative"},img:{borderStyle:"none"},"img, svg, video, canvas, audio, iframe, embed, object":{display:"block",verticalAlign:"middle"},iframe:{border:"none"},"img, video":{maxWidth:"100%",height:"auto"},"p, h1, h2, h3, h4, h5, h6":{overflowWrap:"break-word"},"ol, ul":{listStyle:"none"},"code, kbd, pre, samp":{fontSize:"1em"},"button, [type='button'], [type='reset'], [type='submit']":{WebkitAppearance:"button",backgroundColor:"transparent",backgroundImage:"none"},"button, input, optgroup, select, textarea":{color:"inherit"},"button, select":{textTransform:"none"},table:{textIndent:"0px",borderColor:"inherit",borderCollapse:"collapse"},"*::placeholder":{opacity:"unset",color:"#9ca3af",userSelect:"none"},textarea:{resize:"vertical"},summary:{display:"list-item"},small:{fontSize:"80%"},"sub, sup":{fontSize:"75%",lineHeight:0,position:"relative",verticalAlign:"baseline"},sub:{bottom:"-0.25em"},sup:{top:"-0.5em"},dialog:{padding:"0px"},a:{color:"inherit",textDecoration:"inherit"},"abbr:where([title])":{textDecoration:"underline dotted"},"b, strong":{fontWeight:"bolder"},"code, kbd, samp, pre":{fontSize:"1em","--font-mono-fallback":"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New'",fontFamily:"var(--global-font-mono, var(--font-mono-fallback))"},'input[type="text"], input[type="email"], input[type="search"], input[type="password"]':{WebkitAppearance:"none",MozAppearance:"none"},"input[type='search']":{WebkitAppearance:"textfield",outlineOffset:"-2px"},"::-webkit-search-decoration, ::-webkit-search-cancel-button":{WebkitAppearance:"none"},"::-webkit-file-upload-button":{WebkitAppearance:"button",font:"inherit"},'input[type="number"]::-webkit-inner-spin-button, input[type="number"]::-webkit-outer-spin-button':{height:"auto"},"input[type='number']":{MozAppearance:"textfield"},":-moz-ui-invalid":{boxShadow:"none"},":-moz-focusring":{outline:"auto"},"[hidden]:where(:not([hidden='until-found']))":{display:"none !important"}},st={[et||"html"]:{lineHeight:1.5,"--font-fallback":"ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'",WebkitTextSizeAdjust:"100%",WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",textRendering:"optimizeLegibility",touchAction:"manipulation",MozTabSize:"4",tabSize:"4",fontFamily:"var(--global-font-body, var(--font-fallback))"}};if(tt==="element"){const at=Object.entries(it).reduce((ct,[ut,dt])=>(ct[ut]={[rt]:dt},ct),{});Object.assign(st,at)}else rt?st[rt]=it:Object.assign(st,it);return st}function createSerializeFn(_e){const{conditions:_,isValidProperty:et}=_e;return function(rt){return walkObject(rt,it=>it,{getKey:(it,st)=>isObject$4(st)&&!_.has(it)&&!et(it)?parseSelectors(it).map(at=>"&"+at).join(", "):it})}}function parseSelectors(_e){const _=[];let et=0,tt="",rt=!1;for(let it=0;it<_e.length;it++){const st=_e[it];if(st==="\\"&&!rt){rt=!0,tt+=st;continue}if(rt){rt=!1,tt+=st;continue}st==="("?et++:st===")"&&et--,st===","&&et===0?(_.push(tt.trim()),tt=""):tt+=st}return tt&&_.push(tt.trim()),_}const getSlotRecipes=(_e={})=>{const _=rt=>{var it;return{base:((it=_e.base)==null?void 0:it[rt])??{},variants:{},defaultVariants:_e.defaultVariants??{},compoundVariants:_e.compoundVariants?getSlotCompoundVariant(_e.compoundVariants,rt):[]}},tt=(_e.slots??[]).map(rt=>[rt,_(rt)]);for(const[rt,it]of Object.entries(_e.variants??{}))for(const[st,at]of Object.entries(it))tt.forEach(([ct,ut])=>{var dt;(dt=ut.variants)[rt]??(dt[rt]={}),ut.variants[rt][st]=at[ct]??{}});return Object.fromEntries(tt)},getSlotCompoundVariant=(_e,_)=>_e.filter(et=>et.css[_]).map(et=>({...et,css:et.css[_]}));function createSlotRecipeFn(_e){const{cva:_}=_e;return function(tt={}){const rt=Object.entries(getSlotRecipes(tt)).map(([ot,nt])=>[ot,_(nt)]);function it(ot){const nt=rt.map(([lt,ht])=>[lt,ht(ot)]);return Object.fromEntries(nt)}const st=tt.variants??{},at=Object.keys(st);function ct(ot){var ft;const nt=omit(ot,["recipe"]),[lt,ht]=splitProps(nt,at);return at.includes("colorPalette")||(lt.colorPalette=ot.colorPalette||((ft=tt.defaultVariants)==null?void 0:ft.colorPalette)),at.includes("orientation")&&(ht.orientation=ot.orientation),[lt,ht]}const ut=Object.fromEntries(Object.entries(st).map(([ot,nt])=>[ot,Object.keys(nt)]));let dt={};return tt.className&&(dt=Object.fromEntries(tt.slots.map(ot=>[ot,`${tt.className}__${ot}`]))),Object.assign(it,{variantMap:ut,variantKeys:at,splitVariantProps:ct,classNameMap:dt})}}const createProps=()=>_e=>Array.from(new Set(_e)),rcssescape=/([\0-\x1f\x7f]|^-?\d)|^-$|^-|[^\x80-\uFFFF\w-]/g,fcssescape=function(_e,_){return _?_e==="\0"?"�":_e==="-"&&_e.length===1?"\\-":_e.slice(0,-1)+"\\"+_e.charCodeAt(_e.length-1).toString(16):"\\"+_e},esc=_e=>(_e+"").replace(rcssescape,fcssescape),expandTokenReferences=(_e,_)=>{let et="",tt=0,rt="char",it="",st="";const at=[];for(;tt<_e.length;){const ct=_e[tt];if(ct==="{"){const dt=_e.indexOf("}",tt);if(dt===-1)break;const ot=_e.slice(tt+1,dt),nt=_(ot);et+=nt??ot,tt=dt+1;continue}if(rt==="token"&&ct===","){_e[tt]===""&&tt++,rt="fallback",at.push(rt);const dt=_(it);dt!=null&&dt.endsWith(")")&&(et+=dt.slice(0,-1)),it="",st="";continue}if(rt==="fallback"&&st+ct===", var("){const nt=cssVarParser(_e.slice(tt+1))+tt+1,lt=_e.slice(tt+1,nt);if(nt===-1)break;et+=", var("+lt+")",tt=nt+1,rt=at.pop()??rt,st="";continue}if(rt==="token"||rt==="fallback"){if(tt++,ct===")"){rt=at.pop()??rt??"char",st+=ct;const dt=it&&(_(it)??esc(it));if(st){if(st=st.slice(1).trim(),!st.startsWith("token(")&&st.endsWith(")")&&(st=st.slice(0,-1)),st.includes("token(")){const nt=expandTokenReferences(st,_);nt&&(st=nt.slice(0,-1))}else if(st){const nt=_(st);nt&&(st=nt)}}const ot=et.at(-1);st?ot!=null&&ot.trim()?et+=dt.slice(0,-1)+(", "+st+")"):et+=st:et+=dt||")",it="",st="",rt="char";continue}rt==="token"&&(it+=ct),rt==="fallback"&&(st+=ct);continue}const ut=_e.indexOf("token(",tt);if(ut!==-1){const dt=ut+6;et+=_e.slice(tt,ut),tt=dt,rt="token",at.push(rt);continue}et+=ct,tt++}return et},cssVarParser=_e=>{let _=0;const et=["("];for(;_<_e.length;){const tt=_e[_];if(tt==="(")et.push(tt);else if(tt===")"&&(et.pop(),et.length===0))return _;_++}return _};function mapToJson(_e){const _={};return _e.forEach((et,tt)=>{et instanceof Map?_[tt]=Object.fromEntries(et):_[tt]=et}),_}const REFERENCE_REGEX=/({([^}]*)})/g,CURLY_REGEX=/[{}]/g,TOKEN_PATH_REGEX=/\w+\.\w+/,getReferences=_e=>{if(!isString$2(_e))return[];const _=_e.match(REFERENCE_REGEX);return _?_.map(et=>et.replace(CURLY_REGEX,"")).map(et=>et.trim()):[]},hasReference=_e=>REFERENCE_REGEX.test(_e);function expandReferences(_e){var et,tt,rt;if(!((et=_e.extensions)!=null&&et.references))return((rt=(tt=_e.extensions)==null?void 0:tt.cssVar)==null?void 0:rt.ref)??_e.value;const _=_e.extensions.references??{};return _e.value=Object.keys(_).reduce((it,st)=>{const at=_[st];if(at.extensions.conditions)return it;const ct=expandReferences(at);return it.replace(`{${st}}`,ct)},_e.value),delete _e.extensions.references,_e.value}function resolveReference(_e){return isObject$4(_e)&&_e.reference?_e.reference:String(_e)}const toExpression=(_e,..._)=>_.map(resolveReference).join(` ${_e} `).replace(/calc/g,""),add=(..._e)=>`calc(${toExpression("+",..._e)})`,subtract=(..._e)=>`calc(${toExpression("-",..._e)})`,multiply=(..._e)=>`calc(${toExpression("*",..._e)})`,divide=(..._e)=>`calc(${toExpression("/",..._e)})`,negate=_e=>{const _=resolveReference(_e);return _!=null&&!Number.isNaN(parseFloat(_))?String(_).startsWith("-")?String(_).slice(1):`-${_}`:multiply(_,-1)},calc=Object.assign(_e=>({add:(..._)=>calc(add(_e,..._)),subtract:(..._)=>calc(subtract(_e,..._)),multiply:(..._)=>calc(multiply(_e,..._)),divide:(..._)=>calc(divide(_e,..._)),negate:()=>calc(negate(_e)),toString:()=>_e.toString()}),{add,subtract,multiply,divide,negate}),addNegativeTokens={enforce:"pre",transform(_e){const{prefix:_,allTokens:et,formatCssVar:tt,formatTokenName:rt,registerToken:it}=_e;et.filter(({extensions:at})=>at.category==="spacing").forEach(at=>{const ct=at.path.slice(),ut=tt(ct,_);if(isString$2(at.value)&&at.value==="0rem")return;const dt=structuredClone(at);Object.assign(dt.extensions,{negative:!0,prop:`-${at.extensions.prop}`,originalPath:ct}),dt.value=calc.negate(ut.ref);const ot=dt.path[dt.path.length-1];ot!=null&&(dt.path[dt.path.length-1]=`-${ot}`),dt.path&&(dt.name=rt(dt.path)),it(dt)})}},units=new Set(["spacing","sizes","borderWidths","fontSizes","radii"]),addPixelUnit={enforce:"post",transform(_e){_e.allTokens.filter(et=>units.has(et.extensions.category)&&!et.extensions.negative).forEach(et=>{Object.assign(et.extensions,{pixelValue:toPx(et.value)})})}},addVirtualPalette={enforce:"post",transform(_e){const{allTokens:_,registerToken:et,formatTokenName:tt}=_e,rt=_.filter(({extensions:at})=>at.category==="colors"),it=new Map,st=new Map;rt.forEach(at=>{const{colorPalette:ct}=at.extensions;ct&&(ct.keys.forEach(ut=>{it.set(tt(ut),ut)}),ct.roots.forEach(ut=>{var nt;const dt=tt(ut),ot=st.get(dt)||[];if(ot.push(at),st.set(dt,ot),at.extensions.default&&ut.length===1){const lt=(nt=ct.keys[0])==null?void 0:nt.filter(Boolean);if(!lt.length)return;const ht=ut.concat(lt);it.set(tt(ht),[])}}))}),it.forEach(at=>{const ct=["colors","colorPalette",...at].filter(Boolean),ut=tt(ct),dt=tt(ct.slice(1));et({name:ut,value:ut,originalValue:ut,path:ct,extensions:{condition:"base",originalPath:ct,category:"colors",prop:dt,virtual:!0}},"pre")})}},removeEmptyTokens={enforce:"post",transform(_e){_e.allTokens=_e.allTokens.filter(_=>_.value!=="")}},tokenMiddlewares=[addNegativeTokens,addVirtualPalette,addPixelUnit,removeEmptyTokens],addCssVariables={type:"extensions",enforce:"pre",name:"tokens/css-var",transform(_e,_){const{prefix:et,formatCssVar:tt}=_,{negative:rt,originalPath:it}=_e.extensions,st=rt?it:_e.path;return{cssVar:tt(st.filter(Boolean),et)}}},addConditionalCssVariables={enforce:"post",type:"value",name:"tokens/conditionals",transform(_e,_){const{prefix:et,formatCssVar:tt}=_,rt=getReferences(_e.value);return rt.length&&rt.forEach(it=>{const st=tt(it.split("."),et);_e.value=_e.value.replace(`{${st.ref}}`,st)}),_e.value}},addColorPalette={type:"extensions",enforce:"pre",name:"tokens/colors/colorPalette",match(_e){return _e.extensions.category==="colors"&&!_e.extensions.virtual},transform(_e,_){let et=_e.path.slice();if(et.pop(),et.shift(),et.length===0){const at=[..._e.path];at.shift(),et=at}if(et.length===0)return{};const tt=et.reduce((at,ct,ut,dt)=>{const ot=dt.slice(0,ut+1);return at.push(ot),at},[]),rt=et[0],it=_.formatTokenName(et),st=_e.path.slice(_e.path.indexOf(rt)+1).reduce((at,ct,ut,dt)=>(at.push(dt.slice(ut)),at),[]);return st.length===0&&st.push([""]),{colorPalette:{value:it,roots:tt,keys:st}}}},tokenTransforms=[addCssVariables,addConditionalCssVariables,addColorPalette],isToken=_e=>isObject$4(_e)&&Object.prototype.hasOwnProperty.call(_e,"value");function expandBreakpoints(_e){return _e?{breakpoints:mapObject(_e,_=>({value:_})),sizes:Object.fromEntries(Object.entries(_e).map(([_,et])=>[`breakpoint-${_}`,{value:et}]))}:{breakpoints:{},sizes:{}}}function createTokenDictionary(_e){const{prefix:_="",tokens:et={},semanticTokens:tt={},breakpoints:rt={}}=_e,it=Qt=>Qt.join("."),st=(Qt,Jt)=>cssVar(Qt.join("-"),{prefix:Jt}),at=[],ct=new Map,ut=new Map,dt=new Map,ot=new Map,nt=new Map,lt=new Map,ht=new Map,ft=new Map,gt=[];function mt(Qt,Jt){at.push(Qt),ct.set(Qt.name,Qt),Jt&&ft.forEach(nr=>{nr.enforce===Jt&&Ut(nr,Qt)})}const yt=expandBreakpoints(rt),bt=compact$3({...et,breakpoints:yt.breakpoints,sizes:{...et.sizes,...yt.sizes}});function _t(){walkObject(bt,(Qt,Jt)=>{const nr=Jt.includes("DEFAULT");Jt=filterDefault(Jt);const lr=Jt[0],hr=it(Jt),ur=isString$2(Qt)?{value:Qt}:Qt,mr={value:ur.value,originalValue:ur.value,name:hr,path:Jt,extensions:{condition:"base",originalPath:Jt,category:lr,prop:it(Jt.slice(1))}};nr&&(mr.extensions.default=!0),mt(mr)},{stop:isToken}),walkObject(tt,(Qt,Jt)=>{const nr=Jt.includes("DEFAULT");Jt=filterBaseCondition(filterDefault(Jt));const lr=Jt[0],hr=it(Jt),ur=isString$2(Qt.value)?{value:{base:Qt.value}}:Qt,mr={value:ur.value.base||"",originalValue:ur.value.base||"",name:hr,path:Jt,extensions:{originalPath:Jt,category:lr,conditions:ur.value,condition:"base",prop:it(Jt.slice(1))}};nr&&(mr.extensions.default=!0),mt(mr)},{stop:isToken})}function vt(Qt){return ct.get(Qt)}function xt(Qt){const{condition:Jt}=Qt.extensions;Jt&&(ut.has(Jt)||ut.set(Jt,new Set),ut.get(Jt).add(Qt))}function wt(Qt){const{category:Jt,prop:nr}=Qt.extensions;Jt&&(ht.has(Jt)||ht.set(Jt,new Map),ht.get(Jt).set(nr,Qt))}function Tt(Qt){const{condition:Jt,negative:nr,virtual:lr,cssVar:hr}=Qt.extensions;nr||lr||!Jt||!hr||(dt.has(Jt)||dt.set(Jt,new Map),dt.get(Jt).set(hr.var,Qt.value))}function St(Qt){const{category:Jt,prop:nr,cssVar:lr,negative:hr}=Qt.extensions;if(!Jt)return;lt.has(Jt)||lt.set(Jt,new Map);const ur=hr?Qt.extensions.conditions?Qt.originalValue:Qt.value:lr.ref;lt.get(Jt).set(nr,ur),nt.set([Jt,nr].join("."),ur)}function Et(Qt){const{colorPalette:Jt,virtual:nr,default:lr}=Qt.extensions;!Jt||nr||Jt.roots.forEach(hr=>{var Nr;const ur=it(hr);ot.has(ur)||ot.set(ur,new Map);const mr=replaceRootWithColorPalette([...Qt.path],[...hr]),Mr=it(mr),Fr=vt(Mr);if(!Fr||!Fr.extensions.cssVar)return;const{var:Gr}=Fr.extensions.cssVar;if(ot.get(ur).set(Gr,Qt.extensions.cssVar.ref),lr&&hr.length===1){const Jr=it(["colors","colorPalette"]),Wr=vt(Jr);if(!Wr)return;const Hr=it(Qt.path),kr=vt(Hr);if(!kr)return;const jr=(Nr=Jt.keys[0])==null?void 0:Nr.filter(Boolean);if(!jr.length)return;const Xr=it(hr.concat(jr));ot.has(Xr)||ot.set(Xr,new Map),ot.get(Xr).set(Wr.extensions.cssVar.var,kr.extensions.cssVar.ref)}})}let Ot={};function Rt(){at.forEach(Qt=>{xt(Qt),wt(Qt),Tt(Qt),St(Qt),Et(Qt)}),Ot=mapToJson(lt)}const Pt=(Qt,Jt)=>{var Fr;if(!Qt||typeof Qt!="string")return{invalid:!0,value:Qt};const[nr,lr]=Qt.split("/");if(!nr||!lr)return{invalid:!0,value:nr};const hr=Jt(nr),ur=(Fr=vt(`opacity.${lr}`))==null?void 0:Fr.value;if(!ur&&isNaN(Number(lr)))return{invalid:!0,value:nr};const mr=ur?Number(ur)*100+"%":`${lr}%`,Mr=hr??nr;return{invalid:!1,color:Mr,value:`color-mix(in srgb, ${Mr} ${mr}, transparent)`}},Mt=memo((Qt,Jt)=>nt.get(Qt)??Jt),$t=memo(Qt=>Ot[Qt]||null),kt=memo(Qt=>expandTokenReferences(Qt,Jt=>{if(!Jt)return;if(Jt.includes("/")){const lr=Pt(Jt,hr=>Mt(hr));if(lr.invalid)throw new Error("Invalid color mix at "+Jt+": "+lr.value);return lr.value}const nr=Mt(Jt);return nr||(TOKEN_PATH_REGEX.test(Jt)?esc(Jt):Jt)})),Lt={prefix:_,allTokens:at,tokenMap:ct,registerToken:mt,getByName:vt,formatTokenName:it,formatCssVar:st,flatMap:nt,cssVarMap:dt,categoryMap:ht,colorPaletteMap:ot,getVar:Mt,getCategoryValues:$t,expandReferenceInValue:kt};function Nt(...Qt){Qt.forEach(Jt=>{ft.set(Jt.name,Jt)})}function zt(...Qt){gt.push(...Qt)}function Ut(Qt,Jt){if(Jt.extensions.references||isFunction$2(Qt.match)&&!Qt.match(Jt))return;const lr=(hr=>Qt.transform(hr,Lt))(Jt);switch(!0){case Qt.type==="extensions":Object.assign(Jt.extensions,lr);break;case Qt.type==="value":Jt.value=lr;break;default:Jt[Qt.type]=lr;break}}function Vt(Qt){gt.forEach(Jt=>{Jt.enforce===Qt&&Jt.transform(Lt)})}function Ht(Qt){ft.forEach(Jt=>{Jt.enforce===Qt&&at.forEach(nr=>{Ut(Jt,nr)})})}function sr(){at.forEach(Qt=>{const Jt=getConditionalTokens(Qt);!Jt||Jt.length===0||Jt.forEach(nr=>{mt(nr)})})}function ir(Qt){return getReferences(Qt).map(nr=>vt(nr)).filter(Boolean)}function er(){at.forEach(Qt=>{if(!hasReference(Qt.value))return;const Jt=ir(Qt.value);Qt.extensions.references=Jt.reduce((nr,lr)=>(nr[lr.name]=lr,nr),{})})}function dr(){at.forEach(Qt=>{expandReferences(Qt)})}function gr(){Vt("pre"),Ht("pre"),sr(),er(),dr(),Vt("post"),Ht("post"),Rt()}return _t(),Nt(...tokenTransforms),zt(...tokenMiddlewares),gr(),Lt}function filterDefault(_e){return _e[0]==="DEFAULT"?_e:_e.filter(_=>_!=="DEFAULT")}function filterBaseCondition(_e){return _e.filter(_=>_!=="base")}function getConditionalTokens(_e){if(!_e.extensions.conditions)return;const{conditions:_}=_e.extensions,et=[];return walkObject(_,(tt,rt)=>{const it=filterBaseCondition(rt);if(!it.length)return;const st=structuredClone(_e);st.value=tt,st.extensions.condition=it.join(":"),et.push(st)}),et}function replaceRootWithColorPalette(_e,_){const et=_e.findIndex((tt,rt)=>_.every((it,st)=>_e[rt+st]===it));return et===-1||(_e.splice(et,_.length),_e.splice(et,0,"colorPalette")),_e}createProps()(["aspectRatios","zIndex","opacity","colors","fonts","fontSizes","fontWeights","lineHeights","letterSpacings","sizes","shadows","spacing","radii","cursor","borders","borderWidths","borderStyles","durations","easings","animations","blurs","gradients","breakpoints","assets"]);function normalize(_e){return _e}function normalizeConfig(_e){return Object.fromEntries(Object.entries(_e).map(([_,et])=>[_,et]))}function createUtility(_e){const _=normalizeConfig(_e.config),et=_e.tokens,tt=new Map,rt=new Map;function it(Tt,St){_[Tt]=St,st(Tt,St)}const st=(Tt,St)=>{const Et=ft(St);Et&&(rt.set(Tt,Et),ot(Tt,St))},at=()=>{for(const[Tt,St]of Object.entries(_))St&&st(Tt,St)},ct=()=>{for(const[Tt,St]of Object.entries(_)){const{shorthand:Et}=St??{};if(!Et)continue;(Array.isArray(Et)?Et:[Et]).forEach(Rt=>tt.set(Rt,Tt))}},ut=()=>{const Tt=mapToJson(et.colorPaletteMap);it("colorPalette",{values:Object.keys(Tt),transform:memo(St=>Tt[St])})},dt=new Map,ot=(Tt,St)=>{if(!St)return;const Et=ft(St,Rt=>`type:Tokens["${Rt}"]`);if(typeof Et=="object"&&Et.type){dt.set(Tt,new Set([`type:${Et.type}`]));return}if(Et){const Rt=new Set(Object.keys(Et));dt.set(Tt,Rt)}const Ot=dt.get(Tt)??new Set;St.property&&dt.set(Tt,Ot.add(`CssProperties["${St.property}"]`))},nt=()=>{for(const[Tt,St]of Object.entries(_))St&&ot(Tt,St)},lt=(Tt,St)=>{const Et=dt.get(Tt)??new Set;dt.set(Tt,new Set([...Et,...St]))},ht=()=>{const Tt=new Map;for(const[St,Et]of dt.entries()){if(Et.size===0){Tt.set(St,["string"]);continue}const Ot=Array.from(Et).map(Rt=>Rt.startsWith("CssProperties")?Rt:Rt.startsWith("type:")?Rt.replace("type:",""):JSON.stringify(Rt));Tt.set(St,Ot)}return Tt},ft=(Tt,St)=>{const{values:Et}=Tt,Ot=Rt=>{const Pt=St==null?void 0:St(Rt);return Pt?{[Pt]:Pt}:void 0};return isString$2(Et)?(Ot==null?void 0:Ot(Et))??et.getCategoryValues(Et)??{}:Array.isArray(Et)?Et.reduce((Rt,Pt)=>(Rt[Pt]=Pt,Rt),{}):isFunction$2(Et)?Et(St?Ot:et.getCategoryValues):Et},gt=memo((Tt,St)=>({[Tt]:Tt.startsWith("--")?et.getVar(St,St):St})),mt=Object.assign(et.getVar,{raw:Tt=>et.getByName(Tt)}),yt=memo((Tt,St)=>{var Mt;const Et=vt(Tt);isString$2(St)&&!St.includes("_EMO_")&&(St=et.expandReferenceInValue(St));const Ot=_[Et];if(!Ot)return gt(Et,St);const Rt=(Mt=rt.get(Et))==null?void 0:Mt[St];if(!Ot.transform)return gt(Tt,Rt??St);const Pt=$t=>colorMix($t,mt);return Ot.transform(Rt??St,{raw:St,token:mt,utils:{colorMix:Pt}})});function bt(){ct(),ut(),at(),nt()}bt();const _t=tt.size>0,vt=memo(Tt=>tt.get(Tt)??Tt);return{keys:()=>[...Array.from(tt.keys()),...Object.keys(_)],hasShorthand:_t,transform:yt,shorthands:tt,resolveShorthand:vt,register:it,getTypes:ht,addPropertyType:lt}}function createSystem(..._e){const _=mergeConfigs(..._e),{theme:et={},utilities:tt={},globalCss:rt={},cssVarsRoot:it=":where(:root, :host)",cssVarsPrefix:st="chakra",preflight:at}=_,ct=createLayers(_),ut=createTokenDictionary({breakpoints:et.breakpoints,tokens:et.tokens,semanticTokens:et.semanticTokens,prefix:st}),dt=createBreakpoints(et.breakpoints??{}),ot=createConditions({conditions:_.conditions??{},breakpoints:dt}),nt=createUtility({config:tt,tokens:ut});function lt(){const{textStyles:Nt,layerStyles:zt,animationStyles:Ut}=et,Vt=compact$3({textStyle:Nt,layerStyle:zt,animationStyle:Ut});for(const[Ht,sr]of Object.entries(Vt)){const ir=flatten(sr??{},er=>isObject$4(er)&&"value"in er);nt.register(Ht,{values:Object.keys(ir),transform(er){return bt(ir[er])}})}}lt(),nt.addPropertyType("animationName",Object.keys(et.keyframes??{}));const ht=new Set(["css",...nt.keys(),...ot.keys()]),ft=memo(Nt=>ht.has(Nt)||isCssProperty(Nt)),gt=Nt=>Array.isArray(Nt)?Nt.reduce((zt,Ut,Vt)=>{const Ht=ot.breakpoints[Vt];return Ut!=null&&(zt[Ht]=Ut),zt},{}):Nt,mt=createNormalizeFn({utility:nt,normalize:gt}),yt=createSerializeFn({conditions:ot,isValidProperty:ft}),bt=createCssFn({transform:nt.transform,conditions:ot,normalize:mt}),_t=createRecipeFn({css:bt,conditions:ot,normalize:mt,layers:ct}),vt=createSlotRecipeFn({cva:_t});function xt(){const Nt={};for(const[zt,Ut]of ut.cssVarMap.entries()){const Vt=Object.fromEntries(Ut);if(Object.keys(Vt).length===0)continue;const Ht=zt==="base"?it:ot.resolve(zt),sr=bt(yt({[Ht]:Vt}));mergeWith(Nt,sr)}return ct.wrap("tokens",Nt)}function wt(){const Nt=Object.fromEntries(Object.entries(et.keyframes??{}).map(([Ut,Vt])=>[`@keyframes ${Ut}`,Vt])),zt=Object.assign({},Nt,bt(yt(rt)));return ct.wrap("base",zt)}function Tt(Nt){return splitProps(Nt,ft)}function St(){const Nt=createPreflight({preflight:at});return ct.wrap("reset",Nt)}const Et=getTokenMap(ut),Ot=(Nt,zt)=>{var Ut;return((Ut=Et.get(Nt))==null?void 0:Ut.value)||zt};Ot.var=(Nt,zt)=>{var Ut;return((Ut=Et.get(Nt))==null?void 0:Ut.variable)||zt};function Rt(Nt,zt){var Ut;return((Ut=et.recipes)==null?void 0:Ut[Nt])??zt}function Pt(Nt,zt){var Ut;return((Ut=et.slotRecipes)==null?void 0:Ut[Nt])??zt}function Mt(Nt){return Object.hasOwnProperty.call(et.recipes??{},Nt)}function $t(Nt){return Object.hasOwnProperty.call(et.slotRecipes??{},Nt)}function kt(Nt){return Mt(Nt)||$t(Nt)}const Lt=[St(),wt(),xt()];return{$$chakra:!0,_config:_,_global:Lt,breakpoints:dt,tokens:ut,conditions:ot,utility:nt,token:Ot,properties:ht,layers:ct,isValidProperty:ft,splitCssProps:Tt,normalizeValue:gt,getTokenCss:xt,getGlobalCss:wt,getPreflightCss:St,css:bt,cva:_t,sva:vt,getRecipe:Rt,getSlotRecipe:Pt,hasRecipe:kt,isRecipe:Mt,isSlotRecipe:$t}}function getTokenMap(_e){const _=new Map;return _e.allTokens.forEach(et=>{const{cssVar:tt,virtual:rt,conditions:it}=et.extensions,st=it||rt?tt.ref:et.value;_.set(et.name,{value:st,variable:tt.ref})}),_}const breakpoints={sm:"480px",md:"768px",lg:"1024px",xl:"1280px","2xl":"1536px"},empty="var(--chakra-empty,/*!*/ /*!*/)",globalCss=defineGlobalStyles({"*":{fontFeatureSettings:'"cv11"',"--ring-inset":empty,"--ring-offset-width":"0px","--ring-offset-color":"#fff","--ring-color":"rgba(66, 153, 225, 0.6)","--ring-offset-shadow":"0 0 #0000","--ring-shadow":"0 0 #0000",...Object.fromEntries(["brightness","contrast","grayscale","hue-rotate","invert","saturate","sepia","drop-shadow"].map(_e=>[`--${_e}`,empty])),...Object.fromEntries(["blur","brightness","contrast","grayscale","hue-rotate","invert","opacity","saturate","sepia"].map(_e=>[`--backdrop-${_e}`,empty])),"--global-font-mono":"fonts.mono","--global-font-body":"fonts.body","--global-color-border":"colors.border"},html:{color:"fg",bg:"bg",lineHeight:"1.5",colorPalette:"gray"},"*::placeholder":{color:"fg.muted/80"},"*::selection":{bg:"colorPalette.muted/80"}}),layerStyles=defineLayerStyles({"fill.muted":{value:{background:"colorPalette.muted",color:"colorPalette.fg"}},"fill.subtle":{value:{background:"colorPalette.subtle",color:"colorPalette.fg"}},"fill.surface":{value:{background:"colorPalette.subtle",color:"colorPalette.fg",boxShadow:"0 0 0px 1px var(--shadow-color)",boxShadowColor:"colorPalette.muted"}},"fill.solid":{value:{background:"colorPalette.solid",color:"colorPalette.contrast"}},"outline.subtle":{value:{color:"colorPalette.fg",boxShadow:"inset 0 0 0px 1px var(--shadow-color)",boxShadowColor:"colorPalette.subtle"}},"outline.solid":{value:{borderWidth:"1px",borderColor:"colorPalette.solid",color:"colorPalette.fg"}},"indicator.bottom":{value:{position:"relative","--indicator-color-fallback":"colors.colorPalette.solid",_before:{content:'""',position:"absolute",bottom:"var(--indicator-offset-y, 0)",insetInline:"var(--indicator-offset-x, 0)",height:"var(--indicator-thickness, 2px)",background:"var(--indicator-color, var(--indicator-color-fallback))"}}},"indicator.top":{value:{position:"relative","--indicator-color-fallback":"colors.colorPalette.solid",_before:{content:'""',position:"absolute",top:"var(--indicator-offset-y, 0)",insetInline:"var(--indicator-offset-x, 0)",height:"var(--indicator-thickness, 2px)",background:"var(--indicator-color, var(--indicator-color-fallback))"}}},"indicator.start":{value:{position:"relative","--indicator-color-fallback":"colors.colorPalette.solid",_before:{content:'""',position:"absolute",insetInlineStart:"var(--indicator-offset-x, 0)",insetBlock:"var(--indicator-offset-y, 0)",width:"var(--indicator-thickness, 2px)",background:"var(--indicator-color, var(--indicator-color-fallback))"}}},"indicator.end":{value:{position:"relative","--indicator-color-fallback":"colors.colorPalette.solid",_before:{content:'""',position:"absolute",insetInlineEnd:"var(--indicator-offset-x, 0)",insetBlock:"var(--indicator-offset-y, 0)",width:"var(--indicator-thickness, 2px)",background:"var(--indicator-color, var(--indicator-color-fallback))"}}},disabled:{value:{opacity:"0.5",cursor:"not-allowed"}},none:{value:{}}}),animationStyles=defineAnimationStyles({"slide-fade-in":{value:{transformOrigin:"var(--transform-origin)","&[data-placement^=top]":{animationName:"slide-from-bottom, fade-in"},"&[data-placement^=bottom]":{animationName:"slide-from-top, fade-in"},"&[data-placement^=left]":{animationName:"slide-from-right, fade-in"},"&[data-placement^=right]":{animationName:"slide-from-left, fade-in"}}},"slide-fade-out":{value:{transformOrigin:"var(--transform-origin)","&[data-placement^=top]":{animationName:"slide-to-bottom, fade-out"},"&[data-placement^=bottom]":{animationName:"slide-to-top, fade-out"},"&[data-placement^=left]":{animationName:"slide-to-right, fade-out"},"&[data-placement^=right]":{animationName:"slide-to-left, fade-out"}}},"scale-fade-in":{value:{transformOrigin:"var(--transform-origin)",animationName:"scale-in, fade-in"}},"scale-fade-out":{value:{transformOrigin:"var(--transform-origin)",animationName:"scale-out, fade-out"}}}),badgeRecipe=defineRecipe({className:"chakra-badge",base:{display:"inline-flex",alignItems:"center",borderRadius:"l2",gap:"1",fontWeight:"medium",fontVariantNumeric:"tabular-nums",whiteSpace:"nowrap",userSelect:"none"},variants:{variant:{solid:{bg:"colorPalette.solid",color:"colorPalette.contrast"},subtle:{bg:"colorPalette.subtle",color:"colorPalette.fg"},outline:{color:"colorPalette.fg",shadow:"inset 0 0 0px 1px var(--shadow-color)",shadowColor:"colorPalette.muted"},surface:{bg:"colorPalette.subtle",color:"colorPalette.fg",shadow:"inset 0 0 0px 1px var(--shadow-color)",shadowColor:"colorPalette.muted"},plain:{color:"colorPalette.fg"}},size:{xs:{textStyle:"2xs",px:"1",minH:"4"},sm:{textStyle:"xs",px:"1.5",minH:"5"},md:{textStyle:"sm",px:"2",minH:"6"},lg:{textStyle:"sm",px:"2.5",minH:"7"}}},defaultVariants:{variant:"subtle",size:"sm"}}),buttonRecipe=defineRecipe({className:"chakra-button",base:{display:"inline-flex",appearance:"none",alignItems:"center",justifyContent:"center",userSelect:"none",position:"relative",borderRadius:"l2",whiteSpace:"nowrap",verticalAlign:"middle",borderWidth:"1px",borderColor:"transparent",cursor:"button",flexShrink:"0",outline:"0",lineHeight:"1.2",isolation:"isolate",fontWeight:"medium",transitionProperty:"common",transitionDuration:"moderate",focusVisibleRing:"outside",_disabled:{layerStyle:"disabled"},_icon:{flexShrink:"0"}},variants:{size:{"2xs":{h:"6",minW:"6",textStyle:"xs",px:"2",gap:"1",_icon:{width:"3.5",height:"3.5"}},xs:{h:"8",minW:"8",textStyle:"xs",px:"2.5",gap:"1",_icon:{width:"4",height:"4"}},sm:{h:"9",minW:"9",px:"3.5",textStyle:"sm",gap:"2",_icon:{width:"4",height:"4"}},md:{h:"10",minW:"10",textStyle:"sm",px:"4",gap:"2",_icon:{width:"5",height:"5"}},lg:{h:"11",minW:"11",textStyle:"md",px:"5",gap:"3",_icon:{width:"5",height:"5"}},xl:{h:"12",minW:"12",textStyle:"md",px:"5",gap:"2.5",_icon:{width:"5",height:"5"}},"2xl":{h:"16",minW:"16",textStyle:"lg",px:"7",gap:"3",_icon:{width:"6",height:"6"}}},variant:{solid:{bg:"colorPalette.solid",color:"colorPalette.contrast",_hover:{bg:"colorPalette.solid/90"},_expanded:{bg:"colorPalette.solid/90"}},subtle:{bg:"colorPalette.subtle",color:"colorPalette.fg",_hover:{bg:"colorPalette.muted"},_expanded:{bg:"colorPalette.muted"}},surface:{bg:"colorPalette.subtle",color:"colorPalette.fg",shadow:"0 0 0px 1px var(--shadow-color)",shadowColor:"colorPalette.muted",_hover:{bg:"colorPalette.muted"},_expanded:{bg:"colorPalette.muted"}},outline:{borderWidth:"1px",borderColor:"colorPalette.muted",color:"colorPalette.fg",_hover:{bg:"colorPalette.subtle"},_expanded:{bg:"colorPalette.subtle"}},ghost:{color:"colorPalette.fg",_hover:{bg:"colorPalette.subtle"},_expanded:{bg:"colorPalette.subtle"}},plain:{color:"colorPalette.fg"}}},defaultVariants:{size:"md",variant:"solid"}}),checkmarkRecipe=defineRecipe({className:"chakra-checkmark",base:{display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:"0",color:"white",borderWidth:"1px",borderColor:"transparent",borderRadius:"l1",focusVisibleRing:"outside",_icon:{boxSize:"full"},_invalid:{colorPalette:"red",borderColor:"border.error"},_disabled:{opacity:"0.5"}},variants:{size:{xs:{boxSize:"3"},sm:{boxSize:"4"},md:{boxSize:"5",p:"0.5"},lg:{boxSize:"6",p:"0.5"}},variant:{solid:{borderColor:"border","&:is([data-state=checked], [data-state=indeterminate])":{bg:"colorPalette.solid",color:"colorPalette.contrast",borderColor:"colorPalette.solid"}},outline:{borderColor:"border","&:is([data-state=checked], [data-state=indeterminate])":{color:"colorPalette.fg",borderColor:"colorPalette.solid"}},subtle:{bg:"colorPalette.muted",borderColor:"colorPalette.muted","&:is([data-state=checked], [data-state=indeterminate])":{color:"colorPalette.fg"}},plain:{"&:is([data-state=checked], [data-state=indeterminate])":{color:"colorPalette.fg"}},inverted:{borderColor:"border",color:"colorPalette.fg","&:is([data-state=checked], [data-state=indeterminate])":{borderColor:"colorPalette.solid"}}}},defaultVariants:{variant:"solid",size:"md"}}),{variants:variants$1,defaultVariants:defaultVariants$1}=badgeRecipe,codeRecipe=defineRecipe({className:"chakra-code",base:{fontFamily:"mono",alignItems:"center",display:"inline-flex",borderRadius:"l2"},variants:variants$1,defaultVariants:defaultVariants$1}),colorSwatchRecipe=defineRecipe({className:"color-swatch",base:{boxSize:"var(--swatch-size)",shadow:"inset 0 0 0 1px rgba(0, 0, 0, 0.1)","--checker-size":"8px","--checker-bg":"colors.bg","--checker-fg":"colors.bg.emphasized",background:"linear-gradient(var(--color), var(--color)), repeating-conic-gradient(var(--checker-fg) 0%, var(--checker-fg) 25%, var(--checker-bg) 0%, var(--checker-bg) 50%) 0% 50% / var(--checker-size) var(--checker-size) !important",display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:"0"},variants:{size:{"2xs":{"--swatch-size":"sizes.3.5"},xs:{"--swatch-size":"sizes.4"},sm:{"--swatch-size":"sizes.4.5"},md:{"--swatch-size":"sizes.5"},lg:{"--swatch-size":"sizes.6"},xl:{"--swatch-size":"sizes.7"},"2xl":{"--swatch-size":"sizes.8"},inherit:{"--swatch-size":"inherit"},full:{"--swatch-size":"100%"}},shape:{square:{borderRadius:"none"},circle:{borderRadius:"full"},rounded:{borderRadius:"l1"}}},defaultVariants:{size:"md",shape:"rounded"}}),containerRecipe=defineRecipe({className:"chakra-container",base:{position:"relative",maxWidth:"8xl",w:"100%",mx:"auto",px:{base:"4",md:"6",lg:"8"}},variants:{centerContent:{true:{display:"flex",flexDirection:"column",alignItems:"center"}},fluid:{true:{maxWidth:"full"}}}}),headingRecipe=defineRecipe({className:"chakra-heading",base:{fontFamily:"heading",fontWeight:"semibold"},variants:{size:{xs:{textStyle:"xs"},sm:{textStyle:"sm"},md:{textStyle:"md"},lg:{textStyle:"lg"},xl:{textStyle:"xl"},"2xl":{textStyle:"2xl"},"3xl":{textStyle:"3xl"},"4xl":{textStyle:"4xl"},"5xl":{textStyle:"5xl"},"6xl":{textStyle:"6xl"},"7xl":{textStyle:"7xl"}}},defaultVariants:{size:"xl"}}),iconRecipe=defineRecipe({className:"chakra-icon",base:{display:"inline-block",lineHeight:"1em",flexShrink:"0",color:"currentcolor",verticalAlign:"middle"},variants:{size:{inherit:{},xs:{boxSize:"3"},sm:{boxSize:"4"},md:{boxSize:"5"},lg:{boxSize:"6"},xl:{boxSize:"7"},"2xl":{boxSize:"8"}}},defaultVariants:{size:"inherit"}}),inputRecipe=defineRecipe({className:"chakra-input",base:{width:"100%",minWidth:"0",outline:"0",position:"relative",appearance:"none",textAlign:"start",borderRadius:"l2",_disabled:{layerStyle:"disabled"},height:"var(--input-height)",minW:"var(--input-height)","--focus-color":"colors.colorPalette.focusRing","--error-color":"colors.border.error",_invalid:{focusRingColor:"var(--error-color)",borderColor:"var(--error-color)"}},variants:{size:{"2xs":{textStyle:"xs",px:"2","--input-height":"sizes.7"},xs:{textStyle:"xs",px:"2","--input-height":"sizes.8"},sm:{textStyle:"sm",px:"2.5","--input-height":"sizes.9"},md:{textStyle:"sm",px:"3","--input-height":"sizes.10"},lg:{textStyle:"md",px:"4","--input-height":"sizes.11"},xl:{textStyle:"md",px:"4.5","--input-height":"sizes.12"},"2xl":{textStyle:"lg",px:"5","--input-height":"sizes.16"}},variant:{outline:{bg:"transparent",borderWidth:"1px",borderColor:"border",focusVisibleRing:"inside"},subtle:{borderWidth:"1px",borderColor:"transparent",bg:"bg.muted",focusVisibleRing:"inside"},flushed:{bg:"transparent",borderBottomWidth:"1px",borderBottomColor:"border",borderRadius:"0",px:"0",_focusVisible:{borderColor:"var(--focus-color)",boxShadow:"0px 1px 0px 0px var(--focus-color)"}}}},defaultVariants:{size:"md",variant:"outline"}}),inputAddonRecipe=defineRecipe({className:"chakra-input-addon",base:{flex:"0 0 auto",width:"auto",display:"flex",alignItems:"center",whiteSpace:"nowrap",alignSelf:"stretch",borderRadius:"l2"},variants:{size:inputRecipe.variants.size,variant:{outline:{borderWidth:"1px",borderColor:"border",bg:"bg.muted"},subtle:{borderWidth:"1px",borderColor:"transparent",bg:"bg.emphasized"},flushed:{borderBottom:"1px solid",borderColor:"inherit",borderRadius:"0",px:"0",bg:"transparent"}}},defaultVariants:{size:"md",variant:"outline"}}),kbdRecipe=defineRecipe({className:"chakra-kbd",base:{display:"inline-flex",alignItems:"center",fontWeight:"medium",fontFamily:"mono",flexShrink:"0",whiteSpace:"nowrap",wordSpacing:"-0.5em",userSelect:"none",px:"1",borderRadius:"l2"},variants:{variant:{raised:{bg:"colorPalette.subtle",color:"colorPalette.fg",borderWidth:"1px",borderBottomWidth:"2px",borderColor:"colorPalette.muted"},outline:{borderWidth:"1px",color:"colorPalette.fg"},subtle:{bg:"colorPalette.muted",color:"colorPalette.fg"},plain:{color:"colorPalette.fg"}},size:{sm:{textStyle:"xs",height:"4.5"},md:{textStyle:"sm",height:"5"},lg:{textStyle:"md",height:"6"}}},defaultVariants:{size:"md",variant:"raised"}}),linkRecipe=defineRecipe({className:"chakra-link",base:{display:"inline-flex",alignItems:"center",outline:"none",gap:"1.5",cursor:"pointer",borderRadius:"l1",focusRing:"outside"},variants:{variant:{underline:{color:"colorPalette.fg",textDecoration:"underline",textUnderlineOffset:"3px",textDecorationColor:"currentColor/20"},plain:{color:"colorPalette.fg",_hover:{textDecoration:"underline",textUnderlineOffset:"3px",textDecorationColor:"currentColor/20"}}}},defaultVariants:{variant:"plain"}}),markRecipe=defineRecipe({className:"chakra-mark",base:{bg:"transparent",color:"inherit",whiteSpace:"nowrap"},variants:{variant:{subtle:{bg:"colorPalette.subtle",color:"inherit"},solid:{bg:"colorPalette.solid",color:"colorPalette.contrast"},text:{fontWeight:"medium"},plain:{}}}}),radiomarkRecipe=defineRecipe({className:"chakra-radiomark",base:{display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:0,verticalAlign:"top",color:"white",borderWidth:"1px",borderColor:"transparent",borderRadius:"full",cursor:"radio",_focusVisible:{outline:"2px solid",outlineColor:"colorPalette.focusRing",outlineOffset:"2px"},_invalid:{colorPalette:"red",borderColor:"red.500"},_disabled:{opacity:"0.5",cursor:"disabled"},"& .dot":{height:"100%",width:"100%",borderRadius:"full",bg:"currentColor",scale:"0.4"}},variants:{variant:{solid:{borderWidth:"1px",borderColor:"border",_checked:{bg:"colorPalette.solid",color:"colorPalette.contrast",borderColor:"colorPalette.solid"}},subtle:{borderWidth:"1px",bg:"colorPalette.muted",borderColor:"colorPalette.muted",color:"transparent",_checked:{color:"colorPalette.fg"}},outline:{borderWidth:"1px",borderColor:"inherit",_checked:{color:"colorPalette.fg",borderColor:"colorPalette.solid"},"& .dot":{scale:"0.6"}},inverted:{bg:"bg",borderWidth:"1px",borderColor:"inherit",_checked:{color:"colorPalette.solid",borderColor:"currentcolor"}}},size:{xs:{boxSize:"3"},sm:{boxSize:"4"},md:{boxSize:"5"},lg:{boxSize:"6"}}},defaultVariants:{variant:"solid",size:"md"}}),separatorRecipe=defineRecipe({className:"chakra-separator",base:{display:"block",borderColor:"border"},variants:{variant:{solid:{borderStyle:"solid"},dashed:{borderStyle:"dashed"},dotted:{borderStyle:"dotted"}},orientation:{vertical:{borderInlineStartWidth:"var(--separator-thickness)"},horizontal:{borderTopWidth:"var(--separator-thickness)"}},size:{xs:{"--separator-thickness":"0.5px"},sm:{"--separator-thickness":"1px"},md:{"--separator-thickness":"2px"},lg:{"--separator-thickness":"3px"}}},defaultVariants:{size:"sm",variant:"solid",orientation:"horizontal"}}),skeletonRecipe=defineRecipe({className:"chakra-skeleton",base:{},variants:{loading:{true:{borderRadius:"l2",boxShadow:"none",backgroundClip:"padding-box",cursor:"default",color:"transparent",pointerEvents:"none",userSelect:"none",flexShrink:"0","&::before, &::after, *":{visibility:"hidden"}},false:{background:"unset",animation:"fade-in var(--fade-duration, 0.1s) ease-out !important"}},variant:{pulse:{background:"bg.emphasized",animation:"pulse",animationDuration:"var(--duration, 1.2s)"},shine:{"--animate-from":"200%","--animate-to":"-200%","--start-color":"colors.bg.muted","--end-color":"colors.bg.emphasized",backgroundImage:"linear-gradient(270deg,var(--start-color),var(--end-color),var(--end-color),var(--start-color))",backgroundSize:"400% 100%",animation:"bg-position var(--duration, 5s) ease-in-out infinite"},none:{animation:"none"}}},defaultVariants:{variant:"pulse",loading:!0}}),skipNavLinkRecipe=defineRecipe({className:"chakra-skip-nav",base:{display:"inline-flex",bg:"bg.panel",padding:"2.5",borderRadius:"l2",fontWeight:"semibold",focusVisibleRing:"outside",textStyle:"sm",userSelect:"none",border:"0",height:"1px",width:"1px",margin:"-1px",outline:"0",overflow:"hidden",position:"absolute",clip:"rect(0 0 0 0)",_focusVisible:{clip:"auto",width:"auto",height:"auto",position:"fixed",top:"6",insetStart:"6"}}}),spinnerRecipe=defineRecipe({className:"chakra-spinner",base:{display:"inline-block",borderColor:"currentColor",borderStyle:"solid",borderWidth:"2px",borderRadius:"full",width:"var(--spinner-size)",height:"var(--spinner-size)",animation:"spin",animationDuration:"slowest","--spinner-track-color":"transparent",borderBottomColor:"var(--spinner-track-color)",borderInlineStartColor:"var(--spinner-track-color)"},variants:{size:{inherit:{"--spinner-size":"1em"},xs:{"--spinner-size":"sizes.3"},sm:{"--spinner-size":"sizes.4"},md:{"--spinner-size":"sizes.5"},lg:{"--spinner-size":"sizes.8"},xl:{"--spinner-size":"sizes.10"}}},defaultVariants:{size:"md"}}),textareaRecipe=defineRecipe({className:"chakra-textarea",base:{width:"100%",minWidth:"0",outline:"0",position:"relative",appearance:"none",textAlign:"start",borderRadius:"l2",_disabled:{layerStyle:"disabled"},"--focus-color":"colors.colorPalette.focusRing","--error-color":"colors.border.error",_invalid:{focusRingColor:"var(--error-color)",borderColor:"var(--error-color)"}},variants:{size:{xs:{textStyle:"xs",px:"2",py:"1.5",scrollPaddingBottom:"1.5"},sm:{textStyle:"sm",px:"2.5",py:"2",scrollPaddingBottom:"2"},md:{textStyle:"sm",px:"3",py:"2",scrollPaddingBottom:"2"},lg:{textStyle:"md",px:"4",py:"3",scrollPaddingBottom:"3"},xl:{textStyle:"md",px:"4.5",py:"3.5",scrollPaddingBottom:"3.5"}},variant:{outline:{bg:"transparent",borderWidth:"1px",borderColor:"border",focusVisibleRing:"inside"},subtle:{borderWidth:"1px",borderColor:"transparent",bg:"bg.muted",focusVisibleRing:"inside"},flushed:{bg:"transparent",borderBottomWidth:"1px",borderBottomColor:"border",borderRadius:"0",px:"0",_focusVisible:{borderColor:"var(--focus-color)",boxShadow:"0px 1px 0px 0px var(--focus-color)"}}}},defaultVariants:{size:"md",variant:"outline"}}),recipes={badge:badgeRecipe,button:buttonRecipe,code:codeRecipe,container:containerRecipe,heading:headingRecipe,input:inputRecipe,inputAddon:inputAddonRecipe,kbd:kbdRecipe,link:linkRecipe,mark:markRecipe,separator:separatorRecipe,skeleton:skeletonRecipe,skipNavLink:skipNavLinkRecipe,spinner:spinnerRecipe,textarea:textareaRecipe,icon:iconRecipe,checkmark:checkmarkRecipe,radiomark:radiomarkRecipe,colorSwatch:colorSwatchRecipe},semanticColors=defineSemanticTokens.colors({bg:{DEFAULT:{value:{_light:"{colors.white}",_dark:"{colors.black}"}},subtle:{value:{_light:"{colors.gray.50}",_dark:"{colors.gray.950}"}},muted:{value:{_light:"{colors.gray.100}",_dark:"{colors.gray.900}"}},emphasized:{value:{_light:"{colors.gray.200}",_dark:"{colors.gray.800}"}},inverted:{value:{_light:"{colors.black}",_dark:"{colors.white}"}},panel:{value:{_light:"{colors.white}",_dark:"{colors.gray.950}"}},error:{value:{_light:"{colors.red.50}",_dark:"{colors.red.950}"}},warning:{value:{_light:"{colors.orange.50}",_dark:"{colors.orange.950}"}},success:{value:{_light:"{colors.green.50}",_dark:"{colors.green.950}"}},info:{value:{_light:"{colors.blue.50}",_dark:"{colors.blue.950}"}}},fg:{DEFAULT:{value:{_light:"{colors.black}",_dark:"{colors.gray.50}"}},muted:{value:{_light:"{colors.gray.600}",_dark:"{colors.gray.400}"}},subtle:{value:{_light:"{colors.gray.400}",_dark:"{colors.gray.500}"}},inverted:{value:{_light:"{colors.gray.50}",_dark:"{colors.black}"}},error:{value:{_light:"{colors.red.500}",_dark:"{colors.red.400}"}},warning:{value:{_light:"{colors.orange.600}",_dark:"{colors.orange.300}"}},success:{value:{_light:"{colors.green.600}",_dark:"{colors.green.300}"}},info:{value:{_light:"{colors.blue.600}",_dark:"{colors.blue.300}"}}},border:{DEFAULT:{value:{_light:"{colors.gray.200}",_dark:"{colors.gray.800}"}},muted:{value:{_light:"{colors.gray.100}",_dark:"{colors.gray.900}"}},subtle:{value:{_light:"{colors.gray.50}",_dark:"{colors.gray.950}"}},emphasized:{value:{_light:"{colors.gray.300}",_dark:"{colors.gray.700}"}},inverted:{value:{_light:"{colors.gray.800}",_dark:"{colors.gray.200}"}},error:{value:{_light:"{colors.red.500}",_dark:"{colors.red.400}"}},warning:{value:{_light:"{colors.orange.500}",_dark:"{colors.orange.400}"}},success:{value:{_light:"{colors.green.500}",_dark:"{colors.green.400}"}},info:{value:{_light:"{colors.blue.500}",_dark:"{colors.blue.400}"}}},gray:{contrast:{value:{_light:"{colors.white}",_dark:"{colors.black}"}},fg:{value:{_light:"{colors.gray.800}",_dark:"{colors.gray.200}"}},subtle:{value:{_light:"{colors.gray.100}",_dark:"{colors.gray.900}"}},muted:{value:{_light:"{colors.gray.200}",_dark:"{colors.gray.800}"}},emphasized:{value:{_light:"{colors.gray.300}",_dark:"{colors.gray.700}"}},solid:{value:{_light:"{colors.gray.900}",_dark:"{colors.white}"}},focusRing:{value:{_light:"{colors.gray.800}",_dark:"{colors.gray.200}"}}},red:{contrast:{value:{_light:"white",_dark:"white"}},fg:{value:{_light:"{colors.red.700}",_dark:"{colors.red.300}"}},subtle:{value:{_light:"{colors.red.100}",_dark:"{colors.red.900}"}},muted:{value:{_light:"{colors.red.200}",_dark:"{colors.red.800}"}},emphasized:{value:{_light:"{colors.red.300}",_dark:"{colors.red.700}"}},solid:{value:{_light:"{colors.red.600}",_dark:"{colors.red.600}"}},focusRing:{value:{_light:"{colors.red.600}",_dark:"{colors.red.600}"}}},orange:{contrast:{value:{_light:"white",_dark:"black"}},fg:{value:{_light:"{colors.orange.700}",_dark:"{colors.orange.300}"}},subtle:{value:{_light:"{colors.orange.100}",_dark:"{colors.orange.900}"}},muted:{value:{_light:"{colors.orange.200}",_dark:"{colors.orange.800}"}},emphasized:{value:{_light:"{colors.orange.300}",_dark:"{colors.orange.700}"}},solid:{value:{_light:"{colors.orange.600}",_dark:"{colors.orange.500}"}},focusRing:{value:{_light:"{colors.orange.600}",_dark:"{colors.orange.500}"}}},green:{contrast:{value:{_light:"white",_dark:"white"}},fg:{value:{_light:"{colors.green.700}",_dark:"{colors.green.300}"}},subtle:{value:{_light:"{colors.green.100}",_dark:"{colors.green.900}"}},muted:{value:{_light:"{colors.green.200}",_dark:"{colors.green.800}"}},emphasized:{value:{_light:"{colors.green.300}",_dark:"{colors.green.700}"}},solid:{value:{_light:"{colors.green.600}",_dark:"{colors.green.600}"}},focusRing:{value:{_light:"{colors.green.600}",_dark:"{colors.green.600}"}}},blue:{contrast:{value:{_light:"white",_dark:"white"}},fg:{value:{_light:"{colors.blue.700}",_dark:"{colors.blue.300}"}},subtle:{value:{_light:"{colors.blue.100}",_dark:"{colors.blue.900}"}},muted:{value:{_light:"{colors.blue.200}",_dark:"{colors.blue.800}"}},emphasized:{value:{_light:"{colors.blue.300}",_dark:"{colors.blue.700}"}},solid:{value:{_light:"{colors.blue.600}",_dark:"{colors.blue.600}"}},focusRing:{value:{_light:"{colors.blue.600}",_dark:"{colors.blue.600}"}}},yellow:{contrast:{value:{_light:"black",_dark:"black"}},fg:{value:{_light:"{colors.yellow.800}",_dark:"{colors.yellow.300}"}},subtle:{value:{_light:"{colors.yellow.100}",_dark:"{colors.yellow.900}"}},muted:{value:{_light:"{colors.yellow.200}",_dark:"{colors.yellow.800}"}},emphasized:{value:{_light:"{colors.yellow.300}",_dark:"{colors.yellow.700}"}},solid:{value:{_light:"{colors.yellow.300}",_dark:"{colors.yellow.300}"}},focusRing:{value:{_light:"{colors.yellow.300}",_dark:"{colors.yellow.300}"}}},teal:{contrast:{value:{_light:"white",_dark:"white"}},fg:{value:{_light:"{colors.teal.700}",_dark:"{colors.teal.300}"}},subtle:{value:{_light:"{colors.teal.100}",_dark:"{colors.teal.900}"}},muted:{value:{_light:"{colors.teal.200}",_dark:"{colors.teal.800}"}},emphasized:{value:{_light:"{colors.teal.300}",_dark:"{colors.teal.700}"}},solid:{value:{_light:"{colors.teal.600}",_dark:"{colors.teal.600}"}},focusRing:{value:{_light:"{colors.teal.600}",_dark:"{colors.teal.600}"}}},purple:{contrast:{value:{_light:"white",_dark:"white"}},fg:{value:{_light:"{colors.purple.700}",_dark:"{colors.purple.300}"}},subtle:{value:{_light:"{colors.purple.100}",_dark:"{colors.purple.900}"}},muted:{value:{_light:"{colors.purple.200}",_dark:"{colors.purple.800}"}},emphasized:{value:{_light:"{colors.purple.300}",_dark:"{colors.purple.700}"}},solid:{value:{_light:"{colors.purple.600}",_dark:"{colors.purple.600}"}},focusRing:{value:{_light:"{colors.purple.600}",_dark:"{colors.purple.600}"}}},pink:{contrast:{value:{_light:"white",_dark:"white"}},fg:{value:{_light:"{colors.pink.700}",_dark:"{colors.pink.300}"}},subtle:{value:{_light:"{colors.pink.100}",_dark:"{colors.pink.900}"}},muted:{value:{_light:"{colors.pink.200}",_dark:"{colors.pink.800}"}},emphasized:{value:{_light:"{colors.pink.300}",_dark:"{colors.pink.700}"}},solid:{value:{_light:"{colors.pink.600}",_dark:"{colors.pink.600}"}},focusRing:{value:{_light:"{colors.pink.600}",_dark:"{colors.pink.600}"}}},cyan:{contrast:{value:{_light:"white",_dark:"white"}},fg:{value:{_light:"{colors.cyan.700}",_dark:"{colors.cyan.300}"}},subtle:{value:{_light:"{colors.cyan.100}",_dark:"{colors.cyan.900}"}},muted:{value:{_light:"{colors.cyan.200}",_dark:"{colors.cyan.800}"}},emphasized:{value:{_light:"{colors.cyan.300}",_dark:"{colors.cyan.700}"}},solid:{value:{_light:"{colors.cyan.600}",_dark:"{colors.cyan.600}"}},focusRing:{value:{_light:"{colors.cyan.600}",_dark:"{colors.cyan.600}"}}}}),semanticRadii=defineSemanticTokens.radii({l1:{value:"{radii.xs}"},l2:{value:"{radii.sm}"},l3:{value:"{radii.md}"}}),semanticShadows=defineSemanticTokens.shadows({xs:{value:{_light:"0px 1px 2px {colors.gray.900/10}, 0px 0px 1px {colors.gray.900/20}",_dark:"0px 1px 1px {black/64}, 0px 0px 1px inset {colors.gray.300/20}"}},sm:{value:{_light:"0px 2px 4px {colors.gray.900/10}, 0px 0px 1px {colors.gray.900/30}",_dark:"0px 2px 4px {black/64}, 0px 0px 1px inset {colors.gray.300/30}"}},md:{value:{_light:"0px 4px 8px {colors.gray.900/10}, 0px 0px 1px {colors.gray.900/30}",_dark:"0px 4px 8px {black/64}, 0px 0px 1px inset {colors.gray.300/30}"}},lg:{value:{_light:"0px 8px 16px {colors.gray.900/10}, 0px 0px 1px {colors.gray.900/30}",_dark:"0px 8px 16px {black/64}, 0px 0px 1px inset {colors.gray.300/30}"}},xl:{value:{_light:"0px 16px 24px {colors.gray.900/10}, 0px 0px 1px {colors.gray.900/30}",_dark:"0px 16px 24px {black/64}, 0px 0px 1px inset {colors.gray.300/30}"}},"2xl":{value:{_light:"0px 24px 40px {colors.gray.900/16}, 0px 0px 1px {colors.gray.900/30}",_dark:"0px 24px 40px {black/64}, 0px 0px 1px inset {colors.gray.300/30}"}},inner:{value:{_light:"inset 0 2px 4px 0 {black/5}",_dark:"inset 0 2px 4px 0 black"}},inset:{value:{_light:"inset 0 0 0 1px {black/5}",_dark:"inset 0 0 0 1px {colors.gray.300/5}"}}});var createAnatomy=(_e,_=[])=>({parts:(...et)=>{if(isEmpty(_))return createAnatomy(_e,et);throw new Error("createAnatomy().parts(...) should only be called once. Did you mean to use .extendWith(...) ?")},extendWith:(...et)=>createAnatomy(_e,[..._,...et]),rename:et=>createAnatomy(et,_),keys:()=>_,build:()=>[...new Set(_)].reduce((et,tt)=>Object.assign(et,{[tt]:{selector:[`&[data-scope="${toKebabCase(_e)}"][data-part="${toKebabCase(tt)}"]`,`& [data-scope="${toKebabCase(_e)}"][data-part="${toKebabCase(tt)}"]`].join(", "),attrs:{"data-scope":toKebabCase(_e),"data-part":toKebabCase(tt)}}}),{})}),toKebabCase=_e=>_e.replace(/([A-Z])([A-Z])/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[\s_]+/g,"-").toLowerCase(),isEmpty=_e=>_e.length===0,anatomy$l=createAnatomy("accordion").parts("root","item","itemTrigger","itemContent","itemIndicator");anatomy$l.build();var dom$k=createScope({getRootId:_e=>{var _;return((_=_e.ids)==null?void 0:_.root)??`accordion:${_e.id}`},getItemId:(_e,_)=>{var et,tt;return((tt=(et=_e.ids)==null?void 0:et.item)==null?void 0:tt.call(et,_))??`accordion:${_e.id}:item:${_}`},getItemContentId:(_e,_)=>{var et,tt;return((tt=(et=_e.ids)==null?void 0:et.itemContent)==null?void 0:tt.call(et,_))??`accordion:${_e.id}:content:${_}`},getItemTriggerId:(_e,_)=>{var et,tt;return((tt=(et=_e.ids)==null?void 0:et.itemTrigger)==null?void 0:tt.call(et,_))??`accordion:${_e.id}:trigger:${_}`},getRootEl:_e=>dom$k.getById(_e,dom$k.getRootId(_e)),getTriggerEls:_e=>{const et=`[aria-controls][data-ownedby='${CSS.escape(dom$k.getRootId(_e))}']:not([disabled])`;return queryAll(dom$k.getRootEl(_e),et)},getFirstTriggerEl:_e=>first(dom$k.getTriggerEls(_e)),getLastTriggerEl:_e=>last(dom$k.getTriggerEls(_e)),getNextTriggerEl:(_e,_)=>nextById(dom$k.getTriggerEls(_e),dom$k.getItemTriggerId(_e,_)),getPrevTriggerEl:(_e,_)=>prevById(dom$k.getTriggerEls(_e),dom$k.getItemTriggerId(_e,_))});createProps$1()(["collapsible","dir","disabled","getRootNode","id","ids","multiple","onFocusChange","onValueChange","orientation","value"]);createProps$1()(["value","disabled"]);var anatomy$k=createAnatomy("collapsible").parts("root","trigger","content");anatomy$k.build();var dom$j=createScope({getRootId:_e=>{var _;return((_=_e.ids)==null?void 0:_.root)??`collapsible:${_e.id}`},getContentId:_e=>{var _;return((_=_e.ids)==null?void 0:_.content)??`collapsible:${_e.id}:content`},getTriggerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.trigger)??`collapsible:${_e.id}:trigger`},getRootEl:_e=>dom$j.getById(_e,dom$j.getRootId(_e)),getContentEl:_e=>dom$j.getById(_e,dom$j.getContentId(_e)),getTriggerEl:_e=>dom$j.getById(_e,dom$j.getTriggerId(_e))});createProps$1()(["dir","disabled","getRootNode","id","ids","onExitComplete","onOpenChange","open.controlled","open"]);const[EnvironmentContextProvider,useEnvironmentContext]=createContext({name:"EnvironmentContext",hookName:"useEnvironmentContext",providerName:"<EnvironmentProvider />",strict:!1,defaultValue:{getRootNode:()=>document,getDocument:()=>document,getWindow:()=>window}});var layerStack={layers:[],branches:[],count(){return this.layers.length},pointerBlockingLayers(){return this.layers.filter(_e=>_e.pointerBlocking)},topMostPointerBlockingLayer(){return[...this.pointerBlockingLayers()].slice(-1)[0]},hasPointerBlockingLayer(){return this.pointerBlockingLayers().length>0},isBelowPointerBlockingLayer(_e){var tt;const _=this.indexOf(_e),et=this.topMostPointerBlockingLayer()?this.indexOf((tt=this.topMostPointerBlockingLayer())==null?void 0:tt.node):-1;return _<et},isTopMost(_e){const _=this.layers[this.count()-1];return(_==null?void 0:_.node)===_e},getNestedLayers(_e){return Array.from(this.layers).slice(this.indexOf(_e)+1)},isInNestedLayer(_e,_){return this.getNestedLayers(_e).some(et=>contains(et.node,_))},isInBranch(_e){return Array.from(this.branches).some(_=>contains(_,_e))},add(_e){const _=this.layers.push(_e);_e.node.style.setProperty("--layer-index",`${_}`)},addBranch(_e){this.branches.push(_e)},remove(_e){const _=this.indexOf(_e);_<0||(_<this.count()-1&&this.getNestedLayers(_e).forEach(tt=>tt.dismiss()),this.layers.splice(_,1),_e.style.removeProperty("--layer-index"))},removeBranch(_e){const _=this.branches.indexOf(_e);_>=0&&this.branches.splice(_,1)},indexOf(_e){return this.layers.findIndex(_=>_.node===_e)},dismiss(_e){var _;(_=this.layers[this.indexOf(_e)])==null||_.dismiss()},clear(){this.remove(this.layers[0].node)}};function trackDismissableBranch(_e,_={}){const{defer:et}=_,tt=et?raf:it=>it(),rt=[];return rt.push(tt(()=>{const it=isFunction$1(_e)?_e():_e;if(!it){warn("[@zag-js/dismissable] branch node is `null` or `undefined`");return}layerStack.addBranch(it),rt.push(()=>{layerStack.removeBranch(it)})})),()=>{tt(()=>{rt.forEach(it=>it==null?void 0:it())})}}var anatomy$j=createAnatomy("color-picker",["root","label","control","trigger","positioner","content","area","areaThumb","valueText","areaBackground","channelSlider","channelSliderLabel","channelSliderTrack","channelSliderThumb","channelSliderValueText","channelInput","transparencyGrid","swatchGroup","swatchTrigger","swatchIndicator","swatch","eyeDropperTrigger","formatTrigger","formatSelect"]);anatomy$j.build();var dom$i=createScope({getRootId:_e=>{var _;return((_=_e.ids)==null?void 0:_.root)??`color-picker:${_e.id}`},getLabelId:_e=>{var _;return((_=_e.ids)==null?void 0:_.label)??`color-picker:${_e.id}:label`},getHiddenInputId:_e=>{var _;return((_=_e.ids)==null?void 0:_.hiddenInput)??`color-picker:${_e.id}:hidden-input`},getControlId:_e=>{var _;return((_=_e.ids)==null?void 0:_.control)??`color-picker:${_e.id}:control`},getTriggerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.trigger)??`color-picker:${_e.id}:trigger`},getContentId:_e=>{var _;return((_=_e.ids)==null?void 0:_.content)??`color-picker:${_e.id}:content`},getPositionerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.positioner)??`color-picker:${_e.id}:positioner`},getFormatSelectId:_e=>{var _;return((_=_e.ids)==null?void 0:_.formatSelect)??`color-picker:${_e.id}:format-select`},getAreaId:_e=>{var _;return((_=_e.ids)==null?void 0:_.area)??`color-picker:${_e.id}:area`},getAreaGradientId:_e=>{var _;return((_=_e.ids)==null?void 0:_.areaGradient)??`color-picker:${_e.id}:area-gradient`},getAreaThumbId:_e=>{var _;return((_=_e.ids)==null?void 0:_.areaThumb)??`color-picker:${_e.id}:area-thumb`},getChannelSliderTrackId:(_e,_)=>{var et,tt;return((tt=(et=_e.ids)==null?void 0:et.channelSliderTrack)==null?void 0:tt.call(et,_))??`color-picker:${_e.id}:slider-track:${_}`},getChannelSliderThumbId:(_e,_)=>{var et,tt;return((tt=(et=_e.ids)==null?void 0:et.channelSliderThumb)==null?void 0:tt.call(et,_))??`color-picker:${_e.id}:slider-thumb:${_}`},getContentEl:_e=>dom$i.getById(_e,dom$i.getContentId(_e)),getAreaThumbEl:_e=>dom$i.getById(_e,dom$i.getAreaThumbId(_e)),getChannelSliderThumbEl:(_e,_)=>dom$i.getById(_e,dom$i.getChannelSliderThumbId(_e,_)),getChannelInputEl:(_e,_)=>{const et=`input[data-channel="${_}"]`;return[...queryAll(dom$i.getContentEl(_e),et),...queryAll(dom$i.getControlEl(_e),et)]},getFormatSelectEl:_e=>dom$i.getById(_e,dom$i.getFormatSelectId(_e)),getHiddenInputEl:_e=>dom$i.getById(_e,dom$i.getHiddenInputId(_e)),getAreaEl:_e=>dom$i.getById(_e,dom$i.getAreaId(_e)),getAreaValueFromPoint(_e,_){const et=dom$i.getAreaEl(_e);if(!et)return;const{percent:tt}=getRelativePoint(_,et);return tt},getControlEl:_e=>dom$i.getById(_e,dom$i.getControlId(_e)),getTriggerEl:_e=>dom$i.getById(_e,dom$i.getTriggerId(_e)),getPositionerEl:_e=>dom$i.getById(_e,dom$i.getPositionerId(_e)),getChannelSliderTrackEl:(_e,_)=>dom$i.getById(_e,dom$i.getChannelSliderTrackId(_e,_)),getChannelSliderValueFromPoint(_e,_,et){const tt=dom$i.getChannelSliderTrackEl(_e,et);if(!tt)return;const{percent:rt}=getRelativePoint(_,tt);return rt},getChannelInputEls:_e=>[...queryAll(dom$i.getContentEl(_e),"input[data-channel]"),...queryAll(dom$i.getControlEl(_e),"input[data-channel]")]}),anatomy$i=createAnatomy("dialog").parts("trigger","backdrop","positioner","content","title","description","closeTrigger");anatomy$i.build();var dom$h=createScope({getPositionerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.positioner)??`dialog:${_e.id}:positioner`},getBackdropId:_e=>{var _;return((_=_e.ids)==null?void 0:_.backdrop)??`dialog:${_e.id}:backdrop`},getContentId:_e=>{var _;return((_=_e.ids)==null?void 0:_.content)??`dialog:${_e.id}:content`},getTriggerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.trigger)??`dialog:${_e.id}:trigger`},getTitleId:_e=>{var _;return((_=_e.ids)==null?void 0:_.title)??`dialog:${_e.id}:title`},getDescriptionId:_e=>{var _;return((_=_e.ids)==null?void 0:_.description)??`dialog:${_e.id}:description`},getCloseTriggerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.closeTrigger)??`dialog:${_e.id}:close`},getContentEl:_e=>dom$h.getById(_e,dom$h.getContentId(_e)),getPositionerEl:_e=>dom$h.getById(_e,dom$h.getPositionerId(_e)),getBackdropEl:_e=>dom$h.getById(_e,dom$h.getBackdropId(_e)),getTriggerEl:_e=>dom$h.getById(_e,dom$h.getTriggerId(_e)),getTitleEl:_e=>dom$h.getById(_e,dom$h.getTitleId(_e)),getDescriptionEl:_e=>dom$h.getById(_e,dom$h.getDescriptionId(_e)),getCloseTriggerEl:_e=>dom$h.getById(_e,dom$h.getCloseTriggerId(_e))});createProps$1()(["aria-label","closeOnEscape","closeOnInteractOutside","dir","finalFocusEl","getRootNode","getRootNode","id","id","ids","initialFocusEl","modal","onEscapeKeyDown","onFocusOutside","onInteractOutside","onOpenChange","onPointerDownOutside","open.controlled","open","persistentElements","preventScroll","restoreFocus","role","trapFocus"]);var anatomy$h=createAnatomy("editable").parts("root","area","label","preview","input","editTrigger","submitTrigger","cancelTrigger","control");anatomy$h.build();var dom$g=createScope({getRootId:_e=>{var _;return((_=_e.ids)==null?void 0:_.root)??`editable:${_e.id}`},getAreaId:_e=>{var _;return((_=_e.ids)==null?void 0:_.area)??`editable:${_e.id}:area`},getLabelId:_e=>{var _;return((_=_e.ids)==null?void 0:_.label)??`editable:${_e.id}:label`},getPreviewId:_e=>{var _;return((_=_e.ids)==null?void 0:_.preview)??`editable:${_e.id}:preview`},getInputId:_e=>{var _;return((_=_e.ids)==null?void 0:_.input)??`editable:${_e.id}:input`},getControlId:_e=>{var _;return((_=_e.ids)==null?void 0:_.control)??`editable:${_e.id}:control`},getSubmitTriggerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.submitTrigger)??`editable:${_e.id}:submit`},getCancelTriggerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.cancelTrigger)??`editable:${_e.id}:cancel`},getEditTriggerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.editTrigger)??`editable:${_e.id}:edit`},getInputEl:_e=>dom$g.getById(_e,dom$g.getInputId(_e)),getPreviewEl:_e=>dom$g.getById(_e,dom$g.getPreviewId(_e)),getSubmitTriggerEl:_e=>dom$g.getById(_e,dom$g.getSubmitTriggerId(_e)),getCancelTriggerEl:_e=>dom$g.getById(_e,dom$g.getCancelTriggerId(_e)),getEditTriggerEl:_e=>dom$g.getById(_e,dom$g.getEditTriggerId(_e))});createProps$1()(["activationMode","autoResize","dir","disabled","finalFocusEl","form","getRootNode","id","ids","invalid","maxLength","name","onEditChange","onFocusOutside","onInteractOutside","onPointerDownOutside","onValueChange","onValueCommit","onValueRevert","placeholder","readOnly","required","selectOnFocus","edit","edit.controlled","submitMode","translations","value"]);const fieldAnatomy$1=createAnatomy("field").parts("root","errorText","helperText","input","label","select","textarea","requiredIndicator");fieldAnatomy$1.build();const fieldsetAnatomy$1=createAnatomy("fieldset").parts("root","errorText","helperText","legend");fieldsetAnatomy$1.build();var anatomy$g=createAnatomy("file-upload").parts("root","dropzone","item","itemDeleteTrigger","itemGroup","itemName","itemPreview","itemPreviewImage","itemSizeText","label","trigger","clearTrigger");anatomy$g.build();var dom$f=createScope({getRootId:_e=>{var _;return((_=_e.ids)==null?void 0:_.root)??`file:${_e.id}`},getDropzoneId:_e=>{var _;return((_=_e.ids)==null?void 0:_.dropzone)??`file:${_e.id}:dropzone`},getHiddenInputId:_e=>{var _;return((_=_e.ids)==null?void 0:_.hiddenInput)??`file:${_e.id}:input`},getTriggerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.trigger)??`file:${_e.id}:trigger`},getLabelId:_e=>{var _;return((_=_e.ids)==null?void 0:_.label)??`file:${_e.id}:label`},getItemId:(_e,_)=>{var et,tt;return((tt=(et=_e.ids)==null?void 0:et.item)==null?void 0:tt.call(et,_))??`file:${_e.id}:item:${_}`},getItemNameId:(_e,_)=>{var et,tt;return((tt=(et=_e.ids)==null?void 0:et.itemName)==null?void 0:tt.call(et,_))??`file:${_e.id}:item-name:${_}`},getItemSizeTextId:(_e,_)=>{var et,tt;return((tt=(et=_e.ids)==null?void 0:et.itemSizeText)==null?void 0:tt.call(et,_))??`file:${_e.id}:item-size:${_}`},getItemPreviewId:(_e,_)=>{var et,tt;return((tt=(et=_e.ids)==null?void 0:et.itemPreview)==null?void 0:tt.call(et,_))??`file:${_e.id}:item-preview:${_}`},getRootEl:_e=>dom$f.getById(_e,dom$f.getRootId(_e)),getHiddenInputEl:_e=>dom$f.getById(_e,dom$f.getHiddenInputId(_e)),getDropzoneEl:_e=>dom$f.getById(_e,dom$f.getDropzoneId(_e))});createProps$1()(["accept","allowDrop","capture","dir","directory","disabled","getRootNode","id","ids","locale","maxFiles","maxFileSize","minFileSize","name","invalid","onFileAccept","onFileReject","onFileChange","preventDocumentDrop","required","translations","validate"]);createProps$1()(["file"]);var anatomy$f=createAnatomy("menu").parts("arrow","arrowTip","content","contextTrigger","indicator","item","itemGroup","itemGroupLabel","itemIndicator","itemText","positioner","separator","trigger","triggerItem");anatomy$f.build();var dom$e=createScope({getTriggerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.trigger)??`menu:${_e.id}:trigger`},getContextTriggerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.contextTrigger)??`menu:${_e.id}:ctx-trigger`},getContentId:_e=>{var _;return((_=_e.ids)==null?void 0:_.content)??`menu:${_e.id}:content`},getArrowId:_e=>{var _;return((_=_e.ids)==null?void 0:_.arrow)??`menu:${_e.id}:arrow`},getPositionerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.positioner)??`menu:${_e.id}:popper`},getGroupId:(_e,_)=>{var et,tt;return((tt=(et=_e.ids)==null?void 0:et.group)==null?void 0:tt.call(et,_))??`menu:${_e.id}:group:${_}`},getGroupLabelId:(_e,_)=>{var et,tt;return((tt=(et=_e.ids)==null?void 0:et.groupLabel)==null?void 0:tt.call(et,_))??`menu:${_e.id}:group-label:${_}`},getContentEl:_e=>dom$e.getById(_e,dom$e.getContentId(_e)),getPositionerEl:_e=>dom$e.getById(_e,dom$e.getPositionerId(_e)),getTriggerEl:_e=>dom$e.getById(_e,dom$e.getTriggerId(_e)),getHighlightedItemEl:_e=>_e.highlightedValue?dom$e.getById(_e,_e.highlightedValue):null,getArrowEl:_e=>dom$e.getById(_e,dom$e.getArrowId(_e)),getElements:_e=>{const et=`[role^="menuitem"][data-ownedby=${CSS.escape(dom$e.getContentId(_e))}]:not([data-disabled])`;return queryAll(dom$e.getContentEl(_e),et)},getFirstEl:_e=>first(dom$e.getElements(_e)),getLastEl:_e=>last(dom$e.getElements(_e)),getNextEl:(_e,_)=>nextById(dom$e.getElements(_e),_e.highlightedValue,_??_e.loopFocus),getPrevEl:(_e,_)=>prevById(dom$e.getElements(_e),_e.highlightedValue,_??_e.loopFocus),getElemByKey:(_e,_)=>getByTypeahead(dom$e.getElements(_e),{state:_e.typeaheadState,key:_,activeId:_e.highlightedValue}),isTargetDisabled:_e=>isHTMLElement(_e)&&(_e.dataset.disabled===""||_e.hasAttribute("disabled")),isTriggerItem:_e=>{var _;return!!((_=_e==null?void 0:_e.getAttribute("role"))!=null&&_.startsWith("menuitem"))&&!!(_e!=null&&_e.hasAttribute("aria-controls"))},getOptionFromItemEl(_e){return{id:_e.id,name:_e.dataset.name,value:_e.dataset.value,valueText:_e.dataset.valueText,type:_e.dataset.type}}});createProps$1()(["anchorPoint","aria-label","closeOnSelect","composite","dir","getRootNode","highlightedValue","id","ids","loopFocus","navigate","onEscapeKeyDown","onFocusOutside","onHighlightChange","onInteractOutside","onOpenChange","onPointerDownOutside","onSelect","open.controlled","open","positioning","typeahead"]);createProps$1()(["closeOnSelect","disabled","value","valueText"]);createProps$1()(["htmlFor"]);createProps$1()(["id"]);createProps$1()(["disabled","valueText","closeOnSelect","type","value","checked","onCheckedChange"]);var anatomy$e=createAnatomy("popover").parts("arrow","arrowTip","anchor","trigger","indicator","positioner","content","title","description","closeTrigger");anatomy$e.build();var dom$d=createScope({getAnchorId:_e=>{var _;return((_=_e.ids)==null?void 0:_.anchor)??`popover:${_e.id}:anchor`},getTriggerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.trigger)??`popover:${_e.id}:trigger`},getContentId:_e=>{var _;return((_=_e.ids)==null?void 0:_.content)??`popover:${_e.id}:content`},getPositionerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.positioner)??`popover:${_e.id}:popper`},getArrowId:_e=>{var _;return((_=_e.ids)==null?void 0:_.arrow)??`popover:${_e.id}:arrow`},getTitleId:_e=>{var _;return((_=_e.ids)==null?void 0:_.title)??`popover:${_e.id}:title`},getDescriptionId:_e=>{var _;return((_=_e.ids)==null?void 0:_.description)??`popover:${_e.id}:desc`},getCloseTriggerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.closeTrigger)??`popover:${_e.id}:close`},getAnchorEl:_e=>dom$d.getById(_e,dom$d.getAnchorId(_e)),getTriggerEl:_e=>dom$d.getById(_e,dom$d.getTriggerId(_e)),getContentEl:_e=>dom$d.getById(_e,dom$d.getContentId(_e)),getPositionerEl:_e=>dom$d.getById(_e,dom$d.getPositionerId(_e)),getTitleEl:_e=>dom$d.getById(_e,dom$d.getTitleId(_e)),getDescriptionEl:_e=>dom$d.getById(_e,dom$d.getDescriptionId(_e)),getFocusableEls:_e=>getFocusables(dom$d.getContentEl(_e)),getFirstFocusableEl:_e=>dom$d.getFocusableEls(_e)[0]});createProps$1()(["autoFocus","closeOnEscape","closeOnInteractOutside","dir","getRootNode","id","ids","initialFocusEl","modal","onEscapeKeyDown","onFocusOutside","onInteractOutside","onOpenChange","onPointerDownOutside","open.controlled","open","persistentElements","portalled","positioning"]);var anatomy$d=createAnatomy("radio-group").parts("root","label","item","itemText","itemControl","indicator");anatomy$d.build();var dom$c=createScope({getRootId:_e=>{var _;return((_=_e.ids)==null?void 0:_.root)??`radio-group:${_e.id}`},getLabelId:_e=>{var _;return((_=_e.ids)==null?void 0:_.label)??`radio-group:${_e.id}:label`},getItemId:(_e,_)=>{var et,tt;return((tt=(et=_e.ids)==null?void 0:et.item)==null?void 0:tt.call(et,_))??`radio-group:${_e.id}:radio:${_}`},getItemHiddenInputId:(_e,_)=>{var et,tt;return((tt=(et=_e.ids)==null?void 0:et.itemHiddenInput)==null?void 0:tt.call(et,_))??`radio-group:${_e.id}:radio:input:${_}`},getItemControlId:(_e,_)=>{var et,tt;return((tt=(et=_e.ids)==null?void 0:et.itemControl)==null?void 0:tt.call(et,_))??`radio-group:${_e.id}:radio:control:${_}`},getItemLabelId:(_e,_)=>{var et,tt;return((tt=(et=_e.ids)==null?void 0:et.itemLabel)==null?void 0:tt.call(et,_))??`radio-group:${_e.id}:radio:label:${_}`},getIndicatorId:_e=>{var _;return((_=_e.ids)==null?void 0:_.indicator)??`radio-group:${_e.id}:indicator`},getRootEl:_e=>dom$c.getById(_e,dom$c.getRootId(_e)),getItemHiddenInputEl:(_e,_)=>dom$c.getById(_e,dom$c.getItemHiddenInputId(_e,_)),getIndicatorEl:_e=>dom$c.getById(_e,dom$c.getIndicatorId(_e)),getFirstEnabledInputEl:_e=>{var _;return(_=dom$c.getRootEl(_e))==null?void 0:_.querySelector("input:not(:disabled)")},getFirstEnabledAndCheckedInputEl:_e=>{var _;return(_=dom$c.getRootEl(_e))==null?void 0:_.querySelector("input:not(:disabled):checked")},getInputEls:_e=>{const et=`input[type=radio][data-ownedby='${CSS.escape(dom$c.getRootId(_e))}']:not([disabled])`;return queryAll(dom$c.getRootEl(_e),et)},getActiveRadioEl:_e=>{if(_e.value)return dom$c.getById(_e,dom$c.getItemId(_e,_e.value))},getOffsetRect:_e=>({left:(_e==null?void 0:_e.offsetLeft)??0,top:(_e==null?void 0:_e.offsetTop)??0,width:(_e==null?void 0:_e.offsetWidth)??0,height:(_e==null?void 0:_e.offsetHeight)??0}),getRectById:(_e,_)=>{const et=dom$c.getById(_e,dom$c.getItemId(_e,_));if(et)return dom$c.resolveRect(dom$c.getOffsetRect(et))},resolveRect:_e=>({width:`${_e.width}px`,height:`${_e.height}px`,left:`${_e.left}px`,top:`${_e.top}px`})});createProps$1()(["dir","disabled","form","getRootNode","id","ids","name","onValueChange","orientation","readOnly","value"]);createProps$1()(["value","disabled","invalid"]);var anatomy$c=createAnatomy("rating-group").parts("root","label","item","control");anatomy$c.build();var dom$b=createScope({getRootId:_e=>{var _;return((_=_e.ids)==null?void 0:_.root)??`rating:${_e.id}`},getLabelId:_e=>{var _;return((_=_e.ids)==null?void 0:_.label)??`rating:${_e.id}:label`},getHiddenInputId:_e=>{var _;return((_=_e.ids)==null?void 0:_.hiddenInput)??`rating:${_e.id}:input`},getControlId:_e=>{var _;return((_=_e.ids)==null?void 0:_.control)??`rating:${_e.id}:control`},getItemId:(_e,_)=>{var et,tt;return((tt=(et=_e.ids)==null?void 0:et.item)==null?void 0:tt.call(et,_))??`rating:${_e.id}:item:${_}`},getRootEl:_e=>dom$b.getById(_e,dom$b.getRootId(_e)),getControlEl:_e=>dom$b.getById(_e,dom$b.getControlId(_e)),getRadioEl:(_e,_=_e.value)=>{const et=`[role=radio][aria-posinset='${Math.ceil(_)}']`;return query(dom$b.getControlEl(_e),et)},getHiddenInputEl:_e=>dom$b.getById(_e,dom$b.getHiddenInputId(_e)),dispatchChangeEvent:_e=>{const _=dom$b.getHiddenInputEl(_e);_&&dispatchInputValueEvent(_,{value:_e.value})}});createProps$1()(["allowHalf","autoFocus","count","dir","disabled","form","getRootNode","id","ids","name","onHoverChange","onValueChange","required","readOnly","translations","value"]);createProps$1()(["index"]);var anatomy$b=createAnatomy("select").parts("label","positioner","trigger","indicator","clearTrigger","item","itemText","itemIndicator","itemGroup","itemGroupLabel","list","content","root","control","valueText");anatomy$b.build();var dom$a=createScope({getRootId:_e=>{var _;return((_=_e.ids)==null?void 0:_.root)??`select:${_e.id}`},getContentId:_e=>{var _;return((_=_e.ids)==null?void 0:_.content)??`select:${_e.id}:content`},getTriggerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.trigger)??`select:${_e.id}:trigger`},getClearTriggerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.clearTrigger)??`select:${_e.id}:clear-trigger`},getLabelId:_e=>{var _;return((_=_e.ids)==null?void 0:_.label)??`select:${_e.id}:label`},getControlId:_e=>{var _;return((_=_e.ids)==null?void 0:_.control)??`select:${_e.id}:control`},getItemId:(_e,_)=>{var et,tt;return((tt=(et=_e.ids)==null?void 0:et.item)==null?void 0:tt.call(et,_))??`select:${_e.id}:option:${_}`},getHiddenSelectId:_e=>{var _;return((_=_e.ids)==null?void 0:_.hiddenSelect)??`select:${_e.id}:select`},getPositionerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.positioner)??`select:${_e.id}:positioner`},getItemGroupId:(_e,_)=>{var et,tt;return((tt=(et=_e.ids)==null?void 0:et.itemGroup)==null?void 0:tt.call(et,_))??`select:${_e.id}:optgroup:${_}`},getItemGroupLabelId:(_e,_)=>{var et,tt;return((tt=(et=_e.ids)==null?void 0:et.itemGroupLabel)==null?void 0:tt.call(et,_))??`select:${_e.id}:optgroup-label:${_}`},getHiddenSelectEl:_e=>dom$a.getById(_e,dom$a.getHiddenSelectId(_e)),getContentEl:_e=>dom$a.getById(_e,dom$a.getContentId(_e)),getControlEl:_e=>dom$a.getById(_e,dom$a.getControlId(_e)),getTriggerEl:_e=>dom$a.getById(_e,dom$a.getTriggerId(_e)),getClearTriggerEl:_e=>dom$a.getById(_e,dom$a.getClearTriggerId(_e)),getPositionerEl:_e=>dom$a.getById(_e,dom$a.getPositionerId(_e)),getHighlightedOptionEl(_e){return _e.highlightedValue?dom$a.getById(_e,dom$a.getItemId(_e,_e.highlightedValue)):null}});createProps$1()(["closeOnSelect","collection","dir","disabled","deselectable","form","getRootNode","highlightedValue","id","ids","invalid","loopFocus","multiple","name","onFocusOutside","onHighlightChange","onInteractOutside","onOpenChange","onPointerDownOutside","onValueChange","open.controlled","open","composite","positioning","required","readOnly","scrollToIndexFn","value"]);createProps$1()(["item","persistFocus"]);createProps$1()(["id"]);createProps$1()(["htmlFor"]);var anatomy$a=createAnatomy("slider").parts("root","label","thumb","valueText","track","range","control","markerGroup","marker","draggingIndicator");anatomy$a.build();function getBounds(_e){const _=_e[0],et=_e[_e.length-1];return[_,et]}function getRangeOffsets(_e){const[_,et]=getBounds(_e.valuePercent);if(_e.valuePercent.length===1){if(_e.origin==="center"){const tt=_e.valuePercent[0]<50,rt=tt?`${_e.valuePercent[0]}%`:"50%",it=tt?"50%":`${100-_e.valuePercent[0]}%`;return{start:rt,end:it}}return{start:"0%",end:`${100-et}%`}}return{start:`${_}%`,end:`${100-et}%`}}function getRangeStyle(_e){return _e.isVertical?{position:"absolute",bottom:"var(--slider-range-start)",top:"var(--slider-range-end)"}:{position:"absolute",[_e.isRtl?"right":"left"]:"var(--slider-range-start)",[_e.isRtl?"left":"right"]:"var(--slider-range-end)"}}function getVerticalThumbOffset(_e){const{height:_=0}=_e.thumbSize??{},et=getValueTransformer([_e.min,_e.max],[-_/2,_/2]);return parseFloat(et(_e.value).toFixed(2))}function getHorizontalThumbOffset(_e){const{width:_=0}=_e.thumbSize??{};if(_e.isRtl){const tt=getValueTransformer([_e.max,_e.min],[-_/2,_/2]);return-1*parseFloat(tt(_e.value).toFixed(2))}const et=getValueTransformer([_e.min,_e.max],[-_/2,_/2]);return parseFloat(et(_e.value).toFixed(2))}function getOffset(_e,_){if(_e.thumbAlignment==="center")return`${_}%`;const et=_e.isVertical?getVerticalThumbOffset(_e):getHorizontalThumbOffset(_e);return`calc(${_}% - ${et}px)`}function getThumbOffset(_e){let _=getValuePercent(_e.value,_e.min,_e.max)*100;return getOffset(_e,_)}function getVisibility(_e){let _="visible";return _e.thumbAlignment==="contain"&&!_e.hasMeasuredThumbSize&&(_="hidden"),_}function getThumbStyle(_e,_){const et=_e.isVertical?"bottom":"insetInlineStart";return{visibility:getVisibility(_e),position:"absolute",transform:"var(--slider-thumb-transform)",[et]:`var(--slider-thumb-offset-${_})`}}function getControlStyle(){return{touchAction:"none",userSelect:"none",WebkitUserSelect:"none",position:"relative"}}function getRootStyle(_e){const _=getRangeOffsets(_e);return{..._e.value.reduce((tt,rt,it)=>{const st=getThumbOffset({..._e,value:rt});return{...tt,[`--slider-thumb-offset-${it}`]:st}},{}),"--slider-thumb-transform":_e.isVertical?"translateY(50%)":_e.isRtl?"translateX(50%)":"translateX(-50%)","--slider-range-start":_.start,"--slider-range-end":_.end}}function getMarkerStyle(_e,_){return{visibility:getVisibility(_e),position:"absolute",pointerEvents:"none",[_e.isHorizontal?"insetInlineStart":"bottom"]:getThumbOffset({..._e,value:_}),translate:"var(--tx) var(--ty)","--tx":_e.isHorizontal?_e.isRtl?"50%":"-50%":"0%","--ty":_e.isHorizontal?"0%":"50%"}}function getMarkerGroupStyle(){return{userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none",position:"relative"}}var styleGetterFns={getRootStyle,getControlStyle,getThumbStyle,getRangeStyle,getMarkerStyle,getMarkerGroupStyle},dom$9=createScope({...styleGetterFns,getRootId:_e=>{var _;return((_=_e.ids)==null?void 0:_.root)??`slider:${_e.id}`},getThumbId:(_e,_)=>{var et,tt;return((tt=(et=_e.ids)==null?void 0:et.thumb)==null?void 0:tt.call(et,_))??`slider:${_e.id}:thumb:${_}`},getHiddenInputId:(_e,_)=>{var et,tt;return((tt=(et=_e.ids)==null?void 0:et.hiddenInput)==null?void 0:tt.call(et,_))??`slider:${_e.id}:input:${_}`},getControlId:_e=>{var _;return((_=_e.ids)==null?void 0:_.control)??`slider:${_e.id}:control`},getTrackId:_e=>{var _;return((_=_e.ids)==null?void 0:_.track)??`slider:${_e.id}:track`},getRangeId:_e=>{var _;return((_=_e.ids)==null?void 0:_.range)??`slider:${_e.id}:range`},getLabelId:_e=>{var _;return((_=_e.ids)==null?void 0:_.label)??`slider:${_e.id}:label`},getValueTextId:_e=>{var _;return((_=_e.ids)==null?void 0:_.valueText)??`slider:${_e.id}:value-text`},getMarkerId:(_e,_)=>{var et,tt;return((tt=(et=_e.ids)==null?void 0:et.marker)==null?void 0:tt.call(et,_))??`slider:${_e.id}:marker:${_}`},getRootEl:_e=>dom$9.getById(_e,dom$9.getRootId(_e)),getThumbEl:(_e,_)=>dom$9.getById(_e,dom$9.getThumbId(_e,_)),getHiddenInputEl:(_e,_)=>dom$9.getById(_e,dom$9.getHiddenInputId(_e,_)),getControlEl:_e=>dom$9.getById(_e,dom$9.getControlId(_e)),getElements:_e=>queryAll(dom$9.getControlEl(_e),"[role=slider]"),getFirstEl:_e=>dom$9.getElements(_e)[0],getRangeEl:_e=>dom$9.getById(_e,dom$9.getRangeId(_e)),getValueFromPoint(_e,_){const et=dom$9.getControlEl(_e);if(!et)return;const rt=getRelativePoint(_,et).getPercentValue({orientation:_e.orientation,dir:_e.dir,inverted:{y:!0}});return getPercentValue(rt,_e.min,_e.max,_e.step)},dispatchChangeEvent(_e){Array.from(_e.value).forEach((et,tt)=>{const rt=dom$9.getHiddenInputEl(_e,tt);rt&&dispatchInputValueEvent(rt,{value:et})})}});createProps$1()(["aria-label","aria-labelledby","dir","disabled","form","getAriaValueText","getRootNode","id","ids","invalid","max","min","minStepsBetweenThumbs","name","onFocusChange","onValueChange","onValueChangeEnd","orientation","origin","readOnly","step","thumbAlignment","thumbAlignment","thumbSize","value"]);createProps$1()(["index","name"]);var anatomy$9=createAnatomy("switch").parts("root","label","control","thumb");anatomy$9.build();var dom$8=createScope({getRootId:_e=>{var _;return((_=_e.ids)==null?void 0:_.root)??`switch:${_e.id}`},getLabelId:_e=>{var _;return((_=_e.ids)==null?void 0:_.label)??`switch:${_e.id}:label`},getThumbId:_e=>{var _;return((_=_e.ids)==null?void 0:_.thumb)??`switch:${_e.id}:thumb`},getControlId:_e=>{var _;return((_=_e.ids)==null?void 0:_.control)??`switch:${_e.id}:control`},getHiddenInputId:_e=>{var _;return((_=_e.ids)==null?void 0:_.hiddenInput)??`switch:${_e.id}:input`},getRootEl:_e=>dom$8.getById(_e,dom$8.getRootId(_e)),getHiddenInputEl:_e=>dom$8.getById(_e,dom$8.getHiddenInputId(_e))});createProps$1()(["checked","dir","disabled","form","getRootNode","id","ids","invalid","label","name","onCheckedChange","readOnly","required","value"]);var anatomy$8=createAnatomy("avatar").parts("root","image","fallback");anatomy$8.build();var dom$7=createScope({getRootId:_e=>{var _;return((_=_e.ids)==null?void 0:_.root)??`avatar:${_e.id}`},getImageId:_e=>{var _;return((_=_e.ids)==null?void 0:_.image)??`avatar:${_e.id}:image`},getFallbackId:_e=>{var _;return((_=_e.ids)==null?void 0:_.fallback)??`avatar:${_e.id}:fallback`},getRootEl:_e=>dom$7.getById(_e,dom$7.getRootId(_e)),getImageEl:_e=>dom$7.getById(_e,dom$7.getImageId(_e))});createProps$1()(["dir","id","ids","onStatusChange","getRootNode"]);var anatomy$7=createAnatomy("checkbox").parts("root","label","control","indicator");anatomy$7.build();var dom$6=createScope({getRootId:_e=>{var _;return((_=_e.ids)==null?void 0:_.root)??`checkbox:${_e.id}`},getLabelId:_e=>{var _;return((_=_e.ids)==null?void 0:_.label)??`checkbox:${_e.id}:label`},getControlId:_e=>{var _;return((_=_e.ids)==null?void 0:_.control)??`checkbox:${_e.id}:control`},getHiddenInputId:_e=>{var _;return((_=_e.ids)==null?void 0:_.hiddenInput)??`checkbox:${_e.id}:input`},getRootEl:_e=>dom$6.getById(_e,dom$6.getRootId(_e)),getHiddenInputEl:_e=>dom$6.getById(_e,dom$6.getHiddenInputId(_e))});createProps$1()(["checked","dir","disabled","form","getRootNode","id","ids","invalid","name","onCheckedChange","readOnly","required","value"]);const checkboxAnatomy=anatomy$7.extendWith("group"),colorPickerAnatomy=anatomy$j.extendWith("view");var anatomy$6=createAnatomy("hoverCard").parts("arrow","arrowTip","trigger","positioner","content");anatomy$6.build();var dom$5=createScope({getTriggerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.trigger)??`hover-card:${_e.id}:trigger`},getContentId:_e=>{var _;return((_=_e.ids)==null?void 0:_.content)??`hover-card:${_e.id}:content`},getPositionerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.positioner)??`hover-card:${_e.id}:popper`},getArrowId:_e=>{var _;return((_=_e.ids)==null?void 0:_.arrow)??`hover-card:${_e.id}:arrow`},getTriggerEl:_e=>dom$5.getById(_e,dom$5.getTriggerId(_e)),getContentEl:_e=>dom$5.getById(_e,dom$5.getContentId(_e)),getPositionerEl:_e=>dom$5.getById(_e,dom$5.getPositionerId(_e))});createProps$1()(["closeDelay","dir","getRootNode","id","ids","onOpenChange","open.controlled","open","openDelay","positioning"]);var anatomy$5=createAnatomy("numberInput").parts("root","label","input","control","valueText","incrementTrigger","decrementTrigger","scrubber");anatomy$5.build();var dom$4=createScope({getRootId:_e=>{var _;return((_=_e.ids)==null?void 0:_.root)??`number-input:${_e.id}`},getInputId:_e=>{var _;return((_=_e.ids)==null?void 0:_.input)??`number-input:${_e.id}:input`},getIncrementTriggerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.incrementTrigger)??`number-input:${_e.id}:inc`},getDecrementTriggerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.decrementTrigger)??`number-input:${_e.id}:dec`},getScrubberId:_e=>{var _;return((_=_e.ids)==null?void 0:_.scrubber)??`number-input:${_e.id}:scrubber`},getCursorId:_e=>`number-input:${_e.id}:cursor`,getLabelId:_e=>{var _;return((_=_e.ids)==null?void 0:_.label)??`number-input:${_e.id}:label`},getInputEl:_e=>dom$4.getById(_e,dom$4.getInputId(_e)),getIncrementTriggerEl:_e=>dom$4.getById(_e,dom$4.getIncrementTriggerId(_e)),getDecrementTriggerEl:_e=>dom$4.getById(_e,dom$4.getDecrementTriggerId(_e)),getScrubberEl:_e=>dom$4.getById(_e,dom$4.getScrubberId(_e)),getCursorEl:_e=>dom$4.getDoc(_e).getElementById(dom$4.getCursorId(_e)),getPressedTriggerEl:(_e,_=_e.hint)=>{let et=null;return _==="increment"&&(et=dom$4.getIncrementTriggerEl(_e)),_==="decrement"&&(et=dom$4.getDecrementTriggerEl(_e)),et},setupVirtualCursor(_e){if(!isSafari())return dom$4.createVirtualCursor(_e),()=>{var _;(_=dom$4.getCursorEl(_e))==null||_.remove()}},preventTextSelection(_e){const _=dom$4.getDoc(_e),et=_.documentElement,tt=_.body;return tt.style.pointerEvents="none",et.style.userSelect="none",et.style.cursor="ew-resize",()=>{tt.style.pointerEvents="",et.style.userSelect="",et.style.cursor="",et.style.length||et.removeAttribute("style"),tt.style.length||tt.removeAttribute("style")}},getMousemoveValue(_e,_){const et=dom$4.getWin(_e),tt=roundToDpr(_.movementX,et.devicePixelRatio),rt=roundToDpr(_.movementY,et.devicePixelRatio);let it=tt>0?"increment":tt<0?"decrement":null;_e.isRtl&&it==="increment"&&(it="decrement"),_e.isRtl&&it==="decrement"&&(it="increment");const st={x:_e.scrubberCursorPoint.x+tt,y:_e.scrubberCursorPoint.y+rt},at=et.innerWidth,ct=roundToDpr(7.5,et.devicePixelRatio);return st.x=wrap$1(st.x+ct,at)-ct,{hint:it,point:st}},createVirtualCursor(_e){const _=dom$4.getDoc(_e),et=_.createElement("div");et.className="scrubber--cursor",et.id=dom$4.getCursorId(_e),Object.assign(et.style,{width:"15px",height:"15px",position:"fixed",pointerEvents:"none",left:"0px",top:"0px",zIndex:MAX_Z_INDEX,transform:_e.scrubberCursorPoint?`translate3d(${_e.scrubberCursorPoint.x}px, ${_e.scrubberCursorPoint.y}px, 0px)`:void 0,willChange:"transform"}),et.innerHTML=`
        <svg width="46" height="15" style="left: -15.5px; position: absolute; top: 0; filter: drop-shadow(rgba(0, 0, 0, 0.4) 0px 1px 1.1px);">
          <g transform="translate(2 3)">
            <path fill-rule="evenodd" d="M 15 4.5L 15 2L 11.5 5.5L 15 9L 15 6.5L 31 6.5L 31 9L 34.5 5.5L 31 2L 31 4.5Z" style="stroke-width: 2px; stroke: white;"></path>
            <path fill-rule="evenodd" d="M 15 4.5L 15 2L 11.5 5.5L 15 9L 15 6.5L 31 6.5L 31 9L 34.5 5.5L 31 2L 31 4.5Z"></path>
          </g>
        </svg>`,_.body.appendChild(et)}}),anatomy$4=createAnatomy("pinInput").parts("root","label","input","control");anatomy$4.build();var dom$3=createScope({getRootId:_e=>{var _;return((_=_e.ids)==null?void 0:_.root)??`pin-input:${_e.id}`},getInputId:(_e,_)=>{var et,tt;return((tt=(et=_e.ids)==null?void 0:et.input)==null?void 0:tt.call(et,_))??`pin-input:${_e.id}:${_}`},getHiddenInputId:_e=>{var _;return((_=_e.ids)==null?void 0:_.hiddenInput)??`pin-input:${_e.id}:hidden`},getLabelId:_e=>{var _;return((_=_e.ids)==null?void 0:_.label)??`pin-input:${_e.id}:label`},getControlId:_e=>{var _;return((_=_e.ids)==null?void 0:_.control)??`pin-input:${_e.id}:control`},getRootEl:_e=>dom$3.getById(_e,dom$3.getRootId(_e)),getInputEls:_e=>{const et=`input[data-ownedby=${CSS.escape(dom$3.getRootId(_e))}]`;return queryAll(dom$3.getRootEl(_e),et)},getInputEl:(_e,_)=>dom$3.getById(_e,dom$3.getInputId(_e,_)),getFocusedInputEl:_e=>dom$3.getInputEls(_e)[_e.focusedIndex],getFirstInputEl:_e=>dom$3.getInputEls(_e)[0],getHiddenInputEl:_e=>dom$3.getById(_e,dom$3.getHiddenInputId(_e))}),anatomy$3=createAnatomy("progress").parts("root","label","track","range","valueText","view","circle","circleTrack","circleRange");anatomy$3.build();createScope({getRootId:_e=>{var _;return((_=_e.ids)==null?void 0:_.root)??`progress-${_e.id}`},getTrackId:_e=>{var _;return((_=_e.ids)==null?void 0:_.track)??`progress-${_e.id}-track`},getLabelId:_e=>{var _;return((_=_e.ids)==null?void 0:_.label)??`progress-${_e.id}-label`},getCircleId:_e=>{var _;return((_=_e.ids)==null?void 0:_.circle)??`progress-${_e.id}-circle`}});createProps$1()(["dir","getRootNode","id","ids","max","min","orientation","translations","value","onValueChange"]);var anatomy$2=createAnatomy("qr-code").parts("root","frame","pattern","overlay","downloadTrigger");anatomy$2.build();var dom$2=createScope({getRootId:_e=>{var _;return((_=_e.ids)==null?void 0:_.root)??`qrcode:${_e.id}:root`},getFrameId:_e=>{var _;return((_=_e.ids)==null?void 0:_.frame)??`qrcode:${_e.id}:frame`},getFrameEl:_e=>dom$2.getById(_e,dom$2.getFrameId(_e))});createProps$1()(["ids","value","id","encoding","dir","getRootNode","onValueChange"]);const segmentGroupAnatomy=anatomy$d.rename("segment-group");segmentGroupAnatomy.build();var anatomy$1=createAnatomy("tooltip").parts("trigger","arrow","arrowTip","positioner","content");anatomy$1.build();var dom$1=createScope({getTriggerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.trigger)??`tooltip:${_e.id}:trigger`},getContentId:_e=>{var _;return((_=_e.ids)==null?void 0:_.content)??`tooltip:${_e.id}:content`},getArrowId:_e=>{var _;return((_=_e.ids)==null?void 0:_.arrow)??`tooltip:${_e.id}:arrow`},getPositionerId:_e=>{var _;return((_=_e.ids)==null?void 0:_.positioner)??`tooltip:${_e.id}:popper`},getTriggerEl:_e=>dom$1.getById(_e,dom$1.getTriggerId(_e)),getContentEl:_e=>dom$1.getById(_e,dom$1.getContentId(_e)),getPositionerEl:_e=>dom$1.getById(_e,dom$1.getPositionerId(_e)),getArrowEl:_e=>dom$1.getById(_e,dom$1.getArrowId(_e))});proxy({id:null,prevId:null,setId(_e){this.prevId=this.id,this.id=_e}});createProps$1()(["aria-label","closeDelay","closeOnEscape","closeOnPointerDown","closeOnScroll","closeOnClick","dir","disabled","getRootNode","id","ids","interactive","onOpenChange","open.controlled","open","openDelay","positioning"]);const accordionAnatomy=anatomy$l.extendWith("itemBody"),actionBarAnatomy=createAnatomy("action-bar").parts("positioner","content","separator","selectionTrigger","closeTrigger"),alertAnatomy=createAnatomy("alert").parts("title","description","root","indicator","content"),breadcrumbAnatomy=createAnatomy("breadcrumb").parts("link","currentLink","item","list","root","ellipsis","separator"),blockquoteAnatomy=createAnatomy("blockquote").parts("root","icon","content","caption"),cardAnatomy=createAnatomy("card").parts("root","header","body","footer","title","description"),checkboxCardAnatomy=createAnatomy("checkbox-card",["root","control","label","description","addon","indicator","content"]),dataListAnatomy=createAnatomy("data-list").parts("root","item","itemLabel","itemValue"),dialogAnatomy=anatomy$i.extendWith("header","body","footer","backdrop"),drawerAnatomy=anatomy$i.extendWith("header","body","footer","backdrop"),editableAnatomy=anatomy$h.extendWith("textarea"),emptyStateAnatomy=createAnatomy("empty-state",["root","content","indicator","title","description"]),fieldAnatomy=fieldAnatomy$1.extendWith("requiredIndicator"),fieldsetAnatomy=fieldsetAnatomy$1.extendWith("content"),fileUploadAnatomy=anatomy$g.extendWith("itemContent","dropzoneContent"),listAnatomy=createAnatomy("list").parts("root","item","indicator"),menuAnatomy=anatomy$f.extendWith("itemCommand"),nativeSelectAnatomy=createAnatomy("select").parts("root","field","indicator"),popoverAnatomy=anatomy$e.extendWith("header","body","footer"),radioGroupAnatomy=anatomy$d.extendWith("itemAddon","itemIndicator"),radioCardAnatomy=radioGroupAnatomy.extendWith("itemContent","itemDescription"),ratingGroupAnatomy=anatomy$c.extendWith("itemIndicator"),selectAnatomy=anatomy$b.extendWith("indicatorGroup"),sliderAnatomy=anatomy$a.extendWith("markerIndicator"),statAnatomy=createAnatomy("stat").parts("root","label","helpText","valueText","valueUnit","indicator"),statusAnatomy=createAnatomy("status").parts("root","indicator"),stepsAnatomy=createAnatomy("steps",["root","list","item","trigger","indicator","separator","content","title","description","nextTrigger","prevTrigger","progress"]),switchAnatomy=anatomy$9.extendWith("indicator"),tableAnatomy=createAnatomy("table").parts("root","header","body","row","columnHeader","cell","footer","caption"),toastAnatomy=createAnatomy("toast").parts("root","title","description","indicator","closeTrigger","actionTrigger"),tabsAnatomy=createAnatomy("tabs").parts("root","trigger","list","content","contentGroup","indicator"),tagAnatomy=createAnatomy("tag").parts("root","label","closeTrigger","startElement","endElement"),timelineAnatomy=createAnatomy("timeline").parts("root","item","content","separator","indicator","connector","title","description"),accordionSlotRecipe=defineSlotRecipe({className:"chakra-accordion",slots:accordionAnatomy.keys(),base:{root:{width:"full","--accordion-radius":"radii.l2"},item:{overflowAnchor:"none"},itemTrigger:{display:"flex",alignItems:"center",width:"full",outline:"0",gap:"3",fontWeight:"medium",borderRadius:"var(--accordion-radius)",_focusVisible:{outline:"2px solid",outlineColor:"colorPalette.focusRing"},_disabled:{layerStyle:"disabled"}},itemBody:{pt:"var(--accordion-padding-y)",pb:"calc(var(--accordion-padding-y) * 2)"},itemContent:{overflow:"hidden",borderRadius:"var(--accordion-radius)",_open:{animationName:"expand-height, fade-in",animationDuration:"moderate"},_closed:{animationName:"collapse-height, fade-out",animationDuration:"moderate"}},itemIndicator:{transition:"rotate 0.2s",transformOrigin:"center",color:"fg.subtle",_open:{rotate:"180deg"},_icon:{width:"1.2em",height:"1.2em"}}},variants:{variant:{outline:{item:{borderBottomWidth:"1px"}},subtle:{itemTrigger:{px:"var(--accordion-padding-x)"},itemContent:{px:"var(--accordion-padding-x)"},item:{borderRadius:"var(--accordion-radius)",_open:{bg:"colorPalette.subtle"}}},enclosed:{root:{borderWidth:"1px",borderRadius:"var(--accordion-radius)",divideY:"1px",overflow:"hidden"},itemTrigger:{px:"var(--accordion-padding-x)"},itemContent:{px:"var(--accordion-padding-x)"},item:{_open:{bg:"bg.subtle"}}},plain:{}},size:{sm:{root:{"--accordion-padding-x":"spacing.3","--accordion-padding-y":"spacing.2"},itemTrigger:{textStyle:"sm",py:"var(--accordion-padding-y)"}},md:{root:{"--accordion-padding-x":"spacing.4","--accordion-padding-y":"spacing.2"},itemTrigger:{textStyle:"md",py:"var(--accordion-padding-y)"}},lg:{root:{"--accordion-padding-x":"spacing.4.5","--accordion-padding-y":"spacing.2.5"},itemTrigger:{textStyle:"lg",py:"var(--accordion-padding-y)"}}}},defaultVariants:{size:"md",variant:"outline"}}),actionBarSlotRecipe=defineSlotRecipe({className:"chakra-action-bar",slots:actionBarAnatomy.keys(),base:{positioner:{position:"fixed",display:"flex",justifyContent:"center",pointerEvents:"none",insetInline:"0",top:"unset",bottom:"calc(env(safe-area-inset-bottom) + 20px)"},content:{bg:"bg.panel",shadow:"md",display:"flex",alignItems:"center",gap:"3",borderRadius:"l3",py:"2.5",px:"3",pointerEvents:"auto",translate:"calc(-1 * var(--scrollbar-width) / 2) 0px",_open:{animationName:"slide-from-bottom, fade-in",animationDuration:"moderate"},_closed:{animationName:"slide-to-bottom, fade-out",animationDuration:"faster"}},separator:{width:"1px",height:"5",bg:"border"},selectionTrigger:{display:"inline-flex",alignItems:"center",gap:"2",alignSelf:"stretch",textStyle:"sm",px:"4",py:"1",borderRadius:"l2",borderWidth:"1px",borderStyle:"dashed"}}}),alertSlotRecipe=defineSlotRecipe({slots:alertAnatomy.keys(),className:"chakra-alert",base:{root:{width:"full",display:"flex",alignItems:"flex-start",position:"relative",borderRadius:"l3"},title:{fontWeight:"medium"},description:{display:"inline"},indicator:{display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:"0",width:"1em",height:"1em",_icon:{boxSize:"full"}},content:{display:"flex",flex:"1",gap:"1"}},variants:{status:{info:{root:{colorPalette:"blue"}},warning:{root:{colorPalette:"orange"}},success:{root:{colorPalette:"green"}},error:{root:{colorPalette:"red"}},neutral:{root:{colorPalette:"gray"}}},inline:{true:{content:{display:"inline-flex",flexDirection:"row",alignItems:"center"}},false:{content:{display:"flex",flexDirection:"column"}}},variant:{subtle:{root:{bg:"colorPalette.subtle",color:"colorPalette.fg"}},surface:{root:{bg:"colorPalette.subtle",color:"colorPalette.fg",shadow:"inset 0 0 0px 1px var(--shadow-color)",shadowColor:"colorPalette.muted"},indicator:{color:"colorPalette.fg"}},outline:{root:{color:"colorPalette.fg",shadow:"inset 0 0 0px 1px var(--shadow-color)",shadowColor:"colorPalette.muted"},indicator:{color:"colorPalette.fg"}},solid:{root:{bg:"colorPalette.solid",color:"colorPalette.contrast"},indicator:{color:"colorPalette.contrast"}}},size:{sm:{root:{gap:"2",px:"3",py:"3",textStyle:"xs"},indicator:{textStyle:"lg"}},md:{root:{gap:"3",px:"4",py:"4",textStyle:"sm"},indicator:{textStyle:"xl"}},lg:{root:{gap:"3",px:"4",py:"4",textStyle:"md"},indicator:{textStyle:"2xl"}}}},defaultVariants:{status:"info",variant:"subtle",size:"md",inline:!1}}),avatarSlotRecipe=defineSlotRecipe({slots:anatomy$8.keys(),className:"chakra-avatar",base:{root:{display:"inline-flex",alignItems:"center",justifyContent:"center",fontWeight:"medium",position:"relative",verticalAlign:"top",flexShrink:"0",userSelect:"none",width:"var(--avatar-size)",height:"var(--avatar-size)",fontSize:"var(--avatar-font-size)",borderRadius:"var(--avatar-radius)","&[data-group-item]":{borderWidth:"2px",borderColor:"bg"}},image:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"var(--avatar-radius)"},fallback:{lineHeight:"1",textTransform:"uppercase",fontWeight:"medium",fontSize:"var(--avatar-font-size)",borderRadius:"var(--avatar-radius)"}},variants:{size:{full:{root:{"--avatar-size":"100%","--avatar-font-size":"100%"}},"2xs":{root:{"--avatar-font-size":"fontSizes.2xs","--avatar-size":"sizes.6"}},xs:{root:{"--avatar-font-size":"fontSizes.xs","--avatar-size":"sizes.8"}},sm:{root:{"--avatar-font-size":"fontSizes.sm","--avatar-size":"sizes.9"}},md:{root:{"--avatar-font-size":"fontSizes.md","--avatar-size":"sizes.10"}},lg:{root:{"--avatar-font-size":"fontSizes.md","--avatar-size":"sizes.11"}},xl:{root:{"--avatar-font-size":"fontSizes.lg","--avatar-size":"sizes.12"}},"2xl":{root:{"--avatar-font-size":"fontSizes.xl","--avatar-size":"sizes.16"}}},variant:{solid:{root:{bg:"colorPalette.solid",color:"colorPalette.contrast"}},subtle:{root:{bg:"colorPalette.muted",color:"colorPalette.fg"}},outline:{root:{color:"colorPalette.fg",borderWidth:"1px",borderColor:"colorPalette.muted"}}},shape:{square:{},rounded:{root:{"--avatar-radius":"radii.l3"}},full:{root:{"--avatar-radius":"radii.full"}}},borderless:{true:{root:{"&[data-group-item]":{borderWidth:"0px"}}}}},defaultVariants:{size:"md",shape:"full",variant:"subtle"}}),blockquoteSlotRecipe=defineSlotRecipe({className:"chakra-blockquote",slots:blockquoteAnatomy.keys(),base:{root:{position:"relative",display:"flex",flexDirection:"column",gap:"2"},caption:{textStyle:"sm",color:"fg.muted"},icon:{boxSize:"5"}},variants:{justify:{start:{root:{alignItems:"flex-start",textAlign:"start"}},center:{root:{alignItems:"center",textAlign:"center"}},end:{root:{alignItems:"flex-end",textAlign:"end"}}},variant:{subtle:{root:{paddingX:"5",borderStartWidth:"4px",borderStartColor:"colorPalette.muted"},icon:{color:"colorPalette.fg"}},solid:{root:{paddingX:"5",borderStartWidth:"4px",borderStartColor:"colorPalette.solid"},icon:{color:"colorPalette.solid"}},plain:{root:{paddingX:"5"},icon:{color:"colorPalette.solid"}}}},defaultVariants:{variant:"subtle",justify:"start"}}),breadcrumbSlotRecipe=defineSlotRecipe({className:"chakra-breadcrumb",slots:breadcrumbAnatomy.keys(),base:{list:{display:"flex",alignItems:"center",wordBreak:"break-word",color:"fg.muted"},link:{outline:"0",textDecoration:"none",borderRadius:"l1",focusRing:"outside",display:"inline-flex",alignItems:"center",gap:"2"},item:{display:"inline-flex",alignItems:"center"},separator:{color:"fg.muted",opacity:"0.8",_icon:{boxSize:"1em"}},ellipsis:{display:"inline-flex",alignItems:"center",justifyContent:"center",_icon:{boxSize:"1em"}}},variants:{variant:{underline:{link:{color:"colorPalette.fg",textDecoration:"underline",textUnderlineOffset:"0.2em",textDecorationColor:"colorPalette.muted"},currentLink:{color:"colorPalette.fg"}},plain:{link:{color:"fg.muted",_hover:{color:"fg"}},currentLink:{color:"fg"}}},size:{sm:{list:{gap:"1",textStyle:"xs"}},md:{list:{gap:"1.5",textStyle:"sm"}},lg:{list:{gap:"2",textStyle:"md"}}}},defaultVariants:{variant:"plain",size:"md"}}),cardSlotRecipe=defineSlotRecipe({className:"chakra-card",slots:cardAnatomy.keys(),base:{root:{display:"flex",flexDirection:"column",position:"relative",minWidth:"0",wordWrap:"break-word",borderRadius:"l3",color:"fg",textAlign:"start"},title:{fontWeight:"semibold"},description:{color:"fg.muted",fontSize:"sm"},header:{paddingInline:"var(--card-padding)",paddingTop:"var(--card-padding)",display:"flex",flexDirection:"column",gap:"1.5"},body:{padding:"var(--card-padding)",flex:"1",display:"flex",flexDirection:"column"},footer:{display:"flex",alignItems:"center",gap:"2",paddingInline:"var(--card-padding)",paddingBottom:"var(--card-padding)"}},variants:{size:{sm:{root:{"--card-padding":"spacing.4"},title:{textStyle:"md"}},md:{root:{"--card-padding":"spacing.6"},title:{textStyle:"lg"}},lg:{root:{"--card-padding":"spacing.7"},title:{textStyle:"xl"}}},variant:{elevated:{root:{bg:"bg.panel",boxShadow:"md"}},outline:{root:{bg:"bg.panel",borderWidth:"1px",borderColor:"border"}},subtle:{root:{bg:"bg.muted"}}}},defaultVariants:{variant:"outline",size:"md"}});var Vs,Gs,Ws,Hs,Xs,Ys,qs,Ks,Zs,Qs,Js,eo,to,ro;const checkboxSlotRecipe=defineSlotRecipe({slots:checkboxAnatomy.keys(),className:"chakra-checkbox",base:{root:{display:"inline-flex",gap:"2",alignItems:"center",verticalAlign:"top",position:"relative"},control:checkmarkRecipe.base,label:{fontWeight:"medium",userSelect:"none",_disabled:{opacity:"0.5"}}},variants:{size:{xs:{root:{gap:"1.5"},label:{textStyle:"xs"},control:(Gs=(Vs=checkmarkRecipe.variants)==null?void 0:Vs.size)==null?void 0:Gs.xs},sm:{root:{gap:"2"},label:{textStyle:"sm"},control:(Hs=(Ws=checkmarkRecipe.variants)==null?void 0:Ws.size)==null?void 0:Hs.sm},md:{root:{gap:"2.5"},label:{textStyle:"sm"},control:(Ys=(Xs=checkmarkRecipe.variants)==null?void 0:Xs.size)==null?void 0:Ys.md},lg:{root:{gap:"3"},label:{textStyle:"md"},control:(Ks=(qs=checkmarkRecipe.variants)==null?void 0:qs.size)==null?void 0:Ks.lg}},variant:{outline:{control:(Qs=(Zs=checkmarkRecipe.variants)==null?void 0:Zs.variant)==null?void 0:Qs.outline},solid:{control:(eo=(Js=checkmarkRecipe.variants)==null?void 0:Js.variant)==null?void 0:eo.solid},subtle:{control:(ro=(to=checkmarkRecipe.variants)==null?void 0:to.variant)==null?void 0:ro.subtle}}},defaultVariants:{variant:"solid",size:"md"}});var no,io,so,oo,ao,lo,uo;const checkboxCardSlotRecipe=defineSlotRecipe({slots:checkboxCardAnatomy.keys(),className:"chakra-checkbox-card",base:{root:{display:"flex",flexDirection:"column",userSelect:"none",position:"relative",borderRadius:"l2",flex:"1",focusVisibleRing:"outside",_disabled:{opacity:"0.8",borderColor:"border.subtle"},_invalid:{outline:"2px solid",outlineColor:"border.error"}},control:{display:"inline-flex",flex:"1",position:"relative",borderRadius:"inherit",justifyContent:"var(--checkbox-card-justify)",alignItems:"var(--checkbox-card-align)"},label:{fontWeight:"medium",display:"flex",alignItems:"center",gap:"2",_disabled:{opacity:"0.5"}},description:{opacity:"0.64",textStyle:"sm"},addon:{_disabled:{opacity:"0.5"}},indicator:checkmarkRecipe.base,content:{display:"flex",flexDirection:"column",flex:"1",gap:"1",justifyContent:"var(--checkbox-card-justify)",alignItems:"var(--checkbox-card-align)"}},variants:{size:{sm:{root:{textStyle:"sm"},control:{padding:"3",gap:"1.5"},addon:{px:"3",py:"1.5",borderTopWidth:"1px"},indicator:(no=checkmarkRecipe.variants)==null?void 0:no.size.sm},md:{root:{textStyle:"sm"},control:{padding:"4",gap:"2.5"},addon:{px:"4",py:"2",borderTopWidth:"1px"},indicator:(io=checkmarkRecipe.variants)==null?void 0:io.size.md},lg:{root:{textStyle:"md"},control:{padding:"4",gap:"3.5"},addon:{px:"4",py:"2",borderTopWidth:"1px"},indicator:(so=checkmarkRecipe.variants)==null?void 0:so.size.lg}},variant:{surface:{root:{borderWidth:"1px",borderColor:"border",_checked:{bg:"colorPalette.subtle",color:"colorPalette.fg",borderColor:"colorPalette.muted"},_disabled:{bg:"bg.muted"}},indicator:(oo=checkmarkRecipe.variants)==null?void 0:oo.variant.solid},subtle:{root:{bg:"bg.muted"},control:{_checked:{bg:"colorPalette.muted",color:"colorPalette.fg"}},indicator:(ao=checkmarkRecipe.variants)==null?void 0:ao.variant.plain},outline:{root:{borderWidth:"1px",borderColor:"border",_checked:{boxShadow:"0 0 0 1px var(--shadow-color)",boxShadowColor:"colorPalette.solid",borderColor:"colorPalette.solid"}},indicator:(lo=checkmarkRecipe.variants)==null?void 0:lo.variant.solid},solid:{root:{borderWidth:"1px",_checked:{bg:"colorPalette.solid",color:"colorPalette.contrast",borderColor:"colorPalette.solid"}},indicator:(uo=checkmarkRecipe.variants)==null?void 0:uo.variant.inverted}},justify:{start:{root:{"--checkbox-card-justify":"flex-start"}},end:{root:{"--checkbox-card-justify":"flex-end"}},center:{root:{"--checkbox-card-justify":"center"}}},align:{start:{root:{"--checkbox-card-align":"flex-start"},content:{textAlign:"start"}},end:{root:{"--checkbox-card-align":"flex-end"},content:{textAlign:"end"}},center:{root:{"--checkbox-card-align":"center"},content:{textAlign:"center"}}},orientation:{vertical:{control:{flexDirection:"column"}},horizontal:{control:{flexDirection:"row"}}}},defaultVariants:{size:"md",variant:"outline",align:"start",orientation:"horizontal"}}),collapsibleSlotRecipe=defineSlotRecipe({slots:anatomy$k.keys(),className:"chakra-collapsible",base:{content:{overflow:"hidden",_open:{animationName:"expand-height, fade-in",animationDuration:"moderate"},_closed:{animationName:"collapse-height, fade-out",animationDuration:"moderate"}}}});var co,ho,fo,po,go,mo,yo,bo,_o,vo,xo,So,wo,To,Eo,Ao,Co,Po;const colorPickerSlotRecipe=defineSlotRecipe({className:"colorPicker",slots:colorPickerAnatomy.keys(),base:{root:{display:"flex",flexDirection:"column",gap:"1.5"},label:{color:"fg",fontWeight:"medium",textStyle:"sm"},valueText:{textAlign:"start"},control:{display:"flex",alignItems:"center",flexDirection:"row",gap:"2",position:"relative"},swatchTrigger:{display:"flex",alignItems:"center",justifyContent:"center"},trigger:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"row",flexShrink:"0",gap:"2",textStyle:"sm",minH:"var(--input-height)",minW:"var(--input-height)",px:"1",rounded:"l2",_disabled:{opacity:"0.5"},"--focus-color":"colors.colorPalette.focusRing","&:focus-visible":{borderColor:"var(--focus-color)",outline:"1px solid var(--focus-color)"},"&[data-fit-content]":{"--input-height":"unset",px:"0",border:"0"}},content:{display:"flex",flexDirection:"column",bg:"bg.panel",borderRadius:"l3",boxShadow:"lg",width:"64",p:"4",gap:"3",zIndex:"dropdown",_open:{animationStyle:"slide-fade-in",animationDuration:"fast"},_closed:{animationStyle:"slide-fade-out",animationDuration:"faster"}},area:{height:"180px",borderRadius:"l2",overflow:"hidden"},areaThumb:{borderRadius:"full",height:"var(--thumb-size)",width:"var(--thumb-size)",borderWidth:"2px",borderColor:"white",shadow:"sm",focusVisibleRing:"mixed",focusRingColor:"white"},areaBackground:{height:"full"},channelSlider:{borderRadius:"l2",flex:"1"},channelSliderTrack:{height:"var(--slider-height)",borderRadius:"inherit",boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"},swatchGroup:{display:"flex",flexDirection:"row",flexWrap:"wrap",gap:"2"},swatch:{...colorSwatchRecipe.base,borderRadius:"l1"},swatchIndicator:{color:"white",rounded:"full"},channelSliderThumb:{borderRadius:"full",height:"var(--thumb-size)",width:"var(--thumb-size)",borderWidth:"2px",borderColor:"white",shadow:"sm",transform:"translate(-50%, -50%)",focusVisibleRing:"outside",focusRingOffset:"1px"},channelInput:{...inputRecipe.base,"&::-webkit-inner-spin-button, &::-webkit-outer-spin-button":{WebkitAppearance:"none",margin:0}},formatSelect:{textStyle:"xs",textTransform:"uppercase",borderWidth:"1px",minH:"6",focusRing:"inside",rounded:"l2"},transparencyGrid:{borderRadius:"l2"},view:{display:"flex",flexDirection:"column",gap:"2"}},variants:{size:{"2xs":{channelInput:(ho=(co=inputRecipe.variants)==null?void 0:co.size)==null?void 0:ho["2xs"],swatch:{"--swatch-size":"sizes.4.5"},trigger:{"--input-height":"sizes.7"},area:{"--thumb-size":"sizes.3"},channelSlider:{"--slider-height":"sizes.3","--thumb-size":"sizes.3"}},xs:{channelInput:(po=(fo=inputRecipe.variants)==null?void 0:fo.size)==null?void 0:po.xs,swatch:{"--swatch-size":"sizes.5"},trigger:{"--input-height":"sizes.8"},area:{"--thumb-size":"sizes.3.5"},channelSlider:{"--slider-height":"sizes.3.5","--thumb-size":"sizes.3.5"}},sm:{channelInput:(mo=(go=inputRecipe.variants)==null?void 0:go.size)==null?void 0:mo.sm,swatch:{"--swatch-size":"sizes.6"},trigger:{"--input-height":"sizes.9"},area:{"--thumb-size":"sizes.3.5"},channelSlider:{"--slider-height":"sizes.3.5","--thumb-size":"sizes.3.5"}},md:{channelInput:(bo=(yo=inputRecipe.variants)==null?void 0:yo.size)==null?void 0:bo.md,swatch:{"--swatch-size":"sizes.7"},trigger:{"--input-height":"sizes.10"},area:{"--thumb-size":"sizes.3.5"},channelSlider:{"--slider-height":"sizes.3.5","--thumb-size":"sizes.3.5"}},lg:{channelInput:(vo=(_o=inputRecipe.variants)==null?void 0:_o.size)==null?void 0:vo.lg,swatch:{"--swatch-size":"sizes.7"},trigger:{"--input-height":"sizes.11"},area:{"--thumb-size":"sizes.3.5"},channelSlider:{"--slider-height":"sizes.3.5","--thumb-size":"sizes.3.5"}},xl:{channelInput:(So=(xo=inputRecipe.variants)==null?void 0:xo.size)==null?void 0:So.xl,swatch:{"--swatch-size":"sizes.8"},trigger:{"--input-height":"sizes.12"},area:{"--thumb-size":"sizes.3.5"},channelSlider:{"--slider-height":"sizes.3.5","--thumb-size":"sizes.3.5"}},"2xl":{channelInput:(To=(wo=inputRecipe.variants)==null?void 0:wo.size)==null?void 0:To["2xl"],swatch:{"--swatch-size":"sizes.10"},trigger:{"--input-height":"sizes.16"},area:{"--thumb-size":"sizes.3.5"},channelSlider:{"--slider-height":"sizes.3.5","--thumb-size":"sizes.3.5"}}},variant:{outline:{channelInput:(Ao=(Eo=inputRecipe.variants)==null?void 0:Eo.variant)==null?void 0:Ao.outline,trigger:{borderWidth:"1px"}},subtle:{channelInput:(Po=(Co=inputRecipe.variants)==null?void 0:Co.variant)==null?void 0:Po.subtle,trigger:{borderWidth:"1px",borderColor:"transparent",bg:"bg.muted"}}}},defaultVariants:{size:"md",variant:"outline"}}),dataListSlotRecipe=defineSlotRecipe({slots:dataListAnatomy.keys(),className:"chakra-data-list",base:{itemLabel:{display:"flex",alignItems:"center",gap:"1"},itemValue:{display:"flex",minWidth:"0",flex:"1"}},variants:{orientation:{horizontal:{root:{display:"flex",flexDirection:"column"},item:{display:"inline-flex",alignItems:"center",gap:"4"},itemLabel:{minWidth:"120px"}},vertical:{root:{display:"flex",flexDirection:"column"},item:{display:"flex",flexDirection:"column",gap:"1"}}},size:{sm:{root:{gap:"3"},item:{textStyle:"xs"}},md:{root:{gap:"4"},item:{textStyle:"sm"}},lg:{root:{gap:"5"},item:{textStyle:"md"}}},variant:{subtle:{itemLabel:{color:"fg.muted"}},bold:{itemLabel:{fontWeight:"medium"},itemValue:{color:"fg.muted"}}}},defaultVariants:{size:"md",orientation:"vertical",variant:"subtle"}}),dialogSlotRecipe=defineSlotRecipe({slots:dialogAnatomy.keys(),className:"chakra-dialog",base:{backdrop:{bg:"blackAlpha.500",pos:"fixed",left:0,top:0,w:"100vw",h:"100dvh",zIndex:"modal",_open:{animationName:"fade-in",animationDuration:"slow"},_closed:{animationName:"fade-out",animationDuration:"moderate"}},positioner:{display:"flex",width:"100vw",height:"100dvh",position:"fixed",left:0,top:0,"--dialog-z-index":"zIndex.modal",zIndex:"calc(var(--dialog-z-index) + var(--layer-index, 0))",justifyContent:"center",overscrollBehaviorY:"none"},content:{display:"flex",flexDirection:"column",position:"relative",width:"100%",outline:0,borderRadius:"l3",textStyle:"sm",my:"var(--dialog-margin, var(--dialog-base-margin))","--dialog-z-index":"zIndex.modal",zIndex:"calc(var(--dialog-z-index) + var(--layer-index, 0))",bg:"bg.panel",boxShadow:"lg",_open:{animationDuration:"moderate"},_closed:{animationDuration:"faster"}},header:{flex:0,px:"6",pt:"6",pb:"4"},body:{flex:"1",px:"6",pt:"2",pb:"6"},footer:{display:"flex",alignItems:"center",justifyContent:"flex-end",gap:"3",px:"6",pt:"2",pb:"4"},title:{textStyle:"lg",fontWeight:"semibold"},description:{color:"fg.muted"}},variants:{placement:{center:{positioner:{alignItems:"center"},content:{"--dialog-base-margin":"auto",mx:"auto"}},top:{positioner:{alignItems:"flex-start"},content:{"--dialog-base-margin":"spacing.16",mx:"auto"}},bottom:{positioner:{alignItems:"flex-end"},content:{"--dialog-base-margin":"spacing.16",mx:"auto"}}},scrollBehavior:{inside:{positioner:{overflow:"hidden"},content:{maxH:"calc(100% - 7.5rem)"},body:{overflow:"auto"}},outside:{positioner:{overflow:"auto",pointerEvents:"auto"}}},size:{xs:{content:{maxW:"sm"}},sm:{content:{maxW:"md"}},md:{content:{maxW:"lg"}},lg:{content:{maxW:"2xl"}},xl:{content:{maxW:"4xl"}},cover:{positioner:{padding:"10"},content:{width:"100%",height:"100%","--dialog-margin":"0"}},full:{content:{maxW:"100vw",minH:"100vh","--dialog-margin":"0",borderRadius:"0"}}},motionPreset:{scale:{content:{_open:{animationName:"scale-in, fade-in"},_closed:{animationName:"scale-out, fade-out"}}},"slide-in-bottom":{content:{_open:{animationName:"slide-from-bottom, fade-in"},_closed:{animationName:"slide-to-bottom, fade-out"}}},"slide-in-top":{content:{_open:{animationName:"slide-from-top, fade-in"},_closed:{animationName:"slide-to-top, fade-out"}}},"slide-in-left":{content:{_open:{animationName:"slide-from-left, fade-in"},_closed:{animationName:"slide-to-left, fade-out"}}},"slide-in-right":{content:{_open:{animationName:"slide-from-right, fade-in"},_closed:{animationName:"slide-to-right, fade-out"}}},none:{}}},defaultVariants:{size:"md",scrollBehavior:"outside",placement:"top",motionPreset:"scale"}}),drawerSlotRecipe=defineSlotRecipe({slots:drawerAnatomy.keys(),className:"chakra-drawer",base:{backdrop:{bg:"blackAlpha.500",pos:"fixed",insetInlineStart:0,top:0,w:"100vw",h:"100dvh",zIndex:"modal",_open:{animationName:"fade-in",animationDuration:"slow"},_closed:{animationName:"fade-out",animationDuration:"moderate"}},positioner:{display:"flex",width:"100vw",height:"100dvh",position:"fixed",insetInlineStart:0,top:0,zIndex:"modal",overscrollBehaviorY:"none"},content:{display:"flex",flexDirection:"column",position:"relative",width:"100%",outline:0,zIndex:"modal",textStyle:"sm",maxH:"100dvh",color:"inherit",bg:"bg.panel",boxShadow:"lg",_open:{animationDuration:"slowest",animationTimingFunction:"ease-in-smooth"},_closed:{animationDuration:"slower",animationTimingFunction:"ease-in-smooth"}},header:{flex:0,px:"6",pt:"6",pb:"4"},body:{px:"6",py:"2",flex:"1",overflow:"auto"},footer:{display:"flex",alignItems:"center",justifyContent:"flex-end",gap:"3",px:"6",pt:"2",pb:"4"},title:{textStyle:"lg",fontWeight:"semibold"},description:{color:"fg.muted"}},variants:{size:{xs:{content:{maxW:"xs"}},sm:{content:{maxW:"md"}},md:{content:{maxW:"lg"}},lg:{content:{maxW:"2xl"}},xl:{content:{maxW:"4xl"}},full:{content:{maxW:"100vw",h:"100dvh"}}},placement:{start:{positioner:{justifyContent:"flex-start"},content:{_open:{animationName:{base:"slide-from-left-full, fade-in",_rtl:"slide-from-right-full, fade-in"}},_closed:{animationName:{base:"slide-to-left-full, fade-out",_rtl:"slide-to-right-full, fade-out"}}}},end:{positioner:{justifyContent:"flex-end"},content:{_open:{animationName:{base:"slide-from-right-full, fade-in",_rtl:"slide-from-left-full, fade-in"}},_closed:{animationName:{base:"slide-to-right-full, fade-out",_rtl:"slide-to-right-full, fade-out"}}}},top:{positioner:{alignItems:"flex-start"},content:{maxW:"100%",_open:{animationName:"slide-from-top-full, fade-in"},_closed:{animationName:"slide-to-top-full, fade-out"}}},bottom:{positioner:{alignItems:"flex-end"},content:{maxW:"100%",_open:{animationName:"slide-from-bottom-full, fade-in"},_closed:{animationName:"slide-to-bottom-full, fade-out"}}}},contained:{true:{positioner:{padding:"4"},content:{borderRadius:"l3"}}}},defaultVariants:{size:"xs",placement:"end"}}),sharedStyles=defineStyle({fontSize:"inherit",fontWeight:"inherit",textAlign:"inherit",bg:"transparent",borderRadius:"l2"}),editableSlotRecipe=defineSlotRecipe({slots:editableAnatomy.keys(),className:"chakra-editable",base:{root:{display:"inline-flex",alignItems:"center",position:"relative",gap:"1.5",width:"full"},preview:{...sharedStyles,py:"1",px:"1",display:"inline-flex",alignItems:"center",transitionProperty:"common",transitionDuration:"normal",cursor:"text",_hover:{bg:"bg.muted"},_disabled:{userSelect:"none"}},input:{...sharedStyles,outline:"0",py:"1",px:"1",transitionProperty:"common",transitionDuration:"normal",width:"full",focusVisibleRing:"inside",focusRingWidth:"2px",_placeholder:{opacity:.6}},control:{display:"inline-flex",alignItems:"center",gap:"1.5"}},variants:{size:{sm:{root:{textStyle:"sm"},preview:{minH:"8"},input:{minH:"8"}},md:{root:{textStyle:"sm"},preview:{minH:"9"},input:{minH:"9"}},lg:{root:{textStyle:"md"},preview:{minH:"10"},input:{minH:"10"}}}},defaultVariants:{size:"md"}}),emptyStateSlotRecipe=defineSlotRecipe({slots:emptyStateAnatomy.keys(),className:"chakra-empty-state",base:{root:{width:"full"},content:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},indicator:{display:"flex",alignItems:"center",justifyContent:"center",color:"fg.subtle",_icon:{boxSize:"1em"}},title:{fontWeight:"semibold"},description:{textStyle:"sm",color:"fg.muted"}},variants:{size:{sm:{root:{px:"4",py:"6"},title:{textStyle:"md"},content:{gap:"4"},indicator:{textStyle:"2xl"}},md:{root:{px:"8",py:"12"},title:{textStyle:"lg"},content:{gap:"6"},indicator:{textStyle:"4xl"}},lg:{root:{px:"12",py:"16"},title:{textStyle:"xl"},content:{gap:"8"},indicator:{textStyle:"6xl"}}}},defaultVariants:{size:"md"}}),fieldSlotRecipe=defineSlotRecipe({className:"chakra-field",slots:fieldAnatomy.keys(),base:{requiredIndicator:{color:"fg.error",lineHeight:"1"},root:{display:"flex",width:"100%",position:"relative",gap:"1.5"},label:{display:"flex",alignItems:"center",textAlign:"start",textStyle:"sm",fontWeight:"medium",gap:"1",userSelect:"none",_disabled:{opacity:"0.5"}},errorText:{display:"inline-flex",alignItems:"center",fontWeight:"medium",gap:"1",color:"fg.error",textStyle:"xs"},helperText:{color:"fg.muted",textStyle:"xs"}},variants:{orientation:{vertical:{root:{flexDirection:"column",alignItems:"flex-start"}},horizontal:{root:{flexDirection:"row",alignItems:"center",justifyContent:"space-between"},label:{flex:"0 0 var(--field-label-width, 80px)"}}}},defaultVariants:{orientation:"vertical"}}),fieldsetSlotRecipe=defineSlotRecipe({className:"fieldset",slots:fieldsetAnatomy.keys(),base:{root:{display:"flex",flexDirection:"column",width:"full"},content:{display:"flex",flexDirection:"column",width:"full"},legend:{color:"fg",fontWeight:"medium",_disabled:{opacity:"0.5"}},helperText:{color:"fg.muted",textStyle:"sm"},errorText:{display:"inline-flex",alignItems:"center",color:"fg.error",gap:"2",fontWeight:"medium",textStyle:"sm"}},variants:{size:{sm:{root:{spaceY:"2"},content:{gap:"1.5"},legend:{textStyle:"sm"}},md:{root:{spaceY:"4"},content:{gap:"4"},legend:{textStyle:"sm"}},lg:{root:{spaceY:"6"},content:{gap:"4"},legend:{textStyle:"md"}}}},defaultVariants:{size:"md"}}),fileUploadSlotRecipe=defineSlotRecipe({className:"chakra-file-upload",slots:fileUploadAnatomy.keys(),base:{root:{display:"flex",flexDirection:"column",gap:"4",width:"100%",alignItems:"flex-start"},label:{fontWeight:"medium",textStyle:"sm"},dropzone:{background:"bg",borderRadius:"l3",borderWidth:"2px",borderStyle:"dashed",display:"flex",alignItems:"center",flexDirection:"column",gap:"4",justifyContent:"center",minHeight:"2xs",px:"3",py:"2",transition:"backgrounds",focusVisibleRing:"outside",_hover:{bg:"bg.subtle"},_dragging:{bg:"colorPalette.subtle",borderStyle:"solid",borderColor:"colorPalette.solid"}},dropzoneContent:{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",gap:"1",textStyle:"sm"},item:{textStyle:"sm",animationName:"fade-in",animationDuration:"moderate",background:"bg",borderRadius:"l2",borderWidth:"1px",width:"100%",display:"flex",alignItems:"center",gap:"3",p:"4"},itemGroup:{width:"100%",display:"flex",flexDirection:"column",gap:"3"},itemName:{color:"fg",fontWeight:"medium",lineClamp:"1"},itemContent:{display:"flex",flexDirection:"column",gap:"0.5",flex:"1"},itemSizeText:{color:"fg.muted",textStyle:"xs"},itemDeleteTrigger:{alignSelf:"flex-start"},itemPreviewImage:{width:"10",height:"10",objectFit:"scale-down"}},defaultVariants:{}}),hoverCardSlotRecipe=defineSlotRecipe({className:"chakra-hover-card",slots:anatomy$6.keys(),base:{content:{position:"relative",display:"flex",flexDirection:"column",textStyle:"sm","--hovercard-bg":"colors.bg.panel",bg:"var(--hovercard-bg)",boxShadow:"lg",maxWidth:"80",borderRadius:"l3",zIndex:"popover",transformOrigin:"var(--transform-origin)",outline:"0",_open:{animationStyle:"slide-fade-in",animationDuration:"fast"},_closed:{animationStyle:"slide-fade-out",animationDuration:"faster"}},arrow:{"--arrow-size":"sizes.3","--arrow-background":"var(--hovercard-bg)"},arrowTip:{borderTopWidth:"0.5px",borderInlineStartWidth:"0.5px"}},variants:{size:{xs:{content:{padding:"3"}},sm:{content:{padding:"4"}},md:{content:{padding:"5"}},lg:{content:{padding:"6"}}}},defaultVariants:{size:"md"}}),listSlotRecipe=defineSlotRecipe({className:"chakra-list",slots:listAnatomy.keys(),base:{root:{display:"flex",flexDirection:"column",gap:"var(--list-gap)","& :where(ul, ol)":{marginTop:"var(--list-gap)"}},item:{whiteSpace:"normal",display:"list-item"},indicator:{marginEnd:"2",minHeight:"1lh",flexShrink:0,display:"inline-block",verticalAlign:"middle"}},variants:{variant:{marker:{root:{listStyle:"revert",listStylePosition:"inside"},item:{_marker:{color:"fg.subtle"}}},plain:{item:{alignItems:"flex-start",display:"inline-flex"}}},align:{center:{item:{alignItems:"center"}},start:{item:{alignItems:"flex-start"}},end:{item:{alignItems:"flex-end"}}}},defaultVariants:{variant:"marker"}}),menuSlotRecipe=defineSlotRecipe({className:"chakra-menu",slots:menuAnatomy.keys(),base:{content:{outline:0,bg:"bg.panel",boxShadow:"lg",color:"fg",maxHeight:"var(--available-height)","--menu-z-index":"zIndex.dropdown",zIndex:"calc(var(--menu-z-index) + var(--layer-index, 0))",borderRadius:"l2",overflow:"hidden",overflowY:"auto",_open:{animationStyle:"slide-fade-in",animationDuration:"fast"},_closed:{animationStyle:"slide-fade-out",animationDuration:"faster"}},item:{textDecoration:"none",color:"fg",userSelect:"none",borderRadius:"l1",width:"100%",display:"flex",cursor:"menuitem",alignItems:"center",textAlign:"start",position:"relative",flex:"0 0 auto",outline:0,_disabled:{layerStyle:"disabled"}},itemText:{flex:"1"},itemGroupLabel:{px:"2",py:"1.5",fontWeight:"semibold",textStyle:"sm"},indicator:{display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:"0"},itemCommand:{opacity:"0.6",textStyle:"xs",ms:"auto",ps:"4",letterSpacing:"widest"},separator:{height:"1px",bg:"bg.muted",my:"1",mx:"-1"}},variants:{variant:{subtle:{item:{_highlighted:{bg:"bg.emphasized/60"}}},solid:{item:{_highlighted:{bg:"colorPalette.solid",color:"colorPalette.contrast"}}}},size:{sm:{content:{minW:"8rem",padding:"1"},item:{gap:"1",textStyle:"xs",py:"1",px:"1.5"}},md:{content:{minW:"8rem",padding:"1.5"},item:{gap:"2",textStyle:"sm",py:"1.5",px:"2"}}}},defaultVariants:{size:"md",variant:"subtle"}}),selectSlotRecipe=defineSlotRecipe({className:"chakra-select",slots:selectAnatomy.keys(),base:{root:{display:"flex",flexDirection:"column",gap:"1.5",width:"full"},trigger:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"full",minH:"var(--select-trigger-height)",px:"var(--select-trigger-padding-x)",borderRadius:"l2",userSelect:"none",textAlign:"start",focusVisibleRing:"inside",_placeholderShown:{color:"fg.muted/80"},_disabled:{layerStyle:"disabled"},_invalid:{borderColor:"border.error"}},indicatorGroup:{display:"flex",alignItems:"center",gap:"1",pos:"absolute",right:"0",top:"0",bottom:"0",px:"var(--select-trigger-padding-x)",pointerEvents:"none"},indicator:{display:"flex",alignItems:"center",justifyContent:"center",color:{base:"fg.muted",_disabled:"fg.subtle",_invalid:"fg.error"}},content:{background:"bg.panel",display:"flex",flexDirection:"column",zIndex:"dropdown",borderRadius:"l2",outline:0,maxH:"96",overflowY:"auto",boxShadow:"md",_open:{animationStyle:"slide-fade-in",animationDuration:"fast"},_closed:{animationStyle:"slide-fade-out",animationDuration:"fastest"}},item:{position:"relative",userSelect:"none",display:"flex",alignItems:"center",gap:"2",cursor:"option",justifyContent:"space-between",flex:"1",textAlign:"start",borderRadius:"l1",_highlighted:{bg:"bg.emphasized/60"},_disabled:{pointerEvents:"none",opacity:"0.5"},_icon:{width:"4",height:"4"}},control:{pos:"relative"},itemText:{flex:"1"},itemGroup:{_first:{mt:"0"}},itemGroupLabel:{py:"1",fontWeight:"medium"},label:{fontWeight:"medium",userSelect:"none",textStyle:"sm",_disabled:{layerStyle:"disabled"}},valueText:{lineClamp:"1",maxW:"80%"}},variants:{variant:{outline:{trigger:{bg:"transparent",borderWidth:"1px",borderColor:"border",_expanded:{borderColor:"border.emphasized"}}},subtle:{trigger:{borderWidth:"1px",borderColor:"transparent",bg:"bg.muted"}}},size:{xs:{root:{"--select-trigger-height":"sizes.8","--select-trigger-padding-x":"spacing.2"},content:{p:"1",gap:"1",textStyle:"xs"},trigger:{textStyle:"xs",gap:"1"},item:{py:"1",px:"2"},itemGroupLabel:{py:"1",px:"2"},indicator:{_icon:{width:"3.5",height:"3.5"}}},sm:{root:{"--select-trigger-height":"sizes.9","--select-trigger-padding-x":"spacing.2.5"},content:{p:"1",textStyle:"sm"},trigger:{textStyle:"sm",gap:"1"},indicator:{_icon:{width:"4",height:"4"}},item:{py:"1",px:"1.5"},itemGroup:{mt:"1"},itemGroupLabel:{py:"1",px:"1.5"}},md:{root:{"--select-trigger-height":"sizes.10","--select-trigger-padding-x":"spacing.3"},content:{p:"1",textStyle:"sm"},itemGroup:{mt:"1.5"},item:{py:"1.5",px:"2"},itemIndicator:{display:"flex",alignItems:"center",justifyContent:"center"},itemGroupLabel:{py:"1.5",px:"2"},trigger:{textStyle:"sm",gap:"2"},indicator:{_icon:{width:"4",height:"4"}}},lg:{root:{"--select-trigger-height":"sizes.12","--select-trigger-padding-x":"spacing.4"},content:{p:"1.5",textStyle:"md"},itemGroup:{mt:"2"},item:{py:"2",px:"3"},itemGroupLabel:{py:"2",px:"3"},trigger:{textStyle:"md",py:"3",gap:"2"},indicator:{_icon:{width:"5",height:"5"}}}}},defaultVariants:{size:"md",variant:"outline"}});var Io,Ro;const nativeSelectSlotRecipe=defineSlotRecipe({className:"chakra-native-select",slots:nativeSelectAnatomy.keys(),base:{root:{height:"fit-content",display:"flex",width:"100%",position:"relative"},field:{width:"100%",minWidth:"0",outline:"0",appearance:"none",borderRadius:"l2","--error-color":"colors.border.error",_disabled:{layerStyle:"disabled"},_invalid:{focusRingColor:"var(--error-color)",borderColor:"var(--error-color)"},focusVisibleRing:"inside",lineHeight:"normal","& > option, & > optgroup":{bg:"bg"}},indicator:{position:"absolute",display:"inline-flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",top:"50%",transform:"translateY(-50%)",height:"100%",color:"fg.muted",_disabled:{opacity:"0.5"},_invalid:{color:"fg.error"},_icon:{width:"1em",height:"1em"}}},variants:{variant:{outline:{field:(Io=selectSlotRecipe.variants)==null?void 0:Io.variant.outline.trigger},subtle:{field:(Ro=selectSlotRecipe.variants)==null?void 0:Ro.variant.subtle.trigger},plain:{field:{bg:"transparent",color:"fg",focusRingWidth:"2px"}}},size:{xs:{field:{textStyle:"xs",ps:"2",pe:"6",height:"6"},indicator:{textStyle:"sm",insetEnd:"1.5"}},sm:{field:{textStyle:"sm",ps:"2.5",pe:"8",height:"8"},indicator:{textStyle:"md",insetEnd:"2"}},md:{field:{textStyle:"sm",ps:"3",pe:"8",height:"10"},indicator:{textStyle:"lg",insetEnd:"2"}},lg:{field:{textStyle:"md",ps:"4",pe:"8",height:"11"},indicator:{textStyle:"xl",insetEnd:"3"}},xl:{field:{textStyle:"md",ps:"4.5",pe:"10",height:"12"},indicator:{textStyle:"xl",insetEnd:"3"}}}},defaultVariants:selectSlotRecipe.defaultVariants});function mapEntries(_e,_){const et={};for(const tt in _e){const rt=_(tt,_e[tt]);et[rt[0]]=rt[1]}return et}const triggerStyle=defineStyle({display:"flex",justifyContent:"center",alignItems:"center",flex:"1",userSelect:"none",cursor:"button",lineHeight:"1",color:"fg.muted","--stepper-base-radius":"radii.l1","--stepper-radius":"calc(var(--stepper-base-radius) + 1px)",_icon:{boxSize:"1em"},_disabled:{opacity:"0.5"},_hover:{bg:"bg.muted"},_active:{bg:"bg.emphasized"}}),numberInputSlotRecipe=defineSlotRecipe({className:"chakra-number-input",slots:anatomy$5.keys(),base:{root:{position:"relative",zIndex:"0",isolation:"isolate"},input:{...inputRecipe.base,verticalAlign:"top",pe:"calc(var(--stepper-width) + 0.5rem)"},control:{display:"flex",flexDirection:"column",position:"absolute",top:"0",insetEnd:"0px",margin:"1px",width:"var(--stepper-width)",height:"calc(100% - 2px)",zIndex:"1",borderStartWidth:"1px",divideY:"1px"},incrementTrigger:{...triggerStyle,borderTopEndRadius:"var(--stepper-radius)"},decrementTrigger:{...triggerStyle,borderBottomEndRadius:"var(--stepper-radius)"},valueText:{fontWeight:"medium",fontFeatureSettings:"pnum",fontVariantNumeric:"proportional-nums"}},variants:{size:{xs:{input:inputRecipe.variants.size.xs,control:{fontSize:"2xs","--stepper-width":"sizes.4"}},sm:{input:inputRecipe.variants.size.sm,control:{fontSize:"xs","--stepper-width":"sizes.5"}},md:{input:inputRecipe.variants.size.md,control:{fontSize:"sm","--stepper-width":"sizes.6"}},lg:{input:inputRecipe.variants.size.lg,control:{fontSize:"sm","--stepper-width":"sizes.6"}}},variant:mapEntries(inputRecipe.variants.variant,(_e,_)=>[_e,{input:_}])},defaultVariants:{size:"md",variant:"outline"}}),{variants,defaultVariants}=inputRecipe,pinInputSlotRecipe=defineSlotRecipe({className:"chakra-pin-input",slots:anatomy$4.keys(),base:{input:{...inputRecipe.base,textAlign:"center",width:"var(--input-height)"}},variants:{size:mapEntries(variants.size,(_e,_)=>[_e,{input:_}]),variant:mapEntries(variants.variant,(_e,_)=>[_e,{input:_}])},defaultVariants}),popoverSlotRecipe=defineSlotRecipe({className:"chakra-popover",slots:popoverAnatomy.keys(),base:{content:{position:"relative",display:"flex",flexDirection:"column",textStyle:"sm","--popover-bg":"colors.bg.panel",bg:"var(--popover-bg)",boxShadow:"lg","--popover-size":"sizes.xs","--popover-mobile-size":"calc(100dvw - 1rem)",width:{base:"min(var(--popover-mobile-size), var(--popover-size))",sm:"var(--popover-size)"},borderRadius:"l3","--popover-z-index":"zIndex.popover",zIndex:"calc(var(--popover-z-index) + var(--layer-index, 0))",outline:"0",transformOrigin:"var(--transform-origin)",maxHeight:"var(--available-height)",_open:{animationStyle:"scale-fade-in",animationDuration:"fast"},_closed:{animationStyle:"scale-fade-out",animationDuration:"faster"}},header:{paddingInline:"var(--popover-padding)",paddingTop:"var(--popover-padding)"},body:{padding:"var(--popover-padding)",flex:"1"},footer:{display:"flex",alignItems:"center",paddingInline:"var(--popover-padding)",paddingBottom:"var(--popover-padding)"},arrow:{"--arrow-size":"sizes.3","--arrow-background":"var(--popover-bg)"},arrowTip:{borderTopWidth:"1px",borderInlineStartWidth:"1px"}},variants:{size:{xs:{content:{"--popover-padding":"spacing.3"}},sm:{content:{"--popover-padding":"spacing.4"}},md:{content:{"--popover-padding":"spacing.5"}},lg:{content:{"--popover-padding":"spacing.6"}}}},defaultVariants:{size:"md"}}),progressSlotRecipe=defineSlotRecipe({slots:anatomy$3.keys(),className:"chakra-progress",base:{root:{textStyle:"sm",position:"relative"},track:{overflow:"hidden",position:"relative"},range:{display:"flex",alignItems:"center",justifyContent:"center",transitionProperty:"width, height",transitionDuration:"slow",height:"100%",bgColor:"var(--track-color)",_indeterminate:{"--animate-from-x":"-40%","--animate-to-x":"100%",position:"absolute",willChange:"left",minWidth:"50%",animation:"position 1s ease infinite normal none running",backgroundImage:"linear-gradient(to right, transparent 0%, var(--track-color) 50%, transparent 100%)"}},label:{display:"inline-flex",fontWeight:"medium",alignItems:"center",gap:"1"},valueText:{textStyle:"xs",lineHeight:"1",fontWeight:"medium"}},variants:{variant:{outline:{track:{shadow:"inset",bgColor:"bg.muted"},range:{bgColor:"colorPalette.solid"}},subtle:{track:{bgColor:"colorPalette.muted"},range:{bgColor:"colorPalette.solid/72"}}},shape:{square:{},rounded:{track:{borderRadius:"l1"}},full:{track:{borderRadius:"full"}}},striped:{true:{range:{backgroundImage:"linear-gradient(45deg, var(--stripe-color) 25%, transparent 25%, transparent 50%, var(--stripe-color) 50%, var(--stripe-color) 75%, transparent 75%, transparent)",backgroundSize:"var(--stripe-size) var(--stripe-size)","--stripe-size":"1rem","--stripe-color":{_light:"rgba(255, 255, 255, 0.3)",_dark:"rgba(0, 0, 0, 0.3)"}}}},animated:{true:{range:{"--animate-from":"var(--stripe-size)",animation:"bg-position 1s linear infinite"}}},size:{xs:{track:{h:"1.5"}},sm:{track:{h:"2"}},md:{track:{h:"2.5"}},lg:{track:{h:"3"}},xl:{track:{h:"4"}}}},defaultVariants:{variant:"outline",size:"md",shape:"rounded"}}),progressCircleSlotRecipe=defineSlotRecipe({className:"chakra-progress-circle",slots:anatomy$3.keys(),base:{root:{display:"inline-flex",textStyle:"sm",position:"relative"},circle:{_indeterminate:{animation:"spin 2s linear infinite"}},circleTrack:{"--track-color":"colors.colorPalette.muted",stroke:"var(--track-color)"},circleRange:{stroke:"colorPalette.solid",transitionProperty:"stroke-dasharray",transitionDuration:"0.6s",_indeterminate:{animation:"circular-progress 1.5s linear infinite"}},label:{display:"inline-flex"},valueText:{lineHeight:"1",fontWeight:"medium",letterSpacing:"tight",fontVariantNumeric:"tabular-nums"}},variants:{size:{xs:{circle:{"--size":"24px","--thickness":"4px"},valueText:{textStyle:"2xs"}},sm:{circle:{"--size":"32px","--thickness":"5px"},valueText:{textStyle:"2xs"}},md:{circle:{"--size":"40px","--thickness":"6px"},valueText:{textStyle:"xs"}},lg:{circle:{"--size":"48px","--thickness":"7px"},valueText:{textStyle:"sm"}},xl:{circle:{"--size":"64px","--thickness":"8px"},valueText:{textStyle:"sm"}}}},defaultVariants:{size:"md"}}),qrCodeSlotRecipe=defineSlotRecipe({slots:anatomy$2.keys(),className:"chakra-qr-code",base:{root:{position:"relative",width:"fit-content","--qr-code-overlay-size":"calc(var(--qr-code-size) / 3)"},frame:{width:"var(--qr-code-size)",height:"var(--qr-code-size)",fill:"currentColor"},overlay:{display:"flex",alignItems:"center",justifyContent:"center",width:"var(--qr-code-overlay-size)",height:"var(--qr-code-overlay-size)",padding:"1",bg:"bg",rounded:"l1"}},variants:{size:{"2xs":{root:{"--qr-code-size":"40px"}},xs:{root:{"--qr-code-size":"64px"}},sm:{root:{"--qr-code-size":"80px"}},md:{root:{"--qr-code-size":"120px"}},lg:{root:{"--qr-code-size":"160px"}},xl:{root:{"--qr-code-size":"200px"}},"2xl":{root:{"--qr-code-size":"240px"}},full:{root:{"--qr-code-size":"100%"}}}},defaultVariants:{size:"md"}});var Mo,Oo,ko,Do,Fo,Lo,$o;const radioCardSlotRecipe=defineSlotRecipe({className:"chakra-radio-card",slots:radioCardAnatomy.keys(),base:{root:{display:"flex",flexDirection:"column",gap:"1.5",isolation:"isolate"},item:{flex:"1",display:"flex",flexDirection:"column",userSelect:"none",position:"relative",borderRadius:"l2",_focus:{bg:"colorPalette.muted/20"},_disabled:{opacity:"0.8",borderColor:"border.disabled"},_checked:{zIndex:"1"}},label:{display:"inline-flex",fontWeight:"medium",textStyle:"sm",_disabled:{opacity:"0.5"}},itemText:{fontWeight:"medium"},itemDescription:{opacity:"0.64",textStyle:"sm"},itemControl:{display:"inline-flex",flex:"1",pos:"relative",rounded:"inherit",justifyContent:"var(--radio-card-justify)",alignItems:"var(--radio-card-align)",_disabled:{bg:"bg.muted"}},itemIndicator:radiomarkRecipe.base,itemAddon:{roundedBottom:"inherit",_disabled:{color:"fg.muted"}},itemContent:{display:"flex",flexDirection:"column",flex:"1",gap:"1",justifyContent:"var(--radio-card-justify)",alignItems:"var(--radio-card-align)"}},variants:{size:{sm:{item:{textStyle:"sm"},itemControl:{padding:"3",gap:"1.5"},itemAddon:{px:"3",py:"1.5",borderTopWidth:"1px"},itemIndicator:(Mo=radiomarkRecipe.variants)==null?void 0:Mo.size.sm},md:{item:{textStyle:"sm"},itemControl:{padding:"4",gap:"2.5"},itemAddon:{px:"4",py:"2",borderTopWidth:"1px"},itemIndicator:(Oo=radiomarkRecipe.variants)==null?void 0:Oo.size.md},lg:{item:{textStyle:"md"},itemControl:{padding:"4",gap:"3.5"},itemAddon:{px:"4",py:"2",borderTopWidth:"1px"},itemIndicator:(ko=radiomarkRecipe.variants)==null?void 0:ko.size.lg}},variant:{surface:{item:{borderWidth:"1px",_checked:{bg:"colorPalette.subtle",color:"colorPalette.fg",borderColor:"colorPalette.muted"}},itemIndicator:(Do=radiomarkRecipe.variants)==null?void 0:Do.variant.solid},subtle:{item:{bg:"bg.muted"},itemControl:{_checked:{bg:"colorPalette.muted",color:"colorPalette.fg"}},itemIndicator:(Fo=radiomarkRecipe.variants)==null?void 0:Fo.variant.outline},outline:{item:{borderWidth:"1px",_checked:{boxShadow:"0 0 0 1px var(--shadow-color)",boxShadowColor:"colorPalette.solid",borderColor:"colorPalette.solid"}},itemIndicator:(Lo=radiomarkRecipe.variants)==null?void 0:Lo.variant.solid},solid:{item:{borderWidth:"1px",_checked:{bg:"colorPalette.solid",color:"colorPalette.contrast",borderColor:"colorPalette.solid"}},itemIndicator:($o=radiomarkRecipe.variants)==null?void 0:$o.variant.inverted}},justify:{start:{item:{"--radio-card-justify":"flex-start"}},end:{item:{"--radio-card-justify":"flex-end"}},center:{item:{"--radio-card-justify":"center"}}},align:{start:{item:{"--radio-card-align":"flex-start"},itemControl:{textAlign:"start"}},end:{item:{"--radio-card-align":"flex-end"},itemControl:{textAlign:"end"}},center:{item:{"--radio-card-align":"center"},itemControl:{textAlign:"center"}}},orientation:{vertical:{itemControl:{flexDirection:"column"}},horizontal:{itemControl:{flexDirection:"row"}}}},defaultVariants:{size:"md",variant:"outline",align:"start",orientation:"horizontal"}});var Bo,No,Uo,jo,zo,Vo,Go,Wo,Ho,Xo,Yo,qo,Ko,Zo;const radioGroupSlotRecipe=defineSlotRecipe({className:"chakra-radio-group",slots:radioGroupAnatomy.keys(),base:{item:{display:"inline-flex",alignItems:"center",position:"relative",fontWeight:"medium",_disabled:{cursor:"disabled"}},itemControl:radiomarkRecipe.base,label:{userSelect:"none",textStyle:"sm",_disabled:{opacity:"0.5"}}},variants:{variant:{outline:{itemControl:(No=(Bo=radiomarkRecipe.variants)==null?void 0:Bo.variant)==null?void 0:No.outline},subtle:{itemControl:(jo=(Uo=radiomarkRecipe.variants)==null?void 0:Uo.variant)==null?void 0:jo.subtle},solid:{itemControl:(Vo=(zo=radiomarkRecipe.variants)==null?void 0:zo.variant)==null?void 0:Vo.solid}},size:{xs:{item:{textStyle:"xs",gap:"1.5"},itemControl:(Wo=(Go=radiomarkRecipe.variants)==null?void 0:Go.size)==null?void 0:Wo.xs},sm:{item:{textStyle:"sm",gap:"2"},itemControl:(Xo=(Ho=radiomarkRecipe.variants)==null?void 0:Ho.size)==null?void 0:Xo.sm},md:{item:{textStyle:"sm",gap:"2.5"},itemControl:(qo=(Yo=radiomarkRecipe.variants)==null?void 0:Yo.size)==null?void 0:qo.md},lg:{item:{textStyle:"md",gap:"3"},itemControl:(Zo=(Ko=radiomarkRecipe.variants)==null?void 0:Ko.size)==null?void 0:Zo.lg}}},defaultVariants:{size:"md",variant:"solid"}}),ratingGroupSlotRecipe=defineSlotRecipe({className:"chakra-rating-group",slots:ratingGroupAnatomy.keys(),base:{root:{display:"inline-flex"},control:{display:"inline-flex",alignItems:"center"},item:{display:"inline-flex",alignItems:"center",justifyContent:"center",userSelect:"none"},itemIndicator:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:"1em",height:"1em",position:"relative",_icon:{stroke:"currentColor",width:"100%",height:"100%",display:"inline-block",flexShrink:0,position:"absolute",left:0,top:0},"& [data-bg]":{color:"bg.emphasized"},"& [data-fg]":{color:"transparent"},"&[data-highlighted]:not([data-half])":{"& [data-fg]":{color:"colorPalette.solid"}},"&[data-half]":{"& [data-fg]":{color:"colorPalette.solid",clipPath:"inset(0 50% 0 0)"}}}},variants:{size:{xs:{item:{textStyle:"sm"}},sm:{item:{textStyle:"md"}},md:{item:{textStyle:"xl"}},lg:{item:{textStyle:"2xl"}}}},defaultVariants:{size:"md"}}),segmentGroupSlotRecipe=defineSlotRecipe({className:"chakra-segment-group",slots:segmentGroupAnatomy.keys(),base:{root:{"--segment-radius":"radii.l2",borderRadius:"l2",display:"inline-flex",boxShadow:"inset",minW:"max-content",textAlign:"center",position:"relative",isolation:"isolate",bg:"bg.muted"},item:{display:"flex",alignItems:"center",userSelect:"none",fontSize:"sm",position:"relative",color:"fg",borderRadius:"var(--segment-radius)",_disabled:{opacity:"0.5"},"&:has(input:focus-visible)":{focusRing:"outside"},_before:{content:'""',position:"absolute",insetInlineStart:0,insetBlock:"1.5",bg:"border",width:"1px",transition:"opacity 0.2s"},"& + &[data-state=checked], &[data-state=checked] + &, &:first-of-type":{_before:{opacity:"0"}},"&[data-state=checked][data-ssr]":{shadow:"sm",bg:"bg",borderRadius:"var(--segment-radius)"}},indicator:{shadow:"sm",pos:"absolute",bg:{_light:"bg",_dark:"bg.emphasized"},width:"var(--width)",height:"var(--height)",top:"var(--top)",left:"var(--left)",zIndex:-1,borderRadius:"var(--segment-radius)"}},variants:{size:{xs:{root:{height:"6"},item:{textStyle:"xs",px:"3",gap:"1"}},sm:{root:{height:"8"},item:{textStyle:"sm",px:"4",gap:"2"}},md:{root:{height:"10"},item:{textStyle:"sm",px:"4",gap:"2"}},lg:{root:{height:"10"},item:{textStyle:"md",px:"5",gap:"3"}}}},defaultVariants:{size:"md"}}),sliderSlotRecipe=defineSlotRecipe({className:"chakra-slider",slots:sliderAnatomy.keys(),base:{root:{display:"flex",flexDirection:"column",gap:"1",textStyle:"sm",position:"relative",isolation:"isolate",touchAction:"none"},label:{fontWeight:"medium",textStyle:"sm"},control:{display:"inline-flex",alignItems:"center",position:"relative"},track:{overflow:"hidden",borderRadius:"full",flex:"1"},range:{width:"inherit",height:"inherit",_disabled:{bg:"border.emphasized!"}},markerGroup:{position:"absolute!",zIndex:"1"},marker:{"--marker-bg":{base:"white",_underValue:"colors.bg"},display:"flex",alignItems:"center",gap:"calc(var(--slider-thumb-size) / 2)",color:"fg.muted",textStyle:"xs"},markerIndicator:{width:"var(--slider-marker-size)",height:"var(--slider-marker-size)",borderRadius:"full",bg:"var(--marker-bg)"},thumb:{width:"var(--slider-thumb-size)",height:"var(--slider-thumb-size)",display:"flex",alignItems:"center",justifyContent:"center",outline:0,zIndex:"2",borderRadius:"full",_focusVisible:{ring:"2px",ringColor:"colorPalette.focusRing",ringOffset:"2px",ringOffsetColor:"bg"}}},variants:{size:{sm:{root:{"--slider-thumb-size":"sizes.4","--slider-track-size":"sizes.1.5","--slider-marker-center":"6px","--slider-marker-size":"sizes.1","--slider-marker-inset":"3px"}},md:{root:{"--slider-thumb-size":"sizes.5","--slider-track-size":"sizes.2","--slider-marker-center":"8px","--slider-marker-size":"sizes.1","--slider-marker-inset":"4px"}},lg:{root:{"--slider-thumb-size":"sizes.6","--slider-track-size":"sizes.2.5","--slider-marker-center":"9px","--slider-marker-size":"sizes.1.5","--slider-marker-inset":"5px"}}},variant:{outline:{track:{shadow:"inset",bg:"bg.emphasized/72"},range:{bg:"colorPalette.solid"},thumb:{borderWidth:"2px",borderColor:"colorPalette.solid",bg:"bg",_disabled:{bg:"border.emphasized",borderColor:"border.emphasized"}}},solid:{track:{bg:"colorPalette.subtle",_disabled:{bg:"bg.muted"}},range:{bg:"colorPalette.solid"},thumb:{bg:"colorPalette.solid",_disabled:{bg:"border.emphasized"}}}},orientation:{vertical:{root:{display:"inline-flex"},control:{flexDirection:"column",height:"100%",minWidth:"var(--slider-thumb-size)","&[data-has-mark-label]":{marginEnd:"4"}},track:{width:"var(--slider-track-size)"},thumb:{left:"50%",translate:"-50% 0"},markerGroup:{insetStart:"var(--slider-marker-center)",insetBlock:"var(--slider-marker-inset)"},marker:{flexDirection:"row"}},horizontal:{control:{flexDirection:"row",width:"100%",minHeight:"var(--slider-thumb-size)","&[data-has-mark-label]":{marginBottom:"4"}},track:{height:"var(--slider-track-size)"},thumb:{top:"50%",translate:"0 -50%"},markerGroup:{top:"var(--slider-marker-center)",insetInline:"var(--slider-marker-inset)"},marker:{flexDirection:"column"}}}},defaultVariants:{size:"md",variant:"outline",orientation:"horizontal"}}),statSlotRecipe=defineSlotRecipe({className:"chakra-stat",slots:statAnatomy.keys(),base:{root:{display:"flex",flexDirection:"column",gap:"1",position:"relative",flex:"1"},label:{display:"inline-flex",gap:"1.5",alignItems:"center",color:"fg.muted",textStyle:"sm"},helpText:{color:"fg.muted",textStyle:"xs"},valueUnit:{color:"fg.muted",textStyle:"xs",fontWeight:"initial",letterSpacing:"initial"},valueText:{verticalAlign:"baseline",fontWeight:"semibold",letterSpacing:"tight",fontFeatureSettings:"pnum",fontVariantNumeric:"proportional-nums",display:"inline-flex",gap:"1"},indicator:{display:"inline-flex",alignItems:"center",justifyContent:"center",marginEnd:1,"& :where(svg)":{w:"1em",h:"1em"},"&[data-type=up]":{color:"fg.success"},"&[data-type=down]":{color:"fg.error"}}},variants:{size:{sm:{valueText:{textStyle:"xl"}},md:{valueText:{textStyle:"2xl"}},lg:{valueText:{textStyle:"3xl"}}}},defaultVariants:{size:"md"}}),statusSlotRecipe=defineSlotRecipe({className:"chakra-status",slots:statusAnatomy.keys(),base:{root:{display:"inline-flex",alignItems:"center",gap:"2"},indicator:{width:"0.64em",height:"0.64em",flexShrink:0,borderRadius:"full",forcedColorAdjust:"none",bg:"colorPalette.solid"}},variants:{size:{sm:{root:{textStyle:"xs"}},md:{root:{textStyle:"sm"}},lg:{root:{textStyle:"md"}}}},defaultVariants:{size:"md"}}),stepsSlotRecipe=defineSlotRecipe({className:"chakra-steps",slots:stepsAnatomy.keys(),base:{root:{display:"flex",width:"full"},list:{display:"flex",justifyContent:"space-between","--steps-gutter":"spacing.3","--steps-thickness":"2px"},title:{fontWeight:"medium",color:"fg"},description:{color:"fg.muted"},separator:{bg:"border",flex:"1"},indicator:{display:"flex",justifyContent:"center",alignItems:"center",flexShrink:"0",borderRadius:"full",fontWeight:"medium",width:"var(--steps-size)",height:"var(--steps-size)",_icon:{flexShrink:"0",width:"var(--steps-icon-size)",height:"var(--steps-icon-size)"}},item:{position:"relative",display:"flex",flex:"1 0 0","&:last-of-type":{flex:"initial","& [data-part=separator]":{display:"none"}}},trigger:{display:"flex",alignItems:"center",gap:"3",textAlign:"start",focusVisibleRing:"outside",borderRadius:"l2"},content:{focusVisibleRing:"outside"}},variants:{orientation:{vertical:{root:{flexDirection:"row",height:"100%"},list:{flexDirection:"column",alignItems:"flex-start"},separator:{position:"absolute",width:"var(--steps-thickness)",height:"100%",maxHeight:"calc(100% - var(--steps-size) - var(--steps-gutter) * 2)",top:"calc(var(--steps-size) + var(--steps-gutter))",insetStart:"calc(var(--steps-size) / 2 - 1px)"},item:{alignItems:"flex-start"}},horizontal:{root:{flexDirection:"column",width:"100%"},list:{flexDirection:"row",alignItems:"center"},separator:{width:"100%",height:"var(--steps-thickness)",marginX:"var(--steps-gutter)"},item:{alignItems:"center"}}},variant:{solid:{indicator:{_incomplete:{borderWidth:"var(--steps-thickness)"},_current:{bg:"colorPalette.muted",borderWidth:"var(--steps-thickness)",borderColor:"colorPalette.solid",color:"colorPalette.fg"},_complete:{bg:"colorPalette.solid",borderColor:"colorPalette.solid",color:"colorPalette.contrast"}},separator:{_complete:{bg:"colorPalette.solid"}}},subtle:{indicator:{_incomplete:{bg:"bg.muted"},_current:{bg:"colorPalette.muted",color:"colorPalette.fg"},_complete:{bg:"colorPalette.emphasized",color:"colorPalette.fg"}},separator:{_complete:{bg:"colorPalette.emphasized"}}}},size:{xs:{root:{gap:"2.5"},list:{"--steps-size":"sizes.6","--steps-icon-size":"sizes.3.5",textStyle:"xs"},title:{textStyle:"sm"}},sm:{root:{gap:"3"},list:{"--steps-size":"sizes.8","--steps-icon-size":"sizes.4",textStyle:"xs"},title:{textStyle:"sm"}},md:{root:{gap:"4"},list:{"--steps-size":"sizes.10","--steps-icon-size":"sizes.4",textStyle:"sm"},title:{textStyle:"sm"}},lg:{root:{gap:"6"},list:{"--steps-size":"sizes.11","--steps-icon-size":"sizes.5",textStyle:"md"},title:{textStyle:"md"}}}},defaultVariants:{size:"md",variant:"solid",orientation:"horizontal"}}),switchSlotRecipe=defineSlotRecipe({slots:switchAnatomy.keys(),className:"chakra-switch",base:{root:{display:"inline-flex",gap:"2.5",alignItems:"center",position:"relative",verticalAlign:"middle","--switch-diff":"calc(var(--switch-width) - var(--switch-height))","--switch-x":{base:"var(--switch-diff)",_rtl:"calc(var(--switch-diff) * -1)"}},label:{lineHeight:"1",userSelect:"none",fontSize:"sm",fontWeight:"medium",_disabled:{opacity:"0.5"}},indicator:{position:"absolute",height:"var(--switch-height)",width:"var(--switch-height)",fontSize:"var(--switch-indicator-font-size)",fontWeight:"medium",flexShrink:0,userSelect:"none",display:"grid",placeContent:"center",transition:"inset-inline-start 0.12s ease",insetInlineStart:"calc(var(--switch-x) - 2px)",_checked:{insetInlineStart:"2px"}},control:{display:"inline-flex",gap:"0.5rem",flexShrink:0,justifyContent:"flex-start",cursor:"switch",borderRadius:"full",position:"relative",width:"var(--switch-width)",height:"var(--switch-height)",_disabled:{opacity:"0.5",cursor:"not-allowed"},_invalid:{outline:"2px solid",outlineColor:"border.error",outlineOffset:"2px"}},thumb:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,transitionProperty:"translate",transitionDuration:"fast",borderRadius:"inherit",_checked:{translate:"var(--switch-x) 0"}}},variants:{variant:{solid:{control:{borderRadius:"full",bg:"bg.emphasized",focusVisibleRing:"outside",_checked:{bg:"colorPalette.solid"}},thumb:{bg:"white",width:"var(--switch-height)",height:"var(--switch-height)",scale:"0.8",boxShadow:"sm",_checked:{bg:"colorPalette.contrast"}}},raised:{control:{borderRadius:"full",height:"calc(var(--switch-height) / 2)",bg:"bg.muted",boxShadow:"inset",_checked:{bg:"colorPalette.solid/60"}},thumb:{width:"var(--switch-height)",height:"var(--switch-height)",position:"relative",top:"calc(var(--switch-height) * -0.25)",bg:"white",boxShadow:"xs",focusVisibleRing:"outside",_checked:{bg:"colorPalette.solid"}}}},size:{xs:{root:{"--switch-width":"sizes.6","--switch-height":"sizes.3","--switch-indicator-font-size":"fontSizes.xs"}},sm:{root:{"--switch-width":"sizes.8","--switch-height":"sizes.4","--switch-indicator-font-size":"fontSizes.xs"}},md:{root:{"--switch-width":"sizes.10","--switch-height":"sizes.5","--switch-indicator-font-size":"fontSizes.sm"}},lg:{root:{"--switch-width":"sizes.12","--switch-height":"sizes.6","--switch-indicator-font-size":"fontSizes.md"}}}},defaultVariants:{variant:"solid",size:"md"}}),tableSlotRecipe=defineSlotRecipe({className:"chakra-table",slots:tableAnatomy.keys(),base:{root:{fontVariantNumeric:"lining-nums tabular-nums",borderCollapse:"collapse",width:"full",textAlign:"start",verticalAlign:"top"},row:{_selected:{bg:"colorPalette.subtle"}},cell:{textAlign:"start",alignItems:"center"},columnHeader:{fontWeight:"medium",textAlign:"start",color:"fg"},caption:{fontWeight:"medium",textStyle:"xs"},footer:{fontWeight:"medium"}},variants:{interactive:{true:{body:{"& tr":{_hover:{bg:"colorPalette.subtle"}}}}},stickyHeader:{true:{header:{"& :where(tr)":{top:"var(--table-sticky-offset, 0)",position:"sticky",zIndex:1}}}},striped:{true:{row:{"&:nth-of-type(odd) td":{bg:"bg.muted"}}}},showColumnBorder:{true:{columnHeader:{"&:not(:last-of-type)":{borderInlineEndWidth:"1px"}},cell:{"&:not(:last-of-type)":{borderInlineEndWidth:"1px"}}}},variant:{line:{columnHeader:{borderBottomWidth:"1px"},cell:{borderBottomWidth:"1px"},row:{bg:"bg"}},outline:{root:{boxShadow:"0 0 0 1px {colors.border}",overflow:"hidden"},columnHeader:{borderBottomWidth:"1px"},header:{bg:"bg.muted"},row:{"&:not(:last-of-type)":{borderBottomWidth:"1px"}},footer:{borderTopWidth:"1px"}}},size:{sm:{root:{textStyle:"sm"},columnHeader:{px:"2",py:"2"},cell:{px:"2",py:"2"}},md:{root:{textStyle:"sm"},columnHeader:{px:"3",py:"3"},cell:{px:"3",py:"3"}},lg:{root:{textStyle:"md"},columnHeader:{px:"4",py:"3"},cell:{px:"4",py:"3"}}}},defaultVariants:{variant:"line",size:"md"}}),tabsSlotRecipe=defineSlotRecipe({slots:tabsAnatomy.keys(),className:"chakra-tabs",base:{root:{"--tabs-trigger-radius":"radii.l2",position:"relative",_horizontal:{display:"block"},_vertical:{display:"flex"}},list:{display:"inline-flex",position:"relative",isolation:"isolate","--tabs-indicator-shadow":"shadows.xs","--tabs-indicator-bg":"colors.bg",minH:"var(--tabs-height)",_horizontal:{flexDirection:"row"},_vertical:{flexDirection:"column"}},trigger:{outline:"0",minW:"var(--tabs-height)",height:"var(--tabs-height)",display:"flex",alignItems:"center",fontWeight:"medium",position:"relative",cursor:"button",gap:"2",_focusVisible:{zIndex:1,outline:"2px solid",outlineColor:"colorPalette.focusRing"},_disabled:{cursor:"not-allowed",opacity:.5}},content:{focusVisibleRing:"inside",_horizontal:{width:"100%",pt:"var(--tabs-content-padding)"},_vertical:{height:"100%",ps:"var(--tabs-content-padding)"}},indicator:{width:"var(--width)",height:"var(--height)",borderRadius:"var(--tabs-indicator-radius)",bg:"var(--tabs-indicator-bg)",shadow:"var(--tabs-indicator-shadow)",zIndex:-1}},variants:{fitted:{true:{list:{display:"flex"},trigger:{flex:1,textAlign:"center",justifyContent:"center"}}},justify:{start:{list:{justifyContent:"flex-start"}},center:{list:{justifyContent:"center"}},end:{list:{justifyContent:"flex-end"}}},size:{sm:{root:{"--tabs-height":"sizes.9","--tabs-content-padding":"spacing.3"},trigger:{py:"1",px:"3",textStyle:"sm"}},md:{root:{"--tabs-height":"sizes.10","--tabs-content-padding":"spacing.4"},trigger:{py:"2",px:"4",textStyle:"sm"}},lg:{root:{"--tabs-height":"sizes.11","--tabs-content-padding":"spacing.4.5"},trigger:{py:"2",px:"4.5",textStyle:"md"}}},variant:{line:{list:{display:"flex",borderColor:"border",_horizontal:{borderBottomWidth:"1px"},_vertical:{borderEndWidth:"1px"}},trigger:{color:"fg.muted",_disabled:{_active:{bg:"initial"}},_selected:{color:"fg",_horizontal:{layerStyle:"indicator.bottom","--indicator-offset-y":"-1px","--indicator-color":"colors.colorPalette.solid"},_vertical:{layerStyle:"indicator.end","--indicator-offset-x":"-1px"}}}},subtle:{trigger:{borderRadius:"var(--tabs-trigger-radius)",color:"fg.muted",_selected:{bg:"colorPalette.subtle",color:"colorPalette.fg"}}},enclosed:{list:{bg:"bg.muted",padding:"1",borderRadius:"l3",minH:"calc(var(--tabs-height) - 4px)"},trigger:{justifyContent:"center",color:"fg.muted",borderRadius:"var(--tabs-trigger-radius)",_selected:{bg:"bg",color:"colorPalette.fg",shadow:"xs"}}},outline:{list:{"--line-thickness":"1px","--line-offset":"calc(var(--line-thickness) * -1)",borderColor:"border",display:"flex",_horizontal:{_before:{content:'""',position:"absolute",bottom:"0px",width:"100%",borderBottomWidth:"var(--line-thickness)",borderBottomColor:"border"}},_vertical:{_before:{content:'""',position:"absolute",insetInline:"var(--line-offset)",height:"calc(100% - calc(var(--line-thickness) * 2))",borderEndWidth:"var(--line-thickness)",borderEndColor:"border"}}},trigger:{color:"fg.muted",borderWidth:"1px",borderColor:"transparent",_selected:{bg:"currentBg",color:"colorPalette.fg"},_horizontal:{borderTopRadius:"var(--tabs-trigger-radius)",marginBottom:"var(--line-offset)",marginEnd:{_notLast:"var(--line-offset)"},_selected:{borderColor:"border",borderBottomColor:"transparent"}},_vertical:{borderStartRadius:"var(--tabs-trigger-radius)",marginEnd:"var(--line-offset)",marginBottom:{_notLast:"var(--line-offset)"},_selected:{borderColor:"border",borderEndColor:"transparent"}}}},plain:{trigger:{color:"fg.muted",_selected:{color:"colorPalette.fg"},borderRadius:"var(--tabs-trigger-radius)","&[data-selected][data-ssr]":{bg:"var(--tabs-indicator-bg)",shadow:"var(--tabs-indicator-shadow)",borderRadius:"var(--tabs-indicator-radius)"}}}}},defaultVariants:{size:"md",variant:"line"}});var Qo;const badgeVariant=(Qo=badgeRecipe.variants)==null?void 0:Qo.variant,tagSlotRecipe=defineSlotRecipe({slots:tagAnatomy.keys(),className:"chakra-tag",base:{root:{display:"inline-flex",alignItems:"center",verticalAlign:"top",maxWidth:"100%",userSelect:"none",borderRadius:"l2",focusVisibleRing:"outside"},label:{lineClamp:"1"},closeTrigger:{display:"flex",alignItems:"center",justifyContent:"center",outline:"0",borderRadius:"l1",color:"currentColor",focusVisibleRing:"inside",focusRingWidth:"2px"},startElement:{flexShrink:0,boxSize:"var(--tag-element-size)",ms:"var(--tag-element-offset)","&:has([data-scope=avatar])":{boxSize:"var(--tag-avatar-size)",ms:"calc(var(--tag-element-offset) * 1.5)"},_icon:{boxSize:"100%"}},endElement:{flexShrink:0,boxSize:"var(--tag-element-size)",me:"var(--tag-element-offset)",_icon:{boxSize:"100%"},"&:has(button)":{ms:"calc(var(--tag-element-offset) * -1)"}}},variants:{size:{sm:{root:{px:"1.5",minH:"4.5",gap:"1","--tag-avatar-size":"spacing.3","--tag-element-size":"spacing.3","--tag-element-offset":"-2px"},label:{textStyle:"xs"}},md:{root:{px:"1.5",minH:"5",gap:"1","--tag-avatar-size":"spacing.3.5","--tag-element-size":"spacing.3.5","--tag-element-offset":"-2px"},label:{textStyle:"xs"}},lg:{root:{px:"2",minH:"6",gap:"1.5","--tag-avatar-size":"spacing.4.5","--tag-element-size":"spacing.4","--tag-element-offset":"-3px"},label:{textStyle:"sm"}},xl:{root:{px:"2.5",minH:"8",gap:"1.5","--tag-avatar-size":"spacing.6","--tag-element-size":"spacing.4.5","--tag-element-offset":"-4px"},label:{textStyle:"sm"}}},variant:{subtle:{root:badgeVariant==null?void 0:badgeVariant.subtle},solid:{root:badgeVariant==null?void 0:badgeVariant.solid},outline:{root:badgeVariant==null?void 0:badgeVariant.outline},surface:{root:badgeVariant==null?void 0:badgeVariant.surface}}},defaultVariants:{size:"md",variant:"surface"}}),timelineSlotRecipe=defineSlotRecipe({slots:timelineAnatomy.keys(),className:"chakra-timeline",base:{root:{display:"flex",flexDirection:"column",width:"full","--timeline-thickness":"1px","--timeline-gutter":"4px"},item:{display:"flex",position:"relative",alignItems:"flex-start",flexShrink:0,gap:"4",_last:{"& :where(.chakra-timeline__separator)":{display:"none"}}},separator:{position:"absolute",borderStartWidth:"var(--timeline-thickness)",ms:"calc(-1 * var(--timeline-thickness) / 2)",insetInlineStart:"calc(var(--timeline-indicator-size) / 2)",insetBlock:"0",borderColor:"border"},indicator:{outline:"2px solid {colors.bg}",position:"relative",flexShrink:"0",boxSize:"var(--timeline-indicator-size)",fontSize:"var(--timeline-font-size)",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"full",fontWeight:"medium"},connector:{alignSelf:"stretch",position:"relative"},content:{pb:"6",display:"flex",flexDirection:"column",width:"full",gap:"2"},title:{display:"flex",fontWeight:"medium",flexWrap:"wrap",gap:"1.5",alignItems:"center",mt:"var(--timeline-margin)"},description:{color:"fg.muted",textStyle:"xs"}},variants:{variant:{subtle:{indicator:{bg:"colorPalette.muted"}},solid:{indicator:{bg:"colorPalette.solid",color:"colorPalette.contrast"}},outline:{indicator:{bg:"currentBg",borderWidth:"1px",borderColor:"colorPalette.muted"}},plain:{}},size:{sm:{root:{"--timeline-indicator-size":"sizes.4","--timeline-font-size":"fontSizes.2xs"},title:{textStyle:"xs"}},md:{root:{"--timeline-indicator-size":"sizes.5","--timeline-font-size":"fontSizes.xs"},title:{textStyle:"sm"}},lg:{root:{"--timeline-indicator-size":"sizes.6","--timeline-font-size":"fontSizes.xs"},title:{mt:"0.5",textStyle:"sm"}},xl:{root:{"--timeline-indicator-size":"sizes.8","--timeline-font-size":"fontSizes.sm"},title:{mt:"1.5",textStyle:"sm"}}}},defaultVariants:{size:"md",variant:"solid"}}),toastSlotRecipe=defineSlotRecipe({slots:toastAnatomy.keys(),className:"chakra-toast",base:{root:{width:"full",display:"flex",alignItems:"flex-start",position:"relative",gap:"3",py:"4",ps:"4",pe:"6",borderRadius:"l2",translate:"var(--x) var(--y)",scale:"var(--scale)",zIndex:"var(--z-index)",height:"var(--height)",opacity:"var(--opacity)",willChange:"translate, opacity, scale",transition:"translate 400ms, scale 400ms, opacity 400ms, height 400ms, box-shadow 200ms",transitionTimingFunction:"cubic-bezier(0.21, 1.02, 0.73, 1)",_closed:{transition:"translate 400ms, scale 400ms, opacity 200ms",transitionTimingFunction:"cubic-bezier(0.06, 0.71, 0.55, 1)"},bg:"bg.panel",color:"fg",boxShadow:"xl","--toast-trigger-bg":"colors.bg.muted","&[data-type=warning]":{bg:"orange.solid",color:"orange.contrast","--toast-trigger-bg":"{white/10}","--toast-border-color":"{white/40}"},"&[data-type=success]":{bg:"green.solid",color:"green.contrast","--toast-trigger-bg":"{white/10}","--toast-border-color":"{white/40}"},"&[data-type=error]":{bg:"red.solid",color:"red.contrast","--toast-trigger-bg":"{white/10}","--toast-border-color":"{white/40}"}},title:{fontWeight:"medium",textStyle:"sm",marginEnd:"2"},description:{display:"inline",textStyle:"sm",opacity:"0.8"},indicator:{flexShrink:"0",boxSize:"5"},actionTrigger:{textStyle:"sm",fontWeight:"medium",height:"8",px:"3",borderRadius:"l2",alignSelf:"center",borderWidth:"1px",borderColor:"var(--toast-border-color, inherit)",transition:"background 200ms",_hover:{bg:"var(--toast-trigger-bg)"}},closeTrigger:{position:"absolute",top:"1",insetEnd:"1",padding:"1",display:"inline-flex",alignItems:"center",justifyContent:"center",color:"{currentColor/60}",borderRadius:"l2",textStyle:"md",transition:"background 200ms",_icon:{boxSize:"1em"}}}}),tooltipSlotRecipe=defineSlotRecipe({slots:anatomy$1.keys(),className:"chakra-tooltip",base:{content:{"--tooltip-bg":"colors.bg.inverted",bg:"var(--tooltip-bg)",color:"fg.inverted",px:"2.5",py:"1",borderRadius:"l2",fontWeight:"medium",textStyle:"xs",boxShadow:"md",maxW:"xs",zIndex:"tooltip",transformOrigin:"var(--transform-origin)",_open:{animationStyle:"scale-fade-in",animationDuration:"fast"},_closed:{animationStyle:"scale-fade-out",animationDuration:"fast"}},arrow:{"--arrow-size":"sizes.2","--arrow-background":"var(--tooltip-bg)"},arrowTip:{borderTopWidth:"1px",borderInlineStartWidth:"1px",borderColor:"var(--tooltip-bg)"}}}),slotRecipes={accordion:accordionSlotRecipe,actionBar:actionBarSlotRecipe,alert:alertSlotRecipe,avatar:avatarSlotRecipe,blockquote:blockquoteSlotRecipe,breadcrumb:breadcrumbSlotRecipe,card:cardSlotRecipe,checkbox:checkboxSlotRecipe,checkboxCard:checkboxCardSlotRecipe,collapsible:collapsibleSlotRecipe,dataList:dataListSlotRecipe,dialog:dialogSlotRecipe,drawer:drawerSlotRecipe,editable:editableSlotRecipe,emptyState:emptyStateSlotRecipe,field:fieldSlotRecipe,fieldset:fieldsetSlotRecipe,fileUpload:fileUploadSlotRecipe,hoverCard:hoverCardSlotRecipe,list:listSlotRecipe,menu:menuSlotRecipe,nativeSelect:nativeSelectSlotRecipe,numberInput:numberInputSlotRecipe,pinInput:pinInputSlotRecipe,popover:popoverSlotRecipe,progress:progressSlotRecipe,progressCircle:progressCircleSlotRecipe,radioCard:radioCardSlotRecipe,radioGroup:radioGroupSlotRecipe,ratingGroup:ratingGroupSlotRecipe,segmentGroup:segmentGroupSlotRecipe,select:selectSlotRecipe,slider:sliderSlotRecipe,stat:statSlotRecipe,steps:stepsSlotRecipe,switch:switchSlotRecipe,table:tableSlotRecipe,tabs:tabsSlotRecipe,tag:tagSlotRecipe,toast:toastSlotRecipe,tooltip:tooltipSlotRecipe,status:statusSlotRecipe,timeline:timelineSlotRecipe,colorPicker:colorPickerSlotRecipe,qrCode:qrCodeSlotRecipe},textStyles=defineTextStyles({"2xs":{value:{fontSize:"2xs",lineHeight:"0.75rem"}},xs:{value:{fontSize:"xs",lineHeight:"1rem"}},sm:{value:{fontSize:"sm",lineHeight:"1.25rem"}},md:{value:{fontSize:"md",lineHeight:"1.5rem"}},lg:{value:{fontSize:"lg",lineHeight:"1.75rem"}},xl:{value:{fontSize:"xl",lineHeight:"1.875rem"}},"2xl":{value:{fontSize:"2xl",lineHeight:"2rem"}},"3xl":{value:{fontSize:"3xl",lineHeight:"2.375rem"}},"4xl":{value:{fontSize:"4xl",lineHeight:"2.75rem",letterSpacing:"-0.025em"}},"5xl":{value:{fontSize:"5xl",lineHeight:"3.75rem",letterSpacing:"-0.025em"}},"6xl":{value:{fontSize:"6xl",lineHeight:"4.5rem",letterSpacing:"-0.025em"}},"7xl":{value:{fontSize:"7xl",lineHeight:"5.75rem",letterSpacing:"-0.025em"}},none:{value:{}}}),animations=defineTokens.animations({spin:{value:"spin 1s linear infinite"},ping:{value:"ping 1s cubic-bezier(0, 0, 0.2, 1) infinite"},pulse:{value:"pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite"},bounce:{value:"bounce 1s infinite"}}),aspectRatios=defineTokens.aspectRatios({square:{value:"1 / 1"},landscape:{value:"4 / 3"},portrait:{value:"3 / 4"},wide:{value:"16 / 9"},ultrawide:{value:"18 / 5"},golden:{value:"1.618 / 1"}}),blurs=defineTokens.blurs({none:{value:" "},sm:{value:"4px"},md:{value:"8px"},lg:{value:"12px"},xl:{value:"16px"},"2xl":{value:"24px"},"3xl":{value:"40px"},"4xl":{value:"64px"}}),borders=defineTokens.borders({xs:{value:"0.5px solid"},sm:{value:"1px solid"},md:{value:"2px solid"},lg:{value:"4px solid"},xl:{value:"8px solid"}}),colors=defineTokens.colors({transparent:{value:"transparent"},current:{value:"currentColor"},black:{value:"#09090B"},white:{value:"#FFFFFF"},whiteAlpha:{50:{value:"rgba(255, 255, 255, 0.04)"},100:{value:"rgba(255, 255, 255, 0.06)"},200:{value:"rgba(255, 255, 255, 0.08)"},300:{value:"rgba(255, 255, 255, 0.16)"},400:{value:"rgba(255, 255, 255, 0.24)"},500:{value:"rgba(255, 255, 255, 0.36)"},600:{value:"rgba(255, 255, 255, 0.48)"},700:{value:"rgba(255, 255, 255, 0.64)"},800:{value:"rgba(255, 255, 255, 0.80)"},900:{value:"rgba(255, 255, 255, 0.92)"},950:{value:"rgba(255, 255, 255, 0.95)"}},blackAlpha:{50:{value:"rgba(0, 0, 0, 0.04)"},100:{value:"rgba(0, 0, 0, 0.06)"},200:{value:"rgba(0, 0, 0, 0.08)"},300:{value:"rgba(0, 0, 0, 0.16)"},400:{value:"rgba(0, 0, 0, 0.24)"},500:{value:"rgba(0, 0, 0, 0.36)"},600:{value:"rgba(0, 0, 0, 0.48)"},700:{value:"rgba(0, 0, 0, 0.64)"},800:{value:"rgba(0, 0, 0, 0.80)"},900:{value:"rgba(0, 0, 0, 0.92)"},950:{value:"rgba(0, 0, 0, 0.95)"}},gray:{50:{value:"#fafafa"},100:{value:"#f4f4f5"},200:{value:"#e4e4e7"},300:{value:"#d4d4d8"},400:{value:"#a1a1aa"},500:{value:"#71717a"},600:{value:"#52525b"},700:{value:"#3f3f46"},800:{value:"#27272a"},900:{value:"#18181b"},950:{value:"#111111"}},red:{50:{value:"#fef2f2"},100:{value:"#fee2e2"},200:{value:"#fecaca"},300:{value:"#fca5a5"},400:{value:"#f87171"},500:{value:"#ef4444"},600:{value:"#dc2626"},700:{value:"#991919"},800:{value:"#511111"},900:{value:"#300c0c"},950:{value:"#1f0808"}},orange:{50:{value:"#fff7ed"},100:{value:"#ffedd5"},200:{value:"#fed7aa"},300:{value:"#fdba74"},400:{value:"#fb923c"},500:{value:"#f97316"},600:{value:"#ea580c"},700:{value:"#92310a"},800:{value:"#6c2710"},900:{value:"#3b1106"},950:{value:"#220a04"}},yellow:{50:{value:"#fefce8"},100:{value:"#fef9c3"},200:{value:"#fef08a"},300:{value:"#fde047"},400:{value:"#facc15"},500:{value:"#eab308"},600:{value:"#ca8a04"},700:{value:"#845209"},800:{value:"#713f12"},900:{value:"#422006"},950:{value:"#281304"}},green:{50:{value:"#f0fdf4"},100:{value:"#dcfce7"},200:{value:"#bbf7d0"},300:{value:"#86efac"},400:{value:"#4ade80"},500:{value:"#22c55e"},600:{value:"#16a34a"},700:{value:"#116932"},800:{value:"#124a28"},900:{value:"#042713"},950:{value:"#03190c"}},teal:{50:{value:"#f0fdfa"},100:{value:"#ccfbf1"},200:{value:"#99f6e4"},300:{value:"#5eead4"},400:{value:"#2dd4bf"},500:{value:"#14b8a6"},600:{value:"#0d9488"},700:{value:"#0c5d56"},800:{value:"#114240"},900:{value:"#032726"},950:{value:"#021716"}},blue:{50:{value:"#eff6ff"},100:{value:"#dbeafe"},200:{value:"#bfdbfe"},300:{value:"#a3cfff"},400:{value:"#60a5fa"},500:{value:"#3b82f6"},600:{value:"#2563eb"},700:{value:"#173da6"},800:{value:"#1a3478"},900:{value:"#14204a"},950:{value:"#0c142e"}},cyan:{50:{value:"#ecfeff"},100:{value:"#cffafe"},200:{value:"#a5f3fc"},300:{value:"#67e8f9"},400:{value:"#22d3ee"},500:{value:"#06b6d4"},600:{value:"#0891b2"},700:{value:"#0c5c72"},800:{value:"#134152"},900:{value:"#072a38"},950:{value:"#051b24"}},purple:{50:{value:"#faf5ff"},100:{value:"#f3e8ff"},200:{value:"#e9d5ff"},300:{value:"#d8b4fe"},400:{value:"#c084fc"},500:{value:"#a855f7"},600:{value:"#9333ea"},700:{value:"#641ba3"},800:{value:"#4a1772"},900:{value:"#2f0553"},950:{value:"#1a032e"}},pink:{50:{value:"#fdf2f8"},100:{value:"#fce7f3"},200:{value:"#fbcfe8"},300:{value:"#f9a8d4"},400:{value:"#f472b6"},500:{value:"#ec4899"},600:{value:"#db2777"},700:{value:"#a41752"},800:{value:"#6d0e34"},900:{value:"#45061f"},950:{value:"#2c0514"}}}),cursor=defineTokens.cursor({button:{value:"pointer"},checkbox:{value:"default"},disabled:{value:"not-allowed"},menuitem:{value:"default"},option:{value:"default"},radio:{value:"default"},slider:{value:"default"},switch:{value:"pointer"}}),durations=defineTokens.durations({fastest:{value:"50ms"},faster:{value:"100ms"},fast:{value:"150ms"},moderate:{value:"200ms"},slow:{value:"300ms"},slower:{value:"400ms"},slowest:{value:"500ms"}}),easings=defineTokens.easings({"ease-in":{value:"cubic-bezier(0.42, 0, 1, 1)"},"ease-out":{value:"cubic-bezier(0, 0, 0.58, 1)"},"ease-in-out":{value:"cubic-bezier(0.42, 0, 0.58, 1)"},"ease-in-smooth":{value:"cubic-bezier(0.32, 0.72, 0, 1)"}}),fontSizes=defineTokens.fontSizes({"2xs":{value:"0.625rem"},xs:{value:"0.75rem"},sm:{value:"0.875rem"},md:{value:"1rem"},lg:{value:"1.125rem"},xl:{value:"1.25rem"},"2xl":{value:"1.5rem"},"3xl":{value:"1.875rem"},"4xl":{value:"2.25rem"},"5xl":{value:"3rem"},"6xl":{value:"3.75rem"},"7xl":{value:"4.5rem"},"8xl":{value:"6rem"},"9xl":{value:"8rem"}}),fontWeights=defineTokens.fontWeights({thin:{value:"100"},extralight:{value:"200"},light:{value:"300"},normal:{value:"400"},medium:{value:"500"},semibold:{value:"600"},bold:{value:"700"},extrabold:{value:"800"},black:{value:"900"}}),fallback='-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',fonts=defineTokens.fonts({heading:{value:`Inter, ${fallback}`},body:{value:`Inter, ${fallback}`},mono:{value:'SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace'}}),keyframes=defineKeyframes({spin:{"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}},pulse:{"50%":{opacity:"0.5"}},ping:{"75%, 100%":{transform:"scale(2)",opacity:"0"}},bounce:{"0%, 100%":{transform:"translateY(-25%)",animationTimingFunction:"cubic-bezier(0.8,0,1,1)"},"50%":{transform:"none",animationTimingFunction:"cubic-bezier(0,0,0.2,1)"}},"bg-position":{from:{backgroundPosition:"var(--animate-from, 1rem) 0"},to:{backgroundPosition:"var(--animate-to, 0) 0"}},position:{from:{insetInlineStart:"var(--animate-from-x)",insetBlockStart:"var(--animate-from-y)"},to:{insetInlineStart:"var(--animate-to-x)",insetBlockStart:"var(--animate-to-y)"}},"circular-progress":{"0%":{strokeDasharray:"1, 400",strokeDashoffset:"0"},"50%":{strokeDasharray:"400, 400",strokeDashoffset:"-100%"},"100%":{strokeDasharray:"400, 400",strokeDashoffset:"-260%"}},"expand-height":{from:{height:"0"},to:{height:"var(--height)"}},"collapse-height":{from:{height:"var(--height)"},to:{height:"0"}},"expand-width":{from:{width:"0"},to:{width:"var(--width)"}},"collapse-width":{from:{height:"var(--width)"},to:{height:"0"}},"fade-in":{from:{opacity:0},to:{opacity:1}},"fade-out":{from:{opacity:1},to:{opacity:0}},"slide-from-left-full":{from:{translate:"-100% 0"},to:{translate:"0 0"}},"slide-from-right-full":{from:{translate:"100% 0"},to:{translate:"0 0"}},"slide-from-top-full":{from:{translate:"0 -100%"},to:{translate:"0 0"}},"slide-from-bottom-full":{from:{translate:"0 100%"},to:{translate:"0 0"}},"slide-to-left-full":{from:{translate:"0 0"},to:{translate:"-100% 0"}},"slide-to-right-full":{from:{translate:"0 0"},to:{translate:"100% 0"}},"slide-to-top-full":{from:{translate:"0 0"},to:{translate:"0 -100%"}},"slide-to-bottom-full":{from:{translate:"0 0"},to:{translate:"0 100%"}},"slide-from-top":{"0%":{translate:"0 -0.5rem"},to:{translate:"0"}},"slide-from-bottom":{"0%":{translate:"0 0.5rem"},to:{translate:"0"}},"slide-from-left":{"0%":{translate:"-0.5rem 0"},to:{translate:"0"}},"slide-from-right":{"0%":{translate:"0.5rem 0"},to:{translate:"0"}},"slide-to-top":{"0%":{translate:"0"},to:{translate:"0 -0.5rem"}},"slide-to-bottom":{"0%":{translate:"0"},to:{translate:"0 0.5rem"}},"slide-to-left":{"0%":{translate:"0"},to:{translate:"-0.5rem 0"}},"slide-to-right":{"0%":{translate:"0"},to:{translate:"0.5rem 0"}},"scale-in":{from:{scale:"0.95"},to:{scale:"1"}},"scale-out":{from:{scale:"1"},to:{scale:"0.95"}}}),letterSpacings=defineTokens.letterSpacings({tighter:{value:"-0.05em"},tight:{value:"-0.025em"},wide:{value:"0.025em"},wider:{value:"0.05em"},widest:{value:"0.1em"}}),lineHeights=defineTokens.lineHeights({shorter:{value:1.25},short:{value:1.375},moderate:{value:1.5},tall:{value:1.625},taller:{value:2}}),radii=defineTokens.radii({none:{value:"0"},"2xs":{value:"0.0625rem"},xs:{value:"0.125rem"},sm:{value:"0.25rem"},md:{value:"0.375rem"},lg:{value:"0.5rem"},xl:{value:"0.75rem"},"2xl":{value:"1rem"},"3xl":{value:"1.5rem"},"4xl":{value:"2rem"},full:{value:"9999px"}}),spacing=defineTokens.spacing({.5:{value:"0.125rem"},1:{value:"0.25rem"},1.5:{value:"0.375rem"},2:{value:"0.5rem"},2.5:{value:"0.625rem"},3:{value:"0.75rem"},3.5:{value:"0.875rem"},4:{value:"1rem"},4.5:{value:"1.125rem"},5:{value:"1.25rem"},6:{value:"1.5rem"},7:{value:"1.75rem"},8:{value:"2rem"},9:{value:"2.25rem"},10:{value:"2.5rem"},11:{value:"2.75rem"},12:{value:"3rem"},14:{value:"3.5rem"},16:{value:"4rem"},20:{value:"5rem"},24:{value:"6rem"},28:{value:"7rem"},32:{value:"8rem"},36:{value:"9rem"},40:{value:"10rem"},44:{value:"11rem"},48:{value:"12rem"},52:{value:"13rem"},56:{value:"14rem"},60:{value:"15rem"},64:{value:"16rem"},72:{value:"18rem"},80:{value:"20rem"},96:{value:"24rem"}}),largeSizes=defineTokens.sizes({"3xs":{value:"14rem"},"2xs":{value:"16rem"},xs:{value:"20rem"},sm:{value:"24rem"},md:{value:"28rem"},lg:{value:"32rem"},xl:{value:"36rem"},"2xl":{value:"42rem"},"3xl":{value:"48rem"},"4xl":{value:"56rem"},"5xl":{value:"64rem"},"6xl":{value:"72rem"},"7xl":{value:"80rem"},"8xl":{value:"90rem"}}),namedSizes=defineTokens.sizes({max:{value:"max-content"},min:{value:"min-content"},fit:{value:"fit-content"},prose:{value:"60ch"},full:{value:"100%"},dvh:{value:"100dvh"},svh:{value:"100svh"},lvh:{value:"100lvh"},dvw:{value:"100dvw"},svw:{value:"100svw"},lvw:{value:"100lvw"},vw:{value:"100vw"},vh:{value:"100vh"}}),fractionalSizes=defineTokens.sizes({"1/2":{value:"50%"},"1/3":{value:"33.333333%"},"2/3":{value:"66.666667%"},"1/4":{value:"25%"},"3/4":{value:"75%"},"1/5":{value:"20%"},"2/5":{value:"40%"},"3/5":{value:"60%"},"4/5":{value:"80%"},"1/6":{value:"16.666667%"},"2/6":{value:"33.333333%"},"3/6":{value:"50%"},"4/6":{value:"66.666667%"},"5/6":{value:"83.333333%"},"1/12":{value:"8.333333%"},"2/12":{value:"16.666667%"},"3/12":{value:"25%"},"4/12":{value:"33.333333%"},"5/12":{value:"41.666667%"},"6/12":{value:"50%"},"7/12":{value:"58.333333%"},"8/12":{value:"66.666667%"},"9/12":{value:"75%"},"10/12":{value:"83.333333%"},"11/12":{value:"91.666667%"}}),sizes=defineTokens.sizes({...largeSizes,...spacing,...fractionalSizes,...namedSizes}),zIndices=defineTokens.zIndex({hide:{value:-1},base:{value:0},docked:{value:10},dropdown:{value:1e3},sticky:{value:1100},banner:{value:1200},overlay:{value:1300},modal:{value:1400},popover:{value:1500},skipNav:{value:1600},toast:{value:1700},tooltip:{value:1800},max:{value:2147483647}}),defaultThemeConfig=defineConfig({preflight:!0,cssVarsPrefix:"chakra",cssVarsRoot:":where(html, .chakra-theme)",globalCss,theme:{breakpoints,keyframes,tokens:{aspectRatios,animations,blurs,borders,colors,durations,easings,fonts,fontSizes,fontWeights,letterSpacings,lineHeights,radii,spacing,sizes,zIndex:zIndices,cursor},semanticTokens:{colors:semanticColors,shadows:semanticShadows,radii:semanticRadii},recipes,slotRecipes,textStyles,layerStyles,animationStyles}}),defaultConfig=mergeConfigs(defaultBaseConfig,defaultThemeConfig),defaultSystem=createSystem(defaultConfig);function useSlotRecipe(_e){const{key:_,recipe:et}=_e,tt=useChakraContext();return reactExports.useMemo(()=>{const rt=et||(_!=null?tt.getSlotRecipe(_):{});return tt.sva(structuredClone(rt))},[_,et,tt])}const upperFirst=_e=>_e.charAt(0).toUpperCase()+_e.slice(1),createSlotRecipeContext=_e=>{const{key:_,recipe:et}=_e,tt=upperFirst(_||et.className||"Component"),[rt,it]=createContext$1({name:`${tt}StylesContext`,errorMessage:`use${tt}Styles returned is 'undefined'. Seems you forgot to wrap the components in "<${tt}.Root />" `}),[st,at]=createContext$1({name:`${tt}ClassNameContext`,errorMessage:`use${tt}ClassNames returned is 'undefined'. Seems you forgot to wrap the components in "<${tt}.Root />" `,strict:!1}),[ct,ut]=createContext$1({strict:!1,name:`${tt}PropsContext`,providerName:`${tt}PropsContext`,defaultValue:{}});function dt(ht){const{unstyled:ft,...gt}=ht,mt=useSlotRecipe({key:_,recipe:gt.recipe||et}),[yt,bt]=mt.splitVariantProps(gt);return{styles:ft?EMPTY_SLOT_STYLES:mt(yt),classNames:mt.classNameMap,props:bt}}function ot(ht,ft={}){const{defaultProps:gt}=ft,mt=yt=>{const bt=mergeProps$1(gt,ut(),yt),{styles:_t,classNames:vt,props:xt}=dt(bt);return jsxRuntimeExports.jsx(rt,{value:_t,children:jsxRuntimeExports.jsx(st,{value:vt,children:jsxRuntimeExports.jsx(ht,{...xt})})})};return mt.displayName=ht.displayName||ht.name,mt}return{StylesProvider:rt,ClassNamesProvider:st,PropsProvider:ct,usePropsContext:ut,useRecipeResult:dt,withProvider:(ht,ft,gt)=>{const{defaultProps:mt,...yt}=gt??{},bt=chakra(ht,{},yt),_t=reactExports.forwardRef((vt,xt)=>{var Pt;const wt=mergeProps$1(mt??{},ut(),vt),{styles:Tt,props:St,classNames:Et}=dt(wt),Ot=Et[ft],Rt=jsxRuntimeExports.jsx(rt,{value:Tt,children:jsxRuntimeExports.jsx(st,{value:Et,children:jsxRuntimeExports.jsx(bt,{ref:xt,...St,css:[Tt[ft],wt.css],className:cx(wt.className,Ot)})})});return((Pt=gt==null?void 0:gt.wrapElement)==null?void 0:Pt.call(gt,Rt,wt))??Rt});return _t.displayName=ht.displayName||ht.name,_t},withContext:(ht,ft,gt)=>{const mt=chakra(ht,{},gt),yt=reactExports.forwardRef((bt,_t)=>{const vt=it(),xt=at(),wt=xt==null?void 0:xt[ft];return jsxRuntimeExports.jsx(mt,{...bt,css:[ft?vt[ft]:void 0,bt.css],ref:_t,className:cx(bt.className,wt)})});return yt.displayName=ht.displayName||ht.name,yt},withRootProvider:ot,useStyles:it,useClassNames:at}},CheckCircleIcon=_e=>jsxRuntimeExports.jsx(chakra.svg,{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 24 24",..._e,children:jsxRuntimeExports.jsx("path",{d:"M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20ZM11.0026 16L6.75999 11.7574L8.17421 10.3431L11.0026 13.1716L16.6595 7.51472L18.0737 8.92893L11.0026 16Z"})}),WarningIcon=_e=>jsxRuntimeExports.jsx(chakra.svg,{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 24 24",..._e,children:jsxRuntimeExports.jsx("path",{d:"M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20ZM11 15H13V17H11V15ZM11 7H13V13H11V7Z"})}),CloseIcon=_e=>jsxRuntimeExports.jsx(chakra.svg,{viewBox:"0 0 24 24",fill:"currentColor",..._e,children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.7071 6.70711C19.0976 6.31658 19.0976 5.68342 18.7071 5.29289C18.3166 4.90237 17.6834 4.90237 17.2929 5.29289L12 10.5858L6.70711 5.29289C6.31658 4.90237 5.68342 4.90237 5.29289 5.29289C4.90237 5.68342 4.90237 6.31658 5.29289 6.70711L10.5858 12L5.29289 17.2929C4.90237 17.6834 4.90237 18.3166 5.29289 18.7071C5.68342 19.0976 6.31658 19.0976 6.70711 18.7071L12 13.4142L17.2929 18.7071C17.6834 19.0976 18.3166 19.0976 18.7071 18.7071C19.0976 18.3166 19.0976 17.6834 18.7071 17.2929L13.4142 12L18.7071 6.70711Z"})}),Box=chakra("div");Box.displayName="Box";const{withContext:withContext$1,PropsProvider}=createRecipeContext({key:"spinner"}),Spinner=withContext$1("span"),Image$1=reactExports.forwardRef(function(_,et){const{align:tt,fit:rt="cover",...it}=_;return jsxRuntimeExports.jsx(chakra.img,{ref:et,objectFit:rt,objectPosition:tt,className:cx("chakra-image",_.className),...it})}),Portal=_e=>{var ct;const{children:_,disabled:et}=_e,[tt,rt]=reactExports.useState((ct=_e.container)==null?void 0:ct.current),it=reactExports.useSyncExternalStore(subscribe,()=>!1,()=>!0),{getRootNode:st}=useEnvironmentContext();if(reactExports.useEffect(()=>{rt(()=>{var ut;return(ut=_e.container)==null?void 0:ut.current})},[_e.container]),it||et)return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:_});const at=tt??getPortalNode(st);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:reactExports.Children.map(_,ut=>reactDomExports.createPortal(ut,at))})},getPortalNode=_e=>{const _=_e==null?void 0:_e(),et=_.getRootNode();return isShadowRoot(et)?et:getDocument(_).body},subscribe=()=>()=>{};function getSeparatorStyles(_e){const{gap:_,direction:et}=_e,tt={column:{marginY:_,marginX:0,borderInlineStartWidth:0,borderTopWidth:"1px"},"column-reverse":{marginY:_,marginX:0,borderInlineStartWidth:0,borderTopWidth:"1px"},row:{marginX:_,marginY:0,borderInlineStartWidth:"1px",borderTopWidth:0},"row-reverse":{marginX:_,marginY:0,borderInlineStartWidth:"1px",borderTopWidth:0}};return{"&":mapObject(et,rt=>tt[rt])}}function getValidChildren(_e){return reactExports.Children.toArray(_e).filter(_=>reactExports.isValidElement(_))}const Stack=reactExports.forwardRef(function(_,et){const{direction:tt="column",align:rt,justify:it,gap:st="0.5rem",wrap:at,children:ct,separator:ut,className:dt,...ot}=_,nt=reactExports.useMemo(()=>getSeparatorStyles({gap:st,direction:tt}),[st,tt]),lt=reactExports.useMemo(()=>ut?getValidChildren(ct).map((ht,ft,gt)=>{const mt=typeof ht.key<"u"?ht.key:ft,yt=reactExports.cloneElement(ut,{css:[nt,ut.props.css]});return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[ht,ft===gt.length-1?null:yt]},mt)}):ct,[ct,ut,nt]);return jsxRuntimeExports.jsx(chakra.div,{ref:et,display:"flex",alignItems:rt,justifyContent:it,flexDirection:tt,flexWrap:at,gap:ut?void 0:st,className:cx("chakra-stack",dt),...ot,children:lt})});var anatomy=createAnatomy("toast").parts("group","root","title","description","actionTrigger","closeTrigger"),parts=anatomy.build(),dom=createScope({getRegionId:_e=>`toast-group:${_e}`,getRegionEl:(_e,_)=>dom.getById(_e,`toast-group:${_}`),getRootId:_e=>`toast:${_e.id}`,getRootEl:_e=>dom.getById(_e,dom.getRootId(_e)),getTitleId:_e=>`toast:${_e.id}:title`,getDescriptionId:_e=>`toast:${_e.id}:description`,getCloseTriggerId:_e=>`toast${_e.id}:close`});function getToastsByPlacement(_e,_){return _e.filter(et=>et.state.context.placement===_)}var defaultTimeouts={info:5e3,error:5e3,success:2e3,loading:1/0,DEFAULT:5e3};function getToastDuration(_e,_){return _e??defaultTimeouts[_]??defaultTimeouts.DEFAULT}function getGroupPlacementStyle(_e,_){var dt;const et=_e.offsets,tt=typeof et=="string"?{left:et,right:et,bottom:et,top:et}:et,rt=_e.dir==="rtl",it=_.replace("-start",rt?"-right":"-left").replace("-end",rt?"-left":"-right"),st=it.includes("right"),at=it.includes("left"),ct={position:"fixed",pointerEvents:_e.count>0?void 0:"none",display:"flex",flexDirection:"column","--gap":`${_e.gap}px`,"--first-height":`${((dt=_e.heights[0])==null?void 0:dt.height)||0}px`,zIndex:MAX_Z_INDEX};let ut="center";if(st&&(ut="flex-end"),at&&(ut="flex-start"),ct.alignItems=ut,it.includes("top")){const ot=tt.top;ct.top=`max(env(safe-area-inset-top, 0px), ${ot})`}if(it.includes("bottom")){const ot=tt.bottom;ct.bottom=`max(env(safe-area-inset-bottom, 0px), ${ot})`}if(!it.includes("left")){const ot=tt.right;ct.insetInlineEnd=`calc(env(safe-area-inset-right, 0px) + ${ot})`}if(!it.includes("right")){const ot=tt.left;ct.insetInlineStart=`calc(env(safe-area-inset-left, 0px) + ${ot})`}return ct}function getPlacementStyle(_e,_){const[et]=_e.placement.split("-"),tt=!_e.frontmost,rt=!_e.stacked,it={position:"absolute",pointerEvents:"auto","--opacity":"0","--remove-delay":`${_e.removeDelay}ms`,"--duration":`${_e.type==="loading"?Number.MAX_SAFE_INTEGER:_e.duration}ms`,"--initial-height":`${_e.height}px`,"--offset":`${_e.offset}px`,"--index":_e.index,"--z-index":_e.zIndex,"--lift-amount":"calc(var(--lift) * var(--gap))","--y":"100%","--x":"0"},st=at=>Object.assign(it,at);return et==="top"?st({top:"0","--sign":"-1","--y":"-100%","--lift":"1"}):et==="bottom"&&st({bottom:"0","--sign":"1","--y":"100%","--lift":"-1"}),_e.mounted&&(st({"--y":"0","--opacity":"1"}),_e.stacked&&st({"--y":"calc(var(--lift) * var(--offset))","--height":"var(--initial-height)"})),_||st({"--opacity":"0",pointerEvents:"none"}),tt&&rt&&(st({"--base-scale":"var(--index) * 0.05 + 1","--y":"calc(var(--lift-amount) * var(--index))","--scale":"calc(-1 * var(--base-scale))","--height":"var(--first-height)"}),_||st({"--y":"calc(var(--sign) * 40%)"})),tt&&_e.stacked&&!_&&st({"--y":"calc(var(--lift) * var(--offset) + var(--lift) * -100%)"}),_e.frontmost&&!_&&st({"--y":"calc(var(--lift) * -100%)"}),it}function getGhostBeforeStyle(_e,_){const et={position:"absolute",inset:"0",scale:"1 2",pointerEvents:_?"none":"auto"},tt=rt=>Object.assign(et,rt);return _e.frontmost&&!_&&tt({height:"calc(var(--initial-height) + 80%)"}),et}function getGhostAfterStyle(_e,_){return{position:"absolute",left:"0",height:"calc(var(--gap) + 2px)",bottom:"100%",width:"100%"}}function groupConnect(_e,_,et){function tt(){return isMachine(_e)?_e.getState():_e}function rt(dt){return getToastsByPlacement(tt().context.toasts,dt)}function it(dt){const ot=tt().context.toasts;return ot.length?!!ot.find(nt=>nt.id==dt):!1}function st(dt){const ot=`toast:${uuid()}`,nt=dt.id?dt.id:ot;return it(nt)||_({type:"ADD_TOAST",toast:{...dt,id:nt}}),nt}function at(dt,ot){return it(dt)&&_({type:"UPDATE_TOAST",id:dt,toast:ot}),dt}function ct(dt){const{id:ot}=dt;return(ot?it(ot):!1)&&ot!=null?at(ot,dt):st(dt)}function ut(dt){dt==null?_("DISMISS_ALL"):it(dt)&&_({type:"DISMISS_TOAST",id:dt})}return{getCount(){return tt().context.count},getPlacements(){const ot=tt().context.toasts.map(nt=>nt.state.context.placement);return Array.from(new Set(ot))},getToastsByPlacement:rt,isVisible:it,create:st,update:at,upsert:ct,dismiss:ut,remove(dt){dt==null?_("REMOVE_ALL"):it(dt)&&_({type:"REMOVE_TOAST",id:dt})},dismissByPlacement(dt){rt(dt).forEach(nt=>ut(nt.id))},loading(dt){return ct({...dt,type:"loading"})},success(dt){return ct({...dt,type:"success"})},error(dt){return ct({...dt,type:"error"})},promise(dt,ot,nt={}){const lt=ct({...nt,...ot.loading,type:"loading"});return runIfFn(dt).then(ht=>{const ft=runIfFn(ot.success,ht);ct({...nt,...ft,id:lt,type:"success"})}).catch(ht=>{const ft=runIfFn(ot.error,ht);ct({...nt,...ft,id:lt,type:"error"})}).finally(()=>{var ht;(ht=ot.finally)==null||ht.call(ot)}),lt},pause(dt){dt==null?_("PAUSE_ALL"):it(dt)&&_({type:"PAUSE_TOAST",id:dt})},resume(dt){dt==null?_("RESUME_ALL"):it(dt)&&_({type:"RESUME_TOAST",id:dt})},getGroupProps(dt){const{placement:ot,label:nt="Notifications"}=dt,lt=tt(),ht=lt.context.hotkey.join("+").replace(/Key/g,"").replace(/Digit/g,""),[ft,gt="center"]=ot.split("-");return et.element({...parts.group.attrs,dir:lt.context.dir,tabIndex:-1,"aria-label":`${ot} ${nt} ${ht}`,id:dom.getRegionId(ot),"data-placement":ot,"data-side":ft,"data-align":gt,"aria-live":"polite",role:"region",style:getGroupPlacementStyle(lt.context,ot),onMouseMove(){_({type:"REGION.POINTER_ENTER",placement:ot})},onMouseLeave(){_({type:"REGION.POINTER_LEAVE",placement:ot})},onFocus(mt){_({type:"REGION.FOCUS",target:mt.relatedTarget})},onBlur(mt){lt.context.isFocusWithin&&!contains(mt.currentTarget,mt.relatedTarget)&&_({type:"REGION.BLUR"})}})},subscribe(dt){const ot=tt();return subscribe$1(ot.context.toasts,()=>{const lt=rt(ot.context.placement).map(ht=>ht.getState().context);dt(lt)})}}}var{not,and,or}=guards;function createToastMachine(_e){const{type:_="info",duration:et,id:tt="1",placement:rt="bottom",removeDelay:it=200,...st}=_e,at=compact$2(st),ct=getToastDuration(et,_);return createMachine({id:tt,context:{id:tt,type:_,remaining:ct,duration:ct,removeDelay:it,createdAt:Date.now(),placement:rt,...at,height:0,offset:0,frontmost:!1,mounted:!1,index:-1,zIndex:0},initial:_==="loading"?"visible:persist":"visible",on:{UPDATE:[{guard:and("hasTypeChanged","isChangingToLoading"),target:"visible:persist",actions:["setContext"]},{guard:or("hasDurationChanged","hasTypeChanged"),target:"visible:updating",actions:["setContext"]},{actions:["setContext"]}],MEASURE:{actions:["measureHeight"]}},entry:["invokeOnVisible"],activities:["trackHeight"],states:{"visible:updating":{tags:["visible","updating"],after:{0:"visible"}},"visible:persist":{tags:["visible","paused"],on:{RESUME:{guard:not("isLoadingType"),target:"visible",actions:["setCreatedAt"]},DISMISS:"dismissing"}},visible:{tags:["visible"],after:{VISIBLE_DURATION:"dismissing"},on:{DISMISS:"dismissing",PAUSE:{target:"visible:persist",actions:"setRemainingDuration"}}},dismissing:{entry:"invokeOnDismiss",after:{REMOVE_DELAY:{target:"unmounted",actions:"notifyParentToRemove"}}},unmounted:{entry:"invokeOnUnmount",type:"final"}}},{activities:{trackHeight(ut,dt,{self:ot}){let nt;return raf(()=>{const lt=dom.getRootEl(ut);if(!lt)return;ut.mounted=!0;const ht=queryAll(lt,"[data-ghost]");warn(ht.length!==2,"[toast] No ghost element found in toast. Render the `ghostBefore` and `ghostAfter` elements");const ft=()=>{const yt=lt.style.height;lt.style.height="auto";const bt=lt.getBoundingClientRect().height;lt.style.height=yt,ut.height=bt,ot.sendParent({type:"UPDATE_HEIGHT",id:ot.id,height:bt,placement:ut.placement})};ft();const gt=dom.getWin(ut),mt=new gt.MutationObserver(ft);mt.observe(lt,{childList:!0,subtree:!0,characterData:!0}),nt=()=>mt.disconnect()}),()=>nt==null?void 0:nt()}},guards:{isChangingToLoading:(ut,dt)=>{var ot;return((ot=dt.toast)==null?void 0:ot.type)==="loading"},isLoadingType:ut=>ut.type==="loading",hasTypeChanged:(ut,dt)=>{var ot;return((ot=dt.toast)==null?void 0:ot.type)!=null&&dt.toast.type!==ut.type},hasDurationChanged:(ut,dt)=>{var ot;return((ot=dt.toast)==null?void 0:ot.duration)!=null&&dt.toast.duration!==ut.duration}},delays:{VISIBLE_DURATION:ut=>ut.remaining,REMOVE_DELAY:ut=>ut.removeDelay},actions:{measureHeight(ut,dt,{self:ot}){raf(()=>{const nt=dom.getRootEl(ut);if(!nt)return;ut.mounted=!0;const lt=nt.style.height;nt.style.height="auto";const ht=nt.getBoundingClientRect().height;nt.style.height=lt,ut.height=ht,ot.sendParent({type:"UPDATE_HEIGHT",id:ot.id,height:ht,placement:ut.placement})})},setRemainingDuration(ut){ut.remaining-=Date.now()-ut.createdAt},setCreatedAt(ut){ut.createdAt=Date.now()},notifyParentToRemove(ut,dt,{self:ot}){ot.sendParent({type:"REMOVE_TOAST",id:ot.id})},invokeOnDismiss(ut){var dt;(dt=ut.onStatusChange)==null||dt.call(ut,{status:"dismissing"})},invokeOnUnmount(ut){var dt;(dt=ut.onStatusChange)==null||dt.call(ut,{status:"unmounted"})},invokeOnVisible(ut){var dt;(dt=ut.onStatusChange)==null||dt.call(ut,{status:"visible"})},setContext(ut,dt){var ht,ft;const ot=(ht=dt.toast)==null?void 0:ht.duration,nt=((ft=dt.toast)==null?void 0:ft.type)??ut.type,lt=getToastDuration(ot,nt);Object.assign(ut,{...dt.toast,duration:lt,remaining:lt})}}})}function groupMachine(_e){const _=compact$2(_e);return createMachine({id:"toaster",initial:_.overlap?"overlap":"stack",context:{dir:"ltr",max:Number.MAX_SAFE_INTEGER,gap:16,pauseOnPageIdle:!1,hotkey:["altKey","KeyT"],offsets:"1rem",placement:"bottom",removeDelay:200,..._,toasts:[],lastFocusedEl:null,isFocusWithin:!1,heights:[]},computed:{count:et=>et.toasts.length},activities:["trackDocumentVisibility","trackHotKeyPress"],watch:{toasts:["collapsedIfEmpty","setDismissableBranch"]},exit:["removeToasts","clearDismissableBranch","clearLastFocusedEl"],on:{PAUSE_TOAST:{actions:["pauseToast"]},PAUSE_ALL:{actions:["pauseToasts"]},RESUME_TOAST:{actions:["resumeToast"]},RESUME_ALL:{actions:["resumeToasts"]},ADD_TOAST:{guard:"isWithinRange",actions:["createToast","syncToastIndex"]},UPDATE_TOAST:{actions:["updateToast"]},DISMISS_TOAST:{actions:["dismissToast"]},DISMISS_ALL:{actions:["dismissToasts"]},REMOVE_TOAST:{actions:["removeToast","syncToastIndex","syncToastOffset"]},REMOVE_ALL:{actions:["removeToasts"]},UPDATE_HEIGHT:{actions:["syncHeights","syncToastOffset"]},"DOC.HOTKEY":{actions:["focusRegionEl"]},"REGION.BLUR":[{guard:"isOverlapping",target:"overlap",actions:["resumeToasts","restoreLastFocusedEl"]},{actions:["resumeToasts","restoreLastFocusedEl"]}]},states:{stack:{entry:["expandToasts"],on:{"REGION.POINTER_LEAVE":[{guard:"isOverlapping",target:"overlap",actions:["resumeToasts"]},{actions:["resumeToasts"]}],"REGION.OVERLAP":{target:"overlap"},"REGION.FOCUS":{actions:["setLastFocusedEl","pauseToasts"]},"REGION.POINTER_ENTER":{actions:["pauseToasts"]}}},overlap:{entry:["collapseToasts"],on:{"REGION.STACK":{target:"stack"},"REGION.POINTER_ENTER":{target:"stack",actions:["pauseToasts"]},"REGION.FOCUS":{target:"stack",actions:["setLastFocusedEl","pauseToasts"]}}}}},{guards:{isWithinRange:et=>et.toasts.length<et.max,isOverlapping:et=>!!et.overlap},activities:{trackHotKeyPress(et,tt,{send:rt}){return addDomEvent(document,"keydown",st=>{et.hotkey.every(ct=>st[ct]||st.code===ct)&&rt({type:"DOC.HOTKEY"})},{capture:!0})},trackDocumentVisibility(et,tt,{send:rt}){if(!et.pauseOnPageIdle)return;const it=dom.getDoc(et);return addDomEvent(it,"visibilitychange",()=>{rt(it.visibilityState==="hidden"?"PAUSE_ALL":"RESUME_ALL")})}},actions:{setDismissableBranch(et){var st;const rt=getToastsByPlacement(et.toasts,et.placement).length>0;if(!rt){(st=et._cleanup)==null||st.call(et);return}if(rt&&et._cleanup)return;const it=()=>dom.getRegionEl(et,et.placement);et._cleanup=trackDismissableBranch(it,{defer:!0})},clearDismissableBranch(et){var tt;(tt=et._cleanup)==null||tt.call(et)},focusRegionEl(et){queueMicrotask(()=>{var tt;(tt=dom.getRegionEl(et,et.placement))==null||tt.focus()})},expandToasts(et){each(et,tt=>{tt.state.context.stacked=!0})},collapseToasts(et){each(et,tt=>{tt.state.context.stacked=!1})},collapsedIfEmpty(et,tt,{send:rt}){!et.overlap||et.toasts.length>1||rt("REGION.OVERLAP")},pauseToast(et,tt,{self:rt}){rt.sendChild("PAUSE",tt.id)},pauseToasts(et){et.toasts.forEach(tt=>tt.send("PAUSE"))},resumeToast(et,tt,{self:rt}){rt.sendChild("RESUME",tt.id)},resumeToasts(et){et.toasts.forEach(tt=>tt.send("RESUME"))},measureToasts(et){et.toasts.forEach(tt=>tt.send("MEASURE"))},createToast(et,tt,{self:rt,getState:it}){const st={placement:et.placement,duration:et.duration,removeDelay:et.removeDelay,...tt.toast,dir:et.dir,getRootNode:et.getRootNode,stacked:it().matches("stack")},at=createToastMachine(st),ct=rt.spawn(at);et.toasts=[ct,...et.toasts]},updateToast(et,tt,{self:rt}){rt.sendChild({type:"UPDATE",toast:tt.toast},tt.id)},dismissToast(et,tt,{self:rt}){rt.sendChild("DISMISS",tt.id)},dismissToasts(et){et.toasts.forEach(tt=>tt.send("DISMISS"))},removeToast(et,tt,{self:rt}){rt.stopChild(tt.id),et.toasts=et.toasts.filter(it=>it.id!==tt.id),et.heights=et.heights.filter(it=>it.id!==tt.id)},removeToasts(et,tt,{self:rt}){et.toasts.forEach(it=>rt.stopChild(it.id)),et.toasts=[],et.heights=[]},syncHeights(et,tt){const rt=et.heights.find(it=>it.id===tt.id);if(rt)rt.height=tt.height,rt.placement=tt.placement;else{const it={id:tt.id,height:tt.height,placement:tt.placement};et.heights=[it,...et.heights]}},syncToastIndex(et){each(et,(tt,rt,it)=>{tt.state.context.index=rt,tt.state.context.frontmost=rt===0,tt.state.context.zIndex=it.length-rt})},syncToastOffset(et,tt){const rt=tt.placement??et.placement;each({...et,placement:rt},it=>{const st=Math.max(et.heights.findIndex(ct=>ct.id===it.id),0),at=et.heights.reduce((ct,ut,dt)=>dt>=st?ct:ct+ut.height,0);it.state.context.offset=st*et.gap+at})},setLastFocusedEl(et,tt){et.isFocusWithin||!tt.target||(et.isFocusWithin=!0,et.lastFocusedEl=ref$1(tt.target))},restoreLastFocusedEl(et){et.isFocusWithin=!1,et.lastFocusedEl&&(et.lastFocusedEl.focus({preventScroll:!0}),et.lastFocusedEl=null)},clearLastFocusedEl(et){et.lastFocusedEl&&(et.lastFocusedEl.focus({preventScroll:!0}),et.lastFocusedEl=null,et.isFocusWithin=!1)}}})}function each(_e,_){getToastsByPlacement(_e.toasts,_e.placement).forEach(_)}function connect(_e,_,et){const tt=_e.hasTag("visible"),rt=_e.hasTag("paused"),it=_e.context.placement,st=_e.context.type,[at,ct="center"]=it.split("-");return{type:st,title:_e.context.title,description:_e.context.description,placement:it,visible:tt,paused:rt,pause(){_("PAUSE")},resume(){_("RESUME")},dismiss(){_("DISMISS")},getRootProps(){return et.element({...parts.root.attrs,dir:_e.context.dir,id:dom.getRootId(_e.context),"data-state":tt?"open":"closed","data-type":st,"data-placement":it,"data-align":ct,"data-side":at,"data-mounted":dataAttr(_e.context.mounted),"data-paused":dataAttr(rt),"data-first":dataAttr(_e.context.frontmost),"data-sibling":dataAttr(!_e.context.frontmost),"data-stack":dataAttr(_e.context.stacked),"data-overlap":dataAttr(!_e.context.stacked),role:"status","aria-atomic":"true","aria-describedby":_e.context.description?dom.getDescriptionId(_e.context):void 0,"aria-labelledby":_e.context.title?dom.getTitleId(_e.context):void 0,tabIndex:0,style:getPlacementStyle(_e.context,tt),onKeyDown(ut){ut.defaultPrevented||ut.key=="Escape"&&(_("DISMISS"),ut.preventDefault())}})},getGhostBeforeProps(){return et.element({"data-ghost":"before",style:getGhostBeforeStyle(_e.context,tt)})},getGhostAfterProps(){return et.element({"data-ghost":"after",style:getGhostAfterStyle()})},getTitleProps(){return et.element({...parts.title.attrs,id:dom.getTitleId(_e.context)})},getDescriptionProps(){return et.element({...parts.description.attrs,id:dom.getDescriptionId(_e.context)})},getActionTriggerProps(){return et.button({...parts.actionTrigger.attrs,type:"button",onClick(ut){var dt,ot;ut.defaultPrevented||((ot=(dt=_e.context.action)==null?void 0:dt.onClick)==null||ot.call(dt),_("DISMISS"))}})},getCloseTriggerProps(){return et.button({id:dom.getCloseTriggerId(_e.context),...parts.closeTrigger.attrs,type:"button","aria-label":"Dismiss notification",onClick(ut){ut.defaultPrevented||_("DISMISS")}})}}}var group={connect:groupConnect,machine:groupMachine};const createToaster=_e=>{const _=group.machine({id:"1",..._e});return{...group.connect(_,_.send,normalizeProps),machine:_}},[ToastProvider,useToastContext]=createContext({name:"ToastContext",hookName:"useToastContext",providerName:"<ToastProvider />"}),ToastActionTrigger$1=reactExports.forwardRef((_e,_)=>{const et=useToastContext(),tt=mergeProps(et.getActionTriggerProps(),_e);return jsxRuntimeExports.jsx(ark.button,{...tt,ref:_})});ToastActionTrigger$1.displayName="ToastActionTrigger";const ToastCloseTrigger$1=reactExports.forwardRef((_e,_)=>{const et=useToastContext(),tt=mergeProps(et.getCloseTriggerProps(),_e);return jsxRuntimeExports.jsx(ark.button,{...tt,ref:_})});ToastCloseTrigger$1.displayName="ToastCloseTrigger";const ToastDescription$1=reactExports.forwardRef((_e,_)=>{const et=useToastContext(),tt=mergeProps(et.getDescriptionProps(),_e);return jsxRuntimeExports.jsx(ark.div,{...tt,ref:_})});ToastDescription$1.displayName="ToastDescription";const ToastRoot$1=reactExports.forwardRef((_e,_)=>{const et=useToastContext(),tt=mergeProps(et.getRootProps(),_e);return jsxRuntimeExports.jsxs("div",{...tt,ref:_,children:[jsxRuntimeExports.jsx("div",{...et.getGhostBeforeProps()}),_e.children,jsxRuntimeExports.jsx("div",{...et.getGhostAfterProps()})]})});ToastRoot$1.displayName="ToastRoot";const ToastTitle$1=reactExports.forwardRef((_e,_)=>{const et=useToastContext(),tt=mergeProps(et.getTitleProps(),_e);return jsxRuntimeExports.jsx(ark.div,{...tt,ref:_})});ToastTitle$1.displayName="ToastTitle";const Toaster$2=reactExports.forwardRef((_e,_)=>{const{toaster:et,children:tt,...rt}=_e,[it,st]=useMachine(et.machine),at=it.context.placement,ct=group.connect(it,st,normalizeProps),ut=ct.getToastsByPlacement(at),dt=mergeProps(ct.getGroupProps({placement:at}),rt);return jsxRuntimeExports.jsx(ark.div,{...dt,ref:_,children:ut.map(ot=>jsxRuntimeExports.jsx(ToastActor,{value:ot,children:nt=>tt(nt)},ot.id))})});Toaster$2.displayName="Toaster";const ToastActor=_e=>{const[_,et]=useActor(_e.value),tt=connect(_,et,normalizeProps);return jsxRuntimeExports.jsx(ToastProvider,{value:tt,children:_e.children(_.context)})},{withProvider,withContext,useStyles:useToastStyles}=createSlotRecipeContext({key:"toast"}),Toaster$1=chakra(Toaster$2,{},{forwardAsChild:!0}),ToastRoot=withProvider(ToastRoot$1,"root",{forwardAsChild:!0}),ToastCloseTrigger=withContext(ToastCloseTrigger$1,"closeTrigger",{forwardAsChild:!0,defaultProps:{children:jsxRuntimeExports.jsx(CloseIcon,{})}}),ToastTitle=withContext(ToastTitle$1,"title",{forwardAsChild:!0}),ToastDescription=withContext(ToastDescription$1,"description",{forwardAsChild:!0}),ToastActionTrigger=withContext(ToastActionTrigger$1,"actionTrigger",{forwardAsChild:!0}),iconMap={warning:WarningIcon,success:CheckCircleIcon,error:WarningIcon},ToastIndicator=reactExports.forwardRef(function(_,et){const tt=useToastContext(),rt=useToastStyles(),it=iconMap[tt.type];return it?jsxRuntimeExports.jsx(it,{ref:et,..._,css:[rt.indicator,_.css]}):null}),canvasStyles={background:{container:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:"auto"},image:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",objectFit:"cover",zIndex:1},video:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",objectFit:"cover",zIndex:1,transform:"scaleX(-1)"}},canvas:{container:{position:"relative",width:"100%",height:"100%",zIndex:"1",pointerEvents:"auto"}},subtitle:{container:{position:"absolute",bottom:"30px",left:"50%",transform:"translateX(-50%)",backgroundColor:"rgba(0, 0, 0, 0.7)",padding:"15px 30px",borderRadius:"12px",minWidth:"60%",maxWidth:"95%",zIndex:2},text:{color:"white",fontSize:"1.5rem",textAlign:"center",lineHeight:"1.4",whiteSpace:"pre-wrap"}},wsStatus:{container:{position:"absolute",top:"20px",left:"20px",zIndex:2,padding:"8px 16px",borderRadius:"20px",fontSize:"14px",fontWeight:"medium",color:"white",transition:"all 0.2s",cursor:"pointer",userSelect:"none",_hover:{opacity:.8}}}},DEFAULT_CAMERA_CONFIG={width:320,height:240},CameraContext=reactExports.createContext(null);function CameraProvider({children:_e}){const[_,et]=reactExports.useState(!1),[tt,rt]=reactExports.useState(!1),[it,st]=reactExports.useState(DEFAULT_CAMERA_CONFIG),at=reactExports.useRef(null),ct=reactExports.useRef(null),ut=reactExports.useRef(null),dt=reactExports.useCallback(async()=>{try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Camera API is not supported on this device");if(!(await navigator.mediaDevices.enumerateDevices()).some(yt=>yt.kind==="videoinput"))throw new Error("No camera found on this device");const mt=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:it.width},height:{ideal:it.height}}});at.current=mt,ut.current&&(ut.current.srcObject=mt),et(!0)}catch(ft){throw console.error("Failed to start camera:",ft),ft}},[it]),ot=reactExports.useCallback(()=>{at.current&&(at.current.getTracks().forEach(ft=>ft.stop()),at.current=null,et(!1))},[]),nt=reactExports.useCallback(async()=>{try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Camera API is not supported on this device");if(!(await navigator.mediaDevices.enumerateDevices()).some(yt=>yt.kind==="videoinput"))throw new Error("No camera found on this device");const mt=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:it.width},height:{ideal:it.height}}});ct.current=mt,rt(!0)}catch(ft){throw console.error("Failed to start background camera:",ft),ft}},[it]),lt=reactExports.useCallback(()=>{ct.current&&(ct.current.getTracks().forEach(ft=>ft.stop()),ct.current=null,rt(!1))},[]),ht=reactExports.useMemo(()=>({isStreaming:_,stream:at.current,startCamera:dt,stopCamera:ot,cameraConfig:it,setCameraConfig:st,videoRef:ut,backgroundStream:ct.current,startBackgroundCamera:nt,stopBackgroundCamera:lt,isBackgroundStreaming:tt}),[_,dt,ot,it,tt,nt,lt]);return jsxRuntimeExports.jsx(CameraContext.Provider,{value:ht,children:_e})}function useCamera(){const _e=reactExports.useContext(CameraContext);if(!_e)throw new Error("useCamera must be used within a CameraProvider");return _e}function useLocalStorage(_e,_,et){const[tt,rt]=reactExports.useState(()=>{try{const st=window.localStorage.getItem(_e);return st?JSON.parse(st):_}catch(st){return console.error(`Error reading localStorage key "${_e}":`,st),_}});return[tt,st=>{try{const at=st instanceof Function?st(tt):st,ct=et!=null&&et.filter?et.filter(at):at;rt(at),window.localStorage.setItem(_e,JSON.stringify(ct))}catch(at){console.error(`Error setting localStorage key "${_e}":`,at)}}]}var extendStatics=function(_e,_){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(et,tt){et.__proto__=tt}||function(et,tt){for(var rt in tt)Object.prototype.hasOwnProperty.call(tt,rt)&&(et[rt]=tt[rt])},extendStatics(_e,_)};function __extends(_e,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");extendStatics(_e,_);function et(){this.constructor=_e}_e.prototype=_===null?Object.create(_):(et.prototype=_.prototype,new et)}function __values(_e){var _=typeof Symbol=="function"&&Symbol.iterator,et=_&&_e[_],tt=0;if(et)return et.call(_e);if(_e&&typeof _e.length=="number")return{next:function(){return _e&&tt>=_e.length&&(_e=void 0),{value:_e&&_e[tt++],done:!_e}}};throw new TypeError(_?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(_e,_){var et=typeof Symbol=="function"&&_e[Symbol.iterator];if(!et)return _e;var tt=et.call(_e),rt,it=[],st;try{for(;(_===void 0||_-- >0)&&!(rt=tt.next()).done;)it.push(rt.value)}catch(at){st={error:at}}finally{try{rt&&!rt.done&&(et=tt.return)&&et.call(tt)}finally{if(st)throw st.error}}return it}function __spreadArray(_e,_,et){if(et||arguments.length===2)for(var tt=0,rt=_.length,it;tt<rt;tt++)(it||!(tt in _))&&(it||(it=Array.prototype.slice.call(_,0,tt)),it[tt]=_[tt]);return _e.concat(it||Array.prototype.slice.call(_))}typeof SuppressedError=="function"&&SuppressedError;function isFunction(_e){return typeof _e=="function"}function createErrorClass(_e){var _=function(tt){Error.call(tt),tt.stack=new Error().stack},et=_e(_);return et.prototype=Object.create(Error.prototype),et.prototype.constructor=et,et}var UnsubscriptionError=createErrorClass(function(_e){return function(et){_e(this),this.message=et?et.length+` errors occurred during unsubscription:
`+et.map(function(tt,rt){return rt+1+") "+tt.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=et}});function arrRemove(_e,_){if(_e){var et=_e.indexOf(_);0<=et&&_e.splice(et,1)}}var Subscription=function(){function _e(_){this.initialTeardown=_,this.closed=!1,this._parentage=null,this._finalizers=null}return _e.prototype.unsubscribe=function(){var _,et,tt,rt,it;if(!this.closed){this.closed=!0;var st=this._parentage;if(st)if(this._parentage=null,Array.isArray(st))try{for(var at=__values(st),ct=at.next();!ct.done;ct=at.next()){var ut=ct.value;ut.remove(this)}}catch(ft){_={error:ft}}finally{try{ct&&!ct.done&&(et=at.return)&&et.call(at)}finally{if(_)throw _.error}}else st.remove(this);var dt=this.initialTeardown;if(isFunction(dt))try{dt()}catch(ft){it=ft instanceof UnsubscriptionError?ft.errors:[ft]}var ot=this._finalizers;if(ot){this._finalizers=null;try{for(var nt=__values(ot),lt=nt.next();!lt.done;lt=nt.next()){var ht=lt.value;try{execFinalizer(ht)}catch(ft){it=it??[],ft instanceof UnsubscriptionError?it=__spreadArray(__spreadArray([],__read(it)),__read(ft.errors)):it.push(ft)}}}catch(ft){tt={error:ft}}finally{try{lt&&!lt.done&&(rt=nt.return)&&rt.call(nt)}finally{if(tt)throw tt.error}}}if(it)throw new UnsubscriptionError(it)}},_e.prototype.add=function(_){var et;if(_&&_!==this)if(this.closed)execFinalizer(_);else{if(_ instanceof _e){if(_.closed||_._hasParent(this))return;_._addParent(this)}(this._finalizers=(et=this._finalizers)!==null&&et!==void 0?et:[]).push(_)}},_e.prototype._hasParent=function(_){var et=this._parentage;return et===_||Array.isArray(et)&&et.includes(_)},_e.prototype._addParent=function(_){var et=this._parentage;this._parentage=Array.isArray(et)?(et.push(_),et):et?[et,_]:_},_e.prototype._removeParent=function(_){var et=this._parentage;et===_?this._parentage=null:Array.isArray(et)&&arrRemove(et,_)},_e.prototype.remove=function(_){var et=this._finalizers;et&&arrRemove(et,_),_ instanceof _e&&_._removeParent(this)},_e.EMPTY=function(){var _=new _e;return _.closed=!0,_}(),_e}(),EMPTY_SUBSCRIPTION=Subscription.EMPTY;function isSubscription(_e){return _e instanceof Subscription||_e&&"closed"in _e&&isFunction(_e.remove)&&isFunction(_e.add)&&isFunction(_e.unsubscribe)}function execFinalizer(_e){isFunction(_e)?_e():_e.unsubscribe()}var config$1={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},timeoutProvider={setTimeout:function(_e,_){for(var et=[],tt=2;tt<arguments.length;tt++)et[tt-2]=arguments[tt];return setTimeout.apply(void 0,__spreadArray([_e,_],__read(et)))},clearTimeout:function(_e){return clearTimeout(_e)},delegate:void 0};function reportUnhandledError(_e){timeoutProvider.setTimeout(function(){throw _e})}function noop$1(){}function errorContext(_e){_e()}var Subscriber=function(_e){__extends(_,_e);function _(et){var tt=_e.call(this)||this;return tt.isStopped=!1,et?(tt.destination=et,isSubscription(et)&&et.add(tt)):tt.destination=EMPTY_OBSERVER,tt}return _.create=function(et,tt,rt){return new SafeSubscriber(et,tt,rt)},_.prototype.next=function(et){this.isStopped||this._next(et)},_.prototype.error=function(et){this.isStopped||(this.isStopped=!0,this._error(et))},_.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},_.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,_e.prototype.unsubscribe.call(this),this.destination=null)},_.prototype._next=function(et){this.destination.next(et)},_.prototype._error=function(et){try{this.destination.error(et)}finally{this.unsubscribe()}},_.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},_}(Subscription),ConsumerObserver=function(){function _e(_){this.partialObserver=_}return _e.prototype.next=function(_){var et=this.partialObserver;if(et.next)try{et.next(_)}catch(tt){handleUnhandledError(tt)}},_e.prototype.error=function(_){var et=this.partialObserver;if(et.error)try{et.error(_)}catch(tt){handleUnhandledError(tt)}else handleUnhandledError(_)},_e.prototype.complete=function(){var _=this.partialObserver;if(_.complete)try{_.complete()}catch(et){handleUnhandledError(et)}},_e}(),SafeSubscriber=function(_e){__extends(_,_e);function _(et,tt,rt){var it=_e.call(this)||this,st;return isFunction(et)||!et?st={next:et??void 0,error:tt??void 0,complete:rt??void 0}:st=et,it.destination=new ConsumerObserver(st),it}return _}(Subscriber);function handleUnhandledError(_e){reportUnhandledError(_e)}function defaultErrorHandler(_e){throw _e}var EMPTY_OBSERVER={closed:!0,next:noop$1,error:defaultErrorHandler,complete:noop$1},observable=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function identity$1(_e){return _e}function pipeFromArray(_e){return _e.length===0?identity$1:_e.length===1?_e[0]:function(et){return _e.reduce(function(tt,rt){return rt(tt)},et)}}var Observable=function(){function _e(_){_&&(this._subscribe=_)}return _e.prototype.lift=function(_){var et=new _e;return et.source=this,et.operator=_,et},_e.prototype.subscribe=function(_,et,tt){var rt=this,it=isSubscriber(_)?_:new SafeSubscriber(_,et,tt);return errorContext(function(){var st=rt,at=st.operator,ct=st.source;it.add(at?at.call(it,ct):ct?rt._subscribe(it):rt._trySubscribe(it))}),it},_e.prototype._trySubscribe=function(_){try{return this._subscribe(_)}catch(et){_.error(et)}},_e.prototype.forEach=function(_,et){var tt=this;return et=getPromiseCtor(et),new et(function(rt,it){var st=new SafeSubscriber({next:function(at){try{_(at)}catch(ct){it(ct),st.unsubscribe()}},error:it,complete:rt});tt.subscribe(st)})},_e.prototype._subscribe=function(_){var et;return(et=this.source)===null||et===void 0?void 0:et.subscribe(_)},_e.prototype[observable]=function(){return this},_e.prototype.pipe=function(){for(var _=[],et=0;et<arguments.length;et++)_[et]=arguments[et];return pipeFromArray(_)(this)},_e.prototype.toPromise=function(_){var et=this;return _=getPromiseCtor(_),new _(function(tt,rt){var it;et.subscribe(function(st){return it=st},function(st){return rt(st)},function(){return tt(it)})})},_e.create=function(_){return new _e(_)},_e}();function getPromiseCtor(_e){var _;return(_=_e??config$1.Promise)!==null&&_!==void 0?_:Promise}function isObserver(_e){return _e&&isFunction(_e.next)&&isFunction(_e.error)&&isFunction(_e.complete)}function isSubscriber(_e){return _e&&_e instanceof Subscriber||isObserver(_e)&&isSubscription(_e)}var ObjectUnsubscribedError=createErrorClass(function(_e){return function(){_e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),Subject=function(_e){__extends(_,_e);function _(){var et=_e.call(this)||this;return et.closed=!1,et.currentObservers=null,et.observers=[],et.isStopped=!1,et.hasError=!1,et.thrownError=null,et}return _.prototype.lift=function(et){var tt=new AnonymousSubject(this,this);return tt.operator=et,tt},_.prototype._throwIfClosed=function(){if(this.closed)throw new ObjectUnsubscribedError},_.prototype.next=function(et){var tt=this;errorContext(function(){var rt,it;if(tt._throwIfClosed(),!tt.isStopped){tt.currentObservers||(tt.currentObservers=Array.from(tt.observers));try{for(var st=__values(tt.currentObservers),at=st.next();!at.done;at=st.next()){var ct=at.value;ct.next(et)}}catch(ut){rt={error:ut}}finally{try{at&&!at.done&&(it=st.return)&&it.call(st)}finally{if(rt)throw rt.error}}}})},_.prototype.error=function(et){var tt=this;errorContext(function(){if(tt._throwIfClosed(),!tt.isStopped){tt.hasError=tt.isStopped=!0,tt.thrownError=et;for(var rt=tt.observers;rt.length;)rt.shift().error(et)}})},_.prototype.complete=function(){var et=this;errorContext(function(){if(et._throwIfClosed(),!et.isStopped){et.isStopped=!0;for(var tt=et.observers;tt.length;)tt.shift().complete()}})},_.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(_.prototype,"observed",{get:function(){var et;return((et=this.observers)===null||et===void 0?void 0:et.length)>0},enumerable:!1,configurable:!0}),_.prototype._trySubscribe=function(et){return this._throwIfClosed(),_e.prototype._trySubscribe.call(this,et)},_.prototype._subscribe=function(et){return this._throwIfClosed(),this._checkFinalizedStatuses(et),this._innerSubscribe(et)},_.prototype._innerSubscribe=function(et){var tt=this,rt=this,it=rt.hasError,st=rt.isStopped,at=rt.observers;return it||st?EMPTY_SUBSCRIPTION:(this.currentObservers=null,at.push(et),new Subscription(function(){tt.currentObservers=null,arrRemove(at,et)}))},_.prototype._checkFinalizedStatuses=function(et){var tt=this,rt=tt.hasError,it=tt.thrownError,st=tt.isStopped;rt?et.error(it):st&&et.complete()},_.prototype.asObservable=function(){var et=new Observable;return et.source=this,et},_.create=function(et,tt){return new AnonymousSubject(et,tt)},_}(Observable),AnonymousSubject=function(_e){__extends(_,_e);function _(et,tt){var rt=_e.call(this)||this;return rt.destination=et,rt.source=tt,rt}return _.prototype.next=function(et){var tt,rt;(rt=(tt=this.destination)===null||tt===void 0?void 0:tt.next)===null||rt===void 0||rt.call(tt,et)},_.prototype.error=function(et){var tt,rt;(rt=(tt=this.destination)===null||tt===void 0?void 0:tt.error)===null||rt===void 0||rt.call(tt,et)},_.prototype.complete=function(){var et,tt;(tt=(et=this.destination)===null||et===void 0?void 0:et.complete)===null||tt===void 0||tt.call(et)},_.prototype._subscribe=function(et){var tt,rt;return(rt=(tt=this.source)===null||tt===void 0?void 0:tt.subscribe(et))!==null&&rt!==void 0?rt:EMPTY_SUBSCRIPTION},_}(Subject);const gn=class gn{constructor(){en(this,"ws",null);en(this,"messageSubject",new Subject);en(this,"stateSubject",new Subject);en(this,"currentState","CLOSED")}static getInstance(){return gn.instance||(gn.instance=new gn),gn.instance}initializeConnection(){this.sendMessage({type:"fetch-backgrounds"}),this.sendMessage({type:"fetch-configs"}),this.sendMessage({type:"fetch-history-list"}),this.sendMessage({type:"create-new-history"})}connect(_){var et,tt;(((et=this.ws)==null?void 0:et.readyState)===WebSocket.CONNECTING||((tt=this.ws)==null?void 0:tt.readyState)===WebSocket.OPEN)&&this.disconnect();try{this.ws=new WebSocket(_),this.currentState="CONNECTING",this.stateSubject.next("CONNECTING"),this.ws.onopen=()=>{this.currentState="OPEN",this.stateSubject.next("OPEN"),this.initializeConnection()},this.ws.onmessage=rt=>{try{const it=JSON.parse(rt.data);this.messageSubject.next(it)}catch(it){console.error("Failed to parse WebSocket message:",it)}},this.ws.onclose=()=>{this.currentState="CLOSED",this.stateSubject.next("CLOSED")},this.ws.onerror=()=>{this.currentState="CLOSED",this.stateSubject.next("CLOSED")}}catch(rt){console.error("Failed to connect to WebSocket:",rt),this.currentState="CLOSED",this.stateSubject.next("CLOSED")}}sendMessage(_){var et;((et=this.ws)==null?void 0:et.readyState)===WebSocket.OPEN?this.ws.send(JSON.stringify(_)):console.warn("WebSocket is not open. Unable to send message:",_)}onMessage(_){return this.messageSubject.subscribe(_)}onStateChange(_){return this.stateSubject.subscribe(_)}disconnect(){var _;(_=this.ws)==null||_.close(),this.ws=null}getCurrentState(){return this.currentState}};en(gn,"instance");let WebSocketService=gn;const wsService=WebSocketService.getInstance(),DEFAULT_WS_URL="ws://localhost:12393/client-ws",DEFAULT_BASE_URL="http://localhost:12393",WebSocketContext=React.createContext({sendMessage:wsService.sendMessage.bind(wsService),wsState:"CLOSED",reconnect:()=>wsService.connect(DEFAULT_WS_URL),wsUrl:DEFAULT_WS_URL,setWsUrl:()=>{},baseUrl:DEFAULT_BASE_URL,setBaseUrl:()=>{}});function useWebSocket(){const _e=reactExports.useContext(WebSocketContext);if(!_e)throw new Error("useWebSocket must be used within a WebSocketProvider");return _e}const defaultWsUrl=DEFAULT_WS_URL,defaultBaseUrl=DEFAULT_BASE_URL,BgUrlContext=reactExports.createContext(null);function BgUrlProvider({children:_e}){const{baseUrl:_}=useWebSocket(),et=`${_}/bg/news.webp`,[tt,rt]=useLocalStorage("backgroundUrl",et),[it,st]=reactExports.useState([]),[at,ct]=reactExports.useState(null),ut=reactExports.useCallback(()=>{rt(et)},[rt,et]),dt=reactExports.useCallback(gt=>{st(mt=>[...mt,gt])},[]),ot=reactExports.useCallback(gt=>{st(mt=>mt.filter(yt=>yt.name!==gt))},[]),nt=reactExports.useMemo(()=>tt===et,[tt,et]),[lt,ht]=reactExports.useState(!1),ft=reactExports.useMemo(()=>({backgroundUrl:tt,setBackgroundUrl:rt,backgroundFiles:it,setBackgroundFiles:st,resetBackground:ut,addBackgroundFile:dt,removeBackgroundFile:ot,isDefaultBackground:nt,useCameraBackground:lt,setUseCameraBackground:ht,newsImageUrl:at,setNewsImageUrl:ct}),[tt,rt,it,ut,dt,ot,nt,lt,at,ct]);return jsxRuntimeExports.jsx(BgUrlContext.Provider,{value:ft,children:_e})}function useBgUrl(){const _e=reactExports.useContext(BgUrlContext);if(!_e)throw new Error("useBgUrl must be used within a BgUrlProvider");return _e}const Background=reactExports.memo(({children:_e})=>{const _=reactExports.useRef(null),{backgroundStream:et,isBackgroundStreaming:tt,startBackgroundCamera:rt,stopBackgroundCamera:it}=useCamera(),{useCameraBackground:st,backgroundUrl:at,newsImageUrl:ct}=useBgUrl();return reactExports.useEffect(()=>{st?rt():it()},[st,rt,it]),reactExports.useEffect(()=>{_.current&&et&&(_.current.srcObject=et)},[et]),jsxRuntimeExports.jsxs(Box,{...canvasStyles.background.container,children:[st?jsxRuntimeExports.jsx("video",{ref:_,autoPlay:!0,playsInline:!0,muted:!0,style:{...canvasStyles.background.video,display:tt?"block":"none",transform:"scaleX(-1)"}}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{style:{position:"fixed",top:"340px",left:"235px",width:"660px",height:"370px",overflow:"hidden",zIndex:100},children:jsxRuntimeExports.jsx("img",{src:ct||"https://img.freepik.com/free-photo/abstract-geometric-background-shapes-texture_1194-301824.jpg?semt=ais_hybrid&w=740",alt:"background",style:{width:"100%",height:"100%",objectFit:"cover"}})}),jsxRuntimeExports.jsx(Image$1,{...canvasStyles.background.image,src:at,alt:"background"})]}),_e]})});Background.displayName="Background";const useWSStatus=()=>{const{wsState:_e,reconnect:_}=useWebSocket(),et=reactExports.useCallback(()=>{_e!=="OPEN"&&_e!=="CONNECTING"&&_()},[_e,_]);return reactExports.useMemo(()=>{switch(_e){case"OPEN":return{color:"green.500",text:"Connected",isDisconnected:!1,handleClick:et};case"CONNECTING":return{color:"yellow.500",text:"Connecting",isDisconnected:!1,handleClick:et};default:return{color:"red.500",text:"Click to Reconnect",isDisconnected:!0,handleClick:et}}},[_e,et])},StatusContent=({text:_e})=>_e,MemoizedStatusContent=reactExports.memo(StatusContent),WebSocketStatus=reactExports.memo(()=>{const{color:_e,text:_,handleClick:et,isDisconnected:tt}=useWSStatus();return jsxRuntimeExports.jsx(Box,{...canvasStyles.wsStatus.container,backgroundColor:_e,onClick:et,cursor:tt?"pointer":"default",_hover:{opacity:tt?.8:1},children:jsxRuntimeExports.jsx(MemoizedStatusContent,{text:_==="Connected"?"Streaming":_})})});WebSocketStatus.displayName="WebSocketStatus";const DEFAULT_CONFIG$1={confName:"",confUid:"",configFiles:[]},ConfigContext=reactExports.createContext(null);function CharacterConfigProvider({children:_e}){const[_,et]=reactExports.useState(DEFAULT_CONFIG$1.confName),[tt,rt]=reactExports.useState(DEFAULT_CONFIG$1.confUid),[it,st]=reactExports.useState(DEFAULT_CONFIG$1.configFiles),at=reactExports.useCallback(ut=>{var dt;return(dt=it.find(ot=>ot.name===ut))==null?void 0:dt.filename},[it]),ct=reactExports.useMemo(()=>({confName:_,confUid:tt,configFiles:it,setConfName:et,setConfUid:rt,setConfigFiles:st,getFilenameByName:at}),[_,tt,it,at]);return reactExports.useEffect(()=>{var ut,dt;(dt=(ut=window.api)==null?void 0:ut.updateConfigFiles)==null||dt.call(ut,it)},[it]),jsxRuntimeExports.jsx(ConfigContext.Provider,{value:ct,children:_e})}function useConfig(){const _e=reactExports.useContext(ConfigContext);if(!_e)throw new Error("useConfig must be used within a CharacterConfigProvider");return _e}const DEFAULT_CONFIG={modelInfo:{scrollToResize:!0},isLoading:!1},Live2DConfigContext=reactExports.createContext(null);function Live2DConfigProvider({children:_e}){const{confUid:_}=useConfig(),[et,tt]=reactExports.useState(!1),[rt,it]=reactExports.useState(DEFAULT_CONFIG.isLoading);reactExports.useEffect(()=>{var ft;const ht=(ft=window.api)==null?void 0:ft.onModeChanged(gt=>{tt(gt==="pet")});return()=>ht==null?void 0:ht()},[]);const st=(ht,ft)=>`${ht}_${ft?"pet":"window"}`,[at,ct]=useLocalStorage("modelInfo",DEFAULT_CONFIG.modelInfo,{filter:ht=>ht&&{...ht,url:""}}),[ut,dt]=useLocalStorage("scale_memory",{}),ot=ht=>{if(ht!=null&&ht.url){if(!_){console.warn("Attempting to set model info without confUid");return}if(JSON.stringify(ht)!==JSON.stringify(at))if(ht){const ft=st(_,et);let gt;const mt=ut[ft];mt!==void 0?gt=mt:(gt=Number(ht.kScale||.001),dt(yt=>({...yt,[ft]:gt}))),console.log("finalScale",gt),ct({...ht,kScale:gt,pointerInteractive:"pointerInteractive"in ht?ht.pointerInteractive:(at==null?void 0:at.pointerInteractive)??!1,scrollToResize:"scrollToResize"in ht?ht.scrollToResize:(at==null?void 0:at.scrollToResize)??!0})}else ct(void 0)}},nt=reactExports.useCallback(ht=>{if(at){const ft=st(_,et),gt=Number(ht.toFixed(8));dt(mt=>({...mt,[ft]:gt})),ct({...at,kScale:gt})}},[at,_,et,dt,ct]);reactExports.useEffect(()=>{if(at){const ht=st(_,et),ft=ut[ht];ft!==void 0&&ft!==Number(at.kScale)&&ot({...at,kScale:ft})}},[et,at]);const lt=reactExports.useMemo(()=>({modelInfo:at,setModelInfo:ot,isLoading:rt,setIsLoading:it,updateModelScale:nt}),[at,rt,nt]);return jsxRuntimeExports.jsx(Live2DConfigContext.Provider,{value:lt,children:_e})}function useLive2DConfig(){const _e=reactExports.useContext(Live2DConfigContext);if(!_e)throw new Error("useLive2DConfig must be used within a Live2DConfigProvider");return _e}var dist={},ortWeb_min={exports:{}};const backends={},backendsSortedByPriority=[],registerBackend=(_e,_,et)=>{if(_&&typeof _.init=="function"&&typeof _.createSessionHandler=="function"){const tt=backends[_e];if(tt===void 0)backends[_e]={backend:_,priority:et};else{if(tt.priority>et)return;if(tt.priority===et&&tt.backend!==_)throw new Error(`cannot register backend "${_e}" using priority ${et}`)}if(et>=0){const rt=backendsSortedByPriority.indexOf(_e);rt!==-1&&backendsSortedByPriority.splice(rt,1);for(let it=0;it<backendsSortedByPriority.length;it++)if(backends[backendsSortedByPriority[it]].priority<=et){backendsSortedByPriority.splice(it,0,_e);return}backendsSortedByPriority.push(_e)}return}throw new TypeError("not a valid backend")},resolveBackend=async _e=>{const _=_e.length===0?backendsSortedByPriority:_e,et=[];for(const tt of _){const rt=backends[tt];if(rt){if(rt.initialized)return rt.backend;if(rt.aborted)continue;const it=!!rt.initPromise;try{return it||(rt.initPromise=rt.backend.init()),await rt.initPromise,rt.initialized=!0,rt.backend}catch(st){it||et.push({name:tt,err:st}),rt.aborted=!0}finally{delete rt.initPromise}}}throw new Error(`no available backend found. ERR: ${et.map(tt=>`[${tt.name}] ${tt.err}`).join(", ")}`)};class EnvImpl{constructor(){this.wasm={},this.webgl={},this.logLevelInternal="warning"}set logLevel(_){if(_!==void 0){if(typeof _!="string"||["verbose","info","warning","error","fatal"].indexOf(_)===-1)throw new Error(`Unsupported logging level: ${_}`);this.logLevelInternal=_}}get logLevel(){return this.logLevelInternal}}const env=new EnvImpl,isBigInt64ArrayAvailable=typeof BigInt64Array<"u"&&typeof BigInt64Array.from=="function",isBigUint64ArrayAvailable=typeof BigUint64Array<"u"&&typeof BigUint64Array.from=="function",NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]);isBigInt64ArrayAvailable&&(NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.set("int64",BigInt64Array),NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP.set(BigInt64Array,"int64"));isBigUint64ArrayAvailable&&(NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.set("uint64",BigUint64Array),NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP.set(BigUint64Array,"uint64"));const calculateSize=_e=>{let _=1;for(let et=0;et<_e.length;et++){const tt=_e[et];if(typeof tt!="number"||!Number.isSafeInteger(tt))throw new TypeError(`dims[${et}] must be an integer, got: ${tt}`);if(tt<0)throw new RangeError(`dims[${et}] must be a non-negative integer, got: ${tt}`);_*=tt}return _};let Tensor$1=class pn{constructor(_,et,tt){let rt,it,st;if(typeof _=="string")if(rt=_,st=tt,_==="string"){if(!Array.isArray(et))throw new TypeError("A string tensor's data must be a string array.");it=et}else{const ct=NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.get(_);if(ct===void 0)throw new TypeError(`Unsupported tensor type: ${_}.`);if(Array.isArray(et))it=ct.from(et);else if(et instanceof ct)it=et;else throw new TypeError(`A ${rt} tensor's data must be type of ${ct}`)}else if(st=et,Array.isArray(_)){if(_.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");const ct=typeof _[0];if(ct==="string")rt="string",it=_;else if(ct==="boolean")rt="bool",it=Uint8Array.from(_);else throw new TypeError(`Invalid element type of data array: ${ct}.`)}else{const ct=NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP.get(_.constructor);if(ct===void 0)throw new TypeError(`Unsupported type for tensor data: ${_.constructor}.`);rt=ct,it=_}if(st===void 0)st=[it.length];else if(!Array.isArray(st))throw new TypeError("A tensor's dims must be a number array");const at=calculateSize(st);if(at!==it.length)throw new Error(`Tensor's size(${at}) does not match data length(${it.length}).`);this.dims=st,this.type=rt,this.data=it,this.size=at}static bufferToTensor(_,et){if(_===void 0)throw new Error("Image buffer must be defined");if(et.height===void 0||et.width===void 0)throw new Error("Image height and width must be defined");const{height:tt,width:rt}=et,it=et.norm;let st,at;it===void 0||it.mean===void 0?st=255:st=it.mean,it===void 0||it.bias===void 0?at=0:at=it.bias;const ct=et.bitmapFormat!==void 0?et.bitmapFormat:"RGBA",ut=et.tensorFormat!==void 0&&et.tensorFormat!==void 0?et.tensorFormat:"RGB",dt=tt*rt,ot=ut==="RGBA"?new Float32Array(dt*4):new Float32Array(dt*3);let nt=4,lt=0,ht=1,ft=2,gt=3,mt=0,yt=dt,bt=dt*2,_t=-1;ct==="RGB"&&(nt=3,lt=0,ht=1,ft=2,gt=-1),ut==="RGBA"?_t=dt*3:ut==="RBG"?(mt=0,bt=dt,yt=dt*2):ut==="BGR"&&(bt=0,yt=dt,mt=dt*2);for(let xt=0;xt<dt;xt++,lt+=nt,ft+=nt,ht+=nt,gt+=nt)ot[mt++]=(_[lt]+at)/st,ot[yt++]=(_[ht]+at)/st,ot[bt++]=(_[ft]+at)/st,_t!==-1&&gt!==-1&&(ot[_t++]=(_[gt]+at)/st);return ut==="RGBA"?new pn("float32",ot,[1,4,tt,rt]):new pn("float32",ot,[1,3,tt,rt])}static async fromImage(_,et){const tt=typeof HTMLImageElement<"u"&&_ instanceof HTMLImageElement,rt=typeof ImageData<"u"&&_ instanceof ImageData,it=typeof ImageBitmap<"u"&&_ instanceof ImageBitmap,st=typeof String<"u"&&(_ instanceof String||typeof _=="string");let at,ct={};if(tt){const ut=document.createElement("canvas"),dt=ut.getContext("2d");if(dt!=null){let ot=_.naturalHeight,nt=_.naturalWidth;if(et!==void 0&&et.resizedHeight!==void 0&&et.resizedWidth!==void 0&&(ot=et.resizedHeight,nt=et.resizedWidth),et!==void 0){if(ct=et,et.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");if(ct.tensorFormat="RGBA",et.height!==void 0&&et.height!==ot)throw new Error("Image input config height doesn't match HTMLImageElement height");if(ct.height=ot,et.width!==void 0&&et.width!==nt)throw new Error("Image input config width doesn't match HTMLImageElement width");ct.width=nt}else ct.tensorFormat="RGBA",ct.height=ot,ct.width=nt;ut.width=nt,ut.height=ot,dt.drawImage(_,0,0,nt,ot),at=dt.getImageData(0,0,nt,ot).data}else throw new Error("Can not access image data")}else if(rt){const ut="RGBA";let dt,ot;if(et!==void 0&&et.resizedWidth!==void 0&&et.resizedHeight!==void 0?(dt=et.resizedHeight,ot=et.resizedWidth):(dt=_.height,ot=_.width),et!==void 0){if(ct=et,et.bitmapFormat!==void 0&&et.bitmapFormat!==ut)throw new Error("Image input config format must be RGBA for ImageData");ct.bitmapFormat="RGBA"}else ct.bitmapFormat="RGBA";if(ct.height=dt,ct.width=ot,et!==void 0){const nt=document.createElement("canvas");nt.width=ot,nt.height=dt;const lt=nt.getContext("2d");if(lt!=null)lt.putImageData(_,0,0),at=lt.getImageData(0,0,ot,dt).data;else throw new Error("Can not access image data")}else at=_.data}else if(it){if(et===void 0)throw new Error("Please provide image config with format for Imagebitmap");if(et.bitmapFormat!==void 0)throw new Error("Image input config format must be defined for ImageBitmap");const ut=document.createElement("canvas").getContext("2d");if(ut!=null){const dt=_.height,ot=_.width;if(ut.drawImage(_,0,0,ot,dt),at=ut.getImageData(0,0,ot,dt).data,et!==void 0){if(et.height!==void 0&&et.height!==dt)throw new Error("Image input config height doesn't match ImageBitmap height");if(ct.height=dt,et.width!==void 0&&et.width!==ot)throw new Error("Image input config width doesn't match ImageBitmap width");ct.width=ot}else ct.height=dt,ct.width=ot;return pn.bufferToTensor(at,ct)}else throw new Error("Can not access image data")}else{if(st)return new Promise((ut,dt)=>{const ot=document.createElement("canvas"),nt=ot.getContext("2d");if(!_||!nt)return dt();const lt=new Image;lt.crossOrigin="Anonymous",lt.src=_,lt.onload=()=>{ot.width=lt.width,ot.height=lt.height,nt.drawImage(lt,0,0,ot.width,ot.height);const ht=nt.getImageData(0,0,ot.width,ot.height);if(et!==void 0){if(et.height!==void 0&&et.height!==ot.height)throw new Error("Image input config height doesn't match ImageBitmap height");if(ct.height=ot.height,et.width!==void 0&&et.width!==ot.width)throw new Error("Image input config width doesn't match ImageBitmap width");ct.width=ot.width}else ct.height=ot.height,ct.width=ot.width;ut(pn.bufferToTensor(ht.data,ct))}});throw new Error("Input data provided is not supported - aborted tensor creation")}if(at!==void 0)return pn.bufferToTensor(at,ct);throw new Error("Input data provided is not supported - aborted tensor creation")}toImageData(_){var et,tt;const rt=document.createElement("canvas").getContext("2d");let it;if(rt!=null){const st=this.dims[3],at=this.dims[2],ct=this.dims[1],ut=_!==void 0&&_.format!==void 0?_.format:"RGB",dt=_!==void 0&&((et=_.norm)===null||et===void 0?void 0:et.mean)!==void 0?_.norm.mean:255,ot=_!==void 0&&((tt=_.norm)===null||tt===void 0?void 0:tt.bias)!==void 0?_.norm.bias:0,nt=at*st;if(_!==void 0){if(_.height!==void 0&&_.height!==at)throw new Error("Image output config height doesn't match tensor height");if(_.width!==void 0&&_.width!==st)throw new Error("Image output config width doesn't match tensor width");if(_.format!==void 0&&ct===4&&_.format!=="RGBA"||ct===3&&_.format!=="RGB"&&_.format!=="BGR")throw new Error("Tensor format doesn't match input tensor dims")}const lt=4;let ht=0,ft=1,gt=2,mt=3,yt=0,bt=nt,_t=nt*2,vt=-1;ut==="RGBA"?(yt=0,bt=nt,_t=nt*2,vt=nt*3):ut==="RGB"?(yt=0,bt=nt,_t=nt*2):ut==="RBG"&&(yt=0,_t=nt,bt=nt*2),it=rt.createImageData(st,at);for(let xt=0;xt<at*st;ht+=lt,ft+=lt,gt+=lt,mt+=lt,xt++)it.data[ht]=(this.data[yt++]-ot)*dt,it.data[ft]=(this.data[bt++]-ot)*dt,it.data[gt]=(this.data[_t++]-ot)*dt,it.data[mt]=vt===-1?255:(this.data[vt++]-ot)*dt}else throw new Error("Can not access image data");return it}reshape(_){return new pn(this.type,this.data,_)}};const Tensor=Tensor$1;let InferenceSession$1=class Jo{constructor(_){this.handler=_}async run(_,et,tt){const rt={};let it={};if(typeof _!="object"||_===null||_ instanceof Tensor||Array.isArray(_))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let st=!0;if(typeof et=="object"){if(et===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(et instanceof Tensor)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(et)){if(et.length===0)throw new TypeError("'fetches' cannot be an empty array.");st=!1;for(const ut of et){if(typeof ut!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(ut)===-1)throw new RangeError(`'fetches' contains invalid output name: ${ut}.`);rt[ut]=null}if(typeof tt=="object"&&tt!==null)it=tt;else if(typeof tt<"u")throw new TypeError("'options' must be an object.")}else{let ut=!1;const dt=Object.getOwnPropertyNames(et);for(const ot of this.outputNames)if(dt.indexOf(ot)!==-1){const nt=et[ot];(nt===null||nt instanceof Tensor)&&(ut=!0,st=!1,rt[ot]=nt)}if(ut){if(typeof tt=="object"&&tt!==null)it=tt;else if(typeof tt<"u")throw new TypeError("'options' must be an object.")}else it=et}}else if(typeof et<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(const ut of this.inputNames)if(typeof _[ut]>"u")throw new Error(`input '${ut}' is missing in 'feeds'.`);if(st)for(const ut of this.outputNames)rt[ut]=null;const at=await this.handler.run(_,rt,it),ct={};for(const ut in at)Object.hasOwnProperty.call(at,ut)&&(ct[ut]=new Tensor(at[ut].type,at[ut].data,at[ut].dims));return ct}static async create(_,et,tt,rt){let it,st={};if(typeof _=="string"){if(it=_,typeof et=="object"&&et!==null)st=et;else if(typeof et<"u")throw new TypeError("'options' must be an object.")}else if(_ instanceof Uint8Array){if(it=_,typeof et=="object"&&et!==null)st=et;else if(typeof et<"u")throw new TypeError("'options' must be an object.")}else if(_ instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&_ instanceof SharedArrayBuffer){const ot=_;let nt=0,lt=_.byteLength;if(typeof et=="object"&&et!==null)st=et;else if(typeof et=="number"){if(nt=et,!Number.isSafeInteger(nt))throw new RangeError("'byteOffset' must be an integer.");if(nt<0||nt>=ot.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${ot.byteLength}).`);if(lt=_.byteLength-nt,typeof tt=="number"){if(lt=tt,!Number.isSafeInteger(lt))throw new RangeError("'byteLength' must be an integer.");if(lt<=0||nt+lt>ot.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${ot.byteLength-nt}].`);if(typeof rt=="object"&&rt!==null)st=rt;else if(typeof rt<"u")throw new TypeError("'options' must be an object.")}else if(typeof tt<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof et<"u")throw new TypeError("'options' must be an object.");it=new Uint8Array(ot,nt,lt)}else throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");const ct=(st.executionProviders||[]).map(ot=>typeof ot=="string"?ot:ot.name),dt=await(await resolveBackend(ct)).createSessionHandler(it,st);return new Jo(dt)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}};const InferenceSession=InferenceSession$1,lib$1=Object.freeze(Object.defineProperty({__proto__:null,InferenceSession,Tensor,env,registerBackend},Symbol.toStringTag,{value:"Module"})),require$$0$1=getAugmentedNamespace(lib$1);/*!
* ONNX Runtime Web v1.14.0
* Copyright (c) Microsoft Corporation. All rights reserved.
* Licensed under the MIT License.
*/(function(module,exports){(function(_e,_){module.exports=_(require$$0$1)})(self,__WEBPACK_EXTERNAL_MODULE__1670__=>(()=>{var __webpack_modules__={3474:(_e,_,et)=>{var tt,rt=(tt=(tt=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(it){function st(){return zt.buffer!=Vt&&ur(zt.buffer),Ht}function at(){return zt.buffer!=Vt&&ur(zt.buffer),sr}function ct(){return zt.buffer!=Vt&&ur(zt.buffer),ir}function ut(){return zt.buffer!=Vt&&ur(zt.buffer),er}function dt(){return zt.buffer!=Vt&&ur(zt.buffer),dr}var ot,nt,lt;it=it||{},ot||(ot=it!==void 0?it:{}),ot.ready=new Promise(function(At,Ct){nt=At,lt=Ct});var ht,ft,gt,mt,yt,bt,_t=Object.assign({},ot),vt="./this.program",xt=(At,Ct)=>{throw Ct},wt=typeof window=="object",Tt=typeof importScripts=="function",St=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",Et=ot.ENVIRONMENT_IS_PTHREAD||!1,Ot="";function Rt(At){return ot.locateFile?ot.locateFile(At,Ot):Ot+At}if(St){let At;Ot=Tt?et(908).dirname(Ot)+"/":"//",bt=()=>{yt||(mt=et(1384),yt=et(908))},ht=function(Ct,Dt){return bt(),Ct=yt.normalize(Ct),mt.readFileSync(Ct,Dt?void 0:"utf8")},gt=Ct=>((Ct=ht(Ct,!0)).buffer||(Ct=new Uint8Array(Ct)),Ct),ft=(Ct,Dt,Bt)=>{bt(),Ct=yt.normalize(Ct),mt.readFile(Ct,function(Wt,Yt){Wt?Bt(Wt):Dt(Yt.buffer)})},1<process.argv.length&&(vt=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",function(Ct){if(!(Ct instanceof sn))throw Ct}),process.on("unhandledRejection",function(Ct){throw Ct}),xt=(Ct,Dt)=>{if(Wr())throw process.exitCode=Ct,Dt;Dt instanceof sn||Lt("exiting due to exception: "+Dt),process.exit(Ct)},ot.inspect=function(){return"[Emscripten Module object]"};try{At=et(9925)}catch(Ct){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),Ct}et.g.Worker=At.Worker}else(wt||Tt)&&(Tt?Ot=self.location.href:typeof document<"u"&&document.currentScript&&(Ot=document.currentScript.src),tt&&(Ot=tt),Ot=Ot.indexOf("blob:")!==0?Ot.substr(0,Ot.replace(/[?#].*/,"").lastIndexOf("/")+1):"",St||(ht=At=>{var Ct=new XMLHttpRequest;return Ct.open("GET",At,!1),Ct.send(null),Ct.responseText},Tt&&(gt=At=>{var Ct=new XMLHttpRequest;return Ct.open("GET",At,!1),Ct.responseType="arraybuffer",Ct.send(null),new Uint8Array(Ct.response)}),ft=(At,Ct,Dt)=>{var Bt=new XMLHttpRequest;Bt.open("GET",At,!0),Bt.responseType="arraybuffer",Bt.onload=()=>{Bt.status==200||Bt.status==0&&Bt.response?Ct(Bt.response):Dt()},Bt.onerror=Dt,Bt.send(null)}));St&&typeof performance>"u"&&(et.g.performance=et(6953).performance);var Pt=console.log.bind(console),Mt=console.warn.bind(console);St&&(bt(),Pt=At=>mt.writeSync(1,At+`
`),Mt=At=>mt.writeSync(2,At+`
`));var $t,kt=ot.print||Pt,Lt=ot.printErr||Mt;Object.assign(ot,_t),_t=null,ot.thisProgram&&(vt=ot.thisProgram),ot.quit&&(xt=ot.quit),ot.wasmBinary&&($t=ot.wasmBinary);var Nt=ot.noExitRuntime||!1;typeof WebAssembly!="object"&&Ar("no native wasm support detected");var zt,Ut,Vt,Ht,sr,ir,er,dr,gr=!1,Qt=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function Jt(At,Ct,Dt){var Bt=(Ct>>>=0)+Dt;for(Dt=Ct;At[Dt]&&!(Dt>=Bt);)++Dt;if(16<Dt-Ct&&At.buffer&&Qt)return Qt.decode(At.buffer instanceof SharedArrayBuffer?At.slice(Ct,Dt):At.subarray(Ct,Dt));for(Bt="";Ct<Dt;){var Wt=At[Ct++];if(128&Wt){var Yt=63&At[Ct++];if((224&Wt)==192)Bt+=String.fromCharCode((31&Wt)<<6|Yt);else{var rr=63&At[Ct++];65536>(Wt=(240&Wt)==224?(15&Wt)<<12|Yt<<6|rr:(7&Wt)<<18|Yt<<12|rr<<6|63&At[Ct++])?Bt+=String.fromCharCode(Wt):(Wt-=65536,Bt+=String.fromCharCode(55296|Wt>>10,56320|1023&Wt))}}else Bt+=String.fromCharCode(Wt)}return Bt}function nr(At,Ct){return(At>>>=0)?Jt(at(),At,Ct):""}function lr(At,Ct,Dt,Bt){if(!(0<Bt))return 0;var Wt=Dt>>>=0;Bt=Dt+Bt-1;for(var Yt=0;Yt<At.length;++Yt){var rr=At.charCodeAt(Yt);if(55296<=rr&&57343>=rr&&(rr=65536+((1023&rr)<<10)|1023&At.charCodeAt(++Yt)),127>=rr){if(Dt>=Bt)break;Ct[Dt++>>>0]=rr}else{if(2047>=rr){if(Dt+1>=Bt)break;Ct[Dt++>>>0]=192|rr>>6}else{if(65535>=rr){if(Dt+2>=Bt)break;Ct[Dt++>>>0]=224|rr>>12}else{if(Dt+3>=Bt)break;Ct[Dt++>>>0]=240|rr>>18,Ct[Dt++>>>0]=128|rr>>12&63}Ct[Dt++>>>0]=128|rr>>6&63}Ct[Dt++>>>0]=128|63&rr}}return Ct[Dt>>>0]=0,Dt-Wt}function hr(At){for(var Ct=0,Dt=0;Dt<At.length;++Dt){var Bt=At.charCodeAt(Dt);127>=Bt?Ct++:2047>=Bt?Ct+=2:55296<=Bt&&57343>=Bt?(Ct+=4,++Dt):Ct+=3}return Ct}function ur(At){Vt=At,ot.HEAP8=Ht=new Int8Array(At),ot.HEAP16=new Int16Array(At),ot.HEAP32=ir=new Int32Array(At),ot.HEAPU8=sr=new Uint8Array(At),ot.HEAPU16=new Uint16Array(At),ot.HEAPU32=er=new Uint32Array(At),ot.HEAPF32=new Float32Array(At),ot.HEAPF64=dr=new Float64Array(At)}Et&&(Vt=ot.buffer);var mr=ot.INITIAL_MEMORY||16777216;if(Et)zt=ot.wasmMemory,Vt=ot.buffer;else if(ot.wasmMemory)zt=ot.wasmMemory;else if(!((zt=new WebAssembly.Memory({initial:mr/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw Lt("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),St&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");zt&&(Vt=zt.buffer),mr=Vt.byteLength,ur(Vt);var Mr,Fr=[],Gr=[],Nr=[],Jr=[];function Wr(){return Nt||!1}function Hr(){var At=ot.preRun.shift();Fr.unshift(At)}var kr,jr=0,Xr=null;function Ar(At){throw Et?postMessage({cmd:"onAbort",arg:At}):ot.onAbort&&ot.onAbort(At),Lt(At="Aborted("+At+")"),gr=!0,At=new WebAssembly.RuntimeError(At+". Build with -sASSERTIONS for more info."),lt(At),At}function An(){return kr.startsWith("data:application/octet-stream;base64,")}function mn(){var At=kr;try{if(At==kr&&$t)return new Uint8Array($t);if(gt)return gt(At);throw"both async and sync fetching of the wasm failed"}catch(Ct){Ar(Ct)}}kr="ort-wasm-threaded.wasm",An()||(kr=Rt(kr));var Hn={};function sn(At){this.name="ExitStatus",this.message="Program terminated with exit("+At+")",this.status=At}function yn(At){(At=yr.Vb[At])||Ar(),yr.mc(At)}function bn(At){var Ct=yr.Cc();if(!Ct)return 6;yr.ac.push(Ct),yr.Vb[At.Ub]=Ct,Ct.Ub=At.Ub;var Dt={cmd:"run",start_routine:At.Ic,arg:At.zc,pthread_ptr:At.Ub};return Ct.$b=()=>{Dt.time=performance.now(),Ct.postMessage(Dt,At.Nc)},Ct.loaded&&(Ct.$b(),delete Ct.$b),0}function zr(At){if(Et)return ar(1,1,At);Wr()||(yr.oc(),ot.onExit&&ot.onExit(At),gr=!0),xt(At,new sn(At))}function cn(At,Ct){if(!Ct&&Et)throw Yn(At),"unwind";Wr()||Et||(Es(),un(Nr),Ts(0),ss[1].length&&os(1,10),ss[2].length&&os(2,10),yr.oc()),zr(At)}var yr={Yb:[],ac:[],qc:[],Vb:{},fc:function(){Et&&yr.Ec()},Pc:function(){},Ec:function(){yr.receiveObjectTransfer=yr.Gc,yr.threadInitTLS=yr.pc,yr.setExitStatus=yr.nc,Nt=!1},nc:function(){},oc:function(){for(var At of Object.values(yr.Vb))yr.mc(At);for(At of yr.Yb)At.terminate();yr.Yb=[]},mc:function(At){var Ct=At.Ub;delete yr.Vb[Ct],yr.Yb.push(At),yr.ac.splice(yr.ac.indexOf(At),1),At.Ub=0,ls(Ct)},Gc:function(){},pc:function(){yr.qc.forEach(At=>At())},Fc:function(At,Ct){At.onmessage=Dt=>{var Bt=(Dt=Dt.data).cmd;if(At.Ub&&(yr.Bc=At.Ub),Dt.targetThread&&Dt.targetThread!=Kn()){var Wt=yr.Vb[Dt.Qc];Wt?Wt.postMessage(Dt,Dt.transferList):Lt('Internal error! Worker sent a message "'+Bt+'" to target pthread '+Dt.targetThread+", but that thread no longer exists!")}else Bt==="processProxyingQueue"?jt(Dt.queue):Bt==="spawnThread"?bn(Dt):Bt==="cleanupThread"?yn(Dt.thread):Bt==="killThread"?(Dt=Dt.thread,Bt=yr.Vb[Dt],delete yr.Vb[Dt],Bt.terminate(),ls(Dt),yr.ac.splice(yr.ac.indexOf(Bt),1),Bt.Ub=0):Bt==="cancelThread"?yr.Vb[Dt.thread].postMessage({cmd:"cancel"}):Bt==="loaded"?(At.loaded=!0,Ct&&Ct(At),At.$b&&(At.$b(),delete At.$b)):Bt==="print"?kt("Thread "+Dt.threadId+": "+Dt.text):Bt==="printErr"?Lt("Thread "+Dt.threadId+": "+Dt.text):Bt==="alert"?alert("Thread "+Dt.threadId+": "+Dt.text):Dt.target==="setimmediate"?At.postMessage(Dt):Bt==="onAbort"?ot.onAbort&&ot.onAbort(Dt.arg):Bt&&Lt("worker sent an unknown command "+Bt);yr.Bc=void 0},At.onerror=Dt=>{throw Lt("worker sent an error! "+Dt.filename+":"+Dt.lineno+": "+Dt.message),Dt},St&&(At.on("message",function(Dt){At.onmessage({data:Dt})}),At.on("error",function(Dt){At.onerror(Dt)}),At.on("detachedExit",function(){})),At.postMessage({cmd:"load",urlOrBlob:ot.mainScriptUrlOrBlob||tt,wasmMemory:zt,wasmModule:Ut})},yc:function(){var At=Rt("ort-wasm-threaded.worker.js");yr.Yb.push(new Worker(At))},Cc:function(){return yr.Yb.length==0&&(yr.yc(),yr.Fc(yr.Yb[0])),yr.Yb.pop()}};function un(At){for(;0<At.length;)At.shift()(ot)}function Xn(At){var Ct=wr();return At=At(),Sr(Ct),At}function Yn(At){if(Et)return ar(2,0,At);try{cn(At)}catch(Ct){Ct instanceof sn||Ct=="unwind"||xt(1,Ct)}}ot.PThread=yr,ot.establishStackSpace=function(){var At=Kn(),Ct=ct()[At+44>>2>>>0];At=ct()[At+48>>2>>>0],Rs(Ct,Ct-At),Sr(Ct)};var on=[];function Rr(At){var Ct=on[At];return Ct||(At>=on.length&&(on.length=At+1),on[At]=Ct=Mr.get(At)),Ct}ot.invokeEntryPoint=function(At,Ct){At=Rr(At)(Ct),Wr()?yr.nc(At):Is(At)};var dn,Cn,hn=[],vr=0,br=0;function _r(At){this.Zb=At,this.Sb=At-24,this.xc=function(Ct){ut()[this.Sb+4>>2>>>0]=Ct},this.bc=function(){return ut()[this.Sb+4>>2>>>0]},this.wc=function(Ct){ut()[this.Sb+8>>2>>>0]=Ct},this.Dc=function(){return ut()[this.Sb+8>>2>>>0]},this.rc=function(){ct()[this.Sb>>2>>>0]=0},this.hc=function(Ct){Ct=Ct?1:0,st()[this.Sb+12>>0>>>0]=Ct},this.uc=function(){return st()[this.Sb+12>>0>>>0]!=0},this.ic=function(Ct){Ct=Ct?1:0,st()[this.Sb+13>>0>>>0]=Ct},this.kc=function(){return st()[this.Sb+13>>0>>>0]!=0},this.fc=function(Ct,Dt){this.cc(0),this.xc(Ct),this.wc(Dt),this.rc(),this.hc(!1),this.ic(!1)},this.sc=function(){Atomics.add(ct(),this.Sb>>2,1)},this.Hc=function(){return Atomics.sub(ct(),this.Sb>>2,1)===1},this.cc=function(Ct){ut()[this.Sb+16>>2>>>0]=Ct},this.tc=function(){return ut()[this.Sb+16>>2>>>0]},this.vc=function(){if(Ms(this.bc()))return ut()[this.Zb>>2>>>0];var Ct=this.tc();return Ct!==0?Ct:this.Zb}}function Pn(At){return ws(new _r(At).Sb)}function fn(At,Ct,Dt,Bt){return Et?ar(3,1,At,Ct,Dt,Bt):In(At,Ct,Dt,Bt)}function In(At,Ct,Dt,Bt){if(typeof SharedArrayBuffer>"u")return Lt("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var Wt=[];return Et&&Wt.length===0?fn(At,Ct,Dt,Bt):(At={Ic:Dt,Ub:At,zc:Bt,Nc:Wt},Et?(At.Oc="spawnThread",postMessage(At,Wt),0):bn(At))}function Rn(At,Ct,Dt){return Et?ar(4,1,At,Ct,Dt):0}function Mn(At,Ct){if(Et)return ar(5,1,At,Ct)}function On(At,Ct){if(Et)return ar(6,1,At,Ct)}function kn(At,Ct,Dt){if(Et)return ar(7,1,At,Ct,Dt)}function Dn(At,Ct,Dt){return Et?ar(8,1,At,Ct,Dt):0}function Fn(At,Ct){if(Et)return ar(9,1,At,Ct)}function Ln(At,Ct,Dt){if(Et)return ar(10,1,At,Ct,Dt)}function $n(At,Ct,Dt,Bt){if(Et)return ar(11,1,At,Ct,Dt,Bt)}function Bn(At,Ct,Dt,Bt){if(Et)return ar(12,1,At,Ct,Dt,Bt)}function Nn(At,Ct,Dt,Bt){if(Et)return ar(13,1,At,Ct,Dt,Bt)}function Un(At){if(Et)return ar(14,1,At)}function It(At,Ct){if(Et)return ar(15,1,At,Ct)}function Ft(At,Ct,Dt){if(Et)return ar(16,1,At,Ct,Dt)}function jt(At){Atomics.store(ct(),At>>2,1),Kn()&&Ps(At),Atomics.compareExchange(ct(),At>>2,1,0)}function Gt(At){return ut()[At>>>2]+4294967296*ct()[At+4>>>2]}function Xt(At,Ct,Dt,Bt,Wt,Yt){return Et?ar(17,1,At,Ct,Dt,Bt,Wt,Yt):-52}function Zt(At,Ct,Dt,Bt,Wt,Yt){if(Et)return ar(18,1,At,Ct,Dt,Bt,Wt,Yt)}function tr(At){var Ct=hr(At)+1,Dt=as(Ct);return Dt&&lr(At,st(),Dt,Ct),Dt}function fr(At,Ct,Dt){function Bt(Cr){return(Cr=Cr.toTimeString().match(/\(([A-Za-z ]+)\)$/))?Cr[1]:"GMT"}if(Et)return ar(19,1,At,Ct,Dt);var Wt=new Date().getFullYear(),Yt=new Date(Wt,0,1),rr=new Date(Wt,6,1);Wt=Yt.getTimezoneOffset();var pr=rr.getTimezoneOffset(),Er=Math.max(Wt,pr);ct()[At>>2>>>0]=60*Er,ct()[Ct>>2>>>0]=+(Wt!=pr),At=Bt(Yt),Ct=Bt(rr),At=tr(At),Ct=tr(Ct),pr<Wt?(ut()[Dt>>2>>>0]=At,ut()[Dt+4>>2>>>0]=Ct):(ut()[Dt>>2>>>0]=Ct,ut()[Dt+4>>2>>>0]=At)}function ar(At,Ct){var Dt=arguments.length-2,Bt=arguments;return Xn(()=>{for(var Wt=us(8*Dt),Yt=Wt>>3,rr=0;rr<Dt;rr++){var pr=Bt[2+rr];dt()[Yt+rr>>>0]=pr}return Cs(At,Dt,Wt,Ct)})}ot.executeNotifiedProxyingQueue=jt,Cn=St?()=>{var At=process.hrtime();return 1e3*At[0]+At[1]/1e6}:Et?()=>performance.now()-ot.__performance_now_clock_drift:()=>performance.now();var xr,Or=[],Ur={};function Br(){if(!xr){var At,Ct={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:vt||"./this.program"};for(At in Ur)Ur[At]===void 0?delete Ct[At]:Ct[At]=Ur[At];var Dt=[];for(At in Ct)Dt.push(At+"="+Ct[At]);xr=Dt}return xr}function qt(At,Ct){if(Et)return ar(20,1,At,Ct);var Dt=0;return Br().forEach(function(Bt,Wt){var Yt=Ct+Dt;for(Wt=ut()[At+4*Wt>>2>>>0]=Yt,Yt=0;Yt<Bt.length;++Yt)st()[Wt++>>0>>>0]=Bt.charCodeAt(Yt);st()[Wt>>0>>>0]=0,Dt+=Bt.length+1}),0}function Pr(At,Ct){if(Et)return ar(21,1,At,Ct);var Dt=Br();ut()[At>>2>>>0]=Dt.length;var Bt=0;return Dt.forEach(function(Wt){Bt+=Wt.length+1}),ut()[Ct>>2>>>0]=Bt,0}function Dr(At){return Et?ar(22,1,At):52}function Zr(At,Ct,Dt,Bt){return Et?ar(23,1,At,Ct,Dt,Bt):52}function an(At,Ct,Dt,Bt,Wt){return Et?ar(24,1,At,Ct,Dt,Bt,Wt):70}var ss=[null,[],[]];function os(At,Ct){var Dt=ss[At];Ct===0||Ct===10?((At===1?kt:Lt)(Jt(Dt,0)),Dt.length=0):Dt.push(Ct)}function _s(At,Ct,Dt,Bt){if(Et)return ar(25,1,At,Ct,Dt,Bt);for(var Wt=0,Yt=0;Yt<Dt;Yt++){var rr=ut()[Ct>>2>>>0],pr=ut()[Ct+4>>2>>>0];Ct+=8;for(var Er=0;Er<pr;Er++)os(At,at()[rr+Er>>>0]);Wt+=pr}return ut()[Bt>>2>>>0]=Wt,0}var Yr=0;function qn(At){return At%4==0&&(At%100!=0||At%400==0)}var vs=[31,29,31,30,31,30,31,31,30,31,30,31],xs=[31,28,31,30,31,30,31,31,30,31,30,31];function Ss(At,Ct,Dt,Bt){function Wt(Kt,Ir,Lr){for(Kt=typeof Kt=="number"?Kt.toString():Kt||"";Kt.length<Ir;)Kt=Lr[0]+Kt;return Kt}function Yt(Kt,Ir){return Wt(Kt,Ir,"0")}function rr(Kt,Ir){function Lr(_n){return 0>_n?-1:0<_n?1:0}var ln;return(ln=Lr(Kt.getFullYear()-Ir.getFullYear()))===0&&(ln=Lr(Kt.getMonth()-Ir.getMonth()))===0&&(ln=Lr(Kt.getDate()-Ir.getDate())),ln}function pr(Kt){switch(Kt.getDay()){case 0:return new Date(Kt.getFullYear()-1,11,29);case 1:return Kt;case 2:return new Date(Kt.getFullYear(),0,3);case 3:return new Date(Kt.getFullYear(),0,2);case 4:return new Date(Kt.getFullYear(),0,1);case 5:return new Date(Kt.getFullYear()-1,11,31);case 6:return new Date(Kt.getFullYear()-1,11,30)}}function Er(Kt){var Ir=Kt.Wb;for(Kt=new Date(new Date(Kt.Xb+1900,0,1).getTime());0<Ir;){var Lr=Kt.getMonth(),ln=(qn(Kt.getFullYear())?vs:xs)[Lr];if(!(Ir>ln-Kt.getDate())){Kt.setDate(Kt.getDate()+Ir);break}Ir-=ln-Kt.getDate()+1,Kt.setDate(1),11>Lr?Kt.setMonth(Lr+1):(Kt.setMonth(0),Kt.setFullYear(Kt.getFullYear()+1))}return Lr=new Date(Kt.getFullYear()+1,0,4),Ir=pr(new Date(Kt.getFullYear(),0,4)),Lr=pr(Lr),0>=rr(Ir,Kt)?0>=rr(Lr,Kt)?Kt.getFullYear()+1:Kt.getFullYear():Kt.getFullYear()-1}var Cr=ct()[Bt+40>>2>>>0];for(var $r in Bt={Lc:ct()[Bt>>2>>>0],Kc:ct()[Bt+4>>2>>>0],dc:ct()[Bt+8>>2>>>0],jc:ct()[Bt+12>>2>>>0],ec:ct()[Bt+16>>2>>>0],Xb:ct()[Bt+20>>2>>>0],Tb:ct()[Bt+24>>2>>>0],Wb:ct()[Bt+28>>2>>>0],Rc:ct()[Bt+32>>2>>>0],Jc:ct()[Bt+36>>2>>>0],Mc:Cr?nr(Cr):""},Dt=nr(Dt),Cr={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})Dt=Dt.replace(new RegExp($r,"g"),Cr[$r]);var rn="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Qr="January February March April May June July August September October November December".split(" ");for($r in Cr={"%a":function(Kt){return rn[Kt.Tb].substring(0,3)},"%A":function(Kt){return rn[Kt.Tb]},"%b":function(Kt){return Qr[Kt.ec].substring(0,3)},"%B":function(Kt){return Qr[Kt.ec]},"%C":function(Kt){return Yt((Kt.Xb+1900)/100|0,2)},"%d":function(Kt){return Yt(Kt.jc,2)},"%e":function(Kt){return Wt(Kt.jc,2," ")},"%g":function(Kt){return Er(Kt).toString().substring(2)},"%G":function(Kt){return Er(Kt)},"%H":function(Kt){return Yt(Kt.dc,2)},"%I":function(Kt){return(Kt=Kt.dc)==0?Kt=12:12<Kt&&(Kt-=12),Yt(Kt,2)},"%j":function(Kt){for(var Ir=0,Lr=0;Lr<=Kt.ec-1;Ir+=(qn(Kt.Xb+1900)?vs:xs)[Lr++]);return Yt(Kt.jc+Ir,3)},"%m":function(Kt){return Yt(Kt.ec+1,2)},"%M":function(Kt){return Yt(Kt.Kc,2)},"%n":function(){return`
`},"%p":function(Kt){return 0<=Kt.dc&&12>Kt.dc?"AM":"PM"},"%S":function(Kt){return Yt(Kt.Lc,2)},"%t":function(){return"	"},"%u":function(Kt){return Kt.Tb||7},"%U":function(Kt){return Yt(Math.floor((Kt.Wb+7-Kt.Tb)/7),2)},"%V":function(Kt){var Ir=Math.floor((Kt.Wb+7-(Kt.Tb+6)%7)/7);if(2>=(Kt.Tb+371-Kt.Wb-2)%7&&Ir++,Ir)Ir==53&&((Lr=(Kt.Tb+371-Kt.Wb)%7)==4||Lr==3&&qn(Kt.Xb)||(Ir=1));else{Ir=52;var Lr=(Kt.Tb+7-Kt.Wb-1)%7;(Lr==4||Lr==5&&qn(Kt.Xb%400-1))&&Ir++}return Yt(Ir,2)},"%w":function(Kt){return Kt.Tb},"%W":function(Kt){return Yt(Math.floor((Kt.Wb+7-(Kt.Tb+6)%7)/7),2)},"%y":function(Kt){return(Kt.Xb+1900).toString().substring(2)},"%Y":function(Kt){return Kt.Xb+1900},"%z":function(Kt){var Ir=0<=(Kt=Kt.Jc);return Kt=Math.abs(Kt)/60,(Ir?"+":"-")+("0000"+(Kt/60*100+Kt%60)).slice(-4)},"%Z":function(Kt){return Kt.Mc},"%%":function(){return"%"}},Dt=Dt.replace(/%%/g,"\0\0"),Cr)Dt.includes($r)&&(Dt=Dt.replace(new RegExp($r,"g"),Cr[$r](Bt)));return $r=function(Kt){var Ir=Array(hr(Kt)+1);return lr(Kt,Ir,0,Ir.length),Ir}(Dt=Dt.replace(/\0\0/g,"%")),$r.length>Ct?0:(function(Kt,Ir){st().set(Kt,Ir>>>0)}($r,At),$r.length-1)}yr.fc();var $a=[null,zr,Yn,fn,Rn,Mn,On,kn,Dn,Fn,Ln,$n,Bn,Nn,Un,It,Ft,Xt,Zt,fr,qt,Pr,Dr,Zr,an,_s],yl={b:function(At){return as(At+24)+24},n:function(At){return(At=new _r(At)).uc()||(At.hc(!0),vr--),At.ic(!1),hn.push(At),At.sc(),At.vc()},ma:function(At){throw Lt("Unexpected exception thrown, this is not properly supported - aborting"),gr=!0,At},x:function(){Tr(0);var At=hn.pop();if(At.Hc()&&!At.kc()){var Ct=At.Dc();Ct&&Rr(Ct)(At.Zb),Pn(At.Zb)}br=0},e:function(){var At=br;if(!At)return Yr=0;var Ct=new _r(At);Ct.cc(At);var Dt=Ct.bc();if(!Dt)return Yr=0,At;for(var Bt=Array.prototype.slice.call(arguments),Wt=0;Wt<Bt.length;Wt++){var Yt=Bt[Wt];if(Yt===0||Yt===Dt)break;if(Qn(Yt,Dt,Ct.Sb+16))return Yr=Yt,At}return Yr=Dt,At},l:function(){var At=br;if(!At)return Yr=0;var Ct=new _r(At);Ct.cc(At);var Dt=Ct.bc();if(!Dt)return Yr=0,At;for(var Bt=Array.prototype.slice.call(arguments),Wt=0;Wt<Bt.length;Wt++){var Yt=Bt[Wt];if(Yt===0||Yt===Dt)break;if(Qn(Yt,Dt,Ct.Sb+16))return Yr=Yt,At}return Yr=Dt,At},h:function(){var At=br;if(!At)return Yr=0;var Ct=new _r(At);Ct.cc(At);var Dt=Ct.bc();if(!Dt)return Yr=0,At;for(var Bt=Array.prototype.slice.call(arguments),Wt=0;Wt<Bt.length;Wt++){var Yt=Bt[Wt];if(Yt===0||Yt===Dt)break;if(Qn(Yt,Dt,Ct.Sb+16))return Yr=Yt,At}return Yr=Dt,At},t:Pn,M:function(){var At=hn.pop();At||Ar("no exception to throw");var Ct=At.Zb;throw At.kc()||(hn.push(At),At.ic(!0),At.hc(!1),vr++),br=Ct,Ct},c:function(At,Ct,Dt){throw new _r(At).fc(Ct,Dt),br=At,vr++,At},pa:function(){return vr},Fa:function(At){As(At,!Tt,1,!wt),yr.pc()},T:function(At){Et?postMessage({cmd:"cleanupThread",thread:At}):yn(At)},xa:In,j:function(At){throw br||(br=At),At},H:Rn,Ma:Mn,ua:On,wa:kn,oa:Dn,Ka:Fn,Ca:Ln,Ja:$n,V:Bn,va:Nn,sa:Un,La:It,ta:Ft,Ta:function(){},X:function(){Ar("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ua:function(){Ar("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},W:function(){return Date.now()},ya:function(){return 2097152},Oa:function(){return!0},za:function(At,Ct,Dt,Bt){if(At==Ct)setTimeout(()=>jt(Bt));else if(Et)postMessage({targetThread:At,cmd:"processProxyingQueue",queue:Bt});else{if(!(At=yr.Vb[At]))return;At.postMessage({cmd:"processProxyingQueue",queue:Bt})}return 1},Ea:function(){return-1},Pa:function(At,Ct){At=new Date(1e3*Gt(At)),ct()[Ct>>2>>>0]=At.getUTCSeconds(),ct()[Ct+4>>2>>>0]=At.getUTCMinutes(),ct()[Ct+8>>2>>>0]=At.getUTCHours(),ct()[Ct+12>>2>>>0]=At.getUTCDate(),ct()[Ct+16>>2>>>0]=At.getUTCMonth(),ct()[Ct+20>>2>>>0]=At.getUTCFullYear()-1900,ct()[Ct+24>>2>>>0]=At.getUTCDay(),At=(At.getTime()-Date.UTC(At.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,ct()[Ct+28>>2>>>0]=At},Qa:function(At,Ct){At=new Date(1e3*Gt(At)),ct()[Ct>>2>>>0]=At.getSeconds(),ct()[Ct+4>>2>>>0]=At.getMinutes(),ct()[Ct+8>>2>>>0]=At.getHours(),ct()[Ct+12>>2>>>0]=At.getDate(),ct()[Ct+16>>2>>>0]=At.getMonth(),ct()[Ct+20>>2>>>0]=At.getFullYear()-1900,ct()[Ct+24>>2>>>0]=At.getDay();var Dt=new Date(At.getFullYear(),0,1),Bt=(At.getTime()-Dt.getTime())/864e5|0;ct()[Ct+28>>2>>>0]=Bt,ct()[Ct+36>>2>>>0]=-60*At.getTimezoneOffset(),Bt=new Date(At.getFullYear(),6,1).getTimezoneOffset(),At=0|(Bt!=(Dt=Dt.getTimezoneOffset())&&At.getTimezoneOffset()==Math.min(Dt,Bt)),ct()[Ct+32>>2>>>0]=At},Ra:function(At){var Ct=new Date(ct()[At+20>>2>>>0]+1900,ct()[At+16>>2>>>0],ct()[At+12>>2>>>0],ct()[At+8>>2>>>0],ct()[At+4>>2>>>0],ct()[At>>2>>>0],0),Dt=ct()[At+32>>2>>>0],Bt=Ct.getTimezoneOffset(),Wt=new Date(Ct.getFullYear(),0,1),Yt=new Date(Ct.getFullYear(),6,1).getTimezoneOffset(),rr=Wt.getTimezoneOffset(),pr=Math.min(rr,Yt);return 0>Dt?ct()[At+32>>2>>>0]=+(Yt!=rr&&pr==Bt):0<Dt!=(pr==Bt)&&(Yt=Math.max(rr,Yt),Ct.setTime(Ct.getTime()+6e4*((0<Dt?pr:Yt)-Bt))),ct()[At+24>>2>>>0]=Ct.getDay(),Dt=(Ct.getTime()-Wt.getTime())/864e5|0,ct()[At+28>>2>>>0]=Dt,ct()[At>>2>>>0]=Ct.getSeconds(),ct()[At+4>>2>>>0]=Ct.getMinutes(),ct()[At+8>>2>>>0]=Ct.getHours(),ct()[At+12>>2>>>0]=Ct.getDate(),ct()[At+16>>2>>>0]=Ct.getMonth(),Ct.getTime()/1e3|0},Aa:Xt,Ba:Zt,Sa:function At(Ct,Dt,Bt){At.Ac||(At.Ac=!0,fr(Ct,Dt,Bt))},y:function(){Ar("")},U:function(){if(!St&&!Tt){var At="Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread";dn||(dn={}),dn[At]||(dn[At]=1,St&&(At="warning: "+At),Lt(At))}},ra:function(){return 4294901760},B:Cn,Ia:function(At,Ct,Dt){at().copyWithin(At>>>0,Ct>>>0,Ct+Dt>>>0)},F:function(){return St?et(3993).cpus().length:navigator.hardwareConcurrency},Da:function(At,Ct,Dt){Or.length=Ct,Dt>>=3;for(var Bt=0;Bt<Ct;Bt++)Or[Bt]=dt()[Dt+Bt>>>0];return(0>At?Hn[-At-1]:$a[At]).apply(null,Or)},qa:function(At){var Ct=at().length;if((At>>>=0)<=Ct||4294901760<At)return!1;for(var Dt=1;4>=Dt;Dt*=2){var Bt=Ct*(1+.2/Dt);Bt=Math.min(Bt,At+100663296);var Wt=Math;Bt=Math.max(At,Bt),Wt=Wt.min.call(Wt,4294901760,Bt+(65536-Bt%65536)%65536);e:{try{zt.grow(Wt-Vt.byteLength+65535>>>16),ur(zt.buffer);var Yt=1;break e}catch{}Yt=void 0}if(Yt)return!0}return!1},Na:function(){throw"unwind"},Ga:qt,Ha:Pr,J:cn,I:Dr,S:Zr,ga:an,R:_s,d:function(){return Yr},na:function At(Ct,Dt){At.lc||(At.lc=function(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var Wt=new Uint8Array(1);return()=>(crypto.getRandomValues(Wt),Wt[0])}if(St)try{var Yt=et(Object(function(){var rr=new Error("Cannot find module 'crypto'");throw rr.code="MODULE_NOT_FOUND",rr}()));return()=>Yt.randomBytes(1)[0]}catch{}return()=>Ar("randomDevice")}());for(var Bt=0;Bt<Dt;Bt++)st()[Ct+Bt>>0>>>0]=At.lc();return 0},ia:function(At,Ct,Dt){var Bt=wr();try{return Rr(At)(Ct,Dt)}catch(Wt){if(Sr(Bt),Wt!==Wt+0)throw Wt;Tr(1,0)}},ja:function(At,Ct,Dt){var Bt=wr();try{return Rr(At)(Ct,Dt)}catch(Wt){if(Sr(Bt),Wt!==Wt+0)throw Wt;Tr(1,0)}},K:function(At){var Ct=wr();try{return Rr(At)()}catch(Dt){if(Sr(Ct),Dt!==Dt+0)throw Dt;Tr(1,0)}},f:function(At,Ct){var Dt=wr();try{return Rr(At)(Ct)}catch(Bt){if(Sr(Dt),Bt!==Bt+0)throw Bt;Tr(1,0)}},P:function(At,Ct,Dt){var Bt=wr();try{return Rr(At)(Ct,Dt)}catch(Wt){if(Sr(Bt),Wt!==Wt+0)throw Wt;Tr(1,0)}},Q:function(At,Ct,Dt){var Bt=wr();try{return Rr(At)(Ct,Dt)}catch(Wt){if(Sr(Bt),Wt!==Wt+0)throw Wt;Tr(1,0)}},k:function(At,Ct,Dt){var Bt=wr();try{return Rr(At)(Ct,Dt)}catch(Wt){if(Sr(Bt),Wt!==Wt+0)throw Wt;Tr(1,0)}},p:function(At,Ct,Dt,Bt){var Wt=wr();try{return Rr(At)(Ct,Dt,Bt)}catch(Yt){if(Sr(Wt),Yt!==Yt+0)throw Yt;Tr(1,0)}},q:function(At,Ct,Dt,Bt,Wt){var Yt=wr();try{return Rr(At)(Ct,Dt,Bt,Wt)}catch(rr){if(Sr(Yt),rr!==rr+0)throw rr;Tr(1,0)}},N:function(At,Ct,Dt,Bt,Wt,Yt){var rr=wr();try{return Rr(At)(Ct,Dt,Bt,Wt,Yt)}catch(pr){if(Sr(rr),pr!==pr+0)throw pr;Tr(1,0)}},s:function(At,Ct,Dt,Bt,Wt,Yt){var rr=wr();try{return Rr(At)(Ct,Dt,Bt,Wt,Yt)}catch(pr){if(Sr(rr),pr!==pr+0)throw pr;Tr(1,0)}},w:function(At,Ct,Dt,Bt,Wt,Yt,rr){var pr=wr();try{return Rr(At)(Ct,Dt,Bt,Wt,Yt,rr)}catch(Er){if(Sr(pr),Er!==Er+0)throw Er;Tr(1,0)}},L:function(At,Ct,Dt,Bt,Wt,Yt,rr,pr){var Er=wr();try{return Rr(At)(Ct,Dt,Bt,Wt,Yt,rr,pr)}catch(Cr){if(Sr(Er),Cr!==Cr+0)throw Cr;Tr(1,0)}},E:function(At,Ct,Dt,Bt,Wt,Yt,rr,pr,Er,Cr,$r,rn){var Qr=wr();try{return Rr(At)(Ct,Dt,Bt,Wt,Yt,rr,pr,Er,Cr,$r,rn)}catch(Kt){if(Sr(Qr),Kt!==Kt+0)throw Kt;Tr(1,0)}},aa:function(At,Ct,Dt,Bt,Wt,Yt,rr,pr){var Er=wr();try{return Us(At,Ct,Dt,Bt,Wt,Yt,rr,pr)}catch(Cr){if(Sr(Er),Cr!==Cr+0)throw Cr;Tr(1,0)}},_:function(At,Ct,Dt,Bt,Wt,Yt,rr){var pr=wr();try{return ks(At,Ct,Dt,Bt,Wt,Yt,rr)}catch(Er){if(Sr(pr),Er!==Er+0)throw Er;Tr(1,0)}},Z:function(At,Ct,Dt,Bt,Wt){var Yt=wr();try{return js(At,Ct,Dt,Bt,Wt)}catch(rr){if(Sr(Yt),rr!==rr+0)throw rr;Tr(1,0)}},ca:function(At,Ct,Dt,Bt){var Wt=wr();try{return Bs(At,Ct,Dt,Bt)}catch(Yt){if(Sr(Wt),Yt!==Yt+0)throw Yt;Tr(1,0)}},$:function(At){var Ct=wr();try{return Os(At)}catch(Dt){if(Sr(Ct),Dt!==Dt+0)throw Dt;Tr(1,0)}},ba:function(At,Ct){var Dt=wr();try{return Ns(At,Ct)}catch(Bt){if(Sr(Dt),Bt!==Bt+0)throw Bt;Tr(1,0)}},Y:function(At,Ct,Dt){var Bt=wr();try{return Ds(At,Ct,Dt)}catch(Wt){if(Sr(Bt),Wt!==Wt+0)throw Wt;Tr(1,0)}},g:function(At){var Ct=wr();try{Rr(At)()}catch(Dt){if(Sr(Ct),Dt!==Dt+0)throw Dt;Tr(1,0)}},r:function(At,Ct){var Dt=wr();try{Rr(At)(Ct)}catch(Bt){if(Sr(Dt),Bt!==Bt+0)throw Bt;Tr(1,0)}},i:function(At,Ct,Dt){var Bt=wr();try{Rr(At)(Ct,Dt)}catch(Wt){if(Sr(Bt),Wt!==Wt+0)throw Wt;Tr(1,0)}},ha:function(At,Ct,Dt,Bt){var Wt=wr();try{Rr(At)(Ct,Dt,Bt)}catch(Yt){if(Sr(Wt),Yt!==Yt+0)throw Yt;Tr(1,0)}},m:function(At,Ct,Dt,Bt){var Wt=wr();try{Rr(At)(Ct,Dt,Bt)}catch(Yt){if(Sr(Wt),Yt!==Yt+0)throw Yt;Tr(1,0)}},v:function(At,Ct,Dt,Bt,Wt){var Yt=wr();try{Rr(At)(Ct,Dt,Bt,Wt)}catch(rr){if(Sr(Yt),rr!==rr+0)throw rr;Tr(1,0)}},u:function(At,Ct,Dt,Bt,Wt,Yt){var rr=wr();try{Rr(At)(Ct,Dt,Bt,Wt,Yt)}catch(pr){if(Sr(rr),pr!==pr+0)throw pr;Tr(1,0)}},O:function(At,Ct,Dt,Bt,Wt,Yt,rr){var pr=wr();try{Rr(At)(Ct,Dt,Bt,Wt,Yt,rr)}catch(Er){if(Sr(pr),Er!==Er+0)throw Er;Tr(1,0)}},A:function(At,Ct,Dt,Bt,Wt,Yt,rr,pr){var Er=wr();try{Rr(At)(Ct,Dt,Bt,Wt,Yt,rr,pr)}catch(Cr){if(Sr(Er),Cr!==Cr+0)throw Cr;Tr(1,0)}},ka:function(At,Ct,Dt,Bt,Wt,Yt,rr,pr,Er){var Cr=wr();try{Rr(At)(Ct,Dt,Bt,Wt,Yt,rr,pr,Er)}catch($r){if(Sr(Cr),$r!==$r+0)throw $r;Tr(1,0)}},C:function(At,Ct,Dt,Bt,Wt,Yt,rr,pr,Er,Cr,$r){var rn=wr();try{Rr(At)(Ct,Dt,Bt,Wt,Yt,rr,pr,Er,Cr,$r)}catch(Qr){if(Sr(rn),Qr!==Qr+0)throw Qr;Tr(1,0)}},D:function(At,Ct,Dt,Bt,Wt,Yt,rr,pr,Er,Cr,$r,rn,Qr,Kt,Ir,Lr){var ln=wr();try{Rr(At)(Ct,Dt,Bt,Wt,Yt,rr,pr,Er,Cr,$r,rn,Qr,Kt,Ir,Lr)}catch(_n){if(Sr(ln),_n!==_n+0)throw _n;Tr(1,0)}},fa:function(At,Ct,Dt,Bt,Wt,Yt,rr,pr){var Er=wr();try{Fs(At,Ct,Dt,Bt,Wt,Yt,rr,pr)}catch(Cr){if(Sr(Er),Cr!==Cr+0)throw Cr;Tr(1,0)}},da:function(At,Ct,Dt,Bt,Wt,Yt,rr,pr,Er,Cr,$r,rn){var Qr=wr();try{$s(At,Ct,Dt,Bt,Wt,Yt,rr,pr,Er,Cr,$r,rn)}catch(Kt){if(Sr(Qr),Kt!==Kt+0)throw Kt;Tr(1,0)}},ea:function(At,Ct,Dt,Bt,Wt,Yt){var rr=wr();try{Ls(At,Ct,Dt,Bt,Wt,Yt)}catch(pr){if(Sr(rr),pr!==pr+0)throw pr;Tr(1,0)}},o:function(At){return At},a:zt||ot.wasmMemory,G:function(At){Yr=At},la:Ss,z:function(At,Ct,Dt,Bt){return Ss(At,Ct,Dt,Bt)}};(function(){function At(Wt,Yt){ot.asm=Wt.exports,yr.qc.push(ot.asm.sb),Mr=ot.asm.ub,Gr.unshift(ot.asm.Va),Ut=Yt,Et||(jr--,ot.monitorRunDependencies&&ot.monitorRunDependencies(jr),jr==0&&Xr&&(Wt=Xr,Xr=null,Wt()))}function Ct(Wt){At(Wt.instance,Wt.module)}function Dt(Wt){return function(){if(!$t&&(wt||Tt)){if(typeof fetch=="function"&&!kr.startsWith("file://"))return fetch(kr,{credentials:"same-origin"}).then(function(Yt){if(!Yt.ok)throw"failed to load wasm binary file at '"+kr+"'";return Yt.arrayBuffer()}).catch(function(){return mn()});if(ft)return new Promise(function(Yt,rr){ft(kr,function(pr){Yt(new Uint8Array(pr))},rr)})}return Promise.resolve().then(function(){return mn()})}().then(function(Yt){return WebAssembly.instantiate(Yt,Bt)}).then(function(Yt){return Yt}).then(Wt,function(Yt){Lt("failed to asynchronously prepare wasm: "+Yt),Ar(Yt)})}var Bt={a:yl};if(Et||(jr++,ot.monitorRunDependencies&&ot.monitorRunDependencies(jr)),ot.instantiateWasm)try{return ot.instantiateWasm(Bt,At)}catch(Wt){return Lt("Module.instantiateWasm callback failed with error: "+Wt),!1}($t||typeof WebAssembly.instantiateStreaming!="function"||An()||kr.startsWith("file://")||St||typeof fetch!="function"?Dt(Ct):fetch(kr,{credentials:"same-origin"}).then(function(Wt){return WebAssembly.instantiateStreaming(Wt,Bt).then(Ct,function(Yt){return Lt("wasm streaming compile failed: "+Yt),Lt("falling back to ArrayBuffer instantiation"),Dt(Ct)})})).catch(lt)})(),ot.___wasm_call_ctors=function(){return(ot.___wasm_call_ctors=ot.asm.Va).apply(null,arguments)},ot._OrtInit=function(){return(ot._OrtInit=ot.asm.Wa).apply(null,arguments)},ot._OrtCreateSessionOptions=function(){return(ot._OrtCreateSessionOptions=ot.asm.Xa).apply(null,arguments)},ot._OrtAppendExecutionProvider=function(){return(ot._OrtAppendExecutionProvider=ot.asm.Ya).apply(null,arguments)},ot._OrtAddSessionConfigEntry=function(){return(ot._OrtAddSessionConfigEntry=ot.asm.Za).apply(null,arguments)},ot._OrtReleaseSessionOptions=function(){return(ot._OrtReleaseSessionOptions=ot.asm._a).apply(null,arguments)},ot._OrtCreateSession=function(){return(ot._OrtCreateSession=ot.asm.$a).apply(null,arguments)},ot._OrtReleaseSession=function(){return(ot._OrtReleaseSession=ot.asm.ab).apply(null,arguments)},ot._OrtGetInputCount=function(){return(ot._OrtGetInputCount=ot.asm.bb).apply(null,arguments)},ot._OrtGetOutputCount=function(){return(ot._OrtGetOutputCount=ot.asm.cb).apply(null,arguments)},ot._OrtGetInputName=function(){return(ot._OrtGetInputName=ot.asm.db).apply(null,arguments)},ot._OrtGetOutputName=function(){return(ot._OrtGetOutputName=ot.asm.eb).apply(null,arguments)},ot._OrtFree=function(){return(ot._OrtFree=ot.asm.fb).apply(null,arguments)},ot._OrtCreateTensor=function(){return(ot._OrtCreateTensor=ot.asm.gb).apply(null,arguments)},ot._OrtGetTensorData=function(){return(ot._OrtGetTensorData=ot.asm.hb).apply(null,arguments)},ot._OrtReleaseTensor=function(){return(ot._OrtReleaseTensor=ot.asm.ib).apply(null,arguments)},ot._OrtCreateRunOptions=function(){return(ot._OrtCreateRunOptions=ot.asm.jb).apply(null,arguments)},ot._OrtAddRunConfigEntry=function(){return(ot._OrtAddRunConfigEntry=ot.asm.kb).apply(null,arguments)},ot._OrtReleaseRunOptions=function(){return(ot._OrtReleaseRunOptions=ot.asm.lb).apply(null,arguments)},ot._OrtRun=function(){return(ot._OrtRun=ot.asm.mb).apply(null,arguments)},ot._OrtEndProfiling=function(){return(ot._OrtEndProfiling=ot.asm.nb).apply(null,arguments)};var Kn=ot._pthread_self=function(){return(Kn=ot._pthread_self=ot.asm.ob).apply(null,arguments)},as=ot._malloc=function(){return(as=ot._malloc=ot.asm.pb).apply(null,arguments)},ws=ot._free=function(){return(ws=ot._free=ot.asm.qb).apply(null,arguments)},Ts=ot._fflush=function(){return(Ts=ot._fflush=ot.asm.rb).apply(null,arguments)};ot.__emscripten_tls_init=function(){return(ot.__emscripten_tls_init=ot.asm.sb).apply(null,arguments)};var Es=ot.___funcs_on_exit=function(){return(Es=ot.___funcs_on_exit=ot.asm.tb).apply(null,arguments)},As=ot.__emscripten_thread_init=function(){return(As=ot.__emscripten_thread_init=ot.asm.vb).apply(null,arguments)};ot.__emscripten_thread_crashed=function(){return(ot.__emscripten_thread_crashed=ot.asm.wb).apply(null,arguments)};var Zn,Cs=ot._emscripten_run_in_main_runtime_thread_js=function(){return(Cs=ot._emscripten_run_in_main_runtime_thread_js=ot.asm.xb).apply(null,arguments)},Ps=ot.__emscripten_proxy_execute_task_queue=function(){return(Ps=ot.__emscripten_proxy_execute_task_queue=ot.asm.yb).apply(null,arguments)},ls=ot.__emscripten_thread_free_data=function(){return(ls=ot.__emscripten_thread_free_data=ot.asm.zb).apply(null,arguments)},Is=ot.__emscripten_thread_exit=function(){return(Is=ot.__emscripten_thread_exit=ot.asm.Ab).apply(null,arguments)},Tr=ot._setThrew=function(){return(Tr=ot._setThrew=ot.asm.Bb).apply(null,arguments)},Rs=ot._emscripten_stack_set_limits=function(){return(Rs=ot._emscripten_stack_set_limits=ot.asm.Cb).apply(null,arguments)},wr=ot.stackSave=function(){return(wr=ot.stackSave=ot.asm.Db).apply(null,arguments)},Sr=ot.stackRestore=function(){return(Sr=ot.stackRestore=ot.asm.Eb).apply(null,arguments)},us=ot.stackAlloc=function(){return(us=ot.stackAlloc=ot.asm.Fb).apply(null,arguments)},Qn=ot.___cxa_can_catch=function(){return(Qn=ot.___cxa_can_catch=ot.asm.Gb).apply(null,arguments)},Ms=ot.___cxa_is_pointer_type=function(){return(Ms=ot.___cxa_is_pointer_type=ot.asm.Hb).apply(null,arguments)},Os=ot.dynCall_j=function(){return(Os=ot.dynCall_j=ot.asm.Ib).apply(null,arguments)},ks=ot.dynCall_iiiiij=function(){return(ks=ot.dynCall_iiiiij=ot.asm.Jb).apply(null,arguments)},Ds=ot.dynCall_jii=function(){return(Ds=ot.dynCall_jii=ot.asm.Kb).apply(null,arguments)},Fs=ot.dynCall_viiiiij=function(){return(Fs=ot.dynCall_viiiiij=ot.asm.Lb).apply(null,arguments)},Ls=ot.dynCall_vjji=function(){return(Ls=ot.dynCall_vjji=ot.asm.Mb).apply(null,arguments)},$s=ot.dynCall_viiijjjii=function(){return($s=ot.dynCall_viiijjjii=ot.asm.Nb).apply(null,arguments)},Bs=ot.dynCall_iij=function(){return(Bs=ot.dynCall_iij=ot.asm.Ob).apply(null,arguments)},Ns=ot.dynCall_ji=function(){return(Ns=ot.dynCall_ji=ot.asm.Pb).apply(null,arguments)},Us=ot.dynCall_iiiiiij=function(){return(Us=ot.dynCall_iiiiiij=ot.asm.Qb).apply(null,arguments)},js=ot.dynCall_iiij=function(){return(js=ot.dynCall_iiij=ot.asm.Rb).apply(null,arguments)};function zs(){function At(){if(!Zn&&(Zn=!0,ot.calledRun=!0,!gr)&&(Et||un(Gr),nt(ot),ot.onRuntimeInitialized&&ot.onRuntimeInitialized(),!Et)){if(ot.postRun)for(typeof ot.postRun=="function"&&(ot.postRun=[ot.postRun]);ot.postRun.length;){var Ct=ot.postRun.shift();Jr.unshift(Ct)}un(Jr)}}if(!(0<jr))if(Et)nt(ot),Et||un(Gr),postMessage({cmd:"loaded"});else{if(ot.preRun)for(typeof ot.preRun=="function"&&(ot.preRun=[ot.preRun]);ot.preRun.length;)Hr();un(Fr),0<jr||(ot.setStatus?(ot.setStatus("Running..."),setTimeout(function(){setTimeout(function(){ot.setStatus("")},1),At()},1)):At())}}if(ot.UTF8ToString=nr,ot.stringToUTF8=function(At,Ct,Dt){return lr(At,at(),Ct,Dt)},ot.lengthBytesUTF8=hr,ot.keepRuntimeAlive=Wr,ot.wasmMemory=zt,ot.stackSave=wr,ot.stackRestore=Sr,ot.stackAlloc=us,ot.ExitStatus=sn,ot.PThread=yr,Xr=function At(){Zn||zs(),Zn||(Xr=At)},ot.preInit)for(typeof ot.preInit=="function"&&(ot.preInit=[ot.preInit]);0<ot.preInit.length;)ot.preInit.pop()();return zs(),it.ready});_e.exports=rt},932:(_e,_,et)=>{var tt,rt=(tt=(tt=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(it){var st,at,ct;it=it||{},st||(st=it!==void 0?it:{}),st.ready=new Promise(function(It,Ft){at=It,ct=Ft});var ut,dt,ot,nt,lt,ht,ft=Object.assign({},st),gt="./this.program",mt=(It,Ft)=>{throw Ft},yt=typeof window=="object",bt=typeof importScripts=="function",_t=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",vt="";_t?(vt=bt?et(908).dirname(vt)+"/":"//",ht=()=>{lt||(nt=et(1384),lt=et(908))},ut=function(It,Ft){return ht(),It=lt.normalize(It),nt.readFileSync(It,Ft?void 0:"utf8")},ot=It=>((It=ut(It,!0)).buffer||(It=new Uint8Array(It)),It),dt=(It,Ft,jt)=>{ht(),It=lt.normalize(It),nt.readFile(It,function(Gt,Xt){Gt?jt(Gt):Ft(Xt.buffer)})},1<process.argv.length&&(gt=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",function(It){if(!(It instanceof Gr))throw It}),process.on("unhandledRejection",function(It){throw It}),mt=(It,Ft)=>{if(St||0<Qt)throw process.exitCode=It,Ft;Ft instanceof Gr||Tt("exiting due to exception: "+Ft),process.exit(It)},st.inspect=function(){return"[Emscripten Module object]"}):(yt||bt)&&(bt?vt=self.location.href:typeof document<"u"&&document.currentScript&&(vt=document.currentScript.src),tt&&(vt=tt),vt=vt.indexOf("blob:")!==0?vt.substr(0,vt.replace(/[?#].*/,"").lastIndexOf("/")+1):"",ut=It=>{var Ft=new XMLHttpRequest;return Ft.open("GET",It,!1),Ft.send(null),Ft.responseText},bt&&(ot=It=>{var Ft=new XMLHttpRequest;return Ft.open("GET",It,!1),Ft.responseType="arraybuffer",Ft.send(null),new Uint8Array(Ft.response)}),dt=(It,Ft,jt)=>{var Gt=new XMLHttpRequest;Gt.open("GET",It,!0),Gt.responseType="arraybuffer",Gt.onload=()=>{Gt.status==200||Gt.status==0&&Gt.response?Ft(Gt.response):jt()},Gt.onerror=jt,Gt.send(null)});var xt,wt=st.print||console.log.bind(console),Tt=st.printErr||console.warn.bind(console);Object.assign(st,ft),ft=null,st.thisProgram&&(gt=st.thisProgram),st.quit&&(mt=st.quit),st.wasmBinary&&(xt=st.wasmBinary);var St=st.noExitRuntime||!1;typeof WebAssembly!="object"&&ur("no native wasm support detected");var Et,Ot,Rt,Pt,Mt,$t,kt=!1,Lt=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function Nt(It,Ft,jt){var Gt=(Ft>>>=0)+jt;for(jt=Ft;It[jt]&&!(jt>=Gt);)++jt;if(16<jt-Ft&&It.buffer&&Lt)return Lt.decode(It.subarray(Ft,jt));for(Gt="";Ft<jt;){var Xt=It[Ft++];if(128&Xt){var Zt=63&It[Ft++];if((224&Xt)==192)Gt+=String.fromCharCode((31&Xt)<<6|Zt);else{var tr=63&It[Ft++];65536>(Xt=(240&Xt)==224?(15&Xt)<<12|Zt<<6|tr:(7&Xt)<<18|Zt<<12|tr<<6|63&It[Ft++])?Gt+=String.fromCharCode(Xt):(Xt-=65536,Gt+=String.fromCharCode(55296|Xt>>10,56320|1023&Xt))}}else Gt+=String.fromCharCode(Xt)}return Gt}function zt(It,Ft){return(It>>>=0)?Nt(Pt,It,Ft):""}function Ut(It,Ft,jt,Gt){if(!(0<Gt))return 0;var Xt=jt>>>=0;Gt=jt+Gt-1;for(var Zt=0;Zt<It.length;++Zt){var tr=It.charCodeAt(Zt);if(55296<=tr&&57343>=tr&&(tr=65536+((1023&tr)<<10)|1023&It.charCodeAt(++Zt)),127>=tr){if(jt>=Gt)break;Ft[jt++>>>0]=tr}else{if(2047>=tr){if(jt+1>=Gt)break;Ft[jt++>>>0]=192|tr>>6}else{if(65535>=tr){if(jt+2>=Gt)break;Ft[jt++>>>0]=224|tr>>12}else{if(jt+3>=Gt)break;Ft[jt++>>>0]=240|tr>>18,Ft[jt++>>>0]=128|tr>>12&63}Ft[jt++>>>0]=128|tr>>6&63}Ft[jt++>>>0]=128|63&tr}}return Ft[jt>>>0]=0,jt-Xt}function Vt(It){for(var Ft=0,jt=0;jt<It.length;++jt){var Gt=It.charCodeAt(jt);127>=Gt?Ft++:2047>=Gt?Ft+=2:55296<=Gt&&57343>=Gt?(Ft+=4,++jt):Ft+=3}return Ft}function Ht(){var It=Et.buffer;Ot=It,st.HEAP8=Rt=new Int8Array(It),st.HEAP16=new Int16Array(It),st.HEAP32=Mt=new Int32Array(It),st.HEAPU8=Pt=new Uint8Array(It),st.HEAPU16=new Uint16Array(It),st.HEAPU32=$t=new Uint32Array(It),st.HEAPF32=new Float32Array(It),st.HEAPF64=new Float64Array(It)}var sr,ir=[],er=[],dr=[],gr=[],Qt=0;function Jt(){var It=st.preRun.shift();ir.unshift(It)}var nr,lr=0,hr=null;function ur(It){throw st.onAbort&&st.onAbort(It),Tt(It="Aborted("+It+")"),kt=!0,It=new WebAssembly.RuntimeError(It+". Build with -sASSERTIONS for more info."),ct(It),It}function mr(){return nr.startsWith("data:application/octet-stream;base64,")}if(nr="ort-wasm.wasm",!mr()){var Mr=nr;nr=st.locateFile?st.locateFile(Mr,vt):vt+Mr}function Fr(){var It=nr;try{if(It==nr&&xt)return new Uint8Array(xt);if(ot)return ot(It);throw"both async and sync fetching of the wasm failed"}catch(Ft){ur(Ft)}}function Gr(It){this.name="ExitStatus",this.message="Program terminated with exit("+It+")",this.status=It}function Nr(It){for(;0<It.length;)It.shift()(st)}var Jr=[],Wr=0,Hr=0;function kr(It){this.Db=It,this.zb=It-24,this.Ub=function(Ft){$t[this.zb+4>>2>>>0]=Ft},this.Eb=function(){return $t[this.zb+4>>2>>>0]},this.Sb=function(Ft){$t[this.zb+8>>2>>>0]=Ft},this.Wb=function(){return $t[this.zb+8>>2>>>0]},this.Tb=function(){Mt[this.zb>>2>>>0]=0},this.Ib=function(Ft){Rt[this.zb+12>>0>>>0]=Ft?1:0},this.Pb=function(){return Rt[this.zb+12>>0>>>0]!=0},this.Jb=function(Ft){Rt[this.zb+13>>0>>>0]=Ft?1:0},this.Lb=function(){return Rt[this.zb+13>>0>>>0]!=0},this.Rb=function(Ft,jt){this.Fb(0),this.Ub(Ft),this.Sb(jt),this.Tb(),this.Ib(!1),this.Jb(!1)},this.Nb=function(){Mt[this.zb>>2>>>0]+=1},this.Xb=function(){var Ft=Mt[this.zb>>2>>>0];return Mt[this.zb>>2>>>0]=Ft-1,Ft===1},this.Fb=function(Ft){$t[this.zb+16>>2>>>0]=Ft},this.Ob=function(){return $t[this.zb+16>>2>>>0]},this.Qb=function(){if(In(this.Eb()))return $t[this.Db>>2>>>0];var Ft=this.Ob();return Ft!==0?Ft:this.Db}}function jr(It){return dn(new kr(It).zb)}var Xr=[];function Ar(It){var Ft=Xr[It];return Ft||(It>=Xr.length&&(Xr.length=It+1),Xr[It]=Ft=sr.get(It)),Ft}function An(It){var Ft=Vt(It)+1,jt=Rr(Ft);return jt&&Ut(It,Rt,jt,Ft),jt}var mn={};function Hn(){if(!sn){var It,Ft={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:gt||"./this.program"};for(It in mn)mn[It]===void 0?delete Ft[It]:Ft[It]=mn[It];var jt=[];for(It in Ft)jt.push(It+"="+Ft[It]);sn=jt}return sn}var sn,yn=[null,[],[]];function bn(It,Ft){var jt=yn[It];Ft===0||Ft===10?((It===1?wt:Tt)(Nt(jt,0)),jt.length=0):jt.push(Ft)}var zr=0;function cn(It){return It%4==0&&(It%100!=0||It%400==0)}var yr=[31,29,31,30,31,30,31,31,30,31,30,31],un=[31,28,31,30,31,30,31,31,30,31,30,31];function Xn(It,Ft,jt,Gt){function Xt(qt,Pr,Dr){for(qt=typeof qt=="number"?qt.toString():qt||"";qt.length<Pr;)qt=Dr[0]+qt;return qt}function Zt(qt,Pr){return Xt(qt,Pr,"0")}function tr(qt,Pr){function Dr(an){return 0>an?-1:0<an?1:0}var Zr;return(Zr=Dr(qt.getFullYear()-Pr.getFullYear()))===0&&(Zr=Dr(qt.getMonth()-Pr.getMonth()))===0&&(Zr=Dr(qt.getDate()-Pr.getDate())),Zr}function fr(qt){switch(qt.getDay()){case 0:return new Date(qt.getFullYear()-1,11,29);case 1:return qt;case 2:return new Date(qt.getFullYear(),0,3);case 3:return new Date(qt.getFullYear(),0,2);case 4:return new Date(qt.getFullYear(),0,1);case 5:return new Date(qt.getFullYear()-1,11,31);case 6:return new Date(qt.getFullYear()-1,11,30)}}function ar(qt){var Pr=qt.Bb;for(qt=new Date(new Date(qt.Cb+1900,0,1).getTime());0<Pr;){var Dr=qt.getMonth(),Zr=(cn(qt.getFullYear())?yr:un)[Dr];if(!(Pr>Zr-qt.getDate())){qt.setDate(qt.getDate()+Pr);break}Pr-=Zr-qt.getDate()+1,qt.setDate(1),11>Dr?qt.setMonth(Dr+1):(qt.setMonth(0),qt.setFullYear(qt.getFullYear()+1))}return Dr=new Date(qt.getFullYear()+1,0,4),Pr=fr(new Date(qt.getFullYear(),0,4)),Dr=fr(Dr),0>=tr(Pr,qt)?0>=tr(Dr,qt)?qt.getFullYear()+1:qt.getFullYear():qt.getFullYear()-1}var xr=Mt[Gt+40>>2>>>0];for(var Or in Gt={$b:Mt[Gt>>2>>>0],Zb:Mt[Gt+4>>2>>>0],Gb:Mt[Gt+8>>2>>>0],Kb:Mt[Gt+12>>2>>>0],Hb:Mt[Gt+16>>2>>>0],Cb:Mt[Gt+20>>2>>>0],Ab:Mt[Gt+24>>2>>>0],Bb:Mt[Gt+28>>2>>>0],bc:Mt[Gt+32>>2>>>0],Yb:Mt[Gt+36>>2>>>0],ac:xr?zt(xr):""},jt=zt(jt),xr={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})jt=jt.replace(new RegExp(Or,"g"),xr[Or]);var Ur="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Br="January February March April May June July August September October November December".split(" ");for(Or in xr={"%a":function(qt){return Ur[qt.Ab].substring(0,3)},"%A":function(qt){return Ur[qt.Ab]},"%b":function(qt){return Br[qt.Hb].substring(0,3)},"%B":function(qt){return Br[qt.Hb]},"%C":function(qt){return Zt((qt.Cb+1900)/100|0,2)},"%d":function(qt){return Zt(qt.Kb,2)},"%e":function(qt){return Xt(qt.Kb,2," ")},"%g":function(qt){return ar(qt).toString().substring(2)},"%G":function(qt){return ar(qt)},"%H":function(qt){return Zt(qt.Gb,2)},"%I":function(qt){return(qt=qt.Gb)==0?qt=12:12<qt&&(qt-=12),Zt(qt,2)},"%j":function(qt){for(var Pr=0,Dr=0;Dr<=qt.Hb-1;Pr+=(cn(qt.Cb+1900)?yr:un)[Dr++]);return Zt(qt.Kb+Pr,3)},"%m":function(qt){return Zt(qt.Hb+1,2)},"%M":function(qt){return Zt(qt.Zb,2)},"%n":function(){return`
`},"%p":function(qt){return 0<=qt.Gb&&12>qt.Gb?"AM":"PM"},"%S":function(qt){return Zt(qt.$b,2)},"%t":function(){return"	"},"%u":function(qt){return qt.Ab||7},"%U":function(qt){return Zt(Math.floor((qt.Bb+7-qt.Ab)/7),2)},"%V":function(qt){var Pr=Math.floor((qt.Bb+7-(qt.Ab+6)%7)/7);if(2>=(qt.Ab+371-qt.Bb-2)%7&&Pr++,Pr)Pr==53&&((Dr=(qt.Ab+371-qt.Bb)%7)==4||Dr==3&&cn(qt.Cb)||(Pr=1));else{Pr=52;var Dr=(qt.Ab+7-qt.Bb-1)%7;(Dr==4||Dr==5&&cn(qt.Cb%400-1))&&Pr++}return Zt(Pr,2)},"%w":function(qt){return qt.Ab},"%W":function(qt){return Zt(Math.floor((qt.Bb+7-(qt.Ab+6)%7)/7),2)},"%y":function(qt){return(qt.Cb+1900).toString().substring(2)},"%Y":function(qt){return qt.Cb+1900},"%z":function(qt){var Pr=0<=(qt=qt.Yb);return qt=Math.abs(qt)/60,(Pr?"+":"-")+("0000"+(qt/60*100+qt%60)).slice(-4)},"%Z":function(qt){return qt.ac},"%%":function(){return"%"}},jt=jt.replace(/%%/g,"\0\0"),xr)jt.includes(Or)&&(jt=jt.replace(new RegExp(Or,"g"),xr[Or](Gt)));return Or=function(qt){var Pr=Array(Vt(qt)+1);return Ut(qt,Pr,0,Pr.length),Pr}(jt=jt.replace(/\0\0/g,"%")),Or.length>Ft?0:(Rt.set(Or,It>>>0),Or.length-1)}var Yn={a:function(It){return Rr(It+24)+24},m:function(It){return(It=new kr(It)).Pb()||(It.Ib(!0),Wr--),It.Jb(!1),Jr.push(It),It.Nb(),It.Qb()},ia:function(It){throw Tt("Unexpected exception thrown, this is not properly supported - aborting"),kt=!0,It},w:function(){vr(0);var It=Jr.pop();if(It.Xb()&&!It.Lb()){var Ft=It.Wb();Ft&&Ar(Ft)(It.Db),jr(It.Db)}Hr=0},d:function(){var It=Hr;if(!It)return zr=0;var Ft=new kr(It);Ft.Fb(It);var jt=Ft.Eb();if(!jt)return zr=0,It;for(var Gt=Array.prototype.slice.call(arguments),Xt=0;Xt<Gt.length;Xt++){var Zt=Gt[Xt];if(Zt===0||Zt===jt)break;if(fn(Zt,jt,Ft.zb+16))return zr=Zt,It}return zr=jt,It},k:function(){var It=Hr;if(!It)return zr=0;var Ft=new kr(It);Ft.Fb(It);var jt=Ft.Eb();if(!jt)return zr=0,It;for(var Gt=Array.prototype.slice.call(arguments),Xt=0;Xt<Gt.length;Xt++){var Zt=Gt[Xt];if(Zt===0||Zt===jt)break;if(fn(Zt,jt,Ft.zb+16))return zr=Zt,It}return zr=jt,It},g:function(){var It=Hr;if(!It)return zr=0;var Ft=new kr(It);Ft.Fb(It);var jt=Ft.Eb();if(!jt)return zr=0,It;for(var Gt=Array.prototype.slice.call(arguments),Xt=0;Xt<Gt.length;Xt++){var Zt=Gt[Xt];if(Zt===0||Zt===jt)break;if(fn(Zt,jt,Ft.zb+16))return zr=Zt,It}return zr=jt,It},s:jr,L:function(){var It=Jr.pop();It||ur("no exception to throw");var Ft=It.Db;throw It.Lb()||(Jr.push(It),It.Jb(!0),It.Ib(!1),Wr++),Hr=Ft,Ft},b:function(It,Ft,jt){throw new kr(It).Rb(Ft,jt),Hr=It,Wr++,It},la:function(){return Wr},i:function(It){throw Hr||(Hr=It),It},H:function(){return 0},Ba:function(){},pa:function(){},ra:function(){},ka:function(){return 0},za:function(){},ua:function(){},ya:function(){},R:function(){},qa:function(){},na:function(){},Aa:function(){},oa:function(){},Ha:function(){},Ja:function(){ur("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ia:function(){ur("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},S:function(){return Date.now()},Ca:function(){return!0},Da:function(It,Ft){It=new Date(1e3*($t[It>>>2]+4294967296*Mt[It+4>>>2])),Mt[Ft>>2>>>0]=It.getUTCSeconds(),Mt[Ft+4>>2>>>0]=It.getUTCMinutes(),Mt[Ft+8>>2>>>0]=It.getUTCHours(),Mt[Ft+12>>2>>>0]=It.getUTCDate(),Mt[Ft+16>>2>>>0]=It.getUTCMonth(),Mt[Ft+20>>2>>>0]=It.getUTCFullYear()-1900,Mt[Ft+24>>2>>>0]=It.getUTCDay(),Mt[Ft+28>>2>>>0]=(It.getTime()-Date.UTC(It.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},Ea:function(It,Ft){It=new Date(1e3*($t[It>>>2]+4294967296*Mt[It+4>>>2])),Mt[Ft>>2>>>0]=It.getSeconds(),Mt[Ft+4>>2>>>0]=It.getMinutes(),Mt[Ft+8>>2>>>0]=It.getHours(),Mt[Ft+12>>2>>>0]=It.getDate(),Mt[Ft+16>>2>>>0]=It.getMonth(),Mt[Ft+20>>2>>>0]=It.getFullYear()-1900,Mt[Ft+24>>2>>>0]=It.getDay();var jt=new Date(It.getFullYear(),0,1);Mt[Ft+28>>2>>>0]=(It.getTime()-jt.getTime())/864e5|0,Mt[Ft+36>>2>>>0]=-60*It.getTimezoneOffset();var Gt=new Date(It.getFullYear(),6,1).getTimezoneOffset();jt=jt.getTimezoneOffset(),Mt[Ft+32>>2>>>0]=0|(Gt!=jt&&It.getTimezoneOffset()==Math.min(jt,Gt))},Fa:function(It){var Ft=new Date(Mt[It+20>>2>>>0]+1900,Mt[It+16>>2>>>0],Mt[It+12>>2>>>0],Mt[It+8>>2>>>0],Mt[It+4>>2>>>0],Mt[It>>2>>>0],0),jt=Mt[It+32>>2>>>0],Gt=Ft.getTimezoneOffset(),Xt=new Date(Ft.getFullYear(),0,1),Zt=new Date(Ft.getFullYear(),6,1).getTimezoneOffset(),tr=Xt.getTimezoneOffset(),fr=Math.min(tr,Zt);return 0>jt?Mt[It+32>>2>>>0]=+(Zt!=tr&&fr==Gt):0<jt!=(fr==Gt)&&(Zt=Math.max(tr,Zt),Ft.setTime(Ft.getTime()+6e4*((0<jt?fr:Zt)-Gt))),Mt[It+24>>2>>>0]=Ft.getDay(),Mt[It+28>>2>>>0]=(Ft.getTime()-Xt.getTime())/864e5|0,Mt[It>>2>>>0]=Ft.getSeconds(),Mt[It+4>>2>>>0]=Ft.getMinutes(),Mt[It+8>>2>>>0]=Ft.getHours(),Mt[It+12>>2>>>0]=Ft.getDate(),Mt[It+16>>2>>>0]=Ft.getMonth(),Ft.getTime()/1e3|0},sa:function(){return-52},ta:function(){},Ga:function It(Ft,jt,Gt){It.Vb||(It.Vb=!0,function(Xt,Zt,tr){function fr(Br){return(Br=Br.toTimeString().match(/\(([A-Za-z ]+)\)$/))?Br[1]:"GMT"}var ar=new Date().getFullYear(),xr=new Date(ar,0,1),Or=new Date(ar,6,1);ar=xr.getTimezoneOffset();var Ur=Or.getTimezoneOffset();Mt[Xt>>2>>>0]=60*Math.max(ar,Ur),Mt[Zt>>2>>>0]=+(ar!=Ur),Xt=fr(xr),Zt=fr(Or),Xt=An(Xt),Zt=An(Zt),Ur<ar?($t[tr>>2>>>0]=Xt,$t[tr+4>>2>>>0]=Zt):($t[tr>>2>>>0]=Zt,$t[tr+4>>2>>>0]=Xt)}(Ft,jt,Gt))},B:function(){ur("")},ma:function(){return 4294901760},I:_t?()=>{var It=process.hrtime();return 1e3*It[0]+It[1]/1e6}:()=>performance.now(),xa:function(It,Ft,jt){Pt.copyWithin(It>>>0,Ft>>>0,Ft+jt>>>0)},G:function(It){var Ft=Pt.length;if(4294901760<(It>>>=0))return!1;for(var jt=1;4>=jt;jt*=2){var Gt=Ft*(1+.2/jt);Gt=Math.min(Gt,It+100663296);var Xt=Math;Gt=Math.max(It,Gt),Xt=Xt.min.call(Xt,4294901760,Gt+(65536-Gt%65536)%65536);e:{try{Et.grow(Xt-Ot.byteLength+65535>>>16),Ht();var Zt=1;break e}catch{}Zt=void 0}if(Zt)return!0}return!1},va:function(It,Ft){var jt=0;return Hn().forEach(function(Gt,Xt){var Zt=Ft+jt;for(Xt=$t[It+4*Xt>>2>>>0]=Zt,Zt=0;Zt<Gt.length;++Zt)Rt[Xt++>>0>>>0]=Gt.charCodeAt(Zt);Rt[Xt>>0>>>0]=0,jt+=Gt.length+1}),0},wa:function(It,Ft){var jt=Hn();$t[It>>2>>>0]=jt.length;var Gt=0;return jt.forEach(function(Xt){Gt+=Xt.length+1}),$t[Ft>>2>>>0]=Gt,0},ba:function(It){St||0<Qt||(hn(),Nr(dr),Cn(0),yn[1].length&&bn(1,10),yn[2].length&&bn(2,10)),St||0<Qt||(st.onExit&&st.onExit(It),kt=!0),mt(It,new Gr(It))},E:function(){return 52},Q:function(){return 52},ca:function(){return 70},P:function(It,Ft,jt,Gt){for(var Xt=0,Zt=0;Zt<jt;Zt++){var tr=$t[Ft>>2>>>0],fr=$t[Ft+4>>2>>>0];Ft+=8;for(var ar=0;ar<fr;ar++)bn(It,Pt[tr+ar>>>0]);Xt+=fr}return $t[Gt>>2>>>0]=Xt,0},c:function(){return zr},ja:function It(Ft,jt){It.Mb||(It.Mb=function(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var Xt=new Uint8Array(1);return()=>(crypto.getRandomValues(Xt),Xt[0])}if(_t)try{var Zt=et(Object(function(){var tr=new Error("Cannot find module 'crypto'");throw tr.code="MODULE_NOT_FOUND",tr}()));return()=>Zt.randomBytes(1)[0]}catch{}return()=>ur("randomDevice")}());for(var Gt=0;Gt<jt;Gt++)Rt[Ft+Gt>>0>>>0]=It.Mb();return 0},ea:function(It,Ft,jt){var Gt=br();try{return Ar(It)(Ft,jt)}catch(Xt){if(_r(Gt),Xt!==Xt+0)throw Xt;vr(1,0)}},fa:function(It,Ft,jt){var Gt=br();try{return Ar(It)(Ft,jt)}catch(Xt){if(_r(Gt),Xt!==Xt+0)throw Xt;vr(1,0)}},J:function(It){var Ft=br();try{return Ar(It)()}catch(jt){if(_r(Ft),jt!==jt+0)throw jt;vr(1,0)}},e:function(It,Ft){var jt=br();try{return Ar(It)(Ft)}catch(Gt){if(_r(jt),Gt!==Gt+0)throw Gt;vr(1,0)}},N:function(It,Ft,jt){var Gt=br();try{return Ar(It)(Ft,jt)}catch(Xt){if(_r(Gt),Xt!==Xt+0)throw Xt;vr(1,0)}},O:function(It,Ft,jt){var Gt=br();try{return Ar(It)(Ft,jt)}catch(Xt){if(_r(Gt),Xt!==Xt+0)throw Xt;vr(1,0)}},j:function(It,Ft,jt){var Gt=br();try{return Ar(It)(Ft,jt)}catch(Xt){if(_r(Gt),Xt!==Xt+0)throw Xt;vr(1,0)}},o:function(It,Ft,jt,Gt){var Xt=br();try{return Ar(It)(Ft,jt,Gt)}catch(Zt){if(_r(Xt),Zt!==Zt+0)throw Zt;vr(1,0)}},p:function(It,Ft,jt,Gt,Xt){var Zt=br();try{return Ar(It)(Ft,jt,Gt,Xt)}catch(tr){if(_r(Zt),tr!==tr+0)throw tr;vr(1,0)}},M:function(It,Ft,jt,Gt,Xt,Zt){var tr=br();try{return Ar(It)(Ft,jt,Gt,Xt,Zt)}catch(fr){if(_r(tr),fr!==fr+0)throw fr;vr(1,0)}},r:function(It,Ft,jt,Gt,Xt,Zt){var tr=br();try{return Ar(It)(Ft,jt,Gt,Xt,Zt)}catch(fr){if(_r(tr),fr!==fr+0)throw fr;vr(1,0)}},v:function(It,Ft,jt,Gt,Xt,Zt,tr){var fr=br();try{return Ar(It)(Ft,jt,Gt,Xt,Zt,tr)}catch(ar){if(_r(fr),ar!==ar+0)throw ar;vr(1,0)}},K:function(It,Ft,jt,Gt,Xt,Zt,tr,fr){var ar=br();try{return Ar(It)(Ft,jt,Gt,Xt,Zt,tr,fr)}catch(xr){if(_r(ar),xr!==xr+0)throw xr;vr(1,0)}},D:function(It,Ft,jt,Gt,Xt,Zt,tr,fr,ar,xr,Or,Ur){var Br=br();try{return Ar(It)(Ft,jt,Gt,Xt,Zt,tr,fr,ar,xr,Or,Ur)}catch(qt){if(_r(Br),qt!==qt+0)throw qt;vr(1,0)}},X:function(It,Ft,jt,Gt,Xt,Zt,tr,fr){var ar=br();try{return Bn(It,Ft,jt,Gt,Xt,Zt,tr,fr)}catch(xr){if(_r(ar),xr!==xr+0)throw xr;vr(1,0)}},V:function(It,Ft,jt,Gt,Xt,Zt,tr){var fr=br();try{return Mn(It,Ft,jt,Gt,Xt,Zt,tr)}catch(ar){if(_r(fr),ar!==ar+0)throw ar;vr(1,0)}},U:function(It,Ft,jt,Gt,Xt){var Zt=br();try{return Nn(It,Ft,jt,Gt,Xt)}catch(tr){if(_r(Zt),tr!==tr+0)throw tr;vr(1,0)}},Z:function(It,Ft,jt,Gt){var Xt=br();try{return Ln(It,Ft,jt,Gt)}catch(Zt){if(_r(Xt),Zt!==Zt+0)throw Zt;vr(1,0)}},W:function(It){var Ft=br();try{return Rn(It)}catch(jt){if(_r(Ft),jt!==jt+0)throw jt;vr(1,0)}},Y:function(It,Ft){var jt=br();try{return $n(It,Ft)}catch(Gt){if(_r(jt),Gt!==Gt+0)throw Gt;vr(1,0)}},T:function(It,Ft,jt){var Gt=br();try{return On(It,Ft,jt)}catch(Xt){if(_r(Gt),Xt!==Xt+0)throw Xt;vr(1,0)}},f:function(It){var Ft=br();try{Ar(It)()}catch(jt){if(_r(Ft),jt!==jt+0)throw jt;vr(1,0)}},q:function(It,Ft){var jt=br();try{Ar(It)(Ft)}catch(Gt){if(_r(jt),Gt!==Gt+0)throw Gt;vr(1,0)}},h:function(It,Ft,jt){var Gt=br();try{Ar(It)(Ft,jt)}catch(Xt){if(_r(Gt),Xt!==Xt+0)throw Xt;vr(1,0)}},da:function(It,Ft,jt,Gt){var Xt=br();try{Ar(It)(Ft,jt,Gt)}catch(Zt){if(_r(Xt),Zt!==Zt+0)throw Zt;vr(1,0)}},l:function(It,Ft,jt,Gt){var Xt=br();try{Ar(It)(Ft,jt,Gt)}catch(Zt){if(_r(Xt),Zt!==Zt+0)throw Zt;vr(1,0)}},t:function(It,Ft,jt,Gt,Xt){var Zt=br();try{Ar(It)(Ft,jt,Gt,Xt)}catch(tr){if(_r(Zt),tr!==tr+0)throw tr;vr(1,0)}},u:function(It,Ft,jt,Gt,Xt,Zt){var tr=br();try{Ar(It)(Ft,jt,Gt,Xt,Zt)}catch(fr){if(_r(tr),fr!==fr+0)throw fr;vr(1,0)}},x:function(It,Ft,jt,Gt,Xt,Zt,tr){var fr=br();try{Ar(It)(Ft,jt,Gt,Xt,Zt,tr)}catch(ar){if(_r(fr),ar!==ar+0)throw ar;vr(1,0)}},z:function(It,Ft,jt,Gt,Xt,Zt,tr,fr){var ar=br();try{Ar(It)(Ft,jt,Gt,Xt,Zt,tr,fr)}catch(xr){if(_r(ar),xr!==xr+0)throw xr;vr(1,0)}},ga:function(It,Ft,jt,Gt,Xt,Zt,tr,fr,ar){var xr=br();try{Ar(It)(Ft,jt,Gt,Xt,Zt,tr,fr,ar)}catch(Or){if(_r(xr),Or!==Or+0)throw Or;vr(1,0)}},A:function(It,Ft,jt,Gt,Xt,Zt,tr,fr,ar,xr,Or){var Ur=br();try{Ar(It)(Ft,jt,Gt,Xt,Zt,tr,fr,ar,xr,Or)}catch(Br){if(_r(Ur),Br!==Br+0)throw Br;vr(1,0)}},C:function(It,Ft,jt,Gt,Xt,Zt,tr,fr,ar,xr,Or,Ur,Br,qt,Pr,Dr){var Zr=br();try{Ar(It)(Ft,jt,Gt,Xt,Zt,tr,fr,ar,xr,Or,Ur,Br,qt,Pr,Dr)}catch(an){if(_r(Zr),an!==an+0)throw an;vr(1,0)}},aa:function(It,Ft,jt,Gt,Xt,Zt,tr,fr){var ar=br();try{kn(It,Ft,jt,Gt,Xt,Zt,tr,fr)}catch(xr){if(_r(ar),xr!==xr+0)throw xr;vr(1,0)}},_:function(It,Ft,jt,Gt,Xt,Zt,tr,fr,ar,xr,Or,Ur){var Br=br();try{Fn(It,Ft,jt,Gt,Xt,Zt,tr,fr,ar,xr,Or,Ur)}catch(qt){if(_r(Br),qt!==qt+0)throw qt;vr(1,0)}},$:function(It,Ft,jt,Gt,Xt,Zt){var tr=br();try{Dn(It,Ft,jt,Gt,Xt,Zt)}catch(fr){if(_r(tr),fr!==fr+0)throw fr;vr(1,0)}},n:function(It){return It},F:function(It){zr=It},ha:Xn,y:function(It,Ft,jt,Gt){return Xn(It,Ft,jt,Gt)}};(function(){function It(Xt){st.asm=Xt.exports,Et=st.asm.Ka,Ht(),sr=st.asm.ib,er.unshift(st.asm.La),lr--,st.monitorRunDependencies&&st.monitorRunDependencies(lr),lr==0&&hr&&(Xt=hr,hr=null,Xt())}function Ft(Xt){It(Xt.instance)}function jt(Xt){return function(){if(!xt&&(yt||bt)){if(typeof fetch=="function"&&!nr.startsWith("file://"))return fetch(nr,{credentials:"same-origin"}).then(function(Zt){if(!Zt.ok)throw"failed to load wasm binary file at '"+nr+"'";return Zt.arrayBuffer()}).catch(function(){return Fr()});if(dt)return new Promise(function(Zt,tr){dt(nr,function(fr){Zt(new Uint8Array(fr))},tr)})}return Promise.resolve().then(function(){return Fr()})}().then(function(Zt){return WebAssembly.instantiate(Zt,Gt)}).then(function(Zt){return Zt}).then(Xt,function(Zt){Tt("failed to asynchronously prepare wasm: "+Zt),ur(Zt)})}var Gt={a:Yn};if(lr++,st.monitorRunDependencies&&st.monitorRunDependencies(lr),st.instantiateWasm)try{return st.instantiateWasm(Gt,It)}catch(Xt){return Tt("Module.instantiateWasm callback failed with error: "+Xt),!1}(xt||typeof WebAssembly.instantiateStreaming!="function"||mr()||nr.startsWith("file://")||_t||typeof fetch!="function"?jt(Ft):fetch(nr,{credentials:"same-origin"}).then(function(Xt){return WebAssembly.instantiateStreaming(Xt,Gt).then(Ft,function(Zt){return Tt("wasm streaming compile failed: "+Zt),Tt("falling back to ArrayBuffer instantiation"),jt(Ft)})})).catch(ct)})(),st.___wasm_call_ctors=function(){return(st.___wasm_call_ctors=st.asm.La).apply(null,arguments)},st._OrtInit=function(){return(st._OrtInit=st.asm.Ma).apply(null,arguments)},st._OrtCreateSessionOptions=function(){return(st._OrtCreateSessionOptions=st.asm.Na).apply(null,arguments)},st._OrtAppendExecutionProvider=function(){return(st._OrtAppendExecutionProvider=st.asm.Oa).apply(null,arguments)},st._OrtAddSessionConfigEntry=function(){return(st._OrtAddSessionConfigEntry=st.asm.Pa).apply(null,arguments)},st._OrtReleaseSessionOptions=function(){return(st._OrtReleaseSessionOptions=st.asm.Qa).apply(null,arguments)},st._OrtCreateSession=function(){return(st._OrtCreateSession=st.asm.Ra).apply(null,arguments)},st._OrtReleaseSession=function(){return(st._OrtReleaseSession=st.asm.Sa).apply(null,arguments)},st._OrtGetInputCount=function(){return(st._OrtGetInputCount=st.asm.Ta).apply(null,arguments)},st._OrtGetOutputCount=function(){return(st._OrtGetOutputCount=st.asm.Ua).apply(null,arguments)},st._OrtGetInputName=function(){return(st._OrtGetInputName=st.asm.Va).apply(null,arguments)},st._OrtGetOutputName=function(){return(st._OrtGetOutputName=st.asm.Wa).apply(null,arguments)},st._OrtFree=function(){return(st._OrtFree=st.asm.Xa).apply(null,arguments)},st._OrtCreateTensor=function(){return(st._OrtCreateTensor=st.asm.Ya).apply(null,arguments)},st._OrtGetTensorData=function(){return(st._OrtGetTensorData=st.asm.Za).apply(null,arguments)},st._OrtReleaseTensor=function(){return(st._OrtReleaseTensor=st.asm._a).apply(null,arguments)},st._OrtCreateRunOptions=function(){return(st._OrtCreateRunOptions=st.asm.$a).apply(null,arguments)},st._OrtAddRunConfigEntry=function(){return(st._OrtAddRunConfigEntry=st.asm.ab).apply(null,arguments)},st._OrtReleaseRunOptions=function(){return(st._OrtReleaseRunOptions=st.asm.bb).apply(null,arguments)},st._OrtRun=function(){return(st._OrtRun=st.asm.cb).apply(null,arguments)},st._OrtEndProfiling=function(){return(st._OrtEndProfiling=st.asm.db).apply(null,arguments)};var on,Rr=st._malloc=function(){return(Rr=st._malloc=st.asm.eb).apply(null,arguments)},dn=st._free=function(){return(dn=st._free=st.asm.fb).apply(null,arguments)},Cn=st._fflush=function(){return(Cn=st._fflush=st.asm.gb).apply(null,arguments)},hn=st.___funcs_on_exit=function(){return(hn=st.___funcs_on_exit=st.asm.hb).apply(null,arguments)},vr=st._setThrew=function(){return(vr=st._setThrew=st.asm.jb).apply(null,arguments)},br=st.stackSave=function(){return(br=st.stackSave=st.asm.kb).apply(null,arguments)},_r=st.stackRestore=function(){return(_r=st.stackRestore=st.asm.lb).apply(null,arguments)},Pn=st.stackAlloc=function(){return(Pn=st.stackAlloc=st.asm.mb).apply(null,arguments)},fn=st.___cxa_can_catch=function(){return(fn=st.___cxa_can_catch=st.asm.nb).apply(null,arguments)},In=st.___cxa_is_pointer_type=function(){return(In=st.___cxa_is_pointer_type=st.asm.ob).apply(null,arguments)},Rn=st.dynCall_j=function(){return(Rn=st.dynCall_j=st.asm.pb).apply(null,arguments)},Mn=st.dynCall_iiiiij=function(){return(Mn=st.dynCall_iiiiij=st.asm.qb).apply(null,arguments)},On=st.dynCall_jii=function(){return(On=st.dynCall_jii=st.asm.rb).apply(null,arguments)},kn=st.dynCall_viiiiij=function(){return(kn=st.dynCall_viiiiij=st.asm.sb).apply(null,arguments)},Dn=st.dynCall_vjji=function(){return(Dn=st.dynCall_vjji=st.asm.tb).apply(null,arguments)},Fn=st.dynCall_viiijjjii=function(){return(Fn=st.dynCall_viiijjjii=st.asm.ub).apply(null,arguments)},Ln=st.dynCall_iij=function(){return(Ln=st.dynCall_iij=st.asm.vb).apply(null,arguments)},$n=st.dynCall_ji=function(){return($n=st.dynCall_ji=st.asm.wb).apply(null,arguments)},Bn=st.dynCall_iiiiiij=function(){return(Bn=st.dynCall_iiiiiij=st.asm.xb).apply(null,arguments)},Nn=st.dynCall_iiij=function(){return(Nn=st.dynCall_iiij=st.asm.yb).apply(null,arguments)};function Un(){function It(){if(!on&&(on=!0,st.calledRun=!0,!kt)){if(Nr(er),at(st),st.onRuntimeInitialized&&st.onRuntimeInitialized(),st.postRun)for(typeof st.postRun=="function"&&(st.postRun=[st.postRun]);st.postRun.length;){var Ft=st.postRun.shift();gr.unshift(Ft)}Nr(gr)}}if(!(0<lr)){if(st.preRun)for(typeof st.preRun=="function"&&(st.preRun=[st.preRun]);st.preRun.length;)Jt();Nr(ir),0<lr||(st.setStatus?(st.setStatus("Running..."),setTimeout(function(){setTimeout(function(){st.setStatus("")},1),It()},1)):It())}}if(st.UTF8ToString=zt,st.stringToUTF8=function(It,Ft,jt){return Ut(It,Pt,Ft,jt)},st.lengthBytesUTF8=Vt,st.stackSave=br,st.stackRestore=_r,st.stackAlloc=Pn,hr=function It(){on||Un(),on||(hr=It)},st.preInit)for(typeof st.preInit=="function"&&(st.preInit=[st.preInit]);0<st.preInit.length;)st.preInit.pop()();return Un(),it.ready});_e.exports=rt},4537:_e=>{_e.exports=function(_,et){for(var tt=new Array(arguments.length-1),rt=0,it=2,st=!0;it<arguments.length;)tt[rt++]=arguments[it++];return new Promise(function(at,ct){tt[rt]=function(ut){if(st)if(st=!1,ut)ct(ut);else{for(var dt=new Array(arguments.length-1),ot=0;ot<dt.length;)dt[ot++]=arguments[ot];at.apply(null,dt)}};try{_.apply(et||null,tt)}catch(ut){st&&(st=!1,ct(ut))}})}},7419:(_e,_)=>{var et=_;et.length=function(at){var ct=at.length;if(!ct)return 0;for(var ut=0;--ct%4>1&&at.charAt(ct)==="=";)++ut;return Math.ceil(3*at.length)/4-ut};for(var tt=new Array(64),rt=new Array(123),it=0;it<64;)rt[tt[it]=it<26?it+65:it<52?it+71:it<62?it-4:it-59|43]=it++;et.encode=function(at,ct,ut){for(var dt,ot=null,nt=[],lt=0,ht=0;ct<ut;){var ft=at[ct++];switch(ht){case 0:nt[lt++]=tt[ft>>2],dt=(3&ft)<<4,ht=1;break;case 1:nt[lt++]=tt[dt|ft>>4],dt=(15&ft)<<2,ht=2;break;case 2:nt[lt++]=tt[dt|ft>>6],nt[lt++]=tt[63&ft],ht=0}lt>8191&&((ot||(ot=[])).push(String.fromCharCode.apply(String,nt)),lt=0)}return ht&&(nt[lt++]=tt[dt],nt[lt++]=61,ht===1&&(nt[lt++]=61)),ot?(lt&&ot.push(String.fromCharCode.apply(String,nt.slice(0,lt))),ot.join("")):String.fromCharCode.apply(String,nt.slice(0,lt))};var st="invalid encoding";et.decode=function(at,ct,ut){for(var dt,ot=ut,nt=0,lt=0;lt<at.length;){var ht=at.charCodeAt(lt++);if(ht===61&&nt>1)break;if((ht=rt[ht])===void 0)throw Error(st);switch(nt){case 0:dt=ht,nt=1;break;case 1:ct[ut++]=dt<<2|(48&ht)>>4,dt=ht,nt=2;break;case 2:ct[ut++]=(15&dt)<<4|(60&ht)>>2,dt=ht,nt=3;break;case 3:ct[ut++]=(3&dt)<<6|ht,nt=0}}if(nt===1)throw Error(st);return ut-ot},et.test=function(at){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(at)}},9211:_e=>{function _(){this._listeners={}}_e.exports=_,_.prototype.on=function(et,tt,rt){return(this._listeners[et]||(this._listeners[et]=[])).push({fn:tt,ctx:rt||this}),this},_.prototype.off=function(et,tt){if(et===void 0)this._listeners={};else if(tt===void 0)this._listeners[et]=[];else for(var rt=this._listeners[et],it=0;it<rt.length;)rt[it].fn===tt?rt.splice(it,1):++it;return this},_.prototype.emit=function(et){var tt=this._listeners[et];if(tt){for(var rt=[],it=1;it<arguments.length;)rt.push(arguments[it++]);for(it=0;it<tt.length;)tt[it].fn.apply(tt[it++].ctx,rt)}return this}},945:_e=>{function _(st){return typeof Float32Array<"u"?function(){var at=new Float32Array([-0]),ct=new Uint8Array(at.buffer),ut=ct[3]===128;function dt(ht,ft,gt){at[0]=ht,ft[gt]=ct[0],ft[gt+1]=ct[1],ft[gt+2]=ct[2],ft[gt+3]=ct[3]}function ot(ht,ft,gt){at[0]=ht,ft[gt]=ct[3],ft[gt+1]=ct[2],ft[gt+2]=ct[1],ft[gt+3]=ct[0]}function nt(ht,ft){return ct[0]=ht[ft],ct[1]=ht[ft+1],ct[2]=ht[ft+2],ct[3]=ht[ft+3],at[0]}function lt(ht,ft){return ct[3]=ht[ft],ct[2]=ht[ft+1],ct[1]=ht[ft+2],ct[0]=ht[ft+3],at[0]}st.writeFloatLE=ut?dt:ot,st.writeFloatBE=ut?ot:dt,st.readFloatLE=ut?nt:lt,st.readFloatBE=ut?lt:nt}():function(){function at(ut,dt,ot,nt){var lt=dt<0?1:0;if(lt&&(dt=-dt),dt===0)ut(1/dt>0?0:2147483648,ot,nt);else if(isNaN(dt))ut(2143289344,ot,nt);else if(dt>34028234663852886e22)ut((lt<<31|2139095040)>>>0,ot,nt);else if(dt<11754943508222875e-54)ut((lt<<31|Math.round(dt/1401298464324817e-60))>>>0,ot,nt);else{var ht=Math.floor(Math.log(dt)/Math.LN2);ut((lt<<31|ht+127<<23|8388607&Math.round(dt*Math.pow(2,-ht)*8388608))>>>0,ot,nt)}}function ct(ut,dt,ot){var nt=ut(dt,ot),lt=2*(nt>>31)+1,ht=nt>>>23&255,ft=8388607&nt;return ht===255?ft?NaN:lt*(1/0):ht===0?1401298464324817e-60*lt*ft:lt*Math.pow(2,ht-150)*(ft+8388608)}st.writeFloatLE=at.bind(null,et),st.writeFloatBE=at.bind(null,tt),st.readFloatLE=ct.bind(null,rt),st.readFloatBE=ct.bind(null,it)}(),typeof Float64Array<"u"?function(){var at=new Float64Array([-0]),ct=new Uint8Array(at.buffer),ut=ct[7]===128;function dt(ht,ft,gt){at[0]=ht,ft[gt]=ct[0],ft[gt+1]=ct[1],ft[gt+2]=ct[2],ft[gt+3]=ct[3],ft[gt+4]=ct[4],ft[gt+5]=ct[5],ft[gt+6]=ct[6],ft[gt+7]=ct[7]}function ot(ht,ft,gt){at[0]=ht,ft[gt]=ct[7],ft[gt+1]=ct[6],ft[gt+2]=ct[5],ft[gt+3]=ct[4],ft[gt+4]=ct[3],ft[gt+5]=ct[2],ft[gt+6]=ct[1],ft[gt+7]=ct[0]}function nt(ht,ft){return ct[0]=ht[ft],ct[1]=ht[ft+1],ct[2]=ht[ft+2],ct[3]=ht[ft+3],ct[4]=ht[ft+4],ct[5]=ht[ft+5],ct[6]=ht[ft+6],ct[7]=ht[ft+7],at[0]}function lt(ht,ft){return ct[7]=ht[ft],ct[6]=ht[ft+1],ct[5]=ht[ft+2],ct[4]=ht[ft+3],ct[3]=ht[ft+4],ct[2]=ht[ft+5],ct[1]=ht[ft+6],ct[0]=ht[ft+7],at[0]}st.writeDoubleLE=ut?dt:ot,st.writeDoubleBE=ut?ot:dt,st.readDoubleLE=ut?nt:lt,st.readDoubleBE=ut?lt:nt}():function(){function at(ut,dt,ot,nt,lt,ht){var ft=nt<0?1:0;if(ft&&(nt=-nt),nt===0)ut(0,lt,ht+dt),ut(1/nt>0?0:2147483648,lt,ht+ot);else if(isNaN(nt))ut(0,lt,ht+dt),ut(2146959360,lt,ht+ot);else if(nt>17976931348623157e292)ut(0,lt,ht+dt),ut((ft<<31|2146435072)>>>0,lt,ht+ot);else{var gt;if(nt<22250738585072014e-324)ut((gt=nt/5e-324)>>>0,lt,ht+dt),ut((ft<<31|gt/4294967296)>>>0,lt,ht+ot);else{var mt=Math.floor(Math.log(nt)/Math.LN2);mt===1024&&(mt=1023),ut(4503599627370496*(gt=nt*Math.pow(2,-mt))>>>0,lt,ht+dt),ut((ft<<31|mt+1023<<20|1048576*gt&1048575)>>>0,lt,ht+ot)}}}function ct(ut,dt,ot,nt,lt){var ht=ut(nt,lt+dt),ft=ut(nt,lt+ot),gt=2*(ft>>31)+1,mt=ft>>>20&2047,yt=4294967296*(1048575&ft)+ht;return mt===2047?yt?NaN:gt*(1/0):mt===0?5e-324*gt*yt:gt*Math.pow(2,mt-1075)*(yt+4503599627370496)}st.writeDoubleLE=at.bind(null,et,0,4),st.writeDoubleBE=at.bind(null,tt,4,0),st.readDoubleLE=ct.bind(null,rt,0,4),st.readDoubleBE=ct.bind(null,it,4,0)}(),st}function et(st,at,ct){at[ct]=255&st,at[ct+1]=st>>>8&255,at[ct+2]=st>>>16&255,at[ct+3]=st>>>24}function tt(st,at,ct){at[ct]=st>>>24,at[ct+1]=st>>>16&255,at[ct+2]=st>>>8&255,at[ct+3]=255&st}function rt(st,at){return(st[at]|st[at+1]<<8|st[at+2]<<16|st[at+3]<<24)>>>0}function it(st,at){return(st[at]<<24|st[at+1]<<16|st[at+2]<<8|st[at+3])>>>0}_e.exports=_(_)},7199:module=>{function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(_e){}return null}module.exports=inquire},6662:_e=>{_e.exports=function(_,et,tt){var rt=tt||8192,it=rt>>>1,st=null,at=rt;return function(ct){if(ct<1||ct>it)return _(ct);at+ct>rt&&(st=_(rt),at=0);var ut=et.call(st,at,at+=ct);return 7&at&&(at=1+(7|at)),ut}}},4997:(_e,_)=>{var et=_;et.length=function(tt){for(var rt=0,it=0,st=0;st<tt.length;++st)(it=tt.charCodeAt(st))<128?rt+=1:it<2048?rt+=2:(64512&it)==55296&&(64512&tt.charCodeAt(st+1))==56320?(++st,rt+=4):rt+=3;return rt},et.read=function(tt,rt,it){if(it-rt<1)return"";for(var st,at=null,ct=[],ut=0;rt<it;)(st=tt[rt++])<128?ct[ut++]=st:st>191&&st<224?ct[ut++]=(31&st)<<6|63&tt[rt++]:st>239&&st<365?(st=((7&st)<<18|(63&tt[rt++])<<12|(63&tt[rt++])<<6|63&tt[rt++])-65536,ct[ut++]=55296+(st>>10),ct[ut++]=56320+(1023&st)):ct[ut++]=(15&st)<<12|(63&tt[rt++])<<6|63&tt[rt++],ut>8191&&((at||(at=[])).push(String.fromCharCode.apply(String,ct)),ut=0);return at?(ut&&at.push(String.fromCharCode.apply(String,ct.slice(0,ut))),at.join("")):String.fromCharCode.apply(String,ct.slice(0,ut))},et.write=function(tt,rt,it){for(var st,at,ct=it,ut=0;ut<tt.length;++ut)(st=tt.charCodeAt(ut))<128?rt[it++]=st:st<2048?(rt[it++]=st>>6|192,rt[it++]=63&st|128):(64512&st)==55296&&(64512&(at=tt.charCodeAt(ut+1)))==56320?(st=65536+((1023&st)<<10)+(1023&at),++ut,rt[it++]=st>>18|240,rt[it++]=st>>12&63|128,rt[it++]=st>>6&63|128,rt[it++]=63&st|128):(rt[it++]=st>>12|224,rt[it++]=st>>6&63|128,rt[it++]=63&st|128);return it-ct}},3442:(_e,_)=>{_.__esModule=!0;var et=function(){function tt(rt){if(!rt)throw new TypeError("Invalid argument; `value` has no value.");this.value=tt.EMPTY,rt&&tt.isGuid(rt)&&(this.value=rt)}return tt.isGuid=function(rt){var it=rt.toString();return rt&&(rt instanceof tt||tt.validator.test(it))},tt.create=function(){return new tt([tt.gen(2),tt.gen(1),tt.gen(1),tt.gen(1),tt.gen(3)].join("-"))},tt.createEmpty=function(){return new tt("emptyguid")},tt.parse=function(rt){return new tt(rt)},tt.raw=function(){return[tt.gen(2),tt.gen(1),tt.gen(1),tt.gen(1),tt.gen(3)].join("-")},tt.gen=function(rt){for(var it="",st=0;st<rt;st++)it+=(65536*(1+Math.random())|0).toString(16).substring(1);return it},tt.prototype.equals=function(rt){return tt.isGuid(rt)&&this.value===rt.toString()},tt.prototype.isEmpty=function(){return this.value===tt.EMPTY},tt.prototype.toString=function(){return this.value},tt.prototype.toJSON=function(){return{value:this.value}},tt.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),tt.EMPTY="00000000-0000-0000-0000-000000000000",tt}();_.Guid=et},3720:_e=>{_e.exports=et;var _=null;try{_=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function et(St,Et,Ot){this.low=0|St,this.high=0|Et,this.unsigned=!!Ot}function tt(St){return(St&&St.__isLong__)===!0}et.prototype.__isLong__,Object.defineProperty(et.prototype,"__isLong__",{value:!0}),et.isLong=tt;var rt={},it={};function st(St,Et){var Ot,Rt,Pt;return Et?(Pt=0<=(St>>>=0)&&St<256)&&(Rt=it[St])?Rt:(Ot=ct(St,(0|St)<0?-1:0,!0),Pt&&(it[St]=Ot),Ot):(Pt=-128<=(St|=0)&&St<128)&&(Rt=rt[St])?Rt:(Ot=ct(St,St<0?-1:0,!1),Pt&&(rt[St]=Ot),Ot)}function at(St,Et){if(isNaN(St))return Et?mt:gt;if(Et){if(St<0)return mt;if(St>=lt)return xt}else{if(St<=-9223372036854776e3)return wt;if(St+1>=ht)return vt}return St<0?at(-St,Et).neg():ct(St%nt|0,St/nt|0,Et)}function ct(St,Et,Ot){return new et(St,Et,Ot)}et.fromInt=st,et.fromNumber=at,et.fromBits=ct;var ut=Math.pow;function dt(St,Et,Ot){if(St.length===0)throw Error("empty string");if(St==="NaN"||St==="Infinity"||St==="+Infinity"||St==="-Infinity")return gt;if(typeof Et=="number"?(Ot=Et,Et=!1):Et=!!Et,(Ot=Ot||10)<2||36<Ot)throw RangeError("radix");var Rt;if((Rt=St.indexOf("-"))>0)throw Error("interior hyphen");if(Rt===0)return dt(St.substring(1),Et,Ot).neg();for(var Pt=at(ut(Ot,8)),Mt=gt,$t=0;$t<St.length;$t+=8){var kt=Math.min(8,St.length-$t),Lt=parseInt(St.substring($t,$t+kt),Ot);if(kt<8){var Nt=at(ut(Ot,kt));Mt=Mt.mul(Nt).add(at(Lt))}else Mt=(Mt=Mt.mul(Pt)).add(at(Lt))}return Mt.unsigned=Et,Mt}function ot(St,Et){return typeof St=="number"?at(St,Et):typeof St=="string"?dt(St,Et):ct(St.low,St.high,typeof Et=="boolean"?Et:St.unsigned)}et.fromString=dt,et.fromValue=ot;var nt=4294967296,lt=nt*nt,ht=lt/2,ft=st(1<<24),gt=st(0);et.ZERO=gt;var mt=st(0,!0);et.UZERO=mt;var yt=st(1);et.ONE=yt;var bt=st(1,!0);et.UONE=bt;var _t=st(-1);et.NEG_ONE=_t;var vt=ct(-1,2147483647,!1);et.MAX_VALUE=vt;var xt=ct(-1,-1,!0);et.MAX_UNSIGNED_VALUE=xt;var wt=ct(0,-2147483648,!1);et.MIN_VALUE=wt;var Tt=et.prototype;Tt.toInt=function(){return this.unsigned?this.low>>>0:this.low},Tt.toNumber=function(){return this.unsigned?(this.high>>>0)*nt+(this.low>>>0):this.high*nt+(this.low>>>0)},Tt.toString=function(St){if((St=St||10)<2||36<St)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(wt)){var Et=at(St),Ot=this.div(Et),Rt=Ot.mul(Et).sub(this);return Ot.toString(St)+Rt.toInt().toString(St)}return"-"+this.neg().toString(St)}for(var Pt=at(ut(St,6),this.unsigned),Mt=this,$t="";;){var kt=Mt.div(Pt),Lt=(Mt.sub(kt.mul(Pt)).toInt()>>>0).toString(St);if((Mt=kt).isZero())return Lt+$t;for(;Lt.length<6;)Lt="0"+Lt;$t=""+Lt+$t}},Tt.getHighBits=function(){return this.high},Tt.getHighBitsUnsigned=function(){return this.high>>>0},Tt.getLowBits=function(){return this.low},Tt.getLowBitsUnsigned=function(){return this.low>>>0},Tt.getNumBitsAbs=function(){if(this.isNegative())return this.eq(wt)?64:this.neg().getNumBitsAbs();for(var St=this.high!=0?this.high:this.low,Et=31;Et>0&&!(St&1<<Et);Et--);return this.high!=0?Et+33:Et+1},Tt.isZero=function(){return this.high===0&&this.low===0},Tt.eqz=Tt.isZero,Tt.isNegative=function(){return!this.unsigned&&this.high<0},Tt.isPositive=function(){return this.unsigned||this.high>=0},Tt.isOdd=function(){return(1&this.low)==1},Tt.isEven=function(){return(1&this.low)==0},Tt.equals=function(St){return tt(St)||(St=ot(St)),(this.unsigned===St.unsigned||this.high>>>31!=1||St.high>>>31!=1)&&this.high===St.high&&this.low===St.low},Tt.eq=Tt.equals,Tt.notEquals=function(St){return!this.eq(St)},Tt.neq=Tt.notEquals,Tt.ne=Tt.notEquals,Tt.lessThan=function(St){return this.comp(St)<0},Tt.lt=Tt.lessThan,Tt.lessThanOrEqual=function(St){return this.comp(St)<=0},Tt.lte=Tt.lessThanOrEqual,Tt.le=Tt.lessThanOrEqual,Tt.greaterThan=function(St){return this.comp(St)>0},Tt.gt=Tt.greaterThan,Tt.greaterThanOrEqual=function(St){return this.comp(St)>=0},Tt.gte=Tt.greaterThanOrEqual,Tt.ge=Tt.greaterThanOrEqual,Tt.compare=function(St){if(tt(St)||(St=ot(St)),this.eq(St))return 0;var Et=this.isNegative(),Ot=St.isNegative();return Et&&!Ot?-1:!Et&&Ot?1:this.unsigned?St.high>>>0>this.high>>>0||St.high===this.high&&St.low>>>0>this.low>>>0?-1:1:this.sub(St).isNegative()?-1:1},Tt.comp=Tt.compare,Tt.negate=function(){return!this.unsigned&&this.eq(wt)?wt:this.not().add(yt)},Tt.neg=Tt.negate,Tt.add=function(St){tt(St)||(St=ot(St));var Et=this.high>>>16,Ot=65535&this.high,Rt=this.low>>>16,Pt=65535&this.low,Mt=St.high>>>16,$t=65535&St.high,kt=St.low>>>16,Lt=0,Nt=0,zt=0,Ut=0;return zt+=(Ut+=Pt+(65535&St.low))>>>16,Nt+=(zt+=Rt+kt)>>>16,Lt+=(Nt+=Ot+$t)>>>16,Lt+=Et+Mt,ct((zt&=65535)<<16|(Ut&=65535),(Lt&=65535)<<16|(Nt&=65535),this.unsigned)},Tt.subtract=function(St){return tt(St)||(St=ot(St)),this.add(St.neg())},Tt.sub=Tt.subtract,Tt.multiply=function(St){if(this.isZero())return gt;if(tt(St)||(St=ot(St)),_)return ct(_.mul(this.low,this.high,St.low,St.high),_.get_high(),this.unsigned);if(St.isZero())return gt;if(this.eq(wt))return St.isOdd()?wt:gt;if(St.eq(wt))return this.isOdd()?wt:gt;if(this.isNegative())return St.isNegative()?this.neg().mul(St.neg()):this.neg().mul(St).neg();if(St.isNegative())return this.mul(St.neg()).neg();if(this.lt(ft)&&St.lt(ft))return at(this.toNumber()*St.toNumber(),this.unsigned);var Et=this.high>>>16,Ot=65535&this.high,Rt=this.low>>>16,Pt=65535&this.low,Mt=St.high>>>16,$t=65535&St.high,kt=St.low>>>16,Lt=65535&St.low,Nt=0,zt=0,Ut=0,Vt=0;return Ut+=(Vt+=Pt*Lt)>>>16,zt+=(Ut+=Rt*Lt)>>>16,Ut&=65535,zt+=(Ut+=Pt*kt)>>>16,Nt+=(zt+=Ot*Lt)>>>16,zt&=65535,Nt+=(zt+=Rt*kt)>>>16,zt&=65535,Nt+=(zt+=Pt*$t)>>>16,Nt+=Et*Lt+Ot*kt+Rt*$t+Pt*Mt,ct((Ut&=65535)<<16|(Vt&=65535),(Nt&=65535)<<16|(zt&=65535),this.unsigned)},Tt.mul=Tt.multiply,Tt.divide=function(St){if(tt(St)||(St=ot(St)),St.isZero())throw Error("division by zero");var Et,Ot,Rt;if(_)return this.unsigned||this.high!==-2147483648||St.low!==-1||St.high!==-1?ct((this.unsigned?_.div_u:_.div_s)(this.low,this.high,St.low,St.high),_.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?mt:gt;if(this.unsigned){if(St.unsigned||(St=St.toUnsigned()),St.gt(this))return mt;if(St.gt(this.shru(1)))return bt;Rt=mt}else{if(this.eq(wt))return St.eq(yt)||St.eq(_t)?wt:St.eq(wt)?yt:(Et=this.shr(1).div(St).shl(1)).eq(gt)?St.isNegative()?yt:_t:(Ot=this.sub(St.mul(Et)),Rt=Et.add(Ot.div(St)));if(St.eq(wt))return this.unsigned?mt:gt;if(this.isNegative())return St.isNegative()?this.neg().div(St.neg()):this.neg().div(St).neg();if(St.isNegative())return this.div(St.neg()).neg();Rt=gt}for(Ot=this;Ot.gte(St);){Et=Math.max(1,Math.floor(Ot.toNumber()/St.toNumber()));for(var Pt=Math.ceil(Math.log(Et)/Math.LN2),Mt=Pt<=48?1:ut(2,Pt-48),$t=at(Et),kt=$t.mul(St);kt.isNegative()||kt.gt(Ot);)kt=($t=at(Et-=Mt,this.unsigned)).mul(St);$t.isZero()&&($t=yt),Rt=Rt.add($t),Ot=Ot.sub(kt)}return Rt},Tt.div=Tt.divide,Tt.modulo=function(St){return tt(St)||(St=ot(St)),_?ct((this.unsigned?_.rem_u:_.rem_s)(this.low,this.high,St.low,St.high),_.get_high(),this.unsigned):this.sub(this.div(St).mul(St))},Tt.mod=Tt.modulo,Tt.rem=Tt.modulo,Tt.not=function(){return ct(~this.low,~this.high,this.unsigned)},Tt.and=function(St){return tt(St)||(St=ot(St)),ct(this.low&St.low,this.high&St.high,this.unsigned)},Tt.or=function(St){return tt(St)||(St=ot(St)),ct(this.low|St.low,this.high|St.high,this.unsigned)},Tt.xor=function(St){return tt(St)||(St=ot(St)),ct(this.low^St.low,this.high^St.high,this.unsigned)},Tt.shiftLeft=function(St){return tt(St)&&(St=St.toInt()),(St&=63)==0?this:St<32?ct(this.low<<St,this.high<<St|this.low>>>32-St,this.unsigned):ct(0,this.low<<St-32,this.unsigned)},Tt.shl=Tt.shiftLeft,Tt.shiftRight=function(St){return tt(St)&&(St=St.toInt()),(St&=63)==0?this:St<32?ct(this.low>>>St|this.high<<32-St,this.high>>St,this.unsigned):ct(this.high>>St-32,this.high>=0?0:-1,this.unsigned)},Tt.shr=Tt.shiftRight,Tt.shiftRightUnsigned=function(St){if(tt(St)&&(St=St.toInt()),(St&=63)==0)return this;var Et=this.high;return St<32?ct(this.low>>>St|Et<<32-St,Et>>>St,this.unsigned):ct(St===32?Et:Et>>>St-32,0,this.unsigned)},Tt.shru=Tt.shiftRightUnsigned,Tt.shr_u=Tt.shiftRightUnsigned,Tt.toSigned=function(){return this.unsigned?ct(this.low,this.high,!1):this},Tt.toUnsigned=function(){return this.unsigned?this:ct(this.low,this.high,!0)},Tt.toBytes=function(St){return St?this.toBytesLE():this.toBytesBE()},Tt.toBytesLE=function(){var St=this.high,Et=this.low;return[255&Et,Et>>>8&255,Et>>>16&255,Et>>>24,255&St,St>>>8&255,St>>>16&255,St>>>24]},Tt.toBytesBE=function(){var St=this.high,Et=this.low;return[St>>>24,St>>>16&255,St>>>8&255,255&St,Et>>>24,Et>>>16&255,Et>>>8&255,255&Et]},et.fromBytes=function(St,Et,Ot){return Ot?et.fromBytesLE(St,Et):et.fromBytesBE(St,Et)},et.fromBytesLE=function(St,Et){return new et(St[0]|St[1]<<8|St[2]<<16|St[3]<<24,St[4]|St[5]<<8|St[6]<<16|St[7]<<24,Et)},et.fromBytesBE=function(St,Et){return new et(St[4]<<24|St[5]<<16|St[6]<<8|St[7],St[0]<<24|St[1]<<16|St[2]<<8|St[3],Et)}},1446:(_e,_,et)=>{var tt,rt,it,st=et(2100),at=st.Reader,ct=st.Writer,ut=st.util,dt=st.roots.default||(st.roots.default={});dt.onnx=((it={}).Version=(tt={},(rt=Object.create(tt))[tt[0]="_START_VERSION"]=0,rt[tt[1]="IR_VERSION_2017_10_10"]=1,rt[tt[2]="IR_VERSION_2017_10_30"]=2,rt[tt[3]="IR_VERSION_2017_11_3"]=3,rt[tt[4]="IR_VERSION_2019_1_22"]=4,rt[tt[5]="IR_VERSION"]=5,rt),it.AttributeProto=function(){function ot(nt){if(this.floats=[],this.ints=[],this.strings=[],this.tensors=[],this.graphs=[],nt)for(var lt=Object.keys(nt),ht=0;ht<lt.length;++ht)nt[lt[ht]]!=null&&(this[lt[ht]]=nt[lt[ht]])}return ot.prototype.name="",ot.prototype.refAttrName="",ot.prototype.docString="",ot.prototype.type=0,ot.prototype.f=0,ot.prototype.i=ut.Long?ut.Long.fromBits(0,0,!1):0,ot.prototype.s=ut.newBuffer([]),ot.prototype.t=null,ot.prototype.g=null,ot.prototype.floats=ut.emptyArray,ot.prototype.ints=ut.emptyArray,ot.prototype.strings=ut.emptyArray,ot.prototype.tensors=ut.emptyArray,ot.prototype.graphs=ut.emptyArray,ot.create=function(nt){return new ot(nt)},ot.encode=function(nt,lt){if(lt||(lt=ct.create()),nt.name!=null&&nt.hasOwnProperty("name")&&lt.uint32(10).string(nt.name),nt.f!=null&&nt.hasOwnProperty("f")&&lt.uint32(21).float(nt.f),nt.i!=null&&nt.hasOwnProperty("i")&&lt.uint32(24).int64(nt.i),nt.s!=null&&nt.hasOwnProperty("s")&&lt.uint32(34).bytes(nt.s),nt.t!=null&&nt.hasOwnProperty("t")&&dt.onnx.TensorProto.encode(nt.t,lt.uint32(42).fork()).ldelim(),nt.g!=null&&nt.hasOwnProperty("g")&&dt.onnx.GraphProto.encode(nt.g,lt.uint32(50).fork()).ldelim(),nt.floats!=null&&nt.floats.length){lt.uint32(58).fork();for(var ht=0;ht<nt.floats.length;++ht)lt.float(nt.floats[ht]);lt.ldelim()}if(nt.ints!=null&&nt.ints.length){for(lt.uint32(66).fork(),ht=0;ht<nt.ints.length;++ht)lt.int64(nt.ints[ht]);lt.ldelim()}if(nt.strings!=null&&nt.strings.length)for(ht=0;ht<nt.strings.length;++ht)lt.uint32(74).bytes(nt.strings[ht]);if(nt.tensors!=null&&nt.tensors.length)for(ht=0;ht<nt.tensors.length;++ht)dt.onnx.TensorProto.encode(nt.tensors[ht],lt.uint32(82).fork()).ldelim();if(nt.graphs!=null&&nt.graphs.length)for(ht=0;ht<nt.graphs.length;++ht)dt.onnx.GraphProto.encode(nt.graphs[ht],lt.uint32(90).fork()).ldelim();return nt.docString!=null&&nt.hasOwnProperty("docString")&&lt.uint32(106).string(nt.docString),nt.type!=null&&nt.hasOwnProperty("type")&&lt.uint32(160).int32(nt.type),nt.refAttrName!=null&&nt.hasOwnProperty("refAttrName")&&lt.uint32(170).string(nt.refAttrName),lt},ot.encodeDelimited=function(nt,lt){return this.encode(nt,lt).ldelim()},ot.decode=function(nt,lt){nt instanceof at||(nt=at.create(nt));for(var ht=lt===void 0?nt.len:nt.pos+lt,ft=new dt.onnx.AttributeProto;nt.pos<ht;){var gt=nt.uint32();switch(gt>>>3){case 1:ft.name=nt.string();break;case 21:ft.refAttrName=nt.string();break;case 13:ft.docString=nt.string();break;case 20:ft.type=nt.int32();break;case 2:ft.f=nt.float();break;case 3:ft.i=nt.int64();break;case 4:ft.s=nt.bytes();break;case 5:ft.t=dt.onnx.TensorProto.decode(nt,nt.uint32());break;case 6:ft.g=dt.onnx.GraphProto.decode(nt,nt.uint32());break;case 7:if(ft.floats&&ft.floats.length||(ft.floats=[]),(7&gt)==2)for(var mt=nt.uint32()+nt.pos;nt.pos<mt;)ft.floats.push(nt.float());else ft.floats.push(nt.float());break;case 8:if(ft.ints&&ft.ints.length||(ft.ints=[]),(7&gt)==2)for(mt=nt.uint32()+nt.pos;nt.pos<mt;)ft.ints.push(nt.int64());else ft.ints.push(nt.int64());break;case 9:ft.strings&&ft.strings.length||(ft.strings=[]),ft.strings.push(nt.bytes());break;case 10:ft.tensors&&ft.tensors.length||(ft.tensors=[]),ft.tensors.push(dt.onnx.TensorProto.decode(nt,nt.uint32()));break;case 11:ft.graphs&&ft.graphs.length||(ft.graphs=[]),ft.graphs.push(dt.onnx.GraphProto.decode(nt,nt.uint32()));break;default:nt.skipType(7&gt)}}return ft},ot.decodeDelimited=function(nt){return nt instanceof at||(nt=new at(nt)),this.decode(nt,nt.uint32())},ot.verify=function(nt){if(typeof nt!="object"||nt===null)return"object expected";if(nt.name!=null&&nt.hasOwnProperty("name")&&!ut.isString(nt.name))return"name: string expected";if(nt.refAttrName!=null&&nt.hasOwnProperty("refAttrName")&&!ut.isString(nt.refAttrName))return"refAttrName: string expected";if(nt.docString!=null&&nt.hasOwnProperty("docString")&&!ut.isString(nt.docString))return"docString: string expected";if(nt.type!=null&&nt.hasOwnProperty("type"))switch(nt.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:}if(nt.f!=null&&nt.hasOwnProperty("f")&&typeof nt.f!="number")return"f: number expected";if(nt.i!=null&&nt.hasOwnProperty("i")&&!(ut.isInteger(nt.i)||nt.i&&ut.isInteger(nt.i.low)&&ut.isInteger(nt.i.high)))return"i: integer|Long expected";if(nt.s!=null&&nt.hasOwnProperty("s")&&!(nt.s&&typeof nt.s.length=="number"||ut.isString(nt.s)))return"s: buffer expected";if(nt.t!=null&&nt.hasOwnProperty("t")&&(ht=dt.onnx.TensorProto.verify(nt.t)))return"t."+ht;if(nt.g!=null&&nt.hasOwnProperty("g")&&(ht=dt.onnx.GraphProto.verify(nt.g)))return"g."+ht;if(nt.floats!=null&&nt.hasOwnProperty("floats")){if(!Array.isArray(nt.floats))return"floats: array expected";for(var lt=0;lt<nt.floats.length;++lt)if(typeof nt.floats[lt]!="number")return"floats: number[] expected"}if(nt.ints!=null&&nt.hasOwnProperty("ints")){if(!Array.isArray(nt.ints))return"ints: array expected";for(lt=0;lt<nt.ints.length;++lt)if(!(ut.isInteger(nt.ints[lt])||nt.ints[lt]&&ut.isInteger(nt.ints[lt].low)&&ut.isInteger(nt.ints[lt].high)))return"ints: integer|Long[] expected"}if(nt.strings!=null&&nt.hasOwnProperty("strings")){if(!Array.isArray(nt.strings))return"strings: array expected";for(lt=0;lt<nt.strings.length;++lt)if(!(nt.strings[lt]&&typeof nt.strings[lt].length=="number"||ut.isString(nt.strings[lt])))return"strings: buffer[] expected"}if(nt.tensors!=null&&nt.hasOwnProperty("tensors")){if(!Array.isArray(nt.tensors))return"tensors: array expected";for(lt=0;lt<nt.tensors.length;++lt)if(ht=dt.onnx.TensorProto.verify(nt.tensors[lt]))return"tensors."+ht}if(nt.graphs!=null&&nt.hasOwnProperty("graphs")){if(!Array.isArray(nt.graphs))return"graphs: array expected";for(lt=0;lt<nt.graphs.length;++lt){var ht;if(ht=dt.onnx.GraphProto.verify(nt.graphs[lt]))return"graphs."+ht}}return null},ot.fromObject=function(nt){if(nt instanceof dt.onnx.AttributeProto)return nt;var lt=new dt.onnx.AttributeProto;switch(nt.name!=null&&(lt.name=String(nt.name)),nt.refAttrName!=null&&(lt.refAttrName=String(nt.refAttrName)),nt.docString!=null&&(lt.docString=String(nt.docString)),nt.type){case"UNDEFINED":case 0:lt.type=0;break;case"FLOAT":case 1:lt.type=1;break;case"INT":case 2:lt.type=2;break;case"STRING":case 3:lt.type=3;break;case"TENSOR":case 4:lt.type=4;break;case"GRAPH":case 5:lt.type=5;break;case"FLOATS":case 6:lt.type=6;break;case"INTS":case 7:lt.type=7;break;case"STRINGS":case 8:lt.type=8;break;case"TENSORS":case 9:lt.type=9;break;case"GRAPHS":case 10:lt.type=10}if(nt.f!=null&&(lt.f=Number(nt.f)),nt.i!=null&&(ut.Long?(lt.i=ut.Long.fromValue(nt.i)).unsigned=!1:typeof nt.i=="string"?lt.i=parseInt(nt.i,10):typeof nt.i=="number"?lt.i=nt.i:typeof nt.i=="object"&&(lt.i=new ut.LongBits(nt.i.low>>>0,nt.i.high>>>0).toNumber())),nt.s!=null&&(typeof nt.s=="string"?ut.base64.decode(nt.s,lt.s=ut.newBuffer(ut.base64.length(nt.s)),0):nt.s.length&&(lt.s=nt.s)),nt.t!=null){if(typeof nt.t!="object")throw TypeError(".onnx.AttributeProto.t: object expected");lt.t=dt.onnx.TensorProto.fromObject(nt.t)}if(nt.g!=null){if(typeof nt.g!="object")throw TypeError(".onnx.AttributeProto.g: object expected");lt.g=dt.onnx.GraphProto.fromObject(nt.g)}if(nt.floats){if(!Array.isArray(nt.floats))throw TypeError(".onnx.AttributeProto.floats: array expected");lt.floats=[];for(var ht=0;ht<nt.floats.length;++ht)lt.floats[ht]=Number(nt.floats[ht])}if(nt.ints){if(!Array.isArray(nt.ints))throw TypeError(".onnx.AttributeProto.ints: array expected");for(lt.ints=[],ht=0;ht<nt.ints.length;++ht)ut.Long?(lt.ints[ht]=ut.Long.fromValue(nt.ints[ht])).unsigned=!1:typeof nt.ints[ht]=="string"?lt.ints[ht]=parseInt(nt.ints[ht],10):typeof nt.ints[ht]=="number"?lt.ints[ht]=nt.ints[ht]:typeof nt.ints[ht]=="object"&&(lt.ints[ht]=new ut.LongBits(nt.ints[ht].low>>>0,nt.ints[ht].high>>>0).toNumber())}if(nt.strings){if(!Array.isArray(nt.strings))throw TypeError(".onnx.AttributeProto.strings: array expected");for(lt.strings=[],ht=0;ht<nt.strings.length;++ht)typeof nt.strings[ht]=="string"?ut.base64.decode(nt.strings[ht],lt.strings[ht]=ut.newBuffer(ut.base64.length(nt.strings[ht])),0):nt.strings[ht].length&&(lt.strings[ht]=nt.strings[ht])}if(nt.tensors){if(!Array.isArray(nt.tensors))throw TypeError(".onnx.AttributeProto.tensors: array expected");for(lt.tensors=[],ht=0;ht<nt.tensors.length;++ht){if(typeof nt.tensors[ht]!="object")throw TypeError(".onnx.AttributeProto.tensors: object expected");lt.tensors[ht]=dt.onnx.TensorProto.fromObject(nt.tensors[ht])}}if(nt.graphs){if(!Array.isArray(nt.graphs))throw TypeError(".onnx.AttributeProto.graphs: array expected");for(lt.graphs=[],ht=0;ht<nt.graphs.length;++ht){if(typeof nt.graphs[ht]!="object")throw TypeError(".onnx.AttributeProto.graphs: object expected");lt.graphs[ht]=dt.onnx.GraphProto.fromObject(nt.graphs[ht])}}return lt},ot.toObject=function(nt,lt){lt||(lt={});var ht={};if((lt.arrays||lt.defaults)&&(ht.floats=[],ht.ints=[],ht.strings=[],ht.tensors=[],ht.graphs=[]),lt.defaults){if(ht.name="",ht.f=0,ut.Long){var ft=new ut.Long(0,0,!1);ht.i=lt.longs===String?ft.toString():lt.longs===Number?ft.toNumber():ft}else ht.i=lt.longs===String?"0":0;lt.bytes===String?ht.s="":(ht.s=[],lt.bytes!==Array&&(ht.s=ut.newBuffer(ht.s))),ht.t=null,ht.g=null,ht.docString="",ht.type=lt.enums===String?"UNDEFINED":0,ht.refAttrName=""}if(nt.name!=null&&nt.hasOwnProperty("name")&&(ht.name=nt.name),nt.f!=null&&nt.hasOwnProperty("f")&&(ht.f=lt.json&&!isFinite(nt.f)?String(nt.f):nt.f),nt.i!=null&&nt.hasOwnProperty("i")&&(typeof nt.i=="number"?ht.i=lt.longs===String?String(nt.i):nt.i:ht.i=lt.longs===String?ut.Long.prototype.toString.call(nt.i):lt.longs===Number?new ut.LongBits(nt.i.low>>>0,nt.i.high>>>0).toNumber():nt.i),nt.s!=null&&nt.hasOwnProperty("s")&&(ht.s=lt.bytes===String?ut.base64.encode(nt.s,0,nt.s.length):lt.bytes===Array?Array.prototype.slice.call(nt.s):nt.s),nt.t!=null&&nt.hasOwnProperty("t")&&(ht.t=dt.onnx.TensorProto.toObject(nt.t,lt)),nt.g!=null&&nt.hasOwnProperty("g")&&(ht.g=dt.onnx.GraphProto.toObject(nt.g,lt)),nt.floats&&nt.floats.length){ht.floats=[];for(var gt=0;gt<nt.floats.length;++gt)ht.floats[gt]=lt.json&&!isFinite(nt.floats[gt])?String(nt.floats[gt]):nt.floats[gt]}if(nt.ints&&nt.ints.length)for(ht.ints=[],gt=0;gt<nt.ints.length;++gt)typeof nt.ints[gt]=="number"?ht.ints[gt]=lt.longs===String?String(nt.ints[gt]):nt.ints[gt]:ht.ints[gt]=lt.longs===String?ut.Long.prototype.toString.call(nt.ints[gt]):lt.longs===Number?new ut.LongBits(nt.ints[gt].low>>>0,nt.ints[gt].high>>>0).toNumber():nt.ints[gt];if(nt.strings&&nt.strings.length)for(ht.strings=[],gt=0;gt<nt.strings.length;++gt)ht.strings[gt]=lt.bytes===String?ut.base64.encode(nt.strings[gt],0,nt.strings[gt].length):lt.bytes===Array?Array.prototype.slice.call(nt.strings[gt]):nt.strings[gt];if(nt.tensors&&nt.tensors.length)for(ht.tensors=[],gt=0;gt<nt.tensors.length;++gt)ht.tensors[gt]=dt.onnx.TensorProto.toObject(nt.tensors[gt],lt);if(nt.graphs&&nt.graphs.length)for(ht.graphs=[],gt=0;gt<nt.graphs.length;++gt)ht.graphs[gt]=dt.onnx.GraphProto.toObject(nt.graphs[gt],lt);return nt.docString!=null&&nt.hasOwnProperty("docString")&&(ht.docString=nt.docString),nt.type!=null&&nt.hasOwnProperty("type")&&(ht.type=lt.enums===String?dt.onnx.AttributeProto.AttributeType[nt.type]:nt.type),nt.refAttrName!=null&&nt.hasOwnProperty("refAttrName")&&(ht.refAttrName=nt.refAttrName),ht},ot.prototype.toJSON=function(){return this.constructor.toObject(this,st.util.toJSONOptions)},ot.AttributeType=function(){var nt={},lt=Object.create(nt);return lt[nt[0]="UNDEFINED"]=0,lt[nt[1]="FLOAT"]=1,lt[nt[2]="INT"]=2,lt[nt[3]="STRING"]=3,lt[nt[4]="TENSOR"]=4,lt[nt[5]="GRAPH"]=5,lt[nt[6]="FLOATS"]=6,lt[nt[7]="INTS"]=7,lt[nt[8]="STRINGS"]=8,lt[nt[9]="TENSORS"]=9,lt[nt[10]="GRAPHS"]=10,lt}(),ot}(),it.ValueInfoProto=function(){function ot(nt){if(nt)for(var lt=Object.keys(nt),ht=0;ht<lt.length;++ht)nt[lt[ht]]!=null&&(this[lt[ht]]=nt[lt[ht]])}return ot.prototype.name="",ot.prototype.type=null,ot.prototype.docString="",ot.create=function(nt){return new ot(nt)},ot.encode=function(nt,lt){return lt||(lt=ct.create()),nt.name!=null&&nt.hasOwnProperty("name")&&lt.uint32(10).string(nt.name),nt.type!=null&&nt.hasOwnProperty("type")&&dt.onnx.TypeProto.encode(nt.type,lt.uint32(18).fork()).ldelim(),nt.docString!=null&&nt.hasOwnProperty("docString")&&lt.uint32(26).string(nt.docString),lt},ot.encodeDelimited=function(nt,lt){return this.encode(nt,lt).ldelim()},ot.decode=function(nt,lt){nt instanceof at||(nt=at.create(nt));for(var ht=lt===void 0?nt.len:nt.pos+lt,ft=new dt.onnx.ValueInfoProto;nt.pos<ht;){var gt=nt.uint32();switch(gt>>>3){case 1:ft.name=nt.string();break;case 2:ft.type=dt.onnx.TypeProto.decode(nt,nt.uint32());break;case 3:ft.docString=nt.string();break;default:nt.skipType(7&gt)}}return ft},ot.decodeDelimited=function(nt){return nt instanceof at||(nt=new at(nt)),this.decode(nt,nt.uint32())},ot.verify=function(nt){if(typeof nt!="object"||nt===null)return"object expected";if(nt.name!=null&&nt.hasOwnProperty("name")&&!ut.isString(nt.name))return"name: string expected";if(nt.type!=null&&nt.hasOwnProperty("type")){var lt=dt.onnx.TypeProto.verify(nt.type);if(lt)return"type."+lt}return nt.docString!=null&&nt.hasOwnProperty("docString")&&!ut.isString(nt.docString)?"docString: string expected":null},ot.fromObject=function(nt){if(nt instanceof dt.onnx.ValueInfoProto)return nt;var lt=new dt.onnx.ValueInfoProto;if(nt.name!=null&&(lt.name=String(nt.name)),nt.type!=null){if(typeof nt.type!="object")throw TypeError(".onnx.ValueInfoProto.type: object expected");lt.type=dt.onnx.TypeProto.fromObject(nt.type)}return nt.docString!=null&&(lt.docString=String(nt.docString)),lt},ot.toObject=function(nt,lt){lt||(lt={});var ht={};return lt.defaults&&(ht.name="",ht.type=null,ht.docString=""),nt.name!=null&&nt.hasOwnProperty("name")&&(ht.name=nt.name),nt.type!=null&&nt.hasOwnProperty("type")&&(ht.type=dt.onnx.TypeProto.toObject(nt.type,lt)),nt.docString!=null&&nt.hasOwnProperty("docString")&&(ht.docString=nt.docString),ht},ot.prototype.toJSON=function(){return this.constructor.toObject(this,st.util.toJSONOptions)},ot}(),it.NodeProto=function(){function ot(nt){if(this.input=[],this.output=[],this.attribute=[],nt)for(var lt=Object.keys(nt),ht=0;ht<lt.length;++ht)nt[lt[ht]]!=null&&(this[lt[ht]]=nt[lt[ht]])}return ot.prototype.input=ut.emptyArray,ot.prototype.output=ut.emptyArray,ot.prototype.name="",ot.prototype.opType="",ot.prototype.domain="",ot.prototype.attribute=ut.emptyArray,ot.prototype.docString="",ot.create=function(nt){return new ot(nt)},ot.encode=function(nt,lt){if(lt||(lt=ct.create()),nt.input!=null&&nt.input.length)for(var ht=0;ht<nt.input.length;++ht)lt.uint32(10).string(nt.input[ht]);if(nt.output!=null&&nt.output.length)for(ht=0;ht<nt.output.length;++ht)lt.uint32(18).string(nt.output[ht]);if(nt.name!=null&&nt.hasOwnProperty("name")&&lt.uint32(26).string(nt.name),nt.opType!=null&&nt.hasOwnProperty("opType")&&lt.uint32(34).string(nt.opType),nt.attribute!=null&&nt.attribute.length)for(ht=0;ht<nt.attribute.length;++ht)dt.onnx.AttributeProto.encode(nt.attribute[ht],lt.uint32(42).fork()).ldelim();return nt.docString!=null&&nt.hasOwnProperty("docString")&&lt.uint32(50).string(nt.docString),nt.domain!=null&&nt.hasOwnProperty("domain")&&lt.uint32(58).string(nt.domain),lt},ot.encodeDelimited=function(nt,lt){return this.encode(nt,lt).ldelim()},ot.decode=function(nt,lt){nt instanceof at||(nt=at.create(nt));for(var ht=lt===void 0?nt.len:nt.pos+lt,ft=new dt.onnx.NodeProto;nt.pos<ht;){var gt=nt.uint32();switch(gt>>>3){case 1:ft.input&&ft.input.length||(ft.input=[]),ft.input.push(nt.string());break;case 2:ft.output&&ft.output.length||(ft.output=[]),ft.output.push(nt.string());break;case 3:ft.name=nt.string();break;case 4:ft.opType=nt.string();break;case 7:ft.domain=nt.string();break;case 5:ft.attribute&&ft.attribute.length||(ft.attribute=[]),ft.attribute.push(dt.onnx.AttributeProto.decode(nt,nt.uint32()));break;case 6:ft.docString=nt.string();break;default:nt.skipType(7&gt)}}return ft},ot.decodeDelimited=function(nt){return nt instanceof at||(nt=new at(nt)),this.decode(nt,nt.uint32())},ot.verify=function(nt){if(typeof nt!="object"||nt===null)return"object expected";if(nt.input!=null&&nt.hasOwnProperty("input")){if(!Array.isArray(nt.input))return"input: array expected";for(var lt=0;lt<nt.input.length;++lt)if(!ut.isString(nt.input[lt]))return"input: string[] expected"}if(nt.output!=null&&nt.hasOwnProperty("output")){if(!Array.isArray(nt.output))return"output: array expected";for(lt=0;lt<nt.output.length;++lt)if(!ut.isString(nt.output[lt]))return"output: string[] expected"}if(nt.name!=null&&nt.hasOwnProperty("name")&&!ut.isString(nt.name))return"name: string expected";if(nt.opType!=null&&nt.hasOwnProperty("opType")&&!ut.isString(nt.opType))return"opType: string expected";if(nt.domain!=null&&nt.hasOwnProperty("domain")&&!ut.isString(nt.domain))return"domain: string expected";if(nt.attribute!=null&&nt.hasOwnProperty("attribute")){if(!Array.isArray(nt.attribute))return"attribute: array expected";for(lt=0;lt<nt.attribute.length;++lt){var ht=dt.onnx.AttributeProto.verify(nt.attribute[lt]);if(ht)return"attribute."+ht}}return nt.docString!=null&&nt.hasOwnProperty("docString")&&!ut.isString(nt.docString)?"docString: string expected":null},ot.fromObject=function(nt){if(nt instanceof dt.onnx.NodeProto)return nt;var lt=new dt.onnx.NodeProto;if(nt.input){if(!Array.isArray(nt.input))throw TypeError(".onnx.NodeProto.input: array expected");lt.input=[];for(var ht=0;ht<nt.input.length;++ht)lt.input[ht]=String(nt.input[ht])}if(nt.output){if(!Array.isArray(nt.output))throw TypeError(".onnx.NodeProto.output: array expected");for(lt.output=[],ht=0;ht<nt.output.length;++ht)lt.output[ht]=String(nt.output[ht])}if(nt.name!=null&&(lt.name=String(nt.name)),nt.opType!=null&&(lt.opType=String(nt.opType)),nt.domain!=null&&(lt.domain=String(nt.domain)),nt.attribute){if(!Array.isArray(nt.attribute))throw TypeError(".onnx.NodeProto.attribute: array expected");for(lt.attribute=[],ht=0;ht<nt.attribute.length;++ht){if(typeof nt.attribute[ht]!="object")throw TypeError(".onnx.NodeProto.attribute: object expected");lt.attribute[ht]=dt.onnx.AttributeProto.fromObject(nt.attribute[ht])}}return nt.docString!=null&&(lt.docString=String(nt.docString)),lt},ot.toObject=function(nt,lt){lt||(lt={});var ht={};if((lt.arrays||lt.defaults)&&(ht.input=[],ht.output=[],ht.attribute=[]),lt.defaults&&(ht.name="",ht.opType="",ht.docString="",ht.domain=""),nt.input&&nt.input.length){ht.input=[];for(var ft=0;ft<nt.input.length;++ft)ht.input[ft]=nt.input[ft]}if(nt.output&&nt.output.length)for(ht.output=[],ft=0;ft<nt.output.length;++ft)ht.output[ft]=nt.output[ft];if(nt.name!=null&&nt.hasOwnProperty("name")&&(ht.name=nt.name),nt.opType!=null&&nt.hasOwnProperty("opType")&&(ht.opType=nt.opType),nt.attribute&&nt.attribute.length)for(ht.attribute=[],ft=0;ft<nt.attribute.length;++ft)ht.attribute[ft]=dt.onnx.AttributeProto.toObject(nt.attribute[ft],lt);return nt.docString!=null&&nt.hasOwnProperty("docString")&&(ht.docString=nt.docString),nt.domain!=null&&nt.hasOwnProperty("domain")&&(ht.domain=nt.domain),ht},ot.prototype.toJSON=function(){return this.constructor.toObject(this,st.util.toJSONOptions)},ot}(),it.ModelProto=function(){function ot(nt){if(this.opsetImport=[],this.metadataProps=[],nt)for(var lt=Object.keys(nt),ht=0;ht<lt.length;++ht)nt[lt[ht]]!=null&&(this[lt[ht]]=nt[lt[ht]])}return ot.prototype.irVersion=ut.Long?ut.Long.fromBits(0,0,!1):0,ot.prototype.opsetImport=ut.emptyArray,ot.prototype.producerName="",ot.prototype.producerVersion="",ot.prototype.domain="",ot.prototype.modelVersion=ut.Long?ut.Long.fromBits(0,0,!1):0,ot.prototype.docString="",ot.prototype.graph=null,ot.prototype.metadataProps=ut.emptyArray,ot.create=function(nt){return new ot(nt)},ot.encode=function(nt,lt){if(lt||(lt=ct.create()),nt.irVersion!=null&&nt.hasOwnProperty("irVersion")&&lt.uint32(8).int64(nt.irVersion),nt.producerName!=null&&nt.hasOwnProperty("producerName")&&lt.uint32(18).string(nt.producerName),nt.producerVersion!=null&&nt.hasOwnProperty("producerVersion")&&lt.uint32(26).string(nt.producerVersion),nt.domain!=null&&nt.hasOwnProperty("domain")&&lt.uint32(34).string(nt.domain),nt.modelVersion!=null&&nt.hasOwnProperty("modelVersion")&&lt.uint32(40).int64(nt.modelVersion),nt.docString!=null&&nt.hasOwnProperty("docString")&&lt.uint32(50).string(nt.docString),nt.graph!=null&&nt.hasOwnProperty("graph")&&dt.onnx.GraphProto.encode(nt.graph,lt.uint32(58).fork()).ldelim(),nt.opsetImport!=null&&nt.opsetImport.length)for(var ht=0;ht<nt.opsetImport.length;++ht)dt.onnx.OperatorSetIdProto.encode(nt.opsetImport[ht],lt.uint32(66).fork()).ldelim();if(nt.metadataProps!=null&&nt.metadataProps.length)for(ht=0;ht<nt.metadataProps.length;++ht)dt.onnx.StringStringEntryProto.encode(nt.metadataProps[ht],lt.uint32(114).fork()).ldelim();return lt},ot.encodeDelimited=function(nt,lt){return this.encode(nt,lt).ldelim()},ot.decode=function(nt,lt){nt instanceof at||(nt=at.create(nt));for(var ht=lt===void 0?nt.len:nt.pos+lt,ft=new dt.onnx.ModelProto;nt.pos<ht;){var gt=nt.uint32();switch(gt>>>3){case 1:ft.irVersion=nt.int64();break;case 8:ft.opsetImport&&ft.opsetImport.length||(ft.opsetImport=[]),ft.opsetImport.push(dt.onnx.OperatorSetIdProto.decode(nt,nt.uint32()));break;case 2:ft.producerName=nt.string();break;case 3:ft.producerVersion=nt.string();break;case 4:ft.domain=nt.string();break;case 5:ft.modelVersion=nt.int64();break;case 6:ft.docString=nt.string();break;case 7:ft.graph=dt.onnx.GraphProto.decode(nt,nt.uint32());break;case 14:ft.metadataProps&&ft.metadataProps.length||(ft.metadataProps=[]),ft.metadataProps.push(dt.onnx.StringStringEntryProto.decode(nt,nt.uint32()));break;default:nt.skipType(7&gt)}}return ft},ot.decodeDelimited=function(nt){return nt instanceof at||(nt=new at(nt)),this.decode(nt,nt.uint32())},ot.verify=function(nt){if(typeof nt!="object"||nt===null)return"object expected";if(nt.irVersion!=null&&nt.hasOwnProperty("irVersion")&&!(ut.isInteger(nt.irVersion)||nt.irVersion&&ut.isInteger(nt.irVersion.low)&&ut.isInteger(nt.irVersion.high)))return"irVersion: integer|Long expected";if(nt.opsetImport!=null&&nt.hasOwnProperty("opsetImport")){if(!Array.isArray(nt.opsetImport))return"opsetImport: array expected";for(var lt=0;lt<nt.opsetImport.length;++lt)if(ht=dt.onnx.OperatorSetIdProto.verify(nt.opsetImport[lt]))return"opsetImport."+ht}if(nt.producerName!=null&&nt.hasOwnProperty("producerName")&&!ut.isString(nt.producerName))return"producerName: string expected";if(nt.producerVersion!=null&&nt.hasOwnProperty("producerVersion")&&!ut.isString(nt.producerVersion))return"producerVersion: string expected";if(nt.domain!=null&&nt.hasOwnProperty("domain")&&!ut.isString(nt.domain))return"domain: string expected";if(nt.modelVersion!=null&&nt.hasOwnProperty("modelVersion")&&!(ut.isInteger(nt.modelVersion)||nt.modelVersion&&ut.isInteger(nt.modelVersion.low)&&ut.isInteger(nt.modelVersion.high)))return"modelVersion: integer|Long expected";if(nt.docString!=null&&nt.hasOwnProperty("docString")&&!ut.isString(nt.docString))return"docString: string expected";if(nt.graph!=null&&nt.hasOwnProperty("graph")&&(ht=dt.onnx.GraphProto.verify(nt.graph)))return"graph."+ht;if(nt.metadataProps!=null&&nt.hasOwnProperty("metadataProps")){if(!Array.isArray(nt.metadataProps))return"metadataProps: array expected";for(lt=0;lt<nt.metadataProps.length;++lt){var ht;if(ht=dt.onnx.StringStringEntryProto.verify(nt.metadataProps[lt]))return"metadataProps."+ht}}return null},ot.fromObject=function(nt){if(nt instanceof dt.onnx.ModelProto)return nt;var lt=new dt.onnx.ModelProto;if(nt.irVersion!=null&&(ut.Long?(lt.irVersion=ut.Long.fromValue(nt.irVersion)).unsigned=!1:typeof nt.irVersion=="string"?lt.irVersion=parseInt(nt.irVersion,10):typeof nt.irVersion=="number"?lt.irVersion=nt.irVersion:typeof nt.irVersion=="object"&&(lt.irVersion=new ut.LongBits(nt.irVersion.low>>>0,nt.irVersion.high>>>0).toNumber())),nt.opsetImport){if(!Array.isArray(nt.opsetImport))throw TypeError(".onnx.ModelProto.opsetImport: array expected");lt.opsetImport=[];for(var ht=0;ht<nt.opsetImport.length;++ht){if(typeof nt.opsetImport[ht]!="object")throw TypeError(".onnx.ModelProto.opsetImport: object expected");lt.opsetImport[ht]=dt.onnx.OperatorSetIdProto.fromObject(nt.opsetImport[ht])}}if(nt.producerName!=null&&(lt.producerName=String(nt.producerName)),nt.producerVersion!=null&&(lt.producerVersion=String(nt.producerVersion)),nt.domain!=null&&(lt.domain=String(nt.domain)),nt.modelVersion!=null&&(ut.Long?(lt.modelVersion=ut.Long.fromValue(nt.modelVersion)).unsigned=!1:typeof nt.modelVersion=="string"?lt.modelVersion=parseInt(nt.modelVersion,10):typeof nt.modelVersion=="number"?lt.modelVersion=nt.modelVersion:typeof nt.modelVersion=="object"&&(lt.modelVersion=new ut.LongBits(nt.modelVersion.low>>>0,nt.modelVersion.high>>>0).toNumber())),nt.docString!=null&&(lt.docString=String(nt.docString)),nt.graph!=null){if(typeof nt.graph!="object")throw TypeError(".onnx.ModelProto.graph: object expected");lt.graph=dt.onnx.GraphProto.fromObject(nt.graph)}if(nt.metadataProps){if(!Array.isArray(nt.metadataProps))throw TypeError(".onnx.ModelProto.metadataProps: array expected");for(lt.metadataProps=[],ht=0;ht<nt.metadataProps.length;++ht){if(typeof nt.metadataProps[ht]!="object")throw TypeError(".onnx.ModelProto.metadataProps: object expected");lt.metadataProps[ht]=dt.onnx.StringStringEntryProto.fromObject(nt.metadataProps[ht])}}return lt},ot.toObject=function(nt,lt){lt||(lt={});var ht={};if((lt.arrays||lt.defaults)&&(ht.opsetImport=[],ht.metadataProps=[]),lt.defaults){if(ut.Long){var ft=new ut.Long(0,0,!1);ht.irVersion=lt.longs===String?ft.toString():lt.longs===Number?ft.toNumber():ft}else ht.irVersion=lt.longs===String?"0":0;ht.producerName="",ht.producerVersion="",ht.domain="",ut.Long?(ft=new ut.Long(0,0,!1),ht.modelVersion=lt.longs===String?ft.toString():lt.longs===Number?ft.toNumber():ft):ht.modelVersion=lt.longs===String?"0":0,ht.docString="",ht.graph=null}if(nt.irVersion!=null&&nt.hasOwnProperty("irVersion")&&(typeof nt.irVersion=="number"?ht.irVersion=lt.longs===String?String(nt.irVersion):nt.irVersion:ht.irVersion=lt.longs===String?ut.Long.prototype.toString.call(nt.irVersion):lt.longs===Number?new ut.LongBits(nt.irVersion.low>>>0,nt.irVersion.high>>>0).toNumber():nt.irVersion),nt.producerName!=null&&nt.hasOwnProperty("producerName")&&(ht.producerName=nt.producerName),nt.producerVersion!=null&&nt.hasOwnProperty("producerVersion")&&(ht.producerVersion=nt.producerVersion),nt.domain!=null&&nt.hasOwnProperty("domain")&&(ht.domain=nt.domain),nt.modelVersion!=null&&nt.hasOwnProperty("modelVersion")&&(typeof nt.modelVersion=="number"?ht.modelVersion=lt.longs===String?String(nt.modelVersion):nt.modelVersion:ht.modelVersion=lt.longs===String?ut.Long.prototype.toString.call(nt.modelVersion):lt.longs===Number?new ut.LongBits(nt.modelVersion.low>>>0,nt.modelVersion.high>>>0).toNumber():nt.modelVersion),nt.docString!=null&&nt.hasOwnProperty("docString")&&(ht.docString=nt.docString),nt.graph!=null&&nt.hasOwnProperty("graph")&&(ht.graph=dt.onnx.GraphProto.toObject(nt.graph,lt)),nt.opsetImport&&nt.opsetImport.length){ht.opsetImport=[];for(var gt=0;gt<nt.opsetImport.length;++gt)ht.opsetImport[gt]=dt.onnx.OperatorSetIdProto.toObject(nt.opsetImport[gt],lt)}if(nt.metadataProps&&nt.metadataProps.length)for(ht.metadataProps=[],gt=0;gt<nt.metadataProps.length;++gt)ht.metadataProps[gt]=dt.onnx.StringStringEntryProto.toObject(nt.metadataProps[gt],lt);return ht},ot.prototype.toJSON=function(){return this.constructor.toObject(this,st.util.toJSONOptions)},ot}(),it.StringStringEntryProto=function(){function ot(nt){if(nt)for(var lt=Object.keys(nt),ht=0;ht<lt.length;++ht)nt[lt[ht]]!=null&&(this[lt[ht]]=nt[lt[ht]])}return ot.prototype.key="",ot.prototype.value="",ot.create=function(nt){return new ot(nt)},ot.encode=function(nt,lt){return lt||(lt=ct.create()),nt.key!=null&&nt.hasOwnProperty("key")&&lt.uint32(10).string(nt.key),nt.value!=null&&nt.hasOwnProperty("value")&&lt.uint32(18).string(nt.value),lt},ot.encodeDelimited=function(nt,lt){return this.encode(nt,lt).ldelim()},ot.decode=function(nt,lt){nt instanceof at||(nt=at.create(nt));for(var ht=lt===void 0?nt.len:nt.pos+lt,ft=new dt.onnx.StringStringEntryProto;nt.pos<ht;){var gt=nt.uint32();switch(gt>>>3){case 1:ft.key=nt.string();break;case 2:ft.value=nt.string();break;default:nt.skipType(7&gt)}}return ft},ot.decodeDelimited=function(nt){return nt instanceof at||(nt=new at(nt)),this.decode(nt,nt.uint32())},ot.verify=function(nt){return typeof nt!="object"||nt===null?"object expected":nt.key!=null&&nt.hasOwnProperty("key")&&!ut.isString(nt.key)?"key: string expected":nt.value!=null&&nt.hasOwnProperty("value")&&!ut.isString(nt.value)?"value: string expected":null},ot.fromObject=function(nt){if(nt instanceof dt.onnx.StringStringEntryProto)return nt;var lt=new dt.onnx.StringStringEntryProto;return nt.key!=null&&(lt.key=String(nt.key)),nt.value!=null&&(lt.value=String(nt.value)),lt},ot.toObject=function(nt,lt){lt||(lt={});var ht={};return lt.defaults&&(ht.key="",ht.value=""),nt.key!=null&&nt.hasOwnProperty("key")&&(ht.key=nt.key),nt.value!=null&&nt.hasOwnProperty("value")&&(ht.value=nt.value),ht},ot.prototype.toJSON=function(){return this.constructor.toObject(this,st.util.toJSONOptions)},ot}(),it.TensorAnnotation=function(){function ot(nt){if(this.quantParameterTensorNames=[],nt)for(var lt=Object.keys(nt),ht=0;ht<lt.length;++ht)nt[lt[ht]]!=null&&(this[lt[ht]]=nt[lt[ht]])}return ot.prototype.tensorName="",ot.prototype.quantParameterTensorNames=ut.emptyArray,ot.create=function(nt){return new ot(nt)},ot.encode=function(nt,lt){if(lt||(lt=ct.create()),nt.tensorName!=null&&nt.hasOwnProperty("tensorName")&&lt.uint32(10).string(nt.tensorName),nt.quantParameterTensorNames!=null&&nt.quantParameterTensorNames.length)for(var ht=0;ht<nt.quantParameterTensorNames.length;++ht)dt.onnx.StringStringEntryProto.encode(nt.quantParameterTensorNames[ht],lt.uint32(18).fork()).ldelim();return lt},ot.encodeDelimited=function(nt,lt){return this.encode(nt,lt).ldelim()},ot.decode=function(nt,lt){nt instanceof at||(nt=at.create(nt));for(var ht=lt===void 0?nt.len:nt.pos+lt,ft=new dt.onnx.TensorAnnotation;nt.pos<ht;){var gt=nt.uint32();switch(gt>>>3){case 1:ft.tensorName=nt.string();break;case 2:ft.quantParameterTensorNames&&ft.quantParameterTensorNames.length||(ft.quantParameterTensorNames=[]),ft.quantParameterTensorNames.push(dt.onnx.StringStringEntryProto.decode(nt,nt.uint32()));break;default:nt.skipType(7&gt)}}return ft},ot.decodeDelimited=function(nt){return nt instanceof at||(nt=new at(nt)),this.decode(nt,nt.uint32())},ot.verify=function(nt){if(typeof nt!="object"||nt===null)return"object expected";if(nt.tensorName!=null&&nt.hasOwnProperty("tensorName")&&!ut.isString(nt.tensorName))return"tensorName: string expected";if(nt.quantParameterTensorNames!=null&&nt.hasOwnProperty("quantParameterTensorNames")){if(!Array.isArray(nt.quantParameterTensorNames))return"quantParameterTensorNames: array expected";for(var lt=0;lt<nt.quantParameterTensorNames.length;++lt){var ht=dt.onnx.StringStringEntryProto.verify(nt.quantParameterTensorNames[lt]);if(ht)return"quantParameterTensorNames."+ht}}return null},ot.fromObject=function(nt){if(nt instanceof dt.onnx.TensorAnnotation)return nt;var lt=new dt.onnx.TensorAnnotation;if(nt.tensorName!=null&&(lt.tensorName=String(nt.tensorName)),nt.quantParameterTensorNames){if(!Array.isArray(nt.quantParameterTensorNames))throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: array expected");lt.quantParameterTensorNames=[];for(var ht=0;ht<nt.quantParameterTensorNames.length;++ht){if(typeof nt.quantParameterTensorNames[ht]!="object")throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: object expected");lt.quantParameterTensorNames[ht]=dt.onnx.StringStringEntryProto.fromObject(nt.quantParameterTensorNames[ht])}}return lt},ot.toObject=function(nt,lt){lt||(lt={});var ht={};if((lt.arrays||lt.defaults)&&(ht.quantParameterTensorNames=[]),lt.defaults&&(ht.tensorName=""),nt.tensorName!=null&&nt.hasOwnProperty("tensorName")&&(ht.tensorName=nt.tensorName),nt.quantParameterTensorNames&&nt.quantParameterTensorNames.length){ht.quantParameterTensorNames=[];for(var ft=0;ft<nt.quantParameterTensorNames.length;++ft)ht.quantParameterTensorNames[ft]=dt.onnx.StringStringEntryProto.toObject(nt.quantParameterTensorNames[ft],lt)}return ht},ot.prototype.toJSON=function(){return this.constructor.toObject(this,st.util.toJSONOptions)},ot}(),it.GraphProto=function(){function ot(nt){if(this.node=[],this.initializer=[],this.input=[],this.output=[],this.valueInfo=[],this.quantizationAnnotation=[],nt)for(var lt=Object.keys(nt),ht=0;ht<lt.length;++ht)nt[lt[ht]]!=null&&(this[lt[ht]]=nt[lt[ht]])}return ot.prototype.node=ut.emptyArray,ot.prototype.name="",ot.prototype.initializer=ut.emptyArray,ot.prototype.docString="",ot.prototype.input=ut.emptyArray,ot.prototype.output=ut.emptyArray,ot.prototype.valueInfo=ut.emptyArray,ot.prototype.quantizationAnnotation=ut.emptyArray,ot.create=function(nt){return new ot(nt)},ot.encode=function(nt,lt){if(lt||(lt=ct.create()),nt.node!=null&&nt.node.length)for(var ht=0;ht<nt.node.length;++ht)dt.onnx.NodeProto.encode(nt.node[ht],lt.uint32(10).fork()).ldelim();if(nt.name!=null&&nt.hasOwnProperty("name")&&lt.uint32(18).string(nt.name),nt.initializer!=null&&nt.initializer.length)for(ht=0;ht<nt.initializer.length;++ht)dt.onnx.TensorProto.encode(nt.initializer[ht],lt.uint32(42).fork()).ldelim();if(nt.docString!=null&&nt.hasOwnProperty("docString")&&lt.uint32(82).string(nt.docString),nt.input!=null&&nt.input.length)for(ht=0;ht<nt.input.length;++ht)dt.onnx.ValueInfoProto.encode(nt.input[ht],lt.uint32(90).fork()).ldelim();if(nt.output!=null&&nt.output.length)for(ht=0;ht<nt.output.length;++ht)dt.onnx.ValueInfoProto.encode(nt.output[ht],lt.uint32(98).fork()).ldelim();if(nt.valueInfo!=null&&nt.valueInfo.length)for(ht=0;ht<nt.valueInfo.length;++ht)dt.onnx.ValueInfoProto.encode(nt.valueInfo[ht],lt.uint32(106).fork()).ldelim();if(nt.quantizationAnnotation!=null&&nt.quantizationAnnotation.length)for(ht=0;ht<nt.quantizationAnnotation.length;++ht)dt.onnx.TensorAnnotation.encode(nt.quantizationAnnotation[ht],lt.uint32(114).fork()).ldelim();return lt},ot.encodeDelimited=function(nt,lt){return this.encode(nt,lt).ldelim()},ot.decode=function(nt,lt){nt instanceof at||(nt=at.create(nt));for(var ht=lt===void 0?nt.len:nt.pos+lt,ft=new dt.onnx.GraphProto;nt.pos<ht;){var gt=nt.uint32();switch(gt>>>3){case 1:ft.node&&ft.node.length||(ft.node=[]),ft.node.push(dt.onnx.NodeProto.decode(nt,nt.uint32()));break;case 2:ft.name=nt.string();break;case 5:ft.initializer&&ft.initializer.length||(ft.initializer=[]),ft.initializer.push(dt.onnx.TensorProto.decode(nt,nt.uint32()));break;case 10:ft.docString=nt.string();break;case 11:ft.input&&ft.input.length||(ft.input=[]),ft.input.push(dt.onnx.ValueInfoProto.decode(nt,nt.uint32()));break;case 12:ft.output&&ft.output.length||(ft.output=[]),ft.output.push(dt.onnx.ValueInfoProto.decode(nt,nt.uint32()));break;case 13:ft.valueInfo&&ft.valueInfo.length||(ft.valueInfo=[]),ft.valueInfo.push(dt.onnx.ValueInfoProto.decode(nt,nt.uint32()));break;case 14:ft.quantizationAnnotation&&ft.quantizationAnnotation.length||(ft.quantizationAnnotation=[]),ft.quantizationAnnotation.push(dt.onnx.TensorAnnotation.decode(nt,nt.uint32()));break;default:nt.skipType(7&gt)}}return ft},ot.decodeDelimited=function(nt){return nt instanceof at||(nt=new at(nt)),this.decode(nt,nt.uint32())},ot.verify=function(nt){if(typeof nt!="object"||nt===null)return"object expected";if(nt.node!=null&&nt.hasOwnProperty("node")){if(!Array.isArray(nt.node))return"node: array expected";for(var lt=0;lt<nt.node.length;++lt)if(ht=dt.onnx.NodeProto.verify(nt.node[lt]))return"node."+ht}if(nt.name!=null&&nt.hasOwnProperty("name")&&!ut.isString(nt.name))return"name: string expected";if(nt.initializer!=null&&nt.hasOwnProperty("initializer")){if(!Array.isArray(nt.initializer))return"initializer: array expected";for(lt=0;lt<nt.initializer.length;++lt)if(ht=dt.onnx.TensorProto.verify(nt.initializer[lt]))return"initializer."+ht}if(nt.docString!=null&&nt.hasOwnProperty("docString")&&!ut.isString(nt.docString))return"docString: string expected";if(nt.input!=null&&nt.hasOwnProperty("input")){if(!Array.isArray(nt.input))return"input: array expected";for(lt=0;lt<nt.input.length;++lt)if(ht=dt.onnx.ValueInfoProto.verify(nt.input[lt]))return"input."+ht}if(nt.output!=null&&nt.hasOwnProperty("output")){if(!Array.isArray(nt.output))return"output: array expected";for(lt=0;lt<nt.output.length;++lt)if(ht=dt.onnx.ValueInfoProto.verify(nt.output[lt]))return"output."+ht}if(nt.valueInfo!=null&&nt.hasOwnProperty("valueInfo")){if(!Array.isArray(nt.valueInfo))return"valueInfo: array expected";for(lt=0;lt<nt.valueInfo.length;++lt)if(ht=dt.onnx.ValueInfoProto.verify(nt.valueInfo[lt]))return"valueInfo."+ht}if(nt.quantizationAnnotation!=null&&nt.hasOwnProperty("quantizationAnnotation")){if(!Array.isArray(nt.quantizationAnnotation))return"quantizationAnnotation: array expected";for(lt=0;lt<nt.quantizationAnnotation.length;++lt){var ht;if(ht=dt.onnx.TensorAnnotation.verify(nt.quantizationAnnotation[lt]))return"quantizationAnnotation."+ht}}return null},ot.fromObject=function(nt){if(nt instanceof dt.onnx.GraphProto)return nt;var lt=new dt.onnx.GraphProto;if(nt.node){if(!Array.isArray(nt.node))throw TypeError(".onnx.GraphProto.node: array expected");lt.node=[];for(var ht=0;ht<nt.node.length;++ht){if(typeof nt.node[ht]!="object")throw TypeError(".onnx.GraphProto.node: object expected");lt.node[ht]=dt.onnx.NodeProto.fromObject(nt.node[ht])}}if(nt.name!=null&&(lt.name=String(nt.name)),nt.initializer){if(!Array.isArray(nt.initializer))throw TypeError(".onnx.GraphProto.initializer: array expected");for(lt.initializer=[],ht=0;ht<nt.initializer.length;++ht){if(typeof nt.initializer[ht]!="object")throw TypeError(".onnx.GraphProto.initializer: object expected");lt.initializer[ht]=dt.onnx.TensorProto.fromObject(nt.initializer[ht])}}if(nt.docString!=null&&(lt.docString=String(nt.docString)),nt.input){if(!Array.isArray(nt.input))throw TypeError(".onnx.GraphProto.input: array expected");for(lt.input=[],ht=0;ht<nt.input.length;++ht){if(typeof nt.input[ht]!="object")throw TypeError(".onnx.GraphProto.input: object expected");lt.input[ht]=dt.onnx.ValueInfoProto.fromObject(nt.input[ht])}}if(nt.output){if(!Array.isArray(nt.output))throw TypeError(".onnx.GraphProto.output: array expected");for(lt.output=[],ht=0;ht<nt.output.length;++ht){if(typeof nt.output[ht]!="object")throw TypeError(".onnx.GraphProto.output: object expected");lt.output[ht]=dt.onnx.ValueInfoProto.fromObject(nt.output[ht])}}if(nt.valueInfo){if(!Array.isArray(nt.valueInfo))throw TypeError(".onnx.GraphProto.valueInfo: array expected");for(lt.valueInfo=[],ht=0;ht<nt.valueInfo.length;++ht){if(typeof nt.valueInfo[ht]!="object")throw TypeError(".onnx.GraphProto.valueInfo: object expected");lt.valueInfo[ht]=dt.onnx.ValueInfoProto.fromObject(nt.valueInfo[ht])}}if(nt.quantizationAnnotation){if(!Array.isArray(nt.quantizationAnnotation))throw TypeError(".onnx.GraphProto.quantizationAnnotation: array expected");for(lt.quantizationAnnotation=[],ht=0;ht<nt.quantizationAnnotation.length;++ht){if(typeof nt.quantizationAnnotation[ht]!="object")throw TypeError(".onnx.GraphProto.quantizationAnnotation: object expected");lt.quantizationAnnotation[ht]=dt.onnx.TensorAnnotation.fromObject(nt.quantizationAnnotation[ht])}}return lt},ot.toObject=function(nt,lt){lt||(lt={});var ht={};if((lt.arrays||lt.defaults)&&(ht.node=[],ht.initializer=[],ht.input=[],ht.output=[],ht.valueInfo=[],ht.quantizationAnnotation=[]),lt.defaults&&(ht.name="",ht.docString=""),nt.node&&nt.node.length){ht.node=[];for(var ft=0;ft<nt.node.length;++ft)ht.node[ft]=dt.onnx.NodeProto.toObject(nt.node[ft],lt)}if(nt.name!=null&&nt.hasOwnProperty("name")&&(ht.name=nt.name),nt.initializer&&nt.initializer.length)for(ht.initializer=[],ft=0;ft<nt.initializer.length;++ft)ht.initializer[ft]=dt.onnx.TensorProto.toObject(nt.initializer[ft],lt);if(nt.docString!=null&&nt.hasOwnProperty("docString")&&(ht.docString=nt.docString),nt.input&&nt.input.length)for(ht.input=[],ft=0;ft<nt.input.length;++ft)ht.input[ft]=dt.onnx.ValueInfoProto.toObject(nt.input[ft],lt);if(nt.output&&nt.output.length)for(ht.output=[],ft=0;ft<nt.output.length;++ft)ht.output[ft]=dt.onnx.ValueInfoProto.toObject(nt.output[ft],lt);if(nt.valueInfo&&nt.valueInfo.length)for(ht.valueInfo=[],ft=0;ft<nt.valueInfo.length;++ft)ht.valueInfo[ft]=dt.onnx.ValueInfoProto.toObject(nt.valueInfo[ft],lt);if(nt.quantizationAnnotation&&nt.quantizationAnnotation.length)for(ht.quantizationAnnotation=[],ft=0;ft<nt.quantizationAnnotation.length;++ft)ht.quantizationAnnotation[ft]=dt.onnx.TensorAnnotation.toObject(nt.quantizationAnnotation[ft],lt);return ht},ot.prototype.toJSON=function(){return this.constructor.toObject(this,st.util.toJSONOptions)},ot}(),it.TensorProto=function(){function ot(nt){if(this.dims=[],this.floatData=[],this.int32Data=[],this.stringData=[],this.int64Data=[],this.externalData=[],this.doubleData=[],this.uint64Data=[],nt)for(var lt=Object.keys(nt),ht=0;ht<lt.length;++ht)nt[lt[ht]]!=null&&(this[lt[ht]]=nt[lt[ht]])}return ot.prototype.dims=ut.emptyArray,ot.prototype.dataType=0,ot.prototype.segment=null,ot.prototype.floatData=ut.emptyArray,ot.prototype.int32Data=ut.emptyArray,ot.prototype.stringData=ut.emptyArray,ot.prototype.int64Data=ut.emptyArray,ot.prototype.name="",ot.prototype.docString="",ot.prototype.rawData=ut.newBuffer([]),ot.prototype.externalData=ut.emptyArray,ot.prototype.dataLocation=0,ot.prototype.doubleData=ut.emptyArray,ot.prototype.uint64Data=ut.emptyArray,ot.create=function(nt){return new ot(nt)},ot.encode=function(nt,lt){if(lt||(lt=ct.create()),nt.dims!=null&&nt.dims.length){lt.uint32(10).fork();for(var ht=0;ht<nt.dims.length;++ht)lt.int64(nt.dims[ht]);lt.ldelim()}if(nt.dataType!=null&&nt.hasOwnProperty("dataType")&&lt.uint32(16).int32(nt.dataType),nt.segment!=null&&nt.hasOwnProperty("segment")&&dt.onnx.TensorProto.Segment.encode(nt.segment,lt.uint32(26).fork()).ldelim(),nt.floatData!=null&&nt.floatData.length){for(lt.uint32(34).fork(),ht=0;ht<nt.floatData.length;++ht)lt.float(nt.floatData[ht]);lt.ldelim()}if(nt.int32Data!=null&&nt.int32Data.length){for(lt.uint32(42).fork(),ht=0;ht<nt.int32Data.length;++ht)lt.int32(nt.int32Data[ht]);lt.ldelim()}if(nt.stringData!=null&&nt.stringData.length)for(ht=0;ht<nt.stringData.length;++ht)lt.uint32(50).bytes(nt.stringData[ht]);if(nt.int64Data!=null&&nt.int64Data.length){for(lt.uint32(58).fork(),ht=0;ht<nt.int64Data.length;++ht)lt.int64(nt.int64Data[ht]);lt.ldelim()}if(nt.name!=null&&nt.hasOwnProperty("name")&&lt.uint32(66).string(nt.name),nt.rawData!=null&&nt.hasOwnProperty("rawData")&&lt.uint32(74).bytes(nt.rawData),nt.doubleData!=null&&nt.doubleData.length){for(lt.uint32(82).fork(),ht=0;ht<nt.doubleData.length;++ht)lt.double(nt.doubleData[ht]);lt.ldelim()}if(nt.uint64Data!=null&&nt.uint64Data.length){for(lt.uint32(90).fork(),ht=0;ht<nt.uint64Data.length;++ht)lt.uint64(nt.uint64Data[ht]);lt.ldelim()}if(nt.docString!=null&&nt.hasOwnProperty("docString")&&lt.uint32(98).string(nt.docString),nt.externalData!=null&&nt.externalData.length)for(ht=0;ht<nt.externalData.length;++ht)dt.onnx.StringStringEntryProto.encode(nt.externalData[ht],lt.uint32(106).fork()).ldelim();return nt.dataLocation!=null&&nt.hasOwnProperty("dataLocation")&&lt.uint32(112).int32(nt.dataLocation),lt},ot.encodeDelimited=function(nt,lt){return this.encode(nt,lt).ldelim()},ot.decode=function(nt,lt){nt instanceof at||(nt=at.create(nt));for(var ht=lt===void 0?nt.len:nt.pos+lt,ft=new dt.onnx.TensorProto;nt.pos<ht;){var gt=nt.uint32();switch(gt>>>3){case 1:if(ft.dims&&ft.dims.length||(ft.dims=[]),(7&gt)==2)for(var mt=nt.uint32()+nt.pos;nt.pos<mt;)ft.dims.push(nt.int64());else ft.dims.push(nt.int64());break;case 2:ft.dataType=nt.int32();break;case 3:ft.segment=dt.onnx.TensorProto.Segment.decode(nt,nt.uint32());break;case 4:if(ft.floatData&&ft.floatData.length||(ft.floatData=[]),(7&gt)==2)for(mt=nt.uint32()+nt.pos;nt.pos<mt;)ft.floatData.push(nt.float());else ft.floatData.push(nt.float());break;case 5:if(ft.int32Data&&ft.int32Data.length||(ft.int32Data=[]),(7&gt)==2)for(mt=nt.uint32()+nt.pos;nt.pos<mt;)ft.int32Data.push(nt.int32());else ft.int32Data.push(nt.int32());break;case 6:ft.stringData&&ft.stringData.length||(ft.stringData=[]),ft.stringData.push(nt.bytes());break;case 7:if(ft.int64Data&&ft.int64Data.length||(ft.int64Data=[]),(7&gt)==2)for(mt=nt.uint32()+nt.pos;nt.pos<mt;)ft.int64Data.push(nt.int64());else ft.int64Data.push(nt.int64());break;case 8:ft.name=nt.string();break;case 12:ft.docString=nt.string();break;case 9:ft.rawData=nt.bytes();break;case 13:ft.externalData&&ft.externalData.length||(ft.externalData=[]),ft.externalData.push(dt.onnx.StringStringEntryProto.decode(nt,nt.uint32()));break;case 14:ft.dataLocation=nt.int32();break;case 10:if(ft.doubleData&&ft.doubleData.length||(ft.doubleData=[]),(7&gt)==2)for(mt=nt.uint32()+nt.pos;nt.pos<mt;)ft.doubleData.push(nt.double());else ft.doubleData.push(nt.double());break;case 11:if(ft.uint64Data&&ft.uint64Data.length||(ft.uint64Data=[]),(7&gt)==2)for(mt=nt.uint32()+nt.pos;nt.pos<mt;)ft.uint64Data.push(nt.uint64());else ft.uint64Data.push(nt.uint64());break;default:nt.skipType(7&gt)}}return ft},ot.decodeDelimited=function(nt){return nt instanceof at||(nt=new at(nt)),this.decode(nt,nt.uint32())},ot.verify=function(nt){if(typeof nt!="object"||nt===null)return"object expected";if(nt.dims!=null&&nt.hasOwnProperty("dims")){if(!Array.isArray(nt.dims))return"dims: array expected";for(var lt=0;lt<nt.dims.length;++lt)if(!(ut.isInteger(nt.dims[lt])||nt.dims[lt]&&ut.isInteger(nt.dims[lt].low)&&ut.isInteger(nt.dims[lt].high)))return"dims: integer|Long[] expected"}if(nt.dataType!=null&&nt.hasOwnProperty("dataType")&&!ut.isInteger(nt.dataType))return"dataType: integer expected";if(nt.segment!=null&&nt.hasOwnProperty("segment")&&(ht=dt.onnx.TensorProto.Segment.verify(nt.segment)))return"segment."+ht;if(nt.floatData!=null&&nt.hasOwnProperty("floatData")){if(!Array.isArray(nt.floatData))return"floatData: array expected";for(lt=0;lt<nt.floatData.length;++lt)if(typeof nt.floatData[lt]!="number")return"floatData: number[] expected"}if(nt.int32Data!=null&&nt.hasOwnProperty("int32Data")){if(!Array.isArray(nt.int32Data))return"int32Data: array expected";for(lt=0;lt<nt.int32Data.length;++lt)if(!ut.isInteger(nt.int32Data[lt]))return"int32Data: integer[] expected"}if(nt.stringData!=null&&nt.hasOwnProperty("stringData")){if(!Array.isArray(nt.stringData))return"stringData: array expected";for(lt=0;lt<nt.stringData.length;++lt)if(!(nt.stringData[lt]&&typeof nt.stringData[lt].length=="number"||ut.isString(nt.stringData[lt])))return"stringData: buffer[] expected"}if(nt.int64Data!=null&&nt.hasOwnProperty("int64Data")){if(!Array.isArray(nt.int64Data))return"int64Data: array expected";for(lt=0;lt<nt.int64Data.length;++lt)if(!(ut.isInteger(nt.int64Data[lt])||nt.int64Data[lt]&&ut.isInteger(nt.int64Data[lt].low)&&ut.isInteger(nt.int64Data[lt].high)))return"int64Data: integer|Long[] expected"}if(nt.name!=null&&nt.hasOwnProperty("name")&&!ut.isString(nt.name))return"name: string expected";if(nt.docString!=null&&nt.hasOwnProperty("docString")&&!ut.isString(nt.docString))return"docString: string expected";if(nt.rawData!=null&&nt.hasOwnProperty("rawData")&&!(nt.rawData&&typeof nt.rawData.length=="number"||ut.isString(nt.rawData)))return"rawData: buffer expected";if(nt.externalData!=null&&nt.hasOwnProperty("externalData")){if(!Array.isArray(nt.externalData))return"externalData: array expected";for(lt=0;lt<nt.externalData.length;++lt){var ht;if(ht=dt.onnx.StringStringEntryProto.verify(nt.externalData[lt]))return"externalData."+ht}}if(nt.dataLocation!=null&&nt.hasOwnProperty("dataLocation"))switch(nt.dataLocation){default:return"dataLocation: enum value expected";case 0:case 1:}if(nt.doubleData!=null&&nt.hasOwnProperty("doubleData")){if(!Array.isArray(nt.doubleData))return"doubleData: array expected";for(lt=0;lt<nt.doubleData.length;++lt)if(typeof nt.doubleData[lt]!="number")return"doubleData: number[] expected"}if(nt.uint64Data!=null&&nt.hasOwnProperty("uint64Data")){if(!Array.isArray(nt.uint64Data))return"uint64Data: array expected";for(lt=0;lt<nt.uint64Data.length;++lt)if(!(ut.isInteger(nt.uint64Data[lt])||nt.uint64Data[lt]&&ut.isInteger(nt.uint64Data[lt].low)&&ut.isInteger(nt.uint64Data[lt].high)))return"uint64Data: integer|Long[] expected"}return null},ot.fromObject=function(nt){if(nt instanceof dt.onnx.TensorProto)return nt;var lt=new dt.onnx.TensorProto;if(nt.dims){if(!Array.isArray(nt.dims))throw TypeError(".onnx.TensorProto.dims: array expected");lt.dims=[];for(var ht=0;ht<nt.dims.length;++ht)ut.Long?(lt.dims[ht]=ut.Long.fromValue(nt.dims[ht])).unsigned=!1:typeof nt.dims[ht]=="string"?lt.dims[ht]=parseInt(nt.dims[ht],10):typeof nt.dims[ht]=="number"?lt.dims[ht]=nt.dims[ht]:typeof nt.dims[ht]=="object"&&(lt.dims[ht]=new ut.LongBits(nt.dims[ht].low>>>0,nt.dims[ht].high>>>0).toNumber())}if(nt.dataType!=null&&(lt.dataType=0|nt.dataType),nt.segment!=null){if(typeof nt.segment!="object")throw TypeError(".onnx.TensorProto.segment: object expected");lt.segment=dt.onnx.TensorProto.Segment.fromObject(nt.segment)}if(nt.floatData){if(!Array.isArray(nt.floatData))throw TypeError(".onnx.TensorProto.floatData: array expected");for(lt.floatData=[],ht=0;ht<nt.floatData.length;++ht)lt.floatData[ht]=Number(nt.floatData[ht])}if(nt.int32Data){if(!Array.isArray(nt.int32Data))throw TypeError(".onnx.TensorProto.int32Data: array expected");for(lt.int32Data=[],ht=0;ht<nt.int32Data.length;++ht)lt.int32Data[ht]=0|nt.int32Data[ht]}if(nt.stringData){if(!Array.isArray(nt.stringData))throw TypeError(".onnx.TensorProto.stringData: array expected");for(lt.stringData=[],ht=0;ht<nt.stringData.length;++ht)typeof nt.stringData[ht]=="string"?ut.base64.decode(nt.stringData[ht],lt.stringData[ht]=ut.newBuffer(ut.base64.length(nt.stringData[ht])),0):nt.stringData[ht].length&&(lt.stringData[ht]=nt.stringData[ht])}if(nt.int64Data){if(!Array.isArray(nt.int64Data))throw TypeError(".onnx.TensorProto.int64Data: array expected");for(lt.int64Data=[],ht=0;ht<nt.int64Data.length;++ht)ut.Long?(lt.int64Data[ht]=ut.Long.fromValue(nt.int64Data[ht])).unsigned=!1:typeof nt.int64Data[ht]=="string"?lt.int64Data[ht]=parseInt(nt.int64Data[ht],10):typeof nt.int64Data[ht]=="number"?lt.int64Data[ht]=nt.int64Data[ht]:typeof nt.int64Data[ht]=="object"&&(lt.int64Data[ht]=new ut.LongBits(nt.int64Data[ht].low>>>0,nt.int64Data[ht].high>>>0).toNumber())}if(nt.name!=null&&(lt.name=String(nt.name)),nt.docString!=null&&(lt.docString=String(nt.docString)),nt.rawData!=null&&(typeof nt.rawData=="string"?ut.base64.decode(nt.rawData,lt.rawData=ut.newBuffer(ut.base64.length(nt.rawData)),0):nt.rawData.length&&(lt.rawData=nt.rawData)),nt.externalData){if(!Array.isArray(nt.externalData))throw TypeError(".onnx.TensorProto.externalData: array expected");for(lt.externalData=[],ht=0;ht<nt.externalData.length;++ht){if(typeof nt.externalData[ht]!="object")throw TypeError(".onnx.TensorProto.externalData: object expected");lt.externalData[ht]=dt.onnx.StringStringEntryProto.fromObject(nt.externalData[ht])}}switch(nt.dataLocation){case"DEFAULT":case 0:lt.dataLocation=0;break;case"EXTERNAL":case 1:lt.dataLocation=1}if(nt.doubleData){if(!Array.isArray(nt.doubleData))throw TypeError(".onnx.TensorProto.doubleData: array expected");for(lt.doubleData=[],ht=0;ht<nt.doubleData.length;++ht)lt.doubleData[ht]=Number(nt.doubleData[ht])}if(nt.uint64Data){if(!Array.isArray(nt.uint64Data))throw TypeError(".onnx.TensorProto.uint64Data: array expected");for(lt.uint64Data=[],ht=0;ht<nt.uint64Data.length;++ht)ut.Long?(lt.uint64Data[ht]=ut.Long.fromValue(nt.uint64Data[ht])).unsigned=!0:typeof nt.uint64Data[ht]=="string"?lt.uint64Data[ht]=parseInt(nt.uint64Data[ht],10):typeof nt.uint64Data[ht]=="number"?lt.uint64Data[ht]=nt.uint64Data[ht]:typeof nt.uint64Data[ht]=="object"&&(lt.uint64Data[ht]=new ut.LongBits(nt.uint64Data[ht].low>>>0,nt.uint64Data[ht].high>>>0).toNumber(!0))}return lt},ot.toObject=function(nt,lt){lt||(lt={});var ht={};if((lt.arrays||lt.defaults)&&(ht.dims=[],ht.floatData=[],ht.int32Data=[],ht.stringData=[],ht.int64Data=[],ht.doubleData=[],ht.uint64Data=[],ht.externalData=[]),lt.defaults&&(ht.dataType=0,ht.segment=null,ht.name="",lt.bytes===String?ht.rawData="":(ht.rawData=[],lt.bytes!==Array&&(ht.rawData=ut.newBuffer(ht.rawData))),ht.docString="",ht.dataLocation=lt.enums===String?"DEFAULT":0),nt.dims&&nt.dims.length){ht.dims=[];for(var ft=0;ft<nt.dims.length;++ft)typeof nt.dims[ft]=="number"?ht.dims[ft]=lt.longs===String?String(nt.dims[ft]):nt.dims[ft]:ht.dims[ft]=lt.longs===String?ut.Long.prototype.toString.call(nt.dims[ft]):lt.longs===Number?new ut.LongBits(nt.dims[ft].low>>>0,nt.dims[ft].high>>>0).toNumber():nt.dims[ft]}if(nt.dataType!=null&&nt.hasOwnProperty("dataType")&&(ht.dataType=nt.dataType),nt.segment!=null&&nt.hasOwnProperty("segment")&&(ht.segment=dt.onnx.TensorProto.Segment.toObject(nt.segment,lt)),nt.floatData&&nt.floatData.length)for(ht.floatData=[],ft=0;ft<nt.floatData.length;++ft)ht.floatData[ft]=lt.json&&!isFinite(nt.floatData[ft])?String(nt.floatData[ft]):nt.floatData[ft];if(nt.int32Data&&nt.int32Data.length)for(ht.int32Data=[],ft=0;ft<nt.int32Data.length;++ft)ht.int32Data[ft]=nt.int32Data[ft];if(nt.stringData&&nt.stringData.length)for(ht.stringData=[],ft=0;ft<nt.stringData.length;++ft)ht.stringData[ft]=lt.bytes===String?ut.base64.encode(nt.stringData[ft],0,nt.stringData[ft].length):lt.bytes===Array?Array.prototype.slice.call(nt.stringData[ft]):nt.stringData[ft];if(nt.int64Data&&nt.int64Data.length)for(ht.int64Data=[],ft=0;ft<nt.int64Data.length;++ft)typeof nt.int64Data[ft]=="number"?ht.int64Data[ft]=lt.longs===String?String(nt.int64Data[ft]):nt.int64Data[ft]:ht.int64Data[ft]=lt.longs===String?ut.Long.prototype.toString.call(nt.int64Data[ft]):lt.longs===Number?new ut.LongBits(nt.int64Data[ft].low>>>0,nt.int64Data[ft].high>>>0).toNumber():nt.int64Data[ft];if(nt.name!=null&&nt.hasOwnProperty("name")&&(ht.name=nt.name),nt.rawData!=null&&nt.hasOwnProperty("rawData")&&(ht.rawData=lt.bytes===String?ut.base64.encode(nt.rawData,0,nt.rawData.length):lt.bytes===Array?Array.prototype.slice.call(nt.rawData):nt.rawData),nt.doubleData&&nt.doubleData.length)for(ht.doubleData=[],ft=0;ft<nt.doubleData.length;++ft)ht.doubleData[ft]=lt.json&&!isFinite(nt.doubleData[ft])?String(nt.doubleData[ft]):nt.doubleData[ft];if(nt.uint64Data&&nt.uint64Data.length)for(ht.uint64Data=[],ft=0;ft<nt.uint64Data.length;++ft)typeof nt.uint64Data[ft]=="number"?ht.uint64Data[ft]=lt.longs===String?String(nt.uint64Data[ft]):nt.uint64Data[ft]:ht.uint64Data[ft]=lt.longs===String?ut.Long.prototype.toString.call(nt.uint64Data[ft]):lt.longs===Number?new ut.LongBits(nt.uint64Data[ft].low>>>0,nt.uint64Data[ft].high>>>0).toNumber(!0):nt.uint64Data[ft];if(nt.docString!=null&&nt.hasOwnProperty("docString")&&(ht.docString=nt.docString),nt.externalData&&nt.externalData.length)for(ht.externalData=[],ft=0;ft<nt.externalData.length;++ft)ht.externalData[ft]=dt.onnx.StringStringEntryProto.toObject(nt.externalData[ft],lt);return nt.dataLocation!=null&&nt.hasOwnProperty("dataLocation")&&(ht.dataLocation=lt.enums===String?dt.onnx.TensorProto.DataLocation[nt.dataLocation]:nt.dataLocation),ht},ot.prototype.toJSON=function(){return this.constructor.toObject(this,st.util.toJSONOptions)},ot.DataType=function(){var nt={},lt=Object.create(nt);return lt[nt[0]="UNDEFINED"]=0,lt[nt[1]="FLOAT"]=1,lt[nt[2]="UINT8"]=2,lt[nt[3]="INT8"]=3,lt[nt[4]="UINT16"]=4,lt[nt[5]="INT16"]=5,lt[nt[6]="INT32"]=6,lt[nt[7]="INT64"]=7,lt[nt[8]="STRING"]=8,lt[nt[9]="BOOL"]=9,lt[nt[10]="FLOAT16"]=10,lt[nt[11]="DOUBLE"]=11,lt[nt[12]="UINT32"]=12,lt[nt[13]="UINT64"]=13,lt[nt[14]="COMPLEX64"]=14,lt[nt[15]="COMPLEX128"]=15,lt[nt[16]="BFLOAT16"]=16,lt}(),ot.Segment=function(){function nt(lt){if(lt)for(var ht=Object.keys(lt),ft=0;ft<ht.length;++ft)lt[ht[ft]]!=null&&(this[ht[ft]]=lt[ht[ft]])}return nt.prototype.begin=ut.Long?ut.Long.fromBits(0,0,!1):0,nt.prototype.end=ut.Long?ut.Long.fromBits(0,0,!1):0,nt.create=function(lt){return new nt(lt)},nt.encode=function(lt,ht){return ht||(ht=ct.create()),lt.begin!=null&&lt.hasOwnProperty("begin")&&ht.uint32(8).int64(lt.begin),lt.end!=null&&lt.hasOwnProperty("end")&&ht.uint32(16).int64(lt.end),ht},nt.encodeDelimited=function(lt,ht){return this.encode(lt,ht).ldelim()},nt.decode=function(lt,ht){lt instanceof at||(lt=at.create(lt));for(var ft=ht===void 0?lt.len:lt.pos+ht,gt=new dt.onnx.TensorProto.Segment;lt.pos<ft;){var mt=lt.uint32();switch(mt>>>3){case 1:gt.begin=lt.int64();break;case 2:gt.end=lt.int64();break;default:lt.skipType(7&mt)}}return gt},nt.decodeDelimited=function(lt){return lt instanceof at||(lt=new at(lt)),this.decode(lt,lt.uint32())},nt.verify=function(lt){return typeof lt!="object"||lt===null?"object expected":lt.begin!=null&&lt.hasOwnProperty("begin")&&!(ut.isInteger(lt.begin)||lt.begin&&ut.isInteger(lt.begin.low)&&ut.isInteger(lt.begin.high))?"begin: integer|Long expected":lt.end!=null&&lt.hasOwnProperty("end")&&!(ut.isInteger(lt.end)||lt.end&&ut.isInteger(lt.end.low)&&ut.isInteger(lt.end.high))?"end: integer|Long expected":null},nt.fromObject=function(lt){if(lt instanceof dt.onnx.TensorProto.Segment)return lt;var ht=new dt.onnx.TensorProto.Segment;return lt.begin!=null&&(ut.Long?(ht.begin=ut.Long.fromValue(lt.begin)).unsigned=!1:typeof lt.begin=="string"?ht.begin=parseInt(lt.begin,10):typeof lt.begin=="number"?ht.begin=lt.begin:typeof lt.begin=="object"&&(ht.begin=new ut.LongBits(lt.begin.low>>>0,lt.begin.high>>>0).toNumber())),lt.end!=null&&(ut.Long?(ht.end=ut.Long.fromValue(lt.end)).unsigned=!1:typeof lt.end=="string"?ht.end=parseInt(lt.end,10):typeof lt.end=="number"?ht.end=lt.end:typeof lt.end=="object"&&(ht.end=new ut.LongBits(lt.end.low>>>0,lt.end.high>>>0).toNumber())),ht},nt.toObject=function(lt,ht){ht||(ht={});var ft={};if(ht.defaults){if(ut.Long){var gt=new ut.Long(0,0,!1);ft.begin=ht.longs===String?gt.toString():ht.longs===Number?gt.toNumber():gt}else ft.begin=ht.longs===String?"0":0;ut.Long?(gt=new ut.Long(0,0,!1),ft.end=ht.longs===String?gt.toString():ht.longs===Number?gt.toNumber():gt):ft.end=ht.longs===String?"0":0}return lt.begin!=null&&lt.hasOwnProperty("begin")&&(typeof lt.begin=="number"?ft.begin=ht.longs===String?String(lt.begin):lt.begin:ft.begin=ht.longs===String?ut.Long.prototype.toString.call(lt.begin):ht.longs===Number?new ut.LongBits(lt.begin.low>>>0,lt.begin.high>>>0).toNumber():lt.begin),lt.end!=null&&lt.hasOwnProperty("end")&&(typeof lt.end=="number"?ft.end=ht.longs===String?String(lt.end):lt.end:ft.end=ht.longs===String?ut.Long.prototype.toString.call(lt.end):ht.longs===Number?new ut.LongBits(lt.end.low>>>0,lt.end.high>>>0).toNumber():lt.end),ft},nt.prototype.toJSON=function(){return this.constructor.toObject(this,st.util.toJSONOptions)},nt}(),ot.DataLocation=function(){var nt={},lt=Object.create(nt);return lt[nt[0]="DEFAULT"]=0,lt[nt[1]="EXTERNAL"]=1,lt}(),ot}(),it.TensorShapeProto=function(){function ot(nt){if(this.dim=[],nt)for(var lt=Object.keys(nt),ht=0;ht<lt.length;++ht)nt[lt[ht]]!=null&&(this[lt[ht]]=nt[lt[ht]])}return ot.prototype.dim=ut.emptyArray,ot.create=function(nt){return new ot(nt)},ot.encode=function(nt,lt){if(lt||(lt=ct.create()),nt.dim!=null&&nt.dim.length)for(var ht=0;ht<nt.dim.length;++ht)dt.onnx.TensorShapeProto.Dimension.encode(nt.dim[ht],lt.uint32(10).fork()).ldelim();return lt},ot.encodeDelimited=function(nt,lt){return this.encode(nt,lt).ldelim()},ot.decode=function(nt,lt){nt instanceof at||(nt=at.create(nt));for(var ht=lt===void 0?nt.len:nt.pos+lt,ft=new dt.onnx.TensorShapeProto;nt.pos<ht;){var gt=nt.uint32();gt>>>3==1?(ft.dim&&ft.dim.length||(ft.dim=[]),ft.dim.push(dt.onnx.TensorShapeProto.Dimension.decode(nt,nt.uint32()))):nt.skipType(7&gt)}return ft},ot.decodeDelimited=function(nt){return nt instanceof at||(nt=new at(nt)),this.decode(nt,nt.uint32())},ot.verify=function(nt){if(typeof nt!="object"||nt===null)return"object expected";if(nt.dim!=null&&nt.hasOwnProperty("dim")){if(!Array.isArray(nt.dim))return"dim: array expected";for(var lt=0;lt<nt.dim.length;++lt){var ht=dt.onnx.TensorShapeProto.Dimension.verify(nt.dim[lt]);if(ht)return"dim."+ht}}return null},ot.fromObject=function(nt){if(nt instanceof dt.onnx.TensorShapeProto)return nt;var lt=new dt.onnx.TensorShapeProto;if(nt.dim){if(!Array.isArray(nt.dim))throw TypeError(".onnx.TensorShapeProto.dim: array expected");lt.dim=[];for(var ht=0;ht<nt.dim.length;++ht){if(typeof nt.dim[ht]!="object")throw TypeError(".onnx.TensorShapeProto.dim: object expected");lt.dim[ht]=dt.onnx.TensorShapeProto.Dimension.fromObject(nt.dim[ht])}}return lt},ot.toObject=function(nt,lt){lt||(lt={});var ht={};if((lt.arrays||lt.defaults)&&(ht.dim=[]),nt.dim&&nt.dim.length){ht.dim=[];for(var ft=0;ft<nt.dim.length;++ft)ht.dim[ft]=dt.onnx.TensorShapeProto.Dimension.toObject(nt.dim[ft],lt)}return ht},ot.prototype.toJSON=function(){return this.constructor.toObject(this,st.util.toJSONOptions)},ot.Dimension=function(){function nt(ht){if(ht)for(var ft=Object.keys(ht),gt=0;gt<ft.length;++gt)ht[ft[gt]]!=null&&(this[ft[gt]]=ht[ft[gt]])}var lt;return nt.prototype.dimValue=ut.Long?ut.Long.fromBits(0,0,!1):0,nt.prototype.dimParam="",nt.prototype.denotation="",Object.defineProperty(nt.prototype,"value",{get:ut.oneOfGetter(lt=["dimValue","dimParam"]),set:ut.oneOfSetter(lt)}),nt.create=function(ht){return new nt(ht)},nt.encode=function(ht,ft){return ft||(ft=ct.create()),ht.dimValue!=null&&ht.hasOwnProperty("dimValue")&&ft.uint32(8).int64(ht.dimValue),ht.dimParam!=null&&ht.hasOwnProperty("dimParam")&&ft.uint32(18).string(ht.dimParam),ht.denotation!=null&&ht.hasOwnProperty("denotation")&&ft.uint32(26).string(ht.denotation),ft},nt.encodeDelimited=function(ht,ft){return this.encode(ht,ft).ldelim()},nt.decode=function(ht,ft){ht instanceof at||(ht=at.create(ht));for(var gt=ft===void 0?ht.len:ht.pos+ft,mt=new dt.onnx.TensorShapeProto.Dimension;ht.pos<gt;){var yt=ht.uint32();switch(yt>>>3){case 1:mt.dimValue=ht.int64();break;case 2:mt.dimParam=ht.string();break;case 3:mt.denotation=ht.string();break;default:ht.skipType(7&yt)}}return mt},nt.decodeDelimited=function(ht){return ht instanceof at||(ht=new at(ht)),this.decode(ht,ht.uint32())},nt.verify=function(ht){if(typeof ht!="object"||ht===null)return"object expected";var ft={};if(ht.dimValue!=null&&ht.hasOwnProperty("dimValue")&&(ft.value=1,!(ut.isInteger(ht.dimValue)||ht.dimValue&&ut.isInteger(ht.dimValue.low)&&ut.isInteger(ht.dimValue.high))))return"dimValue: integer|Long expected";if(ht.dimParam!=null&&ht.hasOwnProperty("dimParam")){if(ft.value===1)return"value: multiple values";if(ft.value=1,!ut.isString(ht.dimParam))return"dimParam: string expected"}return ht.denotation!=null&&ht.hasOwnProperty("denotation")&&!ut.isString(ht.denotation)?"denotation: string expected":null},nt.fromObject=function(ht){if(ht instanceof dt.onnx.TensorShapeProto.Dimension)return ht;var ft=new dt.onnx.TensorShapeProto.Dimension;return ht.dimValue!=null&&(ut.Long?(ft.dimValue=ut.Long.fromValue(ht.dimValue)).unsigned=!1:typeof ht.dimValue=="string"?ft.dimValue=parseInt(ht.dimValue,10):typeof ht.dimValue=="number"?ft.dimValue=ht.dimValue:typeof ht.dimValue=="object"&&(ft.dimValue=new ut.LongBits(ht.dimValue.low>>>0,ht.dimValue.high>>>0).toNumber())),ht.dimParam!=null&&(ft.dimParam=String(ht.dimParam)),ht.denotation!=null&&(ft.denotation=String(ht.denotation)),ft},nt.toObject=function(ht,ft){ft||(ft={});var gt={};return ft.defaults&&(gt.denotation=""),ht.dimValue!=null&&ht.hasOwnProperty("dimValue")&&(typeof ht.dimValue=="number"?gt.dimValue=ft.longs===String?String(ht.dimValue):ht.dimValue:gt.dimValue=ft.longs===String?ut.Long.prototype.toString.call(ht.dimValue):ft.longs===Number?new ut.LongBits(ht.dimValue.low>>>0,ht.dimValue.high>>>0).toNumber():ht.dimValue,ft.oneofs&&(gt.value="dimValue")),ht.dimParam!=null&&ht.hasOwnProperty("dimParam")&&(gt.dimParam=ht.dimParam,ft.oneofs&&(gt.value="dimParam")),ht.denotation!=null&&ht.hasOwnProperty("denotation")&&(gt.denotation=ht.denotation),gt},nt.prototype.toJSON=function(){return this.constructor.toObject(this,st.util.toJSONOptions)},nt}(),ot}(),it.TypeProto=function(){function ot(lt){if(lt)for(var ht=Object.keys(lt),ft=0;ft<ht.length;++ft)lt[ht[ft]]!=null&&(this[ht[ft]]=lt[ht[ft]])}var nt;return ot.prototype.tensorType=null,ot.prototype.denotation="",Object.defineProperty(ot.prototype,"value",{get:ut.oneOfGetter(nt=["tensorType"]),set:ut.oneOfSetter(nt)}),ot.create=function(lt){return new ot(lt)},ot.encode=function(lt,ht){return ht||(ht=ct.create()),lt.tensorType!=null&&lt.hasOwnProperty("tensorType")&&dt.onnx.TypeProto.Tensor.encode(lt.tensorType,ht.uint32(10).fork()).ldelim(),lt.denotation!=null&&lt.hasOwnProperty("denotation")&&ht.uint32(50).string(lt.denotation),ht},ot.encodeDelimited=function(lt,ht){return this.encode(lt,ht).ldelim()},ot.decode=function(lt,ht){lt instanceof at||(lt=at.create(lt));for(var ft=ht===void 0?lt.len:lt.pos+ht,gt=new dt.onnx.TypeProto;lt.pos<ft;){var mt=lt.uint32();switch(mt>>>3){case 1:gt.tensorType=dt.onnx.TypeProto.Tensor.decode(lt,lt.uint32());break;case 6:gt.denotation=lt.string();break;default:lt.skipType(7&mt)}}return gt},ot.decodeDelimited=function(lt){return lt instanceof at||(lt=new at(lt)),this.decode(lt,lt.uint32())},ot.verify=function(lt){if(typeof lt!="object"||lt===null)return"object expected";if(lt.tensorType!=null&&lt.hasOwnProperty("tensorType")){var ht=dt.onnx.TypeProto.Tensor.verify(lt.tensorType);if(ht)return"tensorType."+ht}return lt.denotation!=null&&lt.hasOwnProperty("denotation")&&!ut.isString(lt.denotation)?"denotation: string expected":null},ot.fromObject=function(lt){if(lt instanceof dt.onnx.TypeProto)return lt;var ht=new dt.onnx.TypeProto;if(lt.tensorType!=null){if(typeof lt.tensorType!="object")throw TypeError(".onnx.TypeProto.tensorType: object expected");ht.tensorType=dt.onnx.TypeProto.Tensor.fromObject(lt.tensorType)}return lt.denotation!=null&&(ht.denotation=String(lt.denotation)),ht},ot.toObject=function(lt,ht){ht||(ht={});var ft={};return ht.defaults&&(ft.denotation=""),lt.tensorType!=null&&lt.hasOwnProperty("tensorType")&&(ft.tensorType=dt.onnx.TypeProto.Tensor.toObject(lt.tensorType,ht),ht.oneofs&&(ft.value="tensorType")),lt.denotation!=null&&lt.hasOwnProperty("denotation")&&(ft.denotation=lt.denotation),ft},ot.prototype.toJSON=function(){return this.constructor.toObject(this,st.util.toJSONOptions)},ot.Tensor=function(){function lt(ht){if(ht)for(var ft=Object.keys(ht),gt=0;gt<ft.length;++gt)ht[ft[gt]]!=null&&(this[ft[gt]]=ht[ft[gt]])}return lt.prototype.elemType=0,lt.prototype.shape=null,lt.create=function(ht){return new lt(ht)},lt.encode=function(ht,ft){return ft||(ft=ct.create()),ht.elemType!=null&&ht.hasOwnProperty("elemType")&&ft.uint32(8).int32(ht.elemType),ht.shape!=null&&ht.hasOwnProperty("shape")&&dt.onnx.TensorShapeProto.encode(ht.shape,ft.uint32(18).fork()).ldelim(),ft},lt.encodeDelimited=function(ht,ft){return this.encode(ht,ft).ldelim()},lt.decode=function(ht,ft){ht instanceof at||(ht=at.create(ht));for(var gt=ft===void 0?ht.len:ht.pos+ft,mt=new dt.onnx.TypeProto.Tensor;ht.pos<gt;){var yt=ht.uint32();switch(yt>>>3){case 1:mt.elemType=ht.int32();break;case 2:mt.shape=dt.onnx.TensorShapeProto.decode(ht,ht.uint32());break;default:ht.skipType(7&yt)}}return mt},lt.decodeDelimited=function(ht){return ht instanceof at||(ht=new at(ht)),this.decode(ht,ht.uint32())},lt.verify=function(ht){if(typeof ht!="object"||ht===null)return"object expected";if(ht.elemType!=null&&ht.hasOwnProperty("elemType")&&!ut.isInteger(ht.elemType))return"elemType: integer expected";if(ht.shape!=null&&ht.hasOwnProperty("shape")){var ft=dt.onnx.TensorShapeProto.verify(ht.shape);if(ft)return"shape."+ft}return null},lt.fromObject=function(ht){if(ht instanceof dt.onnx.TypeProto.Tensor)return ht;var ft=new dt.onnx.TypeProto.Tensor;if(ht.elemType!=null&&(ft.elemType=0|ht.elemType),ht.shape!=null){if(typeof ht.shape!="object")throw TypeError(".onnx.TypeProto.Tensor.shape: object expected");ft.shape=dt.onnx.TensorShapeProto.fromObject(ht.shape)}return ft},lt.toObject=function(ht,ft){ft||(ft={});var gt={};return ft.defaults&&(gt.elemType=0,gt.shape=null),ht.elemType!=null&&ht.hasOwnProperty("elemType")&&(gt.elemType=ht.elemType),ht.shape!=null&&ht.hasOwnProperty("shape")&&(gt.shape=dt.onnx.TensorShapeProto.toObject(ht.shape,ft)),gt},lt.prototype.toJSON=function(){return this.constructor.toObject(this,st.util.toJSONOptions)},lt}(),ot}(),it.OperatorSetIdProto=function(){function ot(nt){if(nt)for(var lt=Object.keys(nt),ht=0;ht<lt.length;++ht)nt[lt[ht]]!=null&&(this[lt[ht]]=nt[lt[ht]])}return ot.prototype.domain="",ot.prototype.version=ut.Long?ut.Long.fromBits(0,0,!1):0,ot.create=function(nt){return new ot(nt)},ot.encode=function(nt,lt){return lt||(lt=ct.create()),nt.domain!=null&&nt.hasOwnProperty("domain")&&lt.uint32(10).string(nt.domain),nt.version!=null&&nt.hasOwnProperty("version")&&lt.uint32(16).int64(nt.version),lt},ot.encodeDelimited=function(nt,lt){return this.encode(nt,lt).ldelim()},ot.decode=function(nt,lt){nt instanceof at||(nt=at.create(nt));for(var ht=lt===void 0?nt.len:nt.pos+lt,ft=new dt.onnx.OperatorSetIdProto;nt.pos<ht;){var gt=nt.uint32();switch(gt>>>3){case 1:ft.domain=nt.string();break;case 2:ft.version=nt.int64();break;default:nt.skipType(7&gt)}}return ft},ot.decodeDelimited=function(nt){return nt instanceof at||(nt=new at(nt)),this.decode(nt,nt.uint32())},ot.verify=function(nt){return typeof nt!="object"||nt===null?"object expected":nt.domain!=null&&nt.hasOwnProperty("domain")&&!ut.isString(nt.domain)?"domain: string expected":nt.version!=null&&nt.hasOwnProperty("version")&&!(ut.isInteger(nt.version)||nt.version&&ut.isInteger(nt.version.low)&&ut.isInteger(nt.version.high))?"version: integer|Long expected":null},ot.fromObject=function(nt){if(nt instanceof dt.onnx.OperatorSetIdProto)return nt;var lt=new dt.onnx.OperatorSetIdProto;return nt.domain!=null&&(lt.domain=String(nt.domain)),nt.version!=null&&(ut.Long?(lt.version=ut.Long.fromValue(nt.version)).unsigned=!1:typeof nt.version=="string"?lt.version=parseInt(nt.version,10):typeof nt.version=="number"?lt.version=nt.version:typeof nt.version=="object"&&(lt.version=new ut.LongBits(nt.version.low>>>0,nt.version.high>>>0).toNumber())),lt},ot.toObject=function(nt,lt){lt||(lt={});var ht={};if(lt.defaults)if(ht.domain="",ut.Long){var ft=new ut.Long(0,0,!1);ht.version=lt.longs===String?ft.toString():lt.longs===Number?ft.toNumber():ft}else ht.version=lt.longs===String?"0":0;return nt.domain!=null&&nt.hasOwnProperty("domain")&&(ht.domain=nt.domain),nt.version!=null&&nt.hasOwnProperty("version")&&(typeof nt.version=="number"?ht.version=lt.longs===String?String(nt.version):nt.version:ht.version=lt.longs===String?ut.Long.prototype.toString.call(nt.version):lt.longs===Number?new ut.LongBits(nt.version.low>>>0,nt.version.high>>>0).toNumber():nt.version),ht},ot.prototype.toJSON=function(){return this.constructor.toObject(this,st.util.toJSONOptions)},ot}(),it),_e.exports=dt},2100:(_e,_,et)=>{_e.exports=et(9482)},9482:(_e,_,et)=>{var tt=_;function rt(){tt.util._configure(),tt.Writer._configure(tt.BufferWriter),tt.Reader._configure(tt.BufferReader)}tt.build="minimal",tt.Writer=et(1173),tt.BufferWriter=et(3155),tt.Reader=et(1408),tt.BufferReader=et(593),tt.util=et(9693),tt.rpc=et(5994),tt.roots=et(5054),tt.configure=rt,rt()},1408:(_e,_,et)=>{_e.exports=ct;var tt,rt=et(9693),it=rt.LongBits,st=rt.utf8;function at(ft,gt){return RangeError("index out of range: "+ft.pos+" + "+(gt||1)+" > "+ft.len)}function ct(ft){this.buf=ft,this.pos=0,this.len=ft.length}var ut,dt=typeof Uint8Array<"u"?function(ft){if(ft instanceof Uint8Array||Array.isArray(ft))return new ct(ft);throw Error("illegal buffer")}:function(ft){if(Array.isArray(ft))return new ct(ft);throw Error("illegal buffer")},ot=function(){return rt.Buffer?function(ft){return(ct.create=function(gt){return rt.Buffer.isBuffer(gt)?new tt(gt):dt(gt)})(ft)}:dt};function nt(){var ft=new it(0,0),gt=0;if(!(this.len-this.pos>4)){for(;gt<3;++gt){if(this.pos>=this.len)throw at(this);if(ft.lo=(ft.lo|(127&this.buf[this.pos])<<7*gt)>>>0,this.buf[this.pos++]<128)return ft}return ft.lo=(ft.lo|(127&this.buf[this.pos++])<<7*gt)>>>0,ft}for(;gt<4;++gt)if(ft.lo=(ft.lo|(127&this.buf[this.pos])<<7*gt)>>>0,this.buf[this.pos++]<128)return ft;if(ft.lo=(ft.lo|(127&this.buf[this.pos])<<28)>>>0,ft.hi=(ft.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return ft;if(gt=0,this.len-this.pos>4){for(;gt<5;++gt)if(ft.hi=(ft.hi|(127&this.buf[this.pos])<<7*gt+3)>>>0,this.buf[this.pos++]<128)return ft}else for(;gt<5;++gt){if(this.pos>=this.len)throw at(this);if(ft.hi=(ft.hi|(127&this.buf[this.pos])<<7*gt+3)>>>0,this.buf[this.pos++]<128)return ft}throw Error("invalid varint encoding")}function lt(ft,gt){return(ft[gt-4]|ft[gt-3]<<8|ft[gt-2]<<16|ft[gt-1]<<24)>>>0}function ht(){if(this.pos+8>this.len)throw at(this,8);return new it(lt(this.buf,this.pos+=4),lt(this.buf,this.pos+=4))}ct.create=ot(),ct.prototype._slice=rt.Array.prototype.subarray||rt.Array.prototype.slice,ct.prototype.uint32=(ut=4294967295,function(){if(ut=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(ut=(ut|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(ut=(ut|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(ut=(ut|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(ut=(ut|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128))return ut;if((this.pos+=5)>this.len)throw this.pos=this.len,at(this,10);return ut}),ct.prototype.int32=function(){return 0|this.uint32()},ct.prototype.sint32=function(){var ft=this.uint32();return ft>>>1^-(1&ft)|0},ct.prototype.bool=function(){return this.uint32()!==0},ct.prototype.fixed32=function(){if(this.pos+4>this.len)throw at(this,4);return lt(this.buf,this.pos+=4)},ct.prototype.sfixed32=function(){if(this.pos+4>this.len)throw at(this,4);return 0|lt(this.buf,this.pos+=4)},ct.prototype.float=function(){if(this.pos+4>this.len)throw at(this,4);var ft=rt.float.readFloatLE(this.buf,this.pos);return this.pos+=4,ft},ct.prototype.double=function(){if(this.pos+8>this.len)throw at(this,4);var ft=rt.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,ft},ct.prototype.bytes=function(){var ft=this.uint32(),gt=this.pos,mt=this.pos+ft;if(mt>this.len)throw at(this,ft);return this.pos+=ft,Array.isArray(this.buf)?this.buf.slice(gt,mt):gt===mt?new this.buf.constructor(0):this._slice.call(this.buf,gt,mt)},ct.prototype.string=function(){var ft=this.bytes();return st.read(ft,0,ft.length)},ct.prototype.skip=function(ft){if(typeof ft=="number"){if(this.pos+ft>this.len)throw at(this,ft);this.pos+=ft}else do if(this.pos>=this.len)throw at(this);while(128&this.buf[this.pos++]);return this},ct.prototype.skipType=function(ft){switch(ft){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(ft=7&this.uint32())!=4;)this.skipType(ft);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+ft+" at offset "+this.pos)}return this},ct._configure=function(ft){tt=ft,ct.create=ot(),tt._configure();var gt=rt.Long?"toLong":"toNumber";rt.merge(ct.prototype,{int64:function(){return nt.call(this)[gt](!1)},uint64:function(){return nt.call(this)[gt](!0)},sint64:function(){return nt.call(this).zzDecode()[gt](!1)},fixed64:function(){return ht.call(this)[gt](!0)},sfixed64:function(){return ht.call(this)[gt](!1)}})}},593:(_e,_,et)=>{_e.exports=it;var tt=et(1408);(it.prototype=Object.create(tt.prototype)).constructor=it;var rt=et(9693);function it(st){tt.call(this,st)}it._configure=function(){rt.Buffer&&(it.prototype._slice=rt.Buffer.prototype.slice)},it.prototype.string=function(){var st=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+st,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+st,this.len))},it._configure()},5054:_e=>{_e.exports={}},5994:(_e,_,et)=>{_.Service=et(7948)},7948:(_e,_,et)=>{_e.exports=rt;var tt=et(9693);function rt(it,st,at){if(typeof it!="function")throw TypeError("rpcImpl must be a function");tt.EventEmitter.call(this),this.rpcImpl=it,this.requestDelimited=!!st,this.responseDelimited=!!at}(rt.prototype=Object.create(tt.EventEmitter.prototype)).constructor=rt,rt.prototype.rpcCall=function it(st,at,ct,ut,dt){if(!ut)throw TypeError("request must be specified");var ot=this;if(!dt)return tt.asPromise(it,ot,st,at,ct,ut);if(ot.rpcImpl)try{return ot.rpcImpl(st,at[ot.requestDelimited?"encodeDelimited":"encode"](ut).finish(),function(nt,lt){if(nt)return ot.emit("error",nt,st),dt(nt);if(lt!==null){if(!(lt instanceof ct))try{lt=ct[ot.responseDelimited?"decodeDelimited":"decode"](lt)}catch(ht){return ot.emit("error",ht,st),dt(ht)}return ot.emit("data",lt,st),dt(null,lt)}ot.end(!0)})}catch(nt){return ot.emit("error",nt,st),void setTimeout(function(){dt(nt)},0)}else setTimeout(function(){dt(Error("already ended"))},0)},rt.prototype.end=function(it){return this.rpcImpl&&(it||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},1945:(_e,_,et)=>{_e.exports=rt;var tt=et(9693);function rt(ct,ut){this.lo=ct>>>0,this.hi=ut>>>0}var it=rt.zero=new rt(0,0);it.toNumber=function(){return 0},it.zzEncode=it.zzDecode=function(){return this},it.length=function(){return 1};var st=rt.zeroHash="\0\0\0\0\0\0\0\0";rt.fromNumber=function(ct){if(ct===0)return it;var ut=ct<0;ut&&(ct=-ct);var dt=ct>>>0,ot=(ct-dt)/4294967296>>>0;return ut&&(ot=~ot>>>0,dt=~dt>>>0,++dt>4294967295&&(dt=0,++ot>4294967295&&(ot=0))),new rt(dt,ot)},rt.from=function(ct){if(typeof ct=="number")return rt.fromNumber(ct);if(tt.isString(ct)){if(!tt.Long)return rt.fromNumber(parseInt(ct,10));ct=tt.Long.fromString(ct)}return ct.low||ct.high?new rt(ct.low>>>0,ct.high>>>0):it},rt.prototype.toNumber=function(ct){if(!ct&&this.hi>>>31){var ut=1+~this.lo>>>0,dt=~this.hi>>>0;return ut||(dt=dt+1>>>0),-(ut+4294967296*dt)}return this.lo+4294967296*this.hi},rt.prototype.toLong=function(ct){return tt.Long?new tt.Long(0|this.lo,0|this.hi,!!ct):{low:0|this.lo,high:0|this.hi,unsigned:!!ct}};var at=String.prototype.charCodeAt;rt.fromHash=function(ct){return ct===st?it:new rt((at.call(ct,0)|at.call(ct,1)<<8|at.call(ct,2)<<16|at.call(ct,3)<<24)>>>0,(at.call(ct,4)|at.call(ct,5)<<8|at.call(ct,6)<<16|at.call(ct,7)<<24)>>>0)},rt.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},rt.prototype.zzEncode=function(){var ct=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^ct)>>>0,this.lo=(this.lo<<1^ct)>>>0,this},rt.prototype.zzDecode=function(){var ct=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^ct)>>>0,this.hi=(this.hi>>>1^ct)>>>0,this},rt.prototype.length=function(){var ct=this.lo,ut=(this.lo>>>28|this.hi<<4)>>>0,dt=this.hi>>>24;return dt===0?ut===0?ct<16384?ct<128?1:2:ct<2097152?3:4:ut<16384?ut<128?5:6:ut<2097152?7:8:dt<128?9:10}},9693:function(_e,_,et){var tt=_;function rt(st,at,ct){for(var ut=Object.keys(at),dt=0;dt<ut.length;++dt)st[ut[dt]]!==void 0&&ct||(st[ut[dt]]=at[ut[dt]]);return st}function it(st){function at(ct,ut){if(!(this instanceof at))return new at(ct,ut);Object.defineProperty(this,"message",{get:function(){return ct}}),Error.captureStackTrace?Error.captureStackTrace(this,at):Object.defineProperty(this,"stack",{value:new Error().stack||""}),ut&&rt(this,ut)}return(at.prototype=Object.create(Error.prototype)).constructor=at,Object.defineProperty(at.prototype,"name",{get:function(){return st}}),at.prototype.toString=function(){return this.name+": "+this.message},at}tt.asPromise=et(4537),tt.base64=et(7419),tt.EventEmitter=et(9211),tt.float=et(945),tt.inquire=et(7199),tt.utf8=et(4997),tt.pool=et(6662),tt.LongBits=et(1945),tt.isNode=!!(et.g!==void 0&&et.g&&et.g.process&&et.g.process.versions&&et.g.process.versions.node),tt.global=tt.isNode&&et.g||typeof window<"u"&&window||typeof self<"u"&&self||this,tt.emptyArray=Object.freeze?Object.freeze([]):[],tt.emptyObject=Object.freeze?Object.freeze({}):{},tt.isInteger=Number.isInteger||function(st){return typeof st=="number"&&isFinite(st)&&Math.floor(st)===st},tt.isString=function(st){return typeof st=="string"||st instanceof String},tt.isObject=function(st){return st&&typeof st=="object"},tt.isset=tt.isSet=function(st,at){var ct=st[at];return!(ct==null||!st.hasOwnProperty(at))&&(typeof ct!="object"||(Array.isArray(ct)?ct.length:Object.keys(ct).length)>0)},tt.Buffer=function(){try{var st=tt.inquire("buffer").Buffer;return st.prototype.utf8Write?st:null}catch{return null}}(),tt._Buffer_from=null,tt._Buffer_allocUnsafe=null,tt.newBuffer=function(st){return typeof st=="number"?tt.Buffer?tt._Buffer_allocUnsafe(st):new tt.Array(st):tt.Buffer?tt._Buffer_from(st):typeof Uint8Array>"u"?st:new Uint8Array(st)},tt.Array=typeof Uint8Array<"u"?Uint8Array:Array,tt.Long=tt.global.dcodeIO&&tt.global.dcodeIO.Long||tt.global.Long||tt.inquire("long"),tt.key2Re=/^true|false|0|1$/,tt.key32Re=/^-?(?:0|[1-9][0-9]*)$/,tt.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,tt.longToHash=function(st){return st?tt.LongBits.from(st).toHash():tt.LongBits.zeroHash},tt.longFromHash=function(st,at){var ct=tt.LongBits.fromHash(st);return tt.Long?tt.Long.fromBits(ct.lo,ct.hi,at):ct.toNumber(!!at)},tt.merge=rt,tt.lcFirst=function(st){return st.charAt(0).toLowerCase()+st.substring(1)},tt.newError=it,tt.ProtocolError=it("ProtocolError"),tt.oneOfGetter=function(st){for(var at={},ct=0;ct<st.length;++ct)at[st[ct]]=1;return function(){for(var ut=Object.keys(this),dt=ut.length-1;dt>-1;--dt)if(at[ut[dt]]===1&&this[ut[dt]]!==void 0&&this[ut[dt]]!==null)return ut[dt]}},tt.oneOfSetter=function(st){return function(at){for(var ct=0;ct<st.length;++ct)st[ct]!==at&&delete this[st[ct]]}},tt.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},tt._configure=function(){var st=tt.Buffer;st?(tt._Buffer_from=st.from!==Uint8Array.from&&st.from||function(at,ct){return new st(at,ct)},tt._Buffer_allocUnsafe=st.allocUnsafe||function(at){return new st(at)}):tt._Buffer_from=tt._Buffer_allocUnsafe=null}},1173:(_e,_,et)=>{_e.exports=ot;var tt,rt=et(9693),it=rt.LongBits,st=rt.base64,at=rt.utf8;function ct(yt,bt,_t){this.fn=yt,this.len=bt,this.next=void 0,this.val=_t}function ut(){}function dt(yt){this.head=yt.head,this.tail=yt.tail,this.len=yt.len,this.next=yt.states}function ot(){this.len=0,this.head=new ct(ut,0,0),this.tail=this.head,this.states=null}var nt=function(){return rt.Buffer?function(){return(ot.create=function(){return new tt})()}:function(){return new ot}};function lt(yt,bt,_t){bt[_t]=255&yt}function ht(yt,bt){this.len=yt,this.next=void 0,this.val=bt}function ft(yt,bt,_t){for(;yt.hi;)bt[_t++]=127&yt.lo|128,yt.lo=(yt.lo>>>7|yt.hi<<25)>>>0,yt.hi>>>=7;for(;yt.lo>127;)bt[_t++]=127&yt.lo|128,yt.lo=yt.lo>>>7;bt[_t++]=yt.lo}function gt(yt,bt,_t){bt[_t]=255&yt,bt[_t+1]=yt>>>8&255,bt[_t+2]=yt>>>16&255,bt[_t+3]=yt>>>24}ot.create=nt(),ot.alloc=function(yt){return new rt.Array(yt)},rt.Array!==Array&&(ot.alloc=rt.pool(ot.alloc,rt.Array.prototype.subarray)),ot.prototype._push=function(yt,bt,_t){return this.tail=this.tail.next=new ct(yt,bt,_t),this.len+=bt,this},ht.prototype=Object.create(ct.prototype),ht.prototype.fn=function(yt,bt,_t){for(;yt>127;)bt[_t++]=127&yt|128,yt>>>=7;bt[_t]=yt},ot.prototype.uint32=function(yt){return this.len+=(this.tail=this.tail.next=new ht((yt>>>=0)<128?1:yt<16384?2:yt<2097152?3:yt<268435456?4:5,yt)).len,this},ot.prototype.int32=function(yt){return yt<0?this._push(ft,10,it.fromNumber(yt)):this.uint32(yt)},ot.prototype.sint32=function(yt){return this.uint32((yt<<1^yt>>31)>>>0)},ot.prototype.uint64=function(yt){var bt=it.from(yt);return this._push(ft,bt.length(),bt)},ot.prototype.int64=ot.prototype.uint64,ot.prototype.sint64=function(yt){var bt=it.from(yt).zzEncode();return this._push(ft,bt.length(),bt)},ot.prototype.bool=function(yt){return this._push(lt,1,yt?1:0)},ot.prototype.fixed32=function(yt){return this._push(gt,4,yt>>>0)},ot.prototype.sfixed32=ot.prototype.fixed32,ot.prototype.fixed64=function(yt){var bt=it.from(yt);return this._push(gt,4,bt.lo)._push(gt,4,bt.hi)},ot.prototype.sfixed64=ot.prototype.fixed64,ot.prototype.float=function(yt){return this._push(rt.float.writeFloatLE,4,yt)},ot.prototype.double=function(yt){return this._push(rt.float.writeDoubleLE,8,yt)};var mt=rt.Array.prototype.set?function(yt,bt,_t){bt.set(yt,_t)}:function(yt,bt,_t){for(var vt=0;vt<yt.length;++vt)bt[_t+vt]=yt[vt]};ot.prototype.bytes=function(yt){var bt=yt.length>>>0;if(!bt)return this._push(lt,1,0);if(rt.isString(yt)){var _t=ot.alloc(bt=st.length(yt));st.decode(yt,_t,0),yt=_t}return this.uint32(bt)._push(mt,bt,yt)},ot.prototype.string=function(yt){var bt=at.length(yt);return bt?this.uint32(bt)._push(at.write,bt,yt):this._push(lt,1,0)},ot.prototype.fork=function(){return this.states=new dt(this),this.head=this.tail=new ct(ut,0,0),this.len=0,this},ot.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new ct(ut,0,0),this.len=0),this},ot.prototype.ldelim=function(){var yt=this.head,bt=this.tail,_t=this.len;return this.reset().uint32(_t),_t&&(this.tail.next=yt.next,this.tail=bt,this.len+=_t),this},ot.prototype.finish=function(){for(var yt=this.head.next,bt=this.constructor.alloc(this.len),_t=0;yt;)yt.fn(yt.val,bt,_t),_t+=yt.len,yt=yt.next;return bt},ot._configure=function(yt){tt=yt,ot.create=nt(),tt._configure()}},3155:(_e,_,et)=>{_e.exports=it;var tt=et(1173);(it.prototype=Object.create(tt.prototype)).constructor=it;var rt=et(9693);function it(){tt.call(this)}function st(at,ct,ut){at.length<40?rt.utf8.write(at,ct,ut):ct.utf8Write?ct.utf8Write(at,ut):ct.write(at,ut)}it._configure=function(){it.alloc=rt._Buffer_allocUnsafe,it.writeBytesBuffer=rt.Buffer&&rt.Buffer.prototype instanceof Uint8Array&&rt.Buffer.prototype.set.name==="set"?function(at,ct,ut){ct.set(at,ut)}:function(at,ct,ut){if(at.copy)at.copy(ct,ut,0,at.length);else for(var dt=0;dt<at.length;)ct[ut++]=at[dt++]}},it.prototype.bytes=function(at){rt.isString(at)&&(at=rt._Buffer_from(at,"base64"));var ct=at.length>>>0;return this.uint32(ct),ct&&this._push(it.writeBytesBuffer,ct,at),this},it.prototype.string=function(at){var ct=rt.Buffer.byteLength(at);return this.uint32(ct),ct&&this._push(st,ct,at),this},it._configure()},7714:(_e,_,et)=>{_.R=void 0;const tt=et(6919),rt=et(7448);_.R=new class{async init(){}async createSessionHandler(it,st){const at=new tt.Session(st);return await at.loadModel(it),new rt.OnnxjsSessionHandler(at)}}},4200:(_e,_,et)=>{_.c8=_.rX=void 0;const tt=et(1670),rt=et(5381),it=et(2157),st=et(2306);_.rX=()=>{if((typeof tt.env.wasm.initTimeout!="number"||tt.env.wasm.initTimeout<0)&&(tt.env.wasm.initTimeout=0),typeof tt.env.wasm.simd!="boolean"&&(tt.env.wasm.simd=!0),typeof tt.env.wasm.proxy!="boolean"&&(tt.env.wasm.proxy=!1),typeof tt.env.wasm.numThreads!="number"||!Number.isInteger(tt.env.wasm.numThreads)||tt.env.wasm.numThreads<=0){const at=typeof navigator>"u"?(0,rt.cpus)().length:navigator.hardwareConcurrency;tt.env.wasm.numThreads=Math.min(4,Math.ceil((at||1)/2))}},_.c8=new class{async init(){(0,_.rX)(),await(0,it.initWasm)()}async createSessionHandler(at,ct){const ut=new st.OnnxruntimeWebAssemblySessionHandler;return await ut.loadModel(at,ct),Promise.resolve(ut)}}},6018:function(_e,_,et){var tt=this&&this.__createBinding||(Object.create?function(st,at,ct,ut){ut===void 0&&(ut=ct);var dt=Object.getOwnPropertyDescriptor(at,ct);dt&&!("get"in dt?!at.__esModule:dt.writable||dt.configurable)||(dt={enumerable:!0,get:function(){return at[ct]}}),Object.defineProperty(st,ut,dt)}:function(st,at,ct,ut){ut===void 0&&(ut=ct),st[ut]=at[ct]}),rt=this&&this.__exportStar||function(st,at){for(var ct in st)ct==="default"||Object.prototype.hasOwnProperty.call(at,ct)||tt(at,st,ct)};Object.defineProperty(_,"__esModule",{value:!0}),rt(et(1670),_);const it=et(1670);{const st=et(7714).R;(0,it.registerBackend)("webgl",st,-10)}{const st=et(4200).c8;(0,it.registerBackend)("cpu",st,10),(0,it.registerBackend)("wasm",st,10),(0,it.registerBackend)("xnnpack",st,9)}},246:(_e,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.createAttributeWithCacheKey=void 0;class et{constructor(rt){Object.assign(this,rt)}get cacheKey(){return this._cacheKey||(this._cacheKey=Object.getOwnPropertyNames(this).sort().map(rt=>`${this[rt]}`).join(";")),this._cacheKey}}_.createAttributeWithCacheKey=tt=>new et(tt)},7778:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.Attribute=void 0;const tt=et(1446),rt=et(9395),it=et(9162),st=et(2517);var at=rt.onnxruntime.experimental.fbs;class ct{constructor(dt){if(this._attributes=new Map,dt!=null){for(const ot of dt)ot instanceof tt.onnx.AttributeProto?this._attributes.set(ot.name,[ct.getValue(ot),ct.getType(ot)]):ot instanceof at.Attribute&&this._attributes.set(ot.name(),[ct.getValue(ot),ct.getType(ot)]);if(this._attributes.size<dt.length)throw new Error("duplicated attribute names")}}set(dt,ot,nt){this._attributes.set(dt,[nt,ot])}delete(dt){this._attributes.delete(dt)}getFloat(dt,ot){return this.get(dt,"float",ot)}getInt(dt,ot){return this.get(dt,"int",ot)}getString(dt,ot){return this.get(dt,"string",ot)}getTensor(dt,ot){return this.get(dt,"tensor",ot)}getFloats(dt,ot){return this.get(dt,"floats",ot)}getInts(dt,ot){return this.get(dt,"ints",ot)}getStrings(dt,ot){return this.get(dt,"strings",ot)}getTensors(dt,ot){return this.get(dt,"tensors",ot)}get(dt,ot,nt){const lt=this._attributes.get(dt);if(lt===void 0){if(nt!==void 0)return nt;throw new Error(`required attribute not found: ${dt}`)}if(lt[1]!==ot)throw new Error(`type mismatch: expected ${ot} but got ${lt[1]}`);return lt[0]}static getType(dt){const ot=dt instanceof tt.onnx.AttributeProto?dt.type:dt.type();switch(ot){case tt.onnx.AttributeProto.AttributeType.FLOAT:return"float";case tt.onnx.AttributeProto.AttributeType.INT:return"int";case tt.onnx.AttributeProto.AttributeType.STRING:return"string";case tt.onnx.AttributeProto.AttributeType.TENSOR:return"tensor";case tt.onnx.AttributeProto.AttributeType.FLOATS:return"floats";case tt.onnx.AttributeProto.AttributeType.INTS:return"ints";case tt.onnx.AttributeProto.AttributeType.STRINGS:return"strings";case tt.onnx.AttributeProto.AttributeType.TENSORS:return"tensors";default:throw new Error(`attribute type is not supported yet: ${tt.onnx.AttributeProto.AttributeType[ot]}`)}}static getValue(dt){const ot=dt instanceof tt.onnx.AttributeProto?dt.type:dt.type();if(ot===tt.onnx.AttributeProto.AttributeType.GRAPH||ot===tt.onnx.AttributeProto.AttributeType.GRAPHS)throw new Error("graph attribute is not supported yet");const nt=this.getValueNoCheck(dt);if(ot===tt.onnx.AttributeProto.AttributeType.INT&&st.LongUtil.isLong(nt))return st.LongUtil.longToNumber(nt);if(ot===tt.onnx.AttributeProto.AttributeType.INTS){const lt=nt,ht=new Array(lt.length);for(let ft=0;ft<lt.length;ft++){const gt=lt[ft];ht[ft]=st.LongUtil.longToNumber(gt)}return ht}if(ot===tt.onnx.AttributeProto.AttributeType.TENSOR)return dt instanceof tt.onnx.AttributeProto?it.Tensor.fromProto(nt):it.Tensor.fromOrtTensor(nt);if(ot===tt.onnx.AttributeProto.AttributeType.TENSORS){if(dt instanceof tt.onnx.AttributeProto)return nt.map(lt=>it.Tensor.fromProto(lt));if(dt instanceof at.Attribute)return nt.map(lt=>it.Tensor.fromOrtTensor(lt))}if(ot===tt.onnx.AttributeProto.AttributeType.STRING&&dt instanceof tt.onnx.AttributeProto){const lt=nt;return(0,st.decodeUtf8String)(lt)}return ot===tt.onnx.AttributeProto.AttributeType.STRINGS&&dt instanceof tt.onnx.AttributeProto?nt.map(st.decodeUtf8String):nt}static getValueNoCheck(dt){return dt instanceof tt.onnx.AttributeProto?this.getValueNoCheckFromOnnxFormat(dt):this.getValueNoCheckFromOrtFormat(dt)}static getValueNoCheckFromOnnxFormat(dt){switch(dt.type){case tt.onnx.AttributeProto.AttributeType.FLOAT:return dt.f;case tt.onnx.AttributeProto.AttributeType.INT:return dt.i;case tt.onnx.AttributeProto.AttributeType.STRING:return dt.s;case tt.onnx.AttributeProto.AttributeType.TENSOR:return dt.t;case tt.onnx.AttributeProto.AttributeType.GRAPH:return dt.g;case tt.onnx.AttributeProto.AttributeType.FLOATS:return dt.floats;case tt.onnx.AttributeProto.AttributeType.INTS:return dt.ints;case tt.onnx.AttributeProto.AttributeType.STRINGS:return dt.strings;case tt.onnx.AttributeProto.AttributeType.TENSORS:return dt.tensors;case tt.onnx.AttributeProto.AttributeType.GRAPHS:return dt.graphs;default:throw new Error(`unsupported attribute type: ${tt.onnx.AttributeProto.AttributeType[dt.type]}`)}}static getValueNoCheckFromOrtFormat(dt){switch(dt.type()){case at.AttributeType.FLOAT:return dt.f();case at.AttributeType.INT:return dt.i();case at.AttributeType.STRING:return dt.s();case at.AttributeType.TENSOR:return dt.t();case at.AttributeType.GRAPH:return dt.g();case at.AttributeType.FLOATS:return dt.floatsArray();case at.AttributeType.INTS:{const ot=[];for(let nt=0;nt<dt.intsLength();nt++)ot.push(dt.ints(nt));return ot}case at.AttributeType.STRINGS:{const ot=[];for(let nt=0;nt<dt.stringsLength();nt++)ot.push(dt.strings(nt));return ot}case at.AttributeType.TENSORS:{const ot=[];for(let nt=0;nt<dt.tensorsLength();nt++)ot.push(dt.tensors(nt));return ot}default:throw new Error(`unsupported attribute type: ${at.AttributeType[dt.type()]}`)}}}_.Attribute=ct},7091:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.resolveBackend=_.backend=void 0;const tt=et(5038),rt=new Map;async function it(st){const at=_.backend;if(at[st]!==void 0&&function(ct){const ut=ct;return"initialize"in ut&&typeof ut.initialize=="function"&&"createSessionHandler"in ut&&typeof ut.createSessionHandler=="function"&&"dispose"in ut&&typeof ut.dispose=="function"}(at[st])){const ct=at[st];let ut=ct.initialize();if(typeof ut=="object"&&"then"in ut&&(ut=await ut),ut)return rt.set(st,ct),ct}}_.backend={webgl:new tt.WebGLBackend},_.resolveBackend=async function st(at){if(!at)return st(["webgl"]);{const ct=typeof at=="string"?[at]:at;for(const ut of ct){const dt=rt.get(ut);if(dt)return dt;const ot=await it(ut);if(ot)return ot}}throw new Error("no available backend to use")}},5038:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.WebGLBackend=void 0;const tt=et(1670),rt=et(6231),it=et(6416),st=et(7305);_.WebGLBackend=class{get contextId(){return tt.env.webgl.contextId}set contextId(at){tt.env.webgl.contextId=at}get matmulMaxBatchSize(){return tt.env.webgl.matmulMaxBatchSize}set matmulMaxBatchSize(at){tt.env.webgl.matmulMaxBatchSize=at}get textureCacheMode(){return tt.env.webgl.textureCacheMode}set textureCacheMode(at){tt.env.webgl.textureCacheMode=at}get pack(){return tt.env.webgl.pack}set pack(at){tt.env.webgl.pack=at}get async(){return tt.env.webgl.async}set async(at){tt.env.webgl.async=at}initialize(){try{return this.glContext=(0,st.createWebGLContext)(this.contextId),typeof this.matmulMaxBatchSize!="number"&&(this.matmulMaxBatchSize=16),typeof this.textureCacheMode!="string"&&(this.textureCacheMode="full"),typeof this.pack!="boolean"&&(this.pack=!1),typeof this.async!="boolean"&&(this.async=!1),rt.Logger.setWithEnv(tt.env),rt.Logger.verbose("WebGLBackend",`Created WebGLContext: ${typeof this.glContext} with matmulMaxBatchSize: ${this.matmulMaxBatchSize}; textureCacheMode: ${this.textureCacheMode}; pack: ${this.pack}; async: ${this.async}.`),!0}catch(at){return rt.Logger.warning("WebGLBackend",`Unable to initialize WebGLBackend. ${at}`),!1}}createSessionHandler(at){return new it.WebGLSessionHandler(this,at)}dispose(){this.glContext.dispose()}}},5107:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.CoordsGlslLib=void 0;const tt=et(2517),rt=et(8520),it=et(5060),st=et(7859),at=et(9390);class ct extends rt.GlslLib{constructor(dt){super(dt)}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.offsetToCoords()),this.coordsToOffset()),this.toVec()),this.valueFrom()),this.getCommonUtilFuncs()),this.getInputsSamplingSnippets()),this.getOutputSamplingSnippet())}getCustomTypes(){return{}}offsetToCoords(){return{offsetToCoords:new rt.GlslLibRoutine(`
      vec2 offsetToCoords(int offset, int width, int height) {
        int t = offset / width;
        int s = offset - t*width;
        vec2 coords = (vec2(s,t) + vec2(0.5,0.5)) / vec2(width, height);
        return coords;
      }
      `)}}coordsToOffset(){return{coordsToOffset:new rt.GlslLibRoutine(`
      int coordsToOffset(vec2 coords, int width, int height) {
        float s = coords.s * float(width);
        float t = coords.t * float(height);
        int offset = int(t) * width + int(s);
        return offset;
      }
      `)}}getOutputSamplingSnippet(){const dt=this.context.outputTextureLayout;return dt.isPacked?this.getPackedOutputSamplingSnippet(dt):this.getUnpackedOutputSamplingSnippet(dt)}getPackedOutputSamplingSnippet(dt){const ot=dt.unpackedShape,nt=[dt.width,dt.height],lt={},ht="getOutputCoords";switch(ot.length){case 0:lt[ht]=this.getOutputScalarCoords();break;case 1:lt[ht]=this.getOutputPacked1DCoords(ot,nt);break;case 2:lt[ht]=this.getOutputPacked2DCoords(ot,nt);break;case 3:lt[ht]=this.getOutputPacked3DCoords(ot,nt);break;default:lt[ht]=this.getOutputPackedNDCoords(ot,nt)}const ft=`
      void setOutput(vec4 val) {
        ${(0,it.getGlsl)(this.context.glContext.version).output} = val;
      }
    `;return lt.floatTextureSetRGBA=new rt.GlslLibRoutine(ft),lt}getUnpackedOutputSamplingSnippet(dt){const ot=dt.unpackedShape,nt=[dt.width,dt.height],lt={},ht="getOutputCoords";switch(ot.length){case 0:lt[ht]=this.getOutputScalarCoords();break;case 1:lt[ht]=this.getOutputUnpacked1DCoords(ot,nt);break;case 2:lt[ht]=this.getOutputUnpacked2DCoords(ot,nt);break;case 3:lt[ht]=this.getOutputUnpacked3DCoords(ot,nt);break;case 4:lt[ht]=this.getOutputUnpacked4DCoords(ot,nt);break;case 5:lt[ht]=this.getOutputUnpacked5DCoords(ot,nt);break;case 6:lt[ht]=this.getOutputUnpacked6DCoords(ot,nt);break;default:throw new Error(`Unsupported output dimensionality: ${ot.length}`)}const ft=`
        void setOutput(float val) {
          ${(0,it.getGlsl)(this.context.glContext.version).output} = vec4(val, 0, 0, 0);
        }
    `;return lt.floatTextureSetR=new rt.GlslLibRoutine(ft),lt}getOutputScalarCoords(){return new rt.GlslLibRoutine(`
      int getOutputCoords() {
        return 0;
      }
    `)}getOutputPacked1DCoords(dt,ot){const nt=ot;let lt="";return nt[0]===1?(lt=`
          int getOutputCoords() {
            return 2 * int(TexCoords.y * ${nt[1]}.0);
          }
        `,new rt.GlslLibRoutine(lt)):nt[1]===1?(lt=`
          int getOutputCoords() {
            return 2 * int(TexCoords.x * ${nt[0]}.0);
          }
        `,new rt.GlslLibRoutine(lt)):(lt=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                 vec2(${nt[0]}, ${nt[1]}));
          return 2 * (resTexRC.y * ${nt[0]} + resTexRC.x);
        }
      `,new rt.GlslLibRoutine(lt))}getOutputPacked2DCoords(dt,ot){let nt="";if(tt.ArrayUtil.arraysEqual(dt,ot))return nt=`
        ivec2 getOutputCoords() {
          return 2 * ivec2(TexCoords.xy * vec2(${ot[0]}, ${ot[1]}));
        }
      `,new rt.GlslLibRoutine(nt);const lt=ot,ht=Math.ceil(dt[1]/2);return nt=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${lt[0]}, ${lt[1]}));

          int index = resTexRC.y * ${lt[0]} + resTexRC.x;

          // reverse r and c order for packed texture
          int r = imod(index, ${ht}) * 2;
          int c = 2 * (index / ${ht});

          return ivec2(r, c);
        }
      `,new rt.GlslLibRoutine(nt)}getOutputPacked3DCoords(dt,ot){const nt=[ot[0],ot[1]],lt=Math.ceil(dt[2]/2),ht=lt*Math.ceil(dt[1]/2),ft=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${nt[0]}, ${nt[1]}));
          int index = resTexRC.y * ${nt[0]} + resTexRC.x;

          int b = index / ${ht};
          index -= b * ${ht};

          // reverse r and c order for packed texture
          int r = imod(index, ${lt}) * 2;
          int c = 2 * (index / ${lt});

          return ivec3(b, r, c);
        }
      `;return new rt.GlslLibRoutine(ft)}getOutputPackedNDCoords(dt,ot){const nt=[ot[0],ot[1]],lt=Math.ceil(dt[dt.length-1]/2),ht=lt*Math.ceil(dt[dt.length-2]/2);let ft=ht,gt="",mt="b, r, c";for(let bt=2;bt<dt.length-1;bt++)ft*=dt[dt.length-bt-1],gt=`
      int b${bt} = index / ${ft};
      index -= b${bt} * ${ft};
    `+gt,mt=`b${bt}, `+mt;const yt=`
      ivec${dt.length} getOutputCoords() {
        ivec2 resTexRC = ivec2(TexCoords.xy *
                              vec2(${nt[0]}, ${nt[1]}));
        int index = resTexRC.y * ${nt[0]} + resTexRC.x;

        ${gt}

        int b = index / ${ht};
        index -= b * ${ht};

        // reverse r and c order for packed texture
        int r = imod(index, ${lt}) * 2;
        int c = 2 * (index / ${lt});

        return ivec${dt.length}(${mt});
      }
    `;return new rt.GlslLibRoutine(yt)}getOutputUnpacked1DCoords(dt,ot){const nt=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${ot[0]}, ${ot[1]}));
          return resTexRC.y * ${ot[0]} + resTexRC.x;
        }
      `;return new rt.GlslLibRoutine(nt)}getOutputUnpacked2DCoords(dt,ot){const nt=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${ot[0]}, ${ot[1]}));
          int index = resTexRC.y * ${ot[0]} + resTexRC.x;
          int r = index / ${dt[1]};
          int c = index - r * ${dt[1]};
          return ivec2(r, c);
        }
      `;return new rt.GlslLibRoutine(nt)}getOutputUnpacked3DCoords(dt,ot){let nt="";const lt=dt.length;let ht=null;lt<2&&(ht=[]),ht=new Array(lt-1),ht[lt-2]=dt[lt-1];for(let mt=lt-3;mt>=0;--mt)ht[mt]=ht[mt+1]*dt[mt+1];const ft=["r","c","d"],gt=ht.map((mt,yt)=>`int ${ft[yt]} = index / ${mt}; ${yt===ht.length-1?`int ${ft[yt+1]} = index - ${ft[yt]} * ${mt}`:`index -= ${ft[yt]} * ${mt}`};`).join("");return nt=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${ot[0]}, ${ot[1]}));
          int index = resTexRC.y * ${ot[0]} + resTexRC.x;
          ${gt}
          return ivec3(r, c, d);
        }
      `,new rt.GlslLibRoutine(nt)}getOutputUnpacked4DCoords(dt,ot){let nt="";const lt=dt.length;let ht=null;lt<2&&(ht=[]),ht=new Array(lt-1),ht[lt-2]=dt[lt-1];for(let mt=lt-3;mt>=0;--mt)ht[mt]=ht[mt+1]*dt[mt+1];const ft=["r","c","d","d2"],gt=ht.map((mt,yt)=>`int ${ft[yt]} = index / ${mt}; ${yt===ht.length-1?`int ${ft[yt+1]} = index - ${ft[yt]} * ${mt}`:`index -= ${ft[yt]} * ${mt}`};`).join("");return nt=`
      ivec4 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${ot[0]}, ${ot[1]}));
          int index = resTexRC.y * ${ot[0]} + resTexRC.x;
          ${gt}
          return ivec4(r, c, d, d2);
        }
      `,new rt.GlslLibRoutine(nt)}getOutputUnpacked5DCoords(dt,ot){let nt="";const lt=dt.length;let ht=null;lt<2&&(ht=[]),ht=new Array(lt-1),ht[lt-2]=dt[lt-1];for(let mt=lt-3;mt>=0;--mt)ht[mt]=ht[mt+1]*dt[mt+1];const ft=["r","c","d","d2","d3"],gt=ht.map((mt,yt)=>`int ${ft[yt]} = index / ${mt}; ${yt===ht.length-1?`int ${ft[yt+1]} = index - ${ft[yt]} * ${mt}`:`index -= ${ft[yt]} * ${mt}`};`).join("");return nt=`
      ivec5 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${ot[0]}, ${ot[1]}));
          int index = resTexRC.y * ${ot[0]} + resTexRC.x;
          ${gt}
          return ivec5(r, c, d, d2, d3);
        }
      `,new rt.GlslLibRoutine(nt)}getOutputUnpacked6DCoords(dt,ot){let nt="";const lt=dt.length;let ht=null;lt<2&&(ht=[]),ht=new Array(lt-1),ht[lt-2]=dt[lt-1];for(let mt=lt-3;mt>=0;--mt)ht[mt]=ht[mt+1]*dt[mt+1];const ft=["r","c","d","d2","d3","d4"],gt=ht.map((mt,yt)=>`int ${ft[yt]} = index / ${mt}; ${yt===ht.length-1?`int ${ft[yt+1]} = index - ${ft[yt]} * ${mt}`:`index -= ${ft[yt]} * ${mt}`};`).join("");return nt=`
     ivec6 getOutputCoords() {
         ivec2 resTexRC = ivec2(TexCoords.xy *
                               vec2(${ot[0]}, ${ot[1]}));
         int index = resTexRC.y * ${ot[0]} + resTexRC.x;
         ${gt}
         return ivec6(r, c, d, d2, d3, d4);
       }
     `,new rt.GlslLibRoutine(nt)}getCommonUtilFuncs(){const dt={};let ot="uvFromFlat";dt[ot]=new rt.GlslLibRoutine(`
    vec2 uvFromFlat(int texNumR, int texNumC, int index) {
      int texC = index / texNumR;
      int texR = index - texC * texNumR;
      // TODO: swap texR, texC order in following function so row is corresponding to u and column is corresponding to
      //       v.
      return (vec2(texR, texC) + halfCR) / vec2(texNumR, texNumC);
    }
    `),ot="packedUVfrom1D",dt[ot]=new rt.GlslLibRoutine(`
      vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
        int texelIndex = index / 2;
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),ot="packedUVfrom2D",dt[ot]=new rt.GlslLibRoutine(`
      vec2 packedUVfrom2D(int texNumR, int texNumC, int texelsInLogicalRow, int row, int col) {
        int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),ot="packedUVfrom3D",dt[ot]=new rt.GlslLibRoutine(`
      vec2 packedUVfrom3D(int texNumR, int texNumC,
          int texelsInBatch, int texelsInLogicalRow, int b,
          int row, int col) {
        int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = index / texNumC;
        int texC = index - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),ot="sampleTexture";const nt=(0,it.getGlsl)(this.context.glContext.version);return dt[ot]=new rt.GlslLibRoutine(`
        float sampleTexture(sampler2D textureSampler, vec2 uv) {
            return ${nt.texture2D}(textureSampler, uv).r;
        }`),dt}getInputsSamplingSnippets(){const dt={},ot=this.context.outputTextureLayout;return this.context.programInfo.inputNames.forEach((nt,lt)=>{const ht=this.context.inputTextureLayouts[lt],ft=(0,at.generateShaderFuncNameFromInputSamplerName)(nt);ht.isPacked?dt[ft]=this.getPackedSamplerFromInput(ft,nt,ht):dt[ft]=this.getUnpackedSamplerFromInput(ft,nt,ht);const gt=(0,at.generateShaderFuncNameFromInputSamplerNameAtOutCoords)(nt);ht.unpackedShape.length<=ot.unpackedShape.length&&(ht.isPacked?dt[gt]=this.getPackedSamplerAtOutputCoords(gt,ht,ot,nt):dt[gt]=this.getUnpackedSamplerAtOutputCoords(gt,ht,ot,nt))}),dt}getPackedSamplerAtOutputCoords(dt,ot,nt,lt){const ht=ot.unpackedShape,ft=nt.unpackedShape,gt=lt,mt=(0,at.generateShaderFuncNameFromInputSamplerName)(gt),yt=ht.length,bt=ft.length,_t=tt.BroadcastUtil.getBroadcastDims(ht,ft),vt=(0,at.getCoordsDataType)(bt),xt=bt-yt;let wt;const Tt=(0,at.getGlChannels)();wt=yt===0?"":bt<2&&_t.length>=1?"coords = 0;":_t.map(Mt=>`coords.${Tt[Mt+xt]} = 0;`).join(`
`);let St="";St=bt<2&&yt>0?"coords":ht.map((Mt,$t)=>`coords.${Tt[$t+xt]}`).join(", ");let Et="return outputValue;";const Ot=tt.ShapeUtil.size(ht)===1,Rt=tt.ShapeUtil.size(ft)===1;if(yt!==1||Ot||Rt){if(Ot&&!Rt)Et=bt===1?`
          return vec4(outputValue.x, outputValue.x, 0., 0.);
        `:`
          return vec4(outputValue.x);
        `;else if(_t.length){const Mt=yt-2,$t=yt-1;_t.indexOf(Mt)>-1&&_t.indexOf($t)>-1?Et="return vec4(outputValue.x);":_t.indexOf(Mt)>-1?Et="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":_t.indexOf($t)>-1&&(Et="return vec4(outputValue.xx, outputValue.zz);")}}else Et=`
        return vec4(outputValue.xy, outputValue.xy);
      `;const Pt=`
      vec4 ${dt}() {
        ${vt} coords = getOutputCoords();
        
        int lastDim = coords.${Tt[bt-1]};
        coords.${Tt[bt-1]} = coords.${Tt[bt-2]};
        coords.${Tt[bt-2]} = lastDim;
      
        ${wt}
        vec4 outputValue = ${mt}(${St});
        ${Et}
      }
    `;return new rt.GlslLibRoutine(Pt,["coordinates.getOutputCoords"])}getUnpackedSamplerAtOutputCoords(dt,ot,nt,lt){const ht=[nt.width,nt.height],ft=[ot.width,ot.height],gt=ot.unpackedShape.length,mt=nt.unpackedShape.length,yt=ot.unpackedShape,bt=nt.unpackedShape,_t=(0,at.generateShaderFuncNameFromInputSamplerName)(lt);if(gt===mt&&tt.ArrayUtil.arraysEqual(ft,ht)){const Rt=`
          float ${dt}() {
            return sampleTexture(${lt}, TexCoords);
          }
        `;return new rt.GlslLibRoutine(Rt,["coordinates.sampleTexture"])}const vt=(0,at.getCoordsDataType)(mt),xt=tt.BroadcastUtil.getBroadcastDims(yt,bt),wt=mt-gt;let Tt;const St=(0,at.getGlChannels)();Tt=gt===0?"":mt<2&&xt.length>=1?"coords = 0;":xt.map(Rt=>`coords.${St[Rt+wt]} = 0;`).join(`
`);let Et="";Et=mt<2&&gt>0?"coords":ot.unpackedShape.map((Rt,Pt)=>`coords.${St[Pt+wt]}`).join(", ");const Ot=`
        float ${dt}() {
          ${vt} coords = getOutputCoords();
          ${Tt}
          return ${_t}(${Et});
        }
      `;return new rt.GlslLibRoutine(Ot,["coordinates.getOutputCoords"])}getPackedSamplerFromInput(dt,ot,nt){switch(nt.unpackedShape.length){case 0:return this.getPackedSamplerScalar(dt,ot);case 1:return this.getPackedSampler1D(dt,ot,nt);case 2:return this.getPackedSampler2D(dt,ot,nt);case 3:return this.getPackedSampler3D(dt,ot,nt);default:return this.getPackedSamplerND(dt,ot,nt)}}getUnpackedSamplerFromInput(dt,ot,nt){const lt=nt.unpackedShape;switch(lt.length){case 0:return this.getUnpackedSamplerScalar(dt,ot,nt);case 1:return this.getUnpackedSampler1D(dt,ot,nt);case 2:return this.getUnpackedSampler2D(dt,ot,nt);case 3:return this.getUnpackedSampler3D(dt,ot,nt);case 4:return this.getUnpackedSampler4D(dt,ot,nt);case 5:return this.getUnpackedSampler5D(dt,ot,nt);case 6:return this.getUnpackedSampler6D(dt,ot,nt);default:throw new Error(`Unsupported dimension ${lt.length}-D`)}}getPackedSamplerScalar(dt,ot){const nt=`
          vec4 ${dt}() {
            return ${(0,it.getGlsl)(this.context.glContext.version).texture2D}(${ot}, halfCR);
          }
        `;return new rt.GlslLibRoutine(nt)}getPackedSampler1D(dt,ot,nt){const lt=[nt.width,nt.height],ht=[lt[1],lt[0]],ft=(0,it.getGlsl)(this.context.glContext.version),gt=`vec4 ${dt}(int index) {
      vec2 uv = packedUVfrom1D(
      ${ht[0]}, ${ht[1]}, index);
      return ${ft.texture2D}(${ot}, uv);
    }`;return new rt.GlslLibRoutine(gt,["coordinates.packedUVfrom1D"])}getPackedSampler2D(dt,ot,nt){const lt=nt.unpackedShape,ht=[nt.width,nt.height],ft=(0,it.getGlsl)(this.context.glContext.version),gt=ht[0],mt=ht[1];if(ht!=null&&tt.ArrayUtil.arraysEqual(lt,ht)){const vt=`vec4 ${dt}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${mt}.0, ${gt}.0);
        return ${ft.texture2D}(${ot}, uv);
      }`;return new rt.GlslLibRoutine(vt)}const yt=ht,bt=Math.ceil(lt[1]/2),_t=`vec4 ${dt}(int row, int col) {
      vec2 uv = packedUVfrom2D(${yt[1]}, ${yt[0]}, ${bt}, row, col);
      return ${ft.texture2D}(${ot}, uv);
    }`;return new rt.GlslLibRoutine(_t,["coordinates.packedUVfrom2D"])}getPackedSampler3D(dt,ot,nt){const lt=nt.unpackedShape,ht=[nt.width,nt.height],ft=[ht[0],ht[1]],gt=(0,it.getGlsl)(this.context.glContext.version);if(lt[0]===1){const vt=lt.slice(1),xt=[1,2],wt=(0,at.squeezeInputShape)(lt,vt),Tt=["b","row","col"],St=JSON.parse(JSON.stringify(nt));St.unpackedShape=wt;const Et=this.getPackedSamplerFromInput(dt,ot,St),Ot=`${Et.routineBody}
      vec4 ${dt}(int b, int row, int col) {
        return ${dt}(${(0,at.getSqueezedParams)(Tt,xt)});
      } `;return new rt.GlslLibRoutine(Ot,Et.dependencies)}const mt=ft[0],yt=ft[1],bt=Math.ceil(lt[2]/2),_t=`vec4 ${dt}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${yt}, ${mt}, ${bt*Math.ceil(lt[1]/2)}, ${bt}, b, row, col);
      return ${gt.texture2D}(${ot}, uv);}`;return new rt.GlslLibRoutine(_t,["coordinates.packedUVfrom3D"])}getPackedSamplerND(dt,ot,nt){const lt=nt.unpackedShape,ht=lt.length,ft=[nt.width,nt.height],gt=(0,it.getGlsl)(this.context.glContext.version),mt=[ft[0],ft[1]],yt=mt[1],bt=mt[0],_t=Math.ceil(lt[ht-1]/2);let vt=_t*Math.ceil(lt[ht-2]/2),xt="int b, int row, int col",wt=`b * ${vt} + (row / 2) * ${_t} + (col / 2)`;for(let St=2;St<ht-1;St++)xt=`int b${St}, `+xt,vt*=lt[ht-St-1],wt=`b${St} * ${vt} + `+wt;const Tt=`vec4 ${dt}(${xt}) {
      int index = ${wt};
      int texR = index / ${bt};
      int texC = index - texR * ${bt};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${bt}, ${yt});
      return ${gt.texture2D}(${ot}, uv);
    }`;return new rt.GlslLibRoutine(Tt)}getUnpackedSamplerScalar(dt,ot,nt){const[lt,ht]=[nt.width,nt.height];if(lt===1&&ht===1){const gt=`
          float ${dt}() {
            return sampleTexture(${ot}, halfCR);
          }
        `;return new rt.GlslLibRoutine(gt,["coordinates.sampleTexture"])}const ft=`
        float ${dt}() {
          int offset_${ot} = coordsToOffset(TexCoords, ${lt}, ${ht});
          vec2 uv = uvFromFlat(${lt}, ${ht}, offset_${ot});
          return sampleTexture(${ot}, uv);
        }
      `;return new rt.GlslLibRoutine(ft,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler1D(dt,ot,nt){const lt=nt.width,ht=nt.height;if(ht===1&&lt===1){const gt=`
        float ${dt}(int index) {
          return sampleTexture(${ot}, halfCR);
        }
      `;return new rt.GlslLibRoutine(gt,["coordinates.sampleTexture"])}if(ht===1){const gt=`
          float ${dt}(int index) {
            vec2 uv = vec2((float(index) + 0.5) / ${lt}.0, 0.5);
            return sampleTexture(${ot}, uv);
          }
        `;return new rt.GlslLibRoutine(gt,["coordinates.sampleTexture"])}if(lt===1){const gt=`
          float ${dt}(int index) {
            vec2 uv = vec2(0.5, (float(index) + 0.5) / ${ht}.0);
            return sampleTexture(${ot}, uv);
          }
        `;return new rt.GlslLibRoutine(gt,["coordinates.sampleTexture"])}const ft=`
        float ${dt}(int index) {
          vec2 uv = uvFromFlat(${lt}, ${ht}, index);
          return sampleTexture(${ot}, uv);
        }
      `;return new rt.GlslLibRoutine(ft,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler2D(dt,ot,nt){const lt=nt.unpackedShape,ht=[nt.height,nt.width];if(ht!=null&&tt.ArrayUtil.arraysEqual(lt,ht)){const vt=`
          float ${dt}(int row, int col) {
            vec2 uv = (vec2(row, col) + halfCR) / vec2(${ht[1]}.0, ${ht[0]}.0);
            return sampleTexture(${ot}, uv);
          }
        `;return new rt.GlslLibRoutine(vt,["coordinates.sampleTexture"])}const{newShape:ft,keptDims:gt}=(0,st.squeezeShape)(lt),mt=ft;if(mt.length<lt.length){const vt=(0,at.squeezeInputShape)(lt,mt),xt=JSON.parse(JSON.stringify(nt));xt.unpackedShape=vt;const wt=["col","row"],Tt=`
          ${this.getUnpackedSamplerFromInput(dt,ot,xt).routineBody}
          float ${dt}(int row, int col) {
            return ${dt}(${(0,at.getSqueezedParams)(wt,gt)});
          }
        `;return new rt.GlslLibRoutine(Tt,["coordinates.sampleTexture"])}const yt=ht[1],bt=ht[0];if(bt===1){const vt=`
          float ${dt}(int row, int col) {
            int offset_${ot} = coordsToOffset(TexCoords, ${yt}, ${bt});
            float index = dot(vec3(row, col, offset_${ot}), vec3(${lt[1]}, 1, 1));
            vec2 uv = vec2(0.5, (index + 0.5) / ${yt}.0);
            return sampleTexture(${ot}, uv);
          }
        `;return new rt.GlslLibRoutine(vt,["coordinates.sampleTexture","coordinates.coordsToOffset"])}if(yt===1){const vt=`
          float ${dt}(int row, int col) {
            int offset_${ot} = coordsToOffset(TexCoords, ${yt}, ${bt});
            float index = dot(vec3(row, col, offset_${ot}), vec3(${lt[1]}, 1, 1));
            vec2 uv = vec2((index + 0.5) / ${bt}.0, 0.5);
            return sampleTexture(${ot}, uv);
          }
        `;return new rt.GlslLibRoutine(vt,["coordinates.sampleTexture","coordinates.coordsToOffset"])}const _t=`
        float ${dt}(int row, int col) {
          int index = col * ${lt[1]} + row;
          vec2 uv = uvFromFlat(${yt}, ${bt}, index);
          return sampleTexture(${ot}, uv);
        }
      `;return new rt.GlslLibRoutine(_t,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler3D(dt,ot,nt){const lt=nt.unpackedShape,ht=lt[1]*lt[2],ft=lt[2],{newShape:gt,keptDims:mt}=(0,st.squeezeShape)(lt),yt=gt;if(yt.length<lt.length){const _t=(0,at.squeezeInputShape)(lt,yt),vt=["batch","col","row"],xt=JSON.parse(JSON.stringify(nt));xt.unpackedShape=_t;const wt=this.getUnpackedSamplerFromInput(dt,ot,xt),Tt=mt.reverse(),St=`
          ${wt.routineBody}
          float ${dt}(int batch, int row, int col) {
            return ${dt}(${(0,at.getSqueezedParams)(vt,Tt)});
          }
        `;return new rt.GlslLibRoutine(St,wt.dependencies)}const bt=`
          float ${dt}(int depth, int row, int col) {
            // Explicitly use integer operations as dot() only works on floats.
            int index = depth * ${ht} + col * ${ft} + row;
            vec2 uv = uvFromFlat(${nt.width}, ${nt.height}, index);
            return sampleTexture(${ot}, uv);
          }
      `;return new rt.GlslLibRoutine(bt,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler4D(dt,ot,nt){const lt=nt.unpackedShape,ht=lt[3],ft=lt[2]*ht,gt=`
        float ${dt}(int row, int col, int depth, int depth2) {
          int index = row * ${lt[1]*ft} + col * ${ft} +
              depth2 * ${ht} + depth;
          vec2 uv = uvFromFlat(${nt.width}, ${nt.height}, index);
          return sampleTexture(${ot}, uv);
        }
      `;return new rt.GlslLibRoutine(gt,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler5D(dt,ot,nt){const lt=nt.unpackedShape,ht=lt[4],ft=lt[3]*ht,gt=lt[2]*ft,mt=lt[1]*gt,{newShape:yt,keptDims:bt}=(0,st.squeezeShape)(lt);if(yt.length<lt.length){const vt=(0,at.squeezeInputShape)(lt,yt),xt=["row","col","depth","depth2","depth3"],wt=JSON.parse(JSON.stringify(nt));wt.unpackedShape=vt;const Tt=`
          ${this.getUnpackedSamplerFromInput(dt,ot,wt).routineBody}
          float ${dt}(int row, int col, int depth, int depth2, int depth3) {
            return ${dt}(${(0,at.getSqueezedParams)(xt,bt)});
          }
        `;return new rt.GlslLibRoutine(Tt,["coordinates.sampleTexture","coordinates.uvFromFlat"])}const _t=`
        float ${dt}(int row, int col, int depth, int depth2, int depth3) {
          int index = row * ${mt} + col * ${gt} + depth * ${ft} +
          depth3 * ${ht} + depth2;
          vec2 uv = uvFromFlat(${nt.width}, ${nt.height}, index);
          return sampleTexture(${ot}, uv);
        }
      `;return new rt.GlslLibRoutine(_t,["coordinates.sampleTexture","coordinates.uvFromFlat"])}getUnpackedSampler6D(dt,ot,nt){const lt=nt.unpackedShape,ht=lt[5],ft=lt[4]*ht,gt=lt[3]*ft,mt=lt[2]*gt,yt=lt[1]*mt,{newShape:bt,keptDims:_t}=(0,st.squeezeShape)(lt);if(bt.length<lt.length){const xt=(0,at.squeezeInputShape)(lt,bt),wt=["row","col","depth","depth2","depth3","depth4"],Tt=JSON.parse(JSON.stringify(nt));Tt.unpackedShape=xt;const St=`
            ${this.getUnpackedSamplerFromInput(dt,ot,Tt).routineBody}
            float ${dt}(int row, int col, int depth,
              int depth2, int depth3, int depth4) {
              return ${dt}(${(0,at.getSqueezedParams)(wt,_t)});
            }
          `;return new rt.GlslLibRoutine(St,["coordinates.sampleTexture","coordinates.uvFromFlat"])}const vt=`
          float ${dt}(int row, int col, int depth,
            int depth2, int depth3, int depth4) {
            int index = row * ${yt} + col * ${mt} + depth * ${gt} +
            depth2 * ${ft} + depth3 * ${ht} + depth4;
            vec2 uv = uvFromFlat(${nt.width}, ${nt.height}, index);
            return sampleTexture(${ot}, uv);
          }
        `;return new rt.GlslLibRoutine(vt,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}toVec(){const dt=this.context.outputTextureLayout,ot=dt.shape.length,nt=dt.strides,lt=dt.width,ht=dt.height,ft=[];for(let mt=0;mt<ot-1;++mt)ft.push(`
        c[${mt}] = offset / ${nt[mt]};`),ft.push(`
        offset -= c[${mt}] * ${nt[mt]};`);ft.push(`
        c[${ot-1}] = offset;`);const gt=`
      void toVec(vec2 texCoords, out int c[${ot}]) {
        int offset = coordsToOffset(texCoords, ${lt}, ${ht});
        ${ft.join("")}
      }
      void toVec(int offset, out int c[${ot}]) {
        ${ft.join("")}
      }
    `;return{toVec:new rt.GlslLibRoutine(gt,["coordinates.coordsToOffset"])}}valueFrom(){const dt={};return this.context.programInfo.inputNames.forEach((ot,nt)=>{const lt=this.context.inputTextureLayouts[nt],ht=(lt.unpackedShape.length>0?lt.unpackedShape:lt.shape).length;let ft=`_${ot}`;dt[ft]=new rt.GlslLibRoutine(this.getValueFromSingle(ot,ht,lt.width,lt.height,!1),[`shapeUtils.indicesToOffset${ft}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"]),ft+="_T",dt[ft]=new rt.GlslLibRoutine(this.getValueFromSingle(ot,ht,lt.width,lt.height,!0),[`shapeUtils.indicesToOffset${ft}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"])}),dt}getValueFromSingle(dt,ot,nt,lt,ht){let ft=`_${dt}`;return ht&&(ft+="_T"),`
        float ${ft}(int m[${ot}]) {
          int offset = indicesToOffset${ft}(m);
          vec2 coords = offsetToCoords(offset, ${nt}, ${lt});
          float value = getColorAsFloat(${(0,it.getGlsl)(this.context.glContext.version).texture2D}(${dt}, coords));
          return value;
        }
        `}getPackedValueFrom(dt,ot,nt,lt,ht){let ft=`_${dt}_Pack`;return ht&&(ft+="_T"),`
        vec4 ${ft}(int m[${ot}]) {
          int offset = indicesToOffset_${dt}(m);
          vec2 coords = offsetToCoords(offset, ${nt}, ${lt});
          return ${(0,it.getGlsl)(this.context.glContext.version).texture2D}(${dt}, coords);
        }
        `}}_.CoordsGlslLib=ct},8520:(_e,_)=>{var et;Object.defineProperty(_,"__esModule",{value:!0}),_.TopologicalSortGlslRoutines=_.GlslLibRoutineNode=_.GlslLibRoutine=_.GlslLib=_.GlslContext=_.FunctionType=void 0,(et=_.FunctionType||(_.FunctionType={}))[et.ValueBased=0]="ValueBased",et[et.Positional=1]="Positional",_.GlslContext=class{constructor(tt,rt,it,st){this.glContext=tt,this.programInfo=rt,this.inputTextureLayouts=it,this.outputTextureLayout=st}},_.GlslLib=class{constructor(tt){this.context=tt}},_.GlslLibRoutine=class{constructor(tt,rt){this.routineBody=tt,this.dependencies=rt}},_.GlslLibRoutineNode=class{constructor(tt,rt,it){this.name=tt,this.dependencies=it||[],rt&&(this.routineBody=rt)}addDependency(tt){tt&&this.dependencies.push(tt)}},_.TopologicalSortGlslRoutines=class{static returnOrderedNodes(tt){if(!tt||tt.length===0)return[];if(tt.length===1)return tt;const rt=new Set,it=new Set,st=new Array;return this.createOrderedNodes(tt,rt,it,st),st}static createOrderedNodes(tt,rt,it,st){for(let at=0;at<tt.length;++at)this.dfsTraverse(tt[at],rt,it,st)}static dfsTraverse(tt,rt,it,st){if(!tt||it.has(tt.name))return;if(rt.has(tt.name))throw new Error("Cyclic dependency detected. Can't topologically sort routines needed for shader.");rt.add(tt.name);const at=tt.dependencies;if(at&&at.length>0)for(let ct=0;ct<at.length;++ct)this.dfsTraverse(at[ct],rt,it,st);st.push(tt),it.add(tt.name),rt.delete(tt.name)}}},7341:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.EncodingGlslLib=void 0;const tt=et(8520);class rt extends tt.GlslLib{constructor(st){super(st)}getFunctions(){return Object.assign(Object.assign({},this.encodeFloat32()),this.decodeFloat32())}getCustomTypes(){return{}}encodeFloat32(){return{encode:new tt.GlslLibRoutine(`highp vec4 encode(highp float f) {
        return vec4(f, 0.0, 0.0, 0.0);
      }
        `)}}decodeFloat32(){return{decode:new tt.GlslLibRoutine(`highp float decode(highp vec4 rgba) {
        return rgba.r;
      }
        `)}}encodeUint8(){const st=rt.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{encode:new tt.GlslLibRoutine(`
      highp vec4 encode(highp float f) {
        highp float F = abs(f);
        highp float Sign = step(0.0,-f);
        highp float Exponent = floor(log2(F));
        highp float Mantissa = (exp2(- Exponent) * F);
        Exponent = floor(log2(F) + 127.0) + floor(log2(Mantissa));
        highp vec4 rgba;
        rgba[0] = 128.0 * Sign  + floor(Exponent*exp2(-1.0));
        rgba[1] = 128.0 * mod(Exponent,2.0) + mod(floor(Mantissa*128.0),128.0);
        rgba[2] = floor(mod(floor(Mantissa*exp2(23.0 -8.0)),exp2(8.0)));
        rgba[3] = floor(exp2(23.0)*mod(Mantissa,exp2(-15.0)));
        ${st}
        rgba = rgba / 255.0; // values need to be normalized to [0,1]
        return rgba;
    }
        `)}}decodeUint8(){const st=rt.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{decode:new tt.GlslLibRoutine(`
        highp float decode(highp vec4 rgba) {
          rgba = rgba * 255.0; // values need to be de-normalized from [0,1] to [0,255]
          ${st}
          highp float Sign = 1.0 - step(128.0,rgba[0])*2.0;
          highp float Exponent = 2.0 * mod(rgba[0],128.0) + step(128.0,rgba[1]) - 127.0;
          highp float Mantissa = mod(rgba[1],128.0)*65536.0 + rgba[2]*256.0 +rgba[3] + float(0x800000);
          highp float Result =  Sign * exp2(Exponent) * (Mantissa * exp2(-23.0 ));
          return Result;
      }
        `)}}static isLittleEndian(){const st=new ArrayBuffer(4),at=new Uint32Array(st),ct=new Uint8Array(st);if(at[0]=3735928559,ct[0]===239)return!0;if(ct[0]===222)return!1;throw new Error("unknown endianness")}}_.EncodingGlslLib=rt},9894:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.FragColorGlslLib=void 0;const tt=et(8520),rt=et(5060);class it extends tt.GlslLib{constructor(at){super(at)}getFunctions(){return Object.assign(Object.assign({},this.setFragColor()),this.getColorAsFloat())}getCustomTypes(){return{}}setFragColor(){const at=(0,rt.getGlsl)(this.context.glContext.version);return{setFragColor:new tt.GlslLibRoutine(`
        void setFragColor(float value) {
            ${at.output} = encode(value);
        }
        `,["encoding.encode"])}}getColorAsFloat(){return{getColorAsFloat:new tt.GlslLibRoutine(`
        float getColorAsFloat(vec4 color) {
            return decode(color);
        }
        `,["encoding.decode"])}}}_.FragColorGlslLib=it},2848:(_e,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.replaceInlines=void 0;const et=/@inline[\s\n\r]+(\w+)[\s\n\r]+([0-9a-zA-Z_]+)\s*\(([^)]*)\)\s*{(([^}]|[\n\r])*)}/gm;_.replaceInlines=function(tt){const rt={};let it;for(;(it=et.exec(tt))!==null;){const st=it[3].split(",").map(at=>{const ct=at.trim().split(" ");return ct&&ct.length===2?{type:ct[0],name:ct[1]}:null}).filter(at=>at!==null);rt[it[2]]={params:st,body:it[4]}}for(const st in rt){const at="(\\w+)?\\s+([_0-9a-zA-Z]+)\\s+=\\s+__FUNC__\\((.*)\\)\\s*;".replace("__FUNC__",st),ct=new RegExp(at,"gm");for(;(it=ct.exec(tt))!==null;){const ut=it[1],dt=it[2],ot=it[3].split(","),nt=ut?`${ut} ${dt};`:"";let lt=rt[st].body,ht="";rt[st].params.forEach((gt,mt)=>{gt&&(ht+=`${gt.type} ${gt.name} = ${ot[mt]};
`)}),lt=`${ht}
 ${lt}`,lt=lt.replace("return",`${dt} = `);const ft=`
      ${nt}
      {
        ${lt}
      }
      `;tt=tt.replace(it[0],ft)}}return tt.replace(et,"")}},8879:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.GlslPreprocessor=void 0;const tt=et(8520),rt=et(2848),it=et(5483),st=et(5060);_.GlslPreprocessor=class{constructor(at,ct,ut,dt){this.libs={},this.glslLibRoutineDependencyGraph={},this.context=new tt.GlslContext(at,ct,ut,dt),Object.keys(it.glslRegistry).forEach(nt=>{const lt=new it.glslRegistry[nt](this.context);this.libs[nt]=lt});const ot=this.glslLibRoutineDependencyGraph;for(const nt in this.libs){const lt=this.libs[nt].getFunctions();for(const ht in lt){const ft=nt+"."+ht;let gt;ot[ft]?(gt=ot[ft],gt.routineBody=lt[ht].routineBody):(gt=new tt.GlslLibRoutineNode(ft,lt[ht].routineBody),ot[ft]=gt);const mt=lt[ht].dependencies;if(mt)for(let yt=0;yt<mt.length;++yt)if(ot[mt[yt]])gt.addDependency(ot[mt[yt]]);else{const bt=new tt.GlslLibRoutineNode(mt[yt]);ot[mt[yt]]=bt,gt.addDependency(bt)}}}}preprocess(){const at=this.context.programInfo;let ct=at.shaderSource;return this.context.programInfo.hasMain||(ct=`${ct}
      ${(0,st.getDefaultFragShaderMain)(this.context.glContext.version,this.context.outputTextureLayout.shape.length)}`),ct=(0,rt.replaceInlines)(ct),`${(0,st.getFragShaderPreamble)(this.context.glContext.version)}
    ${this.getUniforms(at.inputNames,at.variables)}
    ${this.getImports(ct)}
    ${ct}`}getImports(at){const ct=this.selectGlslLibRoutinesToBeIncluded(at);if(ct.length===0)return"";let ut="";for(let dt=0;dt<ct.length;++dt){if(!ct[dt].routineBody)throw new Error(`Missing body for the Glsl Library routine: ${ct[dt].name}`);ut+=ct[dt].routineBody+`
`}return ut}selectGlslLibRoutinesToBeIncluded(at){const ct=[];return Object.keys(this.glslLibRoutineDependencyGraph).forEach(ut=>{const dt=ut.split(".")[1];at.indexOf(dt)!==-1&&ct.push(this.glslLibRoutineDependencyGraph[ut])}),tt.TopologicalSortGlslRoutines.returnOrderedNodes(ct)}getUniforms(at,ct){const ut=[];if(at)for(const dt of at)ut.push(`uniform sampler2D ${dt};`);if(ct)for(const dt of ct)ut.push(`uniform ${dt.type} ${dt.name}${dt.arrayLength?`[${dt.arrayLength}]`:""};`);return ut.join(`
`)}}},5483:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.glslRegistry=void 0;const tt=et(5107),rt=et(7341),it=et(9894),st=et(2655),at=et(3891);_.glslRegistry={encoding:rt.EncodingGlslLib,fragcolor:it.FragColorGlslLib,vec:at.VecGlslLib,shapeUtils:st.ShapeUtilsGlslLib,coordinates:tt.CoordsGlslLib}},2655:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.ShapeUtilsGlslLib=void 0;const tt=et(8520);class rt extends tt.GlslLib{constructor(st){super(st)}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.bcastIndex()),this.bcastMatmulIndex()),this.offsetToIndices()),this.indicesToOffset()),this.incrementIndices())}getCustomTypes(){return{}}bcastIndex(){const st=this.context.outputTextureLayout.shape.length,at={};return this.context.programInfo.inputNames.forEach((ct,ut)=>{const dt=this.context.inputTextureLayouts[ut].unpackedShape;if(dt.length<=st){const ot=dt.length,nt=st-ot,lt=`bcastIndices_${ct}`;let ht="";for(let gt=0;gt<ot;++gt)ht+=`
          realIndices[${gt}] = int( mod(float(bcastedIndices[${nt+gt}]), ${dt[gt]}.0) );
          `;const ft=`
        void ${lt} (int bcastedIndices[${st}], out int realIndices[${ot}]) {
          ${ht}
        }
        `;at[lt]=new tt.GlslLibRoutine(ft)}}),at}bcastMatmulIndex(){const st=this.context.outputTextureLayout.shape.length,at={};return this.context.programInfo.inputNames.forEach((ct,ut)=>{const dt=this.context.inputTextureLayouts[ut].shape;if(!(dt.length<2||dt.length>st)){const ot=dt.length,nt=st-ot,lt=`bcastMatmulIndices_${ct}`;let ht="";for(let gt=0;gt<ot-2;++gt)ht+=`
          realIndices[${gt}] = int( mod(float(bcastedIndices[${nt+gt}]), ${dt[gt]}.0) );
          `;const ft=`
        void ${lt}(int bcastedIndices[${st}], out int realIndices[${ot}]) {
          ${ht}
          realIndices[${ot-1}] = bcastedIndices[${st-1}];
          realIndices[${ot-2}] = bcastedIndices[${st-2}];
        }
        `;at[lt]=new tt.GlslLibRoutine(ft)}}),at}indicesToOffset(){const st={};return this.context.programInfo.inputNames.forEach((at,ct)=>{const ut=this.context.inputTextureLayouts[ct].shape,dt=this.context.inputTextureLayouts[ct].strides,ot=ut.length;let nt=`indicesToOffset_${at}`;st[nt]=new tt.GlslLibRoutine(rt.indexToOffsetSingle(nt,ot,dt)),nt=`indicesToOffset_${at}_T`,st[nt]=new tt.GlslLibRoutine(rt.indexToOffsetSingle(nt,ot,dt.slice().reverse()))}),st}static indexToOffsetSingle(st,at,ct){let ut="";for(let dt=at-1;dt>=0;--dt)ut+=`
        offset += indices[${dt}] * ${ct[dt]};
        `;return`
      int ${st}(int indices[${at}]) {
        int offset = 0;
        ${ut}
        return offset;
      }
      `}offsetToIndices(){const st={};return this.context.programInfo.inputNames.forEach((at,ct)=>{const ut=this.context.inputTextureLayouts[ct].shape,dt=this.context.inputTextureLayouts[ct].strides,ot=ut.length;let nt=`offsetToIndices_${at}`;st[nt]=new tt.GlslLibRoutine(rt.offsetToIndicesSingle(nt,ot,dt)),nt=`offsetToIndices_${at}_T`,st[nt]=new tt.GlslLibRoutine(rt.offsetToIndicesSingle(nt,ot,dt.slice().reverse()))}),st}static offsetToIndicesSingle(st,at,ct){const ut=[];for(let dt=0;dt<at-1;++dt)ut.push(`
      indices[${dt}] = offset / ${ct[dt]};`),ut.push(`
        offset -= indices[${dt}] * ${ct[dt]};`);return ut.push(`
      indices[${at-1}] = offset;`),`
      void ${st}(int offset, out int indices[${at}]) {
        ${ut.join("")}
      }
      `}incrementIndices(){const st={};return this.context.programInfo.inputNames.forEach((at,ct)=>{const ut=this.context.inputTextureLayouts[ct].shape,dt=ut.length,ot=`incrementIndices_${at}`;let nt="";for(let ht=0;ht<dt;++ht)nt+=`
        shape[${ht}] = ${ut[ht]};`;const lt=`
        void ${ot}(int axis, out int indices[${dt}]) {
          int shape[${dt}];
          ${nt};
          for(int i = ${dt} -1 ; i >= 0; --i) {
            if(i > axis) continue;
            indices[i] += 1;
            if(indices[i] < shape[i]) {
              break;
            }
            indices[i] = 0;
          }
        }
        `;st[ot]=new tt.GlslLibRoutine(lt)}),st}}_.ShapeUtilsGlslLib=rt},5060:(_e,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.getDefaultFragShaderMain=_.getFragShaderPreamble=_.getVertexShaderSource=_.getGlsl=void 0;const et={version:"",attribute:"attribute",varyingVertex:"varying",varyingFrag:"varying",texture2D:"texture2D",output:"gl_FragColor",outputDeclaration:""},tt={version:"#version 300 es",attribute:"in",varyingVertex:"out",varyingFrag:"in",texture2D:"texture",output:"outputColor",outputDeclaration:"out vec4 outputColor;"};function rt(it){return it===1?et:tt}_.getGlsl=rt,_.getVertexShaderSource=function(it){const st=rt(it);return`${st.version}
      precision highp float;
      ${st.attribute} vec3 position;
      ${st.attribute} vec2 textureCoord;

      ${st.varyingVertex} vec2 TexCoords;

      void main()
      {
          gl_Position = vec4(position, 1.0);
          TexCoords = textureCoord;
      }`},_.getFragShaderPreamble=function(it){const st=rt(it);return`${st.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${st.varyingFrag} vec2 TexCoords;
    ${st.outputDeclaration}
    const vec2 halfCR = vec2(0.5, 0.5);

    // Custom vector types to handle higher dimenalities.
    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    `},_.getDefaultFragShaderMain=function(it,st){return`
  void main() {
    int indices[${st}];
    toVec(TexCoords, indices);
    vec4 result = vec4(process(indices));
    ${rt(it).output} = result;
  }
  `}},3891:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.VecGlslLib=void 0;const tt=et(8520);class rt extends tt.GlslLib{constructor(st){super(st)}getCustomTypes(){return{}}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign({},this.binaryVecFunctions()),this.copyVec()),this.setVecItem()),this.getVecItem())}binaryVecFunctions(){const st=this.context.outputTextureLayout.shape.length,at={add:"+=",sub:"-=",mul:"*=",div:"/="},ct={};for(const ut in at){const dt=`${ut}Vec`;let ot="";for(let lt=0;lt<st;++lt)ot+=`
          dest[${lt}] ${at[ut]} src[${lt}];
          `;const nt=`
        void ${dt}(int src[${st}], out int dest[${st}]) {
          ${ot}
        }
        `;ct[dt]=new tt.GlslLibRoutine(nt)}return ct}copyVec(){const st=this.context.outputTextureLayout.shape.length;let at="";for(let ut=0;ut<st;++ut)at+=`
        dest[${ut}] = src[${ut}];
        `;const ct=`
      void copyVec(int src[${st}], out int dest[${st}]) {
        ${at}
      }
      `;return{copyVec:new tt.GlslLibRoutine(ct)}}setVecItem(){const st=this.context.outputTextureLayout.shape.length;let at=`
        if(index < 0)
            index =${st} + index;
        if (index == 0)
            m[0] = value;
        `;for(let ut=1;ut<st-1;++ut)at+=`
        else if (index == ${ut})
            m[${ut}] = value;
            `;at+=`
        else
            m[${st-1}] = value;
        `;const ct=`
      void setVecItem(out int m[${st}], int index, int value) {
        ${at}
      }
        `;return{setVecItem:new tt.GlslLibRoutine(ct)}}getVecItem(){const st=this.context.outputTextureLayout.shape.length;let at=`
        if(index < 0)
            index = ${st} + index;
        if (index == 0)
            return m[0];
      `;for(let ut=1;ut<st-1;++ut)at+=`
        else if (index == ${ut})
            return m[${ut}];
      `;at+=`
        else
            return m[${st-1}];
        `;const ct=`
      int getVecItem(int m[${st}], int index) {
        ${at}
      }
    `;return{getVecItem:new tt.GlslLibRoutine(ct)}}}_.VecGlslLib=rt},8316:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.WebGLInferenceHandler=void 0;const tt=et(6231),rt=et(9162),it=et(2517),st=et(2403),at=et(7019),ct=et(8710),ut=et(5611),dt=et(4057),ot=et(2039);_.WebGLInferenceHandler=class{constructor(nt){this.session=nt,this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map}calculateTextureWidthAndHeight(nt,lt){return(0,dt.calculateTextureWidthAndHeight)(this.session.layoutStrategy,nt,lt)}executeProgram(nt,lt){if(lt.length<nt.inputNames.length)throw new Error(`Input size mustn't be less than ${nt.inputNames.length}.`);if(nt.inputNames.length!==nt.inputTypes.length)throw new Error("input names size does not match input types");const ht=[];for(let _t=0;_t<nt.inputNames.length;++_t)ht[_t]=this.getOrCreateTextureData(lt[_t],nt.inputTypes[_t]);const ft=((_t,vt)=>{const xt=vt.map(Tt=>`${Tt.unpackedShape.join(",")};${Tt.width}x${Tt.height}`).join("_");let wt=_t.name;return _t.cacheHint&&(wt+="["+_t.cacheHint+"]"),wt+=":"+xt,wt})(nt,ht);let gt=this.session.programManager.getArtifact(ft);const mt=gt?gt.programInfo:typeof nt.get=="function"?nt.get():nt,yt=(0,dt.createTextureLayoutFromTextureType)(this.session.layoutStrategy,mt.output.dims,mt.output.textureType),bt=this.createTextureData(yt,mt.output.type);return gt||(gt=this.session.programManager.build(mt,ht,bt),this.session.programManager.setArtifact(ft,gt)),this.runProgram(gt,ht,bt),bt}run(nt,lt){return this.executeProgram(nt,lt).tensor}runProgram(nt,lt,ht){for(let ft=0;ft<lt.length;++ft)if(!!lt[ft].isPacked!=(nt.programInfo.inputTypes[ft]===ot.TextureType.packed))throw new Error(`input[${ft}] property packed inconsistent`);if(!!ht.isPacked!=(nt.programInfo.output.textureType===ot.TextureType.packed))throw new Error("output property packed inconsistent");this.session.programManager.run(nt,lt,ht)}getOrCreateTextureData(nt,lt){let ht=this.getTextureData(nt.dataId,lt===ot.TextureType.packed);if(!ht&&(ht=this.getTextureData(nt.dataId,lt!==ot.TextureType.packed),ht))return lt===ot.TextureType.packed?this.pack(ht):this.unpack(ht);if(!ht){const ft=(0,dt.createTextureLayoutFromTextureType)(this.session.layoutStrategy,nt.dims,lt);if(lt===ot.TextureType.packedLastDimension){const yt=nt.dims;if(yt.length===4){const bt=[yt[0],Math.ceil(yt[1]*yt[2]*yt[3]/4)],_t=(0,dt.createTextureLayoutFromTextureType)(this.session.layoutStrategy,bt,lt);let vt=nt.numberData;if(yt[1]*yt[2]*yt[3]%4!=0){const xt=yt[0],wt=yt[1]*yt[2]*yt[3],Tt=Math.ceil(wt*1/4)*4;vt=new Float32Array(xt*Tt);for(let St=0;St<xt;++St){const Et=St*wt,Ot=St*Tt+St%1*wt;vt.set(nt.numberData.subarray(Et,Et+wt),Ot)}}return this.createTextureData(_t,nt.type,vt,nt,1)}}if(lt===ot.TextureType.packed){const gt=(0,dt.createTextureLayoutFromShape)(this.session.layoutStrategy,nt.dims,1,[],{reverseWH:!0}),mt=this.createTextureData(gt,nt.type,nt.numberData,nt,1);ht=this.pack(mt)}else ht=this.createTextureData(ft,nt.type,nt.numberData,nt,1)}return ht}createTextureDataFromLayoutBindTensor(nt,lt,ht,ft){return this.createTextureData(nt,lt,ht,ft,1)}createTextureData(nt,lt,ht,ft,gt){tt.Logger.verbose("InferenceHandler",`Creating TextureData: layout:[${JSON.stringify(nt)}]`);const mt=this.session.textureManager.createTextureFromLayout(lt,nt,ht,gt);return this.createTextureDataFromTexture(nt,lt,mt,ft)}reshapeUnpacked(nt,lt){const ht=this.getOrCreateTextureData(nt,ot.TextureType.unpacked),ft={channels:ht.channels,height:ht.height,width:ht.width,shape:lt.length!==0?lt:[1],strides:it.ShapeUtil.computeStrides(lt),unpackedShape:lt};return this.createTextureDataFromTexture(ft,nt.type,ht.texture).tensor}reshapePacked(nt,lt){const ht=this.getOrCreateTextureData(nt,ot.TextureType.packed);if((0,at.isReshapeCheap)(nt.dims,lt)){const bt={channels:ht.channels,height:ht.height,width:ht.width,shape:lt.length!==0?lt:[1],strides:it.ShapeUtil.computeStrides(lt),unpackedShape:lt,isPacked:!0};return this.createTextureDataFromTexture(bt,nt.type,ht.texture).tensor}const ft=(0,at.processDims3D)(nt.dims),gt=(0,at.processDims3D)(lt),mt=this.reshapePacked(nt,ft),yt=this.run((0,at.createPackedReshape3DProgramInfoLoader)(this,mt,gt),[mt]);return this.reshapePacked(yt,lt)}cast(nt,lt){const ht=this.getOrCreateTextureData(nt,ot.TextureType.unpacked);return this.createTextureDataFromTexture(ht,lt,ht.texture).tensor}createTextureDataFromTexture(nt,lt,ht,ft,gt){const mt=Object.assign(Object.assign({},nt),{tensor:ft||new rt.Tensor(nt.unpackedShape,lt,yt=>this.readTexture(mt),async yt=>this.readTextureAsync(mt),void 0,gt),texture:ht});return this.setTextureData(mt.tensor.dataId,mt,nt.isPacked),mt}getTextureData(nt,lt=!1){return this.session.isInitializer(nt)?this.session.getTextureData(nt,lt):lt?this.packedTextureDataCache.get(nt):this.unpackedTextureDataCache.get(nt)}setTextureData(nt,lt,ht=!1){this.session.isInitializer(nt)?this.session.setTextureData(nt,lt,ht):(ht?this.packedTextureDataCache:this.unpackedTextureDataCache).set(nt,lt)}isTextureLayoutCached(nt,lt=!1){return!!this.getTextureData(nt.dataId,lt)}dispose(){this.session.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(nt=>this.session.textureManager.releaseTexture(nt)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(nt=>this.session.textureManager.releaseTexture(nt)),this.unpackedTextureDataCache=new Map}readTexture(nt){return nt.isPacked?this.readTexture(this.unpack(nt)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTexture(nt,nt.tensor.type,nt.channels):this.session.textureManager.readUint8TextureAsFloat((0,ct.encodeAsUint8)(this,nt))}async readTextureAsync(nt){return nt.isPacked?this.readTextureAsync(this.unpack(nt)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTextureAsync(nt,nt.tensor.type,nt.channels):this.session.textureManager.readUint8TextureAsFloat((0,ct.encodeAsUint8)(this,nt))}pack(nt){return this.executeProgram((0,st.createPackProgramInfoLoader)(this,nt.tensor),[nt.tensor])}unpack(nt){return this.executeProgram((0,ut.createUnpackProgramInfoLoader)(this,nt.tensor),[nt.tensor])}}},1640:function(_e,_,et){var tt=this&&this.__createBinding||(Object.create?function(zt,Ut,Vt,Ht){Ht===void 0&&(Ht=Vt);var sr=Object.getOwnPropertyDescriptor(Ut,Vt);sr&&!("get"in sr?!Ut.__esModule:sr.writable||sr.configurable)||(sr={enumerable:!0,get:function(){return Ut[Vt]}}),Object.defineProperty(zt,Ht,sr)}:function(zt,Ut,Vt,Ht){Ht===void 0&&(Ht=Vt),zt[Ht]=Ut[Vt]}),rt=this&&this.__setModuleDefault||(Object.create?function(zt,Ut){Object.defineProperty(zt,"default",{enumerable:!0,value:Ut})}:function(zt,Ut){zt.default=Ut}),it=this&&this.__importStar||function(zt){if(zt&&zt.__esModule)return zt;var Ut={};if(zt!=null)for(var Vt in zt)Vt!=="default"&&Object.prototype.hasOwnProperty.call(zt,Vt)&&tt(Ut,zt,Vt);return rt(Ut,zt),Ut};Object.defineProperty(_,"__esModule",{value:!0}),_.WEBGL_OP_RESOLVE_RULES=void 0;const st=et(2898),at=it(et(7839)),ct=et(4196),ut=et(2069),dt=et(8138),ot=et(9663),nt=et(5193),lt=et(7992),ht=et(1253),ft=et(4776),gt=et(6572),mt=et(3346),yt=et(5623),bt=et(2870),_t=et(2143),vt=et(4939),xt=et(718),wt=et(2268),Tt=et(8117),St=et(2278),Et=et(5524),Ot=et(5975),Rt=et(3933),Pt=et(6558),Mt=et(5723),$t=et(3738),kt=it(et(4909)),Lt=et(8428),Nt=et(9793);_.WEBGL_OP_RESOLVE_RULES=[["Abs","","6+",kt.abs],["Acos","","7+",kt.acos],["Add","","7+",at.add],["And","","7+",at.and],["Asin","","7+",kt.asin],["Atan","","7+",kt.atan],["AveragePool","","7+",_t.averagePool,_t.parseAveragePoolAttributes],["BatchNormalization","","7+",st.batchNormalization,st.parseBatchNormalizationAttributes],["Cast","","6+",ct.cast,ct.parseCastAttributes],["Ceil","","6+",kt.ceil],["Clip","","6-10",kt.clip,kt.parseClipAttributes],["Clip","","11+",kt.clipV11],["Concat","","4+",ut.concat,ut.parseConcatAttributes],["Conv","","1+",dt.conv,dt.parseConvAttributes],["ConvTranspose","","1+",ot.convTranspose,ot.parseConvTransposeAttributes],["Cos","","7+",kt.cos],["Div","","7+",at.div],["Dropout","","7+",kt.identity],["DepthToSpace","","1+",nt.depthToSpace,nt.parseDepthToSpaceAttributes],["Equal","","7+",at.equal],["Elu","","6+",kt.elu,kt.parseEluAttributes],["Exp","","6+",kt.exp],["Flatten","","1+",lt.flatten,lt.parseFlattenAttributes],["Floor","","6+",kt.floor],["FusedConv","com.microsoft","1+",dt.conv,dt.parseConvAttributes],["Gather","","1+",ht.gather,ht.parseGatherAttributes],["Gemm","","7-10",ft.gemm,ft.parseGemmAttributesV7],["Gemm","","11+",ft.gemm,ft.parseGemmAttributesV11],["GlobalAveragePool","","1+",_t.globalAveragePool,_t.parseGlobalAveragePoolAttributes],["GlobalMaxPool","","1+",_t.globalMaxPool],["Greater","","7+",at.greater],["Identity","","1+",kt.identity],["ImageScaler","","1+",gt.imageScaler,gt.parseImageScalerAttributes],["InstanceNormalization","","6+",mt.instanceNormalization,mt.parseInstanceNormalizationAttributes],["LeakyRelu","","6+",kt.leakyRelu,kt.parseLeakyReluAttributes],["Less","","7+",at.less],["Log","","6+",kt.log],["MatMul","","1+",yt.matMul,yt.parseMatMulAttributes],["MaxPool","","1+",_t.maxPool,_t.parseMaxPoolAttributes],["Mul","","7+",at.mul],["Neg","","6+",kt.neg],["Not","","1+",kt.not],["Or","","7+",at.or],["Pad","","2-10",bt.padV2,bt.parsePadAttributesV2],["Pad","","11+",bt.padV11,bt.parsePadAttributesV11],["Pow","","7+",at.pow],["PRelu","","7+",at.pRelu],["ReduceLogSum","","1+",vt.reduceLogSum,vt.parseReduceAttributes],["ReduceMax","","1+",vt.reduceMax,vt.parseReduceAttributes],["ReduceMean","","1+",vt.reduceMean,vt.parseReduceAttributes],["ReduceMin","","1+",vt.reduceMin,vt.parseReduceAttributes],["ReduceProd","","1+",vt.reduceProd,vt.parseReduceAttributes],["ReduceSum","","1-12",vt.reduceSum,vt.parseReduceAttributes],["ReduceSumSquare","","1+",vt.reduceLogSumSquare,vt.parseReduceAttributes],["Relu","","6+",kt.relu],["Reshape","","5+",xt.reshape],["Resize","","10",wt.resize,wt.parseResizeAttributesV10],["Resize","","11+",wt.resize,wt.parseResizeAttributesV11],["Shape","","1+",Tt.shape],["Sigmoid","","6+",kt.sigmoid],["Sin","","7+",kt.sin],["Slice","","10+",St.sliceV10],["Slice","","1-9",St.slice,St.parseSliceAttributes],["Softmax","","1-12",Et.softmax,Et.parseSoftmaxAttributes],["Softmax","","13+",Et.softmaxV13,Et.parseSoftmaxAttributesV13],["Split","","2-12",Ot.split,Ot.parseSplitAttributes],["Sqrt","","6+",kt.sqrt],["Squeeze","","1-12",Rt.squeeze,Rt.parseSqueezeAttributes],["Squeeze","","13+",Rt.squeezeV13],["Sub","","7+",at.sub],["Sum","","6+",Pt.sum],["Tan","","7+",kt.tan],["Tanh","","6+",kt.tanh],["Tile","","6+",Mt.tile],["Transpose","","1+",$t.transpose,$t.parseTransposeAttributes],["Upsample","","7-8",Nt.upsample,Nt.parseUpsampleAttributesV7],["Upsample","","9",Nt.upsample,Nt.parseUpsampleAttributesV9],["Unsqueeze","","1-12",Lt.unsqueeze,Lt.parseUnsqueezeAttributes],["Unsqueeze","","13+",Lt.unsqueezeV13],["Xor","","7+",at.xor]]},2898:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseBatchNormalizationAttributes=_.batchNormalization=void 0;const tt=et(246),rt=et(5060),it=et(2039),st={name:"BatchNormalization",inputNames:["A","Scale","B","Mean","Variance"],inputTypes:[it.TextureType.unpacked,it.TextureType.unpacked,it.TextureType.unpacked,it.TextureType.unpacked,it.TextureType.unpacked]};_.batchNormalization=(ut,dt,ot)=>(ct(dt),[ut.run(Object.assign(Object.assign({},st),{cacheHint:ot.cacheKey,get:()=>at(ut,dt,ot)}),dt)]),_.parseBatchNormalizationAttributes=ut=>{const dt=ut.attributes.getFloat("epsilon",1e-5),ot=ut.attributes.getFloat("momentum",.9),nt=ut.attributes.getInt("spatial",1);return(0,tt.createAttributeWithCacheKey)({epsilon:dt,momentum:ot,spatial:nt})};const at=(ut,dt,ot)=>{const nt=(0,rt.getGlsl)(ut.session.backend.glContext.version),lt=dt[0].dims.length,[ht,ft]=ut.calculateTextureWidthAndHeight(dt[1].dims,it.TextureType.unpacked),gt=`
  float process(int[${lt}] indices) {
    vec2 position = offsetToCoords(indices[1], ${ht}, ${ft});
    float scale = getColorAsFloat(${nt.texture2D}(Scale, position));
    float mean = getColorAsFloat(${nt.texture2D}(Mean, position));
    float variance = getColorAsFloat(${nt.texture2D}(Variance, position));
    float b = getColorAsFloat(${nt.texture2D}(B, position));

    return scale * ( (_A(indices) - mean) / sqrt(variance + float(${ot.epsilon})) ) + b;
  }`;return Object.assign(Object.assign({},st),{output:{dims:dt[0].dims,type:dt[0].type,textureType:it.TextureType.unpacked},shaderSource:gt})},ct=ut=>{if(!ut||ut.length!==5)throw new Error("BatchNormalization requires 5 inputs.");const dt=ut[0],ot=ut[1],nt=ut[2],lt=ut[3],ht=ut[4];if(dt.dims.length<3||ot.dims.length!==1||nt.dims.length!==1||lt.dims.length!==1||ht.dims.length!==1)throw new Error("invalid input shape.");if(ot.dims[0]!==dt.dims[1]||nt.dims[0]!==dt.dims[1]||lt.dims[0]!==dt.dims[1]||ht.dims[0]!==dt.dims[1])throw new Error("invalid input shape.");if(dt.type!=="float32"&&dt.type!=="float64"||ot.type!=="float32"&&ot.type!=="float64"||nt.type!=="float32"&&nt.type!=="float64"||lt.type!=="float32"&&lt.type!=="float64"||ht.type!=="float32"&&ht.type!=="float64")throw new Error("invalid input tensor types.")}},7839:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.xor=_.sub=_.pRelu=_.pow=_.or=_.mul=_.less=_.greater=_.equal=_.div=_.and=_.add=_.glslPRelu=_.glslPow=_.glslXor=_.glslOr=_.glslAnd=_.glslLess=_.glslGreater=_.glslEqual=_.glslSub=_.glslMul=_.glslDiv=_.glslAdd=void 0;const tt=et(2517),rt=et(8520),it=et(5060),st=et(2039);function at(){const vt="add_";return{body:`
  float ${vt}(float a, float b) {
    return a + b;
  }
  vec4 ${vt}(vec4 v1, vec4 v2) {
    return v1 + v2;
  }
  `,name:vt,type:rt.FunctionType.ValueBased}}function ct(){const vt="div_";return{body:`
  float ${vt}(float a, float b) {
    return a / b;
  }
  vec4 ${vt}(vec4 v1, vec4 v2) {
    return v1 / v2;
  }
  `,name:vt,type:rt.FunctionType.ValueBased}}function ut(){const vt="mul_";return{body:`
  float ${vt}(float a, float b) {
    return a * b;
  }
  vec4 ${vt}(vec4 v1, vec4 v2) {
    return v1 * v2;
  }
  `,name:vt,type:rt.FunctionType.ValueBased}}function dt(){const vt="sub_";return{body:`
  float ${vt}(float a, float b) {
    return a - b;
  }
  vec4 ${vt}(vec4 v1, vec4 v2) {
    return v1 - v2;
  }
  `,name:vt,type:rt.FunctionType.ValueBased}}function ot(){const vt="equal_";return{body:`
  float ${vt}(float a, float b) {
    return float(a == b);
  }
  vec4 ${vt}(vec4 v1, vec4 v2) {
    return vec4(equal(v1, v2));
  }
  `,name:vt,type:rt.FunctionType.ValueBased}}function nt(){const vt="greater_";return{body:`
  float ${vt}(float a, float b) {
    return float(a > b);
  }
  vec4 ${vt}(vec4 v1, vec4 v2) {
    return vec4( v1.r > v2.r ,
      v1.g > v2.g,
      v1.b > v2.b,
      v1.a > v2.a );
  }
  `,name:vt,type:rt.FunctionType.ValueBased}}function lt(){const vt="less_";return{body:`
  float ${vt}(float a, float b) {
    return float(a < b);
  }
  vec4 ${vt}(vec4 v1, vec4 v2) {
    return vec4( v1.r < v2.r ,
                v1.g < v2.g,
                v1.b < v2.b,
                v1.a < v2.a );
  }
  `,name:vt,type:rt.FunctionType.ValueBased}}function ht(){const vt="and_";return{body:`
  float ${vt}(float a, float b) {
    return float( bool(a) && bool(b) );
  }
  vec4 ${vt}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r && b2.r ,
                b1.g && b2.g,
                b1.b && b2.b,
                b1.a && b2.a );
  }
  `,name:vt,type:rt.FunctionType.ValueBased}}function ft(){const vt="or_";return{body:`
  float ${vt}(float a, float b) {
    return float( bool(a) || bool(b) );
  }
  vec4 ${vt}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r || b2.r ,
                b1.g || b2.g,
                b1.b || b2.b,
                b1.a || b2.a );
  }
  `,name:vt,type:rt.FunctionType.ValueBased}}function gt(){const vt="xor_";return{body:`
  float ${vt}(float a, float b) {
    return float( bool(a) ^^ bool(b) );
  }
  vec4 ${vt}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r ^^ b2.r ,
                b1.g ^^ b2.g,
                b1.b ^^ b2.b,
                b1.a ^^ b2.a );
  }
  `,name:vt,type:rt.FunctionType.ValueBased}}function mt(){return function(vt){const xt=`${vt}_`;return{body:`
  float ${xt}(float a, float b) {
    return ${vt}(a, b);
  }
  vec4 ${xt}(vec4 v1, vec4 v2) {
    return ${vt}(v1, v2);
  }
  `,name:xt,type:rt.FunctionType.ValueBased}}("pow")}function yt(){const vt="prelu_";return{body:`
  float ${vt}(float a, float b) {
    return a < 0.0 ? a * b: a;
  }
  vec4 ${vt}(vec4 v1, vec4 v2) {
    return vec4(
      v1.r < 0.0 ? v1.r * v2.r: v1.r,
      v1.g < 0.0 ? v1.g * v2.g: v1.g,
      v1.b < 0.0 ? v1.b * v2.b: v1.b,
      v1.a < 0.0 ? v1.a * v2.a: v1.a
      );
  }
  `,name:vt,type:rt.FunctionType.ValueBased}}_.glslAdd=at,_.glslDiv=ct,_.glslMul=ut,_.glslSub=dt,_.glslEqual=ot,_.glslGreater=nt,_.glslLess=lt,_.glslAnd=ht,_.glslOr=ft,_.glslXor=gt,_.glslPow=mt,_.glslPRelu=yt;const bt=(vt,xt,wt,Tt=xt[0].type,St)=>{const Et=vt.session.pack?st.TextureType.packed:st.TextureType.unpacked;return{name:wt.name,inputNames:["A","B"],inputTypes:[Et,Et],cacheHint:St,get:()=>_t(vt,xt,wt,Tt)}},_t=(vt,xt,wt,Tt=xt[0].type)=>{const St=vt.session.pack?st.TextureType.packed:st.TextureType.unpacked,Et=!tt.ShapeUtil.areEqual(xt[0].dims,xt[1].dims);let Ot=xt[0].dims;const Rt=vt.session.pack;if(Et){const $t=tt.BroadcastUtil.calcShape(xt[0].dims,xt[1].dims,!1);if(!$t)throw new Error("Can't perform binary op on the given tensors");Ot=$t;const kt=Ot.length,Lt=xt[0].dims.length!==0?xt[0].dims.length:1,Nt=xt[1].dims.length!==0?xt[1].dims.length:1,zt=xt[0].dims.length!==0?"bcastIndices_A(indices, aindices);":"aindices[0] = 0;",Ut=xt[1].dims.length!==0?"bcastIndices_B(indices, bindices);":"bindices[0] = 0;",Vt=(0,it.getGlsl)(vt.session.backend.glContext.version),Ht=Rt?`
      ${wt.body}
      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();
        vec4 result = ${wt.name}(a, b);
        ${Vt.output} = result;
      }`:`
      ${wt.body}
      float process(int indices[${kt}]) {
        int aindices[${Lt}];
        int bindices[${Nt}];
        ${zt}
        ${Ut}
        return ${wt.name}(_A(aindices), _B(bindices));
      }`;return{name:wt.name,inputNames:["A","B"],inputTypes:[St,St],output:{dims:Ot,type:Tt,textureType:St},shaderSource:Ht,hasMain:Rt}}const Pt=(0,it.getGlsl)(vt.session.backend.glContext.version),Mt=`
    ${wt.body}
    void main() {
      vec4 v1 = ${Pt.texture2D}(A, TexCoords);
      vec4 v2 = ${Pt.texture2D}(B, TexCoords);
      vec4 result = ${wt.name}(v1, v2);
      ${Pt.output} = result;
    }
    `;return{name:wt.name,inputNames:["A","B"],inputTypes:[St,St],output:{dims:xt[0].dims,type:Tt,textureType:St},shaderSource:Mt,hasMain:!0}};_.add=(vt,xt)=>[vt.run(bt(vt,xt,at()),xt)],_.and=(vt,xt)=>[vt.run(bt(vt,xt,ht(),"bool"),xt)],_.div=(vt,xt)=>[vt.run(bt(vt,xt,ct()),xt)],_.equal=(vt,xt)=>[vt.run(bt(vt,xt,ot(),"bool"),xt)],_.greater=(vt,xt)=>[vt.run(bt(vt,xt,nt(),"bool"),xt)],_.less=(vt,xt)=>[vt.run(bt(vt,xt,lt(),"bool"),xt)],_.mul=(vt,xt)=>[vt.run(bt(vt,xt,ut()),xt)],_.or=(vt,xt)=>[vt.run(bt(vt,xt,ft(),"bool"),xt)],_.pow=(vt,xt)=>[vt.run(bt(vt,xt,mt()),xt)],_.pRelu=(vt,xt)=>[vt.run(bt(vt,xt,yt()),xt)],_.sub=(vt,xt)=>[vt.run(bt(vt,xt,dt()),xt)],_.xor=(vt,xt)=>[vt.run(bt(vt,xt,gt(),"bool"),xt)]},4196:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseCastAttributes=_.cast=void 0;const tt=et(2517);_.cast=(it,st,at)=>(rt(st),[it.cast(st[0],at)]),_.parseCastAttributes=it=>tt.ProtoUtil.tensorDataTypeFromProto(it.attributes.getInt("to"));const rt=it=>{if(!it||it.length!==1)throw new Error("Cast requires 1 input.");if(it[0].type==="string")throw new Error("Invalid input type.")}},1163:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.createPackedConcatProgramInfoLoader=void 0;const tt=et(5060),rt=et(2039),it=et(9390),st=et(2827);_.createPackedConcatProgramInfoLoader=(ct,ut,dt)=>{const ot=(nt=ut.length,lt=dt.cacheKey,{name:"Concat (packed)",inputNames:Array.from({length:nt},(ht,ft)=>`X${ft}`),inputTypes:Array(nt).fill(rt.TextureType.packed),cacheHint:lt});var nt,lt;return Object.assign(Object.assign({},ot),{get:()=>((ht,ft,gt,mt)=>{const yt=gt[0].dims.slice();if(mt>=yt.length||mt<-1*yt.length)throw new Error("axis specified for concat doesn't match input dimensionality");mt<0&&(mt=yt.length+mt);const bt=yt.slice(0);for(let zt=1;zt<gt.length;zt++){const Ut=gt[zt].dims.slice();for(let Vt=0;Vt<yt.length;Vt++)if(Vt===mt)bt[mt]+=Ut[Vt];else if(yt[Vt]!==Ut[Vt])throw new Error("non concat dimensions must match")}const _t=bt.length,vt=(0,st.getChannels)("coords",_t),xt=(0,it.getCoordsDataType)(_t),wt=(0,st.unpackFromChannel)(),Tt=gt.map(zt=>zt.dims),St=(0,it.getGlChannels)(_t),Et=new Array(Tt.length-1);Et[0]=Tt[0][mt];for(let zt=1;zt<Et.length;zt++)Et[zt]=Et[zt-1]+Tt[zt][mt];const Ot=St[mt],Rt=St.slice(-2),Pt=St.join();let Mt=`if (${Ot} < ${Et[0]}) {
        return getChannel(
            getX0(${Pt}), vec2(${Rt.join()}));
        }`;for(let zt=1;zt<Et.length;zt++){const Ut=Et[zt-1];Mt+=`
            if (${Ot} < ${Et[zt]}  && ${Ot} >= ${Et[zt-1]}) {
              return getChannel(
                getX${zt}(${at(St,Ot,Ut)}),
                vec2(${at(Rt,Ot,Ut)}));
            }`}const $t=Et.length,kt=Et[Et.length-1];Mt+=`
            return getChannel(
              getX${$t}(${at(St,Ot,kt)}),
              vec2(${at(Rt,Ot,kt)}));`;const Lt=(0,tt.getGlsl)(ht.session.backend.glContext.version),Nt=`
          ${wt}
          float getValue(${St.map(zt=>"int "+zt)}) {
            ${Mt}
          }

          void main() {
            ${xt} coords = getOutputCoords();
            int lastDim = coords.${St[_t-1]};
            coords.${St[_t-1]} = coords.${St[_t-2]};
            coords.${St[_t-2]} = lastDim;

            vec4 result = vec4(getValue(${vt}), 0., 0., 0.);

            ${vt[_t-1]} = ${vt[_t-1]} + 1;
            if (${vt[_t-1]} < ${bt[_t-1]}) {
              result.g = getValue(${vt});
            }

            ${vt[_t-2]} = ${vt[_t-2]} + 1;
            if (${vt[_t-2]} < ${bt[_t-2]}) {
              result.a = getValue(${vt});
            }

            ${vt[_t-1]} = ${vt[_t-1]} - 1;
            if (${vt[_t-2]} < ${bt[_t-2]} &&
                ${vt[_t-1]} < ${bt[_t-1]}) {
              result.b = getValue(${vt});
            }
            ${Lt.output} = result;
          }
        `;return Object.assign(Object.assign({},ft),{output:{dims:bt,type:gt[0].type,textureType:rt.TextureType.packed},shaderSource:Nt,hasMain:!0})})(ct,ot,ut,dt.axis)})};const at=(ct,ut,dt)=>{const ot=ct.indexOf(ut);return ct.map((nt,lt)=>lt===ot?`${nt} - ${dt}`:nt).join()}},2069:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseConcatAttributes=_.concat=void 0;const tt=et(246),rt=et(2039),it=et(1163);_.concat=(nt,lt,ht)=>(ot(lt),nt.session.pack&&lt[0].dims.length>1?[nt.run((0,it.createPackedConcatProgramInfoLoader)(nt,lt,ht),lt)]:[nt.run(st(nt,lt,ht),lt)]);const st=(nt,lt,ht)=>{const ft=(gt=lt.length,mt=ht.cacheKey,{name:"Concat",inputNames:Array.from({length:gt},(yt,bt)=>`X${bt}`),inputTypes:Array(gt).fill(rt.TextureType.unpacked),cacheHint:mt});var gt,mt;return Object.assign(Object.assign({},ft),{get:()=>((yt,bt,_t,vt)=>{const xt=_t[0].dims.slice();if(vt>=xt.length||vt<-1*xt.length)throw new Error("axis specified for concat doesn't match input dimensionality");vt<0&&(vt=xt.length+vt);const wt=xt.slice(0);for(let Pt=1;Pt<_t.length;Pt++){const Mt=_t[Pt].dims.slice();for(let $t=0;$t<xt.length;$t++)if($t===vt)wt[vt]+=Mt[$t];else if(xt[$t]!==Mt[$t])throw new Error("non concat dimensions must match")}const Tt=wt.length,St=new Array(_t.length);let Et=0;for(let Pt=0;Pt<St.length;++Pt)Et+=_t[Pt].dims[vt],St[Pt]=Et;let Ot="";Ot=_t.length<5?at(St):ct(St);const Rt=`
        ${ut(_t.length,Tt)}
        ${dt(St)}
        ${Ot}
        float process(int indices[${Tt}]) {
          int textureIndex = getTextureWhereDataResides (indices[${vt}]);

          if(textureIndex != 0) {
            indices[${vt}] = indices[${vt}] - int(getSizeInConcatAxisValueFromIndex(textureIndex-int(1)));
          }

          return fetchDataFromCorrectTexture(textureIndex, indices);
        }`;return Object.assign(Object.assign({},bt),{output:{dims:wt,type:_t[0].type,textureType:rt.TextureType.unpacked},shaderSource:Rt})})(0,ft,lt,ht.axis)})},at=nt=>`int getTextureWhereDataResides(int index) {
      ${nt.map((lt,ht)=>`if(index<${lt}) {return ${ht};}
`).join("")}
    }`,ct=nt=>at(nt),ut=(nt,lt)=>{const ht=[`float fetchDataFromCorrectTexture(int textureIndex, int indices[${lt}]) {`];for(let ft=0;ft<nt;++ft)ft===0?ht.push(`	if (textureIndex == ${ft}) { return _X${ft}(indices); }`):ft===nt-1?ht.push(`	else { return _X${ft}(indices); }`):ht.push(`	else if (textureIndex == ${ft}) { return _X${ft}(indices); }`);return ht.push("	}"),ht.join(`
`)},dt=nt=>{const lt=["int getSizeInConcatAxisValueFromIndex(int index) {"];for(let ht=0;ht<nt.length;++ht)ht===0?lt.push(`	if (index == ${ht}) { return ${nt[ht]}; }`):ht===nt.length-1?lt.push(`	else { return ${nt[ht]}; }`):lt.push(`	else if (index == ${ht}) { return ${nt[ht]}; }`);return lt.push("	}"),lt.join(`
`)};_.parseConcatAttributes=nt=>(0,tt.createAttributeWithCacheKey)({axis:nt.attributes.getInt("axis")});const ot=nt=>{if(!nt||nt.length<1)throw new Error("too few inputs");const lt=nt[0].type,ht=nt[0].dims.length;if(lt==="string")throw new Error("string tensor is not supported yet");for(const ft of nt){if(ft.type!==lt)throw new Error("input tensors should be one type");if(ft.dims.length!==ht)throw new Error("input tensors should have the same shape")}}},4770:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.createUnpackedGroupedConvProgramInfoLoader=void 0;const tt=et(6231),rt=et(5060),it=et(2039),st=et(8138),at=et(2823);_.createUnpackedGroupedConvProgramInfoLoader=(ct,ut,dt)=>{const ot=(nt=ut.length>2,lt=dt.cacheKey,{name:"GroupedConv",inputNames:nt?["X","W","Bias"]:["X","W"],inputTypes:nt?[it.TextureType.unpacked,it.TextureType.unpacked,it.TextureType.unpacked]:[it.TextureType.unpacked,it.TextureType.unpacked],cacheHint:lt});var nt,lt;return Object.assign(Object.assign({},ot),{get:()=>((ht,ft,gt,mt)=>{const yt=ft.length>2?"value += getBias(output_channel);":"",bt=ft[0].dims.slice(),_t=ft[1].dims.slice(),vt=_t[0]/mt.group;tt.Logger.verbose("GroupedConv",`autpPad:${mt.autoPad}, dilations:${mt.dilations}, group:${mt.group}, kernelShape:${mt.kernelShape}, pads:${mt.pads}, strides:${mt.strides}`);const xt=(0,st.calculateOutputShape)(bt,_t,mt.dilations,mt.pads,mt.strides),wt=(0,rt.getGlsl)(ht.session.backend.glContext.version),{activationFunction:Tt,applyActivation:St}=(0,at.getActivationSnippet)(mt),Et=`
  const ivec2 strides = ivec2(${mt.strides[0]}, ${mt.strides[1]});
  const ivec2 pads = ivec2(${mt.pads[0]}, ${mt.pads[1]});
  ${Tt}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;
    ivec2 xRCCorner = coords.zw * strides - pads;
    int group_id = output_channel / ${vt};

    float value = 0.0;
    for (int wInChannel = 0; wInChannel < ${_t[1]}; wInChannel++) {
      int input_channel = group_id * ${_t[1]} + wInChannel;
      for (int wHeight = 0; wHeight < ${_t[2]}; wHeight++) {
        int xHeight = xRCCorner.x + wHeight * ${mt.dilations[0]};

        if (xHeight < 0 || xHeight >= ${bt[2]}) {
          continue;
        }

        for (int wWidth = 0; wWidth < ${_t[3]}; wWidth++) {
          int xWidth = xRCCorner.y + wWidth * ${mt.dilations[1]};
          if (xWidth < 0 || xWidth >= ${bt[3]}) {
            continue;
          }

          float xVal = getX(batch, input_channel, xWidth, xHeight);
          float wVal = getW(output_channel, wInChannel, wWidth, wHeight);
          value += xVal*wVal;
        }
      }
    }
    ${yt}
    ${St}
    ${wt.output} = vec4(value, .0, .0, .0);
  }
`;return Object.assign(Object.assign({},gt),{output:{dims:xt,type:ft[0].type,textureType:it.TextureType.unpacked},shaderSource:Et,hasMain:!0})})(ct,ut,ot,dt)})}},1386:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.conv2DPacked=_.conv2DPackedPointwise=void 0;const tt=et(8138),rt=et(8555),it=et(708);_.conv2DPackedPointwise=(st,at,ct)=>{const ut=at[0].dims,dt=at[1].dims,ot=(0,tt.calculateOutputShape)(ut,dt,ct.dilations,ct.pads,ct.strides),nt=st.reshapePacked(at[0],[ut[1],ut[2]*ut[3]]),lt=st.reshapePacked(at[1],[dt[0],dt[1]]),ht=at.length>2?[lt,nt,at[2]]:[lt,nt],ft=st.run((0,it.createPackedMatmulProgramInfoLoader)(st,ht,ct),ht);return st.reshapePacked(ft,ot)},_.conv2DPacked=(st,at,ct)=>{const ut=at[0].dims,dt=at[1].dims,ot=(0,tt.calculateOutputShape)(ut,dt,ct.dilations,ct.pads,ct.strides),nt=st.run((0,rt.createPackedIm2ColProgramInfoLoader)(st,at[0],at[1],ot,ct),[at[0]]),lt=st.reshapePacked(at[1],[dt[0],dt[1]*dt[2]*dt[3]]),ht=at.length===3?[lt,nt,at[2]]:[lt,nt],ft=st.run((0,it.createPackedMatmulProgramInfoLoader)(st,ht,ct),ht);return st.reshapePacked(ft,ot)}},9663:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseConvTransposeAttributes=_.convTranspose=void 0;const tt=et(246),rt=et(5060),it=et(2039),st=et(2823),at=(lt,ht,ft,gt,mt,yt)=>(lt-1)*ht+ft+(gt-1)*mt+1-yt,ct=(lt,ht,ft,gt,mt)=>{const yt=Math.floor(lt/2);ht==="SAME_UPPER"?(ft[gt]=yt,ft[mt]=lt-yt):ht==="SAME_LOWER"&&(ft[gt]=lt-yt,ft[mt]=yt)};_.convTranspose=(lt,ht,ft)=>(nt(ht,ft),ut(lt,ht,ft));const ut=(lt,ht,ft)=>{const gt=ot(ft,ht);return[dt(lt,ht,gt)]},dt=(lt,ht,ft)=>lt.run(((gt,mt,yt)=>{const bt=(_t=mt.length>2,vt=yt.cacheKey,{name:"ConvTranspose",inputNames:_t?["X","W","B"]:["X","W"],inputTypes:_t?[it.TextureType.unpacked,it.TextureType.unpacked,it.TextureType.unpacked]:[it.TextureType.unpacked,it.TextureType.unpacked],cacheHint:vt});var _t,vt;return Object.assign(Object.assign({},bt),{get:()=>((xt,wt,Tt,St)=>{const Et=wt.length>2?"getB(output_channel)":"0.0",Ot=wt[0].dims,Rt=wt[1].dims,Pt=Rt[1],Mt=Rt[0]/St.group,$t=[wt[0].dims[0],wt[1].dims[1]*St.group,...St.outputShape],kt=(0,rt.getGlsl)(xt.session.backend.glContext.version),{activationFunction:Lt,applyActivation:Nt}=(0,st.getActivationSnippet)(St),zt=`
  const ivec2 strides = ivec2(${St.strides[0]}, ${St.strides[1]});
  const ivec2 pads = ivec2(${St.pads[0]}, ${St.pads[1]});
  ${Lt}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;

    ivec2 loc = coords.zw + pads;

    int group_id = output_channel / ${Pt};
    int wOutChannel = output_channel - group_id * ${Pt};

    float value = ${Et};
    for (int inChannelOffset = 0; inChannelOffset < ${Mt}; inChannelOffset++) {
      int input_channel = group_id * ${Mt} + inChannelOffset;
      for (int wWOff = 0; wWOff < ${Rt[2]}; wWOff++) {
        for (int wHOff = 0; wHOff < ${Rt[3]}; wHOff++) {
          ivec2 wOff = ivec2(wWOff * ${St.dilations[0]}, wHOff * ${St.dilations[1]});
          ivec2 wLoc = loc - wOff;
          ivec2 wLocIn = wLoc / strides;
          if (
            wLocIn * strides == wLoc &&
            wLocIn.x >= 0 && wLocIn.x < ${Ot[2]} &&
            wLocIn.y >= 0 && wLocIn.y < ${Ot[3]}
          ) {
            float xVal = getX(batch, input_channel, wLocIn.y, wLocIn.x);
            float wVal = getW(input_channel, wOutChannel, wHOff, wWOff);
            value += xVal * wVal;
          }
        }
      }
    }
    ${Nt}
    ${kt.output} = vec4(value, .0, .0, .0);
  }
`;return Object.assign(Object.assign({},Tt),{output:{dims:$t,type:wt[0].type,textureType:it.TextureType.unpacked},shaderSource:zt,hasMain:!0})})(gt,mt,bt,yt)})})(lt,ht,ft),ht),ot=(lt,ht)=>{const ft=lt.kernelShape.slice();if(lt.kernelShape.length===0)for(let bt=2;bt<ht[1].dims.length;++bt)ft.push(ht[1].dims[bt]);const gt=lt.pads.slice(),mt=lt.outputShape.slice();((bt,_t,vt,xt,wt,Tt,St,Et)=>{const Ot=bt.length-2,Rt=Et.length===0;for(let Pt=0;Pt<Ot;++Pt){const Mt=Rt?bt[Pt+2]*Tt[Pt]:Et[Pt],$t=at(bt[Pt+2],Tt[Pt],wt[Pt],_t[Pt],vt[Pt],Mt);ct($t,xt,wt,Pt,Pt+Ot),Rt&&Et.push(Tt[Pt]*(bt[Pt+2]-1)+St[Pt]+(_t[Pt]-1)*vt[Pt]+1-wt[Pt]-wt[Pt+Ot])}})(ht[0].dims,ft,lt.dilations,lt.autoPad,gt,lt.strides,lt.outputPadding,mt);const yt=Object.assign({},lt);return Object.assign(yt,{kernelShape:ft,pads:gt,outputShape:mt,cacheKey:lt.cacheKey}),yt};_.parseConvTransposeAttributes=lt=>{const ht=lt.attributes,ft=(0,st.parseInternalActivationAttributes)(ht),gt=ht.getString("auto_pad","NOTSET"),mt=ht.getInts("dilations",[1,1]),yt=ht.getInt("group",1),bt=ht.getInts("kernel_shape",[]),_t=ht.getInts("output_padding",[0,0]),vt=ht.getInts("output_shape",[]),xt=ht.getInts("pads",[0,0,0,0]),wt=ht.getInts("strides",[1,1]);return(0,tt.createAttributeWithCacheKey)(Object.assign({autoPad:gt,dilations:mt,group:yt,kernelShape:bt,outputPadding:_t,outputShape:vt,pads:xt,strides:wt},ft))};const nt=(lt,ht)=>{if(!lt||lt.length!==2&&lt.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(lt[0].dims.length!==4||lt[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");if(lt[0].dims[1]!==lt[1].dims[0])throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");const ft=lt[1].dims[1]*ht.group;if(lt.length===3&&(lt[2].dims.length!==1||lt[2].dims[0]!==ft))throw new Error("invalid bias");const gt=lt[0].dims.length-2;if(ht.dilations.length!==gt)throw new Error(`dilations should be ${gt}D`);if(ht.strides.length!==gt)throw new Error(`strides should be ${gt}D`);if(ht.pads.length!==2*gt)throw new Error(`pads should be ${2*gt}D`);if(ht.outputPadding.length!==gt)throw new Error(`output_padding should be ${gt}D`);if(ht.kernelShape.length!==0&&ht.kernelShape.length!==lt[1].dims.length-2)throw new Error("invalid kernel shape");if(ht.outputShape.length!==0&&ht.outputShape.length!==lt[0].dims.length-2)throw new Error("invalid output shape");if(lt[0].type!=="float32"||lt[1].type!=="float32")throw new Error("ConvTranspose input(X,W) should be float tensor");if(lt.length===3&&lt[2].type!=="float32")throw new Error("ConvTranspose input(bias) should be float tensor")}},8138:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseConvAttributes=_.conv=_.calculateOutputShape=void 0;const tt=et(246),rt=et(2517),it=et(4770),st=et(1386),at=et(9828),ct=et(2823),ut=et(3248),dt=et(5623);_.calculateOutputShape=(gt,mt,yt,bt,_t)=>{const vt=gt[0],xt=gt.slice(2),wt=xt.length,Tt=mt[0],St=mt.slice(2).map((Ot,Rt)=>Ot+(Ot-1)*(yt[Rt]-1)),Et=xt.map((Ot,Rt)=>Ot+bt[Rt]+bt[Rt+wt]).map((Ot,Rt)=>Math.floor((Ot-St[Rt]+_t[Rt])/_t[Rt]));return[vt,Tt].concat(...Et)},_.conv=(gt,mt,yt)=>(ft(mt,yt),ot(gt,mt,yt));const ot=(gt,mt,yt)=>{const bt=ht(yt,mt),_t=gt.session.pack,vt=bt.kernelShape[0]===1&&bt.kernelShape[1]===1;return bt.group>1?[gt.run((0,it.createUnpackedGroupedConvProgramInfoLoader)(gt,mt,bt),mt)]:vt&&_t?[nt(gt,mt,bt)]:_t&&mt[0].dims.length===4&&mt[0].dims[0]===1&&!vt?[(0,st.conv2DPacked)(gt,mt,bt)]:[lt(gt,mt,bt)]},nt=(gt,mt,yt)=>{const bt=mt[0].dims,_t=mt[1].dims,vt=(0,_.calculateOutputShape)(bt,_t,yt.dilations,yt.pads,yt.strides),xt=gt.reshapeUnpacked(mt[0],[bt[1],bt[2]*bt[3]]),wt=gt.reshapeUnpacked(mt[1],[_t[0],_t[1]]),Tt=mt.length>2?[wt,xt,mt[2]]:[wt,xt],St=gt.run((0,dt.createMatmulProgramInfoLoader)(Tt,yt),Tt);return gt.reshapeUnpacked(St,vt)},lt=(gt,mt,yt)=>{const bt=mt[0].dims,_t=mt[1].dims,vt=(0,_.calculateOutputShape)(bt,_t,yt.dilations,yt.pads,yt.strides),xt=gt.run((0,ut.createIm2ColProgramInfoLoader)(gt,mt[0],mt[1],vt,yt),[mt[0]]),wt=mt.length===3?[xt,mt[1],mt[2]]:[xt,mt[1]];return gt.run((0,at.createDotProductProgramInfoLoader)(gt,mt,vt,yt),wt)},ht=(gt,mt)=>{const yt=gt.kernelShape.slice();if(gt.kernelShape.length===0)for(let vt=2;vt<mt[1].dims.length;++vt)yt.push(mt[1].dims[vt]);const bt=gt.pads.slice();rt.PoolConvUtil.adjustPadsBasedOnAutoPad(mt[0].dims,gt.strides,gt.dilations,yt,bt,gt.autoPad);const _t=Object.assign({},gt);return Object.assign(_t,{kernelShape:yt,pads:bt,cacheKey:gt.cacheKey}),_t};_.parseConvAttributes=gt=>{const mt=gt.attributes,yt=(0,ct.parseInternalActivationAttributes)(mt),bt=mt.getString("auto_pad","NOTSET"),_t=mt.getInts("dilations",[1,1]),vt=mt.getInt("group",1),xt=mt.getInts("kernel_shape",[]),wt=mt.getInts("pads",[0,0,0,0]),Tt=mt.getInts("strides",[1,1]);return(0,tt.createAttributeWithCacheKey)(Object.assign({autoPad:bt,dilations:_t,group:vt,kernelShape:xt,pads:wt,strides:Tt},yt))};const ft=(gt,mt)=>{if(!gt||gt.length!==2&&gt.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(gt[0].dims.length!==4||gt[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");if(gt[0].dims[1]!==gt[1].dims[1]*mt.group)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(gt.length===3&&(gt[2].dims.length!==1||gt[1].dims[0]!==gt[2].dims[0]))throw new Error("invalid bias");const yt=gt[0].dims.length-2;if(mt.dilations.length!==yt)throw new Error(`dilations should be ${yt}D`);if(mt.strides.length!==yt)throw new Error(`strides should be ${yt}D`);if(mt.pads.length!==2*yt)throw new Error(`pads should be ${2*yt}D`);if(mt.kernelShape.length!==0&&mt.kernelShape.length!==gt[1].dims.length-2)throw new Error("invalid kernel shape");if(gt[0].type!=="float32"||gt[1].type!=="float32")throw new Error("Conv input(X,W) should be float tensor");if(gt.length===3&&gt[2].type!=="float32")throw new Error("Conv input(bias) should be float tensor")}},5193:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseDepthToSpaceAttributes=_.depthToSpace=void 0;const tt=et(3738);_.depthToSpace=(it,st,at)=>{rt(st);const ct=at.blocksize,ut=ct*ct,dt=at.mode==="DCR"?[0,3,4,1,5,2]:[0,1,4,2,5,3],ot=at.mode==="DCR"?[st[0].dims[0],ct,ct,st[0].dims[1]/ut,st[0].dims[2],st[0].dims[3]]:[st[0].dims[0],st[0].dims[1]/ut,ct,ct,st[0].dims[2],st[0].dims[3]],nt=it.reshapeUnpacked(st[0],ot),lt={perm:dt,cacheKey:`${dt}`},[ht]=(0,tt.transpose)(it,[nt],lt),ft=[st[0].dims[0],st[0].dims[1]/ut,st[0].dims[2]*ct,st[0].dims[3]*ct];return[it.reshapeUnpacked(ht,ft)]},_.parseDepthToSpaceAttributes=it=>{const st=it.attributes.getInt("blocksize");if(st<1)throw new Error(`blocksize must be >= 1, but got : ${st} for DepthToSpace`);const at=it.attributes.getString("mode","DCR");if(at!=="DCR"&&at!=="CRD")throw new Error(`unrecognized mode: ${at} for DepthToSpace`);return{mode:at,blocksize:st}};const rt=it=>{if(it.length!==1)throw new Error(`DepthToSpace expect 1 inputs, but got ${it.length}`);if(it[0].type==="string"||it[0].dims.length!==4)throw new TypeError("DepthToSpace input should be a 4-D numeric tensor")}},9828:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.createDotProductProgramInfoLoader=void 0;const tt=et(2517),rt=et(5060),it=et(2039),st=et(2823),at=et(3248);_.createDotProductProgramInfoLoader=(ct,ut,dt,ot)=>{const nt=((lt,ht)=>({name:"ConvDotProduct",inputNames:lt?["Im2Col","K","B"]:["Im2Col","K"],inputTypes:lt?[it.TextureType.unpacked,it.TextureType.packedLastDimension,it.TextureType.unpacked]:[it.TextureType.unpacked,it.TextureType.packedLastDimension],cacheKey:ht.activationCacheKey}))(ut.length>2,ot);return Object.assign(Object.assign({},nt),{get:()=>((lt,ht,ft,gt,mt)=>{const yt=ft[0].dims,bt=ft[1].dims,_t=[bt[0],Math.ceil(yt[1]*bt[2]*bt[3]/4)],vt=(0,at.calculateIm2ColDims)(yt,bt,gt),[xt,wt]=lt.calculateTextureWidthAndHeight(_t,it.TextureType.packedLastDimension),Tt=tt.ShapeUtil.computeStrides(vt),[St,Et]=lt.calculateTextureWidthAndHeight(vt,it.TextureType.packedLastDimension),Ot=gt.length,Rt=ft.length<3?"0.0":"_B(b)",Pt=Math.ceil(yt[1]*bt[2]*bt[3]/4),{activationFunction:Mt,applyActivation:$t}=(0,st.getActivationSnippet)(mt),kt=(0,rt.getGlsl)(lt.session.backend.glContext.version),Lt=`
${Mt}
float process(int indices[${Ot}]) {
  int b[1];
  b[0] = indices[1];
  int im2col[4];
  im2col[0] = indices[0];
  im2col[1] = indices[2];
  im2col[2] = indices[3];
  int im2colOffset = im2col[0] * ${Tt[0]} + im2col[1] * ${Tt[1]} + im2col[2] * ${Tt[2]};
  int kernelOffset = indices[1] * ${_t[1]};
  float value = ${Rt};
  for (int i = 0; i < ${Pt}; ++i) {
    vec2 im2colCoords = offsetToCoords(im2colOffset, ${St}, ${Et});
    vec2 kernelCoords = offsetToCoords(kernelOffset, ${xt}, ${wt});
    value += dot(${kt.texture2D}(Im2Col, im2colCoords), ${kt.texture2D}(K, kernelCoords));
    ++im2colOffset;
    ++kernelOffset;
  }
  ${$t}
  return value;
}`;return Object.assign(Object.assign({},ht),{output:{dims:gt,type:ft[0].type,textureType:it.TextureType.unpacked},shaderSource:Lt})})(ct,nt,ut,dt,ot)})}},7992:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseFlattenAttributes=_.flatten=void 0;const tt=et(2517);_.flatten=(it,st,at)=>{rt(st,at);const ct=tt.ShapeUtil.flattenShape(st[0].dims,at);return[it.reshapeUnpacked(st[0],ct)]},_.parseFlattenAttributes=it=>it.attributes.getInt("axis",1);const rt=(it,st)=>{if(!it||it.length!==1)throw new Error("Flatten requires 1 input.");const at=it[0].dims.length;if(at===0)throw new Error("scalar tensor is not supported.");if(st<-at||st>at)throw new Error("Invalid axis");if(it[0].type==="string")throw new Error("string tensor is not supported.")}},2823:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseInternalActivationAttributes=_.getActivationSnippet=void 0;const tt=et(2517),rt=et(4909);_.getActivationSnippet=function(it){let st;switch(it.activation){case"Relu":st=(0,rt.glslRelu)();break;case"Sigmoid":st=(0,rt.glslSigmoid)();break;case"Clip":st=(0,rt.glslClip)(it.clipMin,it.clipMax);break;default:return{activationFunction:"",applyActivation:""}}const at=st.name;return{activationFunction:st.body,applyActivation:`value = ${at}_(value);`}},_.parseInternalActivationAttributes=it=>{const st=it.getString("activation","");if(st==="Clip"){const[at,ct]=it.getFloats("activation_params",[tt.MIN_CLIP,tt.MAX_CLIP]);return{activation:st,clipMax:ct,clipMin:at,activationCacheKey:`${st}:${at},${ct}`}}return{activation:st,activationCacheKey:st}}},1253:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseGatherAttributes=_.gather=void 0;const tt=et(246),rt=et(782),it=et(2517),st=et(2039);_.gather=(dt,ot,nt)=>(ut(ot,nt.axis),[dt.run(ct(dt,ot,nt),ot)]),_.parseGatherAttributes=dt=>(0,tt.createAttributeWithCacheKey)({axis:dt.attributes.getInt("axis",0)});const at={name:"Gather",inputNames:["A","B"],inputTypes:[st.TextureType.unpacked,st.TextureType.unpacked]},ct=(dt,ot,nt)=>{const lt=Object.assign(Object.assign({},at),{cacheHint:nt.cacheKey});return Object.assign(Object.assign({},lt),{get:()=>((ht,ft,gt,mt)=>{const yt=gt[0].dims.slice(),bt=gt[1].dims.slice(),_t=new Array(yt.length+bt.length-1);mt=it.ShapeUtil.normalizeAxis(mt,yt.length);const vt=[];for(let wt=0;wt<_t.length;wt++)wt<mt?(_t[wt]=yt[wt],vt.push(`inputIdx[${wt}] = outputIdx[${wt}];`)):wt<mt+bt.length?(_t[wt]=bt[wt-mt],vt.push(`indexDataIdx[${wt-mt}] = outputIdx[${wt}];`)):(_t[wt]=yt[wt-bt.length+1],vt.push(`inputIdx[${wt-bt.length+1}] = outputIdx[${wt}];`));const xt=`
      float process(int outputIdx[${_t.length||1}]) {
        int inputIdx[${yt.length}];
        int indexDataIdx[${bt.length||1}];
        indexDataIdx[0] = 0;
        ${vt.join(`
        `)}
        int idx = int(_B(indexDataIdx));
        inputIdx[${mt}] = idx < 0 ? idx + ${yt[mt]} : idx;
        return _A(inputIdx);
      }`;return Object.assign(Object.assign({},ft),{output:{dims:_t,type:gt[0].type,textureType:st.TextureType.unpacked},shaderSource:xt})})(0,lt,ot,nt.axis)})},ut=(dt,ot)=>{if(!dt||dt.length!==2)throw new Error("Gather requires 2 inputs.");const nt=dt[0].dims.length;if(nt<1)throw new Error("Invalid input shape.");if(ot<-nt||ot>nt-1)throw new Error("Invalid axis.");if(rt.NUMBER_TYPES.indexOf(dt[0].type)===-1)throw new Error("Invaid input type.");if(dt[1].type!=="int32"&&dt[1].type!=="int16")throw new Error("Invaid input type.")}},4776:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseGemmAttributesV11=_.parseGemmAttributesV7=_.gemm=void 0;const tt=et(246),rt=et(2517),it=et(2039);_.gemm=(dt,ot,nt)=>(ut(ot,nt),[dt.run(at(ot,nt),ot)]);const st=(dt,ot)=>{const nt=dt.attributes.getInt("transA",0)!==0,lt=dt.attributes.getInt("transB",0)!==0,ht=dt.attributes.getFloat("alpha",1),ft=dt.attributes.getFloat("beta",1);return(0,tt.createAttributeWithCacheKey)({transA:nt,transB:lt,alpha:ht,beta:ft,isOptionalC:ot})};_.parseGemmAttributesV7=dt=>st(dt,!1),_.parseGemmAttributesV11=dt=>st(dt,!0);const at=(dt,ot)=>{const nt={name:"Gemm",inputNames:dt.length===3?["A","B","C"]:["A","B"],inputTypes:dt.length===3?[it.TextureType.unpacked,it.TextureType.unpacked,it.TextureType.unpacked]:[it.TextureType.unpacked,it.TextureType.unpacked],key:ot.cacheKey};return Object.assign(Object.assign({},nt),{get:()=>ct(nt,dt,ot)})},ct=(dt,ot,nt)=>{const lt=ot[0].dims.slice(),ht=ot[1].dims.slice(),[ft,gt]=rt.GemmUtil.getShapeOfGemmResult(lt,nt.transA,ht,nt.transB,ot.length===3?ot[2].dims:void 0),mt=[ft,gt];if(!mt)throw new Error("Can't use gemm on the given tensors");let yt=lt[lt.length-1],bt="";nt.transA&&(yt=lt[0]),nt.transA&&nt.transB?bt="value += _A_T(a) * _B_T(b);":nt.transA&&!nt.transB?bt="value += _A_T(a) * _B(b);":!nt.transA&&nt.transB?bt="value += _A(a) * _B_T(b);":nt.transA||nt.transB||(bt="value += _A(a) * _B(b);");const _t=mt.length,vt=`
      float process(int indices[${_t}]) {
          int a[${_t}];
          int b[${_t}];
          ${ot.length===3?`int c[${ot[2].dims.length}];`:""}

          copyVec(indices, a);
          copyVec(indices, b);
          ${ot.length===3?"bcastIndices_C(indices, c);":""}

          float value = 0.0;
          for (int k=0; k<${yt}; ++k) {
              a[${_t-1}] = k;
              b[${_t-2}] = k;
              ${bt}
          }

          value = value * alpha;
          ${ot.length===3?"value += beta * _C(c);":""}
          return value;
      }`;return Object.assign(Object.assign({},dt),{output:{dims:mt,type:ot[0].type,textureType:it.TextureType.unpacked},variables:[{name:"alpha",type:"float",data:nt.alpha},{name:"beta",type:"float",data:nt.beta}],shaderSource:vt})},ut=(dt,ot)=>{if(!dt)throw new Error("Input is missing");if(ot.isOptionalC&&(dt.length<2||dt.length>3))throw new Error("Invaid input shape.");if(!ot.isOptionalC&&dt.length!==3)throw new Error("Gemm requires 3 inputs");if(dt.length===3&&dt[2].dims.length!==1&&dt[2].dims.length!==2)throw new Error("Invalid input shape of C");if(dt[0].type!=="float32"&&dt[0].type!=="float64"||dt[1].type!=="float32"&&dt[1].type!=="float64"||dt.length===3&&dt[2].type!=="float32"&&dt[2].type!=="float64")throw new Error("Invalid input type.");if(dt[0].type!==dt[1].type||dt.length===3&&dt[0].type!==dt[2].type)throw new Error("Input types are mismatched")}},8555:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.createPackedIm2ColProgramInfoLoader=void 0;const tt=et(5060),rt=et(2039),it=et(2827);_.createPackedIm2ColProgramInfoLoader=(st,at,ct,ut,dt)=>{const ot=(nt=dt.cacheKey,{name:"Im2Col (packed)",inputNames:["A"],inputTypes:[rt.TextureType.packed],cacheHint:nt});var nt;return Object.assign(Object.assign({},ot),{get:()=>((lt,ht,ft,gt,mt,yt)=>{const bt=ft.dims,_t=gt.dims,vt=mt.length,xt=[_t[1]*_t[2]*_t[3],mt[2]*mt[3]],wt=_t[2]*_t[3],Tt=(0,it.unpackFromChannel)(),St=(0,tt.getGlsl)(lt.session.backend.glContext.version);let Et="";for(let Rt=0;Rt<=1;Rt++)for(let Pt=0;Pt<=1;Pt++)Et+=`
            blockIndex = rc.x + ${Pt};
            pos = rc.y + ${Rt};

            if(blockIndex < ${xt[1]} && pos < ${xt[0]}) {
              offsetY = int(blockIndex / (${mt[vt-1]})) * ${yt.strides[0]} -
                ${yt.pads[0]};
              d0 = offsetY + ${yt.dilations[0]} * (imod(pos, ${wt}) / ${_t[2]});

              if(d0 < ${bt[2]} && d0 >= 0) {
                offsetX = imod(blockIndex, ${mt[vt-1]}) * ${yt.strides[1]} -
                  ${yt.pads[1]};
                d1 = offsetX + ${yt.dilations[1]} * imod(imod(pos, ${wt}), ${_t[2]});

                if(d1 < ${bt[3]} && d1 >= 0) {

                  ch = int(float(pos)/ ${wt}.);
                    innerDims = vec2(d0, d1);
                    result[${2*Rt+Pt}] = getChannel(
                      getA(0, ch, int(innerDims.x),
                      int(innerDims.y)), innerDims);
                }
              }
            }

          `;const Ot=`
      ${Tt}

      void main() {
        ivec2 rc = getOutputCoords();
          vec4 result = vec4(0.0);
          int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
          vec2 innerDims;
          ${Et}
          ${St.output} = result;
      }
            `;return Object.assign(Object.assign({},ht),{output:{dims:xt,type:ft.type,textureType:rt.TextureType.packed},shaderSource:Ot,hasMain:!0})})(st,ot,at,ct,ut,dt)})}},3248:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.calculateIm2ColDims=_.createIm2ColProgramInfoLoader=void 0;const tt=et(2039);_.createIm2ColProgramInfoLoader=(rt,it,st,at,ct)=>{const ut=(dt=ct.cacheKey,{name:"Im2Col",inputNames:["X"],inputTypes:[tt.TextureType.unpacked],cacheHint:dt});var dt;return Object.assign(Object.assign({},ut),{get:()=>((ot,nt,lt,ht,ft,gt)=>{const mt=lt.dims,yt=ht.dims,bt=ft.length,_t=(0,_.calculateIm2ColDims)(mt,yt,ft,4),vt=`
        const int XC = ${mt[1]};
        const int XH = ${mt[2]};
        const int XW = ${mt[3]};
        const int KH = ${gt.kernelShape[0]};
        const int KW = ${gt.kernelShape[1]};
        const int dilationH = ${gt.dilations[0]};
        const int dilationW = ${gt.dilations[1]};
        const int strideH = ${gt.strides[0]};
        const int strideW = ${gt.strides[1]};
        const int padH = ${gt.pads[0]};
        const int padW = ${gt.pads[1]};
        const int KHKW = KH*KW;
        const int XCKHKW = XC * KHKW;
        const int outputChannels = 4;
        vec4 process(int indices[${bt}]) {
          int b  = indices[0]; // batch size
          int oh = indices[1] * strideH - padH; //output height
          int ow = indices[2] * strideW - padW; //output width
          int p = indices[3] * outputChannels; //patch
          vec4 value = vec4(0.0);
          for(int i=0; i < outputChannels; ++i) {
            if(p < XCKHKW) {
              int patchC = p / KHKW;
              int patchH = (p - patchC*KHKW) / KW;
              int patchW = (p - patchC*KHKW) - patchH * KW;
              int xh2 = oh + patchH * dilationH;
              int xw2 = ow + patchW * dilationW;
              int x[${mt.length}];
              x[0] = b;
              x[1] = patchC;
              x[2] = xh2;
              x[3] = xw2;
              if(xh2 >= 0 &&
                  xh2 < XH &&
                  xw2 >= 0 &&
                  xw2 < XW) {
                value[i] = _X(x);
              }
            }
            ++p;
          }
          return value;
        }
        `;return Object.assign(Object.assign({},nt),{output:{dims:_t,type:lt.type,textureType:tt.TextureType.packedLastDimension},shaderSource:vt})})(0,ut,it,st,at,ct)})},_.calculateIm2ColDims=(rt,it,st,at=4)=>[st[0],st[2],st[3],Math.ceil(rt[1]*it[2]*it[3]/at)]},6572:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseImageScalerAttributes=_.imageScaler=void 0;const tt=et(246),rt=et(2039);_.imageScaler=(ut,dt,ot)=>(ct(dt),[ut.run(st(ut,dt,ot),dt)]),_.parseImageScalerAttributes=ut=>{const dt=ut.attributes.getFloat("scale"),ot=ut.attributes.getFloats("bias");return(0,tt.createAttributeWithCacheKey)({scale:dt,bias:ot})};const it={name:"ImageScaler",inputNames:["X"],inputTypes:[rt.TextureType.unpacked]},st=(ut,dt,ot)=>{const nt=Object.assign(Object.assign({},it),{cacheHint:ot.cacheKey});return Object.assign(Object.assign({},nt),{get:()=>((lt,ht,ft,gt)=>{const mt=ft[0].dims.slice(),yt=mt.length,bt=`
      ${at(gt.bias.length)}
      float process(int indices[${yt}]) {
        return _X(indices) * scale + getBias(bias, indices[1]);
      }`;return Object.assign(Object.assign({},ht),{output:{dims:mt,type:ft[0].type,textureType:rt.TextureType.unpacked},variables:[{name:"bias",type:"float",arrayLength:gt.bias.length,data:gt.bias},{name:"scale",type:"float",data:gt.scale}],shaderSource:bt})})(0,nt,dt,ot)})},at=ut=>{const dt=[`float getBias(float bias[${ut}], int channel) {`];for(let ot=0;ot<ut;++ot)ot===0?dt.push(`	if (channel == ${ot}) { return bias[${ot}]; }`):ot===ut-1?dt.push(`	else { return bias[${ot}]; }`):dt.push(`	else if (channel == ${ot}) { return bias[${ot}]; }`);return dt.push("	}"),dt.join(`
`)},ct=ut=>{if(!ut||ut.length!==1)throw new Error("ImageScaler requires 1 input.");if(ut[0].dims.length!==4)throw new Error("Invalid input shape.");if(ut[0].type!=="float32"&&ut[0].type!=="float64")throw new Error("Invalid input type.")}},3346:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseInstanceNormalizationAttributes=_.instanceNormalization=void 0;const tt=et(5060),rt=et(2039);_.instanceNormalization=(dt,ot,nt)=>{ut(ot);const lt=dt.run(st(ot[0]),ot);return[dt.run(ct(dt,ot[0],nt,lt.dims),[ot[0],lt,ot[1],ot[2]])]},_.parseInstanceNormalizationAttributes=dt=>dt.attributes.getFloat("epsilon",1e-5);const it={name:"InstanceNormalization_MeanAndVariance",inputNames:["X"],inputTypes:[rt.TextureType.unpacked]},st=dt=>Object.assign(Object.assign({},it),{get:()=>((ot,nt)=>{const lt=nt.dims.slice(),ht=lt[1],ft=lt[2]*lt[3],gt=[lt[0],ht],mt=`
      vec4 process(int[2] indices) {
        vec4 v = vec4(0.0);
        int a[4];
        a[0] = indices[0];
        a[1] = indices[1];
        float temp = 0.0;
        for(int a2=0; a2<${lt[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${lt[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += x;
          }
        }
        float mean = temp / float(${ft});
        temp = 0.0;
        for(int a2=0; a2<${lt[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${lt[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += (x - mean) * (x - mean);
          }
        }
        v.r = mean;
        v.g = temp / float(${ft});

        return v;
      }`;return Object.assign(Object.assign({},ot),{output:{dims:gt,type:nt.type,textureType:rt.TextureType.packedLastDimension},shaderSource:mt})})(it,dt)}),at={name:"InstanceNormalization_ComputeOutput",inputNames:["X","MeanAndVariance","Scale","B"],inputTypes:[rt.TextureType.unpacked,rt.TextureType.packedLastDimension,rt.TextureType.unpacked,rt.TextureType.unpacked]},ct=(dt,ot,nt,lt)=>{const ht=Object.assign(Object.assign({},at),{cacheHint:`${nt}`});return Object.assign(Object.assign({},ht),{get:()=>((ft,gt,mt,yt,bt)=>{const _t=(0,tt.getGlsl)(ft.session.backend.glContext.version),[vt,xt]=ft.calculateTextureWidthAndHeight(bt,rt.TextureType.packedLastDimension),[wt,Tt]=[vt/4,xt],St=`
      vec4 get_MeanAndVariance(int[2] mv) {
        int offset = indicesToOffset_MeanAndVariance(mv);
        vec2 coords = offsetToCoords(offset, ${wt}, ${Tt});
        return ${_t.texture2D}(MeanAndVariance, coords);
      }

      float process(int[4] indices) {
        int mv[2];
        mv[0] = indices[0];
        mv[1] = indices[1];
        vec4 mean_and_variance = get_MeanAndVariance(mv);
        float mean = mean_and_variance.r;
        float variance = mean_and_variance.g;

        int sb[1];
        sb[0] = indices[1];
        float scale = _Scale(sb);
        float b = _B(sb);

        return scale * (_X(indices) - mean) / sqrt(variance + epsilon) + b;
      }`;return Object.assign(Object.assign({},gt),{output:{dims:mt.dims,type:mt.type,textureType:rt.TextureType.unpacked},variables:[{name:"epsilon",type:"float",data:yt}],shaderSource:St})})(dt,ht,ot,nt,lt)})},ut=dt=>{if(!dt||dt.length!==3)throw new Error("InstanceNormalization requires 3 inputs.");const ot=dt[0],nt=dt[1],lt=dt[2];if(ot.dims.length<3||nt.dims.length!==1||lt.dims.length!==1)throw new Error("Invalid input shape.");if(nt.dims[0]!==ot.dims[1]||lt.dims[0]!==ot.dims[1])throw new Error("Input shapes are mismatched.");if(ot.type!=="float32"&&ot.type!=="float64"||nt.type!=="float32"&&nt.type!=="float64"||lt.type!=="float32"&&lt.type!=="float64")throw new Error("Invalid input type.");if(dt[0].dims.length!==4)throw new Error("Only support 4-D input shape.")}},708:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.createPackedMatmulProgramInfoLoader=void 0;const tt=et(2517),rt=et(5060),it=et(2039),st=et(9390),at=et(2823),ct=et(5623);_.createPackedMatmulProgramInfoLoader=(ut,dt,ot)=>{const nt=(lt=dt.length>2,ht=ot.activationCacheKey,{name:"MatMul (packed)",inputNames:lt?["A","B","Bias"]:["A","B"],inputTypes:lt?[it.TextureType.packed,it.TextureType.packed,it.TextureType.packed]:[it.TextureType.packed,it.TextureType.packed],cacheHint:ht});var lt,ht;return Object.assign(Object.assign({},nt),{get:()=>((ft,gt,mt,yt)=>{const bt=mt.length>2,_t=bt?"value += getBiasForMatmul();":"",vt=mt[0].dims,xt=mt[1].dims,wt=tt.BroadcastUtil.calcShape(vt,xt,!0),Tt=!tt.ShapeUtil.areEqual(mt[0].dims,mt[1].dims);if(!wt)throw new Error("Can't use matmul on the given tensors");const St=vt[vt.length-1],Et=Math.ceil(St/2),Ot=vt.length,Rt=xt.length,Pt=(0,rt.getGlsl)(ft.session.backend.glContext.version),Mt=(0,st.getCoordsDataType)(wt.length),$t=wt.length,kt=(0,st.getGlChannels)(),{activationFunction:Lt,applyActivation:Nt}=(0,at.getActivationSnippet)(yt),zt=bt?`${(0,ct.getBiasForMatmul)(Mt,kt,mt[2].dims,wt,!0)}`:"",Ut=Tt?`${function(ir,er,dr,gr){let Qt=[],Jt=[];const nr=dr[0].dims,lr=dr[1].dims,hr=nr.length,ur=lr.length,mr=gr.length,Mr=mr-hr,Fr=mr-ur;Qt=nr.map((kr,jr)=>`coords.${er[jr+Mr]}`),Qt[hr-1]="i*2",Qt.join(", "),Jt=lr.map((kr,jr)=>`coords.${er[jr+Fr]}`),Jt[ur-2]="i*2",Jt.join(", ");const Gr=tt.BroadcastUtil.getBroadcastDims(nr,gr),Nr=tt.BroadcastUtil.getBroadcastDims(lr,gr),Jr=Gr.map(kr=>`coords.${er[kr+Mr]} = 0;`).join(`
`),Wr=Nr.map(kr=>`coords.${er[kr+Fr]} = 0;`).join(`
`),Hr=`int lastDim = coords.${er[mr-1]};
  coords.${er[mr-1]} = coords.${er[mr-2]};
  coords.${er[mr-2]} = lastDim;`;return`
vec4 getAAtOutCoordsMatmul(int i) {
  ${ir} coords = getOutputCoords();
  ${Hr}
  ${Jr}
  vec4 outputValue = getA(${Qt});
  return outputValue;
}

vec4 getBAtOutCoordsMatmul(int i) {
  ${ir} coords = getOutputCoords();
  ${Hr}
  ${Wr}
  vec4 outputValue = getB(${Jt});
  return outputValue;
}`}(Mt,kt,mt,wt)}`:"",Vt=Tt?"getAAtOutCoordsMatmul(i)":`getA(${function(ir,er){let dr="";for(let gr=0;gr<er-2;gr++)dr+=`rc.${ir[gr]}, `;return dr+=`rc.${ir[er-2]}, i*2`,dr}(kt,Ot)})`,Ht=Tt?"getBAtOutCoordsMatmul(i)":`getB(${function(ir,er){let dr="";for(let gr=0;gr<er-2;gr++)dr+=`rc.${ir[gr]}, `;return dr+=`i*2, rc.${ir[er-1]}`,dr}(kt,Rt)})`,sr=`
            ${Ut}
            ${zt}
            ${Lt}
            void main() {
              ${Tt?"":`${Mt} rc =
          getOutputCoords(); int lastDim = rc.${kt[$t-1]}; rc.${kt[$t-1]} =
          rc.${kt[$t-2]}; rc.${kt[$t-2]} = lastDim;
      `}

              vec4 value = vec4(0);
              for (int i = 0; i < ${Et}; i++) {
                vec4 a = ${Vt};
                vec4 b = ${Ht};

                value += (a.rrbb * b.rgrg);
                value += (a.ggaa * b.baba);
              }
              ${_t}
              ${Nt}
              ${Pt.output} = value;
            }`;return Object.assign(Object.assign({},gt),{output:{dims:wt,type:mt[0].type,textureType:it.TextureType.packed},shaderSource:sr,hasMain:!0})})(ut,nt,dt,ot)})}},5623:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.getBiasForMatmul=_.createMatmulProgramInfoLoader=_.parseMatMulAttributes=_.matMul=void 0;const tt=et(2517),rt=et(2039),it=et(9390),st=et(2823),at=et(708);function ct(ot,nt){const lt=(ht=ot.length>2,ft=nt.activationCacheKey,{name:"MatMul",inputNames:ht?["A","B","Bias"]:["A","B"],inputTypes:ht?[rt.TextureType.unpacked,rt.TextureType.unpacked,rt.TextureType.unpacked]:[rt.TextureType.unpacked,rt.TextureType.unpacked],cacheHint:ft});var ht,ft;return Object.assign(Object.assign({},lt),{get:()=>function(gt,mt,yt){const bt=mt[0].dims,_t=mt[1].dims,vt=tt.BroadcastUtil.calcShape(bt,_t,!0);if(!vt)throw new Error("Can't use matmul on the given tensors");const xt=(0,it.getCoordsDataType)(vt.length),wt=(0,it.getGlChannels)(),{activationFunction:Tt,applyActivation:St}=(0,st.getActivationSnippet)(yt),Et=mt.length>2,Ot=Et?"value += getBiasForMatmul();":"",Rt=Et?`${dt(xt,wt,mt[2].dims,vt,!1)}`:"",Pt=vt.length,Mt=bt.length,$t=_t.length,kt=`
    ${Tt}
    ${Rt}
    float process(int indices[${Pt}]) {
        int a[${Mt}];
        int b[${$t}];
        bcastMatmulIndices_A(indices, a);
        bcastMatmulIndices_B(indices, b);

        float value;
        for (int k=0; k<${bt[bt.length-1]}; ++k) {
            a[${Mt-1}] = k;
            b[${$t-2}] = k;
            value += _A(a) * _B(b);
        }
        ${Ot}
        ${St}
        return value;
    }`;return Object.assign(Object.assign({},gt),{output:{dims:vt,type:mt[0].type,textureType:rt.TextureType.unpacked},shaderSource:kt})}(lt,ot,nt)})}_.matMul=(ot,nt,lt)=>(ut(nt),ot.session.pack?[ot.run((0,at.createPackedMatmulProgramInfoLoader)(ot,nt,lt),nt)]:[ot.run(ct(nt,lt),nt)]),_.parseMatMulAttributes=ot=>(0,st.parseInternalActivationAttributes)(ot.attributes),_.createMatmulProgramInfoLoader=ct;const ut=ot=>{if(!ot||ot.length!==2)throw new Error("MatMul requires 2 inputs.");if(ot[0].dims[ot[0].dims.length-1]!==ot[1].dims[ot[1].dims.length-2])throw new Error("shared dimension does not match.");if(ot[0].type!=="float32"&&ot[0].type!=="float64"||ot[1].type!=="float32"&&ot[1].type!=="float64")throw new Error("inputs should be float type");if(ot[0].type!==ot[1].type)throw new Error("inputs types should match")};function dt(ot,nt,lt,ht,ft){let gt="";const mt=lt.length,yt=ht.length,bt=yt-mt;gt=yt<2&&mt>0?"coords":lt.map((xt,wt)=>`coords.${nt[wt+bt]}`).join(", ");const _t=tt.BroadcastUtil.getBroadcastDims(lt,ht).map(xt=>`coords.${nt[xt+bt]} = 0;`).join(`
`);let vt="vec4(outputValue.xx, outputValue.yy)";return tt.ShapeUtil.size(lt)===1&&(vt="vec4(outputValue.x)"),ft?`
vec4 getBiasForMatmul() {
  ${ot} coords = getOutputCoords();
  ${_t}
  vec4 outputValue = getBias(${gt});
  return ${vt};
}`:`
float getBiasForMatmul() {
  ${ot} coords = getOutputCoords();
  ${_t}
  return getBias(coords.x);
}`}_.getBiasForMatmul=dt},2403:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.createPackProgramInfoLoader=void 0;const tt=et(5060),rt=et(2039),it=et(9390),st=et(2827),at={name:"pack",inputNames:["A"],inputTypes:[rt.TextureType.unpackedReversed]};_.createPackProgramInfoLoader=(ct,ut)=>Object.assign(Object.assign({},at),{get:()=>((dt,ot)=>{const nt=(0,tt.getGlsl)(dt.session.backend.glContext.version),lt=ot.dims,ht=lt.length,ft=ot.dims.length,gt=(0,it.getCoordsDataType)(ft),mt=(0,st.getChannels)("rc",ft),yt=(bt=ft,_t=mt,vt=lt[lt.length-2],xt=lt[lt.length-1],bt===0||bt===1?"":`
    int r = ${_t[bt-2]};
    int c = ${_t[bt-1]};
    int rp1 = ${_t[bt-2]} + 1;
    int cp1 = ${_t[bt-1]} + 1;
    bool rEdge = rp1 >= ${xt};
    bool cEdge = cp1 >= ${vt};
    `);var bt,_t,vt,xt;let wt;wt=ht===0?[1,1]:ht===1?[lt[0],1]:[lt[ft-1],lt[ft-2]];const Tt=function(Ot,Rt,Pt){if(Ot===0)return"false";if(Ot===1)return`rc > ${Rt[0]}`;let Mt="";for(let $t=Ot-2;$t<Ot;$t++)Mt+=`${Pt[$t]} >= ${Rt[$t-Ot+2]}`,$t<Ot-1&&(Mt+="||");return Mt}(ft,wt,mt),St=function(Ot,Rt){const Pt=Ot.length;if(Pt===0)return"getA(), 0, 0, 0";if(Pt===1)return`getA(rc),
            rc + 1 >= ${Ot[0]} ? 0. : getA(rc + 1),
            0, 0`;let Mt="";if(Pt>2)for(let $t=0;$t<Pt-2;++$t)Mt+=`${Rt[$t]},`;return`getA(${Mt}r, c),
          rEdge ? 0. : getA(${Mt}rp1, c),
          cEdge ? 0. : getA(${Mt}r, cp1),
          rEdge || cEdge ? 0. : getA(${Mt}rp1, cp1)`}(lt,mt),Et=`
        void main() {
          ${gt} rc = getOutputCoords();

          if(${Tt}) {
            ${nt.output} = vec4(0);
          } else {
            ${yt}

            ${nt.output} = vec4(${St});
          }
        }
      `;return Object.assign(Object.assign({},at),{hasMain:!0,output:{dims:ot.dims,type:ot.type,textureType:rt.TextureType.packed},shaderSource:Et})})(ct,ut)})},2827:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.unpackFromChannel=_.getChannels=_.getVecChannels=void 0;const tt=et(9390);function rt(it,st){return(0,tt.getGlChannels)(st).map(at=>`${it}.${at}`)}_.getVecChannels=rt,_.getChannels=function(it,st){return st===1?[it]:rt(it,st)},_.unpackFromChannel=function(){return`
    float getChannel(vec4 frag, int dim) {
      int modCoord = imod(dim, 2);
      return modCoord == 0 ? frag.r : frag.g;
    }

    float getChannel(vec4 frag, vec2 innerDims) {
      vec2 modCoord = mod(innerDims, 2.);
      return modCoord.x == 0. ?
        (modCoord.y == 0. ? frag.r : frag.g) :
        (modCoord.y == 0. ? frag.b : frag.a);
    }
  `}},2870:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parsePadAttributesV11=_.padV11=_.parsePadAttributesV2=_.padV2=void 0;const tt=et(246),rt=et(2517),it=et(5060),st=et(2039),at={name:"Pad",inputNames:["A"],inputTypes:[st.TextureType.unpacked]};_.padV2=(gt,mt,yt)=>(dt(mt),[gt.run(Object.assign(Object.assign({},at),{cacheHint:yt.cacheKey,get:()=>ut(gt,mt[0],yt)}),mt)]),_.parsePadAttributesV2=gt=>{const mt=gt.attributes.getString("mode","constant"),yt=gt.attributes.getFloat("value",0),bt=gt.attributes.getInts("pads");return(0,tt.createAttributeWithCacheKey)({mode:mt,value:yt,pads:bt})},_.padV11=(gt,mt,yt)=>{ot(mt);const bt=ct(gt,mt,yt);return(0,_.padV2)(gt,[mt[0]],bt)},_.parsePadAttributesV11=gt=>gt.attributes.getString("mode","constant");const ct=(gt,mt,yt)=>{if(!gt.session.isInitializer(mt[1].dataId)||mt.length>=3&&!gt.session.isInitializer(mt[2].dataId))throw new Error("dynamic pad attributes are not allowed");const bt=Array.from(mt[1].integerData),_t=mt.length>=3?mt[2].floatData[0]:0;return(0,tt.createAttributeWithCacheKey)({mode:yt,pads:bt,value:_t})},ut=(gt,mt,yt)=>{const bt=rt.ShapeUtil.padShape(mt.dims.slice(),yt.pads),_t=bt.length,vt=`
      ${nt(gt,mt,yt)}
      float process(int[${_t}] indices) {
          return padA(indices);
      }`;return{name:"Pad",inputNames:["A"],inputTypes:[st.TextureType.unpacked],output:{dims:bt,type:mt.type,textureType:st.TextureType.unpacked},shaderSource:vt}},dt=gt=>{if(!gt||gt.length!==1)throw new Error("Pad requires 1 input");if(gt[0].type!=="float32"&&gt[0].type!=="float64")throw new Error("Invalid input type.")},ot=gt=>{if(!gt||gt.length!==2&&gt.length!==3)throw new Error("Pad requires 2 or 3 inputs");if(gt[1].type!=="int32")throw new Error("Invalid input type.");if(gt.length>=3&&gt[2].type==="string")throw new Error("Invalid input type.")},nt=(gt,mt,yt)=>{const bt=(0,it.getGlsl)(gt.session.backend.glContext.version),[_t,vt]=gt.calculateTextureWidthAndHeight(mt.dims,st.TextureType.unpacked),xt=rt.ShapeUtil.computeStrides(mt.dims);switch(yt.mode){case"constant":return lt(bt,mt.dims,xt,_t,vt,yt.pads,yt.value);case"reflect":return ht(bt,mt.dims,xt,_t,vt,yt.pads);case"edge":return ft(bt,mt.dims,xt,_t,vt,yt.pads);default:throw new Error("Invalid mode")}},lt=(gt,mt,yt,bt,_t,vt,xt)=>{const wt=mt.length;let Tt="";for(let St=wt-1;St>=0;--St)Tt+=`
        k = m[${St}] - ${vt[St]};
        if (k < 0)  return constant;
        if (k >= ${mt[St]}) return constant;
        offset += k * ${yt[St]};
        `;return`
      float padA(int m[${wt}]) {
        const float constant = float(${xt});
        int offset = 0;
        int k = 0;
        ${Tt}
        vec2 coords = offsetToCoords(offset, ${bt}, ${_t});
        float value = getColorAsFloat(${gt.texture2D}(A, coords));
        return value;
      }
      `},ht=(gt,mt,yt,bt,_t,vt)=>{const xt=mt.length;let wt="";for(let Tt=xt-1;Tt>=0;--Tt)wt+=`
        k = m[${Tt}] - ${vt[Tt]};
        if (k < 0) { k = -k; }
        {
          const int _2n_1 = ${2*(mt[Tt]-1)};
          k = int( mod( float(k), float(_2n_1) ) ) ;
          if(k >= ${mt[Tt]}) { k = _2n_1 - k; }
        }
        offset += k * ${yt[Tt]};
        `;return`
      float padA(int m[${xt}]) {
        int offset = 0;
        int k = 0;
        ${wt}
        vec2 coords = offsetToCoords(offset, ${bt}, ${_t});
        float value = getColorAsFloat(${gt.texture2D}(A, coords));
        return value;
      }
      `},ft=(gt,mt,yt,bt,_t,vt)=>{const xt=mt.length;let wt="";for(let Tt=xt-1;Tt>=0;--Tt)wt+=`
        k = m[${Tt}] - ${vt[Tt]};
        if (k < 0)  k = 0;
        if (k >= ${mt[Tt]}) k = ${mt[Tt]-1};
        offset += k * ${yt[Tt]};
      `;return`
      float padA(int m[${xt}]) {
        int offset = 0;
        int k = 0;
        ${wt}
        vec2 coords = offsetToCoords(offset, ${bt}, ${_t});
        float value = getColorAsFloat(${gt.texture2D}(A, coords));
        return value;
      }
      `}},2143:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.globalMaxPool=_.parseMaxPoolAttributes=_.maxPool=_.parseGlobalAveragePoolAttributes=_.globalAveragePool=_.parseAveragePoolAttributes=_.averagePool=void 0;const tt=et(246),rt=et(2517),it=et(2039);_.averagePool=(ft,gt,mt)=>{ot(gt);const yt={name:"AveragePool",inputNames:["X"],inputTypes:[it.TextureType.unpacked],cacheHint:mt.cacheKey};return[ft.run(Object.assign(Object.assign({},yt),{get:()=>st(gt,yt,!1,mt)}),gt)]},_.parseAveragePoolAttributes=ft=>{const gt=ft.attributes.getString("auto_pad","NOTSET"),mt=ft.attributes.getInt("ceil_mode",0),yt=ft.attributes.getInt("count_include_pad",0)!==0,bt=ft.attributes.getInts("kernel_shape"),_t=ft.attributes.getInts("strides",[]),vt=ft.attributes.getInts("pads",[]);if(mt!==0)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");return(0,tt.createAttributeWithCacheKey)({autoPad:gt,ceilMode:mt,countIncludePad:yt,kernelShape:bt,strides:_t,pads:vt})};const st=(ft,gt,mt,yt)=>{const[bt,_t]=ct(ft,yt,mt),vt=rt.ShapeUtil.size(bt.kernelShape);let xt="";bt.countIncludePad?xt+=`value /= float(${vt});`:xt+=`value /= float(${vt} - pad);`;const wt=`
        ${nt(ft[0].dims,bt,"value += _X(x);",xt,"0.0")}
      `;return Object.assign(Object.assign({},gt),{output:{dims:_t,type:ft[0].type,textureType:it.TextureType.unpacked},shaderSource:wt})};_.globalAveragePool=(ft,gt,mt)=>{ot(gt);const yt={name:"GlobalAveragePool",inputNames:["X"],inputTypes:[it.TextureType.unpacked],cacheHint:`${mt.countIncludePad}`};return[ft.run(Object.assign(Object.assign({},yt),{get:()=>st(gt,yt,!0,mt)}),gt)]},_.parseGlobalAveragePoolAttributes=ft=>{const gt=ft.attributes.getInt("count_include_pad",0)!==0;return(0,tt.createAttributeWithCacheKey)({autoPad:"",ceilMode:0,countIncludePad:gt,kernelShape:[],strides:[],pads:[]})},_.maxPool=(ft,gt,mt)=>{ot(gt);const yt={name:"MaxPool",inputNames:["X"],inputTypes:[it.TextureType.unpacked],cacheHint:mt.cacheKey};return[ft.run(Object.assign(Object.assign({},yt),{get:()=>at(gt,yt,!1,mt)}),gt)]},_.parseMaxPoolAttributes=ft=>{const gt=ft.attributes.getString("auto_pad","NOTSET"),mt=ft.attributes.getInt("ceil_mode",0),yt=ft.attributes.getInts("kernel_shape"),bt=ft.attributes.getInts("strides",[]),_t=ft.attributes.getInts("pads",[]),vt=ft.attributes.getInt("storage_order",0),xt=ft.attributes.getInts("dilations",[]);if(vt!==0)throw new Error("column major storage order is not yet supported for MaxPool");if(mt!==0)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");return(0,tt.createAttributeWithCacheKey)({autoPad:gt,ceilMode:mt,countIncludePad:!1,kernelShape:yt,strides:bt,pads:_t,storageOrder:vt,dilations:xt})};const at=(ft,gt,mt,yt)=>{const[bt,_t]=ct(ft,yt,mt),vt=`
      ${nt(ft[0].dims,bt,`
      value = max(_X(x), value);
    `,"","-1e5")}
    `;return Object.assign(Object.assign({},gt),{output:{dims:_t,type:ft[0].type,textureType:it.TextureType.unpacked},shaderSource:vt})},ct=(ft,gt,mt)=>{const yt=ft[0].dims.slice(),bt=Object.hasOwnProperty.call(gt,"dilations"),_t=gt.kernelShape.slice(),vt=gt.strides.slice(),xt=bt?gt.dilations.slice():[],wt=gt.pads.slice();rt.PoolConvUtil.adjustPoolAttributes(mt,yt,_t,vt,xt,wt);const Tt=rt.PoolConvUtil.computePoolOutputShape(mt,yt,vt,xt,_t,wt,gt.autoPad),St=Object.assign({},gt);return bt?Object.assign(St,{kernelShape:_t,strides:vt,pads:wt,dilations:xt,cacheKey:gt.cacheKey}):Object.assign(St,{kernelShape:_t,strides:vt,pads:wt,cacheKey:gt.cacheKey}),[St,Tt]},ut={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[],cacheKey:""},dt={name:"GlobalMaxPool",inputNames:["X"],inputTypes:[it.TextureType.unpacked]};_.globalMaxPool=(ft,gt)=>(ot(gt),[ft.run(Object.assign(Object.assign({},dt),{get:()=>at(gt,dt,!0,ut)}),gt)]);const ot=ft=>{if(!ft||ft.length!==1)throw new Error("Pool ops requires 1 input.");if(ft[0].type!=="float32"&&ft[0].type!=="float64")throw new Error("Invalid input type.")},nt=(ft,gt,mt,yt,bt)=>{const _t=ft.length;if(gt.kernelShape.length<=2){const vt=gt.kernelShape[gt.kernelShape.length-1],xt=gt.strides[gt.strides.length-1],wt=gt.pads[gt.pads.length/2-1],Tt=gt.pads[gt.pads.length-1],St=ft[_t-1];let Et="",Ot="",Rt="";if(Et=wt+Tt!==0?`
          for (int i = 0; i < ${vt}; i++) {
            x[${_t} - 1] = indices[${_t} - 1] * ${xt} - ${wt} + i;
            if (x[${_t} - 1] < 0 || x[${_t} - 1] >= ${St}) {
              pad++;
              continue;
            }
            ${mt}
          }`:`
          for (int i = 0; i < ${vt}; i++) {
            x[${_t} - 1] = indices[${_t} - 1] * ${xt} - ${wt} + i;
            ${mt}
          }`,gt.kernelShape.length===2){const Pt=gt.kernelShape[gt.kernelShape.length-2],Mt=gt.strides[gt.strides.length-2],$t=gt.pads[gt.pads.length/2-2],kt=gt.pads[gt.pads.length-2],Lt=ft[_t-2];Ot=$t+kt!==0?`
            for (int j = 0; j < ${Pt}; j++) {
              x[${_t} - 2] = indices[${_t} - 2] * ${Mt} - ${$t} + j;
              if (x[${_t} - 2] < 0 || x[${_t} - 2] >= ${Lt}) {
                pad+= ${vt};
                continue;
              }
          `:`
            for (int j = 0; j < ${Pt}; j++) {
              x[${_t} - 2] = indices[${_t} - 2] * ${Mt} - ${$t} + j;
            `,Rt=`
          }
        `}return`
        float process(int indices[${_t}]) {
          int x[${_t}];
          copyVec(indices, x);

          float value = ${bt};
          int pad = 0;
          ${Ot}
          ${Et}
          ${Rt}
          ${yt}
          return value;
        }
      `}{const vt=rt.ShapeUtil.size(gt.kernelShape),xt=rt.ShapeUtil.computeStrides(gt.kernelShape),wt=xt.length,Tt=gt.pads.length,St=ht(wt),Et=lt(ft,"inputDims"),Ot=lt(gt.pads,"pads"),Rt=lt(xt,"kernelStrides"),Pt=lt(gt.strides,"strides");let Mt="";return Mt=gt.pads.reduce(($t,kt)=>$t+kt)?`
            if (x[j] >= inputDims[j] || x[j] < 0) {
              pad++;
              isPad = true;
              break;
            }
          }
          if (!isPad) {
            ${mt}
          }`:`
          }
          ${mt}
        `,`
        ${St}
        float process(int indices[${_t}]) {
          int x[${_t}];
          copyVec(indices, x);
          int offset[${wt}];
          int pads[${Tt}];
          int inputDims[${_t}];
          int kernelStrides[${wt}];
          int strides[${wt}];
          ${Ot}
          ${Et}
          ${Pt}
          ${Rt}

          float value = ${bt};
          int pad = 0;
          bool isPad = false;
          for (int i = 0; i < ${vt}; i++) {
            offsetToIndices(i, kernelStrides, offset);
            isPad = false;
            for (int j = ${_t} - ${wt}; j < ${_t}; j++) {
              x[j] = indices[j] * strides[j - ${_t} + ${wt}]
                + offset[j - ${_t} + ${wt}] - pads[j - 2];
              ${Mt}
          }
          ${yt}

          return value;
        }
      `}},lt=(ft,gt)=>{let mt="";for(let yt=0;yt<ft.length;yt++)mt+=`
      ${gt}[${yt}] = ${ft[yt]};
    `;return mt},ht=ft=>`
  void offsetToIndices(int offset, int[${ft}] strides, out int[${ft}] indices) {
    if (${ft} == 0) {
      return;
    }
    for (int i = 0; i < ${ft} - 1; ++i) {
      indices[i] = offset / strides[i];
      offset -= indices[i] * strides[i];
    }
    indices[${ft} - 1] = offset;
  }`},4939:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.reduceLogSumSquare=_.reduceLogSum=_.reduceProd=_.reduceMin=_.reduceMax=_.reduceMean=_.reduceSum=_.parseReduceAttributes=void 0;const tt=et(246),rt=et(782),it=et(2517),st=et(2039),at=(dt,ot,nt,lt,ht)=>{ut(ot);const ft={name:lt,inputNames:["A"],inputTypes:[st.TextureType.unpacked]};return[dt.run(Object.assign(Object.assign({},ft),{cacheHint:nt.cacheKey,get:()=>ct(dt,ot,nt,lt,ht,ft)}),ot)]};_.parseReduceAttributes=dt=>{const ot=dt.attributes.getInts("axes",[]),nt=dt.attributes.getInt("keepdims",1)===1;return(0,tt.createAttributeWithCacheKey)({axes:ot,keepDims:nt})};const ct=(dt,ot,nt,lt,ht,ft)=>{const gt=[],mt=ot[0].dims.length||1,yt=[],bt=it.ShapeUtil.normalizeAxes(nt.axes,ot[0].dims.length),_t=ht(ot,bt);let vt=_t[1];for(let wt=0;wt<ot[0].dims.length;wt++)bt.indexOf(wt)>=0||bt.length===0?(nt.keepDims&&gt.push(1),vt=`
          for(int j${wt} = 0; j${wt} < ${ot[0].dims[wt]}; j${wt}++) {
            inputIdx[${wt}] = j${wt};
            ${vt}
          }`):(yt.push(`inputIdx[${wt}] = outputIdx[${gt.length}];`),gt.push(ot[0].dims[wt]));const xt=`
      float process(int outputIdx[${gt.length||1}]) {
        float value;                 // final result
        int inputIdx[${mt}];      // addressing input data
        ${yt.join(`
`)}
        ${_t[0]}       // init ops for reduce max/min
        ${vt}
        ${_t[2]}       // final computation for reduce mean
        return value;
      }`;return Object.assign(Object.assign({},ft),{output:{dims:gt,type:ot[0].type,textureType:st.TextureType.unpacked},shaderSource:xt})},ut=dt=>{if(!dt||dt.length!==1)throw new Error("Reduce op requires 1 input.");if(rt.NUMBER_TYPES.indexOf(dt[0].type)===-1)throw new Error("Invalid input type.")};_.reduceSum=(dt,ot,nt)=>at(dt,ot,nt,"ReduceSum",()=>["value = 0.0;","value += _A(inputIdx);",""]),_.reduceMean=(dt,ot,nt)=>at(dt,ot,nt,"ReduceMean",(lt,ht)=>{let ft=1;for(let gt=0;gt<lt[0].dims.length;gt++)(ht.indexOf(gt)>=0||ht.length===0)&&(ft*=lt[0].dims[gt]);return["value = 0.0;","value += _A(inputIdx);",`value /= ${ft}.;`]}),_.reduceMax=(dt,ot,nt)=>at(dt,ot,nt,"ReduceMax",(lt,ht)=>{const ft=[];for(let gt=0;gt<lt[0].dims.length;gt++)(ht.indexOf(gt)>=0||ht.length===0)&&ft.push(`inputIdx[${gt}] = 0;`);return[`${ft.join(`
`)}
value = _A(inputIdx);`,"value = max(value, _A(inputIdx));",""]}),_.reduceMin=(dt,ot,nt)=>at(dt,ot,nt,"ReduceMin",(lt,ht)=>{const ft=[];for(let gt=0;gt<lt[0].dims.length;gt++)(ht.indexOf(gt)>=0||ht.length===0)&&ft.push(`inputIdx[${gt}] = 0;`);return[`${ft.join(`
`)}
value = _A(inputIdx);`,"value = min(value, _A(inputIdx));",""]}),_.reduceProd=(dt,ot,nt)=>at(dt,ot,nt,"ReduceProd",()=>["value = 1.0;","value *= _A(inputIdx);",""]),_.reduceLogSum=(dt,ot,nt)=>at(dt,ot,nt,"ReduceLogSum",()=>["value = 0.0;","value += _A(inputIdx);","value = log(value);"]),_.reduceLogSumSquare=(dt,ot,nt)=>at(dt,ot,nt,"ReduceLogSumSquare",()=>["float t; value = 0.0;","t = _A(inputIdx); value += t * t;",""])},7019:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.isReshapeCheap=_.processDims3D=_.createPackedReshape3DProgramInfoLoader=void 0;const tt=et(2517),rt=et(5060),it=et(2039),st=et(2827);_.createPackedReshape3DProgramInfoLoader=(at,ct,ut)=>{const dt=(ot=>({name:"Reshape (packed)",inputTypes:[it.TextureType.packed],inputNames:["A"],cacheHint:`${ot}`}))(ut);return Object.assign(Object.assign({},dt),{get:()=>((ot,nt,lt,ht)=>{const ft=nt.dims,gt=ht;let mt="";for(let _t=0;_t<4;_t++){let vt="";switch(_t){case 0:vt="outputCoords = rc;";break;case 1:vt="outputCoords = ivec3(rc.x, rc.y+1, rc.z);";break;case 2:vt="outputCoords = ivec3(rc.x, rc.y, rc.z+1);";break;case 3:vt="outputCoords = ivec3(rc.x, rc.y+1, rc.z+1);";break;default:throw new Error}mt+=`
        ${vt}
        ${_t>0?"if(outputCoords.y < rows && outputCoords.z < cols){":""}
          int flattenedIndex = getFlattenedIndex(outputCoords);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flattenedIndex);
          vec2 innerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${_t}] = getChannel(getA(inputRC.x, inputRC.y, inputRC.z), innerDims);

        ${_t>0?"}":""}
      `}const yt=(0,rt.getGlsl)(ot.session.backend.glContext.version),bt=`
      ${function(_t){const vt=tt.ShapeUtil.computeStrides(_t),xt=["b","r","c"],wt="index";return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${vt.map((Tt,St)=>`int ${xt[St]} = ${wt} / ${Tt}; ${St===vt.length-1?`int ${xt[St+1]} = ${wt} - ${xt[St]} * ${Tt}`:`index -= ${xt[St]} * ${Tt}`};`).join("")}
      return ivec3(b, r, c);
    }
  `}(ft)}
      ${function(_t){const vt=tt.ShapeUtil.computeStrides(_t);return`
  int getFlattenedIndex(ivec3 coords) {
    // reverse y, z order
    return coords.x * ${vt[0]} + coords.z * ${vt[1]} + coords.y;
  }
`}(gt)}
      ${(0,st.unpackFromChannel)()}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.0);

        ivec3 outputCoords;
        int rows = ${gt[2]};
        int cols = ${gt[1]};

        ${mt}
        ${yt.output} = result;
      }
    `;return Object.assign(Object.assign({},lt),{output:{dims:gt,type:nt.type,textureType:it.TextureType.packed},shaderSource:bt,hasMain:!0})})(at,ct,dt,ut)})},_.processDims3D=function(at){if(at.length===0)return[1,1,1];let ct=1;for(let ut=0;ut<at.length-2;++ut)ct*=at[ut];return[ct,at.length>1?at[at.length-2]:1,at[at.length-1]]},_.isReshapeCheap=function(at,ct){let ut=!1;return ut=at.length===0||ct.length===0||(at.length<2||ct.length<2?at[at.length-1]===ct[ct.length-1]:at[at.length-1]===ct[ct.length-1]&&at[at.length-2]===ct[ct.length-2]),ut}},718:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.reshape=void 0;const tt=et(2517);_.reshape=(rt,it)=>{const st=tt.ShapeUtil.calculateReshapedDims(it[0].dims,it[1].integerData);return rt.session.pack?[rt.reshapePacked(it[0],st)]:[rt.reshapeUnpacked(it[0],st)]}},2268:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseResizeAttributesV11=_.parseResizeAttributesV10=_.resize=void 0;const tt=et(5060),rt=et(2039),it=et(9390),st=et(2827),at=et(9793),ct={name:"Resize",inputNames:["A"],inputTypes:[rt.TextureType.packed]};_.resize=(lt,ht,ft)=>((0,at.validateInputs)(ht,ft),[lt.run(Object.assign(Object.assign({},ct),{cacheHint:ft.cacheKey,get:()=>ut(lt,ht,ft)}),ht)]),_.parseResizeAttributesV10=lt=>(0,at.parseUpsampleAttributes)(lt,10),_.parseResizeAttributesV11=lt=>(0,at.parseUpsampleAttributes)(lt,11);const ut=(lt,ht,ft)=>{const gt=(0,tt.getGlsl)(lt.session.backend.glContext.version),[mt,yt]=dt(ht,ft);if(mt.every(Mt=>Mt===1)&&ft.coordinateTransformMode!=="tf_crop_and_resize")return Object.assign(Object.assign({},ct),{output:{dims:yt,type:ht[0].type,textureType:rt.TextureType.packed},hasMain:!0,shaderSource:`void main() {
                    vec4 v = ${gt.texture2D}(X, TexCoords);
                    ${gt.output} = v;
                }`});const bt=yt.length;if(bt<2)throw new Error(`output dimension should be at least 2, but got ${bt}`);const _t=yt[bt-2],vt=yt[bt-1],xt=ht[0].dims;if(bt!==xt.length)throw new Error(`output dimension should match input ${xt.length}, but got ${bt}`);const wt=xt[bt-2],Tt=xt[bt-1],St=mt[bt-2],Et=mt[bt-1];let Ot="";if(ft.mode!=="linear")throw new Error(`resize (packed) does not support mode: '${ft.mode}'`);switch(ft.coordinateTransformMode){case"asymmetric":Ot=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return vec4(coords) / scaleWHWH;
                    }
                `;break;case"half_pixel":Ot=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return (vec4(coords) + 0.5) / scaleWHWH - 0.5;
                    }
                `;break;case"pytorch_half_pixel":Ot=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 fcoords = vec4(coords);
                        return vec4(
                            ${vt}.0 > 1.0 ? (fcoords.x + 0.5) / scaleWHWH.x - 0.5 : 0.0,
                            ${_t}.0 > 1.0 ? (fcoords.y + 0.5) / scaleWHWH.y - 0.5 : 0.0,
                            ${vt}.0 > 1.0 ? (fcoords.z + 0.5) / scaleWHWH.z - 0.5 : 0.0,
                            ${_t}.0 > 1.0 ? (fcoords.w + 0.5) / scaleWHWH.w - 0.5 : 0.0
                          );
                    }
                `;break;case"align_corners":Ot=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 resized = vec4(${vt}.0 - 1.0, ${_t}.0 - 1.0, ${vt}.0 - 1.0,
                            ${_t}.0 - 1.0);
                        vec4 original = vec4(${Tt}.0 - 1.0, ${wt}.0 - 1.0, ${Tt}.0 - 1.0,
                            ${wt}.0 - 1.0);
                        vec4 new_scale = original / resized;
                        return vec4(coords) * new_scale;
                    }
                `;break;default:throw new Error(`resize (packed) does not support coordinateTransformMode:                                 '${ft.coordinateTransformMode}'`)}const Rt=(0,it.getCoordsDataType)(bt),Pt=`
            const vec2 inputWH = vec2(${wt}.0, ${Tt}.0);
            const vec4 scaleWHWH = vec4(float(${St}), float(${Et}), float(${St}), float(${Et}));
            ${(0,st.unpackFromChannel)()}
            ${Ot}
            float getAValue(int x10, int r, int c, int d) {
                return getChannel(getA(x10, r, c, d), vec2(c, d));
            }
            void main() {
                ${Rt} rc = getOutputCoords();

                int batch = rc[0];
                int depth = rc[1];

                // retrieve the 4 coordinates that is used in the 4 packed output values.
                ivec4 coords = ivec4(rc.wz, rc.w + 1, rc.z + 1);

                // calculate the source index in fraction
                vec4 sourceFrac = getSourceFracIndex(coords);

                // get the lower and upper bound of the 4 values that will be packed into one texel.
                ivec4 x00 = ivec4(max(sourceFrac.xy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xy)));
                ivec4 x01 = ivec4(max(sourceFrac.xw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xw)));
                ivec4 x10 = ivec4(max(sourceFrac.zy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zy)));
                ivec4 x11 = ivec4(max(sourceFrac.zw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zw)));

                bool hasNextRow = rc.w < ${_t-1};
                bool hasNextCol = rc.z < ${vt-1};

                // pack x00, x01, x10, x11's top-left corner into one vec4 structure
                vec4 topLeft = vec4(
                    getAValue(batch, depth, x00.x, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.y) : 0.0);

                // pack x00, x01, x10, x11's top-right corner into one vec4 structure
                vec4 topRight = vec4(
                    getAValue(batch, depth, x00.x, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.w) : 0.0);

                // pack x00, x01, x10, x11's bottom-left corner into one vec4 structure
                vec4 bottomLeft = vec4(
                    getAValue(batch, depth, x00.z, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.y) : 0.0);

                // pack x00, x01, x10, x11's bottom-right corner into one vec4 structure
                vec4 bottomRight = vec4(
                    getAValue(batch, depth, x00.z, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.w) : 0.0);

                // calculate the interpolation fraction on u and v direction
                vec4 frac = vec4(sourceFrac) - floor(sourceFrac);
                vec4 clampFrac = clamp(frac, vec4(0.0), vec4(1.0));

                vec4 top = mix(topLeft, topRight, clampFrac.ywyw);
                vec4 bottom = mix(bottomLeft, bottomRight, clampFrac.ywyw);
                vec4 newValue = mix(top, bottom, clampFrac.xxzz);

                ${gt.output} = vec4(newValue);
            }
        `;return Object.assign(Object.assign({},ct),{output:{dims:yt,type:ht[0].type,textureType:rt.TextureType.packed},hasMain:!0,shaderSource:Pt})},dt=(lt,ht)=>{const ft=lt[0].dims;let gt,mt=ht.scales;if(mt.length===0){const bt=lt[ht.scalesInputIdx];if(bt&&bt.size!==0){if(lt[ht.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");mt=ot(bt,ht.mode,ht.isResize)}else{const _t=lt[ht.sizesInputIdx];if(!_t||_t.size===0)throw new Error("Either scales or sizes MUST be provided as input.");gt=Array.from(_t.integerData),mt=nt(gt,ft,ht.mode,ht.isResize)}}else if(lt[ht.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");const yt=gt||ft.map((bt,_t)=>Math.floor(bt*mt[_t]));return[mt,yt]},ot=(lt,ht,ft)=>{const gt=Array.from(lt.floatData);return(0,at.scalesValidation)(gt,ht,ft),gt},nt=(lt,ht,ft,gt)=>{const mt=ht.length,yt=new Array(mt);for(let bt=0,_t=mt;bt<_t;bt++)if(ht[bt]===0){if(lt[bt]!==0)throw new Error("Input dim is zero but required output dim is non-zero.");yt[bt]=1}else yt[bt]=lt[bt]/ht[bt];return(0,at.scalesValidation)(yt,ft,gt),yt}},8117:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.shape=void 0;const tt=et(9162);_.shape=(it,st)=>(rt(st),[new tt.Tensor([st[0].dims.length],"int32",void 0,void 0,new Int32Array(st[0].dims))]);const rt=it=>{if(!it||it.length!==1)throw new Error("Shape requires 1 input.")}},2278:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.sliceV10=_.parseSliceAttributes=_.slice=void 0;const tt=et(246),rt=et(782),it=et(2517),st=et(2039),at={name:"Slice",inputNames:["A"],inputTypes:[st.TextureType.unpacked]};_.slice=(nt,lt,ht)=>(ut(lt),[nt.run(Object.assign(Object.assign({},at),{cacheHint:ht.cacheKey,get:()=>ct(nt,lt[0],ht)}),lt)]),_.parseSliceAttributes=nt=>{const lt=nt.attributes.getInts("starts"),ht=nt.attributes.getInts("ends"),ft=nt.attributes.getInts("axes",[]);return(0,tt.createAttributeWithCacheKey)({starts:lt,ends:ht,axes:ft})};const ct=(nt,lt,ht)=>{const ft=ht.axes.length===0?lt.dims.slice(0).map((xt,wt)=>wt):ht.axes,gt=it.ShapeUtil.normalizeAxes(ft,lt.dims.length),mt=ht.starts.map((xt,wt)=>xt>lt.dims[gt[wt]]-1?lt.dims[gt[wt]]:it.ShapeUtil.normalizeAxis(xt,lt.dims[gt[wt]])),yt=ht.ends.map((xt,wt)=>xt>lt.dims[gt[wt]]-1?lt.dims[gt[wt]]:it.ShapeUtil.normalizeAxis(xt,lt.dims[gt[wt]])),bt=lt.dims.slice(),_t=[];for(let xt=0;xt<gt.length;xt++)bt[gt[xt]]=yt[xt]-mt[xt],mt[xt]>0&&_t.push(`outputIdx[${gt[xt]}] += ${mt[xt]};`);const vt=`
      float process(int outputIdx[${bt.length}]) {
        ${_t.join(`
      `)}
        return _A(outputIdx);
      }`;return Object.assign(Object.assign({},at),{output:{dims:bt,type:lt.type,textureType:st.TextureType.unpacked},shaderSource:vt})},ut=nt=>{if(!nt||nt.length!==1)throw new Error("Slice requires 1 input.");if(rt.NUMBER_TYPES.indexOf(nt[0].type)===-1)throw new Error("Invalid input type.")};_.sliceV10=(nt,lt)=>{ot(lt);const ht=dt(nt,lt);return[nt.run(Object.assign(Object.assign({},at),{cacheHint:ht.cacheKey,get:()=>ct(nt,lt[0],ht)}),[lt[0]])]};const dt=(nt,lt)=>{if(!nt.session.isInitializer(lt[1].dataId)||!nt.session.isInitializer(lt[2].dataId)||lt.length>=4&&!nt.session.isInitializer(lt[3].dataId)||lt.length>=5&&!nt.session.isInitializer(lt[4].dataId))throw new Error("dynamic slice attributes are not allowed");if(lt.length>=5&&lt[4].integerData.some(mt=>mt!==1))throw new Error("currently non-1 steps is not supported for Slice");const ht=Array.from(lt[1].integerData),ft=Array.from(lt[2].integerData),gt=lt.length>=4?Array.from(lt[3].integerData):[];return{starts:ht,ends:ft,axes:gt,cacheKey:`${gt};${ht};${ft}`}},ot=nt=>{if(!nt||nt.length<3||nt.length>5)throw new Error("Invalid input number.");if(nt[1].type!=="int32"||nt[1].dims.length!==1)throw new Error("Invalid input type.");if(nt[2].type!=="int32"||nt[2].dims.length!==1)throw new Error("Invalid input type.");if(nt.length>=4&&(nt[3].type!=="int32"||nt[3].dims.length!==1))throw new Error("Invalid input type.");if(nt.length>=5&&(nt[4].type!=="int32"||nt[4].dims.length!==1))throw new Error("Invalid input type.")}},5524:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.softmaxV13=_.parseSoftmaxAttributesV13=_.parseSoftmaxAttributes=_.softmax=void 0;const tt=et(246),rt=et(2517),it=et(5060),st=et(2039),at=et(3738),ct={name:"SoftmaxComputeMax",inputNames:["A"],inputTypes:[st.TextureType.unpacked]},ut={name:"SoftmaxComputeScale",inputNames:["A","Max"],inputTypes:[st.TextureType.unpacked,st.TextureType.unpacked]},dt={name:"SoftMax",inputNames:["A","Max","Norm"],inputTypes:[st.TextureType.unpacked,st.TextureType.unpacked,st.TextureType.unpacked]};_.softmax=(gt,mt,yt)=>{ft(mt);const bt=mt[0].dims.slice(),_t=rt.ShapeUtil.normalizeAxis(yt.axis,bt.length),vt=rt.ShapeUtil.sizeToDimension(bt,_t),xt=rt.ShapeUtil.sizeFromDimension(bt,_t);return ot(gt,mt,yt,vt,xt)},_.parseSoftmaxAttributes=gt=>(0,tt.createAttributeWithCacheKey)({axis:gt.attributes.getInt("axis",1)}),_.parseSoftmaxAttributesV13=gt=>(0,tt.createAttributeWithCacheKey)({axis:gt.attributes.getInt("axis",-1)}),_.softmaxV13=(gt,mt,yt)=>{ft(mt);const bt=mt[0].dims.slice(),_t=rt.ShapeUtil.normalizeAxis(yt.axis,bt.length),vt=bt.length,xt=_t!==vt-1,wt=[];let Tt,St=[],Et=[];xt&&(St=Array.from({length:vt}).map((Mt,$t)=>$t),St[_t]=vt-1,St[vt-1]=_t,St.map(Mt=>wt.push(bt[Mt])),Tt=(0,tt.createAttributeWithCacheKey)({perm:St}),Et=(0,at.transpose)(gt,mt,Tt));const Ot=xt?rt.ShapeUtil.sizeToDimension(wt,vt-1):rt.ShapeUtil.sizeToDimension(bt,vt-1),Rt=xt?rt.ShapeUtil.sizeFromDimension(wt,vt-1):rt.ShapeUtil.sizeFromDimension(bt,vt-1),Pt=ot(gt,xt?Et:mt,yt,Ot,Rt);return xt?(0,at.transpose)(gt,Pt,Tt):Pt};const ot=(gt,mt,yt,bt,_t)=>{const vt=nt(gt,mt[0],bt,_t,[bt]),xt=gt.run(Object.assign(Object.assign({},ct),{cacheHint:yt.cacheKey,get:()=>vt}),mt),wt=lt(gt,mt[0],bt,_t,vt.output.dims,[bt]),Tt=gt.run(Object.assign(Object.assign({},ut),{cacheHint:yt.cacheKey,get:()=>wt}),[mt[0],xt]),St=ht(gt,mt[0],bt,_t,vt.output.dims,wt.output.dims);return[gt.run(Object.assign(Object.assign({},dt),{cacheHint:yt.cacheKey,get:()=>St}),[mt[0],xt,Tt])]},nt=(gt,mt,yt,bt,_t)=>{const[vt,xt]=gt.calculateTextureWidthAndHeight(mt.dims,st.TextureType.unpacked),wt=_t.length;if(yt<1||bt<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(_t.length!==1)throw new Error("Dimensionality of the output should be 1");if(_t[0]!==yt)throw new Error("Shape of the output should be equal to logical row count");const Tt=(0,it.getGlsl)(gt.session.backend.glContext.version),St=`
      float process(int[${wt}] indices) {
        int logical_row_start_offset = indices[0] * ${bt};

        float max = getColorAsFloat(${Tt.texture2D}(A, offsetToCoords(logical_row_start_offset, ${vt},
        ${xt} )));
        for(int i=1; i<${bt}; ++i)
        {
          float current = getColorAsFloat(${Tt.texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${vt}, ${xt})));
          if(current > max)
          max = current;
        }

        return max;
      }`;return Object.assign(Object.assign({},ct),{output:{dims:_t,type:mt.type,textureType:st.TextureType.unpacked},shaderSource:St})},lt=(gt,mt,yt,bt,_t,vt)=>{const[xt,wt]=gt.calculateTextureWidthAndHeight(mt.dims,st.TextureType.unpacked),Tt=vt.length;if(yt<1||bt<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(vt.length!==1)throw new Error("Dimensionality of the output should be 1");if(vt[0]!==yt)throw new Error("Shape of the output should be equal to logical row count");if(_t.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(_t[0]!==yt)throw new Error("Shape of the intermediate results should be equal to logical row count");const St=`
      float process(int[${Tt}] indices) {
        int logical_row_start_offset = indices[0] * ${bt};

        float norm_factor = 0.0;
        float max = _Max(indices);
        for(int i=0; i<${bt}; ++i)
        {
          norm_factor += exp(getColorAsFloat(${(0,it.getGlsl)(gt.session.backend.glContext.version).texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${xt}, ${wt}))) - max);
        }

        return norm_factor;
      }`;return Object.assign(Object.assign({},ut),{output:{dims:vt,type:mt.type,textureType:st.TextureType.unpacked},shaderSource:St})},ht=(gt,mt,yt,bt,_t,vt)=>{const[xt,wt]=gt.calculateTextureWidthAndHeight(mt.dims,st.TextureType.unpacked),Tt=mt.dims.length;if(yt<1||bt<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(_t.length!==1||vt.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(_t[0]!==yt||vt[0]!==yt)throw new Error("Shape of the intermediate results should be equal to logical row count");const St=`
      float process(int[${Tt}] indices) {

      // get offset of current logical tensor index from the 2-D texture coordinates (TexCoords)
      int offset = coordsToOffset(TexCoords, ${xt}, ${wt});

      //determine the logical row for this index
      int logical_row_index[1];
      logical_row_index[0] = offset / ${bt};

      float norm_factor = _Norm(logical_row_index);

      // avoid possible division by 0
      // if norm_facor is 0, all elements are zero
      // if so, return 0
      if(norm_factor == 0.0)
        return 0.0;

      return exp(_A(indices) - _Max(logical_row_index)) / norm_factor;
    }`;return Object.assign(Object.assign({},dt),{output:{dims:mt.dims,type:mt.type,textureType:st.TextureType.unpacked},shaderSource:St})},ft=gt=>{if(!gt||gt.length!==1)throw new Error("Softmax requires 1 input.");if(gt[0].type!=="float32"&&gt[0].type!=="float64")throw new Error("Invalid input type")}},5975:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseSplitAttributes=_.split=void 0;const tt=et(246),rt=et(2517),it=et(2039),st={name:"Split",inputNames:["A"],inputTypes:[it.TextureType.unpacked]};_.split=(dt,ot,nt)=>{ut(ot);const lt=rt.ShapeUtil.normalizeAxis(nt.axis,ot[0].dims.length),ht=at(dt,ot,lt,nt),ft=[];for(let gt=0;gt<ht;++gt)ft.push(dt.run(Object.assign(Object.assign({},st),{cacheHint:`${nt.cacheKey};${gt}`,get:()=>ct(dt,ot[0],nt,lt,gt)}),ot));return ft},_.parseSplitAttributes=dt=>{const ot=dt.attributes.getInt("axis",0),nt=dt.attributes.getInts("split",[]),lt=dt.outputs.length;return(0,tt.createAttributeWithCacheKey)({axis:ot,split:nt,numOutputs:lt})};const at=(dt,ot,nt,lt)=>{const[,ht]=rt.SplitUtil.splitShape(ot[0].dims,nt,lt.split,lt.numOutputs);return ht.length},ct=(dt,ot,nt,lt,ht)=>{const[ft,gt]=rt.SplitUtil.splitShape(ot.dims,lt,nt.split,nt.numOutputs),mt=gt[ht],yt=ft[ht],bt=`
      float process(int indices[${yt.length}]) {
        indices[${lt}] += ${mt};
        return _A(indices);
      }
    `;return Object.assign(Object.assign({},st),{cacheHint:`${nt.cacheKey}:${ht}`,output:{dims:yt,type:ot.type,textureType:it.TextureType.unpacked},shaderSource:bt})},ut=dt=>{if(!dt||dt.length!==1)throw new Error("Split requires one input.");if(dt[0].type!=="int8"&&dt[0].type!=="uint8"&&dt[0].type!=="int16"&&dt[0].type!=="uint16"&&dt[0].type!=="int32"&&dt[0].type!=="uint32"&&dt[0].type!=="float32"&&dt[0].type!=="float64"&&dt[0].type!=="bool")throw new Error("Invalid input type.")}},3933:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseSqueezeAttributes=_.squeezeV13=_.squeeze=void 0;const tt=et(2517);_.squeeze=(st,at,ct)=>{rt(at);const ut=tt.ShapeUtil.squeezeShape(at[0].dims,ct);return[st.reshapeUnpacked(at[0],ut)]},_.squeezeV13=(st,at)=>(it(at),(0,_.squeeze)(st,[at[0]],Array.from(at[1].integerData))),_.parseSqueezeAttributes=st=>st.attributes.getInts("axes");const rt=st=>{if(!st||st.length!==1)throw new Error("Squeeze requires 1 input.");if(st[0].type==="string")throw new Error("invalid input tensor types.")},it=st=>{if(!st||st.length!==2)throw new Error("Squeeze requires 2 inputs.");if(st[1].type!=="int32")throw new Error("Invalid input type.")}},6558:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.sum=void 0;const tt=et(5060),rt=et(2039);_.sum=(at,ct)=>{st(ct);const ut={name:"Sum",inputNames:ct.map((dt,ot)=>`X${ot}`),inputTypes:new Array(ct.length).fill(rt.TextureType.unpacked)};return[at.run(Object.assign(Object.assign({},ut),{get:()=>it(at,ct,ut)}),ct)]};const it=(at,ct,ut)=>{const dt=(0,tt.getGlsl)(at.session.backend.glContext.version),ot=ct[0].dims.slice(),nt=`
      void main() {
        vec4 result = ${ct.map((lt,ht)=>`${dt.texture2D}(X${ht},TexCoords)`).join(" + ")};
        ${dt.output} = result;
      }
    `;return Object.assign(Object.assign({},ut),{output:{dims:ot,type:ct[0].type,textureType:rt.TextureType.unpacked},hasMain:!0,shaderSource:nt})},st=at=>{if(!at||at.length===0)throw new Error("Sum requires inputs.");const ct=at[0].dims.length;for(let ut=1;ut<at.length;ut++){if(ct!==at[ut].dims.length)throw new Error("Input shapes are mismatched.");for(let dt=0;dt<ct;dt++)if(at[0].dims[dt]!==at[ut].dims[dt])throw new Error("Input shapes are not matched.")}if(at[0].type!=="float32"&&at[0].type!=="float64")throw new Error("Invalid input type.");for(let ut=1;ut<at.length;ut++)if(at[0].type!==at[ut].type)throw new Error("Input types are not matched.")}},5723:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.tile=void 0;const tt=et(782),rt=et(2039);_.tile=(at,ct)=>{st(ct);const ut={name:"Tile",inputNames:["A"],inputTypes:[rt.TextureType.unpacked]};return[at.run(Object.assign(Object.assign({},ut),{get:()=>it(at,ct,ut)}),ct)]};const it=(at,ct,ut)=>{const dt=ct[0].dims.slice(),ot=new Array(dt.length),nt=[];for(let ft=0;ft<dt.length;ft++)ot[ft]=dt[ft]*ct[1].numberData[ft],nt.push(`inputIdx[${ft}] = int(mod(float(outputIdx[${ft}]), ${dt[ft]}.));`);const lt=ot.length,ht=`
      float process(int outputIdx[${lt}]) {
        int inputIdx[${lt}];
        ${nt.join(`
`)}
        return _A(inputIdx);
      }
    `;return Object.assign(Object.assign({},ut),{output:{dims:ot,type:ct[0].type,textureType:rt.TextureType.unpacked},shaderSource:ht})},st=at=>{if(!at||at.length!==2)throw new Error("Tile requires 2 input.");if(at[1].dims.length!==1)throw new Error("The second input shape must 1 dimension.");if(at[1].dims[0]!==at[0].dims.length)throw new Error("Invalid input shape.");if(tt.NUMBER_TYPES.indexOf(at[0].type)===-1)throw new Error("Invalid input type.");if(at[1].type!=="int32"&&at[1].type!=="int16")throw new Error("Invalid repeat type.")}},3738:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseTransposeAttributes=_.transpose=void 0;const tt=et(246),rt=et(2517),it=et(2039),st={name:"Transpose",inputNames:["A"],inputTypes:[it.TextureType.unpacked]};_.transpose=(nt,lt,ht)=>(ot(lt),[nt.run(Object.assign(Object.assign({},st),{cacheHint:ht.cacheKey,get:()=>at(nt,lt[0],ht.perm)}),lt)]),_.parseTransposeAttributes=nt=>(0,tt.createAttributeWithCacheKey)({perm:nt.attributes.getInts("perm",[])});const at=(nt,lt,ht)=>{const ft=lt.dims;ht=ct(ft,ht);const gt=ut(ft,ht),mt=ft.length,yt=`
      ${dt("perm",ht,mt)}
      float process(int indices[${mt}]) {
        int a[${mt}];
        perm(a, indices);
        return _A(a);
      }`;return Object.assign(Object.assign({},st),{output:{dims:gt,type:lt.type,textureType:it.TextureType.unpacked},shaderSource:yt})},ct=(nt,lt)=>(lt&&lt.length!==nt.length&&(lt=[...nt.keys()].reverse()),lt),ut=(nt,lt)=>(lt=ct(nt,lt),rt.ShapeUtil.sortBasedOnPerm(nt,lt)),dt=(nt,lt,ht)=>{const ft=[];ft.push(`void ${nt}(out int a[${ht}], int src[${ht}]) {`);for(let gt=0;gt<ht;++gt)ft.push(`	a[${lt[gt]}]=src[${gt}];`);return ft.push("	}"),ft.join(`
`)},ot=nt=>{if(!nt||nt.length!==1)throw new Error("Transpose requires 1 input.");if(nt[0].type!=="float32"&&nt[0].type!=="float64")throw new Error("input should be float tensor")}},8710:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.encodeAsUint8=void 0;const tt=et(5060),rt=et(2039);_.encodeAsUint8=(it,st)=>{const at=st.shape,ct=(0,tt.getGlsl)(it.session.backend.glContext.version),ut=`
    const float FLOAT_MAX = 1.70141184e38;
    const float FLOAT_MIN = 1.17549435e-38;

    bool isNaN(float val) {
      return (val < 1.0 || 0.0 < val || val == 0.0) ? false : true;
    }

    highp vec4 encodeAsUint8(highp float v) {
      if (isNaN(v)) {
        return vec4(255, 255, 255, 255);
      }

      highp float av = abs(v);

      if(av < FLOAT_MIN) {
        return vec4(0.0, 0.0, 0.0, 0.0);
      } else if(v > FLOAT_MAX) {
        return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
      } else if(v < -FLOAT_MAX) {
        return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
      }

      highp vec4 c = vec4(0,0,0,0);

      highp float e = floor(log2(av));
      highp float m = exp2(fract(log2(av))) - 1.0;

      c[2] = floor(128.0 * m);
      m -= c[2] / 128.0;
      c[1] = floor(32768.0 * m);
      m -= c[1] / 32768.0;
      c[0] = floor(8388608.0 * m);

      highp float ebias = e + 127.0;
      c[3] = floor(ebias / 2.0);
      ebias -= c[3] * 2.0;
      c[2] += floor(ebias) * 128.0;

      c[3] += 128.0 * step(0.0, -v);

      return c / 255.0;
    }

    void main() {
      float value = ${ct.texture2D}(X,TexCoords).r;
      ${ct.output} = encodeAsUint8(value);
    }`,dt={name:"Uint8Encode",inputTypes:[rt.TextureType.unpacked],inputNames:["X"],output:{dims:at,type:st.tensor.type,textureType:rt.TextureType.downloadUint8AsFloat},shaderSource:ut,hasMain:!0};return it.executeProgram(dt,[st.tensor])}},4909:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.tanh=_.tan=_.sqrt=_.sin=_.sigmoid=_.relu=_.not=_.neg=_.log=_.parseLeakyReluAttributes=_.leakyRelu=_.identity=_.floor=_.exp=_.parseEluAttributes=_.elu=_.cos=_.ceil=_.clipV11=_.parseClipAttributes=_.clip=_.atan=_.asin=_.acos=_.abs=_.glslTanh=_.glslTan=_.glslSqrt=_.glslSigmoid=_.glslRelu=_.glslSin=_.glslNot=_.glslNeg=_.glslLog=_.glslLeakyRelu=_.glslIdentity=_.glslClip=_.glslFloor=_.glslExp=_.glslElu=_.glslCos=_.glslCeil=_.glslAtan=_.glslAsin=_.glslAcos=_.glslAbs=void 0;const tt=et(246),rt=et(2517),it=et(8520),st=et(5060),at=et(2039);function ct(){return Pt("abs")}function ut(){return Pt("acos")}function dt(){return Pt("asin")}function ot(){return Pt("atan")}function nt(){return Pt("ceil")}function lt(){return Pt("cos")}function ht(kt){const Lt="elu";return{body:`
  const float alpha = float(${kt});

  float ${Lt}_(float a) {
    return a >= 0.0 ? a: (exp(a) - 1.0) * alpha;
  }
  vec4 ${Lt}_(vec4 v) {
    return vec4(${Lt}_(v.x), ${Lt}_(v.y), ${Lt}_(v.z), ${Lt}_(v.w));
  }
  `,name:Lt,type:it.FunctionType.ValueBased}}function ft(){return Pt("exp")}function gt(){return Pt("floor")}function mt(kt,Lt){const Nt="clip";return{body:`
  const float min = float(${kt});
  const float max = float(${Lt});

  float ${Nt}_(float a) {
    return clamp(a, min, max);
  }
  vec4 ${Nt}_(vec4 v) {
    return clamp(v, min, max);
  }
  `,name:Nt,type:it.FunctionType.ValueBased}}function yt(){const kt="indentity";return{body:`
  float ${kt}_(float a) {
    return a;
  }
  vec4 ${kt}_(vec4 v) {
    return v;
  }
  `,name:kt,type:it.FunctionType.ValueBased}}function bt(kt){const Lt="leakyRelu";return{body:`
  const float alpha = float(${kt});

  float ${Lt}_(float a) {
    return a < 0.0 ? a * alpha : a;
  }
  vec4 ${Lt}_(vec4 v) {
    return vec4(${Lt}_(v.x), ${Lt}_(v.y), ${Lt}_(v.z), ${Lt}_(v.w));
  }
  `,name:Lt,type:it.FunctionType.ValueBased}}function _t(){return Pt("log")}function vt(){const kt="neg";return{body:`
  float ${kt}_(float a) {
    return -a;
  }
  vec4 ${kt}_(vec4 v) {
    return -v;
  }
  `,name:kt,type:it.FunctionType.ValueBased}}function xt(){const kt="not";return{body:`
  float ${kt}_(float a) {
    return float( ! bool(a) );
  }
  bool ${kt}_(bool a) {
    return !a;
  }
  vec4 ${kt}_(vec4 v) {
    return vec4(!bool(v.x), !bool(v.y), !bool(v.z), !bool(v.w));
  }
  bvec4 ${kt}_(bvec4 v) {
    return bvec4(!v.x, !v.y, !v.z, !v.w);
  }
  `,name:kt,type:it.FunctionType.ValueBased}}function wt(){return Pt("sin")}function Tt(){const kt="relu";return{body:`
  float ${kt}_(float a) {
    return max( a, 0.0 );
  }
  vec4 ${kt}_(vec4 v) {
    return max( v, 0.0 );
  }
  `,name:kt,type:it.FunctionType.ValueBased}}function St(){const kt="sigmoid";return{body:`
  float ${kt}_(float a) {
    return 1.0 / (1.0 + exp(-a));
  }
  vec4 ${kt}_(vec4 v) {
    return 1.0 / (1.0 + exp(-v));
  }
  `,name:kt,type:it.FunctionType.ValueBased}}function Et(){return Pt("sqrt")}function Ot(){return Pt("tan")}function Rt(){const kt="tanh";return{body:`
  float ${kt}_(float a) {
    a = clamp(a, -10., 10.);
    a = exp(2.*a);
    return (a - 1.) / (a + 1.);
  }
  vec4 ${kt}_(vec4 v) {
    v = clamp(v, -10., 10.);
    v = exp(2.*v);
    return (v - 1.) / (v + 1.);
  }
  `,name:kt,type:it.FunctionType.ValueBased}}function Pt(kt){return{body:`
  float ${kt}_(float a) {
    return ${kt}(a);
  }
  vec4 ${kt}_(vec4 v) {
    return ${kt}(v);
  }
  `,name:kt,type:it.FunctionType.ValueBased}}_.glslAbs=ct,_.glslAcos=ut,_.glslAsin=dt,_.glslAtan=ot,_.glslCeil=nt,_.glslCos=lt,_.glslElu=ht,_.glslExp=ft,_.glslFloor=gt,_.glslClip=mt,_.glslIdentity=yt,_.glslLeakyRelu=bt,_.glslLog=_t,_.glslNeg=vt,_.glslNot=xt,_.glslSin=wt,_.glslRelu=Tt,_.glslSigmoid=St,_.glslSqrt=Et,_.glslTan=Ot,_.glslTanh=Rt;const Mt=(kt,Lt,Nt,zt)=>{const Ut=kt.session.pack?at.TextureType.packed:at.TextureType.unpacked,Vt={name:Nt.name,inputTypes:[Ut],inputNames:["A"],cacheHint:zt};return Object.assign(Object.assign({},Vt),{get:()=>((Ht,sr,ir,er)=>{const dr=Ht.session.pack?at.TextureType.packed:at.TextureType.unpacked,gr=(0,st.getGlsl)(Ht.session.backend.glContext.version);return Object.assign(Object.assign({},sr),{output:{dims:ir.dims,type:ir.type,textureType:dr},shaderSource:`
     ${er.body}
     void main() {
       vec4 v = ${gr.texture2D}(A, TexCoords);
       v = ${er.name}_(v);
       ${gr.output} = v;
     }
     `,hasMain:!0})})(kt,Vt,Lt,Nt)})};_.abs=(kt,Lt)=>[kt.run(Mt(kt,Lt[0],ct()),Lt)],_.acos=(kt,Lt)=>[kt.run(Mt(kt,Lt[0],ut()),Lt)],_.asin=(kt,Lt)=>[kt.run(Mt(kt,Lt[0],dt()),Lt)],_.atan=(kt,Lt)=>[kt.run(Mt(kt,Lt[0],ot()),Lt)],_.clip=(kt,Lt,Nt)=>[kt.run(Mt(kt,Lt[0],mt(Nt.min,Nt.max),Nt.cacheKey),Lt)],_.parseClipAttributes=kt=>(0,tt.createAttributeWithCacheKey)({min:kt.attributes.getFloat("min",rt.MIN_CLIP),max:kt.attributes.getFloat("max",rt.MAX_CLIP)}),_.clipV11=(kt,Lt)=>{const Nt=$t(kt,Lt);return(0,_.clip)(kt,[Lt[0]],Nt)};const $t=(kt,Lt)=>{if(Lt.length>=3&&(!kt.session.isInitializer(Lt[1].dataId)||!kt.session.isInitializer(Lt[2].dataId)))throw new Error("dynamic clip attributes are not allowed");const Nt=Lt.length>=3?Lt[1].numberData[0]:rt.MIN_CLIP,zt=Lt.length>=3?Lt[2].numberData[0]:rt.MAX_CLIP;return(0,tt.createAttributeWithCacheKey)({min:Nt,max:zt})};_.ceil=(kt,Lt)=>[kt.run(Mt(kt,Lt[0],nt()),Lt)],_.cos=(kt,Lt)=>[kt.run(Mt(kt,Lt[0],lt()),Lt)],_.elu=(kt,Lt,Nt)=>[kt.run(Mt(kt,Lt[0],ht(Nt.alpha),Nt.cacheKey),Lt)],_.parseEluAttributes=kt=>(0,tt.createAttributeWithCacheKey)({alpha:kt.attributes.getFloat("alpha",1)}),_.exp=(kt,Lt)=>[kt.run(Mt(kt,Lt[0],ft()),Lt)],_.floor=(kt,Lt)=>[kt.run(Mt(kt,Lt[0],gt()),Lt)],_.identity=(kt,Lt)=>[kt.run(Mt(kt,Lt[0],yt()),Lt)],_.leakyRelu=(kt,Lt,Nt)=>[kt.run(Mt(kt,Lt[0],bt(Nt.alpha),Nt.cacheKey),Lt)],_.parseLeakyReluAttributes=kt=>(0,tt.createAttributeWithCacheKey)({alpha:kt.attributes.getFloat("alpha",.01)}),_.log=(kt,Lt)=>[kt.run(Mt(kt,Lt[0],_t()),Lt)],_.neg=(kt,Lt)=>[kt.run(Mt(kt,Lt[0],vt()),Lt)],_.not=(kt,Lt)=>[kt.run(Mt(kt,Lt[0],xt()),Lt)],_.relu=(kt,Lt)=>[kt.run(Mt(kt,Lt[0],Tt()),Lt)],_.sigmoid=(kt,Lt)=>[kt.run(Mt(kt,Lt[0],St()),Lt)],_.sin=(kt,Lt)=>[kt.run(Mt(kt,Lt[0],wt()),Lt)],_.sqrt=(kt,Lt)=>[kt.run(Mt(kt,Lt[0],Et()),Lt)],_.tan=(kt,Lt)=>[kt.run(Mt(kt,Lt[0],Ot()),Lt)],_.tanh=(kt,Lt)=>[kt.run(Mt(kt,Lt[0],Rt()),Lt)]},5611:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.createUnpackProgramInfoLoader=_.createUnpackProgramInfo=void 0;const tt=et(5060),rt=et(2039),it=et(9390),st=et(2827),at={name:"unpack",inputNames:["A"],inputTypes:[rt.TextureType.packed]};_.createUnpackProgramInfo=(ct,ut)=>{const dt=ut.dims.length,ot=(0,st.getChannels)("rc",dt),nt=ot.slice(-2),lt=(0,it.getCoordsDataType)(dt),ht=(0,st.unpackFromChannel)(),ft=ut.dims.length===0?"":function(yt,bt){if(yt===1)return"rc";let _t="";for(let vt=0;vt<yt;vt++)_t+=bt[vt],vt<yt-1&&(_t+=",");return _t}(dt,ot),gt=dt<=1?"rc":`vec2(${nt.join(",")})`,mt=`
    ${ht}
    void main() {
      ${lt} rc = getOutputCoords();

       // Sample the texture with the coords to get the rgba channel value.
       vec4 packedInput = getA(${ft});

       ${(0,tt.getGlsl)(ct.session.backend.glContext.version).output} = vec4(getChannel(packedInput, ${gt}), 0, 0, 0);
     }
   `;return Object.assign(Object.assign({},at),{hasMain:!0,output:{dims:ut.dims,type:ut.type,textureType:rt.TextureType.unpacked},shaderSource:mt})},_.createUnpackProgramInfoLoader=(ct,ut)=>Object.assign(Object.assign({},at),{get:()=>(0,_.createUnpackProgramInfo)(ct,ut)})},8428:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.parseUnsqueezeAttributes=_.unsqueezeV13=_.unsqueeze=void 0;const tt=et(2517);_.unsqueeze=(st,at,ct)=>{rt(at);const ut=tt.ShapeUtil.unsqueezeShape(at[0].dims,ct);return[st.reshapeUnpacked(at[0],ut)]},_.unsqueezeV13=(st,at)=>(it(at),(0,_.unsqueeze)(st,[at[0]],Array.from(at[1].integerData))),_.parseUnsqueezeAttributes=st=>st.attributes.getInts("axes");const rt=st=>{if(!st||st.length!==1)throw new Error("Unsqueeze requires 1 input.");if(st[0].type==="string")throw new Error("invalid input tensor types.")},it=st=>{if(!st||st.length!==2)throw new Error("Unsqueeze requires 2 inputs.");if(st[1].type!=="int32")throw new Error("Invalid input type.")}},9793:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.scalesValidation=_.validateInputs=_.parseUpsampleAttributes=_.parseUpsampleAttributesV9=_.parseUpsampleAttributesV7=_.upsample=void 0;const tt=et(246),rt=et(5060),it=et(2039),st={name:"Upsample",inputNames:["X"],inputTypes:[it.TextureType.unpacked]};_.upsample=(ct,ut,dt)=>((0,_.validateInputs)(ut,dt),[ct.run(Object.assign(Object.assign({},st),{cacheHint:dt.cacheKey,get:()=>at(ct,ut,dt)}),ut)]),_.parseUpsampleAttributesV7=ct=>(0,_.parseUpsampleAttributes)(ct,7),_.parseUpsampleAttributesV9=ct=>(0,_.parseUpsampleAttributes)(ct,9),_.parseUpsampleAttributes=(ct,ut)=>{const dt=ut>=10,ot=ct.attributes.getString("mode","nearest");if(ot!=="nearest"&&ot!=="linear"&&(ut<11||ot!=="cubic"))throw new Error(`unrecognized mode: ${ot}`);let nt=[];ut<9&&(nt=ct.attributes.getFloats("scales"),(0,_.scalesValidation)(nt,ot,dt));const lt=ct.attributes.getFloat("extrapolation_value",0),ht=ut>10?ct.attributes.getString("coordinate_transformation_mode","half_pixel"):"asymmetric";if(["asymmetric","pytorch_half_pixel","tf_half_pixel_for_nn","align_corners","tf_crop_and_resize","half_pixel"].indexOf(ht)===-1)throw new Error(`coordinate_transform_mode '${ht}' is not supported`);const ft=ht==="tf_crop_and_resize",gt=ft,mt=ot==="nearest"&&ut>=11?ct.attributes.getString("nearest_mode","round_prefer_floor"):"";if(["round_prefer_floor","round_prefer_ceil","floor","ceil",""].indexOf(mt)===-1)throw new Error(`nearest_mode '${mt}' is not supported`);const yt=ct.attributes.getFloat("cubic_coeff_a",-.75),bt=ct.attributes.getInt("exclude_outside",0)!==0;if(bt&&ot!=="cubic")throw new Error("exclude_outside can be set to 1 only when mode is CUBIC.");const _t=ut<11||ot==="nearest"&&ht==="asymmetric"&&mt==="floor";let vt=0,xt=0,wt=0;return ut>10?ct.inputs.length>2?(vt=1,xt=2,wt=3):(xt=1,wt=2):ut===9&&(xt=1),(0,tt.createAttributeWithCacheKey)({opset:ut,isResize:dt,mode:ot,scales:nt,extrapolationValue:lt,coordinateTransformMode:ht,useExtrapolation:gt,needRoiInput:ft,nearestMode:mt,cubicCoefficientA:yt,excludeOutside:bt,useNearest2xOptimization:_t,roiInputIdx:vt,scalesInputIdx:xt,sizesInputIdx:wt})};const at=(ct,ut,dt)=>{const ot=(0,rt.getGlsl)(ct.session.backend.glContext.version),[nt,lt]=ct.calculateTextureWidthAndHeight(ut[0].dims,it.TextureType.unpacked),ht=ut[0].dims.map((wt,Tt)=>Math.floor(wt*dt.scales[Tt])),[ft,gt]=ct.calculateTextureWidthAndHeight(ht,it.TextureType.unpacked),mt=ht.length,yt=new Array(mt),bt=new Array(mt);let _t=`
      int output_pitches[${mt}];
      int input_pitches[${mt}];
      `;for(let wt=mt-1;wt>=0;wt--)yt[wt]=wt===mt-1?1:yt[wt+1]*ht[wt+1],bt[wt]=wt===mt-1?1:bt[wt+1]*ut[0].dims[wt+1],_t+=`
        output_pitches[${wt}] = ${yt[wt]};
        input_pitches[${wt}] = ${bt[wt]};
        `;const vt=`
      float getInputFloat(int index) {
        vec2 coords = offsetToCoords(index, ${nt}, ${lt});
        float value = getColorAsFloat(${ot.texture2D}(X, coords));
        return value;
      }
      `,xt=dt.mode==="nearest"?`
    ${vt}
    float process(int indices[${mt}]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${ft}, ${gt});

      ${_t}

      int d, m;
      for (int dim = 0; dim < ${mt}; ++dim) {
        d = output_index / output_pitches[dim];
        m = output_index - d * output_pitches[dim];
        output_index = m;

        if (scales[dim] != 1 && d > 0) {
          int d2 = d / scales[dim];
          m = d - d2 * scales[dim];
          d = d2;
        }
        input_index += input_pitches[dim] * d;
      }

      return getInputFloat(input_index);
    }`:mt===4?`
    ${vt}
    float process(int indices[4]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${ft}, ${gt});

      ${_t}

      int m;
      int index_of_dim0, index_of_dim1, index_of_dim2, index_of_dim3;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m / output_pitches[1];
      m = m - index_of_dim1 * output_pitches[1];
      index_of_dim2 = m / output_pitches[2];
      m = m - index_of_dim2 * output_pitches[2];
      index_of_dim3 = m;

      int index_of_input_dim2, index_of_input_dim3, x_offset, y_offset;
      index_of_input_dim2 = index_of_dim2 / scales[2];
      y_offset = index_of_dim2 - index_of_input_dim2 * scales[2];
      index_of_input_dim3 = index_of_dim3 / scales[3];
      x_offset = index_of_dim3 - index_of_input_dim3 * scales[3];

      input_index = index_of_dim0 * input_pitches[0] +
            index_of_dim1 * input_pitches[1] +
            index_of_input_dim2 * input_pitches[2] +
            index_of_input_dim3;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim2 = false;
      if (index_of_input_dim2 == (${ut[0].dims[2]} - 1)) {
        // It's the end in dimension 2
        x01 = x00;
        end_of_dim2 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[2]);
      }

      if (index_of_input_dim3 == (input_pitches[2] - 1)) {
        // It's the end in dimension 3
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim2 ? x10 : getInputFloat(input_index + input_pitches[2] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[2]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[2]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[3]);
    }`:`
    ${vt}
    float process(int indices[2]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${ft}, ${gt});

      ${_t}

      int m;
      int index_of_dim0, index_of_dim1;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m;

      int index_of_input_dim0, index_of_input_dim1, x_offset, y_offset;
      index_of_input_dim0 = index_of_dim0 / scales[0];
      y_offset = index_of_dim0 - index_of_input_dim0 * scales[0];
      index_of_input_dim1 = index_of_dim1 / scales[1];
      x_offset = index_of_dim1 - index_of_input_dim1 * scales[1];

      input_index = index_of_input_dim0 * input_pitches[0] + index_of_input_dim1;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim0 = false;
      if (index_of_input_dim0 == (${ut[0].dims[0]} - 1)) {
        // It's the end in dimension 0
        x01 = x00;
        end_of_dim0 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[0]);
      }

      if (index_of_input_dim1 == (input_pitches[0] - 1)) {
        // It's the end in dimension 1
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim0 ? x10 : getInputFloat(input_index + input_pitches[0] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[0]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[0]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[1]);
    }`;return Object.assign(Object.assign({},st),{output:{dims:ht,type:ut[0].type,textureType:it.TextureType.unpacked},shaderSource:xt,variables:[{name:"scales",type:"int",arrayLength:dt.scales.length,data:dt.scales.map(wt=>Math.ceil(wt))}]})};_.validateInputs=(ct,ut)=>{if(!ct||ut.opset<9&&ct.length!==1||ut.opset>=9&&ut.opset<11&&ct.length!==2||ut.opset>=11&&ct.length<2)throw new Error("invalid inputs.");if(ut.scales.length>0&&ct[0].dims.length!==ut.scales.length)throw new Error("Invalid input shape.");if(ct[0].type==="string")throw new Error("Invalid input tensor types.")},_.scalesValidation=(ct,ut,dt)=>{if(dt){for(const ot of ct)if(ot<=0)throw new Error("Scale value should be greater than 0.")}else for(const ot of ct)if(ot<1)throw new Error("Scale value should be greater than or equal to 1.");if(!(ut!=="linear"&&ut!=="cubic"||ct.length===2||ct.length===4&&ct[0]===1&&ct[1]===1))throw new Error(`'Linear' mode and 'Cubic' mode only support 2-D inputs ('Bilinear', 'Bicubic')         or 4-D inputs with the corresponding outermost 2 scale values being 1         in the ${dt?"Resize":"Upsample"} opeartor.`)}},1958:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.ProgramManager=void 0;const tt=et(1670),rt=et(6231),it=et(8879),st=et(5060);_.ProgramManager=class{constructor(at,ct,ut){this.profiler=at,this.glContext=ct,this.textureLayoutStrategy=ut,this.repo=new Map,this.attributesBound=!1}getArtifact(at){return this.repo.get(at)}setArtifact(at,ct){this.repo.set(at,ct)}run(at,ct,ut){var dt;this.profiler.event("op",`ProgramManager.run ${(dt=at.programInfo.name)!==null&&dt!==void 0?dt:"unknown kernel"}`,()=>{var ot;const nt=this.glContext.gl,lt=at.program;nt.useProgram(lt);try{this.bindOutput(ut),this.attributesBound||this.bindAttributes(at.attribLocations),this.bindUniforms(at.uniformLocations,(ot=at.programInfo.variables)!==null&&ot!==void 0?ot:[],ct)}catch(ht){throw rt.Logger.error("ProgramManager",at.programInfo.shaderSource),ht}this.profiler.event("backend","GlContext.draw()",()=>{this.glContext.draw()})},this.glContext)}dispose(){this.vertexShader&&this.glContext.deleteShader(this.vertexShader),this.repo.forEach(at=>this.glContext.deleteProgram(at.program))}build(at,ct,ut){return this.profiler.event("backend","ProgramManager.build",()=>{const dt=new it.GlslPreprocessor(this.glContext,at,ct,ut),ot=dt.preprocess(),nt=this.compile(ot);return{programInfo:at,program:nt,uniformLocations:this.getUniformLocations(nt,dt.context.programInfo.inputNames,dt.context.programInfo.variables),attribLocations:this.getAttribLocations(nt)}})}compile(at){if(!this.vertexShader){rt.Logger.verbose("ProrgramManager","Compiling and caching Vertex shader for the first time");const dt=(0,st.getVertexShaderSource)(this.glContext.version);this.vertexShader=this.glContext.compileShader(dt,this.glContext.gl.VERTEX_SHADER)}tt.env.debug&&rt.Logger.verbose("ProrgramManager",`FragShader:
${at}
`);const ct=this.glContext.compileShader(at,this.glContext.gl.FRAGMENT_SHADER),ut=this.glContext.createProgram(this.vertexShader,ct);return this.glContext.deleteShader(ct),ut}bindOutput(at){const ct=at.width,ut=at.height;rt.Logger.verbose("ProrgramManager",`Binding output texture to Framebuffer: w/h=${ct}/${ut}, shape=${at.shape}, type=${at.tensor.type}`),this.glContext.attachFramebuffer(at.texture,ct,ut)}bindAttributes(at){const ct=at.position,ut=at.textureCoord;this.glContext.setVertexAttributes(ct,ut),this.attributesBound=!0}bindUniforms(at,ct,ut){var dt;const ot=this.glContext.gl;let nt=0;for(const{name:lt,type:ht,location:ft,arrayLength:gt}of at){const mt=(dt=ct.find(yt=>yt.name===lt))===null||dt===void 0?void 0:dt.data;if(ht!=="sampler2D"&&!mt)throw new Error(`variable '${lt}' does not have data defined in program info`);switch(ht){case"sampler2D":this.bindTexture(ut[nt],ft,nt),nt++;break;case"float":gt?ot.uniform1fv(ft,mt):ot.uniform1f(ft,mt);break;case"int":gt?ot.uniform1iv(ft,mt):ot.uniform1i(ft,mt);break;default:throw new Error(`Uniform not implemented: ${ht}`)}}}bindTexture(at,ct,ut){this.glContext.bindTextureToUniform(at.texture,ut,ct)}getAttribLocations(at){return{position:this.getAttribLocation(at,"position"),textureCoord:this.getAttribLocation(at,"textureCoord")}}getUniformLocations(at,ct,ut){const dt=[];if(ct)for(const ot of ct)dt.push({name:ot,type:"sampler2D",location:this.getUniformLocation(at,ot)});if(ut)for(const ot of ut)dt.push(Object.assign(Object.assign({},ot),{location:this.getUniformLocation(at,ot.name)}));return dt}getUniformLocation(at,ct){const ut=this.glContext.gl.getUniformLocation(at,ct);if(ut===null)throw new Error(`Uniform ${ct} not found.`);return ut}getAttribLocation(at,ct){return this.glContext.gl.getAttribLocation(at,ct)}}},6416:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.WebGLSessionHandler=void 0;const tt=et(6231),rt=et(1047),it=et(8316),st=et(1640),at=et(1958),ct=et(7859),ut=et(5702);_.WebGLSessionHandler=class{constructor(dt,ot){this.backend=dt,this.context=ot,this.layoutStrategy=new ct.PreferLogicalStrategy(dt.glContext.maxTextureSize),this.programManager=new at.ProgramManager(this.context.profiler,dt.glContext,this.layoutStrategy),this.textureManager=new ut.TextureManager(dt.glContext,this.layoutStrategy,this.context.profiler,{reuseTextures:dt.textureCacheMode==="full"}),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map,this.pack=dt.pack,this.pack2unpackMap=new Map,this.unpack2packMap=new Map}createInferenceHandler(){return new it.WebGLInferenceHandler(this)}onGraphInitialized(dt){const ot=dt.getValues().filter(nt=>nt.from===-1&&nt.tensor).map(nt=>nt.tensor.dataId);this.initializers=new Set(ot)}isInitializer(dt){return!!this.initializers&&this.initializers.has(dt)}addInitializer(dt){this.initializers.add(dt)}getTextureData(dt,ot){return ot?this.packedTextureDataCache.get(dt):this.unpackedTextureDataCache.get(dt)}setTextureData(dt,ot,nt=!1){tt.Logger.verbose("WebGLSessionHandler","Storing Texture data in cache"),nt?this.packedTextureDataCache.set(dt,ot):this.unpackedTextureDataCache.set(dt,ot)}dispose(){this.programManager.dispose(),this.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(dt=>this.textureManager.releaseTexture(dt,!0)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(dt=>this.textureManager.releaseTexture(dt,!0)),this.unpackedTextureDataCache=new Map}resolve(dt,ot,nt){const lt=(0,rt.resolveOperator)(dt,ot,st.WEBGL_OP_RESOLVE_RULES);return{impl:lt.opImpl,context:lt.opInit?lt.opInit(dt,nt):dt}}}},7769:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.Uint8DataEncoder=_.RGBAFloatDataEncoder=_.RedFloat32DataEncoder=void 0;const tt=et(6231);_.RedFloat32DataEncoder=class{constructor(rt,it=1){if(it===1)this.internalFormat=rt.R32F,this.format=rt.RED,this.textureType=rt.FLOAT,this.channelSize=it;else{if(it!==4)throw new Error(`Invalid number of channels: ${it}`);this.internalFormat=rt.RGBA32F,this.format=rt.RGBA,this.textureType=rt.FLOAT,this.channelSize=it}}encode(rt,it){let st,at;return rt.constructor!==Float32Array&&(tt.Logger.warning("Encoder","data was not of type Float32; creating new Float32Array"),at=new Float32Array(rt)),it*this.channelSize>rt.length?(tt.Logger.warning("Encoder","Source data too small. Allocating larger array"),at=rt,st=this.allocate(it*this.channelSize),at.forEach((ct,ut)=>st[ut]=ct)):(at=rt,st=at),st}allocate(rt){return new Float32Array(4*rt)}decode(rt,it){return this.channelSize===1?rt.filter((st,at)=>at%4==0).subarray(0,it):rt.subarray(0,it)}},_.RGBAFloatDataEncoder=class{constructor(rt,it=1,st){if(it!==1&&it!==4)throw new Error(`Invalid number of channels: ${it}`);this.internalFormat=rt.RGBA,this.format=rt.RGBA,this.channelSize=it,this.textureType=st||rt.FLOAT}encode(rt,it){let st=rt;return this.channelSize===1&&(tt.Logger.verbose("Encoder","Exploding into a larger array"),st=this.allocate(it),rt.forEach((at,ct)=>st[4*ct]=at)),st}allocate(rt){return new Float32Array(4*rt)}decode(rt,it){return this.channelSize===1?rt.filter((st,at)=>at%4==0).subarray(0,it):rt.subarray(0,it)}},_.Uint8DataEncoder=class{constructor(rt,it=1){if(this.channelSize=4,it===1)this.internalFormat=rt.ALPHA,this.format=rt.ALPHA,this.textureType=rt.UNSIGNED_BYTE,this.channelSize=it;else{if(it!==4)throw new Error(`Invalid number of channels: ${it}`);this.internalFormat=rt.RGBA,this.format=rt.RGBA,this.textureType=rt.UNSIGNED_BYTE,this.channelSize=it}}encode(rt,it){return new Uint8Array(rt.buffer,rt.byteOffset,rt.byteLength)}allocate(rt){return new Uint8Array(rt*this.channelSize)}decode(rt,it){if(rt instanceof Uint8Array)return rt.subarray(0,it);throw new Error(`Invalid array type: ${rt.constructor}`)}}},7859:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.getBatchDim=_.sizeToSquarishShape=_.getRowsCols=_.sizeFromShape=_.isInt=_.parseAxisParam=_.squeezeShape=_.PreferLogicalStrategy=_.AlwaysKeepOriginalSizeStrategy=void 0;const tt=et(6231),rt=et(2517);function it(dt,ot){const nt=[],lt=[],ht=ot!=null&&Array.isArray(ot)&&ot.length===0,ft=ot==null||ht?null:st(ot,dt).sort();let gt=0;for(let mt=0;mt<dt.length;++mt){if(ft!=null){if(ft[gt]===mt&&dt[mt]!==1)throw new Error(`Can't squeeze axis ${mt} since its dim '${dt[mt]}' is not 1`);(ft[gt]==null||ft[gt]>mt)&&dt[mt]===1&&(nt.push(dt[mt]),lt.push(mt)),ft[gt]<=mt&&gt++}dt[mt]!==1&&(nt.push(dt[mt]),lt.push(mt))}return{newShape:nt,keptDims:lt}}function st(dt,ot){const nt=ot.length;return dt=dt==null?ot.map((lt,ht)=>ht):[].concat(dt),(0,rt.assert)(dt.every(lt=>lt>=-nt&&lt<nt),()=>`All values in axis param must be in range [-${nt}, ${nt}) but got axis ${dt}`),(0,rt.assert)(dt.every(at),()=>`All values in axis param must be integers but got axis ${dt}`),dt.map(lt=>lt<0?nt+lt:lt)}function at(dt){return dt%1==0}function ct(dt){if(dt.length===0)return 1;let ot=dt[0];for(let nt=1;nt<dt.length;nt++)ot*=dt[nt];return ot}function ut(dt){const ot=Math.ceil(Math.sqrt(dt));return[ot,Math.ceil(dt/ot)]}_.AlwaysKeepOriginalSizeStrategy=class{constructor(dt){this.maxTextureSize=dt}computeTextureWH(dt,ot){if(dt.length===0)return[1,1];const nt=this.maxTextureSize;if(ot&&ot.breakAxis!==void 0){const ft=ot.breakAxis>=dt.length?1:dt.slice(ot.breakAxis).reduce((mt,yt)=>mt*yt),gt=ot.breakAxis<=0?1:dt.slice(0,ot.breakAxis).reduce((mt,yt)=>mt*yt);if(!(ft>nt||gt>nt))return[ft,gt];tt.Logger.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${dt}, breakAxis:${ot.breakAxis}`)}const lt=dt.reduce((ft,gt)=>ft*gt);let ht=Math.floor(Math.sqrt(lt));for(;ht<nt&&ht<lt&&lt%ht!=0;ht++);if(ht>=nt||lt%ht!=0)throw new Error(`The given dimensions are outside this GPU's boundaries: ${dt}`);return[ht,lt/ht]}},_.PreferLogicalStrategy=class{constructor(dt){this.maxTextureSize=dt}computeTextureWH(dt,ot){const nt=this.computeTexture(dt,ot);return ot&&ot.isPacked&&(nt[0]/=2,nt[1]/=2),ot&&ot.reverseWH?[nt[1],nt[0]]:nt}computeTexture(dt,ot){const nt=ot&&ot.isPacked;if(dt.length===0)return nt?[2,2]:[1,1];let lt=this.maxTextureSize;if(ot&&ot.breakAxis!==void 0){const gt=ot.breakAxis>=dt.length?1:dt.slice(ot.breakAxis).reduce((yt,bt)=>yt*bt),mt=ot.breakAxis<=0?1:dt.slice(0,ot.breakAxis).reduce((yt,bt)=>yt*bt);if(!(gt>lt||mt>lt))return[gt,mt];tt.Logger.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${dt}, breakAxis:${ot.breakAxis}`)}let ht=dt.slice(0);nt&&(lt*=2,ht=ht.map((gt,mt)=>mt>=ht.length-2?ht[mt]%2==0?ht[mt]:ht[mt]+1:ht[mt]),ht.length===1&&(ht=[2,ht[0]])),ht.length!==2&&(ht=it(ht).newShape);const ft=ct(ht);return ht.length<=1&&ft<=lt?[1,ft]:ht.length===2&&ht[0]<=lt&&ht[1]<=lt?ht:ht.length===3&&ht[0]*ht[1]<=lt&&ht[2]<=lt?[ht[0]*ht[1],ht[2]]:ht.length===3&&ht[0]<=lt&&ht[1]*ht[2]<=lt?[ht[0],ht[1]*ht[2]]:ht.length===4&&ht[0]*ht[1]*ht[2]<=lt&&ht[3]<=lt?[ht[0]*ht[1]*ht[2],ht[3]]:ht.length===4&&ht[0]<=lt&&ht[1]*ht[2]*ht[3]<=lt?[ht[0],ht[1]*ht[2]*ht[3]]:nt?ut(ft/4).map(gt=>2*gt):ut(ft)}},_.squeezeShape=it,_.parseAxisParam=st,_.isInt=at,_.sizeFromShape=ct,_.getRowsCols=function(dt){if(dt.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[dt.length>1?dt[dt.length-2]:1,dt[dt.length-1]]},_.sizeToSquarishShape=ut,_.getBatchDim=function(dt,ot=2){return ct(dt.slice(0,dt.length-ot))}},4057:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.createTextureLayoutFromShape=_.calculateTextureWidthAndHeight=_.createTextureLayoutFromTextureType=void 0;const tt=et(2517),rt=et(2039);_.createTextureLayoutFromTextureType=(it,st,at)=>{const ct=at===rt.TextureType.unpacked||at===rt.TextureType.unpackedReversed?1:4,ut=at===rt.TextureType.packed,dt=at===rt.TextureType.unpackedReversed||at===rt.TextureType.packed,ot=at===rt.TextureType.packedLastDimension?st.length-1:void 0,nt=at===rt.TextureType.packedLastDimension?st.map((lt,ht)=>ht===st.length-1?4*lt:lt):void 0;return(0,_.createTextureLayoutFromShape)(it,st,ct,nt,{isPacked:ut,reverseWH:dt,breakAxis:ot})},_.calculateTextureWidthAndHeight=(it,st,at)=>{const ct=(0,_.createTextureLayoutFromTextureType)(it,st,at);return[ct.width,ct.height]},_.createTextureLayoutFromShape=(it,st,at=1,ct,ut)=>{const dt=!(!ut||!ut.isPacked),[ot,nt]=it.computeTextureWH(dt&&ct||st,ut),lt=st.length;let ht=st.slice(0);if(lt===0&&(ht=[1]),at===1)ct=st;else if(dt){if(at!==4)throw new Error("a packed texture must be 4-channel");ct=st,lt>0&&(ht[lt-1]=Math.ceil(ht[lt-1]/2)),lt>1&&(ht[lt-2]=Math.ceil(ht[lt-2]/2))}else if(!ct)throw new Error("Unpacked shape is needed when using channels > 1");return{width:ot,height:nt,channels:at,isPacked:dt,shape:ht,strides:tt.ShapeUtil.computeStrides(ht),unpackedShape:ct,reversedWH:ut&&ut.reverseWH}}},5702:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.TextureManager=void 0;const tt=et(6231);_.TextureManager=class{constructor(rt,it,st,at){this.glContext=rt,this.layoutStrategy=it,this.profiler=st,this.config=at,this.pendingRead=new Map,at.reuseTextures&&(this.inUseTextures=new Map,this.idleTextures=new Map,this.textureLookup=new Map)}createTextureFromLayout(rt,it,st,at){const ct=this.toEncoderType(rt),ut=this.glContext.getEncoder(ct,it.channels||1,at);if(it.isPacked&&at===1)throw new Error("not implemented");const dt=it.width,ot=it.height;let nt,lt;if(this.config.reuseTextures){nt=`${dt}x${ot}_${ut.format}_${ut.internalFormat}_${ut.textureType}`,lt=this.inUseTextures.get(nt),lt||(lt=[],this.inUseTextures.set(nt,lt));const ft=this.idleTextures.get(nt);if(ft&&ft.length>0){const gt=ft.pop();return lt.push(gt),at===1&&this.glContext.updateTexture(gt,dt,ot,ut,this.toTextureData(rt,st)),gt}}tt.Logger.verbose("TextureManager",`Creating new texture of size ${it.width}x${it.height}`);const ht=this.glContext.allocateTexture(dt,ot,ut,this.toTextureData(rt,st));return this.config.reuseTextures&&(lt.push(ht),this.textureLookup.set(ht,nt)),ht}readTexture(rt,it,st){return st||(st=1),this.profiler.event("backend","TextureManager.readTexture",()=>{const at=rt.shape.reduce((ut,dt)=>ut*dt)*st,ct=this.glContext.readTexture(rt.texture,rt.width,rt.height,at,this.toEncoderType(it),st);return this.toTensorData(it,ct)})}async readTextureAsync(rt,it,st){const at=rt.tensor.dataId;if(st||(st=1),this.pendingRead.has(at)){const ct=this.pendingRead.get(at);return new Promise(ut=>ct==null?void 0:ct.push(ut))}return this.profiler.event("backend","TextureManager.readTextureAsync",async()=>{this.pendingRead.set(at,[]);const ct=rt.shape.reduce((nt,lt)=>nt*lt)*st;await this.glContext.createAndWaitForFence();const ut=this.glContext.readTexture(rt.texture,rt.width,rt.height,ct,this.toEncoderType(it),st),dt=this.toTensorData(it,ut),ot=this.pendingRead.get(at);return this.pendingRead.delete(at),ot==null||ot.forEach(nt=>nt(dt)),dt})}readUint8TextureAsFloat(rt){return this.profiler.event("backend","TextureManager.readUint8TextureAsFloat",()=>{const it=rt.shape.reduce((at,ct)=>at*ct),st=this.glContext.readTexture(rt.texture,rt.width,rt.height,4*it,"byte",4);return new Float32Array(st.buffer,st.byteOffset,it)})}releaseTexture(rt,it){let st;if(this.config.reuseTextures&&(st=this.textureLookup.get(rt.texture),st)){it&&this.textureLookup.delete(st);const at=this.inUseTextures.get(st);if(at){const ct=at.indexOf(rt.texture);if(ct!==-1){at.splice(ct,1);let ut=this.idleTextures.get(st);ut||(ut=[],this.idleTextures.set(st,ut)),ut.push(rt.texture)}}}st&&!it||(tt.Logger.verbose("TextureManager",`Deleting texture of size ${rt.width}x${rt.height}`),this.glContext.deleteTexture(rt.texture))}toTensorData(rt,it){switch(rt){case"int16":return it instanceof Int16Array?it:Int16Array.from(it);case"int32":return it instanceof Int32Array?it:Int32Array.from(it);case"int8":return it instanceof Int8Array?it:Int8Array.from(it);case"uint16":return it instanceof Uint16Array?it:Uint16Array.from(it);case"uint32":return it instanceof Uint32Array?it:Uint32Array.from(it);case"uint8":case"bool":return it instanceof Uint8Array?it:Uint8Array.from(it);case"float32":return it instanceof Float32Array?it:Float32Array.from(it);case"float64":return it instanceof Float64Array?it:Float64Array.from(it);default:throw new Error(`TensorData type ${rt} is not supported`)}}toTextureData(rt,it){if(it)return it instanceof Float32Array?it:new Float32Array(it)}toEncoderType(rt){return"float"}clearActiveTextures(){this.glContext.clearActiveTextures()}}},2039:(_e,_)=>{var et;Object.defineProperty(_,"__esModule",{value:!0}),_.TextureType=void 0,(et=_.TextureType||(_.TextureType={}))[et.unpacked=0]="unpacked",et[et.unpackedReversed=1]="unpackedReversed",et[et.packed=2]="packed",et[et.downloadUint8AsFloat=3]="downloadUint8AsFloat",et[et.packedLastDimension=4]="packedLastDimension"},9390:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.getGlChannels=_.getCoordsDataType=_.getSqueezedParams=_.squeezeInputShape=_.generateShaderFuncNameFromInputSamplerNameAtOutCoords=_.generateShaderFuncNameFromInputSamplerName=_.repeatedTry=_.getPackedShape=void 0;const tt=et(2517);_.getPackedShape=function(rt){const it=rt.length;return rt.slice(0,it-1).concat(rt[it-1]/4)},_.repeatedTry=async function(rt,it=at=>0,st){return new Promise((at,ct)=>{let ut=0;const dt=()=>{if(rt())return void at();ut++;const ot=it(ut);st!=null&&ut>=st?ct():setTimeout(dt,ot)};dt()})},_.generateShaderFuncNameFromInputSamplerName=function(rt){return(0,tt.assert)(rt!==void 0&&rt.length!==0,()=>"empty string found for sampler name"),"get"+rt.charAt(0).toUpperCase()+rt.slice(1)},_.generateShaderFuncNameFromInputSamplerNameAtOutCoords=function(rt){return(0,tt.assert)(rt!==void 0&&rt.length!==0,()=>"empty string found for sampler name"),"get"+rt.charAt(0).toUpperCase()+rt.slice(1)+"AtOutCoords"},_.squeezeInputShape=function(rt,it){let st=JSON.parse(JSON.stringify(rt));return st=it,st},_.getSqueezedParams=function(rt,it){return it.map(st=>rt[st]).join(", ")},_.getCoordsDataType=function(rt){if(rt<=1)return"int";if(rt===2)return"ivec2";if(rt===3)return"ivec3";if(rt===4)return"ivec4";if(rt===5)return"ivec5";if(rt===6)return"ivec6";throw Error(`GPU for rank ${rt} is not yet supported`)},_.getGlChannels=function(rt=6){return["x","y","z","w","u","v"].slice(0,rt)}},7305:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.createNewWebGLContext=_.createWebGLContext=void 0;const tt=et(6231),rt=et(1713),it={};function st(at){const ct=function(){if(typeof document>"u"){if(typeof OffscreenCanvas>"u")throw new TypeError("failed to create canvas: OffscreenCanvas is not supported");return new OffscreenCanvas(1,1)}const ot=document.createElement("canvas");return ot.width=1,ot.height=1,ot}();let ut;const dt={alpha:!1,depth:!1,antialias:!1,stencil:!1,preserveDrawingBuffer:!1,premultipliedAlpha:!1,failIfMajorPerformanceCaveat:!1};if((!at||at==="webgl2")&&(ut=ct.getContext("webgl2",dt),ut))try{return new rt.WebGLContext(ut,2)}catch(ot){tt.Logger.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl2'. Error: ${ot}`)}if((!at||at==="webgl")&&(ut=ct.getContext("webgl",dt)||ct.getContext("experimental-webgl",dt),ut))try{return new rt.WebGLContext(ut,1)}catch(ot){tt.Logger.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl' or 'experimental-webgl'. Error: ${ot}`)}throw new Error("WebGL is not supported")}_.createWebGLContext=function at(ct){let ut;ct&&ct!=="webgl2"||!("webgl2"in it)?ct&&ct!=="webgl"||!("webgl"in it)||(ut=it.webgl):ut=it.webgl2,ut=ut||st(ct),ct=ct||ut.version===1?"webgl":"webgl2";const dt=ut.gl;return it[ct]=ut,dt.isContextLost()?(delete it[ct],at(ct)):(dt.disable(dt.DEPTH_TEST),dt.disable(dt.STENCIL_TEST),dt.disable(dt.BLEND),dt.disable(dt.DITHER),dt.disable(dt.POLYGON_OFFSET_FILL),dt.disable(dt.SAMPLE_COVERAGE),dt.enable(dt.SCISSOR_TEST),dt.enable(dt.CULL_FACE),dt.cullFace(dt.BACK),ut)},_.createNewWebGLContext=st},1713:function(_e,_,et){var tt=this&&this.__createBinding||(Object.create?function(dt,ot,nt,lt){lt===void 0&&(lt=nt);var ht=Object.getOwnPropertyDescriptor(ot,nt);ht&&!("get"in ht?!ot.__esModule:ht.writable||ht.configurable)||(ht={enumerable:!0,get:function(){return ot[nt]}}),Object.defineProperty(dt,lt,ht)}:function(dt,ot,nt,lt){lt===void 0&&(lt=nt),dt[lt]=ot[nt]}),rt=this&&this.__setModuleDefault||(Object.create?function(dt,ot){Object.defineProperty(dt,"default",{enumerable:!0,value:ot})}:function(dt,ot){dt.default=ot}),it=this&&this.__importStar||function(dt){if(dt&&dt.__esModule)return dt;var ot={};if(dt!=null)for(var nt in dt)nt!=="default"&&Object.prototype.hasOwnProperty.call(dt,nt)&&tt(ot,dt,nt);return rt(ot,dt),ot};Object.defineProperty(_,"__esModule",{value:!0}),_.WebGLContext=_.linearSearchLastTrue=void 0;const st=et(1670),at=it(et(7769)),ct=et(9390);function ut(dt){let ot=0;for(;ot<dt.length&&dt[ot]();++ot);return ot-1}_.linearSearchLastTrue=ut,_.WebGLContext=class{constructor(dt,ot){this.frameBufferBound=!1,this.itemsToPoll=[],this.gl=dt,this.version=ot,this.getExtensions(),this.vertexbuffer=this.createVertexbuffer(),this.framebuffer=this.createFramebuffer(),this.queryVitalParameters()}allocateTexture(dt,ot,nt,lt){const ht=this.gl,ft=ht.createTexture();ht.bindTexture(ht.TEXTURE_2D,ft),ht.texParameteri(ht.TEXTURE_2D,ht.TEXTURE_MIN_FILTER,ht.NEAREST),ht.texParameteri(ht.TEXTURE_2D,ht.TEXTURE_MAG_FILTER,ht.NEAREST),ht.texParameteri(ht.TEXTURE_2D,ht.TEXTURE_WRAP_S,ht.CLAMP_TO_EDGE),ht.texParameteri(ht.TEXTURE_2D,ht.TEXTURE_WRAP_T,ht.CLAMP_TO_EDGE);const gt=lt?nt.encode(lt,dt*ot):null;return ht.texImage2D(ht.TEXTURE_2D,0,nt.internalFormat,dt,ot,0,nt.format,nt.textureType,gt),this.checkError(),ft}updateTexture(dt,ot,nt,lt,ht){const ft=this.gl;ft.bindTexture(ft.TEXTURE_2D,dt);const gt=lt.encode(ht,ot*nt);ft.texSubImage2D(ft.TEXTURE_2D,0,0,0,ot,nt,lt.format,lt.textureType,gt),this.checkError()}attachFramebuffer(dt,ot,nt){const lt=this.gl;lt.bindTexture(lt.TEXTURE_2D,dt),lt.bindFramebuffer(lt.FRAMEBUFFER,this.framebuffer),lt.framebufferTexture2D(lt.FRAMEBUFFER,lt.COLOR_ATTACHMENT0,lt.TEXTURE_2D,dt,0),this.checkError(),lt.viewport(0,0,ot,nt),lt.scissor(0,0,ot,nt)}readTexture(dt,ot,nt,lt,ht,ft){const gt=this.gl;ft||(ft=1),this.frameBufferBound||this.attachFramebuffer(dt,ot,nt);const mt=this.getEncoder(ht,ft),yt=mt.allocate(ot*nt);return gt.bindTexture(gt.TEXTURE_2D,dt),gt.framebufferTexture2D(gt.FRAMEBUFFER,gt.COLOR_ATTACHMENT0,gt.TEXTURE_2D,dt,0),gt.readPixels(0,0,ot,nt,gt.RGBA,mt.textureType,yt),this.checkError(),mt.decode(yt,lt)}isFramebufferReady(){return!0}getActiveTexture(){const dt=this.gl;return"TEXTURE"+(dt.getParameter(this.gl.ACTIVE_TEXTURE)-dt.TEXTURE0)}getTextureBinding(){return this.gl.getParameter(this.gl.TEXTURE_BINDING_2D)}getFramebufferBinding(){return this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING)}setVertexAttributes(dt,ot){const nt=this.gl;nt.vertexAttribPointer(dt,3,nt.FLOAT,!1,20,0),nt.enableVertexAttribArray(dt),ot!==-1&&(nt.vertexAttribPointer(ot,2,nt.FLOAT,!1,20,12),nt.enableVertexAttribArray(ot)),this.checkError()}createProgram(dt,ot){const nt=this.gl,lt=nt.createProgram();return nt.attachShader(lt,dt),nt.attachShader(lt,ot),nt.linkProgram(lt),lt}compileShader(dt,ot){const nt=this.gl,lt=nt.createShader(ot);if(!lt)throw new Error(`createShader() returned null with type ${ot}`);if(nt.shaderSource(lt,dt),nt.compileShader(lt),nt.getShaderParameter(lt,nt.COMPILE_STATUS)===!1)throw new Error(`Failed to compile shader: ${nt.getShaderInfoLog(lt)}
Shader source:
${dt}`);return lt}deleteShader(dt){this.gl.deleteShader(dt)}bindTextureToUniform(dt,ot,nt){const lt=this.gl;lt.activeTexture(lt.TEXTURE0+ot),this.checkError(),lt.bindTexture(lt.TEXTURE_2D,dt),this.checkError(),lt.uniform1i(nt,ot),this.checkError()}draw(){this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.checkError()}checkError(){if(st.env.debug){const dt=this.gl,ot=dt.getError();let nt="";switch(ot){case dt.NO_ERROR:return;case dt.INVALID_ENUM:nt="INVALID_ENUM";break;case dt.INVALID_VALUE:nt="INVALID_VALUE";break;case dt.INVALID_OPERATION:nt="INVALID_OPERATION";break;case dt.INVALID_FRAMEBUFFER_OPERATION:nt="INVALID_FRAMEBUFFER_OPERATION";break;case dt.OUT_OF_MEMORY:nt="OUT_OF_MEMORY";break;case dt.CONTEXT_LOST_WEBGL:nt="CONTEXT_LOST_WEBGL";break;default:nt=`Unknown WebGL Error: ${ot.toString(16)}`}throw new Error(nt)}}deleteTexture(dt){this.gl.deleteTexture(dt)}deleteProgram(dt){this.gl.deleteProgram(dt)}getEncoder(dt,ot,nt=0){if(this.version===2)return new at.RedFloat32DataEncoder(this.gl,ot);switch(dt){case"float":return nt===1||this.isRenderFloat32Supported?new at.RGBAFloatDataEncoder(this.gl,ot):new at.RGBAFloatDataEncoder(this.gl,ot,this.textureHalfFloatExtension.HALF_FLOAT_OES);case"int":throw new Error("not implemented");case"byte":return new at.Uint8DataEncoder(this.gl,ot);default:throw new Error(`Invalid dataType: ${dt}`)}}clearActiveTextures(){const dt=this.gl;for(let ot=0;ot<this.maxTextureImageUnits;++ot)dt.activeTexture(dt.TEXTURE0+ot),dt.bindTexture(dt.TEXTURE_2D,null)}dispose(){if(this.disposed)return;const dt=this.gl;dt.bindFramebuffer(dt.FRAMEBUFFER,null),dt.deleteFramebuffer(this.framebuffer),dt.bindBuffer(dt.ARRAY_BUFFER,null),dt.deleteBuffer(this.vertexbuffer),dt.bindBuffer(dt.ELEMENT_ARRAY_BUFFER,null),dt.finish(),this.disposed=!0}createDefaultGeometry(){return new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0])}createVertexbuffer(){const dt=this.gl,ot=dt.createBuffer();if(!ot)throw new Error("createBuffer() returned null");const nt=this.createDefaultGeometry();return dt.bindBuffer(dt.ARRAY_BUFFER,ot),dt.bufferData(dt.ARRAY_BUFFER,nt,dt.STATIC_DRAW),this.checkError(),ot}createFramebuffer(){const dt=this.gl.createFramebuffer();if(!dt)throw new Error("createFramebuffer returned null");return dt}queryVitalParameters(){const dt=this.gl;if(this.isFloatTextureAttachableToFrameBuffer=this.checkFloatTextureAttachableToFrameBuffer(),this.isRenderFloat32Supported=this.checkRenderFloat32(),this.isFloat32DownloadSupported=this.checkFloat32Download(),this.version===1&&!this.textureHalfFloatExtension&&!this.isRenderFloat32Supported)throw new Error("both float32 and float16 TextureType are not supported");this.isBlendSupported=!this.isRenderFloat32Supported||this.checkFloat32Blend(),this.maxTextureSize=dt.getParameter(dt.MAX_TEXTURE_SIZE),this.maxTextureImageUnits=dt.getParameter(dt.MAX_TEXTURE_IMAGE_UNITS),this.version}getExtensions(){this.version===2?(this.colorBufferFloatExtension=this.gl.getExtension("EXT_color_buffer_float"),this.disjointTimerQueryWebgl2Extension=this.gl.getExtension("EXT_disjoint_timer_query_webgl2")):(this.textureFloatExtension=this.gl.getExtension("OES_texture_float"),this.textureHalfFloatExtension=this.gl.getExtension("OES_texture_half_float"))}checkFloatTextureAttachableToFrameBuffer(){const dt=this.gl,ot=dt.createTexture();dt.bindTexture(dt.TEXTURE_2D,ot);const nt=this.version===2?dt.RGBA32F:dt.RGBA;dt.texImage2D(dt.TEXTURE_2D,0,nt,1,1,0,dt.RGBA,dt.FLOAT,null);const lt=dt.createFramebuffer();dt.bindFramebuffer(dt.FRAMEBUFFER,lt),dt.framebufferTexture2D(dt.FRAMEBUFFER,dt.COLOR_ATTACHMENT0,dt.TEXTURE_2D,ot,0);const ht=dt.checkFramebufferStatus(dt.FRAMEBUFFER)===dt.FRAMEBUFFER_COMPLETE;return dt.bindTexture(dt.TEXTURE_2D,null),dt.bindFramebuffer(dt.FRAMEBUFFER,null),dt.deleteTexture(ot),dt.deleteFramebuffer(lt),ht}checkRenderFloat32(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension)return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Download(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension||!this.gl.getExtension("WEBGL_color_buffer_float"))return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Blend(){const dt=this.gl;let ot,nt,lt,ht,ft;try{ot=dt.createTexture(),nt=dt.createFramebuffer(),dt.bindTexture(dt.TEXTURE_2D,ot);const gt=this.version===2?dt.RGBA32F:dt.RGBA;return dt.texImage2D(dt.TEXTURE_2D,0,gt,1,1,0,dt.RGBA,dt.FLOAT,null),dt.bindFramebuffer(dt.FRAMEBUFFER,nt),dt.framebufferTexture2D(dt.FRAMEBUFFER,dt.COLOR_ATTACHMENT0,dt.TEXTURE_2D,ot,0),dt.enable(dt.BLEND),lt=dt.createShader(dt.VERTEX_SHADER),!!lt&&(dt.shaderSource(lt,"void main(){}"),dt.compileShader(lt),ht=dt.createShader(dt.FRAGMENT_SHADER),!!ht&&(dt.shaderSource(ht,"precision highp float;void main(){gl_FragColor=vec4(0.5);}"),dt.compileShader(ht),ft=dt.createProgram(),!!ft&&(dt.attachShader(ft,lt),dt.attachShader(ft,ht),dt.linkProgram(ft),dt.useProgram(ft),dt.drawArrays(dt.POINTS,0,1),dt.getError()===dt.NO_ERROR)))}finally{dt.disable(dt.BLEND),ft&&dt.deleteProgram(ft),lt&&dt.deleteShader(lt),ht&&dt.deleteShader(ht),nt&&(dt.bindFramebuffer(dt.FRAMEBUFFER,null),dt.deleteFramebuffer(nt)),ot&&(dt.bindTexture(dt.TEXTURE_2D,null),dt.deleteTexture(ot))}}beginTimer(){if(this.version===2&&this.disjointTimerQueryWebgl2Extension){const dt=this.gl,ot=this.disjointTimerQueryWebgl2Extension,nt=dt.createQuery();return dt.beginQuery(ot.TIME_ELAPSED_EXT,nt),nt}throw new Error("WebGL1 profiling currently not supported.")}endTimer(){if(this.version!==2||!this.disjointTimerQueryWebgl2Extension)throw new Error("WebGL1 profiling currently not supported");{const dt=this.gl,ot=this.disjointTimerQueryWebgl2Extension;dt.endQuery(ot.TIME_ELAPSED_EXT)}}isTimerResultAvailable(dt){let ot=!1,nt=!1;if(this.version!==2||!this.disjointTimerQueryWebgl2Extension)throw new Error("WebGL1 profiling currently not supported");{const lt=this.gl,ht=this.disjointTimerQueryWebgl2Extension;ot=lt.getQueryParameter(dt,lt.QUERY_RESULT_AVAILABLE),nt=lt.getParameter(ht.GPU_DISJOINT_EXT)}return ot&&!nt}getTimerResult(dt){let ot=0;if(this.version!==2)throw new Error("WebGL1 profiling currently not supported");{const nt=this.gl;ot=nt.getQueryParameter(dt,nt.QUERY_RESULT),nt.deleteQuery(dt)}return ot/1e6}async waitForQueryAndGetTime(dt){return await(0,ct.repeatedTry)(()=>this.isTimerResultAvailable(dt)),this.getTimerResult(dt)}async createAndWaitForFence(){const dt=this.createFence(this.gl);return this.pollFence(dt)}createFence(dt){let ot;const nt=dt,lt=nt.fenceSync(nt.SYNC_GPU_COMMANDS_COMPLETE,0);return dt.flush(),ot=lt===null?()=>!0:()=>{const ht=nt.clientWaitSync(lt,0,0);return ht===nt.ALREADY_SIGNALED||ht===nt.CONDITION_SATISFIED},{query:lt,isFencePassed:ot}}async pollFence(dt){return new Promise(ot=>{this.addItemToPoll(()=>dt.isFencePassed(),()=>ot())})}pollItems(){const dt=ut(this.itemsToPoll.map(ot=>ot.isDoneFn));for(let ot=0;ot<=dt;++ot){const{resolveFn:nt}=this.itemsToPoll[ot];nt()}this.itemsToPoll=this.itemsToPoll.slice(dt+1)}async addItemToPoll(dt,ot){this.itemsToPoll.push({isDoneFn:dt,resolveFn:ot}),this.itemsToPoll.length>1||await(0,ct.repeatedTry)(()=>(this.pollItems(),this.itemsToPoll.length===0))}}},1036:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.ExecutionPlan=void 0;const tt=et(6231);class rt{constructor(st,at){this.op=st,this.node=at}}_.ExecutionPlan=class{constructor(it,st,at){this.graph=it,this.profiler=at,this.initialize(st)}initialize(it){this.profiler.event("session","ExecutionPlan.initialize",()=>{const st=this.graph.getNodes();if(st.length!==it.length)throw new Error("The size of nodes and OPs do not match.");this._ops=it.map((at,ct)=>new rt(at,st[ct])),this.reset(),this._starter=[],this._ops.forEach((at,ct)=>{let ut=!0;for(const dt of at.node.inputs)if(!this._values[dt]&&this.graph.getInputIndices().indexOf(dt)===-1){ut=!1;break}ut&&this._starter.push(ct)})})}reset(){this._values=this.graph.getValues().map(it=>it.tensor)}async execute(it,st){return this.profiler.event("session","ExecutionPlan.execute",async()=>{this.reset();const at=it.createInferenceHandler(),ct=this.graph.getInputIndices();if(st.length!==ct.length)throw new Error(`number of input tensors don't match the number of inputs to the model: actual: ${st.length} expected: ${ct.length}`);st.forEach((ht,ft)=>{const gt=ct[ft];this._values[gt]=ht});const ut=this._starter.slice(0),dt=this.graph.getValues(),ot=this.graph.getNodes();let nt=0;for(;nt<ut.length;){const ht=ut[nt++],ft=this._ops[ht],gt=ft.node.inputs.map(_t=>this._values[_t]);if(gt.indexOf(void 0)!==-1)throw new Error(`unresolved input detected: op: ${ft.node}`);const mt=gt;tt.Logger.verbose("ExecPlan",`Runing op:${ft.node.name} (${mt.map((_t,vt)=>`'${ft.node.inputs[vt]}': ${_t.type}[${_t.dims.join(",")}]`).join(", ")})`);const yt=await this.profiler.event("node",ft.node.name,async()=>ft.op.impl(at,mt,ft.op.context));if(yt.length!==ft.node.outputs.length)throw new Error("the size of output does not match model definition.");yt.forEach((_t,vt)=>{const xt=ft.node.outputs[vt];if(this._values[xt])throw new Error(`output [${xt}] already has value: op:${ft.node.name}`);this._values[xt]=_t});const bt=new Set;yt.forEach((_t,vt)=>{const xt=ft.node.outputs[vt];for(const wt of dt[xt].to){const Tt=ot[wt];let St=!0;for(const Et of Tt.inputs)if(!this._values[Et]){St=!1;break}St&&bt.add(wt)}}),ut.push(...bt)}const lt=[];for(let ht=0;ht<this.graph.getOutputIndices().length;ht++){const ft=this.graph.getOutputIndices()[ht],gt=this._values[ft];if(gt===void 0)throw new Error(`required output [${ft}] does not have value`);ft===0?await gt.getData():gt.data,lt.push(gt)}return tt.Logger.verbose("ExecPlan","disposing of inferenceHandler"),at.dispose(),lt})}}},7070:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.Graph=void 0;const tt=et(1446),rt=et(7778),it=et(9395),st=et(9162),at=et(2517);var ct=it.onnxruntime.experimental.fbs;_.Graph={from:(nt,lt)=>new ot(nt,lt)};class ut{constructor(lt){this._from=void 0,this._to=[],this.tensor=void 0,this.type=void 0,lt&&(this.type=at.ProtoUtil.tensorValueTypeFromProto(lt.type.tensorType))}get from(){return this._from}get to(){return this._to}}class dt{constructor(lt,ht){lt instanceof tt.onnx.NodeProto?(this.name=lt.name,this.opType=lt.opType,this.attributes=new rt.Attribute(lt.attribute)):lt instanceof ct.Node&&(this.name=ht??lt.name(),this.opType=lt.opType(),this.attributes=new rt.Attribute(at.ProtoUtil.tensorAttributesFromORTFormat(lt))),this.inputs=[],this.outputs=[],this.executeNode=!0}}class ot{constructor(lt,ht){if(!lt)throw new TypeError("graph is empty");this.buildGraph(lt),this.transformGraph(ht),this.checkIsAcyclic()}getInputIndices(){return this._allInputIndices}getInputNames(){return this._allInputNames}getOutputIndices(){return this._allOutputIndices}getOutputNames(){return this._allOutputNames}getValues(){return this._allData}getNodes(){return this._nodes}buildGraph(lt){if(lt instanceof tt.onnx.GraphProto)this.buildGraphFromOnnxFormat(lt);else{if(!(lt instanceof ct.Graph))throw new TypeError("Graph type is not supported.");this.buildGraphFromOrtFormat(lt)}}buildGraphFromOnnxFormat(lt){const ht=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];const ft=new Map;if(!lt.input)throw new Error("missing information in graph: input");const gt=[];for(const mt of lt.input){if(ht.has(mt.name))throw new Error(`duplicated input name: ${mt.name}`);const yt=this._allData.push(new ut(mt))-1;ht.set(mt.name,yt),gt.push(mt.name)}if(!lt.initializer)throw new Error("missing information in graph: initializer");for(const mt of lt.initializer){let yt=ht.get(mt.name);if(yt===void 0){const bt=new ut;bt.type={shape:{dims:at.ProtoUtil.tensorDimsFromProto(mt.dims)},tensorType:at.ProtoUtil.tensorDataTypeFromProto(mt.dataType)},yt=this._allData.push(bt)-1,ht.set(mt.name,yt)}this._allData[yt]._from=-1,this._allData[yt].tensor=st.Tensor.fromProto(mt)}for(let mt=0;mt<this._allData.length;mt++)this._allData[mt].tensor||(this._allInputIndices.push(mt),this._allInputNames.push(gt[mt]));if(!lt.output)throw new Error("missing information in graph: output");for(const mt of lt.output){if(ht.has(mt.name))throw new Error(`duplicated output name: ${mt.name}`);const yt=this._allData.push(new ut(mt))-1;ht.set(mt.name,yt),this._allOutputIndices.push(yt),this._allOutputNames.push(mt.name)}if(!lt.node)throw new Error("missing information in graph: node");for(const mt of lt.node){if(!mt.name)for(let bt=0;;bt++){const _t=`unnamed_${mt.opType}_${bt}`;if(!ft.has(_t)){mt.name=_t;break}}if(ft.has(mt.name))throw new Error(`duplicated node name: ${mt.name}`);const yt=this._nodes.push(new dt(mt))-1;ft.set(mt.name,yt)}for(let mt=0;mt<this._nodes.length;mt++){const yt=this._nodes[mt],bt=lt.node[mt];if(!bt.output)throw new Error(`missing output for node: ${bt.name}`);for(const _t of bt.output){let vt=ht.get(_t);if(vt===void 0&&(vt=this._allData.push(new ut)-1,ht.set(_t,vt)),yt.outputs.push(vt),this._allData[vt]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${vt}`);if(this._allData[vt]._from=mt,bt.opType==="Constant"){if(!bt.attribute||bt.attribute.length!==1||!bt.attribute[0].t)throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(!bt.output||bt.output.length!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");yt.outputs.pop(),yt.executeNode=!1,this._allData[vt]._from=-1,this._allData[vt].tensor=st.Tensor.fromProto(bt.attribute[0].t)}}}for(let mt=0;mt<this._nodes.length;mt++){const yt=this._nodes[mt],bt=lt.node[mt];if(!bt.input)throw new Error(`missing input for node: ${bt.name}`);for(const _t of bt.input){const vt=ht.get(_t);if(vt===void 0){if(_t===""&&bt.input.length===3&&bt.opType==="Resize")continue;throw new Error(`unrecognized input '${_t}' for node: ${bt.name}`)}yt.inputs.push(vt),this._allData[vt]._to.push(mt)}}return!0}buildGraphFromOrtFormat(lt){var ht,ft,gt;const mt=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];const yt=new Map,bt=[];for(let _t=0;_t<lt.inputsLength();_t++){const vt=lt.inputs(_t);if(mt.has(vt))throw new Error(`duplicated input name: ${vt}`);for(let xt=0;xt<lt.nodeArgsLength();xt++)if(((ht=lt.nodeArgs(xt))===null||ht===void 0?void 0:ht.name())===vt){const wt=new ut;if(((gt=(ft=lt.nodeArgs(xt))===null||ft===void 0?void 0:ft.type())===null||gt===void 0?void 0:gt.valueType())!==ct.TypeInfoValue.tensor_type)throw new Error("Unexpected value type for the nodeArg.");const Tt=lt.nodeArgs(xt).type().value(new ct.TensorTypeAndShape),St=at.ProtoUtil.tensorDataTypeFromProto(Tt.elemType()),Et=Tt.shape(),Ot=[];for(let Pt=0;Pt<Et.dimLength();Pt++)Ot.push(at.LongUtil.longToNumber(Et.dim(Pt).value().dimValue()));wt.type={shape:{dims:Ot},tensorType:St};const Rt=this._allData.push(wt)-1;mt.set(vt,Rt),bt.push(vt)}}for(let _t=0;_t<lt.initializersLength();_t++){const vt=lt.initializers(_t);let xt=mt.get(vt.name());if(xt===void 0){const wt=new ut,Tt=at.ProtoUtil.tensorDimsFromORTFormat(vt),St=at.ProtoUtil.tensorDataTypeFromProto(vt.dataType());wt.type={shape:{dims:Tt},tensorType:St},xt=this._allData.push(wt)-1,mt.set(vt.name(),xt)}this._allData[xt]._from=-1,this._allData[xt].tensor=st.Tensor.fromOrtTensor(vt)}for(let _t=0;_t<this._allData.length;_t++)this._allData[_t].tensor||(this._allInputIndices.push(_t),this._allInputNames.push(bt[_t]));for(let _t=0;_t<lt.outputsLength();_t++){const vt=lt.outputs(_t);if(mt.has(vt))throw new Error(`duplicated output name: ${vt}`);const xt=this._allData.push(new ut)-1;mt.set(vt,xt),this._allOutputIndices.push(xt),this._allOutputNames.push(vt)}if(!lt.nodes)throw new Error("missing information in graph: node");for(let _t=0;_t<lt.nodesLength();_t++){const vt=lt.nodes(_t);let xt=vt.name();if(!xt)for(let Tt=0;xt=`unnamed_${vt.opType()}_${Tt}`,yt.has(xt);Tt++);if(yt.has(xt))throw new Error(`duplicated node name: ${xt}`);const wt=this._nodes.push(new dt(vt,xt))-1;yt.set(xt,wt)}for(let _t=0;_t<this._nodes.length;_t++){const vt=this._nodes[_t],xt=lt.nodes(_t);if(xt==null)throw new Error(`No node exists at index ${_t}`);if((xt==null?void 0:xt.outputsLength())===0)throw new Error(`missing output for node: ${xt.name}`);for(let wt=0;wt<(xt==null?void 0:xt.outputsLength());wt++){const Tt=xt==null?void 0:xt.outputs(wt);let St=mt.get(Tt);if(St===void 0&&(St=this._allData.push(new ut)-1,mt.set(Tt,St)),vt.outputs.push(St),this._allData[St]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${St}`);if(this._allData[St]._from=_t,xt.opType()==="Constant"){if(xt.attributesLength()!==1||!xt.attributes(0).t())throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(xt.outputsLength()!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");vt.outputs.pop(),vt.executeNode=!1,this._allData[St]._from=-1,this._allData[St].tensor=st.Tensor.fromOrtTensor(xt.attributes(0).t())}}}for(let _t=0;_t<this._nodes.length;_t++){const vt=this._nodes[_t],xt=lt.nodes(_t);if(xt.inputsLength()===0)throw new Error(`missing input for node: ${xt.name}`);for(let wt=0;wt<xt.inputsLength();wt++){const Tt=xt.inputs(wt),St=mt.get(Tt);if(St===void 0)throw new Error(`unrecognized input '${Tt}' for node: ${xt.name()}`);vt.inputs.push(St),this._allData[St]._to.push(_t)}}}checkIsAcyclic(){const lt=new Set;this._allInputIndices.forEach(gt=>{this._allData[gt]._to.forEach(mt=>{lt.add(mt)})});const ht=Array.from(lt),ft=new Array(this._nodes.length).fill("white");for(;ht.length>0;){const gt=ht.pop();ft[gt]==="gray"?ft[gt]="black":(ht.push(gt),ft[gt]="gray",this._nodes[gt].outputs.forEach(mt=>{const yt=this._allData[mt];if(yt.tensor!==void 0)throw new Error("node outputs should not be initialized");if(yt._from!==gt)throw new Error("from property of the Value object doesn't match index of Node being processed");yt._to.forEach(bt=>{if(ft[bt]==="gray")throw new Error("model graph is cyclic");ft[bt]==="white"&&ht.push(bt)})}))}}transformGraph(lt){this.removeAllIdentityNodes(),this.removeAllDropoutNodes(),this.fuseConvActivationNodes(),lt&&lt.transformGraph(this),this.finalizeGraph()}finalizeGraph(){let lt=0;for(let ht=0;ht<this._nodes.length;ht++)this._nodes[ht].executeNode?lt>0&&(this._nodes[ht].inputs.forEach(ft=>{const gt=this._allData[ft]._to.indexOf(ht+lt);gt!==-1&&(this._allData[ft]._to[gt]=ht)}),this._nodes[ht].outputs.forEach(ft=>{this._allData[ft]._from&&this._allData[ft]._from===ht+lt&&(this._allData[ft]._from=ht)})):(lt++,this._nodes[ht].outputs.forEach(ft=>{this._allData[ft]._from=-2}),this._nodes.splice(ht,1),ht--);lt=0;for(let ht=0;ht<this._allData.length;ht++)if(this._allData[ht].from!==-2||this._allOutputIndices.indexOf(ht+lt)!==-1){if(lt>0){let ft=-1;this._allData[ht].from!==void 0&&this._allData[ht].from!==-1?(ft=this._nodes[this._allData[ht].from].outputs.indexOf(ht+lt),ft!==-1&&(this._nodes[this._allData[ht].from].outputs[ft]=ht)):(ft=this._allInputIndices.indexOf(ht+lt),ft!==-1&&(this._allInputIndices[ft]=ht)),this._allData[ht].to.forEach(gt=>{ft=this._nodes[gt].inputs.indexOf(ht+lt),ft!==-1&&(this._nodes[gt].inputs[ft]=ht)}),this._allData[ht].to.length===0&&(ft=this._allOutputIndices.indexOf(ht+lt),ft!==-1&&(this._allOutputIndices[ft]=ht))}}else lt++,this._allData.splice(ht,1),ht--}deleteNode(lt){const ht=this._nodes[lt];if(ht.outputs.length>1){for(let _t=1;_t<ht.outputs.length;_t++)if(this._allData[ht.outputs[_t]].to.length>0)throw new Error("Node deletion with more than one output connected to other nodes is not supported. ")}ht.executeNode=!1;const ft=ht.inputs[0],gt=ht.outputs[0],mt=this._allData[gt].to,yt=this._allData[ft].to.indexOf(lt);if(yt===-1)throw new Error("The Value object doesn't have the current Node in it's 'to' property ");this._allData[ft].to.splice(yt,1),this._allData[gt]._to=[];const bt=this._allOutputIndices.indexOf(gt);if(bt!==-1&&(this._allOutputIndices[bt]=ft),mt&&mt.length>0)for(const _t of mt){const vt=this._nodes[_t].inputs.indexOf(gt);if(vt===-1)throw new Error("The Node object doesn't have the output Value in it's 'inputs' property ");this._nodes[_t].inputs[vt]=ft,this._allData[ft].to.push(_t)}}removeAllDropoutNodes(){let lt=0;for(const ht of this._nodes){if(ht.opType==="Dropout"){if(ht.inputs.length!==1)throw new Error("Dropout nodes should only contain one input. ");if(ht.outputs.length!==1&&ht.outputs.length!==2)throw new Error("Dropout nodes should contain either 1 or 2 output(s)");if(ht.outputs.length===2&&this._allData[ht.outputs[1]]._to.length!==0)throw new Error("Dropout nodes's second output should not be referenced by other nodes");this.deleteNode(lt)}lt++}}removeAllIdentityNodes(){let lt=0;for(const ht of this._nodes)ht.opType==="Identity"&&this.deleteNode(lt),lt++}isActivation(lt){switch(lt.opType){case"Relu":case"Sigmoid":case"Clip":return!0;default:return!1}}fuseConvActivationNodes(){for(const lt of this._nodes)if(lt.opType==="Conv"){const ht=this._allData[lt.outputs[0]]._to;if(ht.length===1&&this.isActivation(this._nodes[ht[0]])){const ft=this._nodes[ht[0]];if(ft.opType==="Clip")if(ft.inputs.length===1)try{lt.attributes.set("activation_params","floats",[ft.attributes.getFloat("min"),ft.attributes.getFloat("max")])}catch{lt.attributes.set("activation_params","floats",[at.MIN_CLIP,at.MAX_CLIP])}else{if(!(ft.inputs.length>=3&&this._allData[ft.inputs[1]].tensor!==void 0&&this._allData[ft.inputs[2]].tensor!==void 0))continue;lt.attributes.set("activation_params","floats",[this._allData[ft.inputs[1]].tensor.floatData[0],this._allData[ft.inputs[2]].tensor.floatData[0]])}lt.attributes.set("activation","string",ft.opType),this.deleteNode(ht[0])}}}}},6231:(_e,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.now=_.Profiler=_.Logger=void 0;const et={verbose:1e3,info:2e3,warning:4e3,error:5e3,fatal:6e3},tt={none:new class{log(dt,ot,nt){}},console:new class{log(dt,ot,nt){console.log(`${this.color(dt)} ${nt?"\x1B[35m"+nt+"\x1B[0m ":""}${ot}`)}color(dt){switch(dt){case"verbose":return"\x1B[34;40mv\x1B[0m";case"info":return"\x1B[32mi\x1B[0m";case"warning":return"\x1B[30;43mw\x1B[0m";case"error":return"\x1B[31;40me\x1B[0m";case"fatal":return"\x1B[101mf\x1B[0m";default:throw new Error(`unsupported severity: ${dt}`)}}}},rt={provider:"console",minimalSeverity:"warning",logDateTime:!0,logSourceLocation:!1};let it={"":rt};function st(dt,ot,nt,lt){if(ot===void 0)return ht=dt,{verbose:st.verbose.bind(null,ht),info:st.info.bind(null,ht),warning:st.warning.bind(null,ht),error:st.error.bind(null,ht),fatal:st.fatal.bind(null,ht)};if(nt===void 0)at(dt,ot);else if(typeof nt=="number"&&lt===void 0)at(dt,ot);else if(typeof nt=="string"&&lt===void 0)at(dt,nt,0,ot);else{if(typeof nt!="string"||typeof lt!="number")throw new TypeError("input is valid");at(dt,nt,0,ot)}var ht}function at(dt,ot,nt,lt){const ht=it[lt||""]||it[""];et[dt]<et[ht.minimalSeverity]||(ht.logDateTime&&(ot=`${new Date().toISOString()}|${ot}`),ht.logSourceLocation,tt[ht.provider].log(dt,ot,lt))}(function(dt){function ot(lt){it={},nt("",lt||{})}function nt(lt,ht){if(lt==="*")ot(ht);else{const ft=it[lt]||rt;it[lt]={provider:ht.provider||ft.provider,minimalSeverity:ht.minimalSeverity||ft.minimalSeverity,logDateTime:ht.logDateTime===void 0?ft.logDateTime:ht.logDateTime,logSourceLocation:ht.logSourceLocation===void 0?ft.logSourceLocation:ht.logSourceLocation}}}dt.verbose=function(lt,ht){dt("verbose",lt,ht)},dt.info=function(lt,ht){dt("info",lt,ht)},dt.warning=function(lt,ht){dt("warning",lt,ht)},dt.error=function(lt,ht){dt("error",lt,ht)},dt.fatal=function(lt,ht){dt("fatal",lt,ht)},dt.reset=ot,dt.set=nt,dt.setWithEnv=function(lt){const ht={};lt.logLevel&&(ht.minimalSeverity=lt.logLevel),nt("",ht)}})(st),_.Logger=st;class ct{constructor(ot,nt,lt,ht,ft,gt){this.category=ot,this.name=nt,this.startTime=lt,this.endCallback=ht,this.timer=ft,this.ctx=gt}end(){return this.endCallback(this)}async checkTimer(){if(this.ctx===void 0||this.timer===void 0)throw new Error("No webgl timer found");return this.ctx.endTimer(),this.ctx.waitForQueryAndGetTime(this.timer)}}class ut{constructor(ot,nt,lt,ht){this.category=ot,this.name=nt,this.startTime=lt,this.endTime=ht}}_.Profiler=class{static create(dt){return dt===void 0?new this:new this(dt.maxNumberEvents,dt.flushBatchSize,dt.flushIntervalInMilliseconds)}constructor(dt,ot,nt){this._started=!1,this._flushPointer=0,this._started=!1,this._maxNumberEvents=dt===void 0?1e4:dt,this._flushBatchSize=ot===void 0?10:ot,this._flushIntervalInMilliseconds=nt===void 0?5e3:nt}start(){this._started=!0,this._timingEvents=[],this._flushTime=(0,_.now)(),this._flushPointer=0}stop(){for(this._started=!1;this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer])}event(dt,ot,nt,lt){const ht=this._started?this.begin(dt,ot,lt):void 0;let ft=!1;const gt=nt();if(gt&&typeof gt.then=="function")return ft=!0,new Promise((mt,yt)=>{gt.then(async bt=>{ht&&await ht.end(),mt(bt)},async bt=>{ht&&await ht.end(),yt(bt)})});if(!ft&&ht){const mt=ht.end();if(mt&&typeof mt.then=="function")return new Promise((yt,bt)=>{mt.then(()=>{yt(gt)},_t=>{bt(_t)})})}return gt}begin(dt,ot,nt){if(!this._started)throw new Error("profiler is not started yet");if(nt===void 0){const lt=(0,_.now)();return this.flush(lt),new ct(dt,ot,lt,ht=>this.endSync(ht))}{const lt=nt.beginTimer();return new ct(dt,ot,0,async ht=>this.end(ht),lt,nt)}}async end(dt){const ot=await dt.checkTimer();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new ut(dt.category,dt.name,dt.startTime,ot)),this.flush(ot))}endSync(dt){const ot=(0,_.now)();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new ut(dt.category,dt.name,dt.startTime,ot)),this.flush(ot))}logOneEvent(dt){_.Logger.verbose(`Profiler.${dt.category}`,`${(dt.endTime-dt.startTime).toFixed(2)}ms on event '${dt.name}' at ${dt.endTime.toFixed(2)}`)}flush(dt){if(this._timingEvents.length-this._flushPointer>=this._flushBatchSize||dt-this._flushTime>=this._flushIntervalInMilliseconds){for(const ot=this._flushPointer;this._flushPointer<ot+this._flushBatchSize&&this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer]);this._flushTime=(0,_.now)()}}get started(){return this._started}},_.now=typeof performance<"u"&&performance.now?()=>performance.now():Date.now},2644:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.Model=void 0;const tt=et(5686),rt=et(1446),it=et(7070),st=et(9395),at=et(2517);var ct=st.onnxruntime.experimental.fbs;_.Model=class{constructor(){}load(ut,dt,ot){if(!ot)try{return void this.loadFromOnnxFormat(ut,dt)}catch(nt){if(ot!==void 0)throw nt}this.loadFromOrtFormat(ut,dt)}loadFromOnnxFormat(ut,dt){const ot=rt.onnx.ModelProto.decode(ut);if(at.LongUtil.longToNumber(ot.irVersion)<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=ot.opsetImport.map(nt=>({domain:nt.domain,version:at.LongUtil.longToNumber(nt.version)})),this._graph=it.Graph.from(ot.graph,dt)}loadFromOrtFormat(ut,dt){const ot=new tt.flatbuffers.ByteBuffer(ut),nt=ct.InferenceSession.getRootAsInferenceSession(ot).model();if(at.LongUtil.longToNumber(nt.irVersion())<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=[];for(let lt=0;lt<nt.opsetImportLength();lt++){const ht=nt.opsetImport(lt);this._opsets.push({domain:ht==null?void 0:ht.domain(),version:at.LongUtil.longToNumber(ht.version())})}this._graph=it.Graph.from(nt.graph(),dt)}get graph(){return this._graph}get opsets(){return this._opsets}}},782:(_e,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.FLOAT_TYPES=_.INT_TYPES=_.NUMBER_TYPES=void 0,_.NUMBER_TYPES=["float32","float64","int32","int16","int8","uint16","uint32","uint8"],_.INT_TYPES=["int32","int16","int8","uint16","uint32","uint8"],_.FLOAT_TYPES=["float32","float64"]},1047:(_e,_)=>{function et(tt,rt){if(rt.endsWith("+")){const it=Number.parseInt(rt.substring(0,rt.length-1),10);return!isNaN(it)&&it<=tt}if(rt.split("-").length===2){const it=rt.split("-"),st=Number.parseInt(it[0],10),at=Number.parseInt(it[1],10);return!isNaN(st)&&!isNaN(at)&&st<=tt&&tt<=at}return Number.parseInt(rt,10)===tt}Object.defineProperty(_,"__esModule",{value:!0}),_.resolveOperator=void 0,_.resolveOperator=function(tt,rt,it){for(const st of it){const at=st[0],ct=st[1],ut=st[2],dt=st[3],ot=st[4];if(tt.opType===at){for(const nt of rt)if((nt.domain===ct||nt.domain==="ai.onnx"&&ct==="")&&et(nt.version,ut))return{opImpl:dt,opInit:ot}}}throw new TypeError(`cannot resolve operator '${tt.opType}' with opsets: ${rt.map(st=>`${st.domain||"ai.onnx"} v${st.version}`).join(", ")}`)}},9395:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.onnxruntime=void 0;const tt=et(5686);var rt,it;rt=_.onnxruntime||(_.onnxruntime={}),function(st){(function(at){at[at.UNDEFINED=0]="UNDEFINED",at[at.FLOAT=1]="FLOAT",at[at.INT=2]="INT",at[at.STRING=3]="STRING",at[at.TENSOR=4]="TENSOR",at[at.GRAPH=5]="GRAPH",at[at.FLOATS=6]="FLOATS",at[at.INTS=7]="INTS",at[at.STRINGS=8]="STRINGS",at[at.TENSORS=9]="TENSORS",at[at.GRAPHS=10]="GRAPHS",at[at.SPARSE_TENSOR=11]="SPARSE_TENSOR",at[at.SPARSE_TENSORS=12]="SPARSE_TENSORS"})(st.AttributeType||(st.AttributeType={}))}((it=rt.experimental||(rt.experimental={})).fbs||(it.fbs={})),function(st){(function(at){(function(ct){(function(ut){ut[ut.UNKNOWN=0]="UNKNOWN",ut[ut.VALUE=1]="VALUE",ut[ut.PARAM=2]="PARAM"})(ct.DimensionValueType||(ct.DimensionValueType={}))})(at.fbs||(at.fbs={}))})(st.experimental||(st.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(st){(function(at){(function(ct){(function(ut){ut[ut.UNDEFINED=0]="UNDEFINED",ut[ut.FLOAT=1]="FLOAT",ut[ut.UINT8=2]="UINT8",ut[ut.INT8=3]="INT8",ut[ut.UINT16=4]="UINT16",ut[ut.INT16=5]="INT16",ut[ut.INT32=6]="INT32",ut[ut.INT64=7]="INT64",ut[ut.STRING=8]="STRING",ut[ut.BOOL=9]="BOOL",ut[ut.FLOAT16=10]="FLOAT16",ut[ut.DOUBLE=11]="DOUBLE",ut[ut.UINT32=12]="UINT32",ut[ut.UINT64=13]="UINT64",ut[ut.COMPLEX64=14]="COMPLEX64",ut[ut.COMPLEX128=15]="COMPLEX128",ut[ut.BFLOAT16=16]="BFLOAT16"})(ct.TensorDataType||(ct.TensorDataType={}))})(at.fbs||(at.fbs={}))})(st.experimental||(st.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(st){(function(at){(function(ct){(function(ut){ut[ut.Primitive=0]="Primitive",ut[ut.Fused=1]="Fused"})(ct.NodeType||(ct.NodeType={}))})(at.fbs||(at.fbs={}))})(st.experimental||(st.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(st){(function(at){(function(ct){(function(ut){ut[ut.NONE=0]="NONE",ut[ut.tensor_type=1]="tensor_type",ut[ut.sequence_type=2]="sequence_type",ut[ut.map_type=3]="map_type"})(ct.TypeInfoValue||(ct.TypeInfoValue={}))})(at.fbs||(at.fbs={}))})(st.experimental||(st.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(st){(function(at){(function(ct){class ut{constructor(){this.bb=null,this.bb_pos=0}__init(ot,nt){return this.bb_pos=ot,this.bb=nt,this}static getRootAsShape(ot,nt){return(nt||new ut).__init(ot.readInt32(ot.position())+ot.position(),ot)}static getSizePrefixedRootAsShape(ot,nt){return ot.setPosition(ot.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(nt||new ut).__init(ot.readInt32(ot.position())+ot.position(),ot)}dim(ot,nt){let lt=this.bb.__offset(this.bb_pos,4);return lt?(nt||new st.experimental.fbs.Dimension).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+lt)+4*ot),this.bb):null}dimLength(){let ot=this.bb.__offset(this.bb_pos,4);return ot?this.bb.__vector_len(this.bb_pos+ot):0}static startShape(ot){ot.startObject(1)}static addDim(ot,nt){ot.addFieldOffset(0,nt,0)}static createDimVector(ot,nt){ot.startVector(4,nt.length,4);for(let lt=nt.length-1;lt>=0;lt--)ot.addOffset(nt[lt]);return ot.endVector()}static startDimVector(ot,nt){ot.startVector(4,nt,4)}static endShape(ot){return ot.endObject()}static createShape(ot,nt){return ut.startShape(ot),ut.addDim(ot,nt),ut.endShape(ot)}}ct.Shape=ut})(at.fbs||(at.fbs={}))})(st.experimental||(st.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(st){(function(at){(function(ct){class ut{constructor(){this.bb=null,this.bb_pos=0}__init(ot,nt){return this.bb_pos=ot,this.bb=nt,this}static getRootAsDimension(ot,nt){return(nt||new ut).__init(ot.readInt32(ot.position())+ot.position(),ot)}static getSizePrefixedRootAsDimension(ot,nt){return ot.setPosition(ot.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(nt||new ut).__init(ot.readInt32(ot.position())+ot.position(),ot)}value(ot){let nt=this.bb.__offset(this.bb_pos,4);return nt?(ot||new st.experimental.fbs.DimensionValue).__init(this.bb.__indirect(this.bb_pos+nt),this.bb):null}denotation(ot){let nt=this.bb.__offset(this.bb_pos,6);return nt?this.bb.__string(this.bb_pos+nt,ot):null}static startDimension(ot){ot.startObject(2)}static addValue(ot,nt){ot.addFieldOffset(0,nt,0)}static addDenotation(ot,nt){ot.addFieldOffset(1,nt,0)}static endDimension(ot){return ot.endObject()}static createDimension(ot,nt,lt){return ut.startDimension(ot),ut.addValue(ot,nt),ut.addDenotation(ot,lt),ut.endDimension(ot)}}ct.Dimension=ut})(at.fbs||(at.fbs={}))})(st.experimental||(st.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(st){(function(at){(function(ct){class ut{constructor(){this.bb=null,this.bb_pos=0}__init(ot,nt){return this.bb_pos=ot,this.bb=nt,this}static getRootAsDimensionValue(ot,nt){return(nt||new ut).__init(ot.readInt32(ot.position())+ot.position(),ot)}static getSizePrefixedRootAsDimensionValue(ot,nt){return ot.setPosition(ot.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(nt||new ut).__init(ot.readInt32(ot.position())+ot.position(),ot)}dimType(){let ot=this.bb.__offset(this.bb_pos,4);return ot?this.bb.readInt8(this.bb_pos+ot):st.experimental.fbs.DimensionValueType.UNKNOWN}dimValue(){let ot=this.bb.__offset(this.bb_pos,6);return ot?this.bb.readInt64(this.bb_pos+ot):this.bb.createLong(0,0)}dimParam(ot){let nt=this.bb.__offset(this.bb_pos,8);return nt?this.bb.__string(this.bb_pos+nt,ot):null}static startDimensionValue(ot){ot.startObject(3)}static addDimType(ot,nt){ot.addFieldInt8(0,nt,st.experimental.fbs.DimensionValueType.UNKNOWN)}static addDimValue(ot,nt){ot.addFieldInt64(1,nt,ot.createLong(0,0))}static addDimParam(ot,nt){ot.addFieldOffset(2,nt,0)}static endDimensionValue(ot){return ot.endObject()}static createDimensionValue(ot,nt,lt,ht){return ut.startDimensionValue(ot),ut.addDimType(ot,nt),ut.addDimValue(ot,lt),ut.addDimParam(ot,ht),ut.endDimensionValue(ot)}}ct.DimensionValue=ut})(at.fbs||(at.fbs={}))})(st.experimental||(st.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(st){(function(at){(function(ct){class ut{constructor(){this.bb=null,this.bb_pos=0}__init(ot,nt){return this.bb_pos=ot,this.bb=nt,this}static getRootAsTensorTypeAndShape(ot,nt){return(nt||new ut).__init(ot.readInt32(ot.position())+ot.position(),ot)}static getSizePrefixedRootAsTensorTypeAndShape(ot,nt){return ot.setPosition(ot.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(nt||new ut).__init(ot.readInt32(ot.position())+ot.position(),ot)}elemType(){let ot=this.bb.__offset(this.bb_pos,4);return ot?this.bb.readInt32(this.bb_pos+ot):st.experimental.fbs.TensorDataType.UNDEFINED}shape(ot){let nt=this.bb.__offset(this.bb_pos,6);return nt?(ot||new st.experimental.fbs.Shape).__init(this.bb.__indirect(this.bb_pos+nt),this.bb):null}static startTensorTypeAndShape(ot){ot.startObject(2)}static addElemType(ot,nt){ot.addFieldInt32(0,nt,st.experimental.fbs.TensorDataType.UNDEFINED)}static addShape(ot,nt){ot.addFieldOffset(1,nt,0)}static endTensorTypeAndShape(ot){return ot.endObject()}static createTensorTypeAndShape(ot,nt,lt){return ut.startTensorTypeAndShape(ot),ut.addElemType(ot,nt),ut.addShape(ot,lt),ut.endTensorTypeAndShape(ot)}}ct.TensorTypeAndShape=ut})(at.fbs||(at.fbs={}))})(st.experimental||(st.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(st){(function(at){(function(ct){class ut{constructor(){this.bb=null,this.bb_pos=0}__init(ot,nt){return this.bb_pos=ot,this.bb=nt,this}static getRootAsMapType(ot,nt){return(nt||new ut).__init(ot.readInt32(ot.position())+ot.position(),ot)}static getSizePrefixedRootAsMapType(ot,nt){return ot.setPosition(ot.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(nt||new ut).__init(ot.readInt32(ot.position())+ot.position(),ot)}keyType(){let ot=this.bb.__offset(this.bb_pos,4);return ot?this.bb.readInt32(this.bb_pos+ot):st.experimental.fbs.TensorDataType.UNDEFINED}valueType(ot){let nt=this.bb.__offset(this.bb_pos,6);return nt?(ot||new st.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+nt),this.bb):null}static startMapType(ot){ot.startObject(2)}static addKeyType(ot,nt){ot.addFieldInt32(0,nt,st.experimental.fbs.TensorDataType.UNDEFINED)}static addValueType(ot,nt){ot.addFieldOffset(1,nt,0)}static endMapType(ot){return ot.endObject()}static createMapType(ot,nt,lt){return ut.startMapType(ot),ut.addKeyType(ot,nt),ut.addValueType(ot,lt),ut.endMapType(ot)}}ct.MapType=ut})(at.fbs||(at.fbs={}))})(st.experimental||(st.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(st){(function(at){(function(ct){class ut{constructor(){this.bb=null,this.bb_pos=0}__init(ot,nt){return this.bb_pos=ot,this.bb=nt,this}static getRootAsSequenceType(ot,nt){return(nt||new ut).__init(ot.readInt32(ot.position())+ot.position(),ot)}static getSizePrefixedRootAsSequenceType(ot,nt){return ot.setPosition(ot.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(nt||new ut).__init(ot.readInt32(ot.position())+ot.position(),ot)}elemType(ot){let nt=this.bb.__offset(this.bb_pos,4);return nt?(ot||new st.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+nt),this.bb):null}static startSequenceType(ot){ot.startObject(1)}static addElemType(ot,nt){ot.addFieldOffset(0,nt,0)}static endSequenceType(ot){return ot.endObject()}static createSequenceType(ot,nt){return ut.startSequenceType(ot),ut.addElemType(ot,nt),ut.endSequenceType(ot)}}ct.SequenceType=ut})(at.fbs||(at.fbs={}))})(st.experimental||(st.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(st){(function(at){(at.fbs||(at.fbs={})).EdgeEnd=class{constructor(){this.bb=null,this.bb_pos=0}__init(ct,ut){return this.bb_pos=ct,this.bb=ut,this}nodeIndex(){return this.bb.readUint32(this.bb_pos)}srcArgIndex(){return this.bb.readInt32(this.bb_pos+4)}dstArgIndex(){return this.bb.readInt32(this.bb_pos+8)}static createEdgeEnd(ct,ut,dt,ot){return ct.prep(4,12),ct.writeInt32(ot),ct.writeInt32(dt),ct.writeInt32(ut),ct.offset()}}})(st.experimental||(st.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(st){(function(at){(function(ct){class ut{constructor(){this.bb=null,this.bb_pos=0}__init(ot,nt){return this.bb_pos=ot,this.bb=nt,this}static getRootAsNodeEdge(ot,nt){return(nt||new ut).__init(ot.readInt32(ot.position())+ot.position(),ot)}static getSizePrefixedRootAsNodeEdge(ot,nt){return ot.setPosition(ot.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(nt||new ut).__init(ot.readInt32(ot.position())+ot.position(),ot)}nodeIndex(){let ot=this.bb.__offset(this.bb_pos,4);return ot?this.bb.readUint32(this.bb_pos+ot):0}inputEdges(ot,nt){let lt=this.bb.__offset(this.bb_pos,6);return lt?(nt||new st.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+lt)+12*ot,this.bb):null}inputEdgesLength(){let ot=this.bb.__offset(this.bb_pos,6);return ot?this.bb.__vector_len(this.bb_pos+ot):0}outputEdges(ot,nt){let lt=this.bb.__offset(this.bb_pos,8);return lt?(nt||new st.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+lt)+12*ot,this.bb):null}outputEdgesLength(){let ot=this.bb.__offset(this.bb_pos,8);return ot?this.bb.__vector_len(this.bb_pos+ot):0}static startNodeEdge(ot){ot.startObject(3)}static addNodeIndex(ot,nt){ot.addFieldInt32(0,nt,0)}static addInputEdges(ot,nt){ot.addFieldOffset(1,nt,0)}static startInputEdgesVector(ot,nt){ot.startVector(12,nt,4)}static addOutputEdges(ot,nt){ot.addFieldOffset(2,nt,0)}static startOutputEdgesVector(ot,nt){ot.startVector(12,nt,4)}static endNodeEdge(ot){return ot.endObject()}static createNodeEdge(ot,nt,lt,ht){return ut.startNodeEdge(ot),ut.addNodeIndex(ot,nt),ut.addInputEdges(ot,lt),ut.addOutputEdges(ot,ht),ut.endNodeEdge(ot)}}ct.NodeEdge=ut})(at.fbs||(at.fbs={}))})(st.experimental||(st.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(st){(function(at){(function(ct){class ut{constructor(){this.bb=null,this.bb_pos=0}__init(ot,nt){return this.bb_pos=ot,this.bb=nt,this}static getRootAsNode(ot,nt){return(nt||new ut).__init(ot.readInt32(ot.position())+ot.position(),ot)}static getSizePrefixedRootAsNode(ot,nt){return ot.setPosition(ot.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(nt||new ut).__init(ot.readInt32(ot.position())+ot.position(),ot)}name(ot){let nt=this.bb.__offset(this.bb_pos,4);return nt?this.bb.__string(this.bb_pos+nt,ot):null}docString(ot){let nt=this.bb.__offset(this.bb_pos,6);return nt?this.bb.__string(this.bb_pos+nt,ot):null}domain(ot){let nt=this.bb.__offset(this.bb_pos,8);return nt?this.bb.__string(this.bb_pos+nt,ot):null}sinceVersion(){let ot=this.bb.__offset(this.bb_pos,10);return ot?this.bb.readInt32(this.bb_pos+ot):0}index(){let ot=this.bb.__offset(this.bb_pos,12);return ot?this.bb.readUint32(this.bb_pos+ot):0}opType(ot){let nt=this.bb.__offset(this.bb_pos,14);return nt?this.bb.__string(this.bb_pos+nt,ot):null}type(){let ot=this.bb.__offset(this.bb_pos,16);return ot?this.bb.readInt32(this.bb_pos+ot):st.experimental.fbs.NodeType.Primitive}executionProviderType(ot){let nt=this.bb.__offset(this.bb_pos,18);return nt?this.bb.__string(this.bb_pos+nt,ot):null}inputs(ot,nt){let lt=this.bb.__offset(this.bb_pos,20);return lt?this.bb.__string(this.bb.__vector(this.bb_pos+lt)+4*ot,nt):null}inputsLength(){let ot=this.bb.__offset(this.bb_pos,20);return ot?this.bb.__vector_len(this.bb_pos+ot):0}outputs(ot,nt){let lt=this.bb.__offset(this.bb_pos,22);return lt?this.bb.__string(this.bb.__vector(this.bb_pos+lt)+4*ot,nt):null}outputsLength(){let ot=this.bb.__offset(this.bb_pos,22);return ot?this.bb.__vector_len(this.bb_pos+ot):0}attributes(ot,nt){let lt=this.bb.__offset(this.bb_pos,24);return lt?(nt||new st.experimental.fbs.Attribute).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+lt)+4*ot),this.bb):null}attributesLength(){let ot=this.bb.__offset(this.bb_pos,24);return ot?this.bb.__vector_len(this.bb_pos+ot):0}inputArgCounts(ot){let nt=this.bb.__offset(this.bb_pos,26);return nt?this.bb.readInt32(this.bb.__vector(this.bb_pos+nt)+4*ot):0}inputArgCountsLength(){let ot=this.bb.__offset(this.bb_pos,26);return ot?this.bb.__vector_len(this.bb_pos+ot):0}inputArgCountsArray(){let ot=this.bb.__offset(this.bb_pos,26);return ot?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+ot),this.bb.__vector_len(this.bb_pos+ot)):null}implicitInputs(ot,nt){let lt=this.bb.__offset(this.bb_pos,28);return lt?this.bb.__string(this.bb.__vector(this.bb_pos+lt)+4*ot,nt):null}implicitInputsLength(){let ot=this.bb.__offset(this.bb_pos,28);return ot?this.bb.__vector_len(this.bb_pos+ot):0}static startNode(ot){ot.startObject(13)}static addName(ot,nt){ot.addFieldOffset(0,nt,0)}static addDocString(ot,nt){ot.addFieldOffset(1,nt,0)}static addDomain(ot,nt){ot.addFieldOffset(2,nt,0)}static addSinceVersion(ot,nt){ot.addFieldInt32(3,nt,0)}static addIndex(ot,nt){ot.addFieldInt32(4,nt,0)}static addOpType(ot,nt){ot.addFieldOffset(5,nt,0)}static addType(ot,nt){ot.addFieldInt32(6,nt,st.experimental.fbs.NodeType.Primitive)}static addExecutionProviderType(ot,nt){ot.addFieldOffset(7,nt,0)}static addInputs(ot,nt){ot.addFieldOffset(8,nt,0)}static createInputsVector(ot,nt){ot.startVector(4,nt.length,4);for(let lt=nt.length-1;lt>=0;lt--)ot.addOffset(nt[lt]);return ot.endVector()}static startInputsVector(ot,nt){ot.startVector(4,nt,4)}static addOutputs(ot,nt){ot.addFieldOffset(9,nt,0)}static createOutputsVector(ot,nt){ot.startVector(4,nt.length,4);for(let lt=nt.length-1;lt>=0;lt--)ot.addOffset(nt[lt]);return ot.endVector()}static startOutputsVector(ot,nt){ot.startVector(4,nt,4)}static addAttributes(ot,nt){ot.addFieldOffset(10,nt,0)}static createAttributesVector(ot,nt){ot.startVector(4,nt.length,4);for(let lt=nt.length-1;lt>=0;lt--)ot.addOffset(nt[lt]);return ot.endVector()}static startAttributesVector(ot,nt){ot.startVector(4,nt,4)}static addInputArgCounts(ot,nt){ot.addFieldOffset(11,nt,0)}static createInputArgCountsVector(ot,nt){ot.startVector(4,nt.length,4);for(let lt=nt.length-1;lt>=0;lt--)ot.addInt32(nt[lt]);return ot.endVector()}static startInputArgCountsVector(ot,nt){ot.startVector(4,nt,4)}static addImplicitInputs(ot,nt){ot.addFieldOffset(12,nt,0)}static createImplicitInputsVector(ot,nt){ot.startVector(4,nt.length,4);for(let lt=nt.length-1;lt>=0;lt--)ot.addOffset(nt[lt]);return ot.endVector()}static startImplicitInputsVector(ot,nt){ot.startVector(4,nt,4)}static endNode(ot){return ot.endObject()}static createNode(ot,nt,lt,ht,ft,gt,mt,yt,bt,_t,vt,xt,wt,Tt){return ut.startNode(ot),ut.addName(ot,nt),ut.addDocString(ot,lt),ut.addDomain(ot,ht),ut.addSinceVersion(ot,ft),ut.addIndex(ot,gt),ut.addOpType(ot,mt),ut.addType(ot,yt),ut.addExecutionProviderType(ot,bt),ut.addInputs(ot,_t),ut.addOutputs(ot,vt),ut.addAttributes(ot,xt),ut.addInputArgCounts(ot,wt),ut.addImplicitInputs(ot,Tt),ut.endNode(ot)}}ct.Node=ut})(at.fbs||(at.fbs={}))})(st.experimental||(st.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(st){(function(at){(function(ct){class ut{constructor(){this.bb=null,this.bb_pos=0}__init(ot,nt){return this.bb_pos=ot,this.bb=nt,this}static getRootAsValueInfo(ot,nt){return(nt||new ut).__init(ot.readInt32(ot.position())+ot.position(),ot)}static getSizePrefixedRootAsValueInfo(ot,nt){return ot.setPosition(ot.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(nt||new ut).__init(ot.readInt32(ot.position())+ot.position(),ot)}name(ot){let nt=this.bb.__offset(this.bb_pos,4);return nt?this.bb.__string(this.bb_pos+nt,ot):null}docString(ot){let nt=this.bb.__offset(this.bb_pos,6);return nt?this.bb.__string(this.bb_pos+nt,ot):null}type(ot){let nt=this.bb.__offset(this.bb_pos,8);return nt?(ot||new st.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+nt),this.bb):null}static startValueInfo(ot){ot.startObject(3)}static addName(ot,nt){ot.addFieldOffset(0,nt,0)}static addDocString(ot,nt){ot.addFieldOffset(1,nt,0)}static addType(ot,nt){ot.addFieldOffset(2,nt,0)}static endValueInfo(ot){return ot.endObject()}static createValueInfo(ot,nt,lt,ht){return ut.startValueInfo(ot),ut.addName(ot,nt),ut.addDocString(ot,lt),ut.addType(ot,ht),ut.endValueInfo(ot)}}ct.ValueInfo=ut})(at.fbs||(at.fbs={}))})(st.experimental||(st.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(st){(function(at){(function(ct){class ut{constructor(){this.bb=null,this.bb_pos=0}__init(ot,nt){return this.bb_pos=ot,this.bb=nt,this}static getRootAsTypeInfo(ot,nt){return(nt||new ut).__init(ot.readInt32(ot.position())+ot.position(),ot)}static getSizePrefixedRootAsTypeInfo(ot,nt){return ot.setPosition(ot.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(nt||new ut).__init(ot.readInt32(ot.position())+ot.position(),ot)}denotation(ot){let nt=this.bb.__offset(this.bb_pos,4);return nt?this.bb.__string(this.bb_pos+nt,ot):null}valueType(){let ot=this.bb.__offset(this.bb_pos,6);return ot?this.bb.readUint8(this.bb_pos+ot):st.experimental.fbs.TypeInfoValue.NONE}value(ot){let nt=this.bb.__offset(this.bb_pos,8);return nt?this.bb.__union(ot,this.bb_pos+nt):null}static startTypeInfo(ot){ot.startObject(3)}static addDenotation(ot,nt){ot.addFieldOffset(0,nt,0)}static addValueType(ot,nt){ot.addFieldInt8(1,nt,st.experimental.fbs.TypeInfoValue.NONE)}static addValue(ot,nt){ot.addFieldOffset(2,nt,0)}static endTypeInfo(ot){return ot.endObject()}static createTypeInfo(ot,nt,lt,ht){return ut.startTypeInfo(ot),ut.addDenotation(ot,nt),ut.addValueType(ot,lt),ut.addValue(ot,ht),ut.endTypeInfo(ot)}}ct.TypeInfo=ut})(at.fbs||(at.fbs={}))})(st.experimental||(st.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(st){(function(at){(function(ct){class ut{constructor(){this.bb=null,this.bb_pos=0}__init(ot,nt){return this.bb_pos=ot,this.bb=nt,this}static getRootAsOperatorSetId(ot,nt){return(nt||new ut).__init(ot.readInt32(ot.position())+ot.position(),ot)}static getSizePrefixedRootAsOperatorSetId(ot,nt){return ot.setPosition(ot.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(nt||new ut).__init(ot.readInt32(ot.position())+ot.position(),ot)}domain(ot){let nt=this.bb.__offset(this.bb_pos,4);return nt?this.bb.__string(this.bb_pos+nt,ot):null}version(){let ot=this.bb.__offset(this.bb_pos,6);return ot?this.bb.readInt64(this.bb_pos+ot):this.bb.createLong(0,0)}static startOperatorSetId(ot){ot.startObject(2)}static addDomain(ot,nt){ot.addFieldOffset(0,nt,0)}static addVersion(ot,nt){ot.addFieldInt64(1,nt,ot.createLong(0,0))}static endOperatorSetId(ot){return ot.endObject()}static createOperatorSetId(ot,nt,lt){return ut.startOperatorSetId(ot),ut.addDomain(ot,nt),ut.addVersion(ot,lt),ut.endOperatorSetId(ot)}}ct.OperatorSetId=ut})(at.fbs||(at.fbs={}))})(st.experimental||(st.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(st){(function(at){(function(ct){class ut{constructor(){this.bb=null,this.bb_pos=0}__init(ot,nt){return this.bb_pos=ot,this.bb=nt,this}static getRootAsTensor(ot,nt){return(nt||new ut).__init(ot.readInt32(ot.position())+ot.position(),ot)}static getSizePrefixedRootAsTensor(ot,nt){return ot.setPosition(ot.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(nt||new ut).__init(ot.readInt32(ot.position())+ot.position(),ot)}name(ot){let nt=this.bb.__offset(this.bb_pos,4);return nt?this.bb.__string(this.bb_pos+nt,ot):null}docString(ot){let nt=this.bb.__offset(this.bb_pos,6);return nt?this.bb.__string(this.bb_pos+nt,ot):null}dims(ot){let nt=this.bb.__offset(this.bb_pos,8);return nt?this.bb.readInt64(this.bb.__vector(this.bb_pos+nt)+8*ot):this.bb.createLong(0,0)}dimsLength(){let ot=this.bb.__offset(this.bb_pos,8);return ot?this.bb.__vector_len(this.bb_pos+ot):0}dataType(){let ot=this.bb.__offset(this.bb_pos,10);return ot?this.bb.readInt32(this.bb_pos+ot):st.experimental.fbs.TensorDataType.UNDEFINED}rawData(ot){let nt=this.bb.__offset(this.bb_pos,12);return nt?this.bb.readUint8(this.bb.__vector(this.bb_pos+nt)+ot):0}rawDataLength(){let ot=this.bb.__offset(this.bb_pos,12);return ot?this.bb.__vector_len(this.bb_pos+ot):0}rawDataArray(){let ot=this.bb.__offset(this.bb_pos,12);return ot?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+ot),this.bb.__vector_len(this.bb_pos+ot)):null}stringData(ot,nt){let lt=this.bb.__offset(this.bb_pos,14);return lt?this.bb.__string(this.bb.__vector(this.bb_pos+lt)+4*ot,nt):null}stringDataLength(){let ot=this.bb.__offset(this.bb_pos,14);return ot?this.bb.__vector_len(this.bb_pos+ot):0}static startTensor(ot){ot.startObject(6)}static addName(ot,nt){ot.addFieldOffset(0,nt,0)}static addDocString(ot,nt){ot.addFieldOffset(1,nt,0)}static addDims(ot,nt){ot.addFieldOffset(2,nt,0)}static createDimsVector(ot,nt){ot.startVector(8,nt.length,8);for(let lt=nt.length-1;lt>=0;lt--)ot.addInt64(nt[lt]);return ot.endVector()}static startDimsVector(ot,nt){ot.startVector(8,nt,8)}static addDataType(ot,nt){ot.addFieldInt32(3,nt,st.experimental.fbs.TensorDataType.UNDEFINED)}static addRawData(ot,nt){ot.addFieldOffset(4,nt,0)}static createRawDataVector(ot,nt){ot.startVector(1,nt.length,1);for(let lt=nt.length-1;lt>=0;lt--)ot.addInt8(nt[lt]);return ot.endVector()}static startRawDataVector(ot,nt){ot.startVector(1,nt,1)}static addStringData(ot,nt){ot.addFieldOffset(5,nt,0)}static createStringDataVector(ot,nt){ot.startVector(4,nt.length,4);for(let lt=nt.length-1;lt>=0;lt--)ot.addOffset(nt[lt]);return ot.endVector()}static startStringDataVector(ot,nt){ot.startVector(4,nt,4)}static endTensor(ot){return ot.endObject()}static createTensor(ot,nt,lt,ht,ft,gt,mt){return ut.startTensor(ot),ut.addName(ot,nt),ut.addDocString(ot,lt),ut.addDims(ot,ht),ut.addDataType(ot,ft),ut.addRawData(ot,gt),ut.addStringData(ot,mt),ut.endTensor(ot)}}ct.Tensor=ut})(at.fbs||(at.fbs={}))})(st.experimental||(st.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(st){(function(at){(function(ct){class ut{constructor(){this.bb=null,this.bb_pos=0}__init(ot,nt){return this.bb_pos=ot,this.bb=nt,this}static getRootAsSparseTensor(ot,nt){return(nt||new ut).__init(ot.readInt32(ot.position())+ot.position(),ot)}static getSizePrefixedRootAsSparseTensor(ot,nt){return ot.setPosition(ot.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(nt||new ut).__init(ot.readInt32(ot.position())+ot.position(),ot)}values(ot){let nt=this.bb.__offset(this.bb_pos,4);return nt?(ot||new st.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+nt),this.bb):null}indices(ot){let nt=this.bb.__offset(this.bb_pos,6);return nt?(ot||new st.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+nt),this.bb):null}dims(ot){let nt=this.bb.__offset(this.bb_pos,8);return nt?this.bb.readInt64(this.bb.__vector(this.bb_pos+nt)+8*ot):this.bb.createLong(0,0)}dimsLength(){let ot=this.bb.__offset(this.bb_pos,8);return ot?this.bb.__vector_len(this.bb_pos+ot):0}static startSparseTensor(ot){ot.startObject(3)}static addValues(ot,nt){ot.addFieldOffset(0,nt,0)}static addIndices(ot,nt){ot.addFieldOffset(1,nt,0)}static addDims(ot,nt){ot.addFieldOffset(2,nt,0)}static createDimsVector(ot,nt){ot.startVector(8,nt.length,8);for(let lt=nt.length-1;lt>=0;lt--)ot.addInt64(nt[lt]);return ot.endVector()}static startDimsVector(ot,nt){ot.startVector(8,nt,8)}static endSparseTensor(ot){return ot.endObject()}static createSparseTensor(ot,nt,lt,ht){return ut.startSparseTensor(ot),ut.addValues(ot,nt),ut.addIndices(ot,lt),ut.addDims(ot,ht),ut.endSparseTensor(ot)}}ct.SparseTensor=ut})(at.fbs||(at.fbs={}))})(st.experimental||(st.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(st){(function(at){(function(ct){class ut{constructor(){this.bb=null,this.bb_pos=0}__init(ot,nt){return this.bb_pos=ot,this.bb=nt,this}static getRootAsAttribute(ot,nt){return(nt||new ut).__init(ot.readInt32(ot.position())+ot.position(),ot)}static getSizePrefixedRootAsAttribute(ot,nt){return ot.setPosition(ot.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(nt||new ut).__init(ot.readInt32(ot.position())+ot.position(),ot)}name(ot){let nt=this.bb.__offset(this.bb_pos,4);return nt?this.bb.__string(this.bb_pos+nt,ot):null}docString(ot){let nt=this.bb.__offset(this.bb_pos,6);return nt?this.bb.__string(this.bb_pos+nt,ot):null}type(){let ot=this.bb.__offset(this.bb_pos,8);return ot?this.bb.readInt32(this.bb_pos+ot):st.experimental.fbs.AttributeType.UNDEFINED}f(){let ot=this.bb.__offset(this.bb_pos,10);return ot?this.bb.readFloat32(this.bb_pos+ot):0}i(){let ot=this.bb.__offset(this.bb_pos,12);return ot?this.bb.readInt64(this.bb_pos+ot):this.bb.createLong(0,0)}s(ot){let nt=this.bb.__offset(this.bb_pos,14);return nt?this.bb.__string(this.bb_pos+nt,ot):null}t(ot){let nt=this.bb.__offset(this.bb_pos,16);return nt?(ot||new st.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+nt),this.bb):null}g(ot){let nt=this.bb.__offset(this.bb_pos,18);return nt?(ot||new st.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+nt),this.bb):null}floats(ot){let nt=this.bb.__offset(this.bb_pos,20);return nt?this.bb.readFloat32(this.bb.__vector(this.bb_pos+nt)+4*ot):0}floatsLength(){let ot=this.bb.__offset(this.bb_pos,20);return ot?this.bb.__vector_len(this.bb_pos+ot):0}floatsArray(){let ot=this.bb.__offset(this.bb_pos,20);return ot?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+ot),this.bb.__vector_len(this.bb_pos+ot)):null}ints(ot){let nt=this.bb.__offset(this.bb_pos,22);return nt?this.bb.readInt64(this.bb.__vector(this.bb_pos+nt)+8*ot):this.bb.createLong(0,0)}intsLength(){let ot=this.bb.__offset(this.bb_pos,22);return ot?this.bb.__vector_len(this.bb_pos+ot):0}strings(ot,nt){let lt=this.bb.__offset(this.bb_pos,24);return lt?this.bb.__string(this.bb.__vector(this.bb_pos+lt)+4*ot,nt):null}stringsLength(){let ot=this.bb.__offset(this.bb_pos,24);return ot?this.bb.__vector_len(this.bb_pos+ot):0}tensors(ot,nt){let lt=this.bb.__offset(this.bb_pos,26);return lt?(nt||new st.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+lt)+4*ot),this.bb):null}tensorsLength(){let ot=this.bb.__offset(this.bb_pos,26);return ot?this.bb.__vector_len(this.bb_pos+ot):0}graphs(ot,nt){let lt=this.bb.__offset(this.bb_pos,28);return lt?(nt||new st.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+lt)+4*ot),this.bb):null}graphsLength(){let ot=this.bb.__offset(this.bb_pos,28);return ot?this.bb.__vector_len(this.bb_pos+ot):0}static startAttribute(ot){ot.startObject(13)}static addName(ot,nt){ot.addFieldOffset(0,nt,0)}static addDocString(ot,nt){ot.addFieldOffset(1,nt,0)}static addType(ot,nt){ot.addFieldInt32(2,nt,st.experimental.fbs.AttributeType.UNDEFINED)}static addF(ot,nt){ot.addFieldFloat32(3,nt,0)}static addI(ot,nt){ot.addFieldInt64(4,nt,ot.createLong(0,0))}static addS(ot,nt){ot.addFieldOffset(5,nt,0)}static addT(ot,nt){ot.addFieldOffset(6,nt,0)}static addG(ot,nt){ot.addFieldOffset(7,nt,0)}static addFloats(ot,nt){ot.addFieldOffset(8,nt,0)}static createFloatsVector(ot,nt){ot.startVector(4,nt.length,4);for(let lt=nt.length-1;lt>=0;lt--)ot.addFloat32(nt[lt]);return ot.endVector()}static startFloatsVector(ot,nt){ot.startVector(4,nt,4)}static addInts(ot,nt){ot.addFieldOffset(9,nt,0)}static createIntsVector(ot,nt){ot.startVector(8,nt.length,8);for(let lt=nt.length-1;lt>=0;lt--)ot.addInt64(nt[lt]);return ot.endVector()}static startIntsVector(ot,nt){ot.startVector(8,nt,8)}static addStrings(ot,nt){ot.addFieldOffset(10,nt,0)}static createStringsVector(ot,nt){ot.startVector(4,nt.length,4);for(let lt=nt.length-1;lt>=0;lt--)ot.addOffset(nt[lt]);return ot.endVector()}static startStringsVector(ot,nt){ot.startVector(4,nt,4)}static addTensors(ot,nt){ot.addFieldOffset(11,nt,0)}static createTensorsVector(ot,nt){ot.startVector(4,nt.length,4);for(let lt=nt.length-1;lt>=0;lt--)ot.addOffset(nt[lt]);return ot.endVector()}static startTensorsVector(ot,nt){ot.startVector(4,nt,4)}static addGraphs(ot,nt){ot.addFieldOffset(12,nt,0)}static createGraphsVector(ot,nt){ot.startVector(4,nt.length,4);for(let lt=nt.length-1;lt>=0;lt--)ot.addOffset(nt[lt]);return ot.endVector()}static startGraphsVector(ot,nt){ot.startVector(4,nt,4)}static endAttribute(ot){return ot.endObject()}static createAttribute(ot,nt,lt,ht,ft,gt,mt,yt,bt,_t,vt,xt,wt,Tt){return ut.startAttribute(ot),ut.addName(ot,nt),ut.addDocString(ot,lt),ut.addType(ot,ht),ut.addF(ot,ft),ut.addI(ot,gt),ut.addS(ot,mt),ut.addT(ot,yt),ut.addG(ot,bt),ut.addFloats(ot,_t),ut.addInts(ot,vt),ut.addStrings(ot,xt),ut.addTensors(ot,wt),ut.addGraphs(ot,Tt),ut.endAttribute(ot)}}ct.Attribute=ut})(at.fbs||(at.fbs={}))})(st.experimental||(st.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(st){(function(at){(function(ct){class ut{constructor(){this.bb=null,this.bb_pos=0}__init(ot,nt){return this.bb_pos=ot,this.bb=nt,this}static getRootAsGraph(ot,nt){return(nt||new ut).__init(ot.readInt32(ot.position())+ot.position(),ot)}static getSizePrefixedRootAsGraph(ot,nt){return ot.setPosition(ot.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(nt||new ut).__init(ot.readInt32(ot.position())+ot.position(),ot)}initializers(ot,nt){let lt=this.bb.__offset(this.bb_pos,4);return lt?(nt||new st.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+lt)+4*ot),this.bb):null}initializersLength(){let ot=this.bb.__offset(this.bb_pos,4);return ot?this.bb.__vector_len(this.bb_pos+ot):0}nodeArgs(ot,nt){let lt=this.bb.__offset(this.bb_pos,6);return lt?(nt||new st.experimental.fbs.ValueInfo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+lt)+4*ot),this.bb):null}nodeArgsLength(){let ot=this.bb.__offset(this.bb_pos,6);return ot?this.bb.__vector_len(this.bb_pos+ot):0}nodes(ot,nt){let lt=this.bb.__offset(this.bb_pos,8);return lt?(nt||new st.experimental.fbs.Node).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+lt)+4*ot),this.bb):null}nodesLength(){let ot=this.bb.__offset(this.bb_pos,8);return ot?this.bb.__vector_len(this.bb_pos+ot):0}maxNodeIndex(){let ot=this.bb.__offset(this.bb_pos,10);return ot?this.bb.readUint32(this.bb_pos+ot):0}nodeEdges(ot,nt){let lt=this.bb.__offset(this.bb_pos,12);return lt?(nt||new st.experimental.fbs.NodeEdge).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+lt)+4*ot),this.bb):null}nodeEdgesLength(){let ot=this.bb.__offset(this.bb_pos,12);return ot?this.bb.__vector_len(this.bb_pos+ot):0}inputs(ot,nt){let lt=this.bb.__offset(this.bb_pos,14);return lt?this.bb.__string(this.bb.__vector(this.bb_pos+lt)+4*ot,nt):null}inputsLength(){let ot=this.bb.__offset(this.bb_pos,14);return ot?this.bb.__vector_len(this.bb_pos+ot):0}outputs(ot,nt){let lt=this.bb.__offset(this.bb_pos,16);return lt?this.bb.__string(this.bb.__vector(this.bb_pos+lt)+4*ot,nt):null}outputsLength(){let ot=this.bb.__offset(this.bb_pos,16);return ot?this.bb.__vector_len(this.bb_pos+ot):0}sparseInitializers(ot,nt){let lt=this.bb.__offset(this.bb_pos,18);return lt?(nt||new st.experimental.fbs.SparseTensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+lt)+4*ot),this.bb):null}sparseInitializersLength(){let ot=this.bb.__offset(this.bb_pos,18);return ot?this.bb.__vector_len(this.bb_pos+ot):0}static startGraph(ot){ot.startObject(8)}static addInitializers(ot,nt){ot.addFieldOffset(0,nt,0)}static createInitializersVector(ot,nt){ot.startVector(4,nt.length,4);for(let lt=nt.length-1;lt>=0;lt--)ot.addOffset(nt[lt]);return ot.endVector()}static startInitializersVector(ot,nt){ot.startVector(4,nt,4)}static addNodeArgs(ot,nt){ot.addFieldOffset(1,nt,0)}static createNodeArgsVector(ot,nt){ot.startVector(4,nt.length,4);for(let lt=nt.length-1;lt>=0;lt--)ot.addOffset(nt[lt]);return ot.endVector()}static startNodeArgsVector(ot,nt){ot.startVector(4,nt,4)}static addNodes(ot,nt){ot.addFieldOffset(2,nt,0)}static createNodesVector(ot,nt){ot.startVector(4,nt.length,4);for(let lt=nt.length-1;lt>=0;lt--)ot.addOffset(nt[lt]);return ot.endVector()}static startNodesVector(ot,nt){ot.startVector(4,nt,4)}static addMaxNodeIndex(ot,nt){ot.addFieldInt32(3,nt,0)}static addNodeEdges(ot,nt){ot.addFieldOffset(4,nt,0)}static createNodeEdgesVector(ot,nt){ot.startVector(4,nt.length,4);for(let lt=nt.length-1;lt>=0;lt--)ot.addOffset(nt[lt]);return ot.endVector()}static startNodeEdgesVector(ot,nt){ot.startVector(4,nt,4)}static addInputs(ot,nt){ot.addFieldOffset(5,nt,0)}static createInputsVector(ot,nt){ot.startVector(4,nt.length,4);for(let lt=nt.length-1;lt>=0;lt--)ot.addOffset(nt[lt]);return ot.endVector()}static startInputsVector(ot,nt){ot.startVector(4,nt,4)}static addOutputs(ot,nt){ot.addFieldOffset(6,nt,0)}static createOutputsVector(ot,nt){ot.startVector(4,nt.length,4);for(let lt=nt.length-1;lt>=0;lt--)ot.addOffset(nt[lt]);return ot.endVector()}static startOutputsVector(ot,nt){ot.startVector(4,nt,4)}static addSparseInitializers(ot,nt){ot.addFieldOffset(7,nt,0)}static createSparseInitializersVector(ot,nt){ot.startVector(4,nt.length,4);for(let lt=nt.length-1;lt>=0;lt--)ot.addOffset(nt[lt]);return ot.endVector()}static startSparseInitializersVector(ot,nt){ot.startVector(4,nt,4)}static endGraph(ot){return ot.endObject()}static createGraph(ot,nt,lt,ht,ft,gt,mt,yt,bt){return ut.startGraph(ot),ut.addInitializers(ot,nt),ut.addNodeArgs(ot,lt),ut.addNodes(ot,ht),ut.addMaxNodeIndex(ot,ft),ut.addNodeEdges(ot,gt),ut.addInputs(ot,mt),ut.addOutputs(ot,yt),ut.addSparseInitializers(ot,bt),ut.endGraph(ot)}}ct.Graph=ut})(at.fbs||(at.fbs={}))})(st.experimental||(st.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(st){(function(at){(function(ct){class ut{constructor(){this.bb=null,this.bb_pos=0}__init(ot,nt){return this.bb_pos=ot,this.bb=nt,this}static getRootAsModel(ot,nt){return(nt||new ut).__init(ot.readInt32(ot.position())+ot.position(),ot)}static getSizePrefixedRootAsModel(ot,nt){return ot.setPosition(ot.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(nt||new ut).__init(ot.readInt32(ot.position())+ot.position(),ot)}irVersion(){let ot=this.bb.__offset(this.bb_pos,4);return ot?this.bb.readInt64(this.bb_pos+ot):this.bb.createLong(0,0)}opsetImport(ot,nt){let lt=this.bb.__offset(this.bb_pos,6);return lt?(nt||new st.experimental.fbs.OperatorSetId).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+lt)+4*ot),this.bb):null}opsetImportLength(){let ot=this.bb.__offset(this.bb_pos,6);return ot?this.bb.__vector_len(this.bb_pos+ot):0}producerName(ot){let nt=this.bb.__offset(this.bb_pos,8);return nt?this.bb.__string(this.bb_pos+nt,ot):null}producerVersion(ot){let nt=this.bb.__offset(this.bb_pos,10);return nt?this.bb.__string(this.bb_pos+nt,ot):null}domain(ot){let nt=this.bb.__offset(this.bb_pos,12);return nt?this.bb.__string(this.bb_pos+nt,ot):null}modelVersion(){let ot=this.bb.__offset(this.bb_pos,14);return ot?this.bb.readInt64(this.bb_pos+ot):this.bb.createLong(0,0)}docString(ot){let nt=this.bb.__offset(this.bb_pos,16);return nt?this.bb.__string(this.bb_pos+nt,ot):null}graph(ot){let nt=this.bb.__offset(this.bb_pos,18);return nt?(ot||new st.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+nt),this.bb):null}graphDocString(ot){let nt=this.bb.__offset(this.bb_pos,20);return nt?this.bb.__string(this.bb_pos+nt,ot):null}static startModel(ot){ot.startObject(9)}static addIrVersion(ot,nt){ot.addFieldInt64(0,nt,ot.createLong(0,0))}static addOpsetImport(ot,nt){ot.addFieldOffset(1,nt,0)}static createOpsetImportVector(ot,nt){ot.startVector(4,nt.length,4);for(let lt=nt.length-1;lt>=0;lt--)ot.addOffset(nt[lt]);return ot.endVector()}static startOpsetImportVector(ot,nt){ot.startVector(4,nt,4)}static addProducerName(ot,nt){ot.addFieldOffset(2,nt,0)}static addProducerVersion(ot,nt){ot.addFieldOffset(3,nt,0)}static addDomain(ot,nt){ot.addFieldOffset(4,nt,0)}static addModelVersion(ot,nt){ot.addFieldInt64(5,nt,ot.createLong(0,0))}static addDocString(ot,nt){ot.addFieldOffset(6,nt,0)}static addGraph(ot,nt){ot.addFieldOffset(7,nt,0)}static addGraphDocString(ot,nt){ot.addFieldOffset(8,nt,0)}static endModel(ot){return ot.endObject()}static createModel(ot,nt,lt,ht,ft,gt,mt,yt,bt,_t){return ut.startModel(ot),ut.addIrVersion(ot,nt),ut.addOpsetImport(ot,lt),ut.addProducerName(ot,ht),ut.addProducerVersion(ot,ft),ut.addDomain(ot,gt),ut.addModelVersion(ot,mt),ut.addDocString(ot,yt),ut.addGraph(ot,bt),ut.addGraphDocString(ot,_t),ut.endModel(ot)}}ct.Model=ut})(at.fbs||(at.fbs={}))})(st.experimental||(st.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(st){(function(at){(function(ct){class ut{constructor(){this.bb=null,this.bb_pos=0}__init(ot,nt){return this.bb_pos=ot,this.bb=nt,this}static getRootAsKernelCreateInfos(ot,nt){return(nt||new ut).__init(ot.readInt32(ot.position())+ot.position(),ot)}static getSizePrefixedRootAsKernelCreateInfos(ot,nt){return ot.setPosition(ot.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(nt||new ut).__init(ot.readInt32(ot.position())+ot.position(),ot)}nodeIndices(ot){let nt=this.bb.__offset(this.bb_pos,4);return nt?this.bb.readUint32(this.bb.__vector(this.bb_pos+nt)+4*ot):0}nodeIndicesLength(){let ot=this.bb.__offset(this.bb_pos,4);return ot?this.bb.__vector_len(this.bb_pos+ot):0}nodeIndicesArray(){let ot=this.bb.__offset(this.bb_pos,4);return ot?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+ot),this.bb.__vector_len(this.bb_pos+ot)):null}kernelDefHashes(ot){let nt=this.bb.__offset(this.bb_pos,6);return nt?this.bb.readUint64(this.bb.__vector(this.bb_pos+nt)+8*ot):this.bb.createLong(0,0)}kernelDefHashesLength(){let ot=this.bb.__offset(this.bb_pos,6);return ot?this.bb.__vector_len(this.bb_pos+ot):0}static startKernelCreateInfos(ot){ot.startObject(2)}static addNodeIndices(ot,nt){ot.addFieldOffset(0,nt,0)}static createNodeIndicesVector(ot,nt){ot.startVector(4,nt.length,4);for(let lt=nt.length-1;lt>=0;lt--)ot.addInt32(nt[lt]);return ot.endVector()}static startNodeIndicesVector(ot,nt){ot.startVector(4,nt,4)}static addKernelDefHashes(ot,nt){ot.addFieldOffset(1,nt,0)}static createKernelDefHashesVector(ot,nt){ot.startVector(8,nt.length,8);for(let lt=nt.length-1;lt>=0;lt--)ot.addInt64(nt[lt]);return ot.endVector()}static startKernelDefHashesVector(ot,nt){ot.startVector(8,nt,8)}static endKernelCreateInfos(ot){return ot.endObject()}static createKernelCreateInfos(ot,nt,lt){return ut.startKernelCreateInfos(ot),ut.addNodeIndices(ot,nt),ut.addKernelDefHashes(ot,lt),ut.endKernelCreateInfos(ot)}}ct.KernelCreateInfos=ut})(at.fbs||(at.fbs={}))})(st.experimental||(st.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(st){(function(at){(function(ct){class ut{constructor(){this.bb=null,this.bb_pos=0}__init(ot,nt){return this.bb_pos=ot,this.bb=nt,this}static getRootAsSubGraphSessionState(ot,nt){return(nt||new ut).__init(ot.readInt32(ot.position())+ot.position(),ot)}static getSizePrefixedRootAsSubGraphSessionState(ot,nt){return ot.setPosition(ot.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(nt||new ut).__init(ot.readInt32(ot.position())+ot.position(),ot)}graphId(ot){let nt=this.bb.__offset(this.bb_pos,4);return nt?this.bb.__string(this.bb_pos+nt,ot):null}sessionState(ot){let nt=this.bb.__offset(this.bb_pos,6);return nt?(ot||new st.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+nt),this.bb):null}static startSubGraphSessionState(ot){ot.startObject(2)}static addGraphId(ot,nt){ot.addFieldOffset(0,nt,0)}static addSessionState(ot,nt){ot.addFieldOffset(1,nt,0)}static endSubGraphSessionState(ot){let nt=ot.endObject();return ot.requiredField(nt,4),nt}static createSubGraphSessionState(ot,nt,lt){return ut.startSubGraphSessionState(ot),ut.addGraphId(ot,nt),ut.addSessionState(ot,lt),ut.endSubGraphSessionState(ot)}}ct.SubGraphSessionState=ut})(at.fbs||(at.fbs={}))})(st.experimental||(st.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(st){(function(at){(function(ct){class ut{constructor(){this.bb=null,this.bb_pos=0}__init(ot,nt){return this.bb_pos=ot,this.bb=nt,this}static getRootAsSessionState(ot,nt){return(nt||new ut).__init(ot.readInt32(ot.position())+ot.position(),ot)}static getSizePrefixedRootAsSessionState(ot,nt){return ot.setPosition(ot.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(nt||new ut).__init(ot.readInt32(ot.position())+ot.position(),ot)}kernels(ot){let nt=this.bb.__offset(this.bb_pos,4);return nt?(ot||new st.experimental.fbs.KernelCreateInfos).__init(this.bb.__indirect(this.bb_pos+nt),this.bb):null}subGraphSessionStates(ot,nt){let lt=this.bb.__offset(this.bb_pos,6);return lt?(nt||new st.experimental.fbs.SubGraphSessionState).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+lt)+4*ot),this.bb):null}subGraphSessionStatesLength(){let ot=this.bb.__offset(this.bb_pos,6);return ot?this.bb.__vector_len(this.bb_pos+ot):0}static startSessionState(ot){ot.startObject(2)}static addKernels(ot,nt){ot.addFieldOffset(0,nt,0)}static addSubGraphSessionStates(ot,nt){ot.addFieldOffset(1,nt,0)}static createSubGraphSessionStatesVector(ot,nt){ot.startVector(4,nt.length,4);for(let lt=nt.length-1;lt>=0;lt--)ot.addOffset(nt[lt]);return ot.endVector()}static startSubGraphSessionStatesVector(ot,nt){ot.startVector(4,nt,4)}static endSessionState(ot){return ot.endObject()}static createSessionState(ot,nt,lt){return ut.startSessionState(ot),ut.addKernels(ot,nt),ut.addSubGraphSessionStates(ot,lt),ut.endSessionState(ot)}}ct.SessionState=ut})(at.fbs||(at.fbs={}))})(st.experimental||(st.experimental={}))}(_.onnxruntime||(_.onnxruntime={})),function(st){(function(at){(function(ct){class ut{constructor(){this.bb=null,this.bb_pos=0}__init(ot,nt){return this.bb_pos=ot,this.bb=nt,this}static getRootAsInferenceSession(ot,nt){return(nt||new ut).__init(ot.readInt32(ot.position())+ot.position(),ot)}static getSizePrefixedRootAsInferenceSession(ot,nt){return ot.setPosition(ot.position()+tt.flatbuffers.SIZE_PREFIX_LENGTH),(nt||new ut).__init(ot.readInt32(ot.position())+ot.position(),ot)}static bufferHasIdentifier(ot){return ot.__has_identifier("ORTM")}ortVersion(ot){let nt=this.bb.__offset(this.bb_pos,4);return nt?this.bb.__string(this.bb_pos+nt,ot):null}model(ot){let nt=this.bb.__offset(this.bb_pos,6);return nt?(ot||new st.experimental.fbs.Model).__init(this.bb.__indirect(this.bb_pos+nt),this.bb):null}sessionState(ot){let nt=this.bb.__offset(this.bb_pos,8);return nt?(ot||new st.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+nt),this.bb):null}static startInferenceSession(ot){ot.startObject(3)}static addOrtVersion(ot,nt){ot.addFieldOffset(0,nt,0)}static addModel(ot,nt){ot.addFieldOffset(1,nt,0)}static addSessionState(ot,nt){ot.addFieldOffset(2,nt,0)}static endInferenceSession(ot){return ot.endObject()}static finishInferenceSessionBuffer(ot,nt){ot.finish(nt,"ORTM")}static finishSizePrefixedInferenceSessionBuffer(ot,nt){ot.finish(nt,"ORTM",!0)}static createInferenceSession(ot,nt,lt,ht){return ut.startInferenceSession(ot),ut.addOrtVersion(ot,nt),ut.addModel(ot,lt),ut.addSessionState(ot,ht),ut.endInferenceSession(ot)}}ct.InferenceSession=ut})(at.fbs||(at.fbs={}))})(st.experimental||(st.experimental={}))}(_.onnxruntime||(_.onnxruntime={}))},7448:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.OnnxjsSessionHandler=void 0;const tt=et(1670),rt=et(9162);_.OnnxjsSessionHandler=class{constructor(it){this.session=it,this.inputNames=this.session.inputNames,this.outputNames=this.session.outputNames}async dispose(){}async run(it,st,at){const ct=new Map;for(const ot in it)if(Object.hasOwnProperty.call(it,ot)){const nt=it[ot];ct.set(ot,new rt.Tensor(nt.dims,nt.type,void 0,void 0,nt.data))}const ut=await this.session.run(ct),dt={};return ut.forEach((ot,nt)=>{dt[nt]=new tt.Tensor(ot.type,ot.data,ot.dims)}),dt}startProfiling(){this.session.startProfiling()}endProfiling(){this.session.endProfiling()}}},6919:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.Session=void 0;const tt=et(7067),rt=et(1296),it=et(7091),st=et(1036),at=et(6231),ct=et(2644);_.Session=class{constructor(ut={}){this._initialized=!1,this.backendHint=ut.backendHint,this.profiler=at.Profiler.create(ut.profiler),this.context={profiler:this.profiler,graphInputTypes:[],graphInputDims:[]}}get inputNames(){return this._model.graph.getInputNames()}get outputNames(){return this._model.graph.getOutputNames()}startProfiling(){this.profiler.start()}endProfiling(){this.profiler.stop()}async loadModel(ut,dt,ot){await this.profiler.event("session","Session.loadModel",async()=>{const nt=await(0,it.resolveBackend)(this.backendHint);if(this.sessionHandler=nt.createSessionHandler(this.context),this._model=new ct.Model,typeof ut=="string"){const lt=ut.endsWith(".ort");if(typeof fetch>"u"){const ht=await(0,rt.promisify)(tt.readFile)(ut);this.initialize(ht,lt)}else{const ht=await fetch(ut),ft=await ht.arrayBuffer();this.initialize(new Uint8Array(ft),lt)}}else if(ArrayBuffer.isView(ut))this.initialize(ut);else{const lt=new Uint8Array(ut,dt||0,ot||ut.byteLength);this.initialize(lt)}})}initialize(ut,dt){if(this._initialized)throw new Error("already initialized");this.profiler.event("session","Session.initialize",()=>{const ot=this.sessionHandler.transformGraph?this.sessionHandler:void 0;this._model.load(ut,ot,dt),this.sessionHandler.onGraphInitialized&&this.sessionHandler.onGraphInitialized(this._model.graph),this.initializeOps(this._model.graph),this._executionPlan=new st.ExecutionPlan(this._model.graph,this._ops,this.profiler)}),this._initialized=!0}async run(ut){if(!this._initialized)throw new Error("session not initialized yet");return this.profiler.event("session","Session.run",async()=>{const dt=this.normalizeAndValidateInputs(ut),ot=await this._executionPlan.execute(this.sessionHandler,dt);return this.createOutput(ot)})}normalizeAndValidateInputs(ut){const dt=this._model.graph.getInputNames();if(Array.isArray(ut)){if(ut.length!==dt.length)throw new Error(`incorrect input array length: expected ${dt.length} but got ${ut.length}`)}else{if(ut.size!==dt.length)throw new Error(`incorrect input map size: expected ${dt.length} but got ${ut.size}`);const ot=new Array(ut.size);let nt=0;for(let lt=0;lt<dt.length;++lt){const ht=ut.get(dt[lt]);if(!ht)throw new Error(`missing input tensor for: '${name}'`);ot[nt++]=ht}ut=ot}if(this.context.graphInputTypes&&this.context.graphInputTypes.length!==0&&this.context.graphInputDims&&this.context.graphInputDims.length!==0)this.validateInputTensorDims(this.context.graphInputDims,ut,!1);else{const ot=this._model.graph.getInputIndices(),nt=this._model.graph.getValues(),lt=new Array(ot.length);for(let ht=0;ht<ot.length;++ht){const ft=nt[ot[ht]];lt[ht]=ft.type.shape.dims,this.context.graphInputTypes.push(ft.type.tensorType),this.context.graphInputDims.push(ut[ht].dims)}this.validateInputTensorDims(lt,ut,!0)}return this.validateInputTensorTypes(this.context.graphInputTypes,ut),ut}validateInputTensorTypes(ut,dt){for(let ot=0;ot<dt.length;ot++){const nt=ut[ot],lt=dt[ot].type;if(nt!==lt)throw new Error(`input tensor[${ot}] check failed: expected type '${nt}' but got ${lt}`)}}validateInputTensorDims(ut,dt,ot){for(let nt=0;nt<dt.length;nt++){const lt=ut[nt],ht=dt[nt].dims;if(!this.compareTensorDims(lt,ht,ot))throw new Error(`input tensor[${nt}] check failed: expected shape '[${lt.join(",")}]' but got [${ht.join(",")}]`)}}compareTensorDims(ut,dt,ot){if(ut.length!==dt.length)return!1;for(let nt=0;nt<ut.length;++nt)if(ut[nt]!==dt[nt]&&(!ot||ut[nt]!==0))return!1;return!0}createOutput(ut){const dt=this._model.graph.getOutputNames();if(ut.length!==dt.length)throw new Error("expected number of outputs do not match number of generated outputs");const ot=new Map;for(let nt=0;nt<dt.length;++nt)ot.set(dt[nt],ut[nt]);return ot}initializeOps(ut){const dt=ut.getNodes();this._ops=new Array(dt.length);for(let ot=0;ot<dt.length;ot++)this._ops[ot]=this.sessionHandler.resolve(dt[ot],this._model.opsets,ut)}}},9162:function(_e,_,et){var tt=this&&this.__importDefault||function(ft){return ft&&ft.__esModule?ft:{default:ft}};Object.defineProperty(_,"__esModule",{value:!0}),_.Tensor=void 0;const rt=et(3442),it=tt(et(3720)),st=et(1446),at=et(9395),ct=et(2517);var ut=at.onnxruntime.experimental.fbs;class dt{get data(){if(this.cache===void 0){const gt=this.dataProvider(this.dataId);if(gt.length!==this.size)throw new Error("Length of data provided by the Data Provider is inconsistent with the dims of this Tensor.");this.cache=gt}return this.cache}get stringData(){if(this.type!=="string")throw new TypeError("data type is not string");return this.data}get integerData(){switch(this.type){case"uint8":case"int8":case"uint16":case"int16":case"int32":case"uint32":case"bool":return this.data;default:throw new TypeError("data type is not integer (uint8, int8, uint16, int16, int32, uint32, bool)")}}get floatData(){switch(this.type){case"float32":case"float64":return this.data;default:throw new TypeError("data type is not float (float32, float64)")}}get numberData(){if(this.type!=="string")return this.data;throw new TypeError("type cannot be non-number (string)")}get(gt){return this.data[ct.ShapeUtil.indicesToOffset(gt,this.strides)]}set(gt,mt){this.data[ct.ShapeUtil.indicesToOffset(gt,this.strides)]=mt}async getData(){return this.cache===void 0&&(this.cache=await this.asyncDataProvider(this.dataId)),this.cache}get strides(){return this._strides||(this._strides=ct.ShapeUtil.computeStrides(this.dims)),this._strides}constructor(gt,mt,yt,bt,_t,vt=rt.Guid.create()){this.dims=gt,this.type=mt,this.dataProvider=yt,this.asyncDataProvider=bt,this.cache=_t,this.dataId=vt,this.size=ct.ShapeUtil.validateDimsAndCalcSize(gt);const xt=this.size,wt=yt===void 0&&bt===void 0&&_t===void 0;if(_t!==void 0&&_t.length!==xt)throw new RangeError("Input dims doesn't match data length.");if(mt==="string"){if(!(_t===void 0||Array.isArray(_t)&&_t.every(Tt=>typeof Tt=="string")))throw new TypeError("cache should be a string array");wt&&(this.cache=new Array(xt))}else{if(_t!==void 0){const Tt=nt(mt);if(!(_t instanceof Tt))throw new TypeError(`cache should be type ${Tt.name}`)}if(wt){const Tt=new ArrayBuffer(xt*function(St){switch(St){case"bool":case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;case"float64":return 8;default:throw new Error(`cannot calculate sizeof() on type ${St}`)}}(mt));this.cache=function(St,Et){return new(nt(Et))(St)}(Tt,mt)}}}static fromProto(gt){if(!gt)throw new Error("cannot construct Value from an empty tensor");const mt=ct.ProtoUtil.tensorDataTypeFromProto(gt.dataType),yt=ct.ProtoUtil.tensorDimsFromProto(gt.dims),bt=new dt(yt,mt);if(mt==="string")gt.stringData.forEach((_t,vt)=>{bt.data[vt]=(0,ct.decodeUtf8String)(_t)});else if(gt.rawData&&typeof gt.rawData.byteLength=="number"&&gt.rawData.byteLength>0){const _t=bt.data,vt=new DataView(gt.rawData.buffer,gt.rawData.byteOffset,gt.rawData.byteLength),xt=ot(gt.dataType),wt=gt.rawData.byteLength/xt;if(gt.rawData.byteLength%xt!=0)throw new Error("invalid buffer length");if(_t.length!==wt)throw new Error("buffer length mismatch");for(let Tt=0;Tt<wt;Tt++){const St=ht(vt,gt.dataType,Tt*xt);_t[Tt]=St}}else{let _t;switch(gt.dataType){case st.onnx.TensorProto.DataType.FLOAT:_t=gt.floatData;break;case st.onnx.TensorProto.DataType.INT32:case st.onnx.TensorProto.DataType.INT16:case st.onnx.TensorProto.DataType.UINT16:case st.onnx.TensorProto.DataType.INT8:case st.onnx.TensorProto.DataType.UINT8:case st.onnx.TensorProto.DataType.BOOL:_t=gt.int32Data;break;case st.onnx.TensorProto.DataType.INT64:_t=gt.int64Data;break;case st.onnx.TensorProto.DataType.DOUBLE:_t=gt.doubleData;break;case st.onnx.TensorProto.DataType.UINT32:case st.onnx.TensorProto.DataType.UINT64:_t=gt.uint64Data;break;default:throw new Error("unspecific error")}if(_t==null)throw new Error("failed to populate data from a tensorproto value");const vt=bt.data;if(vt.length!==_t.length)throw new Error("array length mismatch");for(let xt=0;xt<_t.length;xt++){const wt=_t[xt];it.default.isLong(wt)?vt[xt]=lt(wt,gt.dataType):vt[xt]=wt}}return bt}static fromData(gt,mt,yt){return new dt(mt,yt,void 0,void 0,gt)}static fromOrtTensor(gt){if(!gt)throw new Error("cannot construct Value from an empty tensor");const mt=ct.ProtoUtil.tensorDimsFromORTFormat(gt),yt=ct.ProtoUtil.tensorDataTypeFromProto(gt.dataType()),bt=new dt(mt,yt);if(yt==="string")for(let _t=0;_t<gt.stringDataLength();_t++)bt.data[_t]=gt.stringData(_t);else if(gt.rawDataArray()&&typeof gt.rawDataLength()=="number"&&gt.rawDataLength()>0){const _t=bt.data,vt=new DataView(gt.rawDataArray().buffer,gt.rawDataArray().byteOffset,gt.rawDataLength()),xt=ot(gt.dataType()),wt=gt.rawDataLength()/xt;if(gt.rawDataLength()%xt!=0)throw new Error("invalid buffer length");if(_t.length!==wt)throw new Error("buffer length mismatch");for(let Tt=0;Tt<wt;Tt++){const St=ht(vt,gt.dataType(),Tt*xt);_t[Tt]=St}}return bt}}function ot(ft){switch(ft){case st.onnx.TensorProto.DataType.UINT8:case st.onnx.TensorProto.DataType.INT8:case st.onnx.TensorProto.DataType.BOOL:return 1;case st.onnx.TensorProto.DataType.UINT16:case st.onnx.TensorProto.DataType.INT16:return 2;case st.onnx.TensorProto.DataType.FLOAT:case st.onnx.TensorProto.DataType.INT32:case st.onnx.TensorProto.DataType.UINT32:return 4;case st.onnx.TensorProto.DataType.INT64:case st.onnx.TensorProto.DataType.DOUBLE:case st.onnx.TensorProto.DataType.UINT64:return 8;default:throw new Error(`cannot calculate sizeof() on type ${st.onnx.TensorProto.DataType[ft]}`)}}function nt(ft){switch(ft){case"bool":case"uint8":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"uint16":return Uint16Array;case"int32":return Int32Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;default:throw new Error("unspecified error")}}function lt(ft,gt){if(gt===st.onnx.TensorProto.DataType.INT64||gt===ut.TensorDataType.INT64){if(ft.greaterThanOrEqual(2147483648)||ft.lessThan(-2147483648))throw new TypeError("int64 is not supported")}else{if(gt!==st.onnx.TensorProto.DataType.UINT32&&gt!==ut.TensorDataType.UINT32&&gt!==st.onnx.TensorProto.DataType.UINT64&&gt!==ut.TensorDataType.UINT64)throw new TypeError(`not a LONG type: ${st.onnx.TensorProto.DataType[gt]}`);if(ft.greaterThanOrEqual(4294967296)||ft.lessThan(0))throw new TypeError("uint64 is not supported")}return ft.toNumber()}function ht(ft,gt,mt){switch(gt){case st.onnx.TensorProto.DataType.BOOL:case st.onnx.TensorProto.DataType.UINT8:return ft.getUint8(mt);case st.onnx.TensorProto.DataType.INT8:return ft.getInt8(mt);case st.onnx.TensorProto.DataType.UINT16:return ft.getUint16(mt,!0);case st.onnx.TensorProto.DataType.INT16:return ft.getInt16(mt,!0);case st.onnx.TensorProto.DataType.FLOAT:return ft.getFloat32(mt,!0);case st.onnx.TensorProto.DataType.INT32:return ft.getInt32(mt,!0);case st.onnx.TensorProto.DataType.UINT32:return ft.getUint32(mt,!0);case st.onnx.TensorProto.DataType.INT64:return lt(it.default.fromBits(ft.getUint32(mt,!0),ft.getUint32(mt+4,!0),!1),gt);case st.onnx.TensorProto.DataType.DOUBLE:return ft.getFloat64(mt,!0);case st.onnx.TensorProto.DataType.UINT64:return lt(it.default.fromBits(ft.getUint32(mt,!0),ft.getUint32(mt+4,!0),!0),gt);default:throw new Error(`cannot read from DataView for type ${st.onnx.TensorProto.DataType[gt]}`)}}_.Tensor=dt},2517:function(_e,_,et){var tt=this&&this.__importDefault||function(gt){return gt&&gt.__esModule?gt:{default:gt}};Object.defineProperty(_,"__esModule",{value:!0}),_.decodeUtf8String=_.MAX_CLIP=_.MIN_CLIP=_.PoolConvUtil=_.ReduceUtil=_.SplitUtil=_.MathUtil=_.ShapeUtil=_.LongUtil=_.ProtoUtil=_.GemmUtil=_.arrayCopyHelper=_.BroadcastUtil=_.MatMulUtil=_.ArrayUtil=_.assert=_.checkInputsShape=void 0;const rt=et(5686),it=tt(et(3720)),st=et(1446),at=et(9162);_.checkInputsShape=function(gt,...mt){if(!gt||gt.length!==mt.length)return!1;for(let yt=0;yt<gt.length;yt++)if(!gt[yt].dims||gt[yt].dims.length!==mt[yt])return!1;return!0},_.assert=function(gt,mt){if(!gt)throw new Error(typeof mt=="string"?mt:mt())},_.ArrayUtil=class{static arraysEqual(gt,mt){if(gt.length!==mt.length)return!1;for(let yt=0;yt<gt.length;yt++)if(gt[yt]!==mt[yt])return!1;return!0}};class ct{static preprocessInputShapes(mt,yt){return[mt.length===1?[1,mt[0]]:mt,yt.length===1?[yt[0],1]:yt]}static postprocessOutputShape(mt,yt,bt){yt===1&&mt.splice(mt.length-2,1),bt===1&&mt.pop()}static calcMatMulShape(mt,yt){return mt[1]!==yt[0]?void 0:[mt[0],yt[1]]}}_.MatMulUtil=ct;class ut{static calcShape(mt,yt,bt=!1){const _t=mt.length,vt=yt.length;if(_t===0)return yt;if(vt===0)return mt;const xt=Math.max(mt.length,yt.length),wt=new Array(xt);if(bt){if(_t<2||vt<2)return;const Tt=ct.calcMatMulShape([mt[_t-2],mt[_t-1]],[yt[vt-2],yt[vt-1]]);if(Tt===void 0)return;[wt[xt-2],wt[xt-1]]=Tt}for(let Tt=bt?3:1;Tt<=xt;Tt++){const St=_t-Tt<0?1:mt[_t-Tt],Et=vt-Tt<0?1:yt[vt-Tt];if(St!==Et&&St>1&&Et>1)return;wt[xt-Tt]=Math.max(St,Et)}return wt}static index(mt,yt){const bt=new Array(yt.length);return ut.fillIndex(mt,yt,bt),bt}static fillIndex(mt,yt,bt){const _t=mt.length-yt.length;for(let vt=0;vt<yt.length;vt++)bt[vt]=mt[_t+vt]%yt[vt]}static calc(mt,yt,bt,_t,vt){const xt=ut.calcShape(mt.dims,yt.dims);if(xt){if(_t&&!nt.areEqual(xt,mt.dims))return;const wt=nt.size(xt),Tt=_t?mt:new at.Tensor(xt,vt||mt.type);if(xt.length===0)Tt.set([],bt(mt.get([]),yt.get([])));else{const St=new Array(xt.length),Et=new Array(mt.dims.length),Ot=new Array(yt.dims.length);let Rt,Pt=0,Mt=0,$t=!1,kt=!1;mt.dims.length===0&&(Pt=mt.get([]),$t=!0),yt.dims.length===0&&(Mt=yt.get([]),kt=!0);for(let Lt=0;Lt<wt;Lt++){Rt=Lt;for(let Nt=xt.length-1;Nt>=0;Nt--)St[Nt]=Rt%xt[Nt],Rt=Math.floor(Rt/xt[Nt]);$t||(ut.fillIndex(St,mt.dims,Et),Pt=mt.get(Et)),kt||(ut.fillIndex(St,yt.dims,Ot),Mt=yt.get(Ot)),Tt.set(St,bt(Pt,Mt))}}return Tt}}static isValidBroadcast(mt,yt){const bt=mt.length,_t=yt.length;if(bt>_t)return!1;for(let vt=1;vt<=bt;vt++)if(mt[bt-vt]!==1&&mt[bt-vt]!==yt[_t-vt])return!1;return!0}static getBroadcastDims(mt,yt){const bt=mt.length,_t=[];for(let vt=0;vt<bt;vt++){const xt=bt-1-vt,wt=mt[xt]||1;(yt[yt.length-1-vt]||1)>1&&wt===1&&_t.unshift(xt)}return _t}}_.BroadcastUtil=ut,_.arrayCopyHelper=function(gt,mt,yt,bt,_t){if(bt<0||bt>=mt.length)throw new Error("sourceIndex out of bounds");if(yt<0||yt>=gt.length)throw new Error("targetIndex out of bounds");if(bt+_t>mt.length)throw new Error("source indices to be copied are outside bounds");if(yt+_t>gt.length)throw new Error("target array is too small to hold result");for(let vt=0;vt<_t;vt++)gt[yt+vt]=mt[bt+vt]},_.GemmUtil=class{static getShapeOfGemmResult(gt,mt,yt,bt,_t){if(gt.length!==2||yt.length!==2)throw new Error("shape need to be of size 2");let vt,xt,wt;mt?(vt=gt[1],xt=gt[0]):(vt=gt[0],xt=gt[1]);let Tt=-1;if(bt?(wt=yt[0],Tt=1):(wt=yt[1],Tt=0),yt[Tt]!==xt)throw new Error("dimension mismatch");if(vt<=0||wt<=0||xt<=0)throw new Error("invalid shape specified");if(_t&&!ut.isValidBroadcast(_t,[vt,wt]))throw new Error("gemm: invalid bias shape for broadcast");return[vt,wt,xt]}};class dt{static tensorDataTypeFromProto(mt){switch(mt){case st.onnx.TensorProto.DataType.INT8:return"int8";case st.onnx.TensorProto.DataType.UINT8:return"uint8";case st.onnx.TensorProto.DataType.BOOL:return"bool";case st.onnx.TensorProto.DataType.INT16:return"int16";case st.onnx.TensorProto.DataType.UINT16:return"uint16";case st.onnx.TensorProto.DataType.INT32:return"int32";case st.onnx.TensorProto.DataType.UINT32:return"uint32";case st.onnx.TensorProto.DataType.FLOAT:return"float32";case st.onnx.TensorProto.DataType.DOUBLE:return"float64";case st.onnx.TensorProto.DataType.STRING:return"string";case st.onnx.TensorProto.DataType.INT64:return"int32";case st.onnx.TensorProto.DataType.UINT64:return"uint32";default:throw new Error(`unsupported data type: ${st.onnx.TensorProto.DataType[mt]}`)}}static tensorDataTypeStringToEnum(mt){switch(mt){case"int8":return st.onnx.TensorProto.DataType.INT8;case"uint8":return st.onnx.TensorProto.DataType.UINT8;case"bool":return st.onnx.TensorProto.DataType.BOOL;case"int16":return st.onnx.TensorProto.DataType.INT16;case"uint16":return st.onnx.TensorProto.DataType.UINT16;case"int32":return st.onnx.TensorProto.DataType.INT32;case"uint32":return st.onnx.TensorProto.DataType.UINT32;case"float32":return st.onnx.TensorProto.DataType.FLOAT;case"float64":return st.onnx.TensorProto.DataType.DOUBLE;case"string":return st.onnx.TensorProto.DataType.STRING;case"int64":return st.onnx.TensorProto.DataType.INT64;case"uint64":return st.onnx.TensorProto.DataType.UINT64;default:throw new Error(`unsupported data type: ${mt}`)}}static tensorDimsFromProto(mt){return mt.map(yt=>it.default.isLong(yt)?yt.toNumber():yt)}static tensorValueTypeFromProto(mt){return{tensorType:dt.tensorDataTypeFromProto(mt.elemType),shape:{dims:dt.tensorDimsFromProto(mt.shape.dim.map(yt=>yt.dimValue))}}}static tensorDimsFromORTFormat(mt){const yt=[];for(let bt=0;bt<mt.dimsLength();bt++)yt.push(ot.longToNumber(mt.dims(bt)));return yt}static tensorAttributesFromORTFormat(mt){const yt=[];for(let bt=0;bt<mt.attributesLength();bt++)yt.push(mt.attributes(bt));return yt}}_.ProtoUtil=dt;class ot{static longToNumber(mt,yt){return it.default.isLong(mt)?mt.toNumber():mt instanceof rt.flatbuffers.Long?it.default.fromValue({low:mt.low,high:mt.high,unsigned:yt!=null&&yt}).toNumber():mt}static isLong(mt){return it.default.isLong(mt)||mt instanceof rt.flatbuffers.Long}}_.LongUtil=ot;class nt{static size(mt){return nt.getSizeFromDimensionRange(mt,0,mt.length)}static sizeFromDimension(mt,yt){if(yt<0||yt>mt.length)throw new Error(`invalid dimension of ${yt} for sizeFromDimension as Tensor has ${mt.length} dimensions.`);return nt.getSizeFromDimensionRange(mt,yt,mt.length)}static sizeToDimension(mt,yt){if(yt<0||yt>mt.length)throw new Error(`invalid dimension of ${yt} for sizeToDimension as Tensor has ${mt.length} dimensions.`);return nt.getSizeFromDimensionRange(mt,0,yt)}static getSizeFromDimensionRange(mt,yt,bt){let _t=1;for(let vt=yt;vt<bt;vt++){if(mt[vt]<=0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains 0 or negative values in them.");_t*=mt[vt]}return _t}static computeStrides(mt){const yt=mt.length;if(yt===0)return[];if(yt===1)return[1];const bt=new Array(yt);bt[yt-1]=1,bt[yt-2]=mt[yt-1];for(let _t=yt-3;_t>=0;--_t)bt[_t]=bt[_t+1]*mt[_t+1];return bt}static transpose(mt){return mt.slice().reverse()}static indicesToOffset(mt,yt,bt){bt===void 0&&(bt=mt.length);let _t=0;for(let vt=0;vt<bt;++vt)_t+=yt[vt]*mt[vt];return _t}static offsetToIndices(mt,yt){const bt=yt.length;if(bt===0)return[];if(bt===1)return[mt*yt[0]];const _t=new Array(yt.length);for(let vt=0;vt<_t.length-1;++vt)_t[vt]=Math.floor(mt/yt[vt]),mt-=_t[vt]*yt[vt];return _t[_t.length-1]=mt,_t}static normalizeAxis(mt,yt){if(mt<-yt&&mt>=yt)throw new Error("unsupported axis for this operation.");return mt<0?mt+yt:mt}static normalizeAxes(mt,yt){return mt.map(bt=>this.normalizeAxis(bt,yt))}static incrementIndex(mt,yt,bt){if(yt.length===0||mt.length===0)throw new Error("Index incrementing unsupported for scalar Tensor");if(bt===void 0)bt=yt.length;else if(bt<=0||bt>yt.length)throw new Error("Incorrect axis to increment on");for(let _t=bt-1;_t>=0&&(mt[_t]++,!(mt[_t]<yt[_t]));--_t)mt[_t]=0}static calculateReshapedDims(mt,yt){if(yt.length===0){if(mt.length===0||nt.size(mt)===1)return[];throw new Error("cannot reshape to a scalar Tensor")}const bt=yt.length,_t=new Array(bt);let vt=-1,xt=1;for(let Tt=0;Tt<bt;Tt++){if(yt[Tt]<-1)throw new Error("a dimension in shape hints cannot be less than -1");if(yt[Tt]===-1){if(vt!==-1)throw new Error("at most one dimension in shape hints can be -1");vt=Tt}else{if(yt[Tt]===0){if(Tt>=mt.length)throw new Error("the dimension with value zero exceeds the dimension size of the input tensor");_t[Tt]=mt[Tt]}else _t[Tt]=yt[Tt];xt*=_t[Tt]}}const wt=nt.size(mt);if(vt!==-1){if(wt%xt!=0)throw new Error(`the input tensor cannot be reshaped to the requested shape. Input shape: [${mt}] Output shape: [${yt}]`);_t[vt]=wt/xt}else if(xt!==wt)throw new Error("reshapedDims and originalDims don't have matching sizes");return _t}static sortBasedOnPerm(mt,yt){return yt?yt.map(bt=>mt[bt]):mt.slice().reverse()}static padShape(mt,yt){const bt=mt.length;return mt.map((_t,vt)=>_t+yt[vt]+yt[vt+bt])}static areEqual(mt,yt){return mt.length===yt.length&&mt.every((bt,_t)=>bt===yt[_t])}static validateDimsAndCalcSize(mt){if(mt.length>6)throw new TypeError("Only rank 0 to 6 is supported for tensor shape.");let yt=1;for(const bt of mt){if(!Number.isInteger(bt))throw new TypeError(`Invalid shape: ${bt} is not an integer`);if(bt<0||bt>2147483647)throw new TypeError(`Invalid shape: length ${bt} is not allowed`);yt*=bt}return yt}static flattenShape(mt,yt){yt<0&&(yt+=mt.length);const bt=mt.reduce((vt,xt)=>vt*xt,1),_t=mt.slice(yt).reduce((vt,xt)=>vt*xt,1);return[bt/_t,_t]}static squeezeShape(mt,yt){const bt=new Array;yt=nt.normalizeAxes(yt,mt.length);for(let _t=0;_t<mt.length;_t++){const vt=yt.indexOf(_t)>=0;if(vt&&mt[_t]!==1)throw new Error("squeeze an axis of size different than 1");(yt.length===0&&mt[_t]>1||yt.length>0&&!vt)&&bt.push(mt[_t])}return bt}static unsqueezeShape(mt,yt){const bt=new Array(mt.length+yt.length);bt.fill(0);for(let vt=0;vt<yt.length;vt++){const xt=nt.normalizeAxis(yt[vt],bt.length);if(xt>=bt.length)throw new Error("'axes' has an out of range axis");if(bt[xt]!==0)throw new Error("'axes' has a duplicate axis");bt[xt]=1}let _t=0;for(let vt=0;vt<bt.length;vt++)bt[vt]===0&&(bt[vt]=mt[_t++]);if(_t!==mt.length)throw new Error("the unsqueezed dimension could not be established");return bt}}_.ShapeUtil=nt,_.MathUtil=class{static sqr(gt,mt,yt,bt,_t){if(bt<0||bt>=mt.length)throw new Error("sourceIndex out of bounds");if(yt<0||yt>=gt.length)throw new Error("targetIndex out of bounds");if(bt+_t>mt.length)throw new Error("source indices to be copied are outside bounds");if(yt+_t>gt.length)throw new Error("target array is too small to hold result");for(let vt=0;vt<_t;vt++)gt[yt+vt]+=Math.pow(mt[bt+vt],2)}static axpy(gt,mt,yt,bt,_t,vt){if(bt<0||bt>=mt.length)throw new Error("sourceIndex out of bounds");if(yt<0||yt>=gt.length)throw new Error("targetIndex out of bounds");if(bt+_t>mt.length)throw new Error("source indices to be copied are outside bounds");if(yt+_t>gt.length)throw new Error("target array is too small to hold result");for(let xt=0;xt<_t;xt++)gt[yt+xt]+=vt*mt[bt+xt]}static powx(gt,mt,yt,bt,_t,vt){if(bt<0||bt>=mt.length)throw new Error("sourceIndex out of bounds");if(yt<0||yt>=gt.length)throw new Error("targetIndex out of bounds");if(bt+_t>mt.length)throw new Error("source indices to be copied are outside bounds");if(yt+_t>gt.length)throw new Error("target array is too small to hold result");for(let xt=0;xt<_t;xt++)gt[yt+xt]=Math.pow(mt[bt+xt],vt)}static mul(gt,mt,yt,bt,_t){if(bt<0||bt>=mt.length)throw new Error("sourceIndex out of bounds");if(yt<0||yt>=gt.length)throw new Error("targetIndex out of bounds");if(bt+_t>mt.length)throw new Error("source indices to be copied are outside bounds");if(yt+_t>gt.length)throw new Error("target array is too small to hold result");for(let vt=0;vt<_t;vt++)gt[yt+vt]=mt[bt+vt]*gt[yt+vt]}};class lt{static splitShape(mt,yt,bt,_t){if(bt.length===0){if(!_t)throw new Error("need to know number of outputs when the 'split' attribute is not specified");lt.determineSplit(mt[yt],_t,bt)}const vt=[],xt=[0];for(let wt=0;wt<bt.length;++wt){wt!==0&&xt.push(xt[wt-1]+bt[wt-1]);const Tt=mt.slice();Tt[yt]=bt[wt],vt.push(Tt)}return[vt,xt]}static determineSplit(mt,yt,bt){if(mt%yt!=0)throw new Error("cannot split tensor to equal sized parts");for(let _t=0;_t<yt;++_t)bt.push(mt/yt)}}_.SplitUtil=lt;class ht{static calcReduce(mt,yt,bt,_t,vt){const xt=mt.dims.slice(0);yt.length===0&&xt.forEach((Pt,Mt)=>yt.push(Mt));const wt=ht.calcReduceShape(xt,yt,!0),Tt=nt.size(wt),St=new at.Tensor(wt,mt.type),Et=nt.computeStrides(wt),Ot=nt.computeStrides(xt),Rt=new Array(xt.length);for(let Pt=0;Pt<Tt;Pt++){const Mt=nt.offsetToIndices(Pt,Et);ut.fillIndex(Mt,xt,Rt),St.set(Mt,ht.calcReduceByAxis(mt.numberData,yt,xt,0,nt.indicesToOffset(Rt,Ot),_t,vt))}return bt?St:new at.Tensor(ht.calcReduceShape(xt,yt,bt),St.type,void 0,void 0,St.data,St.dataId)}static calcReduceByAxis(mt,yt,bt,_t,vt,xt,wt){let Tt=0;if(_t>=yt.length)return xt(mt[vt]);const St=yt[_t],Et=St>=bt.length?1:nt.size(bt.slice(St+1));for(let Ot=0;Ot<bt[St];Ot++)Tt=Ot===0?ht.calcReduceByAxis(mt,yt,bt,_t+1,vt,xt,wt):wt(Tt,ht.calcReduceByAxis(mt,yt,bt,_t+1,vt,xt,wt)),vt+=Et;return Tt}static calcReduceShape(mt,yt,bt){const _t=mt.slice();for(let vt=0;vt<yt.length;vt++)_t[yt[vt]]=bt?1:0;return _t.filter(vt=>vt!==0)}}_.ReduceUtil=ht;class ft{static adjustPoolAttributes(mt,yt,bt,_t,vt,xt){if(!mt&&bt.length!==yt.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(mt)for(let wt=0;wt<yt.length-2;wt++)wt>=bt.length?bt.push(yt[wt+2]):bt[wt]=yt[wt+2];for(let wt=0;wt<bt.length;wt++)if(wt<_t.length){if(_t[wt]<0)throw new Error("strides should be greater than or equal to 1")}else _t.push(1);for(let wt=0;wt<bt.length;wt++)if(wt<vt.length){if(vt[wt]<0)throw new Error("dilations should be greater than or equal to 1")}else vt.push(1);for(let wt=0;wt<2*bt.length;wt++)if(wt<xt.length){if(xt[wt]<0)throw new Error("pad should be greater than or equal to 1")}else xt.push(0);for(let wt=0;wt<bt.length;wt++){if(bt[wt]<=0)throw new Error("kernel shapes need to be greater than 0");if(xt[wt]>=bt[wt]||xt[wt+bt.length]>=bt[wt])throw new Error("pads should be smaller than kernel")}}static adjustPadsBasedOnAutoPad(mt,yt,bt,_t,vt,xt){if(xt){if(vt.length!==2*(mt.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(yt.length!==mt.length-2)throw new Error("length of strides should be the length of data dimensions");if(_t.length!==mt.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(let wt=0;wt<mt.length-2;wt++)ft.adjustPadAndReturnShape(mt[wt+2],yt[wt],bt[wt],_t[wt],vt,wt,wt+mt.length-2,xt)}}static computePoolOutputShape(mt,yt,bt,_t,vt,xt,wt){if(yt.length<=0)throw new Error("input shape must be of size greater than 0");const Tt=[yt[0],yt[1]];return ft.computeShapeHelper(mt,yt,Tt,bt,_t,vt,xt,wt),Tt}static computeConvOutputShape(mt,yt,bt,_t,vt,xt,wt){if(mt.length<=0||yt.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");const Tt=[mt[0],yt[0]];return ft.computeShapeHelper(!1,mt,Tt,bt,_t,vt,xt,wt),Tt}static computeShapeHelper(mt,yt,bt,_t,vt,xt,wt,Tt){if(mt)for(let St=0;St<yt.length-2;St++)bt.push(1);else for(let St=0;St<yt.length-2;St++)bt.push(ft.adjustPadAndReturnShape(yt[St+2],_t[St],vt[St],xt[St],wt,St,St+yt.length-2,Tt))}static adjustPadAndReturnShape(mt,yt,bt,_t,vt,xt,wt,Tt){const St=bt*(_t-1)+1;if(!Tt||Tt==="NOTSET")return Math.floor((mt+vt[xt]+vt[wt]-St)/yt+1);switch(Tt){case"VALID":return vt[xt]=0,vt[wt]=0,Math.floor((mt-St)/yt+1);case"SAME_LOWER":case"SAME_UPPER":if(bt!==1)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");{const Et=((mt+yt-1)/yt-1)*yt+_t-mt;return vt[xt]=Math.floor(Tt==="SAME_LOWER"?(Et+1)/2:Et/2),vt[wt]=Et-vt[xt],Math.floor((mt+Et-_t)/yt+1)}default:throw new Error("Unsupported AutoPad type")}}}_.PoolConvUtil=ft,_.MIN_CLIP=-34028234663852886e22,_.MAX_CLIP=34028234663852886e22,_.decodeUtf8String=function(gt){return new TextDecoder().decode(gt)}},7967:(_e,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.iterateExtraOptions=void 0,_.iterateExtraOptions=(et,tt,rt,it)=>{if(typeof et=="object"&&et!==null){if(rt.has(et))throw new Error("Circular reference in options");rt.add(et)}Object.entries(et).forEach(([st,at])=>{const ct=tt?tt+st:st;if(typeof at=="object")(0,_.iterateExtraOptions)(at,ct+".",rt,it);else if(typeof at=="string"||typeof at=="number")it(ct,at.toString());else{if(typeof at!="boolean")throw new Error("Can't handle extra config type: "+typeof at);it(ct,at?"1":"0")}})}},2157:function(_e,_,et){var tt,rt=this&&this.__createBinding||(Object.create?function(Et,Ot,Rt,Pt){Pt===void 0&&(Pt=Rt);var Mt=Object.getOwnPropertyDescriptor(Ot,Rt);Mt&&!("get"in Mt?!Ot.__esModule:Mt.writable||Mt.configurable)||(Mt={enumerable:!0,get:function(){return Ot[Rt]}}),Object.defineProperty(Et,Pt,Mt)}:function(Et,Ot,Rt,Pt){Pt===void 0&&(Pt=Rt),Et[Pt]=Ot[Rt]}),it=this&&this.__setModuleDefault||(Object.create?function(Et,Ot){Object.defineProperty(Et,"default",{enumerable:!0,value:Ot})}:function(Et,Ot){Et.default=Ot}),st=this&&this.__importStar||function(Et){if(Et&&Et.__esModule)return Et;var Ot={};if(Et!=null)for(var Rt in Et)Rt!=="default"&&Object.prototype.hasOwnProperty.call(Et,Rt)&&rt(Ot,Et,Rt);return it(Ot,Et),Ot};Object.defineProperty(_,"__esModule",{value:!0}),_.endProfiling=_.run=_.releaseSession=_.createSession=_.createSessionFinalize=_.createSessionAllocate=_.initOrt=_.initWasm=void 0;const at=et(1670),ct=st(et(349)),ut=et(6361),dt=()=>!!at.env.wasm.proxy&&typeof document<"u";let ot,nt,lt,ht=!1,ft=!1,gt=!1;const mt=[],yt=[],bt=[],_t=[],vt=[],xt=[],wt=()=>{if(ht||!ft||gt||!ot)throw new Error("worker not ready")},Tt=Et=>{switch(Et.data.type){case"init-wasm":ht=!1,Et.data.err?(gt=!0,nt[1](Et.data.err)):(ft=!0,nt[0]());break;case"init-ort":Et.data.err?lt[1](Et.data.err):lt[0]();break;case"create_allocate":Et.data.err?mt.shift()[1](Et.data.err):mt.shift()[0](Et.data.out);break;case"create_finalize":Et.data.err?yt.shift()[1](Et.data.err):yt.shift()[0](Et.data.out);break;case"create":Et.data.err?bt.shift()[1](Et.data.err):bt.shift()[0](Et.data.out);break;case"release":Et.data.err?_t.shift()[1](Et.data.err):_t.shift()[0]();break;case"run":Et.data.err?vt.shift()[1](Et.data.err):vt.shift()[0](Et.data.out);break;case"end-profiling":Et.data.err?xt.shift()[1](Et.data.err):xt.shift()[0]()}},St=typeof document<"u"?(tt=document==null?void 0:document.currentScript)===null||tt===void 0?void 0:tt.src:void 0;_.initWasm=async()=>{if(dt()){if(ft)return;if(ht)throw new Error("multiple calls to 'initWasm()' detected.");if(gt)throw new Error("previous call to 'initWasm()' failed.");return ht=!0,at.env.wasm.wasmPaths===void 0&&St&&St.indexOf("blob:")!==0&&(at.env.wasm.wasmPaths=St.substr(0,+St.lastIndexOf("/")+1)),new Promise((Et,Ot)=>{ot==null||ot.terminate(),ot=et(9710).Z(),ot.onmessage=Tt,nt=[Et,Ot];const Rt={type:"init-wasm",in:at.env.wasm};ot.postMessage(Rt)})}return(0,ut.initializeWebAssembly)(at.env.wasm)},_.initOrt=async(Et,Ot)=>{if(dt())return wt(),new Promise((Rt,Pt)=>{lt=[Rt,Pt];const Mt={type:"init-ort",in:{numThreads:Et,loggingLevel:Ot}};ot.postMessage(Mt)});ct.initOrt(Et,Ot)},_.createSessionAllocate=async Et=>dt()?(wt(),new Promise((Ot,Rt)=>{mt.push([Ot,Rt]);const Pt={type:"create_allocate",in:{model:Et}};ot.postMessage(Pt,[Et.buffer])})):ct.createSessionAllocate(Et),_.createSessionFinalize=async(Et,Ot)=>dt()?(wt(),new Promise((Rt,Pt)=>{yt.push([Rt,Pt]);const Mt={type:"create_finalize",in:{modeldata:Et,options:Ot}};ot.postMessage(Mt)})):ct.createSessionFinalize(Et,Ot),_.createSession=async(Et,Ot)=>dt()?(wt(),new Promise((Rt,Pt)=>{bt.push([Rt,Pt]);const Mt={type:"create",in:{model:Et,options:Ot}};ot.postMessage(Mt,[Et.buffer])})):ct.createSession(Et,Ot),_.releaseSession=async Et=>{if(dt())return wt(),new Promise((Ot,Rt)=>{_t.push([Ot,Rt]);const Pt={type:"release",in:Et};ot.postMessage(Pt)});ct.releaseSession(Et)},_.run=async(Et,Ot,Rt,Pt,Mt)=>dt()?(wt(),new Promise(($t,kt)=>{vt.push([$t,kt]);const Lt={type:"run",in:{sessionId:Et,inputIndices:Ot,inputs:Rt,outputIndices:Pt,options:Mt}};ot.postMessage(Lt,ct.extractTransferableBuffers(Rt))})):ct.run(Et,Ot,Rt,Pt,Mt),_.endProfiling=async Et=>{if(dt())return wt(),new Promise((Ot,Rt)=>{xt.push([Ot,Rt]);const Pt={type:"end-profiling",in:Et};ot.postMessage(Pt)});ct.endProfiling(Et)}},586:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.setRunOptions=void 0;const tt=et(7967),rt=et(4983),it=et(6361);_.setRunOptions=st=>{const at=(0,it.getInstance)();let ct=0;const ut=[],dt=st||{};try{if((st==null?void 0:st.logSeverityLevel)===void 0)dt.logSeverityLevel=2;else if(typeof st.logSeverityLevel!="number"||!Number.isInteger(st.logSeverityLevel)||st.logSeverityLevel<0||st.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${st.logSeverityLevel}`);if((st==null?void 0:st.logVerbosityLevel)===void 0)dt.logVerbosityLevel=0;else if(typeof st.logVerbosityLevel!="number"||!Number.isInteger(st.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${st.logVerbosityLevel}`);(st==null?void 0:st.terminate)===void 0&&(dt.terminate=!1);let ot=0;if((st==null?void 0:st.tag)!==void 0&&(ot=(0,rt.allocWasmString)(st.tag,ut)),ct=at._OrtCreateRunOptions(dt.logSeverityLevel,dt.logVerbosityLevel,!!dt.terminate,ot),ct===0)throw new Error("Can't create run options");return(st==null?void 0:st.extra)!==void 0&&(0,tt.iterateExtraOptions)(st.extra,"",new WeakSet,(nt,lt)=>{const ht=(0,rt.allocWasmString)(nt,ut),ft=(0,rt.allocWasmString)(lt,ut);if(at._OrtAddRunConfigEntry(ct,ht,ft)!==0)throw new Error(`Can't set a run config entry: ${nt} - ${lt}`)}),[ct,ut]}catch(ot){throw ct!==0&&at._OrtReleaseRunOptions(ct),ut.forEach(at._free),ot}}},2306:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.OnnxruntimeWebAssemblySessionHandler=void 0;const tt=et(2806),rt=et(1670),it=et(2850),st=et(2157);let at;_.OnnxruntimeWebAssemblySessionHandler=class{async createSessionAllocate(ct){const ut=await fetch(ct),dt=await ut.arrayBuffer();return(0,st.createSessionAllocate)(new Uint8Array(dt))}async loadModel(ct,ut){if(at||(await(0,st.initOrt)(rt.env.wasm.numThreads,(dt=>{switch(dt){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${dt}`)}})(rt.env.logLevel)),at=!0),typeof ct=="string")if(typeof fetch>"u"){const dt=await(0,it.promisify)(tt.readFile)(ct);[this.sessionId,this.inputNames,this.outputNames]=await(0,st.createSession)(dt,ut)}else{const dt=await this.createSessionAllocate(ct);[this.sessionId,this.inputNames,this.outputNames]=await(0,st.createSessionFinalize)(dt,ut)}else[this.sessionId,this.inputNames,this.outputNames]=await(0,st.createSession)(ct,ut)}async dispose(){return(0,st.releaseSession)(this.sessionId)}async run(ct,ut,dt){const ot=[],nt=[];Object.entries(ct).forEach(gt=>{const mt=gt[0],yt=gt[1],bt=this.inputNames.indexOf(mt);if(bt===-1)throw new Error(`invalid input '${mt}'`);ot.push(yt),nt.push(bt)});const lt=[];Object.entries(ut).forEach(gt=>{const mt=gt[0],yt=this.outputNames.indexOf(mt);if(yt===-1)throw new Error(`invalid output '${mt}'`);lt.push(yt)});const ht=await(0,st.run)(this.sessionId,nt,ot.map(gt=>[gt.type,gt.dims,gt.data]),lt,dt),ft={};for(let gt=0;gt<ht.length;gt++)ft[this.outputNames[lt[gt]]]=new rt.Tensor(ht[gt][0],ht[gt][2],ht[gt][1]);return ft}startProfiling(){}endProfiling(){(0,st.endProfiling)(this.sessionId)}}},4919:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.setSessionOptions=void 0;const tt=et(7967),rt=et(4983),it=et(6361);_.setSessionOptions=st=>{const at=(0,it.getInstance)();let ct=0;const ut=[],dt=st||{};(ot=>{ot.extra||(ot.extra={}),ot.extra.session||(ot.extra.session={});const nt=ot.extra.session;nt.use_ort_model_bytes_directly||(nt.use_ort_model_bytes_directly="1")})(dt);try{(st==null?void 0:st.graphOptimizationLevel)===void 0&&(dt.graphOptimizationLevel="all");const ot=(ht=>{switch(ht){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${ht}`)}})(dt.graphOptimizationLevel);(st==null?void 0:st.enableCpuMemArena)===void 0&&(dt.enableCpuMemArena=!0),(st==null?void 0:st.enableMemPattern)===void 0&&(dt.enableMemPattern=!0),(st==null?void 0:st.executionMode)===void 0&&(dt.executionMode="sequential");const nt=(ht=>{switch(ht){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${ht}`)}})(dt.executionMode);let lt=0;if((st==null?void 0:st.logId)!==void 0&&(lt=(0,rt.allocWasmString)(st.logId,ut)),(st==null?void 0:st.logSeverityLevel)===void 0)dt.logSeverityLevel=2;else if(typeof st.logSeverityLevel!="number"||!Number.isInteger(st.logSeverityLevel)||st.logSeverityLevel<0||st.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${st.logSeverityLevel}`);if((st==null?void 0:st.logVerbosityLevel)===void 0)dt.logVerbosityLevel=0;else if(typeof st.logVerbosityLevel!="number"||!Number.isInteger(st.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${st.logVerbosityLevel}`);if((st==null?void 0:st.enableProfiling)===void 0&&(dt.enableProfiling=!1),ct=at._OrtCreateSessionOptions(ot,!!dt.enableCpuMemArena,!!dt.enableMemPattern,nt,!!dt.enableProfiling,0,lt,dt.logSeverityLevel,dt.logVerbosityLevel),ct===0)throw new Error("Can't create session options");return st!=null&&st.executionProviders&&((ht,ft,gt)=>{for(const mt of ft){let yt=typeof mt=="string"?mt:mt.name;switch(yt){case"xnnpack":yt="XNNPACK";break;case"wasm":case"cpu":continue;default:throw new Error(`not supported EP: ${yt}`)}const bt=(0,rt.allocWasmString)(yt,gt);if((0,it.getInstance)()._OrtAppendExecutionProvider(ht,bt)!==0)throw new Error(`Can't append execution provider: ${yt}`)}})(ct,st.executionProviders,ut),(st==null?void 0:st.extra)!==void 0&&(0,tt.iterateExtraOptions)(st.extra,"",new WeakSet,(ht,ft)=>{const gt=(0,rt.allocWasmString)(ht,ut),mt=(0,rt.allocWasmString)(ft,ut);if(at._OrtAddSessionConfigEntry(ct,gt,mt)!==0)throw new Error(`Can't set a session config entry: ${ht} - ${ft}`)}),[ct,ut]}catch(ot){throw ct!==0&&at._OrtReleaseSessionOptions(ct),ut.forEach(at._free),ot}}},4983:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.allocWasmString=void 0;const tt=et(6361);_.allocWasmString=(rt,it)=>{const st=(0,tt.getInstance)(),at=st.lengthBytesUTF8(rt)+1,ct=st._malloc(at);return st.stringToUTF8(rt,ct,at),it.push(ct),ct}},349:(_e,_,et)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.extractTransferableBuffers=_.endProfiling=_.run=_.releaseSession=_.createSession=_.createSessionFinalize=_.createSessionAllocate=_.initOrt=void 0;const tt=et(586),rt=et(4919),it=et(4983),st=et(6361);_.initOrt=(ot,nt)=>{const lt=(0,st.getInstance)()._OrtInit(ot,nt);if(lt!==0)throw new Error(`Can't initialize onnxruntime. error code = ${lt}`)};const at=new Map;_.createSessionAllocate=ot=>{const nt=(0,st.getInstance)(),lt=nt._malloc(ot.byteLength);return nt.HEAPU8.set(ot,lt),[lt,ot.byteLength]},_.createSessionFinalize=(ot,nt)=>{const lt=(0,st.getInstance)();let ht=0,ft=0,gt=[];try{if([ft,gt]=(0,rt.setSessionOptions)(nt),ht=lt._OrtCreateSession(ot[0],ot[1],ft),ht===0)throw new Error("Can't create a session")}finally{lt._free(ot[0]),lt._OrtReleaseSessionOptions(ft),gt.forEach(lt._free)}const mt=lt._OrtGetInputCount(ht),yt=lt._OrtGetOutputCount(ht),bt=[],_t=[],vt=[],xt=[];for(let wt=0;wt<mt;wt++){const Tt=lt._OrtGetInputName(ht,wt);if(Tt===0)throw new Error("Can't get an input name");_t.push(Tt),bt.push(lt.UTF8ToString(Tt))}for(let wt=0;wt<yt;wt++){const Tt=lt._OrtGetOutputName(ht,wt);if(Tt===0)throw new Error("Can't get an output name");xt.push(Tt),vt.push(lt.UTF8ToString(Tt))}return at.set(ht,[ht,_t,xt]),[ht,bt,vt]},_.createSession=(ot,nt)=>{const lt=(0,_.createSessionAllocate)(ot);return(0,_.createSessionFinalize)(lt,nt)},_.releaseSession=ot=>{const nt=(0,st.getInstance)(),lt=at.get(ot);if(!lt)throw new Error("invalid session id");const ht=lt[0],ft=lt[1],gt=lt[2];ft.forEach(nt._OrtFree),gt.forEach(nt._OrtFree),nt._OrtReleaseSession(ht),at.delete(ot)};const ct=ot=>{switch(ot){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${ot}`)}},ut=ot=>{switch(ot){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${ot}`)}},dt=ot=>{switch(ot){case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${ot}`)}};_.run=(ot,nt,lt,ht,ft)=>{const gt=(0,st.getInstance)(),mt=at.get(ot);if(!mt)throw new Error("invalid session id");const yt=mt[0],bt=mt[1],_t=mt[2],vt=nt.length,xt=ht.length;let wt=0,Tt=[];const St=[],Et=[];try{[wt,Tt]=(0,tt.setRunOptions)(ft);for(let kt=0;kt<vt;kt++){const Lt=lt[kt][0],Nt=lt[kt][1],zt=lt[kt][2];let Ut,Vt;if(Array.isArray(zt)){Vt=4*zt.length,Ut=gt._malloc(Vt),Et.push(Ut);let ir=Ut/4;for(let er=0;er<zt.length;er++){if(typeof zt[er]!="string")throw new TypeError(`tensor data at index ${er} is not a string`);gt.HEAPU32[ir++]=(0,it.allocWasmString)(zt[er],Et)}}else Vt=zt.byteLength,Ut=gt._malloc(Vt),Et.push(Ut),gt.HEAPU8.set(new Uint8Array(zt.buffer,zt.byteOffset,Vt),Ut);const Ht=gt.stackSave(),sr=gt.stackAlloc(4*Nt.length);try{let ir=sr/4;Nt.forEach(dr=>gt.HEAP32[ir++]=dr);const er=gt._OrtCreateTensor(ct(Lt),Ut,Vt,sr,Nt.length);if(er===0)throw new Error("Can't create a tensor");St.push(er)}finally{gt.stackRestore(Ht)}}const Ot=gt.stackSave(),Rt=gt.stackAlloc(4*vt),Pt=gt.stackAlloc(4*vt),Mt=gt.stackAlloc(4*xt),$t=gt.stackAlloc(4*xt);try{let kt=Rt/4,Lt=Pt/4,Nt=Mt/4,zt=$t/4;for(let Ht=0;Ht<vt;Ht++)gt.HEAPU32[kt++]=St[Ht],gt.HEAPU32[Lt++]=bt[nt[Ht]];for(let Ht=0;Ht<xt;Ht++)gt.HEAPU32[Nt++]=0,gt.HEAPU32[zt++]=_t[ht[Ht]];let Ut=gt._OrtRun(yt,Pt,Rt,vt,$t,xt,Mt,wt);const Vt=[];if(Ut===0)for(let Ht=0;Ht<xt;Ht++){const sr=gt.HEAPU32[Mt/4+Ht],ir=gt.stackSave(),er=gt.stackAlloc(16);let dr,gr=0;try{if(Ut=gt._OrtGetTensorData(sr,er,er+4,er+8,er+12),Ut!==0)throw new Error(`Can't access output tensor data. error code = ${Ut}`);let Qt=er/4;const Jt=gt.HEAPU32[Qt++];gr=gt.HEAPU32[Qt++];const nr=gt.HEAPU32[Qt++],lr=gt.HEAPU32[Qt++],hr=[];for(let mr=0;mr<lr;mr++)hr.push(gt.HEAPU32[nr/4+mr]);gt._OrtFree(nr);const ur=hr.length===0?1:hr.reduce((mr,Mr)=>mr*Mr);if(dr=ut(Jt),dr==="string"){const mr=[];let Mr=gr/4;for(let Fr=0;Fr<ur;Fr++){const Gr=gt.HEAPU32[Mr++],Nr=Fr===ur-1?void 0:gt.HEAPU32[Mr]-Gr;mr.push(gt.UTF8ToString(Gr,Nr))}Vt.push([dr,hr,mr])}else{const mr=new(dt(dr))(ur);new Uint8Array(mr.buffer,mr.byteOffset,mr.byteLength).set(gt.HEAPU8.subarray(gr,gr+mr.byteLength)),Vt.push([dr,hr,mr])}}finally{gt.stackRestore(ir),dr==="string"&&gr&&gt._free(gr),gt._OrtReleaseTensor(sr)}}if(Ut===0)return Vt;throw new Error(`failed to call OrtRun(). error code = ${Ut}.`)}finally{gt.stackRestore(Ot)}}finally{St.forEach(gt._OrtReleaseTensor),Et.forEach(gt._free),gt._OrtReleaseRunOptions(wt),Tt.forEach(gt._free)}},_.endProfiling=ot=>{const nt=(0,st.getInstance)(),lt=at.get(ot);if(!lt)throw new Error("invalid session id");const ht=lt[0],ft=nt._OrtEndProfiling(ht);if(ft===0)throw new Error("Can't get an profile file name");nt._OrtFree(ft)},_.extractTransferableBuffers=ot=>{const nt=[];for(const lt of ot){const ht=lt[2];!Array.isArray(ht)&&ht.buffer&&nt.push(ht.buffer)}return nt}},6361:function(_e,_,et){var tt=this&&this.__createBinding||(Object.create?function(ft,gt,mt,yt){yt===void 0&&(yt=mt);var bt=Object.getOwnPropertyDescriptor(gt,mt);bt&&!("get"in bt?!gt.__esModule:bt.writable||bt.configurable)||(bt={enumerable:!0,get:function(){return gt[mt]}}),Object.defineProperty(ft,yt,bt)}:function(ft,gt,mt,yt){yt===void 0&&(yt=mt),ft[yt]=gt[mt]}),rt=this&&this.__setModuleDefault||(Object.create?function(ft,gt){Object.defineProperty(ft,"default",{enumerable:!0,value:gt})}:function(ft,gt){ft.default=gt}),it=this&&this.__importStar||function(ft){if(ft&&ft.__esModule)return ft;var gt={};if(ft!=null)for(var mt in ft)mt!=="default"&&Object.prototype.hasOwnProperty.call(ft,mt)&&tt(gt,ft,mt);return rt(gt,ft),gt},st=this&&this.__importDefault||function(ft){return ft&&ft.__esModule?ft:{default:ft}};Object.defineProperty(_,"__esModule",{value:!0}),_.dispose=_.getInstance=_.initializeWebAssembly=void 0;const at=it(et(6449)),ct=st(et(932)),ut=et(3474);let dt,ot=!1,nt=!1,lt=!1;const ht=(ft,gt)=>gt?ft?"ort-wasm-simd-threaded.wasm":"ort-wasm-threaded.wasm":ft?"ort-wasm-simd.wasm":"ort-wasm.wasm";_.initializeWebAssembly=async ft=>{if(ot)return Promise.resolve();if(nt)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(lt)throw new Error("previous call to 'initializeWebAssembly()' failed.");nt=!0;const gt=ft.initTimeout,mt=ft.numThreads,yt=ft.simd,bt=mt>1&&(()=>{try{return typeof SharedArrayBuffer<"u"&&(typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch{return!1}})(),_t=yt&&(()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}})(),vt=typeof ft.wasmPaths=="string"?ft.wasmPaths:void 0,xt=ht(!1,bt),wt=ht(_t,bt),Tt=typeof ft.wasmPaths=="object"?ft.wasmPaths[wt]:void 0;let St=!1;const Et=[];if(gt>0&&Et.push(new Promise(Ot=>{setTimeout(()=>{St=!0,Ot()},gt)})),Et.push(new Promise((Ot,Rt)=>{const Pt=bt?ut:ct.default,Mt={locateFile:($t,kt)=>bt&&$t.endsWith(".worker.js")&&typeof Blob<"u"?URL.createObjectURL(new Blob([et(4154)],{type:"text/javascript"})):$t===xt?Tt??(vt??kt)+wt:kt+$t};if(bt)if(typeof Blob>"u")Mt.mainScriptUrlOrBlob=at.join("/","ort-wasm-threaded.js");else{const $t=`var ortWasmThreaded=(function(){var _scriptDir;return ${Pt.toString()}})();`;Mt.mainScriptUrlOrBlob=new Blob([$t],{type:"text/javascript"})}Pt(Mt).then($t=>{nt=!1,ot=!0,dt=$t,Ot()},$t=>{nt=!1,lt=!0,Rt($t)})})),await Promise.race(Et),St)throw new Error(`WebAssembly backend initializing failed due to timeout: ${gt}ms`)},_.getInstance=()=>{if(ot&&dt)return dt;throw new Error("WebAssembly is not initialized yet.")},_.dispose=()=>{var ft;!ot||nt||lt||(nt=!0,(ft=dt.PThread)===null||ft===void 0||ft.terminateAllThreads(),dt=void 0,nt=!1,ot=!1,lt=!0)}},9710:(_e,_,et)=>{et.d(_,{Z:()=>it});var tt=et(477),rt=et.n(tt);function it(){return rt()('/*!\n* ONNX Runtime Web v1.14.0\n* Copyright (c) Microsoft Corporation. All rights reserved.\n* Licensed under the MIT License.\n*/\n(()=>{var t={474:(t,e,n)=>{var _scriptDir,r=(_scriptDir=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(t){function e(){return j.buffer!=D&&N(j.buffer),P}function r(){return j.buffer!=D&&N(j.buffer),U}function a(){return j.buffer!=D&&N(j.buffer),F}function i(){return j.buffer!=D&&N(j.buffer),I}function o(){return j.buffer!=D&&N(j.buffer),W}var u,c,s;t=t||{},u||(u=void 0!==t?t:{}),u.ready=new Promise((function(t,e){c=t,s=e}));var l,f,p,h,d,y,b=Object.assign({},u),m="./this.program",g=(t,e)=>{throw e},v="object"==typeof window,w="function"==typeof importScripts,_="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,O=u.ENVIRONMENT_IS_PTHREAD||!1,A="";function S(t){return u.locateFile?u.locateFile(t,A):A+t}if(_){let e;A=w?n(908).dirname(A)+"/":"//",y=()=>{d||(h=n(384),d=n(908))},l=function(t,e){return y(),t=d.normalize(t),h.readFileSync(t,e?void 0:"utf8")},p=t=>((t=l(t,!0)).buffer||(t=new Uint8Array(t)),t),f=(t,e,n)=>{y(),t=d.normalize(t),h.readFile(t,(function(t,r){t?n(t):e(r.buffer)}))},1<process.argv.length&&(m=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(t){if(!(t instanceof ct))throw t})),process.on("unhandledRejection",(function(t){throw t})),g=(t,e)=>{if(Q())throw process.exitCode=t,e;e instanceof ct||x("exiting due to exception: "+e),process.exit(t)},u.inspect=function(){return"[Emscripten Module object]"};try{e=n(925)}catch(t){throw console.error(\'The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?\'),t}n.g.Worker=e.Worker}else(v||w)&&(w?A=self.location.href:"undefined"!=typeof document&&document.currentScript&&(A=document.currentScript.src),_scriptDir&&(A=_scriptDir),A=0!==A.indexOf("blob:")?A.substr(0,A.replace(/[?#].*/,"").lastIndexOf("/")+1):"",_||(l=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},w&&(p=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),f=(t,e,n)=>{var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?e(r.response):n()},r.onerror=n,r.send(null)}));_&&"undefined"==typeof performance&&(n.g.performance=n(953).performance);var T=console.log.bind(console),E=console.warn.bind(console);_&&(y(),T=t=>h.writeSync(1,t+"\\n"),E=t=>h.writeSync(2,t+"\\n"));var M,C=u.print||T,x=u.printErr||E;Object.assign(u,b),b=null,u.thisProgram&&(m=u.thisProgram),u.quit&&(g=u.quit),u.wasmBinary&&(M=u.wasmBinary);var R=u.noExitRuntime||!1;"object"!=typeof WebAssembly&&at("no native wasm support detected");var j,k,D,P,U,F,I,W,H=!1,L="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function z(t,e,n){var r=(e>>>=0)+n;for(n=e;t[n]&&!(n>=r);)++n;if(16<n-e&&t.buffer&&L)return L.decode(t.buffer instanceof SharedArrayBuffer?t.slice(e,n):t.subarray(e,n));for(r="";e<n;){var a=t[e++];if(128&a){var i=63&t[e++];if(192==(224&a))r+=String.fromCharCode((31&a)<<6|i);else{var o=63&t[e++];65536>(a=224==(240&a)?(15&a)<<12|i<<6|o:(7&a)<<18|i<<12|o<<6|63&t[e++])?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else r+=String.fromCharCode(a)}return r}function Y(t,e){return(t>>>=0)?z(r(),t,e):""}function B(t,e,n,r){if(!(0<r))return 0;var a=n>>>=0;r=n+r-1;for(var i=0;i<t.length;++i){var o=t.charCodeAt(i);if(55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&t.charCodeAt(++i)),127>=o){if(n>=r)break;e[n++>>>0]=o}else{if(2047>=o){if(n+1>=r)break;e[n++>>>0]=192|o>>6}else{if(65535>=o){if(n+2>=r)break;e[n++>>>0]=224|o>>12}else{if(n+3>=r)break;e[n++>>>0]=240|o>>18,e[n++>>>0]=128|o>>12&63}e[n++>>>0]=128|o>>6&63}e[n++>>>0]=128|63&o}}return e[n>>>0]=0,n-a}function G(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);127>=r?e++:2047>=r?e+=2:55296<=r&&57343>=r?(e+=4,++n):e+=3}return e}function N(t){D=t,u.HEAP8=P=new Int8Array(t),u.HEAP16=new Int16Array(t),u.HEAP32=F=new Int32Array(t),u.HEAPU8=U=new Uint8Array(t),u.HEAPU16=new Uint16Array(t),u.HEAPU32=I=new Uint32Array(t),u.HEAPF32=new Float32Array(t),u.HEAPF64=W=new Float64Array(t)}O&&(D=u.buffer);var V=u.INITIAL_MEMORY||16777216;if(O)j=u.wasmMemory,D=u.buffer;else if(u.wasmMemory)j=u.wasmMemory;else if(!((j=new WebAssembly.Memory({initial:V/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw x("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),_&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");j&&(D=j.buffer),V=D.byteLength,N(D);var $,q=[],X=[],J=[],Z=[];function Q(){return R||!1}function K(){var t=u.preRun.shift();q.unshift(t)}var tt,et=0,nt=null,rt=null;function at(t){throw O?postMessage({cmd:"onAbort",arg:t}):u.onAbort&&u.onAbort(t),x(t="Aborted("+t+")"),H=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),s(t),t}function it(){return tt.startsWith("data:application/octet-stream;base64,")}function ot(){var t=tt;try{if(t==tt&&M)return new Uint8Array(M);if(p)return p(t);throw"both async and sync fetching of the wasm failed"}catch(t){at(t)}}tt="ort-wasm-threaded.wasm",it()||(tt=S(tt));var ut={};function ct(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function st(t){(t=ht.Vb[t])||at(),ht.mc(t)}function lt(t){var e=ht.Cc();if(!e)return 6;ht.ac.push(e),ht.Vb[t.Ub]=e,e.Ub=t.Ub;var n={cmd:"run",start_routine:t.Ic,arg:t.zc,pthread_ptr:t.Ub};return e.$b=()=>{n.time=performance.now(),e.postMessage(n,t.Nc)},e.loaded&&(e.$b(),delete e.$b),0}function ft(t){if(O)return $t(1,1,t);Q()||(ht.oc(),u.onExit&&u.onExit(t),H=!0),g(t,new ct(t))}function pt(t,e){if(!e&&O)throw bt(t),"unwind";Q()||O||(me(),dt(J),be(0),re[1].length&&ae(1,10),re[2].length&&ae(2,10),ht.oc()),ft(t)}var ht={Yb:[],ac:[],qc:[],Vb:{},fc:function(){O&&ht.Ec()},Pc:function(){},Ec:function(){ht.receiveObjectTransfer=ht.Gc,ht.threadInitTLS=ht.pc,ht.setExitStatus=ht.nc,R=!1},nc:function(){},oc:function(){for(var t of Object.values(ht.Vb))ht.mc(t);for(t of ht.Yb)t.terminate();ht.Yb=[]},mc:function(t){var e=t.Ub;delete ht.Vb[e],ht.Yb.push(t),ht.ac.splice(ht.ac.indexOf(t),1),t.Ub=0,Oe(e)},Gc:function(){},pc:function(){ht.qc.forEach((t=>t()))},Fc:function(t,e){t.onmessage=n=>{var r=(n=n.data).cmd;if(t.Ub&&(ht.Bc=t.Ub),n.targetThread&&n.targetThread!=he()){var a=ht.Vb[n.Qc];a?a.postMessage(n,n.transferList):x(\'Internal error! Worker sent a message "\'+r+\'" to target pthread \'+n.targetThread+", but that thread no longer exists!")}else"processProxyingQueue"===r?zt(n.queue):"spawnThread"===r?lt(n):"cleanupThread"===r?st(n.thread):"killThread"===r?(n=n.thread,r=ht.Vb[n],delete ht.Vb[n],r.terminate(),Oe(n),ht.ac.splice(ht.ac.indexOf(r),1),r.Ub=0):"cancelThread"===r?ht.Vb[n.thread].postMessage({cmd:"cancel"}):"loaded"===r?(t.loaded=!0,e&&e(t),t.$b&&(t.$b(),delete t.$b)):"print"===r?C("Thread "+n.threadId+": "+n.text):"printErr"===r?x("Thread "+n.threadId+": "+n.text):"alert"===r?alert("Thread "+n.threadId+": "+n.text):"setimmediate"===n.target?t.postMessage(n):"onAbort"===r?u.onAbort&&u.onAbort(n.arg):r&&x("worker sent an unknown command "+r);ht.Bc=void 0},t.onerror=t=>{throw x("worker sent an error! "+t.filename+":"+t.lineno+": "+t.message),t},_&&(t.on("message",(function(e){t.onmessage({data:e})})),t.on("error",(function(e){t.onerror(e)})),t.on("detachedExit",(function(){}))),t.postMessage({cmd:"load",urlOrBlob:u.mainScriptUrlOrBlob||_scriptDir,wasmMemory:j,wasmModule:k})},yc:function(){var t=S("ort-wasm-threaded.worker.js");ht.Yb.push(new Worker(t))},Cc:function(){return 0==ht.Yb.length&&(ht.yc(),ht.Fc(ht.Yb[0])),ht.Yb.pop()}};function dt(t){for(;0<t.length;)t.shift()(u)}function yt(t){var e=Ee();return t=t(),Me(e),t}function bt(t){if(O)return $t(2,0,t);try{pt(t)}catch(t){t instanceof ct||"unwind"==t||g(1,t)}}u.PThread=ht,u.establishStackSpace=function(){var t=he(),e=a()[t+44>>2>>>0];t=a()[t+48>>2>>>0],Te(e,e-t),Me(e)};var mt=[];function gt(t){var e=mt[t];return e||(t>=mt.length&&(mt.length=t+1),mt[t]=e=$.get(t)),e}u.invokeEntryPoint=function(t,e){t=gt(t)(e),Q()?ht.nc(t):Ae(t)};var vt,wt,_t=[],Ot=0,At=0;function St(t){this.Zb=t,this.Sb=t-24,this.xc=function(t){i()[this.Sb+4>>2>>>0]=t},this.bc=function(){return i()[this.Sb+4>>2>>>0]},this.wc=function(t){i()[this.Sb+8>>2>>>0]=t},this.Dc=function(){return i()[this.Sb+8>>2>>>0]},this.rc=function(){a()[this.Sb>>2>>>0]=0},this.hc=function(t){t=t?1:0,e()[this.Sb+12>>0>>>0]=t},this.uc=function(){return 0!=e()[this.Sb+12>>0>>>0]},this.ic=function(t){t=t?1:0,e()[this.Sb+13>>0>>>0]=t},this.kc=function(){return 0!=e()[this.Sb+13>>0>>>0]},this.fc=function(t,e){this.cc(0),this.xc(t),this.wc(e),this.rc(),this.hc(!1),this.ic(!1)},this.sc=function(){Atomics.add(a(),this.Sb>>2,1)},this.Hc=function(){return 1===Atomics.sub(a(),this.Sb>>2,1)},this.cc=function(t){i()[this.Sb+16>>2>>>0]=t},this.tc=function(){return i()[this.Sb+16>>2>>>0]},this.vc=function(){if(Re(this.bc()))return i()[this.Zb>>2>>>0];var t=this.tc();return 0!==t?t:this.Zb}}function Tt(t){return ye(new St(t).Sb)}function Et(t,e,n,r){return O?$t(3,1,t,e,n,r):Mt(t,e,n,r)}function Mt(t,e,n,r){if("undefined"==typeof SharedArrayBuffer)return x("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var a=[];return O&&0===a.length?Et(t,e,n,r):(t={Ic:n,Ub:t,zc:r,Nc:a},O?(t.Oc="spawnThread",postMessage(t,a),0):lt(t))}function Ct(t,e,n){return O?$t(4,1,t,e,n):0}function xt(t,e){if(O)return $t(5,1,t,e)}function Rt(t,e){if(O)return $t(6,1,t,e)}function jt(t,e,n){if(O)return $t(7,1,t,e,n)}function kt(t,e,n){return O?$t(8,1,t,e,n):0}function Dt(t,e){if(O)return $t(9,1,t,e)}function Pt(t,e,n){if(O)return $t(10,1,t,e,n)}function Ut(t,e,n,r){if(O)return $t(11,1,t,e,n,r)}function Ft(t,e,n,r){if(O)return $t(12,1,t,e,n,r)}function It(t,e,n,r){if(O)return $t(13,1,t,e,n,r)}function Wt(t){if(O)return $t(14,1,t)}function Ht(t,e){if(O)return $t(15,1,t,e)}function Lt(t,e,n){if(O)return $t(16,1,t,e,n)}function zt(t){Atomics.store(a(),t>>2,1),he()&&_e(t),Atomics.compareExchange(a(),t>>2,1,0)}function Yt(t){return i()[t>>>2]+4294967296*a()[t+4>>>2]}function Bt(t,e,n,r,a,i){return O?$t(17,1,t,e,n,r,a,i):-52}function Gt(t,e,n,r,a,i){if(O)return $t(18,1,t,e,n,r,a,i)}function Nt(t){var n=G(t)+1,r=de(n);return r&&B(t,e(),r,n),r}function Vt(t,e,n){function r(t){return(t=t.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?t[1]:"GMT"}if(O)return $t(19,1,t,e,n);var o=(new Date).getFullYear(),u=new Date(o,0,1),c=new Date(o,6,1);o=u.getTimezoneOffset();var s=c.getTimezoneOffset(),l=Math.max(o,s);a()[t>>2>>>0]=60*l,a()[e>>2>>>0]=Number(o!=s),t=r(u),e=r(c),t=Nt(t),e=Nt(e),s<o?(i()[n>>2>>>0]=t,i()[n+4>>2>>>0]=e):(i()[n>>2>>>0]=e,i()[n+4>>2>>>0]=t)}function $t(t,e){var n=arguments.length-2,r=arguments;return yt((()=>{for(var a=Ce(8*n),i=a>>3,u=0;u<n;u++){var c=r[2+u];o()[i+u>>>0]=c}return we(t,n,a,e)}))}u.executeNotifiedProxyingQueue=zt,wt=_?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:O?()=>performance.now()-u.__performance_now_clock_drift:()=>performance.now();var qt,Xt=[],Jt={};function Zt(){if(!qt){var t,e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:m||"./this.program"};for(t in Jt)void 0===Jt[t]?delete e[t]:e[t]=Jt[t];var n=[];for(t in e)n.push(t+"="+e[t]);qt=n}return qt}function Qt(t,n){if(O)return $t(20,1,t,n);var r=0;return Zt().forEach((function(a,o){var u=n+r;for(o=i()[t+4*o>>2>>>0]=u,u=0;u<a.length;++u)e()[o++>>0>>>0]=a.charCodeAt(u);e()[o>>0>>>0]=0,r+=a.length+1})),0}function Kt(t,e){if(O)return $t(21,1,t,e);var n=Zt();i()[t>>2>>>0]=n.length;var r=0;return n.forEach((function(t){r+=t.length+1})),i()[e>>2>>>0]=r,0}function te(t){return O?$t(22,1,t):52}function ee(t,e,n,r){return O?$t(23,1,t,e,n,r):52}function ne(t,e,n,r,a){return O?$t(24,1,t,e,n,r,a):70}var re=[null,[],[]];function ae(t,e){var n=re[t];0===e||10===e?((1===t?C:x)(z(n,0)),n.length=0):n.push(e)}function ie(t,e,n,a){if(O)return $t(25,1,t,e,n,a);for(var o=0,u=0;u<n;u++){var c=i()[e>>2>>>0],s=i()[e+4>>2>>>0];e+=8;for(var l=0;l<s;l++)ae(t,r()[c+l>>>0]);o+=s}return i()[a>>2>>>0]=o,0}var oe=0;function ue(t){return 0==t%4&&(0!=t%100||0==t%400)}var ce=[31,29,31,30,31,30,31,31,30,31,30,31],se=[31,28,31,30,31,30,31,31,30,31,30,31];function le(t,n,r,i){function o(t,e,n){for(t="number"==typeof t?t.toString():t||"";t.length<e;)t=n[0]+t;return t}function u(t,e){return o(t,e,"0")}function c(t,e){function n(t){return 0>t?-1:0<t?1:0}var r;return 0===(r=n(t.getFullYear()-e.getFullYear()))&&0===(r=n(t.getMonth()-e.getMonth()))&&(r=n(t.getDate()-e.getDate())),r}function s(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function l(t){var e=t.Wb;for(t=new Date(new Date(t.Xb+1900,0,1).getTime());0<e;){var n=t.getMonth(),r=(ue(t.getFullYear())?ce:se)[n];if(!(e>r-t.getDate())){t.setDate(t.getDate()+e);break}e-=r-t.getDate()+1,t.setDate(1),11>n?t.setMonth(n+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))}return n=new Date(t.getFullYear()+1,0,4),e=s(new Date(t.getFullYear(),0,4)),n=s(n),0>=c(e,t)?0>=c(n,t)?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var f=a()[i+40>>2>>>0];for(var p in i={Lc:a()[i>>2>>>0],Kc:a()[i+4>>2>>>0],dc:a()[i+8>>2>>>0],jc:a()[i+12>>2>>>0],ec:a()[i+16>>2>>>0],Xb:a()[i+20>>2>>>0],Tb:a()[i+24>>2>>>0],Wb:a()[i+28>>2>>>0],Rc:a()[i+32>>2>>>0],Jc:a()[i+36>>2>>>0],Mc:f?Y(f):""},r=Y(r),f={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})r=r.replace(new RegExp(p,"g"),f[p]);var h="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),d="January February March April May June July August September October November December".split(" ");for(p in f={"%a":function(t){return h[t.Tb].substring(0,3)},"%A":function(t){return h[t.Tb]},"%b":function(t){return d[t.ec].substring(0,3)},"%B":function(t){return d[t.ec]},"%C":function(t){return u((t.Xb+1900)/100|0,2)},"%d":function(t){return u(t.jc,2)},"%e":function(t){return o(t.jc,2," ")},"%g":function(t){return l(t).toString().substring(2)},"%G":function(t){return l(t)},"%H":function(t){return u(t.dc,2)},"%I":function(t){return 0==(t=t.dc)?t=12:12<t&&(t-=12),u(t,2)},"%j":function(t){for(var e=0,n=0;n<=t.ec-1;e+=(ue(t.Xb+1900)?ce:se)[n++]);return u(t.jc+e,3)},"%m":function(t){return u(t.ec+1,2)},"%M":function(t){return u(t.Kc,2)},"%n":function(){return"\\n"},"%p":function(t){return 0<=t.dc&&12>t.dc?"AM":"PM"},"%S":function(t){return u(t.Lc,2)},"%t":function(){return"\\t"},"%u":function(t){return t.Tb||7},"%U":function(t){return u(Math.floor((t.Wb+7-t.Tb)/7),2)},"%V":function(t){var e=Math.floor((t.Wb+7-(t.Tb+6)%7)/7);if(2>=(t.Tb+371-t.Wb-2)%7&&e++,e)53==e&&(4==(n=(t.Tb+371-t.Wb)%7)||3==n&&ue(t.Xb)||(e=1));else{e=52;var n=(t.Tb+7-t.Wb-1)%7;(4==n||5==n&&ue(t.Xb%400-1))&&e++}return u(e,2)},"%w":function(t){return t.Tb},"%W":function(t){return u(Math.floor((t.Wb+7-(t.Tb+6)%7)/7),2)},"%y":function(t){return(t.Xb+1900).toString().substring(2)},"%Y":function(t){return t.Xb+1900},"%z":function(t){var e=0<=(t=t.Jc);return t=Math.abs(t)/60,(e?"+":"-")+String("0000"+(t/60*100+t%60)).slice(-4)},"%Z":function(t){return t.Mc},"%%":function(){return"%"}},r=r.replace(/%%/g,"\\0\\0"),f)r.includes(p)&&(r=r.replace(new RegExp(p,"g"),f[p](i)));return p=function(t){var e=Array(G(t)+1);return B(t,e,0,e.length),e}(r=r.replace(/\\0\\0/g,"%")),p.length>n?0:(function(t,n){e().set(t,n>>>0)}(p,t),p.length-1)}ht.fc();var fe=[null,ft,bt,Et,Ct,xt,Rt,jt,kt,Dt,Pt,Ut,Ft,It,Wt,Ht,Lt,Bt,Gt,Vt,Qt,Kt,te,ee,ne,ie],pe={b:function(t){return de(t+24)+24},n:function(t){return(t=new St(t)).uc()||(t.hc(!0),Ot--),t.ic(!1),_t.push(t),t.sc(),t.vc()},ma:function(t){throw x("Unexpected exception thrown, this is not properly supported - aborting"),H=!0,t},x:function(){Se(0);var t=_t.pop();if(t.Hc()&&!t.kc()){var e=t.Dc();e&&gt(e)(t.Zb),Tt(t.Zb)}At=0},e:function(){var t=At;if(!t)return oe=0;var e=new St(t);e.cc(t);var n=e.bc();if(!n)return oe=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(xe(i,n,e.Sb+16))return oe=i,t}return oe=n,t},l:function(){var t=At;if(!t)return oe=0;var e=new St(t);e.cc(t);var n=e.bc();if(!n)return oe=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(xe(i,n,e.Sb+16))return oe=i,t}return oe=n,t},h:function(){var t=At;if(!t)return oe=0;var e=new St(t);e.cc(t);var n=e.bc();if(!n)return oe=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(xe(i,n,e.Sb+16))return oe=i,t}return oe=n,t},t:Tt,M:function(){var t=_t.pop();t||at("no exception to throw");var e=t.Zb;throw t.kc()||(_t.push(t),t.ic(!0),t.hc(!1),Ot++),At=e,e},c:function(t,e,n){throw new St(t).fc(e,n),At=t,Ot++,t},pa:function(){return Ot},Fa:function(t){ge(t,!w,1,!v),ht.pc()},T:function(t){O?postMessage({cmd:"cleanupThread",thread:t}):st(t)},xa:Mt,j:function(t){throw At||(At=t),t},H:Ct,Ma:xt,ua:Rt,wa:jt,oa:kt,Ka:Dt,Ca:Pt,Ja:Ut,V:Ft,va:It,sa:Wt,La:Ht,ta:Lt,Ta:function(){},X:function(){at("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ua:function(){at("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},W:function(){return Date.now()},ya:function(){return 2097152},Oa:function(){return!0},za:function(t,e,n,r){if(t==e)setTimeout((()=>zt(r)));else if(O)postMessage({targetThread:t,cmd:"processProxyingQueue",queue:r});else{if(!(t=ht.Vb[t]))return;t.postMessage({cmd:"processProxyingQueue",queue:r})}return 1},Ea:function(){return-1},Pa:function(t,e){t=new Date(1e3*Yt(t)),a()[e>>2>>>0]=t.getUTCSeconds(),a()[e+4>>2>>>0]=t.getUTCMinutes(),a()[e+8>>2>>>0]=t.getUTCHours(),a()[e+12>>2>>>0]=t.getUTCDate(),a()[e+16>>2>>>0]=t.getUTCMonth(),a()[e+20>>2>>>0]=t.getUTCFullYear()-1900,a()[e+24>>2>>>0]=t.getUTCDay(),t=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,a()[e+28>>2>>>0]=t},Qa:function(t,e){t=new Date(1e3*Yt(t)),a()[e>>2>>>0]=t.getSeconds(),a()[e+4>>2>>>0]=t.getMinutes(),a()[e+8>>2>>>0]=t.getHours(),a()[e+12>>2>>>0]=t.getDate(),a()[e+16>>2>>>0]=t.getMonth(),a()[e+20>>2>>>0]=t.getFullYear()-1900,a()[e+24>>2>>>0]=t.getDay();var n=new Date(t.getFullYear(),0,1),r=(t.getTime()-n.getTime())/864e5|0;a()[e+28>>2>>>0]=r,a()[e+36>>2>>>0]=-60*t.getTimezoneOffset(),r=new Date(t.getFullYear(),6,1).getTimezoneOffset(),t=0|(r!=(n=n.getTimezoneOffset())&&t.getTimezoneOffset()==Math.min(n,r)),a()[e+32>>2>>>0]=t},Ra:function(t){var e=new Date(a()[t+20>>2>>>0]+1900,a()[t+16>>2>>>0],a()[t+12>>2>>>0],a()[t+8>>2>>>0],a()[t+4>>2>>>0],a()[t>>2>>>0],0),n=a()[t+32>>2>>>0],r=e.getTimezoneOffset(),i=new Date(e.getFullYear(),0,1),o=new Date(e.getFullYear(),6,1).getTimezoneOffset(),u=i.getTimezoneOffset(),c=Math.min(u,o);return 0>n?a()[t+32>>2>>>0]=Number(o!=u&&c==r):0<n!=(c==r)&&(o=Math.max(u,o),e.setTime(e.getTime()+6e4*((0<n?c:o)-r))),a()[t+24>>2>>>0]=e.getDay(),n=(e.getTime()-i.getTime())/864e5|0,a()[t+28>>2>>>0]=n,a()[t>>2>>>0]=e.getSeconds(),a()[t+4>>2>>>0]=e.getMinutes(),a()[t+8>>2>>>0]=e.getHours(),a()[t+12>>2>>>0]=e.getDate(),a()[t+16>>2>>>0]=e.getMonth(),e.getTime()/1e3|0},Aa:Bt,Ba:Gt,Sa:function t(e,n,r){t.Ac||(t.Ac=!0,Vt(e,n,r))},y:function(){at("")},U:function(){if(!_&&!w){var t="Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread";vt||(vt={}),vt[t]||(vt[t]=1,_&&(t="warning: "+t),x(t))}},ra:function(){return 4294901760},B:wt,Ia:function(t,e,n){r().copyWithin(t>>>0,e>>>0,e+n>>>0)},F:function(){return _?n(993).cpus().length:navigator.hardwareConcurrency},Da:function(t,e,n){Xt.length=e,n>>=3;for(var r=0;r<e;r++)Xt[r]=o()[n+r>>>0];return(0>t?ut[-t-1]:fe[t]).apply(null,Xt)},qa:function(t){var e=r().length;if((t>>>=0)<=e||4294901760<t)return!1;for(var n=1;4>=n;n*=2){var a=e*(1+.2/n);a=Math.min(a,t+100663296);var i=Math;a=Math.max(t,a),i=i.min.call(i,4294901760,a+(65536-a%65536)%65536);t:{try{j.grow(i-D.byteLength+65535>>>16),N(j.buffer);var o=1;break t}catch(t){}o=void 0}if(o)return!0}return!1},Na:function(){throw"unwind"},Ga:Qt,Ha:Kt,J:pt,I:te,S:ee,ga:ne,R:ie,d:function(){return oe},na:function t(r,a){t.lc||(t.lc=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var t=new Uint8Array(1);return()=>(crypto.getRandomValues(t),t[0])}if(_)try{var e=n(Object(function(){var t=new Error("Cannot find module \'crypto\'");throw t.code="MODULE_NOT_FOUND",t}()));return()=>e.randomBytes(1)[0]}catch(t){}return()=>at("randomDevice")}());for(var i=0;i<a;i++)e()[r+i>>0>>>0]=t.lc();return 0},ia:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},ja:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},K:function(t){var e=Ee();try{return gt(t)()}catch(t){if(Me(e),t!==t+0)throw t;Se(1,0)}},f:function(t,e){var n=Ee();try{return gt(t)(e)}catch(t){if(Me(n),t!==t+0)throw t;Se(1,0)}},P:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},Q:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},k:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},p:function(t,e,n,r){var a=Ee();try{return gt(t)(e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},q:function(t,e,n,r,a){var i=Ee();try{return gt(t)(e,n,r,a)}catch(t){if(Me(i),t!==t+0)throw t;Se(1,0)}},N:function(t,e,n,r,a,i){var o=Ee();try{return gt(t)(e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},s:function(t,e,n,r,a,i){var o=Ee();try{return gt(t)(e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},w:function(t,e,n,r,a,i,o){var u=Ee();try{return gt(t)(e,n,r,a,i,o)}catch(t){if(Me(u),t!==t+0)throw t;Se(1,0)}},L:function(t,e,n,r,a,i,o,u){var c=Ee();try{return gt(t)(e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},E:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=Ee();try{return gt(t)(e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(Me(p),t!==t+0)throw t;Se(1,0)}},aa:function(t,e,n,r,a,i,o,u){var c=Ee();try{return He(t,e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},_:function(t,e,n,r,a,i,o){var u=Ee();try{return ke(t,e,n,r,a,i,o)}catch(t){if(Me(u),t!==t+0)throw t;Se(1,0)}},Z:function(t,e,n,r,a){var i=Ee();try{return Le(t,e,n,r,a)}catch(t){if(Me(i),t!==t+0)throw t;Se(1,0)}},ca:function(t,e,n,r){var a=Ee();try{return Ie(t,e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},$:function(t){var e=Ee();try{return je(t)}catch(t){if(Me(e),t!==t+0)throw t;Se(1,0)}},ba:function(t,e){var n=Ee();try{return We(t,e)}catch(t){if(Me(n),t!==t+0)throw t;Se(1,0)}},Y:function(t,e,n){var r=Ee();try{return De(t,e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},g:function(t){var e=Ee();try{gt(t)()}catch(t){if(Me(e),t!==t+0)throw t;Se(1,0)}},r:function(t,e){var n=Ee();try{gt(t)(e)}catch(t){if(Me(n),t!==t+0)throw t;Se(1,0)}},i:function(t,e,n){var r=Ee();try{gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},ha:function(t,e,n,r){var a=Ee();try{gt(t)(e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},m:function(t,e,n,r){var a=Ee();try{gt(t)(e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},v:function(t,e,n,r,a){var i=Ee();try{gt(t)(e,n,r,a)}catch(t){if(Me(i),t!==t+0)throw t;Se(1,0)}},u:function(t,e,n,r,a,i){var o=Ee();try{gt(t)(e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},O:function(t,e,n,r,a,i,o){var u=Ee();try{gt(t)(e,n,r,a,i,o)}catch(t){if(Me(u),t!==t+0)throw t;Se(1,0)}},A:function(t,e,n,r,a,i,o,u){var c=Ee();try{gt(t)(e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},ka:function(t,e,n,r,a,i,o,u,c){var s=Ee();try{gt(t)(e,n,r,a,i,o,u,c)}catch(t){if(Me(s),t!==t+0)throw t;Se(1,0)}},C:function(t,e,n,r,a,i,o,u,c,s,l){var f=Ee();try{gt(t)(e,n,r,a,i,o,u,c,s,l)}catch(t){if(Me(f),t!==t+0)throw t;Se(1,0)}},D:function(t,e,n,r,a,i,o,u,c,s,l,f,p,h,d,y){var b=Ee();try{gt(t)(e,n,r,a,i,o,u,c,s,l,f,p,h,d,y)}catch(t){if(Me(b),t!==t+0)throw t;Se(1,0)}},fa:function(t,e,n,r,a,i,o,u){var c=Ee();try{Pe(t,e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},da:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=Ee();try{Fe(t,e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(Me(p),t!==t+0)throw t;Se(1,0)}},ea:function(t,e,n,r,a,i){var o=Ee();try{Ue(t,e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},o:function(t){return t},a:j||u.wasmMemory,G:function(t){oe=t},la:le,z:function(t,e,n,r){return le(t,e,n,r)}};!function(){function t(t,e){u.asm=t.exports,ht.qc.push(u.asm.sb),$=u.asm.ub,X.unshift(u.asm.Va),k=e,O||(et--,u.monitorRunDependencies&&u.monitorRunDependencies(et),0==et&&(null!==nt&&(clearInterval(nt),nt=null),rt&&(t=rt,rt=null,t())))}function e(e){t(e.instance,e.module)}function n(t){return function(){if(!M&&(v||w)){if("function"==typeof fetch&&!tt.startsWith("file://"))return fetch(tt,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at \'"+tt+"\'";return t.arrayBuffer()})).catch((function(){return ot()}));if(f)return new Promise((function(t,e){f(tt,(function(e){t(new Uint8Array(e))}),e)}))}return Promise.resolve().then((function(){return ot()}))}().then((function(t){return WebAssembly.instantiate(t,r)})).then((function(t){return t})).then(t,(function(t){x("failed to asynchronously prepare wasm: "+t),at(t)}))}var r={a:pe};if(O||(et++,u.monitorRunDependencies&&u.monitorRunDependencies(et)),u.instantiateWasm)try{return u.instantiateWasm(r,t)}catch(t){return x("Module.instantiateWasm callback failed with error: "+t),!1}(M||"function"!=typeof WebAssembly.instantiateStreaming||it()||tt.startsWith("file://")||_||"function"!=typeof fetch?n(e):fetch(tt,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,r).then(e,(function(t){return x("wasm streaming compile failed: "+t),x("falling back to ArrayBuffer instantiation"),n(e)}))}))).catch(s)}(),u.___wasm_call_ctors=function(){return(u.___wasm_call_ctors=u.asm.Va).apply(null,arguments)},u._OrtInit=function(){return(u._OrtInit=u.asm.Wa).apply(null,arguments)},u._OrtCreateSessionOptions=function(){return(u._OrtCreateSessionOptions=u.asm.Xa).apply(null,arguments)},u._OrtAppendExecutionProvider=function(){return(u._OrtAppendExecutionProvider=u.asm.Ya).apply(null,arguments)},u._OrtAddSessionConfigEntry=function(){return(u._OrtAddSessionConfigEntry=u.asm.Za).apply(null,arguments)},u._OrtReleaseSessionOptions=function(){return(u._OrtReleaseSessionOptions=u.asm._a).apply(null,arguments)},u._OrtCreateSession=function(){return(u._OrtCreateSession=u.asm.$a).apply(null,arguments)},u._OrtReleaseSession=function(){return(u._OrtReleaseSession=u.asm.ab).apply(null,arguments)},u._OrtGetInputCount=function(){return(u._OrtGetInputCount=u.asm.bb).apply(null,arguments)},u._OrtGetOutputCount=function(){return(u._OrtGetOutputCount=u.asm.cb).apply(null,arguments)},u._OrtGetInputName=function(){return(u._OrtGetInputName=u.asm.db).apply(null,arguments)},u._OrtGetOutputName=function(){return(u._OrtGetOutputName=u.asm.eb).apply(null,arguments)},u._OrtFree=function(){return(u._OrtFree=u.asm.fb).apply(null,arguments)},u._OrtCreateTensor=function(){return(u._OrtCreateTensor=u.asm.gb).apply(null,arguments)},u._OrtGetTensorData=function(){return(u._OrtGetTensorData=u.asm.hb).apply(null,arguments)},u._OrtReleaseTensor=function(){return(u._OrtReleaseTensor=u.asm.ib).apply(null,arguments)},u._OrtCreateRunOptions=function(){return(u._OrtCreateRunOptions=u.asm.jb).apply(null,arguments)},u._OrtAddRunConfigEntry=function(){return(u._OrtAddRunConfigEntry=u.asm.kb).apply(null,arguments)},u._OrtReleaseRunOptions=function(){return(u._OrtReleaseRunOptions=u.asm.lb).apply(null,arguments)},u._OrtRun=function(){return(u._OrtRun=u.asm.mb).apply(null,arguments)},u._OrtEndProfiling=function(){return(u._OrtEndProfiling=u.asm.nb).apply(null,arguments)};var he=u._pthread_self=function(){return(he=u._pthread_self=u.asm.ob).apply(null,arguments)},de=u._malloc=function(){return(de=u._malloc=u.asm.pb).apply(null,arguments)},ye=u._free=function(){return(ye=u._free=u.asm.qb).apply(null,arguments)},be=u._fflush=function(){return(be=u._fflush=u.asm.rb).apply(null,arguments)};u.__emscripten_tls_init=function(){return(u.__emscripten_tls_init=u.asm.sb).apply(null,arguments)};var me=u.___funcs_on_exit=function(){return(me=u.___funcs_on_exit=u.asm.tb).apply(null,arguments)},ge=u.__emscripten_thread_init=function(){return(ge=u.__emscripten_thread_init=u.asm.vb).apply(null,arguments)};u.__emscripten_thread_crashed=function(){return(u.__emscripten_thread_crashed=u.asm.wb).apply(null,arguments)};var ve,we=u._emscripten_run_in_main_runtime_thread_js=function(){return(we=u._emscripten_run_in_main_runtime_thread_js=u.asm.xb).apply(null,arguments)},_e=u.__emscripten_proxy_execute_task_queue=function(){return(_e=u.__emscripten_proxy_execute_task_queue=u.asm.yb).apply(null,arguments)},Oe=u.__emscripten_thread_free_data=function(){return(Oe=u.__emscripten_thread_free_data=u.asm.zb).apply(null,arguments)},Ae=u.__emscripten_thread_exit=function(){return(Ae=u.__emscripten_thread_exit=u.asm.Ab).apply(null,arguments)},Se=u._setThrew=function(){return(Se=u._setThrew=u.asm.Bb).apply(null,arguments)},Te=u._emscripten_stack_set_limits=function(){return(Te=u._emscripten_stack_set_limits=u.asm.Cb).apply(null,arguments)},Ee=u.stackSave=function(){return(Ee=u.stackSave=u.asm.Db).apply(null,arguments)},Me=u.stackRestore=function(){return(Me=u.stackRestore=u.asm.Eb).apply(null,arguments)},Ce=u.stackAlloc=function(){return(Ce=u.stackAlloc=u.asm.Fb).apply(null,arguments)},xe=u.___cxa_can_catch=function(){return(xe=u.___cxa_can_catch=u.asm.Gb).apply(null,arguments)},Re=u.___cxa_is_pointer_type=function(){return(Re=u.___cxa_is_pointer_type=u.asm.Hb).apply(null,arguments)},je=u.dynCall_j=function(){return(je=u.dynCall_j=u.asm.Ib).apply(null,arguments)},ke=u.dynCall_iiiiij=function(){return(ke=u.dynCall_iiiiij=u.asm.Jb).apply(null,arguments)},De=u.dynCall_jii=function(){return(De=u.dynCall_jii=u.asm.Kb).apply(null,arguments)},Pe=u.dynCall_viiiiij=function(){return(Pe=u.dynCall_viiiiij=u.asm.Lb).apply(null,arguments)},Ue=u.dynCall_vjji=function(){return(Ue=u.dynCall_vjji=u.asm.Mb).apply(null,arguments)},Fe=u.dynCall_viiijjjii=function(){return(Fe=u.dynCall_viiijjjii=u.asm.Nb).apply(null,arguments)},Ie=u.dynCall_iij=function(){return(Ie=u.dynCall_iij=u.asm.Ob).apply(null,arguments)},We=u.dynCall_ji=function(){return(We=u.dynCall_ji=u.asm.Pb).apply(null,arguments)},He=u.dynCall_iiiiiij=function(){return(He=u.dynCall_iiiiiij=u.asm.Qb).apply(null,arguments)},Le=u.dynCall_iiij=function(){return(Le=u.dynCall_iiij=u.asm.Rb).apply(null,arguments)};function ze(){function t(){if(!ve&&(ve=!0,u.calledRun=!0,!H)&&(O||dt(X),c(u),u.onRuntimeInitialized&&u.onRuntimeInitialized(),!O)){if(u.postRun)for("function"==typeof u.postRun&&(u.postRun=[u.postRun]);u.postRun.length;){var t=u.postRun.shift();Z.unshift(t)}dt(Z)}}if(!(0<et))if(O)c(u),O||dt(X),postMessage({cmd:"loaded"});else{if(u.preRun)for("function"==typeof u.preRun&&(u.preRun=[u.preRun]);u.preRun.length;)K();dt(q),0<et||(u.setStatus?(u.setStatus("Running..."),setTimeout((function(){setTimeout((function(){u.setStatus("")}),1),t()}),1)):t())}}if(u.UTF8ToString=Y,u.stringToUTF8=function(t,e,n){return B(t,r(),e,n)},u.lengthBytesUTF8=G,u.keepRuntimeAlive=Q,u.wasmMemory=j,u.stackSave=Ee,u.stackRestore=Me,u.stackAlloc=Ce,u.ExitStatus=ct,u.PThread=ht,rt=function t(){ve||ze(),ve||(rt=t)},u.preInit)for("function"==typeof u.preInit&&(u.preInit=[u.preInit]);0<u.preInit.length;)u.preInit.pop()();return ze(),t.ready});t.exports=r},932:(t,e,n)=>{var _scriptDir,r=(_scriptDir=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(t){var e,r,a;t=t||{},e||(e=void 0!==t?t:{}),e.ready=new Promise((function(t,e){r=t,a=e}));var i,o,u,c,s,l,f=Object.assign({},e),p="./this.program",h=(t,e)=>{throw e},d="object"==typeof window,y="function"==typeof importScripts,b="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,m="";b?(m=y?n(908).dirname(m)+"/":"//",l=()=>{s||(c=n(384),s=n(908))},i=function(t,e){return l(),t=s.normalize(t),c.readFileSync(t,e?void 0:"utf8")},u=t=>((t=i(t,!0)).buffer||(t=new Uint8Array(t)),t),o=(t,e,n)=>{l(),t=s.normalize(t),c.readFile(t,(function(t,r){t?n(t):e(r.buffer)}))},1<process.argv.length&&(p=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(t){if(!(t instanceof J))throw t})),process.on("unhandledRejection",(function(t){throw t})),h=(t,e)=>{if(_||0<L)throw process.exitCode=t,e;e instanceof J||w("exiting due to exception: "+e),process.exit(t)},e.inspect=function(){return"[Emscripten Module object]"}):(d||y)&&(y?m=self.location.href:"undefined"!=typeof document&&document.currentScript&&(m=document.currentScript.src),_scriptDir&&(m=_scriptDir),m=0!==m.indexOf("blob:")?m.substr(0,m.replace(/[?#].*/,"").lastIndexOf("/")+1):"",i=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},y&&(u=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),o=(t,e,n)=>{var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?e(r.response):n()},r.onerror=n,r.send(null)});var g,v=e.print||console.log.bind(console),w=e.printErr||console.warn.bind(console);Object.assign(e,f),f=null,e.thisProgram&&(p=e.thisProgram),e.quit&&(h=e.quit),e.wasmBinary&&(g=e.wasmBinary);var _=e.noExitRuntime||!1;"object"!=typeof WebAssembly&&V("no native wasm support detected");var O,A,S,T,E,M,C=!1,x="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function R(t,e,n){var r=(e>>>=0)+n;for(n=e;t[n]&&!(n>=r);)++n;if(16<n-e&&t.buffer&&x)return x.decode(t.subarray(e,n));for(r="";e<n;){var a=t[e++];if(128&a){var i=63&t[e++];if(192==(224&a))r+=String.fromCharCode((31&a)<<6|i);else{var o=63&t[e++];65536>(a=224==(240&a)?(15&a)<<12|i<<6|o:(7&a)<<18|i<<12|o<<6|63&t[e++])?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else r+=String.fromCharCode(a)}return r}function j(t,e){return(t>>>=0)?R(T,t,e):""}function k(t,e,n,r){if(!(0<r))return 0;var a=n>>>=0;r=n+r-1;for(var i=0;i<t.length;++i){var o=t.charCodeAt(i);if(55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&t.charCodeAt(++i)),127>=o){if(n>=r)break;e[n++>>>0]=o}else{if(2047>=o){if(n+1>=r)break;e[n++>>>0]=192|o>>6}else{if(65535>=o){if(n+2>=r)break;e[n++>>>0]=224|o>>12}else{if(n+3>=r)break;e[n++>>>0]=240|o>>18,e[n++>>>0]=128|o>>12&63}e[n++>>>0]=128|o>>6&63}e[n++>>>0]=128|63&o}}return e[n>>>0]=0,n-a}function D(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);127>=r?e++:2047>=r?e+=2:55296<=r&&57343>=r?(e+=4,++n):e+=3}return e}function P(){var t=O.buffer;A=t,e.HEAP8=S=new Int8Array(t),e.HEAP16=new Int16Array(t),e.HEAP32=E=new Int32Array(t),e.HEAPU8=T=new Uint8Array(t),e.HEAPU16=new Uint16Array(t),e.HEAPU32=M=new Uint32Array(t),e.HEAPF32=new Float32Array(t),e.HEAPF64=new Float64Array(t)}var U,F=[],I=[],W=[],H=[],L=0;function z(){var t=e.preRun.shift();F.unshift(t)}var Y,B=0,G=null,N=null;function V(t){throw e.onAbort&&e.onAbort(t),w(t="Aborted("+t+")"),C=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),a(t),t}function $(){return Y.startsWith("data:application/octet-stream;base64,")}if(Y="ort-wasm.wasm",!$()){var q=Y;Y=e.locateFile?e.locateFile(q,m):m+q}function X(){var t=Y;try{if(t==Y&&g)return new Uint8Array(g);if(u)return u(t);throw"both async and sync fetching of the wasm failed"}catch(t){V(t)}}function J(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function Z(t){for(;0<t.length;)t.shift()(e)}var Q=[],K=0,tt=0;function et(t){this.Db=t,this.zb=t-24,this.Ub=function(t){M[this.zb+4>>2>>>0]=t},this.Eb=function(){return M[this.zb+4>>2>>>0]},this.Sb=function(t){M[this.zb+8>>2>>>0]=t},this.Wb=function(){return M[this.zb+8>>2>>>0]},this.Tb=function(){E[this.zb>>2>>>0]=0},this.Ib=function(t){S[this.zb+12>>0>>>0]=t?1:0},this.Pb=function(){return 0!=S[this.zb+12>>0>>>0]},this.Jb=function(t){S[this.zb+13>>0>>>0]=t?1:0},this.Lb=function(){return 0!=S[this.zb+13>>0>>>0]},this.Rb=function(t,e){this.Fb(0),this.Ub(t),this.Sb(e),this.Tb(),this.Ib(!1),this.Jb(!1)},this.Nb=function(){E[this.zb>>2>>>0]+=1},this.Xb=function(){var t=E[this.zb>>2>>>0];return E[this.zb>>2>>>0]=t-1,1===t},this.Fb=function(t){M[this.zb+16>>2>>>0]=t},this.Ob=function(){return M[this.zb+16>>2>>>0]},this.Qb=function(){if(Mt(this.Eb()))return M[this.Db>>2>>>0];var t=this.Ob();return 0!==t?t:this.Db}}function nt(t){return vt(new et(t).zb)}var rt=[];function at(t){var e=rt[t];return e||(t>=rt.length&&(rt.length=t+1),rt[t]=e=U.get(t)),e}function it(t){var e=D(t)+1,n=gt(e);return n&&k(t,S,n,e),n}var ot={};function ut(){if(!ct){var t,e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:p||"./this.program"};for(t in ot)void 0===ot[t]?delete e[t]:e[t]=ot[t];var n=[];for(t in e)n.push(t+"="+e[t]);ct=n}return ct}var ct,st=[null,[],[]];function lt(t,e){var n=st[t];0===e||10===e?((1===t?v:w)(R(n,0)),n.length=0):n.push(e)}var ft=0;function pt(t){return 0==t%4&&(0!=t%100||0==t%400)}var ht=[31,29,31,30,31,30,31,31,30,31,30,31],dt=[31,28,31,30,31,30,31,31,30,31,30,31];function yt(t,e,n,r){function a(t,e,n){for(t="number"==typeof t?t.toString():t||"";t.length<e;)t=n[0]+t;return t}function i(t,e){return a(t,e,"0")}function o(t,e){function n(t){return 0>t?-1:0<t?1:0}var r;return 0===(r=n(t.getFullYear()-e.getFullYear()))&&0===(r=n(t.getMonth()-e.getMonth()))&&(r=n(t.getDate()-e.getDate())),r}function u(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function c(t){var e=t.Bb;for(t=new Date(new Date(t.Cb+1900,0,1).getTime());0<e;){var n=t.getMonth(),r=(pt(t.getFullYear())?ht:dt)[n];if(!(e>r-t.getDate())){t.setDate(t.getDate()+e);break}e-=r-t.getDate()+1,t.setDate(1),11>n?t.setMonth(n+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))}return n=new Date(t.getFullYear()+1,0,4),e=u(new Date(t.getFullYear(),0,4)),n=u(n),0>=o(e,t)?0>=o(n,t)?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var s=E[r+40>>2>>>0];for(var l in r={$b:E[r>>2>>>0],Zb:E[r+4>>2>>>0],Gb:E[r+8>>2>>>0],Kb:E[r+12>>2>>>0],Hb:E[r+16>>2>>>0],Cb:E[r+20>>2>>>0],Ab:E[r+24>>2>>>0],Bb:E[r+28>>2>>>0],bc:E[r+32>>2>>>0],Yb:E[r+36>>2>>>0],ac:s?j(s):""},n=j(n),s={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})n=n.replace(new RegExp(l,"g"),s[l]);var f="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),p="January February March April May June July August September October November December".split(" ");for(l in s={"%a":function(t){return f[t.Ab].substring(0,3)},"%A":function(t){return f[t.Ab]},"%b":function(t){return p[t.Hb].substring(0,3)},"%B":function(t){return p[t.Hb]},"%C":function(t){return i((t.Cb+1900)/100|0,2)},"%d":function(t){return i(t.Kb,2)},"%e":function(t){return a(t.Kb,2," ")},"%g":function(t){return c(t).toString().substring(2)},"%G":function(t){return c(t)},"%H":function(t){return i(t.Gb,2)},"%I":function(t){return 0==(t=t.Gb)?t=12:12<t&&(t-=12),i(t,2)},"%j":function(t){for(var e=0,n=0;n<=t.Hb-1;e+=(pt(t.Cb+1900)?ht:dt)[n++]);return i(t.Kb+e,3)},"%m":function(t){return i(t.Hb+1,2)},"%M":function(t){return i(t.Zb,2)},"%n":function(){return"\\n"},"%p":function(t){return 0<=t.Gb&&12>t.Gb?"AM":"PM"},"%S":function(t){return i(t.$b,2)},"%t":function(){return"\\t"},"%u":function(t){return t.Ab||7},"%U":function(t){return i(Math.floor((t.Bb+7-t.Ab)/7),2)},"%V":function(t){var e=Math.floor((t.Bb+7-(t.Ab+6)%7)/7);if(2>=(t.Ab+371-t.Bb-2)%7&&e++,e)53==e&&(4==(n=(t.Ab+371-t.Bb)%7)||3==n&&pt(t.Cb)||(e=1));else{e=52;var n=(t.Ab+7-t.Bb-1)%7;(4==n||5==n&&pt(t.Cb%400-1))&&e++}return i(e,2)},"%w":function(t){return t.Ab},"%W":function(t){return i(Math.floor((t.Bb+7-(t.Ab+6)%7)/7),2)},"%y":function(t){return(t.Cb+1900).toString().substring(2)},"%Y":function(t){return t.Cb+1900},"%z":function(t){var e=0<=(t=t.Yb);return t=Math.abs(t)/60,(e?"+":"-")+String("0000"+(t/60*100+t%60)).slice(-4)},"%Z":function(t){return t.ac},"%%":function(){return"%"}},n=n.replace(/%%/g,"\\0\\0"),s)n.includes(l)&&(n=n.replace(new RegExp(l,"g"),s[l](r)));return l=function(t){var e=Array(D(t)+1);return k(t,e,0,e.length),e}(n=n.replace(/\\0\\0/g,"%")),l.length>e?0:(S.set(l,t>>>0),l.length-1)}var bt={a:function(t){return gt(t+24)+24},m:function(t){return(t=new et(t)).Pb()||(t.Ib(!0),K--),t.Jb(!1),Q.push(t),t.Nb(),t.Qb()},ia:function(t){throw w("Unexpected exception thrown, this is not properly supported - aborting"),C=!0,t},w:function(){Ot(0);var t=Q.pop();if(t.Xb()&&!t.Lb()){var e=t.Wb();e&&at(e)(t.Db),nt(t.Db)}tt=0},d:function(){var t=tt;if(!t)return ft=0;var e=new et(t);e.Fb(t);var n=e.Eb();if(!n)return ft=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(Et(i,n,e.zb+16))return ft=i,t}return ft=n,t},k:function(){var t=tt;if(!t)return ft=0;var e=new et(t);e.Fb(t);var n=e.Eb();if(!n)return ft=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(Et(i,n,e.zb+16))return ft=i,t}return ft=n,t},g:function(){var t=tt;if(!t)return ft=0;var e=new et(t);e.Fb(t);var n=e.Eb();if(!n)return ft=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(Et(i,n,e.zb+16))return ft=i,t}return ft=n,t},s:nt,L:function(){var t=Q.pop();t||V("no exception to throw");var e=t.Db;throw t.Lb()||(Q.push(t),t.Jb(!0),t.Ib(!1),K++),tt=e,e},b:function(t,e,n){throw new et(t).Rb(e,n),tt=t,K++,t},la:function(){return K},i:function(t){throw tt||(tt=t),t},H:function(){return 0},Ba:function(){},pa:function(){},ra:function(){},ka:function(){return 0},za:function(){},ua:function(){},ya:function(){},R:function(){},qa:function(){},na:function(){},Aa:function(){},oa:function(){},Ha:function(){},Ja:function(){V("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ia:function(){V("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},S:function(){return Date.now()},Ca:function(){return!0},Da:function(t,e){t=new Date(1e3*(M[t>>>2]+4294967296*E[t+4>>>2])),E[e>>2>>>0]=t.getUTCSeconds(),E[e+4>>2>>>0]=t.getUTCMinutes(),E[e+8>>2>>>0]=t.getUTCHours(),E[e+12>>2>>>0]=t.getUTCDate(),E[e+16>>2>>>0]=t.getUTCMonth(),E[e+20>>2>>>0]=t.getUTCFullYear()-1900,E[e+24>>2>>>0]=t.getUTCDay(),E[e+28>>2>>>0]=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},Ea:function(t,e){t=new Date(1e3*(M[t>>>2]+4294967296*E[t+4>>>2])),E[e>>2>>>0]=t.getSeconds(),E[e+4>>2>>>0]=t.getMinutes(),E[e+8>>2>>>0]=t.getHours(),E[e+12>>2>>>0]=t.getDate(),E[e+16>>2>>>0]=t.getMonth(),E[e+20>>2>>>0]=t.getFullYear()-1900,E[e+24>>2>>>0]=t.getDay();var n=new Date(t.getFullYear(),0,1);E[e+28>>2>>>0]=(t.getTime()-n.getTime())/864e5|0,E[e+36>>2>>>0]=-60*t.getTimezoneOffset();var r=new Date(t.getFullYear(),6,1).getTimezoneOffset();n=n.getTimezoneOffset(),E[e+32>>2>>>0]=0|(r!=n&&t.getTimezoneOffset()==Math.min(n,r))},Fa:function(t){var e=new Date(E[t+20>>2>>>0]+1900,E[t+16>>2>>>0],E[t+12>>2>>>0],E[t+8>>2>>>0],E[t+4>>2>>>0],E[t>>2>>>0],0),n=E[t+32>>2>>>0],r=e.getTimezoneOffset(),a=new Date(e.getFullYear(),0,1),i=new Date(e.getFullYear(),6,1).getTimezoneOffset(),o=a.getTimezoneOffset(),u=Math.min(o,i);return 0>n?E[t+32>>2>>>0]=Number(i!=o&&u==r):0<n!=(u==r)&&(i=Math.max(o,i),e.setTime(e.getTime()+6e4*((0<n?u:i)-r))),E[t+24>>2>>>0]=e.getDay(),E[t+28>>2>>>0]=(e.getTime()-a.getTime())/864e5|0,E[t>>2>>>0]=e.getSeconds(),E[t+4>>2>>>0]=e.getMinutes(),E[t+8>>2>>>0]=e.getHours(),E[t+12>>2>>>0]=e.getDate(),E[t+16>>2>>>0]=e.getMonth(),e.getTime()/1e3|0},sa:function(){return-52},ta:function(){},Ga:function t(e,n,r){t.Vb||(t.Vb=!0,function(t,e,n){function r(t){return(t=t.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?t[1]:"GMT"}var a=(new Date).getFullYear(),i=new Date(a,0,1),o=new Date(a,6,1);a=i.getTimezoneOffset();var u=o.getTimezoneOffset();E[t>>2>>>0]=60*Math.max(a,u),E[e>>2>>>0]=Number(a!=u),t=r(i),e=r(o),t=it(t),e=it(e),u<a?(M[n>>2>>>0]=t,M[n+4>>2>>>0]=e):(M[n>>2>>>0]=e,M[n+4>>2>>>0]=t)}(e,n,r))},B:function(){V("")},ma:function(){return 4294901760},I:b?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:()=>performance.now(),xa:function(t,e,n){T.copyWithin(t>>>0,e>>>0,e+n>>>0)},G:function(t){var e=T.length;if(4294901760<(t>>>=0))return!1;for(var n=1;4>=n;n*=2){var r=e*(1+.2/n);r=Math.min(r,t+100663296);var a=Math;r=Math.max(t,r),a=a.min.call(a,4294901760,r+(65536-r%65536)%65536);t:{try{O.grow(a-A.byteLength+65535>>>16),P();var i=1;break t}catch(t){}i=void 0}if(i)return!0}return!1},va:function(t,e){var n=0;return ut().forEach((function(r,a){var i=e+n;for(a=M[t+4*a>>2>>>0]=i,i=0;i<r.length;++i)S[a++>>0>>>0]=r.charCodeAt(i);S[a>>0>>>0]=0,n+=r.length+1})),0},wa:function(t,e){var n=ut();M[t>>2>>>0]=n.length;var r=0;return n.forEach((function(t){r+=t.length+1})),M[e>>2>>>0]=r,0},ba:function(t){_||0<L||(_t(),Z(W),wt(0),st[1].length&&lt(1,10),st[2].length&&lt(2,10)),_||0<L||(e.onExit&&e.onExit(t),C=!0),h(t,new J(t))},E:function(){return 52},Q:function(){return 52},ca:function(){return 70},P:function(t,e,n,r){for(var a=0,i=0;i<n;i++){var o=M[e>>2>>>0],u=M[e+4>>2>>>0];e+=8;for(var c=0;c<u;c++)lt(t,T[o+c>>>0]);a+=u}return M[r>>2>>>0]=a,0},c:function(){return ft},ja:function t(e,r){t.Mb||(t.Mb=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var t=new Uint8Array(1);return()=>(crypto.getRandomValues(t),t[0])}if(b)try{var e=n(Object(function(){var t=new Error("Cannot find module \'crypto\'");throw t.code="MODULE_NOT_FOUND",t}()));return()=>e.randomBytes(1)[0]}catch(t){}return()=>V("randomDevice")}());for(var a=0;a<r;a++)S[e+a>>0>>>0]=t.Mb();return 0},ea:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},fa:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},J:function(t){var e=At();try{return at(t)()}catch(t){if(St(e),t!==t+0)throw t;Ot(1,0)}},e:function(t,e){var n=At();try{return at(t)(e)}catch(t){if(St(n),t!==t+0)throw t;Ot(1,0)}},N:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},O:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},j:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},o:function(t,e,n,r){var a=At();try{return at(t)(e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},p:function(t,e,n,r,a){var i=At();try{return at(t)(e,n,r,a)}catch(t){if(St(i),t!==t+0)throw t;Ot(1,0)}},M:function(t,e,n,r,a,i){var o=At();try{return at(t)(e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},r:function(t,e,n,r,a,i){var o=At();try{return at(t)(e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},v:function(t,e,n,r,a,i,o){var u=At();try{return at(t)(e,n,r,a,i,o)}catch(t){if(St(u),t!==t+0)throw t;Ot(1,0)}},K:function(t,e,n,r,a,i,o,u){var c=At();try{return at(t)(e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},D:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=At();try{return at(t)(e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(St(p),t!==t+0)throw t;Ot(1,0)}},X:function(t,e,n,r,a,i,o,u){var c=At();try{return Ft(t,e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},V:function(t,e,n,r,a,i,o){var u=At();try{return xt(t,e,n,r,a,i,o)}catch(t){if(St(u),t!==t+0)throw t;Ot(1,0)}},U:function(t,e,n,r,a){var i=At();try{return It(t,e,n,r,a)}catch(t){if(St(i),t!==t+0)throw t;Ot(1,0)}},Z:function(t,e,n,r){var a=At();try{return Pt(t,e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},W:function(t){var e=At();try{return Ct(t)}catch(t){if(St(e),t!==t+0)throw t;Ot(1,0)}},Y:function(t,e){var n=At();try{return Ut(t,e)}catch(t){if(St(n),t!==t+0)throw t;Ot(1,0)}},T:function(t,e,n){var r=At();try{return Rt(t,e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},f:function(t){var e=At();try{at(t)()}catch(t){if(St(e),t!==t+0)throw t;Ot(1,0)}},q:function(t,e){var n=At();try{at(t)(e)}catch(t){if(St(n),t!==t+0)throw t;Ot(1,0)}},h:function(t,e,n){var r=At();try{at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},da:function(t,e,n,r){var a=At();try{at(t)(e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},l:function(t,e,n,r){var a=At();try{at(t)(e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},t:function(t,e,n,r,a){var i=At();try{at(t)(e,n,r,a)}catch(t){if(St(i),t!==t+0)throw t;Ot(1,0)}},u:function(t,e,n,r,a,i){var o=At();try{at(t)(e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},x:function(t,e,n,r,a,i,o){var u=At();try{at(t)(e,n,r,a,i,o)}catch(t){if(St(u),t!==t+0)throw t;Ot(1,0)}},z:function(t,e,n,r,a,i,o,u){var c=At();try{at(t)(e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},ga:function(t,e,n,r,a,i,o,u,c){var s=At();try{at(t)(e,n,r,a,i,o,u,c)}catch(t){if(St(s),t!==t+0)throw t;Ot(1,0)}},A:function(t,e,n,r,a,i,o,u,c,s,l){var f=At();try{at(t)(e,n,r,a,i,o,u,c,s,l)}catch(t){if(St(f),t!==t+0)throw t;Ot(1,0)}},C:function(t,e,n,r,a,i,o,u,c,s,l,f,p,h,d,y){var b=At();try{at(t)(e,n,r,a,i,o,u,c,s,l,f,p,h,d,y)}catch(t){if(St(b),t!==t+0)throw t;Ot(1,0)}},aa:function(t,e,n,r,a,i,o,u){var c=At();try{jt(t,e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},_:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=At();try{Dt(t,e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(St(p),t!==t+0)throw t;Ot(1,0)}},$:function(t,e,n,r,a,i){var o=At();try{kt(t,e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},n:function(t){return t},F:function(t){ft=t},ha:yt,y:function(t,e,n,r){return yt(t,e,n,r)}};!function(){function t(t){e.asm=t.exports,O=e.asm.Ka,P(),U=e.asm.ib,I.unshift(e.asm.La),B--,e.monitorRunDependencies&&e.monitorRunDependencies(B),0==B&&(null!==G&&(clearInterval(G),G=null),N&&(t=N,N=null,t()))}function n(e){t(e.instance)}function r(t){return function(){if(!g&&(d||y)){if("function"==typeof fetch&&!Y.startsWith("file://"))return fetch(Y,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at \'"+Y+"\'";return t.arrayBuffer()})).catch((function(){return X()}));if(o)return new Promise((function(t,e){o(Y,(function(e){t(new Uint8Array(e))}),e)}))}return Promise.resolve().then((function(){return X()}))}().then((function(t){return WebAssembly.instantiate(t,i)})).then((function(t){return t})).then(t,(function(t){w("failed to asynchronously prepare wasm: "+t),V(t)}))}var i={a:bt};if(B++,e.monitorRunDependencies&&e.monitorRunDependencies(B),e.instantiateWasm)try{return e.instantiateWasm(i,t)}catch(t){return w("Module.instantiateWasm callback failed with error: "+t),!1}(g||"function"!=typeof WebAssembly.instantiateStreaming||$()||Y.startsWith("file://")||b||"function"!=typeof fetch?r(n):fetch(Y,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,i).then(n,(function(t){return w("wasm streaming compile failed: "+t),w("falling back to ArrayBuffer instantiation"),r(n)}))}))).catch(a)}(),e.___wasm_call_ctors=function(){return(e.___wasm_call_ctors=e.asm.La).apply(null,arguments)},e._OrtInit=function(){return(e._OrtInit=e.asm.Ma).apply(null,arguments)},e._OrtCreateSessionOptions=function(){return(e._OrtCreateSessionOptions=e.asm.Na).apply(null,arguments)},e._OrtAppendExecutionProvider=function(){return(e._OrtAppendExecutionProvider=e.asm.Oa).apply(null,arguments)},e._OrtAddSessionConfigEntry=function(){return(e._OrtAddSessionConfigEntry=e.asm.Pa).apply(null,arguments)},e._OrtReleaseSessionOptions=function(){return(e._OrtReleaseSessionOptions=e.asm.Qa).apply(null,arguments)},e._OrtCreateSession=function(){return(e._OrtCreateSession=e.asm.Ra).apply(null,arguments)},e._OrtReleaseSession=function(){return(e._OrtReleaseSession=e.asm.Sa).apply(null,arguments)},e._OrtGetInputCount=function(){return(e._OrtGetInputCount=e.asm.Ta).apply(null,arguments)},e._OrtGetOutputCount=function(){return(e._OrtGetOutputCount=e.asm.Ua).apply(null,arguments)},e._OrtGetInputName=function(){return(e._OrtGetInputName=e.asm.Va).apply(null,arguments)},e._OrtGetOutputName=function(){return(e._OrtGetOutputName=e.asm.Wa).apply(null,arguments)},e._OrtFree=function(){return(e._OrtFree=e.asm.Xa).apply(null,arguments)},e._OrtCreateTensor=function(){return(e._OrtCreateTensor=e.asm.Ya).apply(null,arguments)},e._OrtGetTensorData=function(){return(e._OrtGetTensorData=e.asm.Za).apply(null,arguments)},e._OrtReleaseTensor=function(){return(e._OrtReleaseTensor=e.asm._a).apply(null,arguments)},e._OrtCreateRunOptions=function(){return(e._OrtCreateRunOptions=e.asm.$a).apply(null,arguments)},e._OrtAddRunConfigEntry=function(){return(e._OrtAddRunConfigEntry=e.asm.ab).apply(null,arguments)},e._OrtReleaseRunOptions=function(){return(e._OrtReleaseRunOptions=e.asm.bb).apply(null,arguments)},e._OrtRun=function(){return(e._OrtRun=e.asm.cb).apply(null,arguments)},e._OrtEndProfiling=function(){return(e._OrtEndProfiling=e.asm.db).apply(null,arguments)};var mt,gt=e._malloc=function(){return(gt=e._malloc=e.asm.eb).apply(null,arguments)},vt=e._free=function(){return(vt=e._free=e.asm.fb).apply(null,arguments)},wt=e._fflush=function(){return(wt=e._fflush=e.asm.gb).apply(null,arguments)},_t=e.___funcs_on_exit=function(){return(_t=e.___funcs_on_exit=e.asm.hb).apply(null,arguments)},Ot=e._setThrew=function(){return(Ot=e._setThrew=e.asm.jb).apply(null,arguments)},At=e.stackSave=function(){return(At=e.stackSave=e.asm.kb).apply(null,arguments)},St=e.stackRestore=function(){return(St=e.stackRestore=e.asm.lb).apply(null,arguments)},Tt=e.stackAlloc=function(){return(Tt=e.stackAlloc=e.asm.mb).apply(null,arguments)},Et=e.___cxa_can_catch=function(){return(Et=e.___cxa_can_catch=e.asm.nb).apply(null,arguments)},Mt=e.___cxa_is_pointer_type=function(){return(Mt=e.___cxa_is_pointer_type=e.asm.ob).apply(null,arguments)},Ct=e.dynCall_j=function(){return(Ct=e.dynCall_j=e.asm.pb).apply(null,arguments)},xt=e.dynCall_iiiiij=function(){return(xt=e.dynCall_iiiiij=e.asm.qb).apply(null,arguments)},Rt=e.dynCall_jii=function(){return(Rt=e.dynCall_jii=e.asm.rb).apply(null,arguments)},jt=e.dynCall_viiiiij=function(){return(jt=e.dynCall_viiiiij=e.asm.sb).apply(null,arguments)},kt=e.dynCall_vjji=function(){return(kt=e.dynCall_vjji=e.asm.tb).apply(null,arguments)},Dt=e.dynCall_viiijjjii=function(){return(Dt=e.dynCall_viiijjjii=e.asm.ub).apply(null,arguments)},Pt=e.dynCall_iij=function(){return(Pt=e.dynCall_iij=e.asm.vb).apply(null,arguments)},Ut=e.dynCall_ji=function(){return(Ut=e.dynCall_ji=e.asm.wb).apply(null,arguments)},Ft=e.dynCall_iiiiiij=function(){return(Ft=e.dynCall_iiiiiij=e.asm.xb).apply(null,arguments)},It=e.dynCall_iiij=function(){return(It=e.dynCall_iiij=e.asm.yb).apply(null,arguments)};function Wt(){function t(){if(!mt&&(mt=!0,e.calledRun=!0,!C)){if(Z(I),r(e),e.onRuntimeInitialized&&e.onRuntimeInitialized(),e.postRun)for("function"==typeof e.postRun&&(e.postRun=[e.postRun]);e.postRun.length;){var t=e.postRun.shift();H.unshift(t)}Z(H)}}if(!(0<B)){if(e.preRun)for("function"==typeof e.preRun&&(e.preRun=[e.preRun]);e.preRun.length;)z();Z(F),0<B||(e.setStatus?(e.setStatus("Running..."),setTimeout((function(){setTimeout((function(){e.setStatus("")}),1),t()}),1)):t())}}if(e.UTF8ToString=j,e.stringToUTF8=function(t,e,n){return k(t,T,e,n)},e.lengthBytesUTF8=D,e.stackSave=At,e.stackRestore=St,e.stackAlloc=Tt,N=function t(){mt||Wt(),mt||(N=t)},e.preInit)for("function"==typeof e.preInit&&(e.preInit=[e.preInit]);0<e.preInit.length;)e.preInit.pop()();return Wt(),t.ready});t.exports=r},967:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.iterateExtraOptions=void 0,e.iterateExtraOptions=(t,n,r,a)=>{if("object"==typeof t&&null!==t){if(r.has(t))throw new Error("Circular reference in options");r.add(t)}Object.entries(t).forEach((([t,i])=>{const o=n?n+t:t;if("object"==typeof i)(0,e.iterateExtraOptions)(i,o+".",r,a);else if("string"==typeof i||"number"==typeof i)a(o,i.toString());else{if("boolean"!=typeof i)throw new Error("Can\'t handle extra config type: "+typeof i);a(o,i?"1":"0")}}))}},586:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setRunOptions=void 0;const r=n(967),a=n(983),i=n(361);e.setRunOptions=t=>{const e=(0,i.getInstance)();let n=0;const o=[],u=t||{};try{if(void 0===(null==t?void 0:t.logSeverityLevel))u.logSeverityLevel=2;else if("number"!=typeof t.logSeverityLevel||!Number.isInteger(t.logSeverityLevel)||t.logSeverityLevel<0||t.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${t.logSeverityLevel}`);if(void 0===(null==t?void 0:t.logVerbosityLevel))u.logVerbosityLevel=0;else if("number"!=typeof t.logVerbosityLevel||!Number.isInteger(t.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${t.logVerbosityLevel}`);void 0===(null==t?void 0:t.terminate)&&(u.terminate=!1);let i=0;if(void 0!==(null==t?void 0:t.tag)&&(i=(0,a.allocWasmString)(t.tag,o)),n=e._OrtCreateRunOptions(u.logSeverityLevel,u.logVerbosityLevel,!!u.terminate,i),0===n)throw new Error("Can\'t create run options");return void 0!==(null==t?void 0:t.extra)&&(0,r.iterateExtraOptions)(t.extra,"",new WeakSet,((t,r)=>{const i=(0,a.allocWasmString)(t,o),u=(0,a.allocWasmString)(r,o);if(0!==e._OrtAddRunConfigEntry(n,i,u))throw new Error(`Can\'t set a run config entry: ${t} - ${r}`)})),[n,o]}catch(t){throw 0!==n&&e._OrtReleaseRunOptions(n),o.forEach(e._free),t}}},919:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setSessionOptions=void 0;const r=n(967),a=n(983),i=n(361);e.setSessionOptions=t=>{const e=(0,i.getInstance)();let n=0;const o=[],u=t||{};(t=>{t.extra||(t.extra={}),t.extra.session||(t.extra.session={});const e=t.extra.session;e.use_ort_model_bytes_directly||(e.use_ort_model_bytes_directly="1")})(u);try{void 0===(null==t?void 0:t.graphOptimizationLevel)&&(u.graphOptimizationLevel="all");const c=(t=>{switch(t){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${t}`)}})(u.graphOptimizationLevel);void 0===(null==t?void 0:t.enableCpuMemArena)&&(u.enableCpuMemArena=!0),void 0===(null==t?void 0:t.enableMemPattern)&&(u.enableMemPattern=!0),void 0===(null==t?void 0:t.executionMode)&&(u.executionMode="sequential");const s=(t=>{switch(t){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${t}`)}})(u.executionMode);let l=0;if(void 0!==(null==t?void 0:t.logId)&&(l=(0,a.allocWasmString)(t.logId,o)),void 0===(null==t?void 0:t.logSeverityLevel))u.logSeverityLevel=2;else if("number"!=typeof t.logSeverityLevel||!Number.isInteger(t.logSeverityLevel)||t.logSeverityLevel<0||t.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${t.logSeverityLevel}`);if(void 0===(null==t?void 0:t.logVerbosityLevel))u.logVerbosityLevel=0;else if("number"!=typeof t.logVerbosityLevel||!Number.isInteger(t.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${t.logVerbosityLevel}`);if(void 0===(null==t?void 0:t.enableProfiling)&&(u.enableProfiling=!1),n=e._OrtCreateSessionOptions(c,!!u.enableCpuMemArena,!!u.enableMemPattern,s,!!u.enableProfiling,0,l,u.logSeverityLevel,u.logVerbosityLevel),0===n)throw new Error("Can\'t create session options");return(null==t?void 0:t.executionProviders)&&((t,e,n)=>{for(const r of e){let e="string"==typeof r?r:r.name;switch(e){case"xnnpack":e="XNNPACK";break;case"wasm":case"cpu":continue;default:throw new Error(`not supported EP: ${e}`)}const o=(0,a.allocWasmString)(e,n);if(0!==(0,i.getInstance)()._OrtAppendExecutionProvider(t,o))throw new Error(`Can\'t append execution provider: ${e}`)}})(n,t.executionProviders,o),void 0!==(null==t?void 0:t.extra)&&(0,r.iterateExtraOptions)(t.extra,"",new WeakSet,((t,r)=>{const i=(0,a.allocWasmString)(t,o),u=(0,a.allocWasmString)(r,o);if(0!==e._OrtAddSessionConfigEntry(n,i,u))throw new Error(`Can\'t set a session config entry: ${t} - ${r}`)})),[n,o]}catch(t){throw 0!==n&&e._OrtReleaseSessionOptions(n),o.forEach(e._free),t}}},983:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.allocWasmString=void 0;const r=n(361);e.allocWasmString=(t,e)=>{const n=(0,r.getInstance)(),a=n.lengthBytesUTF8(t)+1,i=n._malloc(a);return n.stringToUTF8(t,i,a),e.push(i),i}},349:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.extractTransferableBuffers=e.endProfiling=e.run=e.releaseSession=e.createSession=e.createSessionFinalize=e.createSessionAllocate=e.initOrt=void 0;const r=n(586),a=n(919),i=n(983),o=n(361);e.initOrt=(t,e)=>{const n=(0,o.getInstance)()._OrtInit(t,e);if(0!==n)throw new Error(`Can\'t initialize onnxruntime. error code = ${n}`)};const u=new Map;e.createSessionAllocate=t=>{const e=(0,o.getInstance)(),n=e._malloc(t.byteLength);return e.HEAPU8.set(t,n),[n,t.byteLength]},e.createSessionFinalize=(t,e)=>{const n=(0,o.getInstance)();let r=0,i=0,c=[];try{if([i,c]=(0,a.setSessionOptions)(e),r=n._OrtCreateSession(t[0],t[1],i),0===r)throw new Error("Can\'t create a session")}finally{n._free(t[0]),n._OrtReleaseSessionOptions(i),c.forEach(n._free)}const s=n._OrtGetInputCount(r),l=n._OrtGetOutputCount(r),f=[],p=[],h=[],d=[];for(let t=0;t<s;t++){const e=n._OrtGetInputName(r,t);if(0===e)throw new Error("Can\'t get an input name");p.push(e),f.push(n.UTF8ToString(e))}for(let t=0;t<l;t++){const e=n._OrtGetOutputName(r,t);if(0===e)throw new Error("Can\'t get an output name");d.push(e),h.push(n.UTF8ToString(e))}return u.set(r,[r,p,d]),[r,f,h]},e.createSession=(t,n)=>{const r=(0,e.createSessionAllocate)(t);return(0,e.createSessionFinalize)(r,n)},e.releaseSession=t=>{const e=(0,o.getInstance)(),n=u.get(t);if(!n)throw new Error("invalid session id");const r=n[0],a=n[1],i=n[2];a.forEach(e._OrtFree),i.forEach(e._OrtFree),e._OrtReleaseSession(r),u.delete(t)};const c=t=>{switch(t){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${t}`)}},s=t=>{switch(t){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${t}`)}},l=t=>{switch(t){case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${t}`)}};e.run=(t,e,n,a,f)=>{const p=(0,o.getInstance)(),h=u.get(t);if(!h)throw new Error("invalid session id");const d=h[0],y=h[1],b=h[2],m=e.length,g=a.length;let v=0,w=[];const _=[],O=[];try{[v,w]=(0,r.setRunOptions)(f);for(let t=0;t<m;t++){const e=n[t][0],r=n[t][1],a=n[t][2];let o,u;if(Array.isArray(a)){u=4*a.length,o=p._malloc(u),O.push(o);let t=o/4;for(let e=0;e<a.length;e++){if("string"!=typeof a[e])throw new TypeError(`tensor data at index ${e} is not a string`);p.HEAPU32[t++]=(0,i.allocWasmString)(a[e],O)}}else u=a.byteLength,o=p._malloc(u),O.push(o),p.HEAPU8.set(new Uint8Array(a.buffer,a.byteOffset,u),o);const s=p.stackSave(),l=p.stackAlloc(4*r.length);try{let t=l/4;r.forEach((e=>p.HEAP32[t++]=e));const n=p._OrtCreateTensor(c(e),o,u,l,r.length);if(0===n)throw new Error("Can\'t create a tensor");_.push(n)}finally{p.stackRestore(s)}}const t=p.stackSave(),o=p.stackAlloc(4*m),u=p.stackAlloc(4*m),h=p.stackAlloc(4*g),A=p.stackAlloc(4*g);try{let n=o/4,r=u/4,i=h/4,c=A/4;for(let t=0;t<m;t++)p.HEAPU32[n++]=_[t],p.HEAPU32[r++]=y[e[t]];for(let t=0;t<g;t++)p.HEAPU32[i++]=0,p.HEAPU32[c++]=b[a[t]];let f=p._OrtRun(d,u,o,m,A,g,h,v);const w=[];if(0===f)for(let t=0;t<g;t++){const e=p.HEAPU32[h/4+t],n=p.stackSave(),r=p.stackAlloc(16);let a,i=0;try{if(f=p._OrtGetTensorData(e,r,r+4,r+8,r+12),0!==f)throw new Error(`Can\'t access output tensor data. error code = ${f}`);let t=r/4;const o=p.HEAPU32[t++];i=p.HEAPU32[t++];const u=p.HEAPU32[t++],c=p.HEAPU32[t++],h=[];for(let t=0;t<c;t++)h.push(p.HEAPU32[u/4+t]);p._OrtFree(u);const d=0===h.length?1:h.reduce(((t,e)=>t*e));if(a=s(o),"string"===a){const t=[];let e=i/4;for(let n=0;n<d;n++){const r=p.HEAPU32[e++],a=n===d-1?void 0:p.HEAPU32[e]-r;t.push(p.UTF8ToString(r,a))}w.push([a,h,t])}else{const t=new(l(a))(d);new Uint8Array(t.buffer,t.byteOffset,t.byteLength).set(p.HEAPU8.subarray(i,i+t.byteLength)),w.push([a,h,t])}}finally{p.stackRestore(n),"string"===a&&i&&p._free(i),p._OrtReleaseTensor(e)}}if(0===f)return w;throw new Error(`failed to call OrtRun(). error code = ${f}.`)}finally{p.stackRestore(t)}}finally{_.forEach(p._OrtReleaseTensor),O.forEach(p._free),p._OrtReleaseRunOptions(v),w.forEach(p._free)}},e.endProfiling=t=>{const e=(0,o.getInstance)(),n=u.get(t);if(!n)throw new Error("invalid session id");const r=n[0],a=e._OrtEndProfiling(r);if(0===a)throw new Error("Can\'t get an profile file name");e._OrtFree(a)},e.extractTransferableBuffers=t=>{const e=[];for(const n of t){const t=n[2];!Array.isArray(t)&&t.buffer&&e.push(t.buffer)}return e}},361:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(e,n);a&&!("get"in a?!e.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,a)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return a(e,t),e},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.getInstance=e.initializeWebAssembly=void 0;const u=i(n(449)),c=o(n(932)),s=n(474);let l,f=!1,p=!1,h=!1;const d=(t,e)=>e?t?"ort-wasm-simd-threaded.wasm":"ort-wasm-threaded.wasm":t?"ort-wasm-simd.wasm":"ort-wasm.wasm";e.initializeWebAssembly=async t=>{if(f)return Promise.resolve();if(p)throw new Error("multiple calls to \'initializeWebAssembly()\' detected.");if(h)throw new Error("previous call to \'initializeWebAssembly()\' failed.");p=!0;const e=t.initTimeout,r=t.numThreads,a=t.simd,i=r>1&&(()=>{try{return"undefined"!=typeof SharedArrayBuffer&&("undefined"!=typeof MessageChannel&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch(t){return!1}})(),o=a&&(()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch(t){return!1}})(),y="string"==typeof t.wasmPaths?t.wasmPaths:void 0,b=d(!1,i),m=d(o,i),g="object"==typeof t.wasmPaths?t.wasmPaths[m]:void 0;let v=!1;const w=[];if(e>0&&w.push(new Promise((t=>{setTimeout((()=>{v=!0,t()}),e)}))),w.push(new Promise(((t,e)=>{const r=i?s:c.default,a={locateFile:(t,e)=>i&&t.endsWith(".worker.js")&&"undefined"!=typeof Blob?URL.createObjectURL(new Blob([n(154)],{type:"text/javascript"})):t===b?null!=g?g:(null!=y?y:e)+m:e+t};if(i)if("undefined"==typeof Blob)a.mainScriptUrlOrBlob=u.join("/","ort-wasm-threaded.js");else{const t=`var ortWasmThreaded=(function(){var _scriptDir;return ${r.toString()}})();`;a.mainScriptUrlOrBlob=new Blob([t],{type:"text/javascript"})}r(a).then((e=>{p=!1,f=!0,l=e,t()}),(t=>{p=!1,h=!0,e(t)}))}))),await Promise.race(w),v)throw new Error(`WebAssembly backend initializing failed due to timeout: ${e}ms`)},e.getInstance=()=>{if(f&&l)return l;throw new Error("WebAssembly is not initialized yet.")},e.dispose=()=>{var t;!f||p||h||(p=!0,null===(t=l.PThread)||void 0===t||t.terminateAllThreads(),l=void 0,p=!1,f=!1,h=!0)}},154:t=>{"use strict";t.exports=\'"use strict";var e={},t="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;if(t){var r=require("worker_threads"),a=r.parentPort;a.on("message",(e=>onmessage({data:e})));var o=require("fs");Object.assign(global,{self:global,require:require,Module:e,location:{href:__filename},Worker:r.Worker,importScripts:function(e){(0,eval)(o.readFileSync(e,"utf8"))},postMessage:function(e){a.postMessage(e)},performance:global.performance||{now:function(){return Date.now()}}})}var s=!1,n=[],i=function(){var e=Array.prototype.slice.call(arguments).join(" ");t?o.writeSync(2,e+"\\\\n"):console.error(e)};self.alert=function(){var t=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:t,threadId:e._pthread_self()})},e.instantiateWasm=(t,r)=>{var a=new WebAssembly.Instance(e.wasmModule,t);return r(a),e.wasmModule=null,a.exports},self.onunhandledrejection=e=>{throw e.reason??e},self.onmessage=t=>{try{if("load"===t.data.cmd){if(e.wasmModule=t.data.wasmModule,e.wasmMemory=t.data.wasmMemory,e.buffer=e.wasmMemory.buffer,e.ENVIRONMENT_IS_PTHREAD=!0,"string"==typeof t.data.urlOrBlob)importScripts(t.data.urlOrBlob);else{var r=URL.createObjectURL(t.data.urlOrBlob);importScripts(r),URL.revokeObjectURL(r)}ortWasmThreaded(e).then((function(t){e=t}))}else if("run"===t.data.cmd){e.__performance_now_clock_drift=performance.now()-t.data.time,e.__emscripten_thread_init(t.data.pthread_ptr,0,0,1),e.establishStackSpace(),e.PThread.receiveObjectTransfer(t.data),e.PThread.threadInitTLS(),s||(n.forEach((t=>{e.executeNotifiedProxyingQueue(t)})),n=[],s=!0);try{e.invokeEntryPoint(t.data.start_routine,t.data.arg)}catch(t){if("unwind"!=t){if(!(t instanceof e.ExitStatus))throw t;e.keepRuntimeAlive()||e.__emscripten_thread_exit(t.status)}}}else"cancel"===t.data.cmd?e._pthread_self()&&e.__emscripten_thread_exit(-1):"setimmediate"===t.data.target||("processProxyingQueue"===t.data.cmd?s?e.executeNotifiedProxyingQueue(t.data.queue):n.push(t.data.queue):(i("worker.js received unknown command "+t.data.cmd),i(t.data)))}catch(t){throw i("worker.js onmessage() captured an uncaught exception: "+t),t&&t.stack&&i(t.stack),e.__emscripten_thread_crashed&&e.__emscripten_thread_crashed(),t}};\\n\'},384:()=>{},993:()=>{},908:()=>{},953:()=>{},925:()=>{},449:()=>{}},e={};function n(r){var a=e[r];if(void 0!==a)return a.exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,n),i.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{"use strict";const t=n(349),e=n(361);self.onmessage=n=>{switch(n.data.type){case"init-wasm":(0,e.initializeWebAssembly)(n.data.in).then((()=>postMessage({type:"init-wasm"})),(t=>postMessage({type:"init-wasm",err:t})));break;case"init-ort":try{const{numThreads:e,loggingLevel:r}=n.data.in;(0,t.initOrt)(e,r),postMessage({type:"init-ort"})}catch(t){postMessage({type:"init-ort",err:t})}break;case"create_allocate":try{const{model:e}=n.data.in,r=(0,t.createSessionAllocate)(e);postMessage({type:"create_allocate",out:r})}catch(t){postMessage({type:"create_allocate",err:t})}break;case"create_finalize":try{const{modeldata:e,options:r}=n.data.in,a=(0,t.createSessionFinalize)(e,r);postMessage({type:"create_finalize",out:a})}catch(t){postMessage({type:"create_finalize",err:t})}break;case"create":try{const{model:e,options:r}=n.data.in,a=(0,t.createSession)(e,r);postMessage({type:"create",out:a})}catch(t){postMessage({type:"create",err:t})}break;case"release":try{const e=n.data.in;(0,t.releaseSession)(e),postMessage({type:"release"})}catch(t){postMessage({type:"release",err:t})}break;case"run":try{const{sessionId:e,inputIndices:r,inputs:a,outputIndices:i,options:o}=n.data.in,u=(0,t.run)(e,r,a,i,o);postMessage({type:"run",out:u},(0,t.extractTransferableBuffers)(u))}catch(t){postMessage({type:"run",err:t})}break;case"end-profiling":try{const e=n.data.in;(0,t.endProfiling)(e),postMessage({type:"end-profiling"})}catch(t){postMessage({type:"end-profiling",err:t})}}}})()})();\n',"Worker",void 0,void 0)}},477:_e=>{_e.exports=function(_,et,tt,rt){var it=self||window;try{try{var st;try{st=new it.Blob([_])}catch{(st=new(it.BlobBuilder||it.WebKitBlobBuilder||it.MozBlobBuilder||it.MSBlobBuilder)).append(_),st=st.getBlob()}var at=it.URL||it.webkitURL,ct=at.createObjectURL(st),ut=new it[et](ct,tt);return at.revokeObjectURL(ct),ut}catch{return new it[et]("data:application/javascript,".concat(encodeURIComponent(_)),tt)}}catch{if(!rt)throw Error("Inline worker is not supported");return new it[et](rt,tt)}}},4154:_e=>{_e.exports=`"use strict";var e={},t="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;if(t){var r=require("worker_threads"),a=r.parentPort;a.on("message",(e=>onmessage({data:e})));var o=require("fs");Object.assign(global,{self:global,require:require,Module:e,location:{href:__filename},Worker:r.Worker,importScripts:function(e){(0,eval)(o.readFileSync(e,"utf8"))},postMessage:function(e){a.postMessage(e)},performance:global.performance||{now:function(){return Date.now()}}})}var s=!1,n=[],i=function(){var e=Array.prototype.slice.call(arguments).join(" ");t?o.writeSync(2,e+"\\n"):console.error(e)};self.alert=function(){var t=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:t,threadId:e._pthread_self()})},e.instantiateWasm=(t,r)=>{var a=new WebAssembly.Instance(e.wasmModule,t);return r(a),e.wasmModule=null,a.exports},self.onunhandledrejection=e=>{throw e.reason??e},self.onmessage=t=>{try{if("load"===t.data.cmd){if(e.wasmModule=t.data.wasmModule,e.wasmMemory=t.data.wasmMemory,e.buffer=e.wasmMemory.buffer,e.ENVIRONMENT_IS_PTHREAD=!0,"string"==typeof t.data.urlOrBlob)importScripts(t.data.urlOrBlob);else{var r=URL.createObjectURL(t.data.urlOrBlob);importScripts(r),URL.revokeObjectURL(r)}ortWasmThreaded(e).then((function(t){e=t}))}else if("run"===t.data.cmd){e.__performance_now_clock_drift=performance.now()-t.data.time,e.__emscripten_thread_init(t.data.pthread_ptr,0,0,1),e.establishStackSpace(),e.PThread.receiveObjectTransfer(t.data),e.PThread.threadInitTLS(),s||(n.forEach((t=>{e.executeNotifiedProxyingQueue(t)})),n=[],s=!0);try{e.invokeEntryPoint(t.data.start_routine,t.data.arg)}catch(t){if("unwind"!=t){if(!(t instanceof e.ExitStatus))throw t;e.keepRuntimeAlive()||e.__emscripten_thread_exit(t.status)}}}else"cancel"===t.data.cmd?e._pthread_self()&&e.__emscripten_thread_exit(-1):"setimmediate"===t.data.target||("processProxyingQueue"===t.data.cmd?s?e.executeNotifiedProxyingQueue(t.data.queue):n.push(t.data.queue):(i("worker.js received unknown command "+t.data.cmd),i(t.data)))}catch(t){throw i("worker.js onmessage() captured an uncaught exception: "+t),t&&t.stack&&i(t.stack),e.__emscripten_thread_crashed&&e.__emscripten_thread_crashed(),t}};
`},1670:_e=>{_e.exports=__WEBPACK_EXTERNAL_MODULE__1670__},7067:()=>{},1296:()=>{},1384:()=>{},3993:()=>{},908:()=>{},6953:()=>{},9925:()=>{},2806:()=>{},6449:()=>{},2850:()=>{},5381:()=>{},5686:(_e,_,et)=>{et.r(_),et.d(_,{flatbuffers:()=>tt});var tt={};tt.Offset,tt.Table,tt.SIZEOF_SHORT=2,tt.SIZEOF_INT=4,tt.FILE_IDENTIFIER_LENGTH=4,tt.SIZE_PREFIX_LENGTH=4,tt.Encoding={UTF8_BYTES:1,UTF16_STRING:2},tt.int32=new Int32Array(2),tt.float32=new Float32Array(tt.int32.buffer),tt.float64=new Float64Array(tt.int32.buffer),tt.isLittleEndian=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1,tt.Long=function(rt,it){this.low=0|rt,this.high=0|it},tt.Long.create=function(rt,it){return rt==0&&it==0?tt.Long.ZERO:new tt.Long(rt,it)},tt.Long.prototype.toFloat64=function(){return(this.low>>>0)+4294967296*this.high},tt.Long.prototype.equals=function(rt){return this.low==rt.low&&this.high==rt.high},tt.Long.ZERO=new tt.Long(0,0),tt.Builder=function(rt){if(rt)it=rt;else var it=1024;this.bb=tt.ByteBuffer.allocate(it),this.space=it,this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},tt.Builder.prototype.clear=function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},tt.Builder.prototype.forceDefaults=function(rt){this.force_defaults=rt},tt.Builder.prototype.dataBuffer=function(){return this.bb},tt.Builder.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())},tt.Builder.prototype.prep=function(rt,it){rt>this.minalign&&(this.minalign=rt);for(var st=1+~(this.bb.capacity()-this.space+it)&rt-1;this.space<st+rt+it;){var at=this.bb.capacity();this.bb=tt.Builder.growByteBuffer(this.bb),this.space+=this.bb.capacity()-at}this.pad(st)},tt.Builder.prototype.pad=function(rt){for(var it=0;it<rt;it++)this.bb.writeInt8(--this.space,0)},tt.Builder.prototype.writeInt8=function(rt){this.bb.writeInt8(this.space-=1,rt)},tt.Builder.prototype.writeInt16=function(rt){this.bb.writeInt16(this.space-=2,rt)},tt.Builder.prototype.writeInt32=function(rt){this.bb.writeInt32(this.space-=4,rt)},tt.Builder.prototype.writeInt64=function(rt){this.bb.writeInt64(this.space-=8,rt)},tt.Builder.prototype.writeFloat32=function(rt){this.bb.writeFloat32(this.space-=4,rt)},tt.Builder.prototype.writeFloat64=function(rt){this.bb.writeFloat64(this.space-=8,rt)},tt.Builder.prototype.addInt8=function(rt){this.prep(1,0),this.writeInt8(rt)},tt.Builder.prototype.addInt16=function(rt){this.prep(2,0),this.writeInt16(rt)},tt.Builder.prototype.addInt32=function(rt){this.prep(4,0),this.writeInt32(rt)},tt.Builder.prototype.addInt64=function(rt){this.prep(8,0),this.writeInt64(rt)},tt.Builder.prototype.addFloat32=function(rt){this.prep(4,0),this.writeFloat32(rt)},tt.Builder.prototype.addFloat64=function(rt){this.prep(8,0),this.writeFloat64(rt)},tt.Builder.prototype.addFieldInt8=function(rt,it,st){(this.force_defaults||it!=st)&&(this.addInt8(it),this.slot(rt))},tt.Builder.prototype.addFieldInt16=function(rt,it,st){(this.force_defaults||it!=st)&&(this.addInt16(it),this.slot(rt))},tt.Builder.prototype.addFieldInt32=function(rt,it,st){(this.force_defaults||it!=st)&&(this.addInt32(it),this.slot(rt))},tt.Builder.prototype.addFieldInt64=function(rt,it,st){!this.force_defaults&&it.equals(st)||(this.addInt64(it),this.slot(rt))},tt.Builder.prototype.addFieldFloat32=function(rt,it,st){(this.force_defaults||it!=st)&&(this.addFloat32(it),this.slot(rt))},tt.Builder.prototype.addFieldFloat64=function(rt,it,st){(this.force_defaults||it!=st)&&(this.addFloat64(it),this.slot(rt))},tt.Builder.prototype.addFieldOffset=function(rt,it,st){(this.force_defaults||it!=st)&&(this.addOffset(it),this.slot(rt))},tt.Builder.prototype.addFieldStruct=function(rt,it,st){it!=st&&(this.nested(it),this.slot(rt))},tt.Builder.prototype.nested=function(rt){if(rt!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")},tt.Builder.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")},tt.Builder.prototype.slot=function(rt){this.vtable[rt]=this.offset()},tt.Builder.prototype.offset=function(){return this.bb.capacity()-this.space},tt.Builder.growByteBuffer=function(rt){var it=rt.capacity();if(3221225472&it)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var st=it<<1,at=tt.ByteBuffer.allocate(st);return at.setPosition(st-it),at.bytes().set(rt.bytes(),st-it),at},tt.Builder.prototype.addOffset=function(rt){this.prep(tt.SIZEOF_INT,0),this.writeInt32(this.offset()-rt+tt.SIZEOF_INT)},tt.Builder.prototype.startObject=function(rt){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=rt;for(var it=0;it<rt;it++)this.vtable[it]=0;this.isNested=!0,this.object_start=this.offset()},tt.Builder.prototype.endObject=function(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var rt=this.offset(),it=this.vtable_in_use-1;it>=0&&this.vtable[it]==0;it--);for(var st=it+1;it>=0;it--)this.addInt16(this.vtable[it]!=0?rt-this.vtable[it]:0);this.addInt16(rt-this.object_start);var at=(st+2)*tt.SIZEOF_SHORT;this.addInt16(at);var ct=0,ut=this.space;e:for(it=0;it<this.vtables.length;it++){var dt=this.bb.capacity()-this.vtables[it];if(at==this.bb.readInt16(dt)){for(var ot=tt.SIZEOF_SHORT;ot<at;ot+=tt.SIZEOF_SHORT)if(this.bb.readInt16(ut+ot)!=this.bb.readInt16(dt+ot))continue e;ct=this.vtables[it];break}}return ct?(this.space=this.bb.capacity()-rt,this.bb.writeInt32(this.space,ct-rt)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-rt,this.offset()-rt)),this.isNested=!1,rt},tt.Builder.prototype.finish=function(rt,it,st){var at=st?tt.SIZE_PREFIX_LENGTH:0;if(it){var ct=it;if(this.prep(this.minalign,tt.SIZEOF_INT+tt.FILE_IDENTIFIER_LENGTH+at),ct.length!=tt.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+tt.FILE_IDENTIFIER_LENGTH);for(var ut=tt.FILE_IDENTIFIER_LENGTH-1;ut>=0;ut--)this.writeInt8(ct.charCodeAt(ut))}this.prep(this.minalign,tt.SIZEOF_INT+at),this.addOffset(rt),at&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)},tt.Builder.prototype.finishSizePrefixed=function(rt,it){this.finish(rt,it,!0)},tt.Builder.prototype.requiredField=function(rt,it){var st=this.bb.capacity()-rt,at=st-this.bb.readInt32(st);if(this.bb.readInt16(at+it)==0)throw new Error("FlatBuffers: field "+it+" must be set")},tt.Builder.prototype.startVector=function(rt,it,st){this.notNested(),this.vector_num_elems=it,this.prep(tt.SIZEOF_INT,rt*it),this.prep(st,rt*it)},tt.Builder.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()},tt.Builder.prototype.createString=function(rt){if(rt instanceof Uint8Array)var it=rt;else{it=[];for(var st=0;st<rt.length;){var at,ct=rt.charCodeAt(st++);(at=ct<55296||ct>=56320?ct:(ct<<10)+rt.charCodeAt(st++)+-56613888)<128?it.push(at):(at<2048?it.push(at>>6&31|192):(at<65536?it.push(at>>12&15|224):it.push(at>>18&7|240,at>>12&63|128),it.push(at>>6&63|128)),it.push(63&at|128))}}this.addInt8(0),this.startVector(1,it.length,1),this.bb.setPosition(this.space-=it.length),st=0;for(var ut=this.space,dt=this.bb.bytes();st<it.length;st++)dt[ut++]=it[st];return this.endVector()},tt.Builder.prototype.createLong=function(rt,it){return tt.Long.create(rt,it)},tt.ByteBuffer=function(rt){this.bytes_=rt,this.position_=0},tt.ByteBuffer.allocate=function(rt){return new tt.ByteBuffer(new Uint8Array(rt))},tt.ByteBuffer.prototype.clear=function(){this.position_=0},tt.ByteBuffer.prototype.bytes=function(){return this.bytes_},tt.ByteBuffer.prototype.position=function(){return this.position_},tt.ByteBuffer.prototype.setPosition=function(rt){this.position_=rt},tt.ByteBuffer.prototype.capacity=function(){return this.bytes_.length},tt.ByteBuffer.prototype.readInt8=function(rt){return this.readUint8(rt)<<24>>24},tt.ByteBuffer.prototype.readUint8=function(rt){return this.bytes_[rt]},tt.ByteBuffer.prototype.readInt16=function(rt){return this.readUint16(rt)<<16>>16},tt.ByteBuffer.prototype.readUint16=function(rt){return this.bytes_[rt]|this.bytes_[rt+1]<<8},tt.ByteBuffer.prototype.readInt32=function(rt){return this.bytes_[rt]|this.bytes_[rt+1]<<8|this.bytes_[rt+2]<<16|this.bytes_[rt+3]<<24},tt.ByteBuffer.prototype.readUint32=function(rt){return this.readInt32(rt)>>>0},tt.ByteBuffer.prototype.readInt64=function(rt){return new tt.Long(this.readInt32(rt),this.readInt32(rt+4))},tt.ByteBuffer.prototype.readUint64=function(rt){return new tt.Long(this.readUint32(rt),this.readUint32(rt+4))},tt.ByteBuffer.prototype.readFloat32=function(rt){return tt.int32[0]=this.readInt32(rt),tt.float32[0]},tt.ByteBuffer.prototype.readFloat64=function(rt){return tt.int32[tt.isLittleEndian?0:1]=this.readInt32(rt),tt.int32[tt.isLittleEndian?1:0]=this.readInt32(rt+4),tt.float64[0]},tt.ByteBuffer.prototype.writeInt8=function(rt,it){this.bytes_[rt]=it},tt.ByteBuffer.prototype.writeUint8=function(rt,it){this.bytes_[rt]=it},tt.ByteBuffer.prototype.writeInt16=function(rt,it){this.bytes_[rt]=it,this.bytes_[rt+1]=it>>8},tt.ByteBuffer.prototype.writeUint16=function(rt,it){this.bytes_[rt]=it,this.bytes_[rt+1]=it>>8},tt.ByteBuffer.prototype.writeInt32=function(rt,it){this.bytes_[rt]=it,this.bytes_[rt+1]=it>>8,this.bytes_[rt+2]=it>>16,this.bytes_[rt+3]=it>>24},tt.ByteBuffer.prototype.writeUint32=function(rt,it){this.bytes_[rt]=it,this.bytes_[rt+1]=it>>8,this.bytes_[rt+2]=it>>16,this.bytes_[rt+3]=it>>24},tt.ByteBuffer.prototype.writeInt64=function(rt,it){this.writeInt32(rt,it.low),this.writeInt32(rt+4,it.high)},tt.ByteBuffer.prototype.writeUint64=function(rt,it){this.writeUint32(rt,it.low),this.writeUint32(rt+4,it.high)},tt.ByteBuffer.prototype.writeFloat32=function(rt,it){tt.float32[0]=it,this.writeInt32(rt,tt.int32[0])},tt.ByteBuffer.prototype.writeFloat64=function(rt,it){tt.float64[0]=it,this.writeInt32(rt,tt.int32[tt.isLittleEndian?0:1]),this.writeInt32(rt+4,tt.int32[tt.isLittleEndian?1:0])},tt.ByteBuffer.prototype.getBufferIdentifier=function(){if(this.bytes_.length<this.position_+tt.SIZEOF_INT+tt.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var rt="",it=0;it<tt.FILE_IDENTIFIER_LENGTH;it++)rt+=String.fromCharCode(this.readInt8(this.position_+tt.SIZEOF_INT+it));return rt},tt.ByteBuffer.prototype.__offset=function(rt,it){var st=rt-this.readInt32(rt);return it<this.readInt16(st)?this.readInt16(st+it):0},tt.ByteBuffer.prototype.__union=function(rt,it){return rt.bb_pos=it+this.readInt32(it),rt.bb=this,rt},tt.ByteBuffer.prototype.__string=function(rt,it){rt+=this.readInt32(rt);var st=this.readInt32(rt),at="",ct=0;if(rt+=tt.SIZEOF_INT,it===tt.Encoding.UTF8_BYTES)return this.bytes_.subarray(rt,rt+st);for(;ct<st;){var ut,dt=this.readUint8(rt+ct++);if(dt<192)ut=dt;else{var ot=this.readUint8(rt+ct++);if(dt<224)ut=(31&dt)<<6|63&ot;else{var nt=this.readUint8(rt+ct++);ut=dt<240?(15&dt)<<12|(63&ot)<<6|63&nt:(7&dt)<<18|(63&ot)<<12|(63&nt)<<6|63&this.readUint8(rt+ct++)}}ut<65536?at+=String.fromCharCode(ut):(ut-=65536,at+=String.fromCharCode(55296+(ut>>10),56320+(1023&ut)))}return at},tt.ByteBuffer.prototype.__indirect=function(rt){return rt+this.readInt32(rt)},tt.ByteBuffer.prototype.__vector=function(rt){return rt+this.readInt32(rt)+tt.SIZEOF_INT},tt.ByteBuffer.prototype.__vector_len=function(rt){return this.readInt32(rt+this.readInt32(rt))},tt.ByteBuffer.prototype.__has_identifier=function(rt){if(rt.length!=tt.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+tt.FILE_IDENTIFIER_LENGTH);for(var it=0;it<tt.FILE_IDENTIFIER_LENGTH;it++)if(rt.charCodeAt(it)!=this.readInt8(this.position_+tt.SIZEOF_INT+it))return!1;return!0},tt.ByteBuffer.prototype.createLong=function(rt,it){return tt.Long.create(rt,it)}}},__webpack_module_cache__={};function __webpack_require__(_e){var _=__webpack_module_cache__[_e];if(_!==void 0)return _.exports;var et=__webpack_module_cache__[_e]={exports:{}};return __webpack_modules__[_e].call(et.exports,et,et.exports,__webpack_require__),et.exports}__webpack_require__.n=_e=>{var _=_e&&_e.__esModule?()=>_e.default:()=>_e;return __webpack_require__.d(_,{a:_}),_},__webpack_require__.d=(_e,_)=>{for(var et in _)__webpack_require__.o(_,et)&&!__webpack_require__.o(_e,et)&&Object.defineProperty(_e,et,{enumerable:!0,get:_[et]})},__webpack_require__.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),__webpack_require__.o=(_e,_)=>Object.prototype.hasOwnProperty.call(_e,_),__webpack_require__.r=_e=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(_e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(_e,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__(6018);return __webpack_exports__})())})(ortWeb_min);var ortWeb_minExports=ortWeb_min.exports,assetPath={};Object.defineProperty(assetPath,"__esModule",{value:!0});assetPath.baseAssetPath=void 0;const isWeb=typeof window<"u"&&typeof window.document<"u",currentScript=isWeb?window.document.currentScript:null;let basePath="/";currentScript&&(basePath=currentScript.src.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"));assetPath.baseAssetPath=basePath;var defaultModelFetcher$1={};Object.defineProperty(defaultModelFetcher$1,"__esModule",{value:!0});defaultModelFetcher$1.defaultModelFetcher=void 0;const defaultModelFetcher=_e=>fetch(_e).then(_=>_.arrayBuffer());defaultModelFetcher$1.defaultModelFetcher=defaultModelFetcher;var frameProcessor={},logging={};(function(_e){Object.defineProperty(_e,"__esModule",{value:!0}),_e.log=_e.LOG_PREFIX=void 0,_e.LOG_PREFIX="[VAD]";const _=["error","debug","warn"];function et(rt){return(...it)=>{console[rt](_e.LOG_PREFIX,...it)}}const tt=_.reduce((rt,it)=>(rt[it]=et(it),rt),{});_e.log=tt})(logging);var messages={};Object.defineProperty(messages,"__esModule",{value:!0});messages.Message=void 0;var Message;(function(_e){_e.AudioFrame="AUDIO_FRAME",_e.SpeechStart="SPEECH_START",_e.VADMisfire="VAD_MISFIRE",_e.SpeechEnd="SPEECH_END",_e.SpeechStop="SPEECH_STOP"})(Message||(messages.Message=Message={}));Object.defineProperty(frameProcessor,"__esModule",{value:!0});frameProcessor.FrameProcessor=frameProcessor.validateOptions=frameProcessor.defaultV5FrameProcessorOptions=frameProcessor.defaultLegacyFrameProcessorOptions=void 0;const logging_1$3=logging,messages_1=messages,RECOMMENDED_FRAME_SAMPLES=[512,1024,1536];frameProcessor.defaultLegacyFrameProcessorOptions={positiveSpeechThreshold:.5,negativeSpeechThreshold:.5-.15,preSpeechPadFrames:1,redemptionFrames:8,frameSamples:1536,minSpeechFrames:3,submitUserSpeechOnPause:!1};frameProcessor.defaultV5FrameProcessorOptions={positiveSpeechThreshold:.5,negativeSpeechThreshold:.5-.15,preSpeechPadFrames:3,redemptionFrames:24,frameSamples:512,minSpeechFrames:9,submitUserSpeechOnPause:!1};function validateOptions(_e){RECOMMENDED_FRAME_SAMPLES.includes(_e.frameSamples)||logging_1$3.log.warn("You are using an unusual frame size"),(_e.positiveSpeechThreshold<0||_e.positiveSpeechThreshold>1)&&logging_1$3.log.error("positiveSpeechThreshold should be a number between 0 and 1"),(_e.negativeSpeechThreshold<0||_e.negativeSpeechThreshold>_e.positiveSpeechThreshold)&&logging_1$3.log.error("negativeSpeechThreshold should be between 0 and positiveSpeechThreshold"),_e.preSpeechPadFrames<0&&logging_1$3.log.error("preSpeechPadFrames should be positive"),_e.redemptionFrames<0&&logging_1$3.log.error("redemptionFrames should be positive")}frameProcessor.validateOptions=validateOptions;const concatArrays=_e=>{const _=_e.reduce((tt,rt)=>(tt.push(tt.at(-1)+rt.length),tt),[0]),et=new Float32Array(_.at(-1));return _e.forEach((tt,rt)=>{const it=_[rt];et.set(tt,it)}),et};class FrameProcessor{constructor(_,et,tt){this.modelProcessFunc=_,this.modelResetFunc=et,this.options=tt,this.speaking=!1,this.redemptionCounter=0,this.active=!1,this.reset=()=>{this.speaking=!1,this.audioBuffer=[],this.modelResetFunc(),this.redemptionCounter=0},this.pause=()=>(this.active=!1,this.options.submitUserSpeechOnPause?this.endSegment():(this.reset(),{})),this.resume=()=>{this.active=!0},this.endSegment=()=>{const rt=this.audioBuffer;this.audioBuffer=[];const it=this.speaking;this.reset();const st=rt.reduce((at,ct)=>at+ +ct.isSpeech,0);if(it)if(st>=this.options.minSpeechFrames){const at=concatArrays(rt.map(ct=>ct.frame));return{msg:messages_1.Message.SpeechEnd,audio:at}}else return{msg:messages_1.Message.VADMisfire};return{}},this.process=async rt=>{if(!this.active)return{};const it=await this.modelProcessFunc(rt);if(this.audioBuffer.push({frame:rt,isSpeech:it.isSpeech>=this.options.positiveSpeechThreshold}),it.isSpeech>=this.options.positiveSpeechThreshold&&this.redemptionCounter&&(this.redemptionCounter=0),it.isSpeech>=this.options.positiveSpeechThreshold&&!this.speaking)return this.speaking=!0,{probs:it,msg:messages_1.Message.SpeechStart,frame:rt};if(it.isSpeech<this.options.negativeSpeechThreshold&&this.speaking&&++this.redemptionCounter>=this.options.redemptionFrames){this.redemptionCounter=0,this.speaking=!1;const st=this.audioBuffer;if(this.audioBuffer=[],st.reduce((ct,ut)=>ct+ +ut.isSpeech,0)>=this.options.minSpeechFrames){const ct=concatArrays(st.map(ut=>ut.frame));return{probs:it,msg:messages_1.Message.SpeechEnd,audio:ct,frame:rt}}else return{probs:it,msg:messages_1.Message.VADMisfire,frame:rt}}if(!this.speaking)for(;this.audioBuffer.length>this.options.preSpeechPadFrames;)this.audioBuffer.shift();return{probs:it,frame:rt}},this.audioBuffer=[],this.reset()}}frameProcessor.FrameProcessor=FrameProcessor;var nonRealTimeVad={},models={},common={};Object.defineProperty(common,"__esModule",{value:!0});var legacy={},_a$1;Object.defineProperty(legacy,"__esModule",{value:!0});legacy.SileroLegacy=void 0;const logging_1$2=logging;class SileroLegacy{constructor(_,et,tt,rt,it){this.ortInstance=_,this._session=et,this._h=tt,this._c=rt,this._sr=it,this.reset_state=()=>{const st=Array(128).fill(0);this._h=new this.ortInstance.Tensor("float32",st,[2,1,64]),this._c=new this.ortInstance.Tensor("float32",st,[2,1,64])},this.process=async st=>{var nt;const ct={input:new this.ortInstance.Tensor("float32",st,[1,st.length]),h:this._h,c:this._c,sr:this._sr},ut=await this._session.run(ct);this._h=ut.hn,this._c=ut.cn;const[dt]=(nt=ut.output)==null?void 0:nt.data;return{notSpeech:1-dt,isSpeech:dt}}}}legacy.SileroLegacy=SileroLegacy;_a$1=SileroLegacy;SileroLegacy.new=async(_e,_)=>{logging_1$2.log.debug("initializing vad");const et=await _(),tt=await _e.InferenceSession.create(et),rt=new _e.Tensor("int64",[16000n]),it=Array(2*64).fill(0),st=new _e.Tensor("float32",it,[2,1,64]),at=new _e.Tensor("float32",it,[2,1,64]);return logging_1$2.log.debug("vad is initialized"),new _a$1(_e,tt,st,at,rt)};var v5={},_a;Object.defineProperty(v5,"__esModule",{value:!0});v5.SileroV5=void 0;const logging_1$1=logging;function getNewState(_e){const _=Array(256).fill(0);return new _e.Tensor("float32",_,[2,1,128])}class SileroV5{constructor(_,et,tt,rt){this._session=_,this._state=et,this._sr=tt,this.ortInstance=rt,this.reset_state=()=>{this._state=getNewState(this.ortInstance)},this.process=async it=>{var ot;const at={input:new this.ortInstance.Tensor("float32",it,[1,it.length]),state:this._state,sr:this._sr},ct=await this._session.run(at);this._state=ct.stateN;const[ut]=(ot=ct.output)==null?void 0:ot.data;return{notSpeech:1-ut,isSpeech:ut}}}}v5.SileroV5=SileroV5;_a=SileroV5;SileroV5.new=async(_e,_)=>{logging_1$1.log.debug("Loading VAD...");const et=await _(),tt=await _e.InferenceSession.create(et),rt=new _e.Tensor("int64",[16000n]),it=getNewState(_e);return logging_1$1.log.debug("...finished loading VAD"),new _a(tt,it,rt,_e)};(function(_e){var _=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(it,st,at,ct){ct===void 0&&(ct=at);var ut=Object.getOwnPropertyDescriptor(st,at);(!ut||("get"in ut?!st.__esModule:ut.writable||ut.configurable))&&(ut={enumerable:!0,get:function(){return st[at]}}),Object.defineProperty(it,ct,ut)}:function(it,st,at,ct){ct===void 0&&(ct=at),it[ct]=st[at]}),et=commonjsGlobal&&commonjsGlobal.__exportStar||function(it,st){for(var at in it)at!=="default"&&!Object.prototype.hasOwnProperty.call(st,at)&&_(st,it,at)};Object.defineProperty(_e,"__esModule",{value:!0}),_e.SileroV5=_e.SileroLegacy=void 0,et(common,_e);var tt=legacy;Object.defineProperty(_e,"SileroLegacy",{enumerable:!0,get:function(){return tt.SileroLegacy}});var rt=v5;Object.defineProperty(_e,"SileroV5",{enumerable:!0,get:function(){return rt.SileroV5}})})(models);var resampler={};Object.defineProperty(resampler,"__esModule",{value:!0});resampler.Resampler=void 0;const logging_1=logging;class Resampler{constructor(_){this.options=_,this.process=et=>{const tt=[];for(const rt of et)for(this.inputBuffer.push(rt);this.hasEnoughDataForFrame();){const it=this.generateOutputFrame();tt.push(it)}return tt},this.stream=async function*(et){for(const tt of et)for(this.inputBuffer.push(tt);this.hasEnoughDataForFrame();)yield this.generateOutputFrame()},_.nativeSampleRate<16e3&&logging_1.log.error("nativeSampleRate is too low. Should have 16000 = targetSampleRate <= nativeSampleRate"),this.inputBuffer=[]}hasEnoughDataForFrame(){return this.inputBuffer.length*this.options.targetSampleRate/this.options.nativeSampleRate>=this.options.targetFrameSize}generateOutputFrame(){const _=new Float32Array(this.options.targetFrameSize);let et=0,tt=0;for(;et<this.options.targetFrameSize;){let rt=0,it=0;for(;tt<Math.min(this.inputBuffer.length,(et+1)*this.options.nativeSampleRate/this.options.targetSampleRate);){const st=this.inputBuffer[tt];st!==void 0&&(rt+=st,it++),tt++}_[et]=rt/it,et++}return this.inputBuffer=this.inputBuffer.slice(tt),_}}resampler.Resampler=Resampler;(function(_e){Object.defineProperty(_e,"__esModule",{value:!0}),_e.PlatformAgnosticNonRealTimeVAD=_e.defaultNonRealTimeVADOptions=void 0;const _=frameProcessor,et=messages,tt=models,rt=resampler;_e.defaultNonRealTimeVADOptions={..._.defaultLegacyFrameProcessorOptions,ortConfig:void 0};class it{static async _new(at,ct,ut={}){const dt={..._e.defaultNonRealTimeVADOptions,...ut};dt.ortConfig!==void 0&&dt.ortConfig(ct);const ot=new this(at,ct,dt);return await ot.init(),ot}constructor(at,ct,ut){this.modelFetcher=at,this.ort=ct,this.options=ut,this.init=async()=>{const dt=await tt.SileroLegacy.new(this.ort,this.modelFetcher);this.frameProcessor=new _.FrameProcessor(dt.process,dt.reset_state,{frameSamples:this.options.frameSamples,positiveSpeechThreshold:this.options.positiveSpeechThreshold,negativeSpeechThreshold:this.options.negativeSpeechThreshold,redemptionFrames:this.options.redemptionFrames,preSpeechPadFrames:this.options.preSpeechPadFrames,minSpeechFrames:this.options.minSpeechFrames,submitUserSpeechOnPause:this.options.submitUserSpeechOnPause}),this.frameProcessor.resume()},this.run=async function*(dt,ot){const nt={nativeSampleRate:ot,targetSampleRate:16e3,targetFrameSize:this.options.frameSamples},lt=new rt.Resampler(nt);let ht=0,ft=0,gt=0;for await(const bt of lt.stream(dt)){const{msg:_t,audio:vt}=await this.frameProcessor.process(bt);switch(_t){case et.Message.SpeechStart:ht=gt*this.options.frameSamples/16;break;case et.Message.SpeechEnd:ft=(gt+1)*this.options.frameSamples/16,yield{audio:vt,start:ht,end:ft};break}gt++}const{msg:mt,audio:yt}=this.frameProcessor.endSegment();mt==et.Message.SpeechEnd&&(yield{audio:yt,start:ht,end:gt*this.options.frameSamples/16})},(0,_.validateOptions)(ut)}}_e.PlatformAgnosticNonRealTimeVAD=it})(nonRealTimeVad);var utils$3={};Object.defineProperty(utils$3,"__esModule",{value:!0});utils$3.audioFileToArray=utils$3.encodeWAV=utils$3.arrayBufferToBase64=utils$3.minFramesForTargetMS=void 0;function minFramesForTargetMS(_e,_,et=16e3){return Math.ceil(_e*et/1e3/_)}utils$3.minFramesForTargetMS=minFramesForTargetMS;function arrayBufferToBase64(_e){const _=new Uint8Array(_e),et=_.byteLength,tt=new Array(et);for(var rt=0;rt<et;rt++){const it=_[rt];if(it===void 0)break;tt[rt]=String.fromCharCode(it)}return btoa(tt.join(""))}utils$3.arrayBufferToBase64=arrayBufferToBase64;function encodeWAV(_e,_=3,et=16e3,tt=1,rt=32){var it=rt/8,st=tt*it,at=new ArrayBuffer(44+_e.length*it),ct=new DataView(at);return writeString(ct,0,"RIFF"),ct.setUint32(4,36+_e.length*it,!0),writeString(ct,8,"WAVE"),writeString(ct,12,"fmt "),ct.setUint32(16,16,!0),ct.setUint16(20,_,!0),ct.setUint16(22,tt,!0),ct.setUint32(24,et,!0),ct.setUint32(28,et*st,!0),ct.setUint16(32,st,!0),ct.setUint16(34,rt,!0),writeString(ct,36,"data"),ct.setUint32(40,_e.length*it,!0),_===1?floatTo16BitPCM(ct,44,_e):writeFloat32(ct,44,_e),at}utils$3.encodeWAV=encodeWAV;function writeFloat32(_e,_,et){for(var tt=0;tt<et.length;tt++,_+=4)_e.setFloat32(_,et[tt],!0)}function floatTo16BitPCM(_e,_,et){for(var tt=0;tt<et.length;tt++,_+=2){var rt=Math.max(-1,Math.min(1,et[tt]));_e.setInt16(_,rt<0?rt*32768:rt*32767,!0)}}function writeString(_e,_,et){for(var tt=0;tt<et.length;tt++)_e.setUint8(_+tt,et.charCodeAt(tt))}async function audioFileToArray(_e){const _=new OfflineAudioContext(1,1,44100),et=new FileReader;let tt=null;if(await new Promise(st=>{et.addEventListener("loadend",at=>{const ct=et.result;_.decodeAudioData(ct,ut=>{tt=ut,_.startRendering().then(dt=>{console.log("Rendering completed successfully"),st()}).catch(dt=>{console.error(`Rendering failed: ${dt}`)})},ut=>{console.log(`Error with decoding audio data: ${ut}`)})}),et.readAsArrayBuffer(_e)}),tt===null)throw Error("some shit");let rt=tt,it=new Float32Array(rt.length);for(let st=0;st<rt.length;st++)for(let at=0;at<rt.numberOfChannels;at++)it[st]+=rt.getChannelData(at)[st];return{audio:it,sampleRate:rt.sampleRate}}utils$3.audioFileToArray=audioFileToArray;var realTimeVad={};(function(_e){var _=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(mt,yt,bt,_t){_t===void 0&&(_t=bt);var vt=Object.getOwnPropertyDescriptor(yt,bt);(!vt||("get"in vt?!yt.__esModule:vt.writable||vt.configurable))&&(vt={enumerable:!0,get:function(){return yt[bt]}}),Object.defineProperty(mt,_t,vt)}:function(mt,yt,bt,_t){_t===void 0&&(_t=bt),mt[_t]=yt[bt]}),et=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(mt,yt){Object.defineProperty(mt,"default",{enumerable:!0,value:yt})}:function(mt,yt){mt.default=yt}),tt=commonjsGlobal&&commonjsGlobal.__importStar||function(mt){if(mt&&mt.__esModule)return mt;var yt={};if(mt!=null)for(var bt in mt)bt!=="default"&&Object.prototype.hasOwnProperty.call(mt,bt)&&_(yt,mt,bt);return et(yt,mt),yt};Object.defineProperty(_e,"__esModule",{value:!0}),_e.AudioNodeVAD=_e.MicVAD=_e.getDefaultRealTimeVADOptions=_e.ort=_e.DEFAULT_MODEL=void 0;const rt=tt(ortWeb_minExports),it=defaultModelFetcher$1,st=frameProcessor,at=logging,ct=messages,ut=models,dt=resampler;_e.DEFAULT_MODEL="legacy",_e.ort=rt;const ot="vad.worklet.bundle.min.js",nt="silero_vad_v5.onnx",lt="silero_vad_legacy.onnx",ht=mt=>({...mt==="v5"?st.defaultV5FrameProcessorOptions:st.defaultLegacyFrameProcessorOptions,onFrameProcessed:bt=>{},onVADMisfire:()=>{at.log.debug("VAD misfire")},onSpeechStart:()=>{at.log.debug("Detected speech start")},onSpeechEnd:()=>{at.log.debug("Detected speech end")},baseAssetPath:"https://cdn.jsdelivr.net/npm/@ricky0123/vad-web@0.0.22/dist/",onnxWASMBasePath:"https://cdn.jsdelivr.net/npm/onnxruntime-web@1.14.0/dist/",stream:void 0,ortConfig:void 0,model:_e.DEFAULT_MODEL,workletOptions:{}});_e.getDefaultRealTimeVADOptions=ht;class ft{static async new(yt={}){const bt={...(0,_e.getDefaultRealTimeVADOptions)(yt.model??_e.DEFAULT_MODEL),...yt};(0,st.validateOptions)(bt);let _t;bt.stream===void 0?_t=await navigator.mediaDevices.getUserMedia({audio:{...bt.additionalAudioConstraints,channelCount:1,echoCancellation:!0,autoGainControl:!0,noiseSuppression:!0}}):_t=bt.stream;const vt=new AudioContext,xt=new MediaStreamAudioSourceNode(vt,{mediaStream:_t}),wt=await gt.new(vt,bt);return wt.receive(xt),new ft(bt,vt,_t,wt,xt)}constructor(yt,bt,_t,vt,xt,wt=!1){this.options=yt,this.audioContext=bt,this.stream=_t,this.audioNodeVAD=vt,this.sourceNode=xt,this.listening=wt,this.pause=()=>{this.audioNodeVAD.pause(),this.listening=!1},this.start=()=>{this.audioNodeVAD.start(),this.listening=!0},this.destroy=()=>{this.listening&&this.pause(),this.options.stream===void 0&&this.stream.getTracks().forEach(Tt=>Tt.stop()),this.sourceNode.disconnect(),this.audioNodeVAD.destroy(),this.audioContext.close()}}}_e.MicVAD=ft;class gt{static async new(yt,bt={}){const _t={...(0,_e.getDefaultRealTimeVADOptions)(bt.model??_e.DEFAULT_MODEL),...bt};(0,st.validateOptions)(_t),_e.ort.env.wasm.wasmPaths=_t.onnxWASMBasePath,_t.ortConfig!==void 0&&_t.ortConfig(_e.ort);const vt=_t.model==="v5"?nt:lt,xt=_t.baseAssetPath+vt,wt=_t.model==="v5"?ut.SileroV5.new:ut.SileroLegacy.new;let Tt;try{Tt=await wt(_e.ort,()=>(0,it.defaultModelFetcher)(xt))}catch(Ot){throw console.error(`Encountered an error while loading model file ${xt}`),Ot}const St=new st.FrameProcessor(Tt.process,Tt.reset_state,{frameSamples:_t.frameSamples,positiveSpeechThreshold:_t.positiveSpeechThreshold,negativeSpeechThreshold:_t.negativeSpeechThreshold,redemptionFrames:_t.redemptionFrames,preSpeechPadFrames:_t.preSpeechPadFrames,minSpeechFrames:_t.minSpeechFrames,submitUserSpeechOnPause:_t.submitUserSpeechOnPause}),Et=new gt(yt,_t,St);return await Et.setupAudioNode(),Et}constructor(yt,bt,_t){this.ctx=yt,this.options=bt,this.bufferIndex=0,this.pause=()=>{const vt=this.frameProcessor.pause();this.handleFrameProcessorEvent(vt)},this.start=()=>{this.frameProcessor.resume()},this.receive=vt=>{vt.connect(this.audioNode)},this.processFrame=async vt=>{const xt=await this.frameProcessor.process(vt);this.handleFrameProcessorEvent(xt)},this.handleFrameProcessorEvent=vt=>{switch(vt.probs!==void 0&&this.options.onFrameProcessed(vt.probs,vt.frame),vt.msg){case ct.Message.SpeechStart:this.options.onSpeechStart();break;case ct.Message.VADMisfire:this.options.onVADMisfire();break;case ct.Message.SpeechEnd:this.options.onSpeechEnd(vt.audio);break}},this.destroy=()=>{var vt;this.audioNode instanceof AudioWorkletNode&&this.audioNode.port.postMessage({message:ct.Message.SpeechStop}),this.audioNode.disconnect(),(vt=this.gainNode)==null||vt.disconnect()},this.frameProcessor=_t}async setupAudioNode(){if("audioWorklet"in this.ctx&&typeof AudioWorkletNode=="function")try{const vt=this.options.baseAssetPath+ot;await this.ctx.audioWorklet.addModule(vt);const xt=this.options.workletOptions??{};xt.processorOptions={...xt.processorOptions??{},frameSamples:this.options.frameSamples},this.audioNode=new AudioWorkletNode(this.ctx,"vad-helper-worklet",xt),this.audioNode.port.onmessage=async wt=>{var Tt;switch((Tt=wt.data)==null?void 0:Tt.message){case ct.Message.AudioFrame:let St=wt.data.data;St instanceof ArrayBuffer||(St=new ArrayBuffer(wt.data.data.byteLength),new Uint8Array(St).set(new Uint8Array(wt.data.data)));const Et=new Float32Array(St);await this.processFrame(Et);break}};return}catch(vt){console.log("AudioWorklet setup failed, falling back to ScriptProcessor",vt)}this.resampler=new dt.Resampler({nativeSampleRate:this.ctx.sampleRate,targetSampleRate:16e3,targetFrameSize:this.options.frameSamples??480});const bt=4096;this.audioNode=this.ctx.createScriptProcessor(bt,1,1),this.gainNode=this.ctx.createGain(),this.gainNode.gain.value=0;let _t=!1;this.audioNode.onaudioprocess=async vt=>{if(!_t){_t=!0;try{const xt=vt.inputBuffer.getChannelData(0);if(vt.outputBuffer.getChannelData(0).fill(0),this.resampler){const Tt=this.resampler.process(xt);for(const St of Tt)await this.processFrame(St)}}catch(xt){console.error("Error processing audio:",xt)}finally{_t=!1}}},this.audioNode.connect(this.gainNode),this.gainNode.connect(this.ctx.destination)}}_e.AudioNodeVAD=gt})(realTimeVad);(function(_e){var _=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(lt,ht,ft,gt){gt===void 0&&(gt=ft);var mt=Object.getOwnPropertyDescriptor(ht,ft);(!mt||("get"in mt?!ht.__esModule:mt.writable||mt.configurable))&&(mt={enumerable:!0,get:function(){return ht[ft]}}),Object.defineProperty(lt,gt,mt)}:function(lt,ht,ft,gt){gt===void 0&&(gt=ft),lt[gt]=ht[ft]}),et=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(lt,ht){Object.defineProperty(lt,"default",{enumerable:!0,value:ht})}:function(lt,ht){lt.default=ht}),tt=commonjsGlobal&&commonjsGlobal.__importStar||function(lt){if(lt&&lt.__esModule)return lt;var ht={};if(lt!=null)for(var ft in lt)ft!=="default"&&Object.prototype.hasOwnProperty.call(lt,ft)&&_(ht,lt,ft);return et(ht,lt),ht};Object.defineProperty(_e,"__esModule",{value:!0}),_e.NonRealTimeVAD=_e.Message=_e.FrameProcessor=_e.getDefaultRealTimeVADOptions=_e.MicVAD=_e.DEFAULT_MODEL=_e.AudioNodeVAD=_e.utils=_e.defaultNonRealTimeVADOptions=void 0;const rt=tt(ortWeb_minExports),it=assetPath,st=defaultModelFetcher$1,at=frameProcessor;Object.defineProperty(_e,"FrameProcessor",{enumerable:!0,get:function(){return at.FrameProcessor}});const ct=messages;Object.defineProperty(_e,"Message",{enumerable:!0,get:function(){return ct.Message}});const ut=nonRealTimeVad,dt=utils$3;_e.defaultNonRealTimeVADOptions={modelURL:it.baseAssetPath+"silero_vad_legacy.onnx",modelFetcher:st.defaultModelFetcher};class ot extends ut.PlatformAgnosticNonRealTimeVAD{static async new(ht={}){const{modelURL:ft,modelFetcher:gt}={..._e.defaultNonRealTimeVADOptions,...ht};return await this._new(()=>gt(ft),rt,ht)}}_e.NonRealTimeVAD=ot,_e.utils={audioFileToArray:dt.audioFileToArray,minFramesForTargetMS:dt.minFramesForTargetMS,arrayBufferToBase64:dt.arrayBufferToBase64,encodeWAV:dt.encodeWAV};var nt=realTimeVad;Object.defineProperty(_e,"AudioNodeVAD",{enumerable:!0,get:function(){return nt.AudioNodeVAD}}),Object.defineProperty(_e,"DEFAULT_MODEL",{enumerable:!0,get:function(){return nt.DEFAULT_MODEL}}),Object.defineProperty(_e,"MicVAD",{enumerable:!0,get:function(){return nt.MicVAD}}),Object.defineProperty(_e,"getDefaultRealTimeVADOptions",{enumerable:!0,get:function(){return nt.getDefaultRealTimeVADOptions}})})(dist);class TaskQueue{constructor(_=3e3){en(this,"queue",[]);en(this,"running",!1);en(this,"taskInterval");en(this,"pendingComplete",!1);en(this,"activeTasks",new Set);this.taskInterval=_}addTask(_){this.queue.push(_),this.runNextTask()}clearQueue(){this.queue=[],this.activeTasks.clear(),this.running=!1}async runNextTask(){if(this.running||this.queue.length===0){this.queue.length===0&&this.activeTasks.size===0&&this.pendingComplete&&(this.pendingComplete=!1,await new Promise(et=>setTimeout(et,this.taskInterval)));return}this.running=!0;const _=this.queue.shift();if(_){const et=_();this.activeTasks.add(et);try{await et,await new Promise(tt=>setTimeout(tt,this.taskInterval))}catch(tt){console.error("Task Queue Error",tt)}finally{this.activeTasks.delete(et),this.running=!1,this.runNextTask()}}}hasTask(){return this.queue.length>0||this.activeTasks.size>0||this.running}waitForCompletion(){return this.pendingComplete=!0,new Promise(_=>{const et=()=>{this.hasTask()?setTimeout(et,100):_()};et()})}}const audioTaskQueue=new TaskQueue(20),ScreenCaptureContext=reactExports.createContext(void 0);function ScreenCaptureProvider({children:_e}){const[_,et]=reactExports.useState(null),[tt,rt]=reactExports.useState(!1),[it,st]=reactExports.useState(""),at=async()=>{try{let ut;if(window.electron){const ot={video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:await window.electron.ipcRenderer.invoke("get-screen-capture"),minWidth:1280,maxWidth:1280,minHeight:720,maxHeight:720}},audio:!1};ut=await navigator.mediaDevices.getUserMedia(ot)}else{const dt={video:!0,audio:!1};ut=await navigator.mediaDevices.getDisplayMedia(dt)}et(ut),rt(!0),st("")}catch(ut){st("Failed to start screen capture"),console.error(ut)}},ct=()=>{_&&(_.getTracks().forEach(ut=>ut.stop()),et(null),rt(!1))};return jsxRuntimeExports.jsx(ScreenCaptureContext.Provider,{value:{stream:_,isStreaming:tt,error:it,startCapture:at,stopCapture:ct},children:_e})}const useScreenCaptureContext=()=>{const _e=reactExports.useContext(ScreenCaptureContext);if(_e===void 0)throw new Error("useScreenCaptureContext must be used within a ScreenCaptureProvider");return _e};function useMediaCapture(){const{stream:_e}=useCamera(),{stream:_}=useScreenCaptureContext(),et=reactExports.useCallback(async(rt,it)=>{if(!rt)return console.warn(`No ${it} stream available`),null;const st=rt.getVideoTracks()[0];if(!st)return console.warn(`No video track in ${it} stream`),null;const at=new ImageCapture(st);try{const ct=await at.grabFrame(),ut=document.createElement("canvas");ut.width=ct.width,ut.height=ct.height;const dt=ut.getContext("2d");return dt?(dt.drawImage(ct,0,0),ut.toDataURL("image/jpeg",.8)):(console.error("Failed to get canvas context"),null)}catch(ct){return console.error(`Error capturing ${it} frame:`,ct),null}},[]);return{captureAllMedia:reactExports.useCallback(async()=>{const rt=[];if(_e){const it=await et(_e,"camera");it&&rt.push({source:"camera",data:it,mime_type:"image/jpeg"})}if(_){const it=await et(_,"screen");it&&rt.push({source:"screen",data:it,mime_type:"image/jpeg"})}return console.log("images: ",rt),rt},[_e,_,et])}}function useSendAudio(){const{sendMessage:_e}=useWebSocket(),{captureAllMedia:_}=useMediaCapture();return{sendAudioPartition:reactExports.useCallback(async tt=>{for(let st=0;st<tt.length;st+=4096){const at=Math.min(st+4096,tt.length),ct=tt.slice(st,at);_e({type:"mic-audio-data",audio:Array.from(ct)})}const it=await _();_e({type:"mic-audio-end",images:it})},[_e,_])}}const DEFAULT_SUBTITLE={text:"Hi, I'm some random AI VTuber. Who the hell are ya? Ahh, you must be amazed by my awesomeness, right? right?"},SubtitleContext=reactExports.createContext(null),SubtitleProvider=reactExports.memo(({children:_e})=>{const[_,et]=reactExports.useState(DEFAULT_SUBTITLE.text),[tt,rt]=reactExports.useState(!0),it=reactExports.useMemo(()=>({subtitleText:_,setSubtitleText:et,showSubtitle:tt,setShowSubtitle:rt}),[_,tt]);return jsxRuntimeExports.jsx(SubtitleContext.Provider,{value:it,children:_e})});function useSubtitle(){const _e=reactExports.useContext(SubtitleContext);if(!_e)throw new Error("useSubtitle must be used within a SubtitleProvider");return _e}var AiStateEnum=(_e=>(_e.IDLE="idle",_e.THINKING_SPEAKING="thinking-speaking",_e.INTERRUPTED="interrupted",_e.LOADING="loading",_e.LISTENING="listening",_e.WAITING="waiting",_e))(AiStateEnum||{});const initialState="loading",AiStateContext=reactExports.createContext(null);function AiStateProvider({children:_e}){const[_,et]=reactExports.useState(initialState),[tt,rt]=reactExports.useState(!1),it=reactExports.useRef(null),st=reactExports.useCallback(dt=>{const ot=typeof dt=="function"?dt(_):dt;ot==="waiting"?_!=="thinking-speaking"&&(et(ot),it.current&&clearTimeout(it.current),it.current=setTimeout(()=>{et("idle"),it.current=null},2e3)):(et(ot),it.current&&(clearTimeout(it.current),it.current=null))},[_]),at=reactExports.useMemo(()=>({isIdle:_==="idle",isThinkingSpeaking:_==="thinking-speaking",isInterrupted:_==="interrupted",isLoading:_==="loading",isListening:_==="listening",isWaiting:_==="waiting"}),[_]),ct=reactExports.useCallback(()=>{st("idle")},[st]);reactExports.useEffect(()=>()=>{it.current&&clearTimeout(it.current)},[]);const ut=reactExports.useMemo(()=>({aiState:_,setAiState:st,backendSynthComplete:tt,setBackendSynthComplete:rt,...at,resetState:ct}),[_,st,tt,at,ct]);return jsxRuntimeExports.jsx(AiStateContext.Provider,{value:ut,children:_e})}function useAiState(){const _e=reactExports.useContext(AiStateContext);if(!_e)throw new Error("useAiState must be used within a AiStateProvider");return _e}const DEFAULT_VAD_SETTINGS={positiveSpeechThreshold:50,negativeSpeechThreshold:35,redemptionFrames:35},DEFAULT_VAD_STATE={micOn:!1,autoStopMic:!1,autoStartMicOn:!1,autoStartMicOnConvEnd:!1},VADContext=reactExports.createContext(null);function VADProvider({children:_e}){const _=reactExports.useRef(null),et=reactExports.useRef(0),[tt,rt]=useLocalStorage("micOn",DEFAULT_VAD_STATE.micOn),it=reactExports.useRef(!0),[st,at]=useLocalStorage("autoStopMic",DEFAULT_VAD_STATE.autoStopMic),[ct,ut]=useLocalStorage("vadSettings",DEFAULT_VAD_SETTINGS),[dt,ot]=useLocalStorage("autoStartMicOn",DEFAULT_VAD_STATE.autoStartMicOn),nt=reactExports.useRef(!1),[lt,ht]=useLocalStorage("autoStartMicOnConvEnd",DEFAULT_VAD_STATE.autoStartMicOnConvEnd),ft=reactExports.useRef(!1),[,gt]=reactExports.useReducer(er=>er+1,0),{interrupt:mt}=useInterrupt(),{sendAudioPartition:yt}=useSendAudio(),{setSubtitleText:bt}=reactExports.useContext(SubtitleContext),{aiState:_t,setAiState:vt}=reactExports.useContext(AiStateContext),xt=reactExports.useRef(mt),wt=reactExports.useRef(yt),Tt=reactExports.useRef(_t),St=reactExports.useRef(bt),Et=reactExports.useRef(vt),Ot=reactExports.useRef(!1);reactExports.useEffect(()=>{Tt.current=_t},[_t]),reactExports.useEffect(()=>{xt.current=mt},[mt]),reactExports.useEffect(()=>{wt.current=yt},[yt]),reactExports.useEffect(()=>{St.current=bt},[bt]),reactExports.useEffect(()=>{Et.current=vt},[vt]),reactExports.useEffect(()=>{it.current=st},[]),reactExports.useEffect(()=>{nt.current=dt},[]),reactExports.useEffect(()=>{ft.current=lt},[]);const Rt=reactExports.useCallback(er=>{et.current=er,gt()},[]),Pt=reactExports.useCallback(()=>{console.log("Speech started"),Tt.current==="thinking-speaking"&&xt.current(),Ot.current=!0,Et.current("listening")},[]),Mt=reactExports.useCallback(er=>{er.isSpeech>et.current&&Rt(er.isSpeech)},[]),$t=reactExports.useCallback(er=>{Ot.current&&(console.log("Speech ended"),audioTaskQueue.clearQueue(),it.current?Ut():console.log("Auto stop mic is on, keeping mic active"),Rt(0),wt.current(er),Ot.current=!1)},[]),kt=reactExports.useCallback(()=>{Ot.current&&(console.log("VAD misfire detected"),Rt(0),Ot.current=!1,(Tt.current==="interrupted"||Tt.current==="listening")&&Et.current("idle"),St.current("The LLM can't hear you."))},[]),Lt=reactExports.useCallback(er=>{ut(er),_.current&&(Ut(),setTimeout(()=>{zt()},100))},[]),Nt=async()=>{const er=await dist.MicVAD.new({model:"v5",preSpeechPadFrames:20,positiveSpeechThreshold:ct.positiveSpeechThreshold/100,negativeSpeechThreshold:ct.negativeSpeechThreshold/100,redemptionFrames:ct.redemptionFrames,baseAssetPath:"/libs/",onnxWASMBasePath:"/libs/",onSpeechStart:Pt,onFrameProcessed:Mt,onSpeechEnd:$t,onVADMisfire:kt});_.current=er,er.start()},zt=reactExports.useCallback(async()=>{try{_.current?(console.log("Starting VAD"),_.current.start()):(console.log("Initializing VAD"),await Nt()),rt(!0)}catch(er){console.error("Failed to start VAD:",er)}},[]),Ut=reactExports.useCallback(()=>{console.log("Stopping VAD"),_.current?(_.current.pause(),_.current.destroy(),_.current=null,console.log("VAD stopped and destroyed successfully"),Rt(0)):console.log("VAD instance not found"),rt(!1),Ot.current=!1},[]),Vt=reactExports.useCallback(er=>{it.current=er,at(er),gt()},[]),Ht=reactExports.useCallback(er=>{nt.current=er,ot(er),gt()},[]),sr=reactExports.useCallback(er=>{ft.current=er,ht(er),gt()},[]),ir=reactExports.useMemo(()=>({autoStopMic:it.current,micOn:tt,setMicOn:rt,setAutoStopMic:Vt,startMic:zt,stopMic:Ut,previousTriggeredProbability:et.current,setPreviousTriggeredProbability:Rt,settings:ct,updateSettings:Lt,autoStartMicOn:nt.current,setAutoStartMicOn:Ht,autoStartMicOnConvEnd:ft.current,setAutoStartMicOnConvEnd:sr}),[tt,zt,Ut,ct,Lt]);return jsxRuntimeExports.jsx(VADContext.Provider,{value:ir,children:_e})}function useVAD(){const _e=reactExports.useContext(VADContext);if(!_e)throw new Error("useVAD must be used within a VADProvider");return _e}function useMicToggle(){const{startMic:_e,stopMic:_,micOn:et}=useVAD(),{aiState:tt,setAiState:rt}=useAiState();return{handleMicToggle:async()=>{et?(_(),tt==="listening"&&rt("idle")):await _e()},micOn:et}}function useSwitchCharacter(){const{sendMessage:_e}=useWebSocket(),{confName:_,getFilenameByName:et}=useConfig(),{interrupt:tt}=useInterrupt(),{stopMic:rt}=useVAD(),{setSubtitleText:it}=useSubtitle(),{setAiState:st}=useAiState(),{setModelInfo:at}=useLive2DConfig();return{switchCharacter:reactExports.useCallback(ut=>{if(et(_)===ut){console.log("Skipping character switch - same configuration file");return}it("New Character Loading..."),tt(),rt(),st("loading"),at(void 0),_e({type:"switch-config",file:ut}),console.log("Switch Character fileName: ",ut)},[_,et,_e,tt,rt,it,st])}}const createStoreImpl=_e=>{let _;const et=new Set,tt=(ut,dt)=>{const ot=typeof ut=="function"?ut(_):ut;if(!Object.is(ot,_)){const nt=_;_=dt??(typeof ot!="object"||ot===null)?ot:Object.assign({},_,ot),et.forEach(lt=>lt(_,nt))}},rt=()=>_,at={setState:tt,getState:rt,getInitialState:()=>ct,subscribe:ut=>(et.add(ut),()=>et.delete(ut))},ct=_=_e(tt,rt,at);return at},createStore=_e=>createStoreImpl(_e),identity=_e=>_e;function useStore(_e,_=identity){const et=React.useSyncExternalStore(_e.subscribe,()=>_(_e.getState()),()=>_(_e.getInitialState()));return React.useDebugValue(et),et}const createImpl=_e=>{const _=createStore(_e),et=tt=>useStore(_,tt);return Object.assign(et,_),et},create=_e=>createImpl(_e),useForceIgnoreMouseStore=create(_e=>({forceIgnoreMouse:!1,setForceIgnoreMouse:_=>_e({forceIgnoreMouse:_})}));function useForceIgnoreMouse(){const{forceIgnoreMouse:_e,setForceIgnoreMouse:_}=useForceIgnoreMouseStore();return{forceIgnoreMouse:_e,setForceIgnoreMouse:_}}function useIpcHandlers({isPet:_e}){const{handleMicToggle:_}=useMicToggle(),{interrupt:et}=useInterrupt(),{modelInfo:tt,setModelInfo:rt}=useLive2DConfig(),{switchCharacter:it}=useSwitchCharacter(),{setForceIgnoreMouse:st}=useForceIgnoreMouse(),at=reactExports.useCallback(()=>{_()},[_]),ct=reactExports.useCallback(()=>{et()},[et]),ut=reactExports.useCallback(()=>{tt&&rt({...tt,scrollToResize:!tt.scrollToResize})},[tt,rt]),dt=reactExports.useCallback((lt,ht)=>{it(ht)},[it]),ot=reactExports.useCallback((lt,ht)=>{console.log("Force ignore mouse changed:",ht),st(ht)},[st]),nt=reactExports.useCallback(()=>{window.api.toggleForceIgnoreMouse()},[]);reactExports.useEffect(()=>{var lt;if((lt=window.electron)!=null&&lt.ipcRenderer&&_e)return window.electron.ipcRenderer.removeAllListeners("mic-toggle"),window.electron.ipcRenderer.removeAllListeners("interrupt"),window.electron.ipcRenderer.removeAllListeners("toggle-scroll-to-resize"),window.electron.ipcRenderer.removeAllListeners("switch-character"),window.electron.ipcRenderer.removeAllListeners("toggle-force-ignore-mouse"),window.electron.ipcRenderer.removeAllListeners("force-ignore-mouse-changed"),window.electron.ipcRenderer.on("mic-toggle",at),window.electron.ipcRenderer.on("interrupt",ct),window.electron.ipcRenderer.on("toggle-scroll-to-resize",ut),window.electron.ipcRenderer.on("switch-character",dt),window.electron.ipcRenderer.on("toggle-force-ignore-mouse",nt),window.electron.ipcRenderer.on("force-ignore-mouse-changed",ot),()=>{var ht,ft,gt,mt,yt,bt;(ht=window.electron)==null||ht.ipcRenderer.removeAllListeners("mic-toggle"),(ft=window.electron)==null||ft.ipcRenderer.removeAllListeners("interrupt"),(gt=window.electron)==null||gt.ipcRenderer.removeAllListeners("toggle-scroll-to-resize"),(mt=window.electron)==null||mt.ipcRenderer.removeAllListeners("switch-character"),(yt=window.electron)==null||yt.ipcRenderer.removeAllListeners("toggle-force-ignore-mouse"),(bt=window.electron)==null||bt.ipcRenderer.removeAllListeners("force-ignore-mouse-changed")}},[at,ct,ut,dt,nt,ot,_e])}var ENV=(_e=>(_e[_e.WEBGL_LEGACY=0]="WEBGL_LEGACY",_e[_e.WEBGL=1]="WEBGL",_e[_e.WEBGL2=2]="WEBGL2",_e))(ENV||{}),RENDERER_TYPE=(_e=>(_e[_e.UNKNOWN=0]="UNKNOWN",_e[_e.WEBGL=1]="WEBGL",_e[_e.CANVAS=2]="CANVAS",_e))(RENDERER_TYPE||{}),BUFFER_BITS=(_e=>(_e[_e.COLOR=16384]="COLOR",_e[_e.DEPTH=256]="DEPTH",_e[_e.STENCIL=1024]="STENCIL",_e))(BUFFER_BITS||{}),BLEND_MODES=(_e=>(_e[_e.NORMAL=0]="NORMAL",_e[_e.ADD=1]="ADD",_e[_e.MULTIPLY=2]="MULTIPLY",_e[_e.SCREEN=3]="SCREEN",_e[_e.OVERLAY=4]="OVERLAY",_e[_e.DARKEN=5]="DARKEN",_e[_e.LIGHTEN=6]="LIGHTEN",_e[_e.COLOR_DODGE=7]="COLOR_DODGE",_e[_e.COLOR_BURN=8]="COLOR_BURN",_e[_e.HARD_LIGHT=9]="HARD_LIGHT",_e[_e.SOFT_LIGHT=10]="SOFT_LIGHT",_e[_e.DIFFERENCE=11]="DIFFERENCE",_e[_e.EXCLUSION=12]="EXCLUSION",_e[_e.HUE=13]="HUE",_e[_e.SATURATION=14]="SATURATION",_e[_e.COLOR=15]="COLOR",_e[_e.LUMINOSITY=16]="LUMINOSITY",_e[_e.NORMAL_NPM=17]="NORMAL_NPM",_e[_e.ADD_NPM=18]="ADD_NPM",_e[_e.SCREEN_NPM=19]="SCREEN_NPM",_e[_e.NONE=20]="NONE",_e[_e.SRC_OVER=0]="SRC_OVER",_e[_e.SRC_IN=21]="SRC_IN",_e[_e.SRC_OUT=22]="SRC_OUT",_e[_e.SRC_ATOP=23]="SRC_ATOP",_e[_e.DST_OVER=24]="DST_OVER",_e[_e.DST_IN=25]="DST_IN",_e[_e.DST_OUT=26]="DST_OUT",_e[_e.DST_ATOP=27]="DST_ATOP",_e[_e.ERASE=26]="ERASE",_e[_e.SUBTRACT=28]="SUBTRACT",_e[_e.XOR=29]="XOR",_e))(BLEND_MODES||{}),DRAW_MODES=(_e=>(_e[_e.POINTS=0]="POINTS",_e[_e.LINES=1]="LINES",_e[_e.LINE_LOOP=2]="LINE_LOOP",_e[_e.LINE_STRIP=3]="LINE_STRIP",_e[_e.TRIANGLES=4]="TRIANGLES",_e[_e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",_e[_e.TRIANGLE_FAN=6]="TRIANGLE_FAN",_e))(DRAW_MODES||{}),FORMATS=(_e=>(_e[_e.RGBA=6408]="RGBA",_e[_e.RGB=6407]="RGB",_e[_e.RG=33319]="RG",_e[_e.RED=6403]="RED",_e[_e.RGBA_INTEGER=36249]="RGBA_INTEGER",_e[_e.RGB_INTEGER=36248]="RGB_INTEGER",_e[_e.RG_INTEGER=33320]="RG_INTEGER",_e[_e.RED_INTEGER=36244]="RED_INTEGER",_e[_e.ALPHA=6406]="ALPHA",_e[_e.LUMINANCE=6409]="LUMINANCE",_e[_e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",_e[_e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",_e[_e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",_e))(FORMATS||{}),TARGETS=(_e=>(_e[_e.TEXTURE_2D=3553]="TEXTURE_2D",_e[_e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",_e[_e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",_e[_e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",_e[_e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",_e[_e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",_e[_e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",_e[_e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",_e[_e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",_e))(TARGETS||{}),TYPES=(_e=>(_e[_e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",_e[_e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",_e[_e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",_e[_e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",_e[_e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",_e[_e.UNSIGNED_INT=5125]="UNSIGNED_INT",_e[_e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",_e[_e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",_e[_e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",_e[_e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",_e[_e.BYTE=5120]="BYTE",_e[_e.SHORT=5122]="SHORT",_e[_e.INT=5124]="INT",_e[_e.FLOAT=5126]="FLOAT",_e[_e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",_e[_e.HALF_FLOAT=36193]="HALF_FLOAT",_e))(TYPES||{}),SAMPLER_TYPES=(_e=>(_e[_e.FLOAT=0]="FLOAT",_e[_e.INT=1]="INT",_e[_e.UINT=2]="UINT",_e))(SAMPLER_TYPES||{}),SCALE_MODES=(_e=>(_e[_e.NEAREST=0]="NEAREST",_e[_e.LINEAR=1]="LINEAR",_e))(SCALE_MODES||{}),WRAP_MODES=(_e=>(_e[_e.CLAMP=33071]="CLAMP",_e[_e.REPEAT=10497]="REPEAT",_e[_e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",_e))(WRAP_MODES||{}),MIPMAP_MODES=(_e=>(_e[_e.OFF=0]="OFF",_e[_e.POW2=1]="POW2",_e[_e.ON=2]="ON",_e[_e.ON_MANUAL=3]="ON_MANUAL",_e))(MIPMAP_MODES||{}),ALPHA_MODES=(_e=>(_e[_e.NPM=0]="NPM",_e[_e.UNPACK=1]="UNPACK",_e[_e.PMA=2]="PMA",_e[_e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",_e[_e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",_e[_e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",_e))(ALPHA_MODES||{}),CLEAR_MODES=(_e=>(_e[_e.NO=0]="NO",_e[_e.YES=1]="YES",_e[_e.AUTO=2]="AUTO",_e[_e.BLEND=0]="BLEND",_e[_e.CLEAR=1]="CLEAR",_e[_e.BLIT=2]="BLIT",_e))(CLEAR_MODES||{}),GC_MODES=(_e=>(_e[_e.AUTO=0]="AUTO",_e[_e.MANUAL=1]="MANUAL",_e))(GC_MODES||{}),PRECISION=(_e=>(_e.LOW="lowp",_e.MEDIUM="mediump",_e.HIGH="highp",_e))(PRECISION||{}),MASK_TYPES=(_e=>(_e[_e.NONE=0]="NONE",_e[_e.SCISSOR=1]="SCISSOR",_e[_e.STENCIL=2]="STENCIL",_e[_e.SPRITE=3]="SPRITE",_e[_e.COLOR=4]="COLOR",_e))(MASK_TYPES||{}),MSAA_QUALITY=(_e=>(_e[_e.NONE=0]="NONE",_e[_e.LOW=2]="LOW",_e[_e.MEDIUM=4]="MEDIUM",_e[_e.HIGH=8]="HIGH",_e))(MSAA_QUALITY||{}),BUFFER_TYPE=(_e=>(_e[_e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",_e[_e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",_e[_e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",_e))(BUFFER_TYPE||{});const BrowserAdapter={createCanvas:(_e,_)=>{const et=document.createElement("canvas");return et.width=_e,et.height=_,et},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(_e,_)=>fetch(_e,_),parseXML:_e=>new DOMParser().parseFromString(_e,"text/xml")},settings={ADAPTER:BrowserAdapter,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var appleIphone=/iPhone/i,appleIpod=/iPod/i,appleTablet=/iPad/i,appleUniversal=/\biOS-universal(?:.+)Mac\b/i,androidPhone=/\bAndroid(?:.+)Mobile\b/i,androidTablet=/Android/i,amazonPhone=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,amazonTablet=/Silk/i,windowsPhone=/Windows Phone/i,windowsTablet=/\bWindows(?:.+)ARM\b/i,otherBlackBerry=/BlackBerry/i,otherBlackBerry10=/BB10/i,otherOpera=/Opera Mini/i,otherChrome=/\b(CriOS|Chrome)(?:.+)Mobile/i,otherFirefox=/Mobile(?:.+)Firefox\b/i,isAppleTabletOnIos13=function(_e){return typeof _e<"u"&&_e.platform==="MacIntel"&&typeof _e.maxTouchPoints=="number"&&_e.maxTouchPoints>1&&typeof MSStream>"u"};function createMatch(_e){return function(_){return _.test(_e)}}function isMobile$1(_e){var _={userAgent:"",platform:"",maxTouchPoints:0};!_e&&typeof navigator<"u"?_={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof _e=="string"?_.userAgent=_e:_e&&_e.userAgent&&(_={userAgent:_e.userAgent,platform:_e.platform,maxTouchPoints:_e.maxTouchPoints||0});var et=_.userAgent,tt=et.split("[FBAN");typeof tt[1]<"u"&&(et=tt[0]),tt=et.split("Twitter"),typeof tt[1]<"u"&&(et=tt[0]);var rt=createMatch(et),it={apple:{phone:rt(appleIphone)&&!rt(windowsPhone),ipod:rt(appleIpod),tablet:!rt(appleIphone)&&(rt(appleTablet)||isAppleTabletOnIos13(_))&&!rt(windowsPhone),universal:rt(appleUniversal),device:(rt(appleIphone)||rt(appleIpod)||rt(appleTablet)||rt(appleUniversal)||isAppleTabletOnIos13(_))&&!rt(windowsPhone)},amazon:{phone:rt(amazonPhone),tablet:!rt(amazonPhone)&&rt(amazonTablet),device:rt(amazonPhone)||rt(amazonTablet)},android:{phone:!rt(windowsPhone)&&rt(amazonPhone)||!rt(windowsPhone)&&rt(androidPhone),tablet:!rt(windowsPhone)&&!rt(amazonPhone)&&!rt(androidPhone)&&(rt(amazonTablet)||rt(androidTablet)),device:!rt(windowsPhone)&&(rt(amazonPhone)||rt(amazonTablet)||rt(androidPhone)||rt(androidTablet))||rt(/\bokhttp\b/i)},windows:{phone:rt(windowsPhone),tablet:rt(windowsTablet),device:rt(windowsPhone)||rt(windowsTablet)},other:{blackberry:rt(otherBlackBerry),blackberry10:rt(otherBlackBerry10),opera:rt(otherOpera),firefox:rt(otherFirefox),chrome:rt(otherChrome),device:rt(otherBlackBerry)||rt(otherBlackBerry10)||rt(otherOpera)||rt(otherFirefox)||rt(otherChrome)},any:!1,phone:!1,tablet:!1};return it.any=it.apple.device||it.android.device||it.windows.device||it.other.device,it.phone=it.apple.phone||it.android.phone||it.windows.phone,it.tablet=it.apple.tablet||it.android.tablet||it.windows.tablet,it}const isMobileCall=isMobile$1.default??isMobile$1,isMobile=isMobileCall(globalThis.navigator);settings.RETINA_PREFIX=/@([0-9\.]+)x/;settings.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var eventemitter3={exports:{}};(function(_e){var _=Object.prototype.hasOwnProperty,et="~";function tt(){}Object.create&&(tt.prototype=Object.create(null),new tt().__proto__||(et=!1));function rt(ct,ut,dt){this.fn=ct,this.context=ut,this.once=dt||!1}function it(ct,ut,dt,ot,nt){if(typeof dt!="function")throw new TypeError("The listener must be a function");var lt=new rt(dt,ot||ct,nt),ht=et?et+ut:ut;return ct._events[ht]?ct._events[ht].fn?ct._events[ht]=[ct._events[ht],lt]:ct._events[ht].push(lt):(ct._events[ht]=lt,ct._eventsCount++),ct}function st(ct,ut){--ct._eventsCount===0?ct._events=new tt:delete ct._events[ut]}function at(){this._events=new tt,this._eventsCount=0}at.prototype.eventNames=function(){var ut=[],dt,ot;if(this._eventsCount===0)return ut;for(ot in dt=this._events)_.call(dt,ot)&&ut.push(et?ot.slice(1):ot);return Object.getOwnPropertySymbols?ut.concat(Object.getOwnPropertySymbols(dt)):ut},at.prototype.listeners=function(ut){var dt=et?et+ut:ut,ot=this._events[dt];if(!ot)return[];if(ot.fn)return[ot.fn];for(var nt=0,lt=ot.length,ht=new Array(lt);nt<lt;nt++)ht[nt]=ot[nt].fn;return ht},at.prototype.listenerCount=function(ut){var dt=et?et+ut:ut,ot=this._events[dt];return ot?ot.fn?1:ot.length:0},at.prototype.emit=function(ut,dt,ot,nt,lt,ht){var ft=et?et+ut:ut;if(!this._events[ft])return!1;var gt=this._events[ft],mt=arguments.length,yt,bt;if(gt.fn){switch(gt.once&&this.removeListener(ut,gt.fn,void 0,!0),mt){case 1:return gt.fn.call(gt.context),!0;case 2:return gt.fn.call(gt.context,dt),!0;case 3:return gt.fn.call(gt.context,dt,ot),!0;case 4:return gt.fn.call(gt.context,dt,ot,nt),!0;case 5:return gt.fn.call(gt.context,dt,ot,nt,lt),!0;case 6:return gt.fn.call(gt.context,dt,ot,nt,lt,ht),!0}for(bt=1,yt=new Array(mt-1);bt<mt;bt++)yt[bt-1]=arguments[bt];gt.fn.apply(gt.context,yt)}else{var _t=gt.length,vt;for(bt=0;bt<_t;bt++)switch(gt[bt].once&&this.removeListener(ut,gt[bt].fn,void 0,!0),mt){case 1:gt[bt].fn.call(gt[bt].context);break;case 2:gt[bt].fn.call(gt[bt].context,dt);break;case 3:gt[bt].fn.call(gt[bt].context,dt,ot);break;case 4:gt[bt].fn.call(gt[bt].context,dt,ot,nt);break;default:if(!yt)for(vt=1,yt=new Array(mt-1);vt<mt;vt++)yt[vt-1]=arguments[vt];gt[bt].fn.apply(gt[bt].context,yt)}}return!0},at.prototype.on=function(ut,dt,ot){return it(this,ut,dt,ot,!1)},at.prototype.once=function(ut,dt,ot){return it(this,ut,dt,ot,!0)},at.prototype.removeListener=function(ut,dt,ot,nt){var lt=et?et+ut:ut;if(!this._events[lt])return this;if(!dt)return st(this,lt),this;var ht=this._events[lt];if(ht.fn)ht.fn===dt&&(!nt||ht.once)&&(!ot||ht.context===ot)&&st(this,lt);else{for(var ft=0,gt=[],mt=ht.length;ft<mt;ft++)(ht[ft].fn!==dt||nt&&!ht[ft].once||ot&&ht[ft].context!==ot)&&gt.push(ht[ft]);gt.length?this._events[lt]=gt.length===1?gt[0]:gt:st(this,lt)}return this},at.prototype.removeAllListeners=function(ut){var dt;return ut?(dt=et?et+ut:ut,this._events[dt]&&st(this,dt)):(this._events=new tt,this._eventsCount=0),this},at.prototype.off=at.prototype.removeListener,at.prototype.addListener=at.prototype.on,at.prefixed=et,at.EventEmitter=at,_e.exports=at})(eventemitter3);var eventemitter3Exports=eventemitter3.exports;const EventEmitter=getDefaultExportFromCjs(eventemitter3Exports);var earcut$2={exports:{}};earcut$2.exports=earcut;earcut$2.exports.default=earcut;function earcut(_e,_,et){et=et||2;var tt=_&&_.length,rt=tt?_[0]*et:_e.length,it=linkedList(_e,0,rt,et,!0),st=[];if(!it||it.next===it.prev)return st;var at,ct,ut,dt,ot,nt,lt;if(tt&&(it=eliminateHoles(_e,_,it,et)),_e.length>80*et){at=ut=_e[0],ct=dt=_e[1];for(var ht=et;ht<rt;ht+=et)ot=_e[ht],nt=_e[ht+1],ot<at&&(at=ot),nt<ct&&(ct=nt),ot>ut&&(ut=ot),nt>dt&&(dt=nt);lt=Math.max(ut-at,dt-ct),lt=lt!==0?32767/lt:0}return earcutLinked(it,st,et,at,ct,lt,0),st}function linkedList(_e,_,et,tt,rt){var it,st;if(rt===signedArea(_e,_,et,tt)>0)for(it=_;it<et;it+=tt)st=insertNode(it,_e[it],_e[it+1],st);else for(it=et-tt;it>=_;it-=tt)st=insertNode(it,_e[it],_e[it+1],st);return st&&equals(st,st.next)&&(removeNode(st),st=st.next),st}function filterPoints(_e,_){if(!_e)return _e;_||(_=_e);var et=_e,tt;do if(tt=!1,!et.steiner&&(equals(et,et.next)||area(et.prev,et,et.next)===0)){if(removeNode(et),et=_=et.prev,et===et.next)break;tt=!0}else et=et.next;while(tt||et!==_);return _}function earcutLinked(_e,_,et,tt,rt,it,st){if(_e){!st&&it&&indexCurve(_e,tt,rt,it);for(var at=_e,ct,ut;_e.prev!==_e.next;){if(ct=_e.prev,ut=_e.next,it?isEarHashed(_e,tt,rt,it):isEar(_e)){_.push(ct.i/et|0),_.push(_e.i/et|0),_.push(ut.i/et|0),removeNode(_e),_e=ut.next,at=ut.next;continue}if(_e=ut,_e===at){st?st===1?(_e=cureLocalIntersections(filterPoints(_e),_,et),earcutLinked(_e,_,et,tt,rt,it,2)):st===2&&splitEarcut(_e,_,et,tt,rt,it):earcutLinked(filterPoints(_e),_,et,tt,rt,it,1);break}}}}function isEar(_e){var _=_e.prev,et=_e,tt=_e.next;if(area(_,et,tt)>=0)return!1;for(var rt=_.x,it=et.x,st=tt.x,at=_.y,ct=et.y,ut=tt.y,dt=rt<it?rt<st?rt:st:it<st?it:st,ot=at<ct?at<ut?at:ut:ct<ut?ct:ut,nt=rt>it?rt>st?rt:st:it>st?it:st,lt=at>ct?at>ut?at:ut:ct>ut?ct:ut,ht=tt.next;ht!==_;){if(ht.x>=dt&&ht.x<=nt&&ht.y>=ot&&ht.y<=lt&&pointInTriangle(rt,at,it,ct,st,ut,ht.x,ht.y)&&area(ht.prev,ht,ht.next)>=0)return!1;ht=ht.next}return!0}function isEarHashed(_e,_,et,tt){var rt=_e.prev,it=_e,st=_e.next;if(area(rt,it,st)>=0)return!1;for(var at=rt.x,ct=it.x,ut=st.x,dt=rt.y,ot=it.y,nt=st.y,lt=at<ct?at<ut?at:ut:ct<ut?ct:ut,ht=dt<ot?dt<nt?dt:nt:ot<nt?ot:nt,ft=at>ct?at>ut?at:ut:ct>ut?ct:ut,gt=dt>ot?dt>nt?dt:nt:ot>nt?ot:nt,mt=zOrder(lt,ht,_,et,tt),yt=zOrder(ft,gt,_,et,tt),bt=_e.prevZ,_t=_e.nextZ;bt&&bt.z>=mt&&_t&&_t.z<=yt;){if(bt.x>=lt&&bt.x<=ft&&bt.y>=ht&&bt.y<=gt&&bt!==rt&&bt!==st&&pointInTriangle(at,dt,ct,ot,ut,nt,bt.x,bt.y)&&area(bt.prev,bt,bt.next)>=0||(bt=bt.prevZ,_t.x>=lt&&_t.x<=ft&&_t.y>=ht&&_t.y<=gt&&_t!==rt&&_t!==st&&pointInTriangle(at,dt,ct,ot,ut,nt,_t.x,_t.y)&&area(_t.prev,_t,_t.next)>=0))return!1;_t=_t.nextZ}for(;bt&&bt.z>=mt;){if(bt.x>=lt&&bt.x<=ft&&bt.y>=ht&&bt.y<=gt&&bt!==rt&&bt!==st&&pointInTriangle(at,dt,ct,ot,ut,nt,bt.x,bt.y)&&area(bt.prev,bt,bt.next)>=0)return!1;bt=bt.prevZ}for(;_t&&_t.z<=yt;){if(_t.x>=lt&&_t.x<=ft&&_t.y>=ht&&_t.y<=gt&&_t!==rt&&_t!==st&&pointInTriangle(at,dt,ct,ot,ut,nt,_t.x,_t.y)&&area(_t.prev,_t,_t.next)>=0)return!1;_t=_t.nextZ}return!0}function cureLocalIntersections(_e,_,et){var tt=_e;do{var rt=tt.prev,it=tt.next.next;!equals(rt,it)&&intersects(rt,tt,tt.next,it)&&locallyInside(rt,it)&&locallyInside(it,rt)&&(_.push(rt.i/et|0),_.push(tt.i/et|0),_.push(it.i/et|0),removeNode(tt),removeNode(tt.next),tt=_e=it),tt=tt.next}while(tt!==_e);return filterPoints(tt)}function splitEarcut(_e,_,et,tt,rt,it){var st=_e;do{for(var at=st.next.next;at!==st.prev;){if(st.i!==at.i&&isValidDiagonal(st,at)){var ct=splitPolygon(st,at);st=filterPoints(st,st.next),ct=filterPoints(ct,ct.next),earcutLinked(st,_,et,tt,rt,it,0),earcutLinked(ct,_,et,tt,rt,it,0);return}at=at.next}st=st.next}while(st!==_e)}function eliminateHoles(_e,_,et,tt){var rt=[],it,st,at,ct,ut;for(it=0,st=_.length;it<st;it++)at=_[it]*tt,ct=it<st-1?_[it+1]*tt:_e.length,ut=linkedList(_e,at,ct,tt,!1),ut===ut.next&&(ut.steiner=!0),rt.push(getLeftmost(ut));for(rt.sort(compareX),it=0;it<rt.length;it++)et=eliminateHole(rt[it],et);return et}function compareX(_e,_){return _e.x-_.x}function eliminateHole(_e,_){var et=findHoleBridge(_e,_);if(!et)return _;var tt=splitPolygon(et,_e);return filterPoints(tt,tt.next),filterPoints(et,et.next)}function findHoleBridge(_e,_){var et=_,tt=_e.x,rt=_e.y,it=-1/0,st;do{if(rt<=et.y&&rt>=et.next.y&&et.next.y!==et.y){var at=et.x+(rt-et.y)*(et.next.x-et.x)/(et.next.y-et.y);if(at<=tt&&at>it&&(it=at,st=et.x<et.next.x?et:et.next,at===tt))return st}et=et.next}while(et!==_);if(!st)return null;var ct=st,ut=st.x,dt=st.y,ot=1/0,nt;et=st;do tt>=et.x&&et.x>=ut&&tt!==et.x&&pointInTriangle(rt<dt?tt:it,rt,ut,dt,rt<dt?it:tt,rt,et.x,et.y)&&(nt=Math.abs(rt-et.y)/(tt-et.x),locallyInside(et,_e)&&(nt<ot||nt===ot&&(et.x>st.x||et.x===st.x&&sectorContainsSector(st,et)))&&(st=et,ot=nt)),et=et.next;while(et!==ct);return st}function sectorContainsSector(_e,_){return area(_e.prev,_e,_.prev)<0&&area(_.next,_e,_e.next)<0}function indexCurve(_e,_,et,tt){var rt=_e;do rt.z===0&&(rt.z=zOrder(rt.x,rt.y,_,et,tt)),rt.prevZ=rt.prev,rt.nextZ=rt.next,rt=rt.next;while(rt!==_e);rt.prevZ.nextZ=null,rt.prevZ=null,sortLinked(rt)}function sortLinked(_e){var _,et,tt,rt,it,st,at,ct,ut=1;do{for(et=_e,_e=null,it=null,st=0;et;){for(st++,tt=et,at=0,_=0;_<ut&&(at++,tt=tt.nextZ,!!tt);_++);for(ct=ut;at>0||ct>0&&tt;)at!==0&&(ct===0||!tt||et.z<=tt.z)?(rt=et,et=et.nextZ,at--):(rt=tt,tt=tt.nextZ,ct--),it?it.nextZ=rt:_e=rt,rt.prevZ=it,it=rt;et=tt}it.nextZ=null,ut*=2}while(st>1);return _e}function zOrder(_e,_,et,tt,rt){return _e=(_e-et)*rt|0,_=(_-tt)*rt|0,_e=(_e|_e<<8)&16711935,_e=(_e|_e<<4)&252645135,_e=(_e|_e<<2)&858993459,_e=(_e|_e<<1)&1431655765,_=(_|_<<8)&16711935,_=(_|_<<4)&252645135,_=(_|_<<2)&858993459,_=(_|_<<1)&1431655765,_e|_<<1}function getLeftmost(_e){var _=_e,et=_e;do(_.x<et.x||_.x===et.x&&_.y<et.y)&&(et=_),_=_.next;while(_!==_e);return et}function pointInTriangle(_e,_,et,tt,rt,it,st,at){return(rt-st)*(_-at)>=(_e-st)*(it-at)&&(_e-st)*(tt-at)>=(et-st)*(_-at)&&(et-st)*(it-at)>=(rt-st)*(tt-at)}function isValidDiagonal(_e,_){return _e.next.i!==_.i&&_e.prev.i!==_.i&&!intersectsPolygon(_e,_)&&(locallyInside(_e,_)&&locallyInside(_,_e)&&middleInside(_e,_)&&(area(_e.prev,_e,_.prev)||area(_e,_.prev,_))||equals(_e,_)&&area(_e.prev,_e,_e.next)>0&&area(_.prev,_,_.next)>0)}function area(_e,_,et){return(_.y-_e.y)*(et.x-_.x)-(_.x-_e.x)*(et.y-_.y)}function equals(_e,_){return _e.x===_.x&&_e.y===_.y}function intersects(_e,_,et,tt){var rt=sign$3(area(_e,_,et)),it=sign$3(area(_e,_,tt)),st=sign$3(area(et,tt,_e)),at=sign$3(area(et,tt,_));return!!(rt!==it&&st!==at||rt===0&&onSegment(_e,et,_)||it===0&&onSegment(_e,tt,_)||st===0&&onSegment(et,_e,tt)||at===0&&onSegment(et,_,tt))}function onSegment(_e,_,et){return _.x<=Math.max(_e.x,et.x)&&_.x>=Math.min(_e.x,et.x)&&_.y<=Math.max(_e.y,et.y)&&_.y>=Math.min(_e.y,et.y)}function sign$3(_e){return _e>0?1:_e<0?-1:0}function intersectsPolygon(_e,_){var et=_e;do{if(et.i!==_e.i&&et.next.i!==_e.i&&et.i!==_.i&&et.next.i!==_.i&&intersects(et,et.next,_e,_))return!0;et=et.next}while(et!==_e);return!1}function locallyInside(_e,_){return area(_e.prev,_e,_e.next)<0?area(_e,_,_e.next)>=0&&area(_e,_e.prev,_)>=0:area(_e,_,_e.prev)<0||area(_e,_e.next,_)<0}function middleInside(_e,_){var et=_e,tt=!1,rt=(_e.x+_.x)/2,it=(_e.y+_.y)/2;do et.y>it!=et.next.y>it&&et.next.y!==et.y&&rt<(et.next.x-et.x)*(it-et.y)/(et.next.y-et.y)+et.x&&(tt=!tt),et=et.next;while(et!==_e);return tt}function splitPolygon(_e,_){var et=new Node(_e.i,_e.x,_e.y),tt=new Node(_.i,_.x,_.y),rt=_e.next,it=_.prev;return _e.next=_,_.prev=_e,et.next=rt,rt.prev=et,tt.next=et,et.prev=tt,it.next=tt,tt.prev=it,tt}function insertNode(_e,_,et,tt){var rt=new Node(_e,_,et);return tt?(rt.next=tt.next,rt.prev=tt,tt.next.prev=rt,tt.next=rt):(rt.prev=rt,rt.next=rt),rt}function removeNode(_e){_e.next.prev=_e.prev,_e.prev.next=_e.next,_e.prevZ&&(_e.prevZ.nextZ=_e.nextZ),_e.nextZ&&(_e.nextZ.prevZ=_e.prevZ)}function Node(_e,_,et){this.i=_e,this.x=_,this.y=et,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}earcut.deviation=function(_e,_,et,tt){var rt=_&&_.length,it=rt?_[0]*et:_e.length,st=Math.abs(signedArea(_e,0,it,et));if(rt)for(var at=0,ct=_.length;at<ct;at++){var ut=_[at]*et,dt=at<ct-1?_[at+1]*et:_e.length;st-=Math.abs(signedArea(_e,ut,dt,et))}var ot=0;for(at=0;at<tt.length;at+=3){var nt=tt[at]*et,lt=tt[at+1]*et,ht=tt[at+2]*et;ot+=Math.abs((_e[nt]-_e[ht])*(_e[lt+1]-_e[nt+1])-(_e[nt]-_e[lt])*(_e[ht+1]-_e[nt+1]))}return st===0&&ot===0?0:Math.abs((ot-st)/st)};function signedArea(_e,_,et,tt){for(var rt=0,it=_,st=et-tt;it<et;it+=tt)rt+=(_e[st]-_e[it])*(_e[it+1]+_e[st+1]),st=it;return rt}earcut.flatten=function(_e){for(var _=_e[0][0].length,et={vertices:[],holes:[],dimensions:_},tt=0,rt=0;rt<_e.length;rt++){for(var it=0;it<_e[rt].length;it++)for(var st=0;st<_;st++)et.vertices.push(_e[rt][it][st]);rt>0&&(tt+=_e[rt-1].length,et.holes.push(tt))}return et};var earcutExports=earcut$2.exports;const earcut$1=getDefaultExportFromCjs(earcutExports);var punycode$1={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */punycode$1.exports;(function(_e,_){(function(et){var tt=_&&!_.nodeType&&_,rt=!_e.nodeType&&_e,it=typeof commonjsGlobal=="object"&&commonjsGlobal;(it.global===it||it.window===it||it.self===it)&&(et=it);var st,at=2147483647,ct=36,ut=1,dt=26,ot=38,nt=700,lt=72,ht=128,ft="-",gt=/^xn--/,mt=/[^\x20-\x7E]/,yt=/[\x2E\u3002\uFF0E\uFF61]/g,bt={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},_t=ct-ut,vt=Math.floor,xt=String.fromCharCode,wt;function Tt(Ut){throw new RangeError(bt[Ut])}function St(Ut,Vt){for(var Ht=Ut.length,sr=[];Ht--;)sr[Ht]=Vt(Ut[Ht]);return sr}function Et(Ut,Vt){var Ht=Ut.split("@"),sr="";Ht.length>1&&(sr=Ht[0]+"@",Ut=Ht[1]),Ut=Ut.replace(yt,".");var ir=Ut.split("."),er=St(ir,Vt).join(".");return sr+er}function Ot(Ut){for(var Vt=[],Ht=0,sr=Ut.length,ir,er;Ht<sr;)ir=Ut.charCodeAt(Ht++),ir>=55296&&ir<=56319&&Ht<sr?(er=Ut.charCodeAt(Ht++),(er&64512)==56320?Vt.push(((ir&1023)<<10)+(er&1023)+65536):(Vt.push(ir),Ht--)):Vt.push(ir);return Vt}function Rt(Ut){return St(Ut,function(Vt){var Ht="";return Vt>65535&&(Vt-=65536,Ht+=xt(Vt>>>10&1023|55296),Vt=56320|Vt&1023),Ht+=xt(Vt),Ht}).join("")}function Pt(Ut){return Ut-48<10?Ut-22:Ut-65<26?Ut-65:Ut-97<26?Ut-97:ct}function Mt(Ut,Vt){return Ut+22+75*(Ut<26)-((Vt!=0)<<5)}function $t(Ut,Vt,Ht){var sr=0;for(Ut=Ht?vt(Ut/nt):Ut>>1,Ut+=vt(Ut/Vt);Ut>_t*dt>>1;sr+=ct)Ut=vt(Ut/_t);return vt(sr+(_t+1)*Ut/(Ut+ot))}function kt(Ut){var Vt=[],Ht=Ut.length,sr,ir=0,er=ht,dr=lt,gr,Qt,Jt,nr,lr,hr,ur,mr,Mr;for(gr=Ut.lastIndexOf(ft),gr<0&&(gr=0),Qt=0;Qt<gr;++Qt)Ut.charCodeAt(Qt)>=128&&Tt("not-basic"),Vt.push(Ut.charCodeAt(Qt));for(Jt=gr>0?gr+1:0;Jt<Ht;){for(nr=ir,lr=1,hr=ct;Jt>=Ht&&Tt("invalid-input"),ur=Pt(Ut.charCodeAt(Jt++)),(ur>=ct||ur>vt((at-ir)/lr))&&Tt("overflow"),ir+=ur*lr,mr=hr<=dr?ut:hr>=dr+dt?dt:hr-dr,!(ur<mr);hr+=ct)Mr=ct-mr,lr>vt(at/Mr)&&Tt("overflow"),lr*=Mr;sr=Vt.length+1,dr=$t(ir-nr,sr,nr==0),vt(ir/sr)>at-er&&Tt("overflow"),er+=vt(ir/sr),ir%=sr,Vt.splice(ir++,0,er)}return Rt(Vt)}function Lt(Ut){var Vt,Ht,sr,ir,er,dr,gr,Qt,Jt,nr,lr,hr=[],ur,mr,Mr,Fr;for(Ut=Ot(Ut),ur=Ut.length,Vt=ht,Ht=0,er=lt,dr=0;dr<ur;++dr)lr=Ut[dr],lr<128&&hr.push(xt(lr));for(sr=ir=hr.length,ir&&hr.push(ft);sr<ur;){for(gr=at,dr=0;dr<ur;++dr)lr=Ut[dr],lr>=Vt&&lr<gr&&(gr=lr);for(mr=sr+1,gr-Vt>vt((at-Ht)/mr)&&Tt("overflow"),Ht+=(gr-Vt)*mr,Vt=gr,dr=0;dr<ur;++dr)if(lr=Ut[dr],lr<Vt&&++Ht>at&&Tt("overflow"),lr==Vt){for(Qt=Ht,Jt=ct;nr=Jt<=er?ut:Jt>=er+dt?dt:Jt-er,!(Qt<nr);Jt+=ct)Fr=Qt-nr,Mr=ct-nr,hr.push(xt(Mt(nr+Fr%Mr,0))),Qt=vt(Fr/Mr);hr.push(xt(Mt(Qt,0))),er=$t(Ht,mr,sr==ir),Ht=0,++sr}++Ht,++Vt}return hr.join("")}function Nt(Ut){return Et(Ut,function(Vt){return gt.test(Vt)?kt(Vt.slice(4).toLowerCase()):Vt})}function zt(Ut){return Et(Ut,function(Vt){return mt.test(Vt)?"xn--"+Lt(Vt):Vt})}if(st={version:"1.4.1",ucs2:{decode:Ot,encode:Rt},decode:kt,encode:Lt,toASCII:zt,toUnicode:Nt},tt&&rt)if(_e.exports==tt)rt.exports=st;else for(wt in st)st.hasOwnProperty(wt)&&(tt[wt]=st[wt]);else et.punycode=st})(commonjsGlobal)})(punycode$1,punycode$1.exports);var punycodeExports=punycode$1.exports,type=TypeError;const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(__viteBrowserExternal$1);var hasMap=typeof Map=="function"&&Map.prototype,mapSizeDescriptor=Object.getOwnPropertyDescriptor&&hasMap?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,mapSize$1=hasMap&&mapSizeDescriptor&&typeof mapSizeDescriptor.get=="function"?mapSizeDescriptor.get:null,mapForEach=hasMap&&Map.prototype.forEach,hasSet=typeof Set=="function"&&Set.prototype,setSizeDescriptor=Object.getOwnPropertyDescriptor&&hasSet?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,setSize=hasSet&&setSizeDescriptor&&typeof setSizeDescriptor.get=="function"?setSizeDescriptor.get:null,setForEach=hasSet&&Set.prototype.forEach,hasWeakMap=typeof WeakMap=="function"&&WeakMap.prototype,weakMapHas=hasWeakMap?WeakMap.prototype.has:null,hasWeakSet=typeof WeakSet=="function"&&WeakSet.prototype,weakSetHas=hasWeakSet?WeakSet.prototype.has:null,hasWeakRef=typeof WeakRef=="function"&&WeakRef.prototype,weakRefDeref=hasWeakRef?WeakRef.prototype.deref:null,booleanValueOf=Boolean.prototype.valueOf,objectToString=Object.prototype.toString,functionToString=Function.prototype.toString,$match=String.prototype.match,$slice=String.prototype.slice,$replace$1=String.prototype.replace,$toUpperCase=String.prototype.toUpperCase,$toLowerCase=String.prototype.toLowerCase,$test=RegExp.prototype.test,$concat$1=Array.prototype.concat,$join=Array.prototype.join,$arrSlice=Array.prototype.slice,$floor=Math.floor,bigIntValueOf=typeof BigInt=="function"?BigInt.prototype.valueOf:null,gOPS=Object.getOwnPropertySymbols,symToString=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,hasShammedSymbols=typeof Symbol=="function"&&typeof Symbol.iterator=="object",toStringTag=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===hasShammedSymbols||!0)?Symbol.toStringTag:null,isEnumerable=Object.prototype.propertyIsEnumerable,gPO=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(_e){return _e.__proto__}:null);function addNumericSeparator(_e,_){if(_e===1/0||_e===-1/0||_e!==_e||_e&&_e>-1e3&&_e<1e3||$test.call(/e/,_))return _;var et=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof _e=="number"){var tt=_e<0?-$floor(-_e):$floor(_e);if(tt!==_e){var rt=String(tt),it=$slice.call(_,rt.length+1);return $replace$1.call(rt,et,"$&_")+"."+$replace$1.call($replace$1.call(it,/([0-9]{3})/g,"$&_"),/_$/,"")}}return $replace$1.call(_,et,"$&_")}var utilInspect=require$$0,inspectCustom=utilInspect.custom,inspectSymbol=isSymbol(inspectCustom)?inspectCustom:null,quotes={__proto__:null,double:'"',single:"'"},quoteREs={__proto__:null,double:/(["\\])/g,single:/(['\\])/g},objectInspect=function _e(_,et,tt,rt){var it=et||{};if(has$3(it,"quoteStyle")&&!has$3(quotes,it.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(has$3(it,"maxStringLength")&&(typeof it.maxStringLength=="number"?it.maxStringLength<0&&it.maxStringLength!==1/0:it.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var st=has$3(it,"customInspect")?it.customInspect:!0;if(typeof st!="boolean"&&st!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(has$3(it,"indent")&&it.indent!==null&&it.indent!=="	"&&!(parseInt(it.indent,10)===it.indent&&it.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(has$3(it,"numericSeparator")&&typeof it.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var at=it.numericSeparator;if(typeof _>"u")return"undefined";if(_===null)return"null";if(typeof _=="boolean")return _?"true":"false";if(typeof _=="string")return inspectString(_,it);if(typeof _=="number"){if(_===0)return 1/0/_>0?"0":"-0";var ct=String(_);return at?addNumericSeparator(_,ct):ct}if(typeof _=="bigint"){var ut=String(_)+"n";return at?addNumericSeparator(_,ut):ut}var dt=typeof it.depth>"u"?5:it.depth;if(typeof tt>"u"&&(tt=0),tt>=dt&&dt>0&&typeof _=="object")return isArray$3(_)?"[Array]":"[Object]";var ot=getIndent(it,tt);if(typeof rt>"u")rt=[];else if(indexOf(rt,_)>=0)return"[Circular]";function nt(Pt,Mt,$t){if(Mt&&(rt=$arrSlice.call(rt),rt.push(Mt)),$t){var kt={depth:it.depth};return has$3(it,"quoteStyle")&&(kt.quoteStyle=it.quoteStyle),_e(Pt,kt,tt+1,rt)}return _e(Pt,it,tt+1,rt)}if(typeof _=="function"&&!isRegExp$1(_)){var lt=nameOf(_),ht=arrObjKeys(_,nt);return"[Function"+(lt?": "+lt:" (anonymous)")+"]"+(ht.length>0?" { "+$join.call(ht,", ")+" }":"")}if(isSymbol(_)){var ft=hasShammedSymbols?$replace$1.call(String(_),/^(Symbol\(.*\))_[^)]*$/,"$1"):symToString.call(_);return typeof _=="object"&&!hasShammedSymbols?markBoxed(ft):ft}if(isElement(_)){for(var gt="<"+$toLowerCase.call(String(_.nodeName)),mt=_.attributes||[],yt=0;yt<mt.length;yt++)gt+=" "+mt[yt].name+"="+wrapQuotes(quote(mt[yt].value),"double",it);return gt+=">",_.childNodes&&_.childNodes.length&&(gt+="..."),gt+="</"+$toLowerCase.call(String(_.nodeName))+">",gt}if(isArray$3(_)){if(_.length===0)return"[]";var bt=arrObjKeys(_,nt);return ot&&!singleLineValues(bt)?"["+indentedJoin(bt,ot)+"]":"[ "+$join.call(bt,", ")+" ]"}if(isError(_)){var _t=arrObjKeys(_,nt);return!("cause"in Error.prototype)&&"cause"in _&&!isEnumerable.call(_,"cause")?"{ ["+String(_)+"] "+$join.call($concat$1.call("[cause]: "+nt(_.cause),_t),", ")+" }":_t.length===0?"["+String(_)+"]":"{ ["+String(_)+"] "+$join.call(_t,", ")+" }"}if(typeof _=="object"&&st){if(inspectSymbol&&typeof _[inspectSymbol]=="function"&&utilInspect)return utilInspect(_,{depth:dt-tt});if(st!=="symbol"&&typeof _.inspect=="function")return _.inspect()}if(isMap(_)){var vt=[];return mapForEach&&mapForEach.call(_,function(Pt,Mt){vt.push(nt(Mt,_,!0)+" => "+nt(Pt,_))}),collectionOf("Map",mapSize$1.call(_),vt,ot)}if(isSet(_)){var xt=[];return setForEach&&setForEach.call(_,function(Pt){xt.push(nt(Pt,_))}),collectionOf("Set",setSize.call(_),xt,ot)}if(isWeakMap(_))return weakCollectionOf("WeakMap");if(isWeakSet(_))return weakCollectionOf("WeakSet");if(isWeakRef(_))return weakCollectionOf("WeakRef");if(isNumber(_))return markBoxed(nt(Number(_)));if(isBigInt(_))return markBoxed(nt(bigIntValueOf.call(_)));if(isBoolean(_))return markBoxed(booleanValueOf.call(_));if(isString(_))return markBoxed(nt(String(_)));if(typeof window<"u"&&_===window)return"{ [object Window] }";if(typeof globalThis<"u"&&_===globalThis||typeof commonjsGlobal<"u"&&_===commonjsGlobal)return"{ [object globalThis] }";if(!isDate(_)&&!isRegExp$1(_)){var wt=arrObjKeys(_,nt),Tt=gPO?gPO(_)===Object.prototype:_ instanceof Object||_.constructor===Object,St=_ instanceof Object?"":"null prototype",Et=!Tt&&toStringTag&&Object(_)===_&&toStringTag in _?$slice.call(toStr(_),8,-1):St?"Object":"",Ot=Tt||typeof _.constructor!="function"?"":_.constructor.name?_.constructor.name+" ":"",Rt=Ot+(Et||St?"["+$join.call($concat$1.call([],Et||[],St||[]),": ")+"] ":"");return wt.length===0?Rt+"{}":ot?Rt+"{"+indentedJoin(wt,ot)+"}":Rt+"{ "+$join.call(wt,", ")+" }"}return String(_)};function wrapQuotes(_e,_,et){var tt=et.quoteStyle||_,rt=quotes[tt];return rt+_e+rt}function quote(_e){return $replace$1.call(String(_e),/"/g,"&quot;")}function isArray$3(_e){return toStr(_e)==="[object Array]"&&(!toStringTag||!(typeof _e=="object"&&toStringTag in _e))}function isDate(_e){return toStr(_e)==="[object Date]"&&(!toStringTag||!(typeof _e=="object"&&toStringTag in _e))}function isRegExp$1(_e){return toStr(_e)==="[object RegExp]"&&(!toStringTag||!(typeof _e=="object"&&toStringTag in _e))}function isError(_e){return toStr(_e)==="[object Error]"&&(!toStringTag||!(typeof _e=="object"&&toStringTag in _e))}function isString(_e){return toStr(_e)==="[object String]"&&(!toStringTag||!(typeof _e=="object"&&toStringTag in _e))}function isNumber(_e){return toStr(_e)==="[object Number]"&&(!toStringTag||!(typeof _e=="object"&&toStringTag in _e))}function isBoolean(_e){return toStr(_e)==="[object Boolean]"&&(!toStringTag||!(typeof _e=="object"&&toStringTag in _e))}function isSymbol(_e){if(hasShammedSymbols)return _e&&typeof _e=="object"&&_e instanceof Symbol;if(typeof _e=="symbol")return!0;if(!_e||typeof _e!="object"||!symToString)return!1;try{return symToString.call(_e),!0}catch{}return!1}function isBigInt(_e){if(!_e||typeof _e!="object"||!bigIntValueOf)return!1;try{return bigIntValueOf.call(_e),!0}catch{}return!1}var hasOwn$1=Object.prototype.hasOwnProperty||function(_e){return _e in this};function has$3(_e,_){return hasOwn$1.call(_e,_)}function toStr(_e){return objectToString.call(_e)}function nameOf(_e){if(_e.name)return _e.name;var _=$match.call(functionToString.call(_e),/^function\s*([\w$]+)/);return _?_[1]:null}function indexOf(_e,_){if(_e.indexOf)return _e.indexOf(_);for(var et=0,tt=_e.length;et<tt;et++)if(_e[et]===_)return et;return-1}function isMap(_e){if(!mapSize$1||!_e||typeof _e!="object")return!1;try{mapSize$1.call(_e);try{setSize.call(_e)}catch{return!0}return _e instanceof Map}catch{}return!1}function isWeakMap(_e){if(!weakMapHas||!_e||typeof _e!="object")return!1;try{weakMapHas.call(_e,weakMapHas);try{weakSetHas.call(_e,weakSetHas)}catch{return!0}return _e instanceof WeakMap}catch{}return!1}function isWeakRef(_e){if(!weakRefDeref||!_e||typeof _e!="object")return!1;try{return weakRefDeref.call(_e),!0}catch{}return!1}function isSet(_e){if(!setSize||!_e||typeof _e!="object")return!1;try{setSize.call(_e);try{mapSize$1.call(_e)}catch{return!0}return _e instanceof Set}catch{}return!1}function isWeakSet(_e){if(!weakSetHas||!_e||typeof _e!="object")return!1;try{weakSetHas.call(_e,weakSetHas);try{weakMapHas.call(_e,weakMapHas)}catch{return!0}return _e instanceof WeakSet}catch{}return!1}function isElement(_e){return!_e||typeof _e!="object"?!1:typeof HTMLElement<"u"&&_e instanceof HTMLElement?!0:typeof _e.nodeName=="string"&&typeof _e.getAttribute=="function"}function inspectString(_e,_){if(_e.length>_.maxStringLength){var et=_e.length-_.maxStringLength,tt="... "+et+" more character"+(et>1?"s":"");return inspectString($slice.call(_e,0,_.maxStringLength),_)+tt}var rt=quoteREs[_.quoteStyle||"single"];rt.lastIndex=0;var it=$replace$1.call($replace$1.call(_e,rt,"\\$1"),/[\x00-\x1f]/g,lowbyte);return wrapQuotes(it,"single",_)}function lowbyte(_e){var _=_e.charCodeAt(0),et={8:"b",9:"t",10:"n",12:"f",13:"r"}[_];return et?"\\"+et:"\\x"+(_<16?"0":"")+$toUpperCase.call(_.toString(16))}function markBoxed(_e){return"Object("+_e+")"}function weakCollectionOf(_e){return _e+" { ? }"}function collectionOf(_e,_,et,tt){var rt=tt?indentedJoin(et,tt):$join.call(et,", ");return _e+" ("+_+") {"+rt+"}"}function singleLineValues(_e){for(var _=0;_<_e.length;_++)if(indexOf(_e[_],`
`)>=0)return!1;return!0}function getIndent(_e,_){var et;if(_e.indent==="	")et="	";else if(typeof _e.indent=="number"&&_e.indent>0)et=$join.call(Array(_e.indent+1)," ");else return null;return{base:et,prev:$join.call(Array(_+1),et)}}function indentedJoin(_e,_){if(_e.length===0)return"";var et=`
`+_.prev+_.base;return et+$join.call(_e,","+et)+`
`+_.prev}function arrObjKeys(_e,_){var et=isArray$3(_e),tt=[];if(et){tt.length=_e.length;for(var rt=0;rt<_e.length;rt++)tt[rt]=has$3(_e,rt)?_(_e[rt],_e):""}var it=typeof gOPS=="function"?gOPS(_e):[],st;if(hasShammedSymbols){st={};for(var at=0;at<it.length;at++)st["$"+it[at]]=it[at]}for(var ct in _e)has$3(_e,ct)&&(et&&String(Number(ct))===ct&&ct<_e.length||hasShammedSymbols&&st["$"+ct]instanceof Symbol||($test.call(/[^\w$]/,ct)?tt.push(_(ct,_e)+": "+_(_e[ct],_e)):tt.push(ct+": "+_(_e[ct],_e))));if(typeof gOPS=="function")for(var ut=0;ut<it.length;ut++)isEnumerable.call(_e,it[ut])&&tt.push("["+_(it[ut])+"]: "+_(_e[it[ut]],_e));return tt}var inspect$3=objectInspect,$TypeError$5=type,listGetNode=function(_e,_,et){for(var tt=_e,rt;(rt=tt.next)!=null;tt=rt)if(rt.key===_)return tt.next=rt.next,et||(rt.next=_e.next,_e.next=rt),rt},listGet=function(_e,_){if(_e){var et=listGetNode(_e,_);return et&&et.value}},listSet=function(_e,_,et){var tt=listGetNode(_e,_);tt?tt.value=et:_e.next={key:_,next:_e.next,value:et}},listHas=function(_e,_){return _e?!!listGetNode(_e,_):!1},listDelete=function(_e,_){if(_e)return listGetNode(_e,_,!0)},sideChannelList=function _e(){var _,et={assert:function(tt){if(!et.has(tt))throw new $TypeError$5("Side channel does not contain "+inspect$3(tt))},delete:function(tt){var rt=_&&_.next,it=listDelete(_,tt);return it&&rt&&rt===it&&(_=void 0),!!it},get:function(tt){return listGet(_,tt)},has:function(tt){return listHas(_,tt)},set:function(tt,rt){_||(_={next:void 0}),listSet(_,tt,rt)}};return et},esObjectAtoms=Object,esErrors=Error,_eval=EvalError,range=RangeError,ref=ReferenceError,syntax=SyntaxError,uri=URIError,abs$1=Math.abs,floor$1=Math.floor,max$1=Math.max,min$1=Math.min,pow$1=Math.pow,round$2=Math.round,_isNaN=Number.isNaN||function _e(_){return _!==_},$isNaN=_isNaN,sign$2=function _e(_){return $isNaN(_)||_===0?_:_<0?-1:1},gOPD=Object.getOwnPropertyDescriptor,$gOPD$1=gOPD;if($gOPD$1)try{$gOPD$1([],"length")}catch{$gOPD$1=null}var gopd=$gOPD$1,$defineProperty$1=Object.defineProperty||!1;if($defineProperty$1)try{$defineProperty$1({},"a",{value:1})}catch{$defineProperty$1=!1}var esDefineProperty=$defineProperty$1,shams,hasRequiredShams;function requireShams(){return hasRequiredShams||(hasRequiredShams=1,shams=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var _={},et=Symbol("test"),tt=Object(et);if(typeof et=="string"||Object.prototype.toString.call(et)!=="[object Symbol]"||Object.prototype.toString.call(tt)!=="[object Symbol]")return!1;var rt=42;_[et]=rt;for(var it in _)return!1;if(typeof Object.keys=="function"&&Object.keys(_).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(_).length!==0)return!1;var st=Object.getOwnPropertySymbols(_);if(st.length!==1||st[0]!==et||!Object.prototype.propertyIsEnumerable.call(_,et))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var at=Object.getOwnPropertyDescriptor(_,et);if(at.value!==rt||at.enumerable!==!0)return!1}return!0}),shams}var hasSymbols$1,hasRequiredHasSymbols;function requireHasSymbols(){if(hasRequiredHasSymbols)return hasSymbols$1;hasRequiredHasSymbols=1;var _e=typeof Symbol<"u"&&Symbol,_=requireShams();return hasSymbols$1=function(){return typeof _e!="function"||typeof Symbol!="function"||typeof _e("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:_()},hasSymbols$1}var Reflect_getPrototypeOf,hasRequiredReflect_getPrototypeOf;function requireReflect_getPrototypeOf(){return hasRequiredReflect_getPrototypeOf||(hasRequiredReflect_getPrototypeOf=1,Reflect_getPrototypeOf=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),Reflect_getPrototypeOf}var Object_getPrototypeOf,hasRequiredObject_getPrototypeOf;function requireObject_getPrototypeOf(){if(hasRequiredObject_getPrototypeOf)return Object_getPrototypeOf;hasRequiredObject_getPrototypeOf=1;var _e=esObjectAtoms;return Object_getPrototypeOf=_e.getPrototypeOf||null,Object_getPrototypeOf}var implementation,hasRequiredImplementation;function requireImplementation(){if(hasRequiredImplementation)return implementation;hasRequiredImplementation=1;var _e="Function.prototype.bind called on incompatible ",_=Object.prototype.toString,et=Math.max,tt="[object Function]",rt=function(ct,ut){for(var dt=[],ot=0;ot<ct.length;ot+=1)dt[ot]=ct[ot];for(var nt=0;nt<ut.length;nt+=1)dt[nt+ct.length]=ut[nt];return dt},it=function(ct,ut){for(var dt=[],ot=ut,nt=0;ot<ct.length;ot+=1,nt+=1)dt[nt]=ct[ot];return dt},st=function(at,ct){for(var ut="",dt=0;dt<at.length;dt+=1)ut+=at[dt],dt+1<at.length&&(ut+=ct);return ut};return implementation=function(ct){var ut=this;if(typeof ut!="function"||_.apply(ut)!==tt)throw new TypeError(_e+ut);for(var dt=it(arguments,1),ot,nt=function(){if(this instanceof ot){var mt=ut.apply(this,rt(dt,arguments));return Object(mt)===mt?mt:this}return ut.apply(ct,rt(dt,arguments))},lt=et(0,ut.length-dt.length),ht=[],ft=0;ft<lt;ft++)ht[ft]="$"+ft;if(ot=Function("binder","return function ("+st(ht,",")+"){ return binder.apply(this,arguments); }")(nt),ut.prototype){var gt=function(){};gt.prototype=ut.prototype,ot.prototype=new gt,gt.prototype=null}return ot},implementation}var functionBind,hasRequiredFunctionBind;function requireFunctionBind(){if(hasRequiredFunctionBind)return functionBind;hasRequiredFunctionBind=1;var _e=requireImplementation();return functionBind=Function.prototype.bind||_e,functionBind}var functionCall,hasRequiredFunctionCall;function requireFunctionCall(){return hasRequiredFunctionCall||(hasRequiredFunctionCall=1,functionCall=Function.prototype.call),functionCall}var functionApply,hasRequiredFunctionApply;function requireFunctionApply(){return hasRequiredFunctionApply||(hasRequiredFunctionApply=1,functionApply=Function.prototype.apply),functionApply}var reflectApply=typeof Reflect<"u"&&Reflect&&Reflect.apply,bind$2=requireFunctionBind(),$apply$1=requireFunctionApply(),$call$2=requireFunctionCall(),$reflectApply=reflectApply,actualApply=$reflectApply||bind$2.call($call$2,$apply$1),bind$1=requireFunctionBind(),$TypeError$4=type,$call$1=requireFunctionCall(),$actualApply=actualApply,callBindApplyHelpers=function _e(_){if(_.length<1||typeof _[0]!="function")throw new $TypeError$4("a function is required");return $actualApply(bind$1,$call$1,_)},get,hasRequiredGet;function requireGet(){if(hasRequiredGet)return get;hasRequiredGet=1;var _e=callBindApplyHelpers,_=gopd,et;try{et=[].__proto__===Array.prototype}catch(st){if(!st||typeof st!="object"||!("code"in st)||st.code!=="ERR_PROTO_ACCESS")throw st}var tt=!!et&&_&&_(Object.prototype,"__proto__"),rt=Object,it=rt.getPrototypeOf;return get=tt&&typeof tt.get=="function"?_e([tt.get]):typeof it=="function"?function(at){return it(at==null?at:rt(at))}:!1,get}var getProto$1,hasRequiredGetProto;function requireGetProto(){if(hasRequiredGetProto)return getProto$1;hasRequiredGetProto=1;var _e=requireReflect_getPrototypeOf(),_=requireObject_getPrototypeOf(),et=requireGet();return getProto$1=_e?function(rt){return _e(rt)}:_?function(rt){if(!rt||typeof rt!="object"&&typeof rt!="function")throw new TypeError("getProto: not an object");return _(rt)}:et?function(rt){return et(rt)}:null,getProto$1}var hasown,hasRequiredHasown;function requireHasown(){if(hasRequiredHasown)return hasown;hasRequiredHasown=1;var _e=Function.prototype.call,_=Object.prototype.hasOwnProperty,et=requireFunctionBind();return hasown=et.call(_e,_),hasown}var undefined$1,$Object=esObjectAtoms,$Error=esErrors,$EvalError=_eval,$RangeError=range,$ReferenceError=ref,$SyntaxError=syntax,$TypeError$3=type,$URIError=uri,abs=abs$1,floor=floor$1,max=max$1,min=min$1,pow=pow$1,round$1=round$2,sign$1=sign$2,$Function=Function,getEvalledConstructor=function(_e){try{return $Function('"use strict"; return ('+_e+").constructor;")()}catch{}},$gOPD=gopd,$defineProperty=esDefineProperty,throwTypeError=function(){throw new $TypeError$3},ThrowTypeError=$gOPD?function(){try{return arguments.callee,throwTypeError}catch{try{return $gOPD(arguments,"callee").get}catch{return throwTypeError}}}():throwTypeError,hasSymbols=requireHasSymbols()(),getProto=requireGetProto(),$ObjectGPO=requireObject_getPrototypeOf(),$ReflectGPO=requireReflect_getPrototypeOf(),$apply=requireFunctionApply(),$call=requireFunctionCall(),needsEval={},TypedArray=typeof Uint8Array>"u"||!getProto?undefined$1:getProto(Uint8Array),INTRINSICS={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?undefined$1:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?undefined$1:ArrayBuffer,"%ArrayIteratorPrototype%":hasSymbols&&getProto?getProto([][Symbol.iterator]()):undefined$1,"%AsyncFromSyncIteratorPrototype%":undefined$1,"%AsyncFunction%":needsEval,"%AsyncGenerator%":needsEval,"%AsyncGeneratorFunction%":needsEval,"%AsyncIteratorPrototype%":needsEval,"%Atomics%":typeof Atomics>"u"?undefined$1:Atomics,"%BigInt%":typeof BigInt>"u"?undefined$1:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?undefined$1:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?undefined$1:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?undefined$1:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":$Error,"%eval%":eval,"%EvalError%":$EvalError,"%Float32Array%":typeof Float32Array>"u"?undefined$1:Float32Array,"%Float64Array%":typeof Float64Array>"u"?undefined$1:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?undefined$1:FinalizationRegistry,"%Function%":$Function,"%GeneratorFunction%":needsEval,"%Int8Array%":typeof Int8Array>"u"?undefined$1:Int8Array,"%Int16Array%":typeof Int16Array>"u"?undefined$1:Int16Array,"%Int32Array%":typeof Int32Array>"u"?undefined$1:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":hasSymbols&&getProto?getProto(getProto([][Symbol.iterator]())):undefined$1,"%JSON%":typeof JSON=="object"?JSON:undefined$1,"%Map%":typeof Map>"u"?undefined$1:Map,"%MapIteratorPrototype%":typeof Map>"u"||!hasSymbols||!getProto?undefined$1:getProto(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":$Object,"%Object.getOwnPropertyDescriptor%":$gOPD,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?undefined$1:Promise,"%Proxy%":typeof Proxy>"u"?undefined$1:Proxy,"%RangeError%":$RangeError,"%ReferenceError%":$ReferenceError,"%Reflect%":typeof Reflect>"u"?undefined$1:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?undefined$1:Set,"%SetIteratorPrototype%":typeof Set>"u"||!hasSymbols||!getProto?undefined$1:getProto(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?undefined$1:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":hasSymbols&&getProto?getProto(""[Symbol.iterator]()):undefined$1,"%Symbol%":hasSymbols?Symbol:undefined$1,"%SyntaxError%":$SyntaxError,"%ThrowTypeError%":ThrowTypeError,"%TypedArray%":TypedArray,"%TypeError%":$TypeError$3,"%Uint8Array%":typeof Uint8Array>"u"?undefined$1:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?undefined$1:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?undefined$1:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?undefined$1:Uint32Array,"%URIError%":$URIError,"%WeakMap%":typeof WeakMap>"u"?undefined$1:WeakMap,"%WeakRef%":typeof WeakRef>"u"?undefined$1:WeakRef,"%WeakSet%":typeof WeakSet>"u"?undefined$1:WeakSet,"%Function.prototype.call%":$call,"%Function.prototype.apply%":$apply,"%Object.defineProperty%":$defineProperty,"%Object.getPrototypeOf%":$ObjectGPO,"%Math.abs%":abs,"%Math.floor%":floor,"%Math.max%":max,"%Math.min%":min,"%Math.pow%":pow,"%Math.round%":round$1,"%Math.sign%":sign$1,"%Reflect.getPrototypeOf%":$ReflectGPO};if(getProto)try{null.error}catch(_e){var errorProto=getProto(getProto(_e));INTRINSICS["%Error.prototype%"]=errorProto}var doEval=function _e(_){var et;if(_==="%AsyncFunction%")et=getEvalledConstructor("async function () {}");else if(_==="%GeneratorFunction%")et=getEvalledConstructor("function* () {}");else if(_==="%AsyncGeneratorFunction%")et=getEvalledConstructor("async function* () {}");else if(_==="%AsyncGenerator%"){var tt=_e("%AsyncGeneratorFunction%");tt&&(et=tt.prototype)}else if(_==="%AsyncIteratorPrototype%"){var rt=_e("%AsyncGenerator%");rt&&getProto&&(et=getProto(rt.prototype))}return INTRINSICS[_]=et,et},LEGACY_ALIASES={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},bind=requireFunctionBind(),hasOwn=requireHasown(),$concat=bind.call($call,Array.prototype.concat),$spliceApply=bind.call($apply,Array.prototype.splice),$replace=bind.call($call,String.prototype.replace),$strSlice=bind.call($call,String.prototype.slice),$exec=bind.call($call,RegExp.prototype.exec),rePropName=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=function _e(_){var et=$strSlice(_,0,1),tt=$strSlice(_,-1);if(et==="%"&&tt!=="%")throw new $SyntaxError("invalid intrinsic syntax, expected closing `%`");if(tt==="%"&&et!=="%")throw new $SyntaxError("invalid intrinsic syntax, expected opening `%`");var rt=[];return $replace(_,rePropName,function(it,st,at,ct){rt[rt.length]=at?$replace(ct,reEscapeChar,"$1"):st||it}),rt},getBaseIntrinsic=function _e(_,et){var tt=_,rt;if(hasOwn(LEGACY_ALIASES,tt)&&(rt=LEGACY_ALIASES[tt],tt="%"+rt[0]+"%"),hasOwn(INTRINSICS,tt)){var it=INTRINSICS[tt];if(it===needsEval&&(it=doEval(tt)),typeof it>"u"&&!et)throw new $TypeError$3("intrinsic "+_+" exists, but is not available. Please file an issue!");return{alias:rt,name:tt,value:it}}throw new $SyntaxError("intrinsic "+_+" does not exist!")},getIntrinsic=function _e(_,et){if(typeof _!="string"||_.length===0)throw new $TypeError$3("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof et!="boolean")throw new $TypeError$3('"allowMissing" argument must be a boolean');if($exec(/^%?[^%]*%?$/,_)===null)throw new $SyntaxError("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var tt=stringToPath(_),rt=tt.length>0?tt[0]:"",it=getBaseIntrinsic("%"+rt+"%",et),st=it.name,at=it.value,ct=!1,ut=it.alias;ut&&(rt=ut[0],$spliceApply(tt,$concat([0,1],ut)));for(var dt=1,ot=!0;dt<tt.length;dt+=1){var nt=tt[dt],lt=$strSlice(nt,0,1),ht=$strSlice(nt,-1);if((lt==='"'||lt==="'"||lt==="`"||ht==='"'||ht==="'"||ht==="`")&&lt!==ht)throw new $SyntaxError("property names with quotes must have matching quotes");if((nt==="constructor"||!ot)&&(ct=!0),rt+="."+nt,st="%"+rt+"%",hasOwn(INTRINSICS,st))at=INTRINSICS[st];else if(at!=null){if(!(nt in at)){if(!et)throw new $TypeError$3("base intrinsic for "+_+" exists, but the property is not available.");return}if($gOPD&&dt+1>=tt.length){var ft=$gOPD(at,nt);ot=!!ft,ot&&"get"in ft&&!("originalValue"in ft.get)?at=ft.get:at=at[nt]}else ot=hasOwn(at,nt),at=at[nt];ot&&!ct&&(INTRINSICS[st]=at)}}return at},GetIntrinsic$2=getIntrinsic,callBindBasic=callBindApplyHelpers,$indexOf=callBindBasic([GetIntrinsic$2("%String.prototype.indexOf%")]),callBound$2=function _e(_,et){var tt=GetIntrinsic$2(_,!!et);return typeof tt=="function"&&$indexOf(_,".prototype.")>-1?callBindBasic([tt]):tt},GetIntrinsic$1=getIntrinsic,callBound$1=callBound$2,inspect$2=objectInspect,$TypeError$2=type,$Map=GetIntrinsic$1("%Map%",!0),$mapGet=callBound$1("Map.prototype.get",!0),$mapSet=callBound$1("Map.prototype.set",!0),$mapHas=callBound$1("Map.prototype.has",!0),$mapDelete=callBound$1("Map.prototype.delete",!0),$mapSize=callBound$1("Map.prototype.size",!0),sideChannelMap=!!$Map&&function _e(){var _,et={assert:function(tt){if(!et.has(tt))throw new $TypeError$2("Side channel does not contain "+inspect$2(tt))},delete:function(tt){if(_){var rt=$mapDelete(_,tt);return $mapSize(_)===0&&(_=void 0),rt}return!1},get:function(tt){if(_)return $mapGet(_,tt)},has:function(tt){return _?$mapHas(_,tt):!1},set:function(tt,rt){_||(_=new $Map),$mapSet(_,tt,rt)}};return et},GetIntrinsic=getIntrinsic,callBound=callBound$2,inspect$1=objectInspect,getSideChannelMap$1=sideChannelMap,$TypeError$1=type,$WeakMap=GetIntrinsic("%WeakMap%",!0),$weakMapGet=callBound("WeakMap.prototype.get",!0),$weakMapSet=callBound("WeakMap.prototype.set",!0),$weakMapHas=callBound("WeakMap.prototype.has",!0),$weakMapDelete=callBound("WeakMap.prototype.delete",!0),sideChannelWeakmap=$WeakMap?function _e(){var _,et,tt={assert:function(rt){if(!tt.has(rt))throw new $TypeError$1("Side channel does not contain "+inspect$1(rt))},delete:function(rt){if($WeakMap&&rt&&(typeof rt=="object"||typeof rt=="function")){if(_)return $weakMapDelete(_,rt)}else if(getSideChannelMap$1&&et)return et.delete(rt);return!1},get:function(rt){return $WeakMap&&rt&&(typeof rt=="object"||typeof rt=="function")&&_?$weakMapGet(_,rt):et&&et.get(rt)},has:function(rt){return $WeakMap&&rt&&(typeof rt=="object"||typeof rt=="function")&&_?$weakMapHas(_,rt):!!et&&et.has(rt)},set:function(rt,it){$WeakMap&&rt&&(typeof rt=="object"||typeof rt=="function")?(_||(_=new $WeakMap),$weakMapSet(_,rt,it)):getSideChannelMap$1&&(et||(et=getSideChannelMap$1()),et.set(rt,it))}};return tt}:getSideChannelMap$1,$TypeError=type,inspect=objectInspect,getSideChannelList=sideChannelList,getSideChannelMap=sideChannelMap,getSideChannelWeakMap=sideChannelWeakmap,makeChannel=getSideChannelWeakMap||getSideChannelMap||getSideChannelList,sideChannel=function _e(){var _,et={assert:function(tt){if(!et.has(tt))throw new $TypeError("Side channel does not contain "+inspect(tt))},delete:function(tt){return!!_&&_.delete(tt)},get:function(tt){return _&&_.get(tt)},has:function(tt){return!!_&&_.has(tt)},set:function(tt,rt){_||(_=makeChannel()),_.set(tt,rt)}};return et},replace=String.prototype.replace,percentTwenties=/%20/g,Format={RFC1738:"RFC1738",RFC3986:"RFC3986"},formats$4={default:Format.RFC3986,formatters:{RFC1738:function(_e){return replace.call(_e,percentTwenties,"+")},RFC3986:function(_e){return String(_e)}},RFC1738:Format.RFC1738,RFC3986:Format.RFC3986},formats$3=formats$4,has$2=Object.prototype.hasOwnProperty,isArray$2=Array.isArray,hexTable=function(){for(var _e=[],_=0;_<256;++_)_e.push("%"+((_<16?"0":"")+_.toString(16)).toUpperCase());return _e}(),compactQueue=function _e(_){for(;_.length>1;){var et=_.pop(),tt=et.obj[et.prop];if(isArray$2(tt)){for(var rt=[],it=0;it<tt.length;++it)typeof tt[it]<"u"&&rt.push(tt[it]);et.obj[et.prop]=rt}}},arrayToObject=function _e(_,et){for(var tt=et&&et.plainObjects?{__proto__:null}:{},rt=0;rt<_.length;++rt)typeof _[rt]<"u"&&(tt[rt]=_[rt]);return tt},merge=function _e(_,et,tt){if(!et)return _;if(typeof et!="object"&&typeof et!="function"){if(isArray$2(_))_.push(et);else if(_&&typeof _=="object")(tt&&(tt.plainObjects||tt.allowPrototypes)||!has$2.call(Object.prototype,et))&&(_[et]=!0);else return[_,et];return _}if(!_||typeof _!="object")return[_].concat(et);var rt=_;return isArray$2(_)&&!isArray$2(et)&&(rt=arrayToObject(_,tt)),isArray$2(_)&&isArray$2(et)?(et.forEach(function(it,st){if(has$2.call(_,st)){var at=_[st];at&&typeof at=="object"&&it&&typeof it=="object"?_[st]=_e(at,it,tt):_.push(it)}else _[st]=it}),_):Object.keys(et).reduce(function(it,st){var at=et[st];return has$2.call(it,st)?it[st]=_e(it[st],at,tt):it[st]=at,it},rt)},assign=function _e(_,et){return Object.keys(et).reduce(function(tt,rt){return tt[rt]=et[rt],tt},_)},decode=function(_e,_,et){var tt=_e.replace(/\+/g," ");if(et==="iso-8859-1")return tt.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(tt)}catch{return tt}},limit=1024,encode=function _e(_,et,tt,rt,it){if(_.length===0)return _;var st=_;if(typeof _=="symbol"?st=Symbol.prototype.toString.call(_):typeof _!="string"&&(st=String(_)),tt==="iso-8859-1")return escape(st).replace(/%u[0-9a-f]{4}/gi,function(lt){return"%26%23"+parseInt(lt.slice(2),16)+"%3B"});for(var at="",ct=0;ct<st.length;ct+=limit){for(var ut=st.length>=limit?st.slice(ct,ct+limit):st,dt=[],ot=0;ot<ut.length;++ot){var nt=ut.charCodeAt(ot);if(nt===45||nt===46||nt===95||nt===126||nt>=48&&nt<=57||nt>=65&&nt<=90||nt>=97&&nt<=122||it===formats$3.RFC1738&&(nt===40||nt===41)){dt[dt.length]=ut.charAt(ot);continue}if(nt<128){dt[dt.length]=hexTable[nt];continue}if(nt<2048){dt[dt.length]=hexTable[192|nt>>6]+hexTable[128|nt&63];continue}if(nt<55296||nt>=57344){dt[dt.length]=hexTable[224|nt>>12]+hexTable[128|nt>>6&63]+hexTable[128|nt&63];continue}ot+=1,nt=65536+((nt&1023)<<10|ut.charCodeAt(ot)&1023),dt[dt.length]=hexTable[240|nt>>18]+hexTable[128|nt>>12&63]+hexTable[128|nt>>6&63]+hexTable[128|nt&63]}at+=dt.join("")}return at},compact=function _e(_){for(var et=[{obj:{o:_},prop:"o"}],tt=[],rt=0;rt<et.length;++rt)for(var it=et[rt],st=it.obj[it.prop],at=Object.keys(st),ct=0;ct<at.length;++ct){var ut=at[ct],dt=st[ut];typeof dt=="object"&&dt!==null&&tt.indexOf(dt)===-1&&(et.push({obj:st,prop:ut}),tt.push(dt))}return compactQueue(et),_},isRegExp=function _e(_){return Object.prototype.toString.call(_)==="[object RegExp]"},isBuffer=function _e(_){return!_||typeof _!="object"?!1:!!(_.constructor&&_.constructor.isBuffer&&_.constructor.isBuffer(_))},combine=function _e(_,et){return[].concat(_,et)},maybeMap=function _e(_,et){if(isArray$2(_)){for(var tt=[],rt=0;rt<_.length;rt+=1)tt.push(et(_[rt]));return tt}return et(_)},utils$2={arrayToObject,assign,combine,compact,decode,encode,isBuffer,isRegExp,maybeMap,merge},getSideChannel=sideChannel,utils$1=utils$2,formats$2=formats$4,has$1=Object.prototype.hasOwnProperty,arrayPrefixGenerators={brackets:function _e(_){return _+"[]"},comma:"comma",indices:function _e(_,et){return _+"["+et+"]"},repeat:function _e(_){return _}},isArray$1=Array.isArray,push=Array.prototype.push,pushToArray=function(_e,_){push.apply(_e,isArray$1(_)?_:[_])},toISO=Date.prototype.toISOString,defaultFormat=formats$2.default,defaults$1={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:utils$1.encode,encodeValuesOnly:!1,filter:void 0,format:defaultFormat,formatter:formats$2.formatters[defaultFormat],indices:!1,serializeDate:function _e(_){return toISO.call(_)},skipNulls:!1,strictNullHandling:!1},isNonNullishPrimitive=function _e(_){return typeof _=="string"||typeof _=="number"||typeof _=="boolean"||typeof _=="symbol"||typeof _=="bigint"},sentinel={},stringify$1=function _e(_,et,tt,rt,it,st,at,ct,ut,dt,ot,nt,lt,ht,ft,gt,mt,yt){for(var bt=_,_t=yt,vt=0,xt=!1;(_t=_t.get(sentinel))!==void 0&&!xt;){var wt=_t.get(_);if(vt+=1,typeof wt<"u"){if(wt===vt)throw new RangeError("Cyclic object value");xt=!0}typeof _t.get(sentinel)>"u"&&(vt=0)}if(typeof dt=="function"?bt=dt(et,bt):bt instanceof Date?bt=lt(bt):tt==="comma"&&isArray$1(bt)&&(bt=utils$1.maybeMap(bt,function(Ut){return Ut instanceof Date?lt(Ut):Ut})),bt===null){if(st)return ut&&!gt?ut(et,defaults$1.encoder,mt,"key",ht):et;bt=""}if(isNonNullishPrimitive(bt)||utils$1.isBuffer(bt)){if(ut){var Tt=gt?et:ut(et,defaults$1.encoder,mt,"key",ht);return[ft(Tt)+"="+ft(ut(bt,defaults$1.encoder,mt,"value",ht))]}return[ft(et)+"="+ft(String(bt))]}var St=[];if(typeof bt>"u")return St;var Et;if(tt==="comma"&&isArray$1(bt))gt&&ut&&(bt=utils$1.maybeMap(bt,ut)),Et=[{value:bt.length>0?bt.join(",")||null:void 0}];else if(isArray$1(dt))Et=dt;else{var Ot=Object.keys(bt);Et=ot?Ot.sort(ot):Ot}var Rt=ct?String(et).replace(/\./g,"%2E"):String(et),Pt=rt&&isArray$1(bt)&&bt.length===1?Rt+"[]":Rt;if(it&&isArray$1(bt)&&bt.length===0)return Pt+"[]";for(var Mt=0;Mt<Et.length;++Mt){var $t=Et[Mt],kt=typeof $t=="object"&&$t&&typeof $t.value<"u"?$t.value:bt[$t];if(!(at&&kt===null)){var Lt=nt&&ct?String($t).replace(/\./g,"%2E"):String($t),Nt=isArray$1(bt)?typeof tt=="function"?tt(Pt,Lt):Pt:Pt+(nt?"."+Lt:"["+Lt+"]");yt.set(_,vt);var zt=getSideChannel();zt.set(sentinel,yt),pushToArray(St,_e(kt,Nt,tt,rt,it,st,at,ct,tt==="comma"&&gt&&isArray$1(bt)?null:ut,dt,ot,nt,lt,ht,ft,gt,mt,zt))}}return St},normalizeStringifyOptions=function _e(_){if(!_)return defaults$1;if(typeof _.allowEmptyArrays<"u"&&typeof _.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof _.encodeDotInKeys<"u"&&typeof _.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(_.encoder!==null&&typeof _.encoder<"u"&&typeof _.encoder!="function")throw new TypeError("Encoder has to be a function.");var et=_.charset||defaults$1.charset;if(typeof _.charset<"u"&&_.charset!=="utf-8"&&_.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var tt=formats$2.default;if(typeof _.format<"u"){if(!has$1.call(formats$2.formatters,_.format))throw new TypeError("Unknown format option provided.");tt=_.format}var rt=formats$2.formatters[tt],it=defaults$1.filter;(typeof _.filter=="function"||isArray$1(_.filter))&&(it=_.filter);var st;if(_.arrayFormat in arrayPrefixGenerators?st=_.arrayFormat:"indices"in _?st=_.indices?"indices":"repeat":st=defaults$1.arrayFormat,"commaRoundTrip"in _&&typeof _.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var at=typeof _.allowDots>"u"?_.encodeDotInKeys===!0?!0:defaults$1.allowDots:!!_.allowDots;return{addQueryPrefix:typeof _.addQueryPrefix=="boolean"?_.addQueryPrefix:defaults$1.addQueryPrefix,allowDots:at,allowEmptyArrays:typeof _.allowEmptyArrays=="boolean"?!!_.allowEmptyArrays:defaults$1.allowEmptyArrays,arrayFormat:st,charset:et,charsetSentinel:typeof _.charsetSentinel=="boolean"?_.charsetSentinel:defaults$1.charsetSentinel,commaRoundTrip:!!_.commaRoundTrip,delimiter:typeof _.delimiter>"u"?defaults$1.delimiter:_.delimiter,encode:typeof _.encode=="boolean"?_.encode:defaults$1.encode,encodeDotInKeys:typeof _.encodeDotInKeys=="boolean"?_.encodeDotInKeys:defaults$1.encodeDotInKeys,encoder:typeof _.encoder=="function"?_.encoder:defaults$1.encoder,encodeValuesOnly:typeof _.encodeValuesOnly=="boolean"?_.encodeValuesOnly:defaults$1.encodeValuesOnly,filter:it,format:tt,formatter:rt,serializeDate:typeof _.serializeDate=="function"?_.serializeDate:defaults$1.serializeDate,skipNulls:typeof _.skipNulls=="boolean"?_.skipNulls:defaults$1.skipNulls,sort:typeof _.sort=="function"?_.sort:null,strictNullHandling:typeof _.strictNullHandling=="boolean"?_.strictNullHandling:defaults$1.strictNullHandling}},stringify_1=function(_e,_){var et=_e,tt=normalizeStringifyOptions(_),rt,it;typeof tt.filter=="function"?(it=tt.filter,et=it("",et)):isArray$1(tt.filter)&&(it=tt.filter,rt=it);var st=[];if(typeof et!="object"||et===null)return"";var at=arrayPrefixGenerators[tt.arrayFormat],ct=at==="comma"&&tt.commaRoundTrip;rt||(rt=Object.keys(et)),tt.sort&&rt.sort(tt.sort);for(var ut=getSideChannel(),dt=0;dt<rt.length;++dt){var ot=rt[dt],nt=et[ot];tt.skipNulls&&nt===null||pushToArray(st,stringify$1(nt,ot,at,ct,tt.allowEmptyArrays,tt.strictNullHandling,tt.skipNulls,tt.encodeDotInKeys,tt.encode?tt.encoder:null,tt.filter,tt.sort,tt.allowDots,tt.serializeDate,tt.format,tt.formatter,tt.encodeValuesOnly,tt.charset,ut))}var lt=st.join(tt.delimiter),ht=tt.addQueryPrefix===!0?"?":"";return tt.charsetSentinel&&(tt.charset==="iso-8859-1"?ht+="utf8=%26%2310003%3B&":ht+="utf8=%E2%9C%93&"),lt.length>0?ht+lt:""},utils=utils$2,has=Object.prototype.hasOwnProperty,isArray=Array.isArray,defaults={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:utils.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},interpretNumericEntities=function(_e){return _e.replace(/&#(\d+);/g,function(_,et){return String.fromCharCode(parseInt(et,10))})},parseArrayValue=function(_e,_,et){if(_e&&typeof _e=="string"&&_.comma&&_e.indexOf(",")>-1)return _e.split(",");if(_.throwOnLimitExceeded&&et>=_.arrayLimit)throw new RangeError("Array limit exceeded. Only "+_.arrayLimit+" element"+(_.arrayLimit===1?"":"s")+" allowed in an array.");return _e},isoSentinel="utf8=%26%2310003%3B",charsetSentinel="utf8=%E2%9C%93",parseValues=function _e(_,et){var tt={__proto__:null},rt=et.ignoreQueryPrefix?_.replace(/^\?/,""):_;rt=rt.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var it=et.parameterLimit===1/0?void 0:et.parameterLimit,st=rt.split(et.delimiter,et.throwOnLimitExceeded?it+1:it);if(et.throwOnLimitExceeded&&st.length>it)throw new RangeError("Parameter limit exceeded. Only "+it+" parameter"+(it===1?"":"s")+" allowed.");var at=-1,ct,ut=et.charset;if(et.charsetSentinel)for(ct=0;ct<st.length;++ct)st[ct].indexOf("utf8=")===0&&(st[ct]===charsetSentinel?ut="utf-8":st[ct]===isoSentinel&&(ut="iso-8859-1"),at=ct,ct=st.length);for(ct=0;ct<st.length;++ct)if(ct!==at){var dt=st[ct],ot=dt.indexOf("]="),nt=ot===-1?dt.indexOf("="):ot+1,lt,ht;nt===-1?(lt=et.decoder(dt,defaults.decoder,ut,"key"),ht=et.strictNullHandling?null:""):(lt=et.decoder(dt.slice(0,nt),defaults.decoder,ut,"key"),ht=utils.maybeMap(parseArrayValue(dt.slice(nt+1),et,isArray(tt[lt])?tt[lt].length:0),function(gt){return et.decoder(gt,defaults.decoder,ut,"value")})),ht&&et.interpretNumericEntities&&ut==="iso-8859-1"&&(ht=interpretNumericEntities(String(ht))),dt.indexOf("[]=")>-1&&(ht=isArray(ht)?[ht]:ht);var ft=has.call(tt,lt);ft&&et.duplicates==="combine"?tt[lt]=utils.combine(tt[lt],ht):(!ft||et.duplicates==="last")&&(tt[lt]=ht)}return tt},parseObject=function(_e,_,et,tt){var rt=0;if(_e.length>0&&_e[_e.length-1]==="[]"){var it=_e.slice(0,-1).join("");rt=Array.isArray(_)&&_[it]?_[it].length:0}for(var st=tt?_:parseArrayValue(_,et,rt),at=_e.length-1;at>=0;--at){var ct,ut=_e[at];if(ut==="[]"&&et.parseArrays)ct=et.allowEmptyArrays&&(st===""||et.strictNullHandling&&st===null)?[]:utils.combine([],st);else{ct=et.plainObjects?{__proto__:null}:{};var dt=ut.charAt(0)==="["&&ut.charAt(ut.length-1)==="]"?ut.slice(1,-1):ut,ot=et.decodeDotInKeys?dt.replace(/%2E/g,"."):dt,nt=parseInt(ot,10);!et.parseArrays&&ot===""?ct={0:st}:!isNaN(nt)&&ut!==ot&&String(nt)===ot&&nt>=0&&et.parseArrays&&nt<=et.arrayLimit?(ct=[],ct[nt]=st):ot!=="__proto__"&&(ct[ot]=st)}st=ct}return st},parseKeys=function _e(_,et,tt,rt){if(_){var it=tt.allowDots?_.replace(/\.([^.[]+)/g,"[$1]"):_,st=/(\[[^[\]]*])/,at=/(\[[^[\]]*])/g,ct=tt.depth>0&&st.exec(it),ut=ct?it.slice(0,ct.index):it,dt=[];if(ut){if(!tt.plainObjects&&has.call(Object.prototype,ut)&&!tt.allowPrototypes)return;dt.push(ut)}for(var ot=0;tt.depth>0&&(ct=at.exec(it))!==null&&ot<tt.depth;){if(ot+=1,!tt.plainObjects&&has.call(Object.prototype,ct[1].slice(1,-1))&&!tt.allowPrototypes)return;dt.push(ct[1])}if(ct){if(tt.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+tt.depth+" and strictDepth is true");dt.push("["+it.slice(ct.index)+"]")}return parseObject(dt,et,tt,rt)}},normalizeParseOptions=function _e(_){if(!_)return defaults;if(typeof _.allowEmptyArrays<"u"&&typeof _.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof _.decodeDotInKeys<"u"&&typeof _.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(_.decoder!==null&&typeof _.decoder<"u"&&typeof _.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof _.charset<"u"&&_.charset!=="utf-8"&&_.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof _.throwOnLimitExceeded<"u"&&typeof _.throwOnLimitExceeded!="boolean")throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var et=typeof _.charset>"u"?defaults.charset:_.charset,tt=typeof _.duplicates>"u"?defaults.duplicates:_.duplicates;if(tt!=="combine"&&tt!=="first"&&tt!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var rt=typeof _.allowDots>"u"?_.decodeDotInKeys===!0?!0:defaults.allowDots:!!_.allowDots;return{allowDots:rt,allowEmptyArrays:typeof _.allowEmptyArrays=="boolean"?!!_.allowEmptyArrays:defaults.allowEmptyArrays,allowPrototypes:typeof _.allowPrototypes=="boolean"?_.allowPrototypes:defaults.allowPrototypes,allowSparse:typeof _.allowSparse=="boolean"?_.allowSparse:defaults.allowSparse,arrayLimit:typeof _.arrayLimit=="number"?_.arrayLimit:defaults.arrayLimit,charset:et,charsetSentinel:typeof _.charsetSentinel=="boolean"?_.charsetSentinel:defaults.charsetSentinel,comma:typeof _.comma=="boolean"?_.comma:defaults.comma,decodeDotInKeys:typeof _.decodeDotInKeys=="boolean"?_.decodeDotInKeys:defaults.decodeDotInKeys,decoder:typeof _.decoder=="function"?_.decoder:defaults.decoder,delimiter:typeof _.delimiter=="string"||utils.isRegExp(_.delimiter)?_.delimiter:defaults.delimiter,depth:typeof _.depth=="number"||_.depth===!1?+_.depth:defaults.depth,duplicates:tt,ignoreQueryPrefix:_.ignoreQueryPrefix===!0,interpretNumericEntities:typeof _.interpretNumericEntities=="boolean"?_.interpretNumericEntities:defaults.interpretNumericEntities,parameterLimit:typeof _.parameterLimit=="number"?_.parameterLimit:defaults.parameterLimit,parseArrays:_.parseArrays!==!1,plainObjects:typeof _.plainObjects=="boolean"?_.plainObjects:defaults.plainObjects,strictDepth:typeof _.strictDepth=="boolean"?!!_.strictDepth:defaults.strictDepth,strictNullHandling:typeof _.strictNullHandling=="boolean"?_.strictNullHandling:defaults.strictNullHandling,throwOnLimitExceeded:typeof _.throwOnLimitExceeded=="boolean"?_.throwOnLimitExceeded:!1}},parse$2=function(_e,_){var et=normalizeParseOptions(_);if(_e===""||_e===null||typeof _e>"u")return et.plainObjects?{__proto__:null}:{};for(var tt=typeof _e=="string"?parseValues(_e,et):_e,rt=et.plainObjects?{__proto__:null}:{},it=Object.keys(tt),st=0;st<it.length;++st){var at=it[st],ct=parseKeys(at,tt[at],et,typeof _e=="string");rt=utils.merge(rt,ct,et)}return et.allowSparse===!0?rt:utils.compact(rt)},stringify=stringify_1,parse$1=parse$2,formats$1=formats$4,lib={formats:formats$1,parse:parse$1,stringify},punycode=punycodeExports;function Url(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var protocolPattern=/^([a-z0-9.+-]+:)/i,portPattern=/:[0-9]*$/,simplePathPattern=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,delims=["<",">",'"',"`"," ","\r",`
`,"	"],unwise=["{","}","|","\\","^","`"].concat(delims),autoEscape=["'"].concat(unwise),nonHostChars=["%","/","?",";","#"].concat(autoEscape),hostEndingChars=["/","?","#"],hostnameMaxLen=255,hostnamePartPattern=/^[+a-z0-9A-Z_-]{0,63}$/,hostnamePartStart=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,unsafeProtocol={javascript:!0,"javascript:":!0},hostlessProtocol={javascript:!0,"javascript:":!0},slashedProtocol={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},querystring=lib;function urlParse(_e,_,et){if(_e&&typeof _e=="object"&&_e instanceof Url)return _e;var tt=new Url;return tt.parse(_e,_,et),tt}Url.prototype.parse=function(_e,_,et){if(typeof _e!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof _e);var tt=_e.indexOf("?"),rt=tt!==-1&&tt<_e.indexOf("#")?"?":"#",it=_e.split(rt),st=/\\/g;it[0]=it[0].replace(st,"/"),_e=it.join(rt);var at=_e;if(at=at.trim(),!et&&_e.split("#").length===1){var ct=simplePathPattern.exec(at);if(ct)return this.path=at,this.href=at,this.pathname=ct[1],ct[2]?(this.search=ct[2],_?this.query=querystring.parse(this.search.substr(1)):this.query=this.search.substr(1)):_&&(this.search="",this.query={}),this}var ut=protocolPattern.exec(at);if(ut){ut=ut[0];var dt=ut.toLowerCase();this.protocol=dt,at=at.substr(ut.length)}if(et||ut||at.match(/^\/\/[^@/]+@[^@/]+/)){var ot=at.substr(0,2)==="//";ot&&!(ut&&hostlessProtocol[ut])&&(at=at.substr(2),this.slashes=!0)}if(!hostlessProtocol[ut]&&(ot||ut&&!slashedProtocol[ut])){for(var nt=-1,lt=0;lt<hostEndingChars.length;lt++){var ht=at.indexOf(hostEndingChars[lt]);ht!==-1&&(nt===-1||ht<nt)&&(nt=ht)}var ft,gt;nt===-1?gt=at.lastIndexOf("@"):gt=at.lastIndexOf("@",nt),gt!==-1&&(ft=at.slice(0,gt),at=at.slice(gt+1),this.auth=decodeURIComponent(ft)),nt=-1;for(var lt=0;lt<nonHostChars.length;lt++){var ht=at.indexOf(nonHostChars[lt]);ht!==-1&&(nt===-1||ht<nt)&&(nt=ht)}nt===-1&&(nt=at.length),this.host=at.slice(0,nt),at=at.slice(nt),this.parseHost(),this.hostname=this.hostname||"";var mt=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!mt)for(var yt=this.hostname.split(/\./),lt=0,bt=yt.length;lt<bt;lt++){var _t=yt[lt];if(_t&&!_t.match(hostnamePartPattern)){for(var vt="",xt=0,wt=_t.length;xt<wt;xt++)_t.charCodeAt(xt)>127?vt+="x":vt+=_t[xt];if(!vt.match(hostnamePartPattern)){var Tt=yt.slice(0,lt),St=yt.slice(lt+1),Et=_t.match(hostnamePartStart);Et&&(Tt.push(Et[1]),St.unshift(Et[2])),St.length&&(at="/"+St.join(".")+at),this.hostname=Tt.join(".");break}}}this.hostname.length>hostnameMaxLen?this.hostname="":this.hostname=this.hostname.toLowerCase(),mt||(this.hostname=punycode.toASCII(this.hostname));var Ot=this.port?":"+this.port:"",Rt=this.hostname||"";this.host=Rt+Ot,this.href+=this.host,mt&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),at[0]!=="/"&&(at="/"+at))}if(!unsafeProtocol[dt])for(var lt=0,bt=autoEscape.length;lt<bt;lt++){var Pt=autoEscape[lt];if(at.indexOf(Pt)!==-1){var Mt=encodeURIComponent(Pt);Mt===Pt&&(Mt=escape(Pt)),at=at.split(Pt).join(Mt)}}var $t=at.indexOf("#");$t!==-1&&(this.hash=at.substr($t),at=at.slice(0,$t));var kt=at.indexOf("?");if(kt!==-1?(this.search=at.substr(kt),this.query=at.substr(kt+1),_&&(this.query=querystring.parse(this.query)),at=at.slice(0,kt)):_&&(this.search="",this.query={}),at&&(this.pathname=at),slashedProtocol[dt]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var Ot=this.pathname||"",Lt=this.search||"";this.path=Ot+Lt}return this.href=this.format(),this};function urlFormat(_e){return typeof _e=="string"&&(_e=urlParse(_e)),_e instanceof Url?_e.format():Url.prototype.format.call(_e)}Url.prototype.format=function(){var _e=this.auth||"";_e&&(_e=encodeURIComponent(_e),_e=_e.replace(/%3A/i,":"),_e+="@");var _=this.protocol||"",et=this.pathname||"",tt=this.hash||"",rt=!1,it="";this.host?rt=_e+this.host:this.hostname&&(rt=_e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(rt+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(it=querystring.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var st=this.search||it&&"?"+it||"";return _&&_.substr(-1)!==":"&&(_+=":"),this.slashes||(!_||slashedProtocol[_])&&rt!==!1?(rt="//"+(rt||""),et&&et.charAt(0)!=="/"&&(et="/"+et)):rt||(rt=""),tt&&tt.charAt(0)!=="#"&&(tt="#"+tt),st&&st.charAt(0)!=="?"&&(st="?"+st),et=et.replace(/[?#]/g,function(at){return encodeURIComponent(at)}),st=st.replace("#","%23"),_+rt+et+st+tt};function urlResolve(_e,_){return urlParse(_e,!1,!0).resolve(_)}Url.prototype.resolve=function(_e){return this.resolveObject(urlParse(_e,!1,!0)).format()};Url.prototype.resolveObject=function(_e){if(typeof _e=="string"){var _=new Url;_.parse(_e,!1,!0),_e=_}for(var et=new Url,tt=Object.keys(this),rt=0;rt<tt.length;rt++){var it=tt[rt];et[it]=this[it]}if(et.hash=_e.hash,_e.href==="")return et.href=et.format(),et;if(_e.slashes&&!_e.protocol){for(var st=Object.keys(_e),at=0;at<st.length;at++){var ct=st[at];ct!=="protocol"&&(et[ct]=_e[ct])}return slashedProtocol[et.protocol]&&et.hostname&&!et.pathname&&(et.pathname="/",et.path=et.pathname),et.href=et.format(),et}if(_e.protocol&&_e.protocol!==et.protocol){if(!slashedProtocol[_e.protocol]){for(var ut=Object.keys(_e),dt=0;dt<ut.length;dt++){var ot=ut[dt];et[ot]=_e[ot]}return et.href=et.format(),et}if(et.protocol=_e.protocol,!_e.host&&!hostlessProtocol[_e.protocol]){for(var bt=(_e.pathname||"").split("/");bt.length&&!(_e.host=bt.shift()););_e.host||(_e.host=""),_e.hostname||(_e.hostname=""),bt[0]!==""&&bt.unshift(""),bt.length<2&&bt.unshift(""),et.pathname=bt.join("/")}else et.pathname=_e.pathname;if(et.search=_e.search,et.query=_e.query,et.host=_e.host||"",et.auth=_e.auth,et.hostname=_e.hostname||_e.host,et.port=_e.port,et.pathname||et.search){var nt=et.pathname||"",lt=et.search||"";et.path=nt+lt}return et.slashes=et.slashes||_e.slashes,et.href=et.format(),et}var ht=et.pathname&&et.pathname.charAt(0)==="/",ft=_e.host||_e.pathname&&_e.pathname.charAt(0)==="/",gt=ft||ht||et.host&&_e.pathname,mt=gt,yt=et.pathname&&et.pathname.split("/")||[],bt=_e.pathname&&_e.pathname.split("/")||[],_t=et.protocol&&!slashedProtocol[et.protocol];if(_t&&(et.hostname="",et.port=null,et.host&&(yt[0]===""?yt[0]=et.host:yt.unshift(et.host)),et.host="",_e.protocol&&(_e.hostname=null,_e.port=null,_e.host&&(bt[0]===""?bt[0]=_e.host:bt.unshift(_e.host)),_e.host=null),gt=gt&&(bt[0]===""||yt[0]==="")),ft)et.host=_e.host||_e.host===""?_e.host:et.host,et.hostname=_e.hostname||_e.hostname===""?_e.hostname:et.hostname,et.search=_e.search,et.query=_e.query,yt=bt;else if(bt.length)yt||(yt=[]),yt.pop(),yt=yt.concat(bt),et.search=_e.search,et.query=_e.query;else if(_e.search!=null){if(_t){et.host=yt.shift(),et.hostname=et.host;var vt=et.host&&et.host.indexOf("@")>0?et.host.split("@"):!1;vt&&(et.auth=vt.shift(),et.hostname=vt.shift(),et.host=et.hostname)}return et.search=_e.search,et.query=_e.query,(et.pathname!==null||et.search!==null)&&(et.path=(et.pathname?et.pathname:"")+(et.search?et.search:"")),et.href=et.format(),et}if(!yt.length)return et.pathname=null,et.search?et.path="/"+et.search:et.path=null,et.href=et.format(),et;for(var xt=yt.slice(-1)[0],wt=(et.host||_e.host||yt.length>1)&&(xt==="."||xt==="..")||xt==="",Tt=0,St=yt.length;St>=0;St--)xt=yt[St],xt==="."?yt.splice(St,1):xt===".."?(yt.splice(St,1),Tt++):Tt&&(yt.splice(St,1),Tt--);if(!gt&&!mt)for(;Tt--;Tt)yt.unshift("..");gt&&yt[0]!==""&&(!yt[0]||yt[0].charAt(0)!=="/")&&yt.unshift(""),wt&&yt.join("/").substr(-1)!=="/"&&yt.push("");var Et=yt[0]===""||yt[0]&&yt[0].charAt(0)==="/";if(_t){et.hostname=Et?"":yt.length?yt.shift():"",et.host=et.hostname;var vt=et.host&&et.host.indexOf("@")>0?et.host.split("@"):!1;vt&&(et.auth=vt.shift(),et.hostname=vt.shift(),et.host=et.hostname)}return gt=gt||et.host&&yt.length,gt&&!Et&&yt.unshift(""),yt.length>0?et.pathname=yt.join("/"):(et.pathname=null,et.path=null),(et.pathname!==null||et.search!==null)&&(et.path=(et.pathname?et.pathname:"")+(et.search?et.search:"")),et.auth=_e.auth||et.auth,et.slashes=et.slashes||_e.slashes,et.href=et.format(),et};Url.prototype.parseHost=function(){var _e=this.host,_=portPattern.exec(_e);_&&(_=_[0],_!==":"&&(this.port=_.substr(1)),_e=_e.substr(0,_e.length-_.length)),_e&&(this.hostname=_e)};var parse=urlParse,resolve=urlResolve,format=urlFormat;const warnings={};function deprecation(_e,_,et=3){if(warnings[_])return;let tt=new Error().stack;typeof tt>"u"?console.warn("PixiJS Deprecation Warning: ",`${_}
Deprecated since v${_e}`):(tt=tt.split(`
`).splice(et).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${_}
Deprecated since v${_e}`),console.warn(tt),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${_}
Deprecated since v${_e}`),console.warn(tt))),warnings[_]=!0}const url={get parse(){return deprecation("7.3.0","utils.url.parse is deprecated, use native URL API instead."),parse},get format(){return deprecation("7.3.0","utils.url.format is deprecated, use native URL API instead."),format},get resolve(){return deprecation("7.3.0","utils.url.resolve is deprecated, use native URL API instead."),resolve}};function assertPath(_e){if(typeof _e!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(_e)}`)}function removeUrlParams(_e){return _e.split("?")[0].split("#")[0]}function escapeRegExp(_e){return _e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function replaceAll(_e,_,et){return _e.replace(new RegExp(escapeRegExp(_),"g"),et)}function normalizeStringPosix(_e,_){let et="",tt=0,rt=-1,it=0,st=-1;for(let at=0;at<=_e.length;++at){if(at<_e.length)st=_e.charCodeAt(at);else{if(st===47)break;st=47}if(st===47){if(!(rt===at-1||it===1))if(rt!==at-1&&it===2){if(et.length<2||tt!==2||et.charCodeAt(et.length-1)!==46||et.charCodeAt(et.length-2)!==46){if(et.length>2){const ct=et.lastIndexOf("/");if(ct!==et.length-1){ct===-1?(et="",tt=0):(et=et.slice(0,ct),tt=et.length-1-et.lastIndexOf("/")),rt=at,it=0;continue}}else if(et.length===2||et.length===1){et="",tt=0,rt=at,it=0;continue}}}else et.length>0?et+=`/${_e.slice(rt+1,at)}`:et=_e.slice(rt+1,at),tt=at-rt-1;rt=at,it=0}else st===46&&it!==-1?++it:it=-1}return et}const path={toPosix(_e){return replaceAll(_e,"\\","/")},isUrl(_e){return/^https?:/.test(this.toPosix(_e))},isDataUrl(_e){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(_e)},isBlobUrl(_e){return _e.startsWith("blob:")},hasProtocol(_e){return/^[^/:]+:/.test(this.toPosix(_e))},getProtocol(_e){assertPath(_e),_e=this.toPosix(_e);const _=/^file:\/\/\//.exec(_e);if(_)return _[0];const et=/^[^/:]+:\/{0,2}/.exec(_e);return et?et[0]:""},toAbsolute(_e,_,et){if(assertPath(_e),this.isDataUrl(_e)||this.isBlobUrl(_e))return _e;const tt=removeUrlParams(this.toPosix(_??settings.ADAPTER.getBaseUrl())),rt=removeUrlParams(this.toPosix(et??this.rootname(tt)));return _e=this.toPosix(_e),_e.startsWith("/")?path.join(rt,_e.slice(1)):this.isAbsolute(_e)?_e:this.join(tt,_e)},normalize(_e){if(assertPath(_e),_e.length===0)return".";if(this.isDataUrl(_e)||this.isBlobUrl(_e))return _e;_e=this.toPosix(_e);let _="";const et=_e.startsWith("/");this.hasProtocol(_e)&&(_=this.rootname(_e),_e=_e.slice(_.length));const tt=_e.endsWith("/");return _e=normalizeStringPosix(_e),_e.length>0&&tt&&(_e+="/"),et?`/${_e}`:_+_e},isAbsolute(_e){return assertPath(_e),_e=this.toPosix(_e),this.hasProtocol(_e)?!0:_e.startsWith("/")},join(..._e){if(_e.length===0)return".";let _;for(let et=0;et<_e.length;++et){const tt=_e[et];if(assertPath(tt),tt.length>0)if(_===void 0)_=tt;else{const rt=_e[et-1]??"";this.joinExtensions.includes(this.extname(rt).toLowerCase())?_+=`/../${tt}`:_+=`/${tt}`}}return _===void 0?".":this.normalize(_)},dirname(_e){if(assertPath(_e),_e.length===0)return".";_e=this.toPosix(_e);let _=_e.charCodeAt(0);const et=_===47;let tt=-1,rt=!0;const it=this.getProtocol(_e),st=_e;_e=_e.slice(it.length);for(let at=_e.length-1;at>=1;--at)if(_=_e.charCodeAt(at),_===47){if(!rt){tt=at;break}}else rt=!1;return tt===-1?et?"/":this.isUrl(st)?it+_e:it:et&&tt===1?"//":it+_e.slice(0,tt)},rootname(_e){assertPath(_e),_e=this.toPosix(_e);let _="";if(_e.startsWith("/")?_="/":_=this.getProtocol(_e),this.isUrl(_e)){const et=_e.indexOf("/",_.length);et!==-1?_=_e.slice(0,et):_=_e,_.endsWith("/")||(_+="/")}return _},basename(_e,_){assertPath(_e),_&&assertPath(_),_e=removeUrlParams(this.toPosix(_e));let et=0,tt=-1,rt=!0,it;if(_!==void 0&&_.length>0&&_.length<=_e.length){if(_.length===_e.length&&_===_e)return"";let st=_.length-1,at=-1;for(it=_e.length-1;it>=0;--it){const ct=_e.charCodeAt(it);if(ct===47){if(!rt){et=it+1;break}}else at===-1&&(rt=!1,at=it+1),st>=0&&(ct===_.charCodeAt(st)?--st===-1&&(tt=it):(st=-1,tt=at))}return et===tt?tt=at:tt===-1&&(tt=_e.length),_e.slice(et,tt)}for(it=_e.length-1;it>=0;--it)if(_e.charCodeAt(it)===47){if(!rt){et=it+1;break}}else tt===-1&&(rt=!1,tt=it+1);return tt===-1?"":_e.slice(et,tt)},extname(_e){assertPath(_e),_e=removeUrlParams(this.toPosix(_e));let _=-1,et=0,tt=-1,rt=!0,it=0;for(let st=_e.length-1;st>=0;--st){const at=_e.charCodeAt(st);if(at===47){if(!rt){et=st+1;break}continue}tt===-1&&(rt=!1,tt=st+1),at===46?_===-1?_=st:it!==1&&(it=1):_!==-1&&(it=-1)}return _===-1||tt===-1||it===0||it===1&&_===tt-1&&_===et+1?"":_e.slice(_,tt)},parse(_e){assertPath(_e);const _={root:"",dir:"",base:"",ext:"",name:""};if(_e.length===0)return _;_e=removeUrlParams(this.toPosix(_e));let et=_e.charCodeAt(0);const tt=this.isAbsolute(_e);let rt;_.root=this.rootname(_e),tt||this.hasProtocol(_e)?rt=1:rt=0;let it=-1,st=0,at=-1,ct=!0,ut=_e.length-1,dt=0;for(;ut>=rt;--ut){if(et=_e.charCodeAt(ut),et===47){if(!ct){st=ut+1;break}continue}at===-1&&(ct=!1,at=ut+1),et===46?it===-1?it=ut:dt!==1&&(dt=1):it!==-1&&(dt=-1)}return it===-1||at===-1||dt===0||dt===1&&it===at-1&&it===st+1?at!==-1&&(st===0&&tt?_.base=_.name=_e.slice(1,at):_.base=_.name=_e.slice(st,at)):(st===0&&tt?(_.name=_e.slice(1,it),_.base=_e.slice(1,at)):(_.name=_e.slice(st,it),_.base=_e.slice(st,at)),_.ext=_e.slice(it,at)),_.dir=this.dirname(_e),_},sep:"/",delimiter:":",joinExtensions:[".html"]};let promise;async function detectVideoAlphaMode(){return promise??(promise=(async()=>{var it;const _e=document.createElement("canvas").getContext("webgl");if(!_e)return ALPHA_MODES.UNPACK;const _=await new Promise(st=>{const at=document.createElement("video");at.onloadeddata=()=>st(at),at.onerror=()=>st(null),at.autoplay=!1,at.crossOrigin="anonymous",at.preload="auto",at.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",at.load()});if(!_)return ALPHA_MODES.UNPACK;const et=_e.createTexture();_e.bindTexture(_e.TEXTURE_2D,et);const tt=_e.createFramebuffer();_e.bindFramebuffer(_e.FRAMEBUFFER,tt),_e.framebufferTexture2D(_e.FRAMEBUFFER,_e.COLOR_ATTACHMENT0,_e.TEXTURE_2D,et,0),_e.pixelStorei(_e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),_e.pixelStorei(_e.UNPACK_COLORSPACE_CONVERSION_WEBGL,_e.NONE),_e.texImage2D(_e.TEXTURE_2D,0,_e.RGBA,_e.RGBA,_e.UNSIGNED_BYTE,_);const rt=new Uint8Array(4);return _e.readPixels(0,0,1,1,_e.RGBA,_e.UNSIGNED_BYTE,rt),_e.deleteFramebuffer(tt),_e.deleteTexture(et),(it=_e.getExtension("WEBGL_lose_context"))==null||it.loseContext(),rt[0]<=rt[3]?ALPHA_MODES.PMA:ALPHA_MODES.UNPACK})()),promise}let supported;function isWebGLSupported(){return typeof supported>"u"&&(supported=function(){var _;const _e={stencil:!0,failIfMajorPerformanceCaveat:settings.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!settings.ADAPTER.getWebGLRenderingContext())return!1;const et=settings.ADAPTER.createCanvas();let tt=et.getContext("webgl",_e)||et.getContext("experimental-webgl",_e);const rt=!!((_=tt==null?void 0:tt.getContextAttributes())!=null&&_.stencil);if(tt){const it=tt.getExtension("WEBGL_lose_context");it&&it.loseContext()}return tt=null,rt}catch{return!1}}()),supported}var r={grad:.9,turn:360,rad:360/(2*Math.PI)},t=function(_e){return typeof _e=="string"?_e.length>0:typeof _e=="number"},n=function(_e,_,et){return _===void 0&&(_=0),et===void 0&&(et=Math.pow(10,_)),Math.round(et*_e)/et+0},e=function(_e,_,et){return _===void 0&&(_=0),et===void 0&&(et=1),_e>et?et:_e>_?_e:_},u=function(_e){return(_e=isFinite(_e)?_e%360:0)>0?_e:_e+360},a=function(_e){return{r:e(_e.r,0,255),g:e(_e.g,0,255),b:e(_e.b,0,255),a:e(_e.a)}},o=function(_e){return{r:n(_e.r),g:n(_e.g),b:n(_e.b),a:n(_e.a,3)}},i=/^#([0-9a-f]{3,8})$/i,s=function(_e){var _=_e.toString(16);return _.length<2?"0"+_:_},h=function(_e){var _=_e.r,et=_e.g,tt=_e.b,rt=_e.a,it=Math.max(_,et,tt),st=it-Math.min(_,et,tt),at=st?it===_?(et-tt)/st:it===et?2+(tt-_)/st:4+(_-et)/st:0;return{h:60*(at<0?at+6:at),s:it?st/it*100:0,v:it/255*100,a:rt}},b=function(_e){var _=_e.h,et=_e.s,tt=_e.v,rt=_e.a;_=_/360*6,et/=100,tt/=100;var it=Math.floor(_),st=tt*(1-et),at=tt*(1-(_-it)*et),ct=tt*(1-(1-_+it)*et),ut=it%6;return{r:255*[tt,at,st,st,ct,tt][ut],g:255*[ct,tt,tt,at,st,st][ut],b:255*[st,st,ct,tt,tt,at][ut],a:rt}},g=function(_e){return{h:u(_e.h),s:e(_e.s,0,100),l:e(_e.l,0,100),a:e(_e.a)}},d=function(_e){return{h:n(_e.h),s:n(_e.s),l:n(_e.l),a:n(_e.a,3)}},f=function(_e){return b((et=(_=_e).s,{h:_.h,s:(et*=((tt=_.l)<50?tt:100-tt)/100)>0?2*et/(tt+et)*100:0,v:tt+et,a:_.a}));var _,et,tt},c=function(_e){return{h:(_=h(_e)).h,s:(rt=(200-(et=_.s))*(tt=_.v)/100)>0&&rt<200?et*tt/100/(rt<=100?rt:200-rt)*100:0,l:rt/2,a:_.a};var _,et,tt,rt},l=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,p=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,v=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,m=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,y={string:[[function(_e){var _=i.exec(_e);return _?(_e=_[1]).length<=4?{r:parseInt(_e[0]+_e[0],16),g:parseInt(_e[1]+_e[1],16),b:parseInt(_e[2]+_e[2],16),a:_e.length===4?n(parseInt(_e[3]+_e[3],16)/255,2):1}:_e.length===6||_e.length===8?{r:parseInt(_e.substr(0,2),16),g:parseInt(_e.substr(2,2),16),b:parseInt(_e.substr(4,2),16),a:_e.length===8?n(parseInt(_e.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(_e){var _=v.exec(_e)||m.exec(_e);return _?_[2]!==_[4]||_[4]!==_[6]?null:a({r:Number(_[1])/(_[2]?100/255:1),g:Number(_[3])/(_[4]?100/255:1),b:Number(_[5])/(_[6]?100/255:1),a:_[7]===void 0?1:Number(_[7])/(_[8]?100:1)}):null},"rgb"],[function(_e){var _=l.exec(_e)||p.exec(_e);if(!_)return null;var et,tt,rt=g({h:(et=_[1],tt=_[2],tt===void 0&&(tt="deg"),Number(et)*(r[tt]||1)),s:Number(_[3]),l:Number(_[4]),a:_[5]===void 0?1:Number(_[5])/(_[6]?100:1)});return f(rt)},"hsl"]],object:[[function(_e){var _=_e.r,et=_e.g,tt=_e.b,rt=_e.a,it=rt===void 0?1:rt;return t(_)&&t(et)&&t(tt)?a({r:Number(_),g:Number(et),b:Number(tt),a:Number(it)}):null},"rgb"],[function(_e){var _=_e.h,et=_e.s,tt=_e.l,rt=_e.a,it=rt===void 0?1:rt;if(!t(_)||!t(et)||!t(tt))return null;var st=g({h:Number(_),s:Number(et),l:Number(tt),a:Number(it)});return f(st)},"hsl"],[function(_e){var _=_e.h,et=_e.s,tt=_e.v,rt=_e.a,it=rt===void 0?1:rt;if(!t(_)||!t(et)||!t(tt))return null;var st=function(at){return{h:u(at.h),s:e(at.s,0,100),v:e(at.v,0,100),a:e(at.a)}}({h:Number(_),s:Number(et),v:Number(tt),a:Number(it)});return b(st)},"hsv"]]},N=function(_e,_){for(var et=0;et<_.length;et++){var tt=_[et][0](_e);if(tt)return[tt,_[et][1]]}return[null,void 0]},x=function(_e){return typeof _e=="string"?N(_e.trim(),y.string):typeof _e=="object"&&_e!==null?N(_e,y.object):[null,void 0]},M=function(_e,_){var et=c(_e);return{h:et.h,s:e(et.s+100*_,0,100),l:et.l,a:et.a}},H=function(_e){return(299*_e.r+587*_e.g+114*_e.b)/1e3/255},$=function(_e,_){var et=c(_e);return{h:et.h,s:et.s,l:e(et.l+100*_,0,100),a:et.a}},j=function(){function _e(_){this.parsed=x(_)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return _e.prototype.isValid=function(){return this.parsed!==null},_e.prototype.brightness=function(){return n(H(this.rgba),2)},_e.prototype.isDark=function(){return H(this.rgba)<.5},_e.prototype.isLight=function(){return H(this.rgba)>=.5},_e.prototype.toHex=function(){return _=o(this.rgba),et=_.r,tt=_.g,rt=_.b,st=(it=_.a)<1?s(n(255*it)):"","#"+s(et)+s(tt)+s(rt)+st;var _,et,tt,rt,it,st},_e.prototype.toRgb=function(){return o(this.rgba)},_e.prototype.toRgbString=function(){return _=o(this.rgba),et=_.r,tt=_.g,rt=_.b,(it=_.a)<1?"rgba("+et+", "+tt+", "+rt+", "+it+")":"rgb("+et+", "+tt+", "+rt+")";var _,et,tt,rt,it},_e.prototype.toHsl=function(){return d(c(this.rgba))},_e.prototype.toHslString=function(){return _=d(c(this.rgba)),et=_.h,tt=_.s,rt=_.l,(it=_.a)<1?"hsla("+et+", "+tt+"%, "+rt+"%, "+it+")":"hsl("+et+", "+tt+"%, "+rt+"%)";var _,et,tt,rt,it},_e.prototype.toHsv=function(){return _=h(this.rgba),{h:n(_.h),s:n(_.s),v:n(_.v),a:n(_.a,3)};var _},_e.prototype.invert=function(){return w({r:255-(_=this.rgba).r,g:255-_.g,b:255-_.b,a:_.a});var _},_e.prototype.saturate=function(_){return _===void 0&&(_=.1),w(M(this.rgba,_))},_e.prototype.desaturate=function(_){return _===void 0&&(_=.1),w(M(this.rgba,-_))},_e.prototype.grayscale=function(){return w(M(this.rgba,-1))},_e.prototype.lighten=function(_){return _===void 0&&(_=.1),w($(this.rgba,_))},_e.prototype.darken=function(_){return _===void 0&&(_=.1),w($(this.rgba,-_))},_e.prototype.rotate=function(_){return _===void 0&&(_=15),this.hue(this.hue()+_)},_e.prototype.alpha=function(_){return typeof _=="number"?w({r:(et=this.rgba).r,g:et.g,b:et.b,a:_}):n(this.rgba.a,3);var et},_e.prototype.hue=function(_){var et=c(this.rgba);return typeof _=="number"?w({h:_,s:et.s,l:et.l,a:et.a}):n(et.h)},_e.prototype.isEqual=function(_){return this.toHex()===w(_).toHex()},_e}(),w=function(_e){return _e instanceof j?_e:new j(_e)},S=[],k=function(_e){_e.forEach(function(_){S.indexOf(_)<0&&(_(j,y),S.push(_))})};function namesPlugin(_e,_){var et={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},tt={};for(var rt in et)tt[et[rt]]=rt;var it={};_e.prototype.toName=function(st){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var at,ct,ut=tt[this.toHex()];if(ut)return ut;if(st!=null&&st.closest){var dt=this.toRgb(),ot=1/0,nt="black";if(!it.length)for(var lt in et)it[lt]=new _e(et[lt]).toRgb();for(var ht in et){var ft=(at=dt,ct=it[ht],Math.pow(at.r-ct.r,2)+Math.pow(at.g-ct.g,2)+Math.pow(at.b-ct.b,2));ft<ot&&(ot=ft,nt=ht)}return nt}},_.string.push([function(st){var at=st.toLowerCase(),ct=at==="transparent"?"#0000":et[at];return ct?new _e(ct).toRgb():null},"name"])}k([namesPlugin]);const _Color=class Jn{constructor(_=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=_}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(_){return this.value=_,this}set value(_){if(_ instanceof Jn)this._value=this.cloneSource(_._value),this._int=_._int,this._components.set(_._components);else{if(_===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,_))&&(this.normalize(_),this._value=this.cloneSource(_))}}get value(){return this._value}cloneSource(_){return typeof _=="string"||typeof _=="number"||_ instanceof Number||_===null?_:Array.isArray(_)||ArrayBuffer.isView(_)?_.slice(0):typeof _=="object"&&_!==null?{..._}:_}isSourceEqual(_,et){const tt=typeof _;if(tt!==typeof et)return!1;if(tt==="number"||tt==="string"||_ instanceof Number)return _===et;if(Array.isArray(_)&&Array.isArray(et)||ArrayBuffer.isView(_)&&ArrayBuffer.isView(et))return _.length!==et.length?!1:_.every((rt,it)=>rt===et[it]);if(_!==null&&et!==null){const rt=Object.keys(_),it=Object.keys(et);return rt.length!==it.length?!1:rt.every(st=>_[st]===et[st])}return _===et}toRgba(){const[_,et,tt,rt]=this._components;return{r:_,g:et,b:tt,a:rt}}toRgb(){const[_,et,tt]=this._components;return{r:_,g:et,b:tt}}toRgbaString(){const[_,et,tt]=this.toUint8RgbArray();return`rgba(${_},${et},${tt},${this.alpha})`}toUint8RgbArray(_){const[et,tt,rt]=this._components;return _=_??[],_[0]=Math.round(et*255),_[1]=Math.round(tt*255),_[2]=Math.round(rt*255),_}toRgbArray(_){_=_??[];const[et,tt,rt]=this._components;return _[0]=et,_[1]=tt,_[2]=rt,_}toNumber(){return this._int}toLittleEndianNumber(){const _=this._int;return(_>>16)+(_&65280)+((_&255)<<16)}multiply(_){const[et,tt,rt,it]=Jn.temp.setValue(_)._components;return this._components[0]*=et,this._components[1]*=tt,this._components[2]*=rt,this._components[3]*=it,this.refreshInt(),this._value=null,this}premultiply(_,et=!0){return et&&(this._components[0]*=_,this._components[1]*=_,this._components[2]*=_),this._components[3]=_,this.refreshInt(),this._value=null,this}toPremultiplied(_,et=!0){if(_===1)return(255<<24)+this._int;if(_===0)return et?0:this._int;let tt=this._int>>16&255,rt=this._int>>8&255,it=this._int&255;return et&&(tt=tt*_+.5|0,rt=rt*_+.5|0,it=it*_+.5|0),(_*255<<24)+(tt<<16)+(rt<<8)+it}toHex(){const _=this._int.toString(16);return`#${"000000".substring(0,6-_.length)+_}`}toHexa(){const _=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-_.length)+_}setAlpha(_){return this._components[3]=this._clamp(_),this}round(_){const[et,tt,rt]=this._components;return this._components[0]=Math.round(et*_)/_,this._components[1]=Math.round(tt*_)/_,this._components[2]=Math.round(rt*_)/_,this.refreshInt(),this._value=null,this}toArray(_){_=_??[];const[et,tt,rt,it]=this._components;return _[0]=et,_[1]=tt,_[2]=rt,_[3]=it,_}normalize(_){let et,tt,rt,it;if((typeof _=="number"||_ instanceof Number)&&_>=0&&_<=16777215){const st=_;et=(st>>16&255)/255,tt=(st>>8&255)/255,rt=(st&255)/255,it=1}else if((Array.isArray(_)||_ instanceof Float32Array)&&_.length>=3&&_.length<=4)_=this._clamp(_),[et,tt,rt,it=1]=_;else if((_ instanceof Uint8Array||_ instanceof Uint8ClampedArray)&&_.length>=3&&_.length<=4)_=this._clamp(_,0,255),[et,tt,rt,it=255]=_,et/=255,tt/=255,rt/=255,it/=255;else if(typeof _=="string"||typeof _=="object"){if(typeof _=="string"){const at=Jn.HEX_PATTERN.exec(_);at&&(_=`#${at[2]}`)}const st=w(_);st.isValid()&&({r:et,g:tt,b:rt,a:it}=st.rgba,et/=255,tt/=255,rt/=255)}if(et!==void 0)this._components[0]=et,this._components[1]=tt,this._components[2]=rt,this._components[3]=it,this.refreshInt();else throw new Error(`Unable to convert color ${_}`)}refreshInt(){this._clamp(this._components);const[_,et,tt]=this._components;this._int=(_*255<<16)+(et*255<<8)+(tt*255|0)}_clamp(_,et=0,tt=1){return typeof _=="number"?Math.min(Math.max(_,et),tt):(_.forEach((rt,it)=>{_[it]=Math.min(Math.max(rt,et),tt)}),_)}};_Color.shared=new _Color,_Color.temp=new _Color,_Color.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let Color=_Color;function hex2string(_e){return deprecation("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),Color.shared.setValue(_e).toHex()}function rgb2hex(_e){return deprecation("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),Color.shared.setValue(_e).toNumber()}function mapPremultipliedBlendModes(){const _e=[],_=[];for(let tt=0;tt<32;tt++)_e[tt]=tt,_[tt]=tt;_e[BLEND_MODES.NORMAL_NPM]=BLEND_MODES.NORMAL,_e[BLEND_MODES.ADD_NPM]=BLEND_MODES.ADD,_e[BLEND_MODES.SCREEN_NPM]=BLEND_MODES.SCREEN,_[BLEND_MODES.NORMAL]=BLEND_MODES.NORMAL_NPM,_[BLEND_MODES.ADD]=BLEND_MODES.ADD_NPM,_[BLEND_MODES.SCREEN]=BLEND_MODES.SCREEN_NPM;const et=[];return et.push(_),et.push(_e),et}const premultiplyBlendMode=mapPremultipliedBlendModes();function correctBlendMode(_e,_){return premultiplyBlendMode[_?1:0][_e]}function createIndicesForQuads(_e,_=null){const et=_e*6;if(_=_||new Uint16Array(et),_.length!==et)throw new Error(`Out buffer length is incorrect, got ${_.length} and expected ${et}`);for(let tt=0,rt=0;tt<et;tt+=6,rt+=4)_[tt+0]=rt+0,_[tt+1]=rt+1,_[tt+2]=rt+2,_[tt+3]=rt+0,_[tt+4]=rt+2,_[tt+5]=rt+3;return _}function getBufferType(_e){if(_e.BYTES_PER_ELEMENT===4)return _e instanceof Float32Array?"Float32Array":_e instanceof Uint32Array?"Uint32Array":"Int32Array";if(_e.BYTES_PER_ELEMENT===2){if(_e instanceof Uint16Array)return"Uint16Array"}else if(_e.BYTES_PER_ELEMENT===1&&_e instanceof Uint8Array)return"Uint8Array";return null}function nextPow2(_e){return _e+=_e===0?1:0,--_e,_e|=_e>>>1,_e|=_e>>>2,_e|=_e>>>4,_e|=_e>>>8,_e|=_e>>>16,_e+1}function isPow2(_e){return!(_e&_e-1)&&!!_e}function log2(_e){let _=(_e>65535?1:0)<<4;_e>>>=_;let et=(_e>255?1:0)<<3;return _e>>>=et,_|=et,et=(_e>15?1:0)<<2,_e>>>=et,_|=et,et=(_e>3?1:0)<<1,_e>>>=et,_|=et,_|_e>>1}function removeItems(_e,_,et){const tt=_e.length;let rt;if(_>=tt||et===0)return;et=_+et>tt?tt-_:et;const it=tt-et;for(rt=_;rt<it;++rt)_e[rt]=_e[rt+et];_e.length=it}function sign(_e){return _e===0?0:_e<0?-1:1}let nextUid=0;function uid(){return++nextUid}const _BoundingBox=class{constructor(_e,_,et,tt){this.left=_e,this.top=_,this.right=et,this.bottom=tt}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};_BoundingBox.EMPTY=new _BoundingBox(0,0,0,0);let BoundingBox=_BoundingBox;const ProgramCache={},TextureCache=Object.create(null),BaseTextureCache=Object.create(null);function destroyTextureCache(){let _e;for(_e in TextureCache)TextureCache[_e].destroy();for(_e in BaseTextureCache)BaseTextureCache[_e].destroy()}function clearTextureCache(){let _e;for(_e in TextureCache)delete TextureCache[_e];for(_e in BaseTextureCache)delete BaseTextureCache[_e]}class CanvasRenderTarget{constructor(_,et,tt){this._canvas=settings.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=tt||settings.RESOLUTION,this.resize(_,et)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(_,et){this._checkDestroyed(),this._canvas.width=Math.round(_*this.resolution),this._canvas.height=Math.round(et*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(_){this._checkDestroyed(),this._canvas.width=Math.round(_)}get height(){return this._checkDestroyed(),this._canvas.height}set height(_){this._checkDestroyed(),this._canvas.height=Math.round(_)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function checkRow(_e,_,et){for(let tt=0,rt=4*et*_;tt<_;++tt,rt+=4)if(_e[rt+3]!==0)return!1;return!0}function checkColumn(_e,_,et,tt,rt){const it=4*_;for(let st=tt,at=tt*it+4*et;st<=rt;++st,at+=it)if(_e[at+3]!==0)return!1;return!0}function getCanvasBoundingBox(_e){const{width:_,height:et}=_e,tt=_e.getContext("2d",{willReadFrequently:!0});if(tt===null)throw new TypeError("Failed to get canvas 2D context");const rt=tt.getImageData(0,0,_,et).data;let it=0,st=0,at=_-1,ct=et-1;for(;st<et&&checkRow(rt,_,st);)++st;if(st===et)return BoundingBox.EMPTY;for(;checkRow(rt,_,ct);)--ct;for(;checkColumn(rt,_,it,st,ct);)++it;for(;checkColumn(rt,_,at,st,ct);)--at;return++at,++ct,new BoundingBox(it,st,at,ct)}function trimCanvas(_e){const _=getCanvasBoundingBox(_e),{width:et,height:tt}=_;let rt=null;if(!_.isEmpty()){const it=_e.getContext("2d");if(it===null)throw new TypeError("Failed to get canvas 2D context");rt=it.getImageData(_.left,_.top,et,tt)}return{width:et,height:tt,data:rt}}function determineCrossOrigin(_e,_=globalThis.location){if(_e.startsWith("data:"))return"";_=_||globalThis.location;const et=new URL(_e,document.baseURI);return et.hostname!==_.hostname||et.port!==_.port||et.protocol!==_.protocol?"anonymous":""}function getResolutionOfUrl(_e,_=1){var tt;const et=(tt=settings.RETINA_PREFIX)==null?void 0:tt.exec(_e);return et?parseFloat(et[1]):_}var ExtensionType=(_e=>(_e.Renderer="renderer",_e.Application="application",_e.RendererSystem="renderer-webgl-system",_e.RendererPlugin="renderer-webgl-plugin",_e.CanvasRendererSystem="renderer-canvas-system",_e.CanvasRendererPlugin="renderer-canvas-plugin",_e.Asset="asset",_e.LoadParser="load-parser",_e.ResolveParser="resolve-parser",_e.CacheParser="cache-parser",_e.DetectionParser="detection-parser",_e))(ExtensionType||{});const normalizeExtension=_e=>{if(typeof _e=="function"||typeof _e=="object"&&_e.extension){if(!_e.extension)throw new Error("Extension class must have an extension object");_e={...typeof _e.extension!="object"?{type:_e.extension}:_e.extension,ref:_e}}if(typeof _e=="object")_e={..._e};else throw new Error("Invalid extension type");return typeof _e.type=="string"&&(_e.type=[_e.type]),_e},normalizePriority=(_e,_)=>normalizeExtension(_e).priority??_,extensions$1={_addHandlers:{},_removeHandlers:{},_queue:{},remove(..._e){return _e.map(normalizeExtension).forEach(_=>{_.type.forEach(et=>{var tt,rt;return(rt=(tt=this._removeHandlers)[et])==null?void 0:rt.call(tt,_)})}),this},add(..._e){return _e.map(normalizeExtension).forEach(_=>{_.type.forEach(et=>{var it,st;const tt=this._addHandlers,rt=this._queue;tt[et]?(it=tt[et])==null||it.call(tt,_):(rt[et]=rt[et]||[],(st=rt[et])==null||st.push(_))})}),this},handle(_e,_,et){var st;const tt=this._addHandlers,rt=this._removeHandlers;if(tt[_e]||rt[_e])throw new Error(`Extension type ${_e} already has a handler`);tt[_e]=_,rt[_e]=et;const it=this._queue;return it[_e]&&((st=it[_e])==null||st.forEach(at=>_(at)),delete it[_e]),this},handleByMap(_e,_){return this.handle(_e,et=>{et.name&&(_[et.name]=et.ref)},et=>{et.name&&delete _[et.name]})},handleByList(_e,_,et=-1){return this.handle(_e,tt=>{_.includes(tt.ref)||(_.push(tt.ref),_.sort((rt,it)=>normalizePriority(it,et)-normalizePriority(rt,et)))},tt=>{const rt=_.indexOf(tt.ref);rt!==-1&&_.splice(rt,1)})}};class ViewableBuffer{constructor(_){typeof _=="number"?this.rawBinaryData=new ArrayBuffer(_):_ instanceof Uint8Array?this.rawBinaryData=_.buffer:this.rawBinaryData=_,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(_){return this[`${_}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(_){switch(_){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${_} isn't a valid view type`)}}}const fragTemplate$1=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function generateIfTestSrc(_e){let _="";for(let et=0;et<_e;++et)et>0&&(_+=`
else `),et<_e-1&&(_+=`if(test == ${et}.0){}`);return _}function checkMaxIfStatementsInShader(_e,_){if(_e===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const et=_.createShader(_.FRAGMENT_SHADER);for(;;){const tt=fragTemplate$1.replace(/%forloop%/gi,generateIfTestSrc(_e));if(_.shaderSource(et,tt),_.compileShader(et),!_.getShaderParameter(et,_.COMPILE_STATUS))_e=_e/2|0;else break}return _e}const BLEND$1=0,OFFSET$1=1,CULLING$1=2,DEPTH_TEST$1=3,WINDING$1=4,DEPTH_MASK$1=5;class State{constructor(){this.data=0,this.blendMode=BLEND_MODES.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<BLEND$1)}set blend(_){!!(this.data&1<<BLEND$1)!==_&&(this.data^=1<<BLEND$1)}get offsets(){return!!(this.data&1<<OFFSET$1)}set offsets(_){!!(this.data&1<<OFFSET$1)!==_&&(this.data^=1<<OFFSET$1)}get culling(){return!!(this.data&1<<CULLING$1)}set culling(_){!!(this.data&1<<CULLING$1)!==_&&(this.data^=1<<CULLING$1)}get depthTest(){return!!(this.data&1<<DEPTH_TEST$1)}set depthTest(_){!!(this.data&1<<DEPTH_TEST$1)!==_&&(this.data^=1<<DEPTH_TEST$1)}get depthMask(){return!!(this.data&1<<DEPTH_MASK$1)}set depthMask(_){!!(this.data&1<<DEPTH_MASK$1)!==_&&(this.data^=1<<DEPTH_MASK$1)}get clockwiseFrontFace(){return!!(this.data&1<<WINDING$1)}set clockwiseFrontFace(_){!!(this.data&1<<WINDING$1)!==_&&(this.data^=1<<WINDING$1)}get blendMode(){return this._blendMode}set blendMode(_){this.blend=_!==BLEND_MODES.NONE,this._blendMode=_}get polygonOffset(){return this._polygonOffset}set polygonOffset(_){this.offsets=!!_,this._polygonOffset=_}static for2d(){const _=new State;return _.depthTest=!1,_.blend=!0,_}}State.prototype.toString=function(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`};const INSTALLED=[];function autoDetectResource(_e,_){if(!_e)return null;let et="";if(typeof _e=="string"){const tt=/\.(\w{3,4})(?:$|\?|#)/i.exec(_e);tt&&(et=tt[1].toLowerCase())}for(let tt=INSTALLED.length-1;tt>=0;--tt){const rt=INSTALLED[tt];if(rt.test&&rt.test(_e,et))return new rt(_e,_)}throw new Error("Unrecognized source type to auto-detect Resource")}class Runner{constructor(_){this.items=[],this._name=_,this._aliasCount=0}emit(_,et,tt,rt,it,st,at,ct){if(arguments.length>8)throw new Error("max arguments reached");const{name:ut,items:dt}=this;this._aliasCount++;for(let ot=0,nt=dt.length;ot<nt;ot++)dt[ot][ut](_,et,tt,rt,it,st,at,ct);return dt===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(_){return _[this._name]&&(this.ensureNonAliasedItems(),this.remove(_),this.items.push(_)),this}remove(_){const et=this.items.indexOf(_);return et!==-1&&(this.ensureNonAliasedItems(),this.items.splice(et,1)),this}contains(_){return this.items.includes(_)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items.length=0,this._name=""}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(Runner.prototype,{dispatch:{value:Runner.prototype.emit},run:{value:Runner.prototype.emit}});class Resource{constructor(_=0,et=0){this._width=_,this._height=et,this.destroyed=!1,this.internal=!1,this.onResize=new Runner("setRealSize"),this.onUpdate=new Runner("update"),this.onError=new Runner("onError")}bind(_){this.onResize.add(_),this.onUpdate.add(_),this.onError.add(_),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(_){this.onResize.remove(_),this.onUpdate.remove(_),this.onError.remove(_)}resize(_,et){(_!==this._width||et!==this._height)&&(this._width=_,this._height=et,this.onResize.emit(_,et))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(_,et,tt){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(_,et){return!1}}class BufferResource extends Resource{constructor(_,et){const{width:tt,height:rt}=et||{};if(!tt||!rt)throw new Error("BufferResource width or height invalid");super(tt,rt),this.data=_,this.unpackAlignment=et.unpackAlignment??4}upload(_,et,tt){const rt=_.gl;rt.pixelStorei(rt.UNPACK_ALIGNMENT,this.unpackAlignment),rt.pixelStorei(rt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,et.alphaMode===ALPHA_MODES.UNPACK);const it=et.realWidth,st=et.realHeight;return tt.width===it&&tt.height===st?rt.texSubImage2D(et.target,0,0,0,it,st,et.format,tt.type,this.data):(tt.width=it,tt.height=st,rt.texImage2D(et.target,0,tt.internalFormat,it,st,0,et.format,tt.type,this.data)),!0}dispose(){this.data=null}static test(_){return _===null||_ instanceof Int8Array||_ instanceof Uint8Array||_ instanceof Uint8ClampedArray||_ instanceof Int16Array||_ instanceof Uint16Array||_ instanceof Int32Array||_ instanceof Uint32Array||_ instanceof Float32Array}}const defaultBufferOptions={scaleMode:SCALE_MODES.NEAREST,alphaMode:ALPHA_MODES.NPM},_BaseTexture=class xn extends EventEmitter{constructor(_=null,et=null){super(),et=Object.assign({},xn.defaultOptions,et);const{alphaMode:tt,mipmap:rt,anisotropicLevel:it,scaleMode:st,width:at,height:ct,wrapMode:ut,format:dt,type:ot,target:nt,resolution:lt,resourceOptions:ht}=et;_&&!(_ instanceof Resource)&&(_=autoDetectResource(_,ht),_.internal=!0),this.resolution=lt||settings.RESOLUTION,this.width=Math.round((at||0)*this.resolution)/this.resolution,this.height=Math.round((ct||0)*this.resolution)/this.resolution,this._mipmap=rt,this.anisotropicLevel=it,this._wrapMode=ut,this._scaleMode=st,this.format=dt,this.type=ot,this.target=nt,this.alphaMode=tt,this.uid=uid(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=at>0&&ct>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(_)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(_){this._mipmap!==_&&(this._mipmap=_,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(_){this._scaleMode!==_&&(this._scaleMode=_,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(_){this._wrapMode!==_&&(this._wrapMode=_,this.dirtyStyleId++)}setStyle(_,et){let tt;return _!==void 0&&_!==this.scaleMode&&(this.scaleMode=_,tt=!0),et!==void 0&&et!==this.mipmap&&(this.mipmap=et,tt=!0),tt&&this.dirtyStyleId++,this}setSize(_,et,tt){return tt=tt||this.resolution,this.setRealSize(_*tt,et*tt,tt)}setRealSize(_,et,tt){return this.resolution=tt||this.resolution,this.width=Math.round(_)/this.resolution,this.height=Math.round(et)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=isPow2(this.realWidth)&&isPow2(this.realHeight)}setResolution(_){const et=this.resolution;return et===_?this:(this.resolution=_,this.valid&&(this.width=Math.round(this.width*et)/_,this.height=Math.round(this.height*et)/_,this.emit("update",this)),this._refreshPOT(),this)}setResource(_){if(this.resource===_)return this;if(this.resource)throw new Error("Resource can be set only once");return _.bind(this),this.resource=_,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(_){this.emit("error",this,_)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete BaseTextureCache[this.cacheId],delete TextureCache[this.cacheId],this.cacheId=null),this.valid=!1,this.dispose(),xn.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(_,et,tt=settings.STRICT_TEXTURE_CACHE){const rt=typeof _=="string";let it=null;if(rt)it=_;else{if(!_._pixiId){const at=(et==null?void 0:et.pixiIdPrefix)||"pixiid";_._pixiId=`${at}_${uid()}`}it=_._pixiId}let st=BaseTextureCache[it];if(rt&&tt&&!st)throw new Error(`The cacheId "${it}" does not exist in BaseTextureCache.`);return st||(st=new xn(_,et),st.cacheId=it,xn.addToCache(st,it)),st}static fromBuffer(_,et,tt,rt){_=_||new Float32Array(et*tt*4);const it=new BufferResource(_,{width:et,height:tt,...rt==null?void 0:rt.resourceOptions});let st,at;return _ instanceof Float32Array?(st=FORMATS.RGBA,at=TYPES.FLOAT):_ instanceof Int32Array?(st=FORMATS.RGBA_INTEGER,at=TYPES.INT):_ instanceof Uint32Array?(st=FORMATS.RGBA_INTEGER,at=TYPES.UNSIGNED_INT):_ instanceof Int16Array?(st=FORMATS.RGBA_INTEGER,at=TYPES.SHORT):_ instanceof Uint16Array?(st=FORMATS.RGBA_INTEGER,at=TYPES.UNSIGNED_SHORT):_ instanceof Int8Array?(st=FORMATS.RGBA,at=TYPES.BYTE):(st=FORMATS.RGBA,at=TYPES.UNSIGNED_BYTE),it.internal=!0,new xn(it,Object.assign({},defaultBufferOptions,{type:at,format:st},rt))}static addToCache(_,et){et&&(_.textureCacheIds.includes(et)||_.textureCacheIds.push(et),BaseTextureCache[et]&&BaseTextureCache[et]!==_&&console.warn(`BaseTexture added to the cache with an id [${et}] that already had an entry`),BaseTextureCache[et]=_)}static removeFromCache(_){if(typeof _=="string"){const et=BaseTextureCache[_];if(et){const tt=et.textureCacheIds.indexOf(_);return tt>-1&&et.textureCacheIds.splice(tt,1),delete BaseTextureCache[_],et}}else if(_!=null&&_.textureCacheIds){for(let et=0;et<_.textureCacheIds.length;++et)delete BaseTextureCache[_.textureCacheIds[et]];return _.textureCacheIds.length=0,_}return null}};_BaseTexture.defaultOptions={mipmap:MIPMAP_MODES.POW2,anisotropicLevel:0,scaleMode:SCALE_MODES.LINEAR,wrapMode:WRAP_MODES.CLAMP,alphaMode:ALPHA_MODES.UNPACK,target:TARGETS.TEXTURE_2D,format:FORMATS.RGBA,type:TYPES.UNSIGNED_BYTE},_BaseTexture._globalBatch=0;let BaseTexture=_BaseTexture;class BatchDrawCall{constructor(){this.texArray=null,this.blend=0,this.type=DRAW_MODES.TRIANGLES,this.start=0,this.size=0,this.data=null}}let UID$4=0;class Buffer{constructor(_,et=!0,tt=!1){this.data=_||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=tt,this.static=et,this.id=UID$4++,this.disposeRunner=new Runner("disposeBuffer")}update(_){_ instanceof Array&&(_=new Float32Array(_)),this.data=_||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(_){this.type=_?BUFFER_TYPE.ELEMENT_ARRAY_BUFFER:BUFFER_TYPE.ARRAY_BUFFER}get index(){return this.type===BUFFER_TYPE.ELEMENT_ARRAY_BUFFER}static from(_){return _ instanceof Array&&(_=new Float32Array(_)),new Buffer(_)}}class Attribute{constructor(_,et=0,tt=!1,rt=TYPES.FLOAT,it,st,at,ct=1){this.buffer=_,this.size=et,this.normalized=tt,this.type=rt,this.stride=it,this.start=st,this.instance=at,this.divisor=ct}destroy(){this.buffer=null}static from(_,et,tt,rt,it){return new Attribute(_,et,tt,rt,it)}}const map$1={Float32Array,Uint32Array,Int32Array,Uint8Array};function interleaveTypedArrays(_e,_){let et=0,tt=0;const rt={};for(let ct=0;ct<_e.length;ct++)tt+=_[ct],et+=_e[ct].length;const it=new ArrayBuffer(et*4);let st=null,at=0;for(let ct=0;ct<_e.length;ct++){const ut=_[ct],dt=_e[ct],ot=getBufferType(dt);rt[ot]||(rt[ot]=new map$1[ot](it)),st=rt[ot];for(let nt=0;nt<dt.length;nt++){const lt=(nt/ut|0)*tt+at,ht=nt%ut;st[lt+ht]=dt[nt]}at+=ut}return new Float32Array(it)}const byteSizeMap$1={5126:4,5123:2,5121:1};let UID$3=0;const map={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class Geometry{constructor(_=[],et={}){this.buffers=_,this.indexBuffer=null,this.attributes=et,this.glVertexArrayObjects={},this.id=UID$3++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Runner("disposeGeometry"),this.refCount=0}addAttribute(_,et,tt=0,rt=!1,it,st,at,ct=!1){if(!et)throw new Error("You must pass a buffer when creating an attribute");et instanceof Buffer||(et instanceof Array&&(et=new Float32Array(et)),et=new Buffer(et));const ut=_.split("|");if(ut.length>1){for(let ot=0;ot<ut.length;ot++)this.addAttribute(ut[ot],et,tt,rt,it);return this}let dt=this.buffers.indexOf(et);return dt===-1&&(this.buffers.push(et),dt=this.buffers.length-1),this.attributes[_]=new Attribute(dt,tt,rt,it,st,at,ct),this.instanced=this.instanced||ct,this}getAttribute(_){return this.attributes[_]}getBuffer(_){return this.buffers[this.getAttribute(_).buffer]}addIndex(_){return _ instanceof Buffer||(_ instanceof Array&&(_=new Uint16Array(_)),_=new Buffer(_)),_.type=BUFFER_TYPE.ELEMENT_ARRAY_BUFFER,this.indexBuffer=_,this.buffers.includes(_)||this.buffers.push(_),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const _=[],et=[],tt=new Buffer;let rt;for(rt in this.attributes){const it=this.attributes[rt],st=this.buffers[it.buffer];_.push(st.data),et.push(it.size*byteSizeMap$1[it.type]/4),it.buffer=0}for(tt.data=interleaveTypedArrays(_,et),rt=0;rt<this.buffers.length;rt++)this.buffers[rt]!==this.indexBuffer&&this.buffers[rt].destroy();return this.buffers=[tt],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const _ in this.attributes){const et=this.attributes[_];return this.buffers[et.buffer].data.length/(et.stride/4||et.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const _=new Geometry;for(let et=0;et<this.buffers.length;et++)_.buffers[et]=new Buffer(this.buffers[et].data.slice(0));for(const et in this.attributes){const tt=this.attributes[et];_.attributes[et]=new Attribute(tt.buffer,tt.size,tt.normalized,tt.type,tt.stride,tt.start,tt.instance)}return this.indexBuffer&&(_.indexBuffer=_.buffers[this.buffers.indexOf(this.indexBuffer)],_.indexBuffer.type=BUFFER_TYPE.ELEMENT_ARRAY_BUFFER),_}static merge(_){const et=new Geometry,tt=[],rt=[],it=[];let st;for(let at=0;at<_.length;at++){st=_[at];for(let ct=0;ct<st.buffers.length;ct++)rt[ct]=rt[ct]||0,rt[ct]+=st.buffers[ct].data.length,it[ct]=0}for(let at=0;at<st.buffers.length;at++)tt[at]=new map[getBufferType(st.buffers[at].data)](rt[at]),et.buffers[at]=new Buffer(tt[at]);for(let at=0;at<_.length;at++){st=_[at];for(let ct=0;ct<st.buffers.length;ct++)tt[ct].set(st.buffers[ct].data,it[ct]),it[ct]+=st.buffers[ct].data.length}if(et.attributes=st.attributes,st.indexBuffer){et.indexBuffer=et.buffers[st.buffers.indexOf(st.indexBuffer)],et.indexBuffer.type=BUFFER_TYPE.ELEMENT_ARRAY_BUFFER;let at=0,ct=0,ut=0,dt=0;for(let ot=0;ot<st.buffers.length;ot++)if(st.buffers[ot]!==st.indexBuffer){dt=ot;break}for(const ot in st.attributes){const nt=st.attributes[ot];(nt.buffer|0)===dt&&(ct+=nt.size*byteSizeMap$1[nt.type]/4)}for(let ot=0;ot<_.length;ot++){const nt=_[ot].indexBuffer.data;for(let lt=0;lt<nt.length;lt++)et.indexBuffer.data[lt+ut]+=at;at+=_[ot].buffers[dt].data.length/ct,ut+=nt.length}}return et}}class BatchGeometry extends Geometry{constructor(_=!1){super(),this._buffer=new Buffer(null,_,!1),this._indexBuffer=new Buffer(null,_,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,TYPES.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,TYPES.FLOAT).addAttribute("aColor",this._buffer,4,!0,TYPES.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,TYPES.FLOAT).addIndex(this._indexBuffer)}}const PI_2=Math.PI*2,RAD_TO_DEG=180/Math.PI,DEG_TO_RAD=Math.PI/180;var SHAPES=(_e=>(_e[_e.POLY=0]="POLY",_e[_e.RECT=1]="RECT",_e[_e.CIRC=2]="CIRC",_e[_e.ELIP=3]="ELIP",_e[_e.RREC=4]="RREC",_e))(SHAPES||{});class Point{constructor(_=0,et=0){this.x=0,this.y=0,this.x=_,this.y=et}clone(){return new Point(this.x,this.y)}copyFrom(_){return this.set(_.x,_.y),this}copyTo(_){return _.set(this.x,this.y),_}equals(_){return _.x===this.x&&_.y===this.y}set(_=0,et=_){return this.x=_,this.y=et,this}}Point.prototype.toString=function(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`};const tempPoints$1=[new Point,new Point,new Point,new Point];class Rectangle{constructor(_=0,et=0,tt=0,rt=0){this.x=Number(_),this.y=Number(et),this.width=Number(tt),this.height=Number(rt),this.type=SHAPES.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new Rectangle(0,0,0,0)}clone(){return new Rectangle(this.x,this.y,this.width,this.height)}copyFrom(_){return this.x=_.x,this.y=_.y,this.width=_.width,this.height=_.height,this}copyTo(_){return _.x=this.x,_.y=this.y,_.width=this.width,_.height=this.height,_}contains(_,et){return this.width<=0||this.height<=0?!1:_>=this.x&&_<this.x+this.width&&et>=this.y&&et<this.y+this.height}intersects(_,et){if(!et){const Tt=this.x<_.x?_.x:this.x;if((this.right>_.right?_.right:this.right)<=Tt)return!1;const St=this.y<_.y?_.y:this.y;return(this.bottom>_.bottom?_.bottom:this.bottom)>St}const tt=this.left,rt=this.right,it=this.top,st=this.bottom;if(rt<=tt||st<=it)return!1;const at=tempPoints$1[0].set(_.left,_.top),ct=tempPoints$1[1].set(_.left,_.bottom),ut=tempPoints$1[2].set(_.right,_.top),dt=tempPoints$1[3].set(_.right,_.bottom);if(ut.x<=at.x||ct.y<=at.y)return!1;const ot=Math.sign(et.a*et.d-et.b*et.c);if(ot===0||(et.apply(at,at),et.apply(ct,ct),et.apply(ut,ut),et.apply(dt,dt),Math.max(at.x,ct.x,ut.x,dt.x)<=tt||Math.min(at.x,ct.x,ut.x,dt.x)>=rt||Math.max(at.y,ct.y,ut.y,dt.y)<=it||Math.min(at.y,ct.y,ut.y,dt.y)>=st))return!1;const nt=ot*(ct.y-at.y),lt=ot*(at.x-ct.x),ht=nt*tt+lt*it,ft=nt*rt+lt*it,gt=nt*tt+lt*st,mt=nt*rt+lt*st;if(Math.max(ht,ft,gt,mt)<=nt*at.x+lt*at.y||Math.min(ht,ft,gt,mt)>=nt*dt.x+lt*dt.y)return!1;const yt=ot*(at.y-ut.y),bt=ot*(ut.x-at.x),_t=yt*tt+bt*it,vt=yt*rt+bt*it,xt=yt*tt+bt*st,wt=yt*rt+bt*st;return!(Math.max(_t,vt,xt,wt)<=yt*at.x+bt*at.y||Math.min(_t,vt,xt,wt)>=yt*dt.x+bt*dt.y)}pad(_=0,et=_){return this.x-=_,this.y-=et,this.width+=_*2,this.height+=et*2,this}fit(_){const et=Math.max(this.x,_.x),tt=Math.min(this.x+this.width,_.x+_.width),rt=Math.max(this.y,_.y),it=Math.min(this.y+this.height,_.y+_.height);return this.x=et,this.width=Math.max(tt-et,0),this.y=rt,this.height=Math.max(it-rt,0),this}ceil(_=1,et=.001){const tt=Math.ceil((this.x+this.width-et)*_)/_,rt=Math.ceil((this.y+this.height-et)*_)/_;return this.x=Math.floor((this.x+et)*_)/_,this.y=Math.floor((this.y+et)*_)/_,this.width=tt-this.x,this.height=rt-this.y,this}enlarge(_){const et=Math.min(this.x,_.x),tt=Math.max(this.x+this.width,_.x+_.width),rt=Math.min(this.y,_.y),it=Math.max(this.y+this.height,_.y+_.height);return this.x=et,this.width=tt-et,this.y=rt,this.height=it-rt,this}}Rectangle.prototype.toString=function(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class Circle{constructor(_=0,et=0,tt=0){this.x=_,this.y=et,this.radius=tt,this.type=SHAPES.CIRC}clone(){return new Circle(this.x,this.y,this.radius)}contains(_,et){if(this.radius<=0)return!1;const tt=this.radius*this.radius;let rt=this.x-_,it=this.y-et;return rt*=rt,it*=it,rt+it<=tt}getBounds(){return new Rectangle(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}}Circle.prototype.toString=function(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`};class Ellipse{constructor(_=0,et=0,tt=0,rt=0){this.x=_,this.y=et,this.width=tt,this.height=rt,this.type=SHAPES.ELIP}clone(){return new Ellipse(this.x,this.y,this.width,this.height)}contains(_,et){if(this.width<=0||this.height<=0)return!1;let tt=(_-this.x)/this.width,rt=(et-this.y)/this.height;return tt*=tt,rt*=rt,tt+rt<=1}getBounds(){return new Rectangle(this.x-this.width,this.y-this.height,this.width,this.height)}}Ellipse.prototype.toString=function(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class Polygon{constructor(..._){let et=Array.isArray(_[0])?_[0]:_;if(typeof et[0]!="number"){const tt=[];for(let rt=0,it=et.length;rt<it;rt++)tt.push(et[rt].x,et[rt].y);et=tt}this.points=et,this.type=SHAPES.POLY,this.closeStroke=!0}clone(){const _=this.points.slice(),et=new Polygon(_);return et.closeStroke=this.closeStroke,et}contains(_,et){let tt=!1;const rt=this.points.length/2;for(let it=0,st=rt-1;it<rt;st=it++){const at=this.points[it*2],ct=this.points[it*2+1],ut=this.points[st*2],dt=this.points[st*2+1];ct>et!=dt>et&&_<(ut-at)*((et-ct)/(dt-ct))+at&&(tt=!tt)}return tt}}Polygon.prototype.toString=function(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((_e,_)=>`${_e}, ${_}`,"")}]`};class RoundedRectangle{constructor(_=0,et=0,tt=0,rt=0,it=20){this.x=_,this.y=et,this.width=tt,this.height=rt,this.radius=it,this.type=SHAPES.RREC}clone(){return new RoundedRectangle(this.x,this.y,this.width,this.height,this.radius)}contains(_,et){if(this.width<=0||this.height<=0)return!1;if(_>=this.x&&_<=this.x+this.width&&et>=this.y&&et<=this.y+this.height){const tt=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(et>=this.y+tt&&et<=this.y+this.height-tt||_>=this.x+tt&&_<=this.x+this.width-tt)return!0;let rt=_-(this.x+tt),it=et-(this.y+tt);const st=tt*tt;if(rt*rt+it*it<=st||(rt=_-(this.x+this.width-tt),rt*rt+it*it<=st)||(it=et-(this.y+this.height-tt),rt*rt+it*it<=st)||(rt=_-(this.x+tt),rt*rt+it*it<=st))return!0}return!1}}RoundedRectangle.prototype.toString=function(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`};class Matrix{constructor(_=1,et=0,tt=0,rt=1,it=0,st=0){this.array=null,this.a=_,this.b=et,this.c=tt,this.d=rt,this.tx=it,this.ty=st}fromArray(_){this.a=_[0],this.b=_[1],this.c=_[3],this.d=_[4],this.tx=_[2],this.ty=_[5]}set(_,et,tt,rt,it,st){return this.a=_,this.b=et,this.c=tt,this.d=rt,this.tx=it,this.ty=st,this}toArray(_,et){this.array||(this.array=new Float32Array(9));const tt=et||this.array;return _?(tt[0]=this.a,tt[1]=this.b,tt[2]=0,tt[3]=this.c,tt[4]=this.d,tt[5]=0,tt[6]=this.tx,tt[7]=this.ty,tt[8]=1):(tt[0]=this.a,tt[1]=this.c,tt[2]=this.tx,tt[3]=this.b,tt[4]=this.d,tt[5]=this.ty,tt[6]=0,tt[7]=0,tt[8]=1),tt}apply(_,et){et=et||new Point;const tt=_.x,rt=_.y;return et.x=this.a*tt+this.c*rt+this.tx,et.y=this.b*tt+this.d*rt+this.ty,et}applyInverse(_,et){et=et||new Point;const tt=1/(this.a*this.d+this.c*-this.b),rt=_.x,it=_.y;return et.x=this.d*tt*rt+-this.c*tt*it+(this.ty*this.c-this.tx*this.d)*tt,et.y=this.a*tt*it+-this.b*tt*rt+(-this.ty*this.a+this.tx*this.b)*tt,et}translate(_,et){return this.tx+=_,this.ty+=et,this}scale(_,et){return this.a*=_,this.d*=et,this.c*=_,this.b*=et,this.tx*=_,this.ty*=et,this}rotate(_){const et=Math.cos(_),tt=Math.sin(_),rt=this.a,it=this.c,st=this.tx;return this.a=rt*et-this.b*tt,this.b=rt*tt+this.b*et,this.c=it*et-this.d*tt,this.d=it*tt+this.d*et,this.tx=st*et-this.ty*tt,this.ty=st*tt+this.ty*et,this}append(_){const et=this.a,tt=this.b,rt=this.c,it=this.d;return this.a=_.a*et+_.b*rt,this.b=_.a*tt+_.b*it,this.c=_.c*et+_.d*rt,this.d=_.c*tt+_.d*it,this.tx=_.tx*et+_.ty*rt+this.tx,this.ty=_.tx*tt+_.ty*it+this.ty,this}setTransform(_,et,tt,rt,it,st,at,ct,ut){return this.a=Math.cos(at+ut)*it,this.b=Math.sin(at+ut)*it,this.c=-Math.sin(at-ct)*st,this.d=Math.cos(at-ct)*st,this.tx=_-(tt*this.a+rt*this.c),this.ty=et-(tt*this.b+rt*this.d),this}prepend(_){const et=this.tx;if(_.a!==1||_.b!==0||_.c!==0||_.d!==1){const tt=this.a,rt=this.c;this.a=tt*_.a+this.b*_.c,this.b=tt*_.b+this.b*_.d,this.c=rt*_.a+this.d*_.c,this.d=rt*_.b+this.d*_.d}return this.tx=et*_.a+this.ty*_.c+_.tx,this.ty=et*_.b+this.ty*_.d+_.ty,this}decompose(_){const et=this.a,tt=this.b,rt=this.c,it=this.d,st=_.pivot,at=-Math.atan2(-rt,it),ct=Math.atan2(tt,et),ut=Math.abs(at+ct);return ut<1e-5||Math.abs(PI_2-ut)<1e-5?(_.rotation=ct,_.skew.x=_.skew.y=0):(_.rotation=0,_.skew.x=at,_.skew.y=ct),_.scale.x=Math.sqrt(et*et+tt*tt),_.scale.y=Math.sqrt(rt*rt+it*it),_.position.x=this.tx+(st.x*et+st.y*rt),_.position.y=this.ty+(st.x*tt+st.y*it),_}invert(){const _=this.a,et=this.b,tt=this.c,rt=this.d,it=this.tx,st=_*rt-et*tt;return this.a=rt/st,this.b=-et/st,this.c=-tt/st,this.d=_/st,this.tx=(tt*this.ty-rt*it)/st,this.ty=-(_*this.ty-et*it)/st,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const _=new Matrix;return _.a=this.a,_.b=this.b,_.c=this.c,_.d=this.d,_.tx=this.tx,_.ty=this.ty,_}copyTo(_){return _.a=this.a,_.b=this.b,_.c=this.c,_.d=this.d,_.tx=this.tx,_.ty=this.ty,_}copyFrom(_){return this.a=_.a,this.b=_.b,this.c=_.c,this.d=_.d,this.tx=_.tx,this.ty=_.ty,this}static get IDENTITY(){return new Matrix}static get TEMP_MATRIX(){return new Matrix}}Matrix.prototype.toString=function(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`};const ux=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],uy=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],vx=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],vy=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],rotationCayley=[],rotationMatrices=[],signum=Math.sign;function init(){for(let _e=0;_e<16;_e++){const _=[];rotationCayley.push(_);for(let et=0;et<16;et++){const tt=signum(ux[_e]*ux[et]+vx[_e]*uy[et]),rt=signum(uy[_e]*ux[et]+vy[_e]*uy[et]),it=signum(ux[_e]*vx[et]+vx[_e]*vy[et]),st=signum(uy[_e]*vx[et]+vy[_e]*vy[et]);for(let at=0;at<16;at++)if(ux[at]===tt&&uy[at]===rt&&vx[at]===it&&vy[at]===st){_.push(at);break}}}for(let _e=0;_e<16;_e++){const _=new Matrix;_.set(ux[_e],uy[_e],vx[_e],vy[_e],0,0),rotationMatrices.push(_)}}init();const groupD8={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:_e=>ux[_e],uY:_e=>uy[_e],vX:_e=>vx[_e],vY:_e=>vy[_e],inv:_e=>_e&8?_e&15:-_e&7,add:(_e,_)=>rotationCayley[_e][_],sub:(_e,_)=>rotationCayley[_e][groupD8.inv(_)],rotate180:_e=>_e^4,isVertical:_e=>(_e&3)===2,byDirection:(_e,_)=>Math.abs(_e)*2<=Math.abs(_)?_>=0?groupD8.S:groupD8.N:Math.abs(_)*2<=Math.abs(_e)?_e>0?groupD8.E:groupD8.W:_>0?_e>0?groupD8.SE:groupD8.SW:_e>0?groupD8.NE:groupD8.NW,matrixAppendRotationInv:(_e,_,et=0,tt=0)=>{const rt=rotationMatrices[groupD8.inv(_)];rt.tx=et,rt.ty=tt,_e.append(rt)}};class ObservablePoint{constructor(_,et,tt=0,rt=0){this._x=tt,this._y=rt,this.cb=_,this.scope=et}clone(_=this.cb,et=this.scope){return new ObservablePoint(_,et,this._x,this._y)}set(_=0,et=_){return(this._x!==_||this._y!==et)&&(this._x=_,this._y=et,this.cb.call(this.scope)),this}copyFrom(_){return(this._x!==_.x||this._y!==_.y)&&(this._x=_.x,this._y=_.y,this.cb.call(this.scope)),this}copyTo(_){return _.set(this._x,this._y),_}equals(_){return _.x===this._x&&_.y===this._y}get x(){return this._x}set x(_){this._x!==_&&(this._x=_,this.cb.call(this.scope))}get y(){return this._y}set y(_){this._y!==_&&(this._y=_,this.cb.call(this.scope))}}ObservablePoint.prototype.toString=function(){return`[@pixi/math:ObservablePoint x=${this.x} y=${this.y} scope=${this.scope}]`};const _Transform=class{constructor(){this.worldTransform=new Matrix,this.localTransform=new Matrix,this.position=new ObservablePoint(this.onChange,this,0,0),this.scale=new ObservablePoint(this.onChange,this,1,1),this.pivot=new ObservablePoint(this.onChange,this,0,0),this.skew=new ObservablePoint(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}updateLocalTransform(){const _e=this.localTransform;this._localID!==this._currentLocalID&&(_e.a=this._cx*this.scale.x,_e.b=this._sx*this.scale.x,_e.c=this._cy*this.scale.y,_e.d=this._sy*this.scale.y,_e.tx=this.position.x-(this.pivot.x*_e.a+this.pivot.y*_e.c),_e.ty=this.position.y-(this.pivot.x*_e.b+this.pivot.y*_e.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(_e){const _=this.localTransform;if(this._localID!==this._currentLocalID&&(_.a=this._cx*this.scale.x,_.b=this._sx*this.scale.x,_.c=this._cy*this.scale.y,_.d=this._sy*this.scale.y,_.tx=this.position.x-(this.pivot.x*_.a+this.pivot.y*_.c),_.ty=this.position.y-(this.pivot.x*_.b+this.pivot.y*_.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==_e._worldID){const et=_e.worldTransform,tt=this.worldTransform;tt.a=_.a*et.a+_.b*et.c,tt.b=_.a*et.b+_.b*et.d,tt.c=_.c*et.a+_.d*et.c,tt.d=_.c*et.b+_.d*et.d,tt.tx=_.tx*et.a+_.ty*et.c+et.tx,tt.ty=_.tx*et.b+_.ty*et.d+et.ty,this._parentID=_e._worldID,this._worldID++}}setFromMatrix(_e){_e.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(_e){this._rotation!==_e&&(this._rotation=_e,this.updateSkew())}};_Transform.IDENTITY=new _Transform;let Transform=_Transform;Transform.prototype.toString=function(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`};var defaultFragment$2=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,defaultVertex$3=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function compileShader(_e,_,et){const tt=_e.createShader(_);return _e.shaderSource(tt,et),_e.compileShader(tt),tt}function booleanArray(_e){const _=new Array(_e);for(let et=0;et<_.length;et++)_[et]=!1;return _}function defaultValue(_e,_){switch(_e){case"float":return 0;case"vec2":return new Float32Array(2*_);case"vec3":return new Float32Array(3*_);case"vec4":return new Float32Array(4*_);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*_);case"ivec3":return new Int32Array(3*_);case"ivec4":return new Int32Array(4*_);case"uvec2":return new Uint32Array(2*_);case"uvec3":return new Uint32Array(3*_);case"uvec4":return new Uint32Array(4*_);case"bool":return!1;case"bvec2":return booleanArray(2*_);case"bvec3":return booleanArray(3*_);case"bvec4":return booleanArray(4*_);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const uniformParsers=[{test:_e=>_e.type==="float"&&_e.size===1&&!_e.isArray,code:_e=>`
            if(uv["${_e}"] !== ud["${_e}"].value)
            {
                ud["${_e}"].value = uv["${_e}"]
                gl.uniform1f(ud["${_e}"].location, uv["${_e}"])
            }
            `},{test:(_e,_)=>(_e.type==="sampler2D"||_e.type==="samplerCube"||_e.type==="sampler2DArray")&&_e.size===1&&!_e.isArray&&(_==null||_.castToBaseTexture!==void 0),code:_e=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${_e}"], t);

            if(ud["${_e}"].value !== t)
            {
                ud["${_e}"].value = t;
                gl.uniform1i(ud["${_e}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(_e,_)=>_e.type==="mat3"&&_e.size===1&&!_e.isArray&&_.a!==void 0,code:_e=>`
            gl.uniformMatrix3fv(ud["${_e}"].location, false, uv["${_e}"].toArray(true));
            `,codeUbo:_e=>`
                var ${_e}_matrix = uv.${_e}.toArray(true);

                data[offset] = ${_e}_matrix[0];
                data[offset+1] = ${_e}_matrix[1];
                data[offset+2] = ${_e}_matrix[2];
        
                data[offset + 4] = ${_e}_matrix[3];
                data[offset + 5] = ${_e}_matrix[4];
                data[offset + 6] = ${_e}_matrix[5];
        
                data[offset + 8] = ${_e}_matrix[6];
                data[offset + 9] = ${_e}_matrix[7];
                data[offset + 10] = ${_e}_matrix[8];
            `},{test:(_e,_)=>_e.type==="vec2"&&_e.size===1&&!_e.isArray&&_.x!==void 0,code:_e=>`
                cv = ud["${_e}"].value;
                v = uv["${_e}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${_e}"].location, v.x, v.y);
                }`,codeUbo:_e=>`
                v = uv.${_e};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:_e=>_e.type==="vec2"&&_e.size===1&&!_e.isArray,code:_e=>`
                cv = ud["${_e}"].value;
                v = uv["${_e}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${_e}"].location, v[0], v[1]);
                }
            `},{test:(_e,_)=>_e.type==="vec4"&&_e.size===1&&!_e.isArray&&_.width!==void 0,code:_e=>`
                cv = ud["${_e}"].value;
                v = uv["${_e}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${_e}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:_e=>`
                    v = uv.${_e};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(_e,_)=>_e.type==="vec4"&&_e.size===1&&!_e.isArray&&_.red!==void 0,code:_e=>`
                cv = ud["${_e}"].value;
                v = uv["${_e}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${_e}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:_e=>`
                    v = uv.${_e};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(_e,_)=>_e.type==="vec3"&&_e.size===1&&!_e.isArray&&_.red!==void 0,code:_e=>`
                cv = ud["${_e}"].value;
                v = uv["${_e}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${_e}"].location, v.red, v.green, v.blue)
                }`,codeUbo:_e=>`
                    v = uv.${_e};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:_e=>_e.type==="vec4"&&_e.size===1&&!_e.isArray,code:_e=>`
                cv = ud["${_e}"].value;
                v = uv["${_e}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${_e}"].location, v[0], v[1], v[2], v[3])
                }`}],GLSL_TO_SINGLE_SETTERS_CACHED={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},GLSL_TO_ARRAY_SETTERS={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function generateUniformsSync(_e,_){var tt;const et=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const rt in _e.uniforms){const it=_[rt];if(!it){((tt=_e.uniforms[rt])==null?void 0:tt.group)===!0&&(_e.uniforms[rt].ubo?et.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${rt}, '${rt}');
                    `):et.push(`
                        renderer.shader.syncUniformGroup(uv.${rt}, syncData);
                    `));continue}const st=_e.uniforms[rt];let at=!1;for(let ct=0;ct<uniformParsers.length;ct++)if(uniformParsers[ct].test(it,st)){et.push(uniformParsers[ct].code(rt,st)),at=!0;break}if(!at){const ct=(it.size===1&&!it.isArray?GLSL_TO_SINGLE_SETTERS_CACHED:GLSL_TO_ARRAY_SETTERS)[it.type].replace("location",`ud["${rt}"].location`);et.push(`
            cu = ud["${rt}"];
            cv = cu.value;
            v = uv["${rt}"];
            ${ct};`)}}return new Function("ud","uv","renderer","syncData",et.join(`
`))}const unknownContext={};let context=unknownContext;function getTestContext(){if(context===unknownContext||context!=null&&context.isContextLost()){const _e=settings.ADAPTER.createCanvas();let _;settings.PREFER_ENV>=ENV.WEBGL2&&(_=_e.getContext("webgl2",{})),_||(_=_e.getContext("webgl",{})||_e.getContext("experimental-webgl",{}),_?_.getExtension("WEBGL_draw_buffers"):_=null),context=_}return context}let maxFragmentPrecision;function getMaxFragmentPrecision(){if(!maxFragmentPrecision){maxFragmentPrecision=PRECISION.MEDIUM;const _e=getTestContext();if(_e&&_e.getShaderPrecisionFormat){const _=_e.getShaderPrecisionFormat(_e.FRAGMENT_SHADER,_e.HIGH_FLOAT);_&&(maxFragmentPrecision=_.precision?PRECISION.HIGH:PRECISION.MEDIUM)}}return maxFragmentPrecision}function logPrettyShaderError(_e,_){const et=_e.getShaderSource(_).split(`
`).map((ut,dt)=>`${dt}: ${ut}`),tt=_e.getShaderInfoLog(_),rt=tt.split(`
`),it={},st=rt.map(ut=>parseFloat(ut.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(ut=>ut&&!it[ut]?(it[ut]=!0,!0):!1),at=[""];st.forEach(ut=>{et[ut-1]=`%c${et[ut-1]}%c`,at.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const ct=et.join(`
`);at[0]=ct,console.error(tt),console.groupCollapsed("click to view full shader code"),console.warn(...at),console.groupEnd()}function logProgramError(_e,_,et,tt){_e.getProgramParameter(_,_e.LINK_STATUS)||(_e.getShaderParameter(et,_e.COMPILE_STATUS)||logPrettyShaderError(_e,et),_e.getShaderParameter(tt,_e.COMPILE_STATUS)||logPrettyShaderError(_e,tt),console.error("PixiJS Error: Could not initialize shader."),_e.getProgramInfoLog(_)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",_e.getProgramInfoLog(_)))}const GLSL_TO_SIZE={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function mapSize(_e){return GLSL_TO_SIZE[_e]}let GL_TABLE=null;const GL_TO_GLSL_TYPES={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function mapType(_e,_){if(!GL_TABLE){const et=Object.keys(GL_TO_GLSL_TYPES);GL_TABLE={};for(let tt=0;tt<et.length;++tt){const rt=et[tt];GL_TABLE[_e[rt]]=GL_TO_GLSL_TYPES[rt]}}return GL_TABLE[_]}function setPrecision(_e,_,et){if(_e.substring(0,9)!=="precision"){let tt=_;return _===PRECISION.HIGH&&et!==PRECISION.HIGH&&(tt=PRECISION.MEDIUM),`precision ${tt} float;
${_e}`}else if(et!==PRECISION.HIGH&&_e.substring(0,15)==="precision highp")return _e.replace("precision highp","precision mediump");return _e}let unsafeEval;function unsafeEvalSupported(){if(typeof unsafeEval=="boolean")return unsafeEval;try{unsafeEval=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{unsafeEval=!1}return unsafeEval}let UID$2=0;const nameCache={},_Program=class Sn{constructor(_,et,tt="pixi-shader",rt={}){this.extra={},this.id=UID$2++,this.vertexSrc=_||Sn.defaultVertexSrc,this.fragmentSrc=et||Sn.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=rt,this.vertexSrc.substring(0,8)!=="#version"&&(tt=tt.replace(/\s+/g,"-"),nameCache[tt]?(nameCache[tt]++,tt+=`-${nameCache[tt]}`):nameCache[tt]=1,this.vertexSrc=`#define SHADER_NAME ${tt}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${tt}
${this.fragmentSrc}`,this.vertexSrc=setPrecision(this.vertexSrc,Sn.defaultVertexPrecision,PRECISION.HIGH),this.fragmentSrc=setPrecision(this.fragmentSrc,Sn.defaultFragmentPrecision,getMaxFragmentPrecision())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return defaultVertex$3}static get defaultFragmentSrc(){return defaultFragment$2}static from(_,et,tt){const rt=_+et;let it=ProgramCache[rt];return it||(ProgramCache[rt]=it=new Sn(_,et,tt)),it}};_Program.defaultVertexPrecision=PRECISION.HIGH,_Program.defaultFragmentPrecision=isMobile.apple.device?PRECISION.HIGH:PRECISION.MEDIUM;let Program=_Program,UID$1=0;class UniformGroup{constructor(_,et,tt){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=UID$1++,this.static=!!et,this.ubo=!!tt,_ instanceof Buffer?(this.buffer=_,this.buffer.type=BUFFER_TYPE.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=_,this.ubo&&(this.buffer=new Buffer(new Float32Array(1)),this.buffer.type=BUFFER_TYPE.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(_,et,tt){if(!this.ubo)this.uniforms[_]=new UniformGroup(et,tt);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(_,et,tt){return new UniformGroup(_,et,tt)}static uboFrom(_,et){return new UniformGroup(_,et??!0,!0)}}class Shader{constructor(_,et){this.uniformBindCount=0,this.program=_,et?et instanceof UniformGroup?this.uniformGroup=et:this.uniformGroup=new UniformGroup(et):this.uniformGroup=new UniformGroup({}),this.disposeRunner=new Runner("disposeShader")}checkUniformExists(_,et){if(et.uniforms[_])return!0;for(const tt in et.uniforms){const rt=et.uniforms[tt];if(rt.group===!0&&this.checkUniformExists(_,rt))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(_,et,tt){const rt=Program.from(_,et);return new Shader(rt,tt)}}class BatchShaderGenerator{constructor(_,et){if(this.vertexSrc=_,this.fragTemplate=et,this.programCache={},this.defaultGroupCache={},!et.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!et.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(_){if(!this.programCache[_]){const tt=new Int32Array(_);for(let it=0;it<_;it++)tt[it]=it;this.defaultGroupCache[_]=UniformGroup.from({uSamplers:tt},!0);let rt=this.fragTemplate;rt=rt.replace(/%count%/gi,`${_}`),rt=rt.replace(/%forloop%/gi,this.generateSampleSrc(_)),this.programCache[_]=new Program(this.vertexSrc,rt)}const et={tint:new Float32Array([1,1,1,1]),translationMatrix:new Matrix,default:this.defaultGroupCache[_]};return new Shader(this.programCache[_],et)}generateSampleSrc(_){let et="";et+=`
`,et+=`
`;for(let tt=0;tt<_;tt++)tt>0&&(et+=`
else `),tt<_-1&&(et+=`if(vTextureId < ${tt}.5)`),et+=`
{`,et+=`
	color = texture2D(uSamplers[${tt}], vTextureCoord);`,et+=`
}`;return et+=`
`,et+=`
`,et}}class BatchTextureArray{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let _=0;_<this.count;_++)this.elements[_]=null;this.count=0}}function canUploadSameBuffer(){return!isMobile.apple.device}function maxRecommendedTextures(_e){let _=!0;const et=settings.ADAPTER.getNavigator();if(isMobile.tablet||isMobile.phone){if(isMobile.apple.device){const tt=et.userAgent.match(/OS (\d+)_(\d+)?/);tt&&parseInt(tt[1],10)<11&&(_=!1)}if(isMobile.android.device){const tt=et.userAgent.match(/Android\s([0-9.]*)/);tt&&parseInt(tt[1],10)<7&&(_=!1)}}return _?_e:4}class ObjectRenderer{constructor(_){this.renderer=_}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(_){}}var defaultFragment$1=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,defaultVertex$2=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const _BatchRenderer=class tn extends ObjectRenderer{constructor(_){super(_),this.setShaderGenerator(),this.geometryClass=BatchGeometry,this.vertexSize=6,this.state=State.for2d(),this.size=tn.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),_.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??maxRecommendedTextures(32),this._defaultMaxTextures}static set defaultMaxTextures(_){this._defaultMaxTextures=_}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??canUploadSameBuffer(),this._canUploadSameBuffer}static set canUploadSameBuffer(_){this._canUploadSameBuffer=_}get MAX_TEXTURES(){return deprecation("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return defaultVertex$2}static get defaultFragmentTemplate(){return defaultFragment$1}setShaderGenerator({vertex:_=tn.defaultVertexSrc,fragment:et=tn.defaultFragmentTemplate}={}){this.shaderGenerator=new BatchShaderGenerator(_,et)}contextChange(){const _=this.renderer.gl;settings.PREFER_ENV===ENV.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(_.getParameter(_.MAX_TEXTURE_IMAGE_UNITS),tn.defaultMaxTextures),this.maxTextures=checkMaxIfStatementsInShader(this.maxTextures,_)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let et=0;et<this._packedGeometryPoolSize;et++)this._packedGeometries[et]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:_,_textureArrayPool:et}=tn,tt=this.size/4,rt=Math.floor(tt/this.maxTextures)+1;for(;_.length<tt;)_.push(new BatchDrawCall);for(;et.length<rt;)et.push(new BatchTextureArray);for(let it=0;it<this.maxTextures;it++)this._tempBoundTextures[it]=null}onPrerender(){this._flushId=0}render(_){_._texture.valid&&(this._vertexCount+_.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=_.vertexData.length/2,this._indexCount+=_.indices.length,this._bufferedTextures[this._bufferSize]=_._texture.baseTexture,this._bufferedElements[this._bufferSize++]=_)}buildTexturesAndDrawCalls(){const{_bufferedTextures:_,maxTextures:et}=this,tt=tn._textureArrayPool,rt=this.renderer.batch,it=this._tempBoundTextures,st=this.renderer.textureGC.count;let at=++BaseTexture._globalBatch,ct=0,ut=tt[0],dt=0;rt.copyBoundTextures(it,et);for(let ot=0;ot<this._bufferSize;++ot){const nt=_[ot];_[ot]=null,nt._batchEnabled!==at&&(ut.count>=et&&(rt.boundArray(ut,it,at,et),this.buildDrawCalls(ut,dt,ot),dt=ot,ut=tt[++ct],++at),nt._batchEnabled=at,nt.touched=st,ut.elements[ut.count++]=nt)}ut.count>0&&(rt.boundArray(ut,it,at,et),this.buildDrawCalls(ut,dt,this._bufferSize),++ct,++at);for(let ot=0;ot<it.length;ot++)it[ot]=null;BaseTexture._globalBatch=at}buildDrawCalls(_,et,tt){const{_bufferedElements:rt,_attributeBuffer:it,_indexBuffer:st,vertexSize:at}=this,ct=tn._drawCallPool;let ut=this._dcIndex,dt=this._aIndex,ot=this._iIndex,nt=ct[ut];nt.start=this._iIndex,nt.texArray=_;for(let lt=et;lt<tt;++lt){const ht=rt[lt],ft=ht._texture.baseTexture,gt=premultiplyBlendMode[ft.alphaMode?1:0][ht.blendMode];rt[lt]=null,et<lt&&nt.blend!==gt&&(nt.size=ot-nt.start,et=lt,nt=ct[++ut],nt.texArray=_,nt.start=ot),this.packInterleavedGeometry(ht,it,st,dt,ot),dt+=ht.vertexData.length/2*at,ot+=ht.indices.length,nt.blend=gt}et<tt&&(nt.size=ot-nt.start,++ut),this._dcIndex=ut,this._aIndex=dt,this._iIndex=ot}bindAndClearTexArray(_){const et=this.renderer.texture;for(let tt=0;tt<_.count;tt++)et.bind(_.elements[tt],_.ids[tt]),_.elements[tt]=null;_.count=0}updateGeometry(){const{_packedGeometries:_,_attributeBuffer:et,_indexBuffer:tt}=this;tn.canUploadSameBuffer?(_[this._flushId]._buffer.update(et.rawBinaryData),_[this._flushId]._indexBuffer.update(tt),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,_[this._flushId]=new this.geometryClass),_[this._flushId]._buffer.update(et.rawBinaryData),_[this._flushId]._indexBuffer.update(tt),this.renderer.geometry.bind(_[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const _=this._dcIndex,{gl:et,state:tt}=this.renderer,rt=tn._drawCallPool;let it=null;for(let st=0;st<_;st++){const{texArray:at,type:ct,size:ut,start:dt,blend:ot}=rt[st];it!==at&&(it=at,this.bindAndClearTexArray(at)),this.state.blendMode=ot,tt.set(this.state),et.drawElements(ct,ut,et.UNSIGNED_SHORT,dt*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),tn.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let _=0;_<this._packedGeometryPoolSize;_++)this._packedGeometries[_]&&this._packedGeometries[_].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(_){const et=nextPow2(Math.ceil(_/8)),tt=log2(et),rt=et*8;this._aBuffers.length<=tt&&(this._iBuffers.length=tt+1);let it=this._aBuffers[rt];return it||(this._aBuffers[rt]=it=new ViewableBuffer(rt*this.vertexSize*4)),it}getIndexBuffer(_){const et=nextPow2(Math.ceil(_/12)),tt=log2(et),rt=et*12;this._iBuffers.length<=tt&&(this._iBuffers.length=tt+1);let it=this._iBuffers[tt];return it||(this._iBuffers[tt]=it=new Uint16Array(rt)),it}packInterleavedGeometry(_,et,tt,rt,it){const{uint32View:st,float32View:at}=et,ct=rt/this.vertexSize,ut=_.uvs,dt=_.indices,ot=_.vertexData,nt=_._texture.baseTexture._batchLocation,lt=Math.min(_.worldAlpha,1),ht=Color.shared.setValue(_._tintRGB).toPremultiplied(lt,_._texture.baseTexture.alphaMode>0);for(let ft=0;ft<ot.length;ft+=2)at[rt++]=ot[ft],at[rt++]=ot[ft+1],at[rt++]=ut[ft],at[rt++]=ut[ft+1],st[rt++]=ht,at[rt++]=nt;for(let ft=0;ft<dt.length;ft++)tt[it++]=ct+dt[ft]}};_BatchRenderer.defaultBatchSize=4096,_BatchRenderer.extension={name:"batch",type:ExtensionType.RendererPlugin},_BatchRenderer._drawCallPool=[],_BatchRenderer._textureArrayPool=[];let BatchRenderer=_BatchRenderer;extensions$1.add(BatchRenderer);var defaultFragment=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,defaultVertex$1=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const _Filter=class jn extends Shader{constructor(_,et,tt){const rt=Program.from(_||jn.defaultVertexSrc,et||jn.defaultFragmentSrc);super(rt,tt),this.padding=0,this.resolution=jn.defaultResolution,this.multisample=jn.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new State}apply(_,et,tt,rt,it){_.applyFilter(this,et,tt,rt)}get blendMode(){return this.state.blendMode}set blendMode(_){this.state.blendMode=_}get resolution(){return this._resolution}set resolution(_){this._resolution=_}static get defaultVertexSrc(){return defaultVertex$1}static get defaultFragmentSrc(){return defaultFragment}};_Filter.defaultResolution=1,_Filter.defaultMultisample=MSAA_QUALITY.NONE;let Filter=_Filter;class BackgroundSystem{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new Color(0),this.alpha=1}init(_){this.clearBeforeRender=_.clearBeforeRender;const{backgroundColor:et,background:tt,backgroundAlpha:rt}=_,it=tt??et;it!==void 0&&(this.color=it),this.alpha=rt}get color(){return this._backgroundColor.value}set color(_){this._backgroundColor.setValue(_)}get alpha(){return this._backgroundColor.alpha}set alpha(_){this._backgroundColor.setAlpha(_)}get backgroundColor(){return this._backgroundColor}destroy(){}}BackgroundSystem.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},BackgroundSystem.extension={type:[ExtensionType.RendererSystem,ExtensionType.CanvasRendererSystem],name:"background"};extensions$1.add(BackgroundSystem);class BatchSystem{constructor(_){this.renderer=_,this.emptyRenderer=new ObjectRenderer(_),this.currentRenderer=this.emptyRenderer}setObjectRenderer(_){this.currentRenderer!==_&&(this.currentRenderer.stop(),this.currentRenderer=_,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(_,et){const{boundTextures:tt}=this.renderer.texture;for(let rt=et-1;rt>=0;--rt)_[rt]=tt[rt]||null,_[rt]&&(_[rt]._batchLocation=rt)}boundArray(_,et,tt,rt){const{elements:it,ids:st,count:at}=_;let ct=0;for(let ut=0;ut<at;ut++){const dt=it[ut],ot=dt._batchLocation;if(ot>=0&&ot<rt&&et[ot]===dt){st[ut]=ot;continue}for(;ct<rt;){const nt=et[ct];if(nt&&nt._batchEnabled===tt&&nt._batchLocation===ct){ct++;continue}st[ut]=ct,dt._batchLocation=ct,et[ct]=dt;break}}}destroy(){this.renderer=null}}BatchSystem.extension={type:ExtensionType.RendererSystem,name:"batch"};extensions$1.add(BatchSystem);let CONTEXT_UID_COUNTER=0;class ContextSystem{constructor(_){this.renderer=_,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(_){this.gl=_,this.renderer.gl=_,this.renderer.CONTEXT_UID=CONTEXT_UID_COUNTER++}init(_){if(_.context)this.initFromContext(_.context);else{const et=this.renderer.background.alpha<1,tt=_.premultipliedAlpha;this.preserveDrawingBuffer=_.preserveDrawingBuffer,this.useContextAlpha=_.useContextAlpha,this.powerPreference=_.powerPreference,this.initFromOptions({alpha:et,premultipliedAlpha:tt,antialias:_.antialias,stencil:!0,preserveDrawingBuffer:_.preserveDrawingBuffer,powerPreference:_.powerPreference})}}initFromContext(_){this.gl=_,this.validateContext(_),this.renderer.gl=_,this.renderer.CONTEXT_UID=CONTEXT_UID_COUNTER++,this.renderer.runners.contextChange.emit(_);const et=this.renderer.view;et.addEventListener!==void 0&&(et.addEventListener("webglcontextlost",this.handleContextLost,!1),et.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(_){const et=this.createContext(this.renderer.view,_);this.initFromContext(et)}createContext(_,et){let tt;if(settings.PREFER_ENV>=ENV.WEBGL2&&(tt=_.getContext("webgl2",et)),tt)this.webGLVersion=2;else if(this.webGLVersion=1,tt=_.getContext("webgl",et)||_.getContext("experimental-webgl",et),!tt)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=tt,this.getExtensions(),this.gl}getExtensions(){const{gl:_}=this,et={loseContext:_.getExtension("WEBGL_lose_context"),anisotropicFiltering:_.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:_.getExtension("OES_texture_float_linear"),s3tc:_.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:_.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:_.getExtension("WEBGL_compressed_texture_etc"),etc1:_.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:_.getExtension("WEBGL_compressed_texture_pvrtc")||_.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:_.getExtension("WEBGL_compressed_texture_atc"),astc:_.getExtension("WEBGL_compressed_texture_astc"),bptc:_.getExtension("EXT_texture_compression_bptc")};this.webGLVersion===1?Object.assign(this.extensions,et,{drawBuffers:_.getExtension("WEBGL_draw_buffers"),depthTexture:_.getExtension("WEBGL_depth_texture"),vertexArrayObject:_.getExtension("OES_vertex_array_object")||_.getExtension("MOZ_OES_vertex_array_object")||_.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:_.getExtension("OES_element_index_uint"),floatTexture:_.getExtension("OES_texture_float"),floatTextureLinear:_.getExtension("OES_texture_float_linear"),textureHalfFloat:_.getExtension("OES_texture_half_float"),textureHalfFloatLinear:_.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,et,{colorBufferFloat:_.getExtension("EXT_color_buffer_float")})}handleContextLost(_){_.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const _=this.renderer.view;this.renderer=null,_.removeEventListener!==void 0&&(_.removeEventListener("webglcontextlost",this.handleContextLost),_.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(_){const et=_.getContextAttributes(),tt="WebGL2RenderingContext"in globalThis&&_ instanceof globalThis.WebGL2RenderingContext;tt&&(this.webGLVersion=2),et&&!et.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const rt=tt||!!_.getExtension("OES_element_index_uint");this.supports.uint32Indices=rt,rt||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}ContextSystem.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"},ContextSystem.extension={type:ExtensionType.RendererSystem,name:"context"};extensions$1.add(ContextSystem);class Framebuffer{constructor(_,et){if(this.width=Math.round(_),this.height=Math.round(et),!this.width||!this.height)throw new Error("Framebuffer width or height is zero");this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Runner("disposeFramebuffer"),this.multisample=MSAA_QUALITY.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(_=0,et){return this.colorTextures[_]=et||new BaseTexture(null,{scaleMode:SCALE_MODES.NEAREST,resolution:1,mipmap:MIPMAP_MODES.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(_){return this.depthTexture=_||new BaseTexture(null,{scaleMode:SCALE_MODES.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:MIPMAP_MODES.OFF,format:FORMATS.DEPTH_COMPONENT,type:TYPES.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(_,et){if(_=Math.round(_),et=Math.round(et),!_||!et)throw new Error("Framebuffer width and height must not be zero");if(!(_===this.width&&et===this.height)){this.width=_,this.height=et,this.dirtyId++,this.dirtySize++;for(let tt=0;tt<this.colorTextures.length;tt++){const rt=this.colorTextures[tt],it=rt.resolution;rt.setSize(_/it,et/it)}if(this.depthTexture){const tt=this.depthTexture.resolution;this.depthTexture.setSize(_/tt,et/tt)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class BaseRenderTexture extends BaseTexture{constructor(_={}){if(typeof _=="number"){const et=arguments[0],tt=arguments[1],rt=arguments[2],it=arguments[3];_={width:et,height:tt,scaleMode:rt,resolution:it}}_.width=_.width??100,_.height=_.height??100,_.multisample??(_.multisample=MSAA_QUALITY.NONE),super(null,_),this.mipmap=MIPMAP_MODES.OFF,this.valid=!0,this._clear=new Color([0,0,0,0]),this.framebuffer=new Framebuffer(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=_.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(_){this._clear.setValue(_)}get clearColor(){return this._clear.value}get clear(){return this._clear}get multisample(){return this.framebuffer.multisample}set multisample(_){this.framebuffer.multisample=_}resize(_,et){this.framebuffer.resize(_*this.resolution,et*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class BaseImageResource extends Resource{constructor(_){const et=_,tt=et.naturalWidth||et.videoWidth||et.displayWidth||et.width,rt=et.naturalHeight||et.videoHeight||et.displayHeight||et.height;super(tt,rt),this.source=_,this.noSubImage=!1}static crossOrigin(_,et,tt){tt===void 0&&!et.startsWith("data:")?_.crossOrigin=determineCrossOrigin(et):tt!==!1&&(_.crossOrigin=typeof tt=="string"?tt:"anonymous")}upload(_,et,tt,rt){const it=_.gl,st=et.realWidth,at=et.realHeight;if(rt=rt||this.source,typeof HTMLImageElement<"u"&&rt instanceof HTMLImageElement){if(!rt.complete||rt.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&rt instanceof HTMLVideoElement&&rt.readyState<=1)return!1;return it.pixelStorei(it.UNPACK_PREMULTIPLY_ALPHA_WEBGL,et.alphaMode===ALPHA_MODES.UNPACK),!this.noSubImage&&et.target===it.TEXTURE_2D&&tt.width===st&&tt.height===at?it.texSubImage2D(it.TEXTURE_2D,0,0,0,et.format,tt.type,rt):(tt.width=st,tt.height=at,it.texImage2D(et.target,0,tt.internalFormat,et.format,tt.type,rt)),!0}update(){if(this.destroyed)return;const _=this.source,et=_.naturalWidth||_.videoWidth||_.width,tt=_.naturalHeight||_.videoHeight||_.height;this.resize(et,tt),super.update()}dispose(){this.source=null}}class ImageResource extends BaseImageResource{constructor(_,et){if(et=et||{},typeof _=="string"){const tt=new Image;BaseImageResource.crossOrigin(tt,_,et.crossorigin),tt.src=_,_=tt}super(_),!_.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=_.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(et.createBitmap??settings.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof et.alphaMode=="number"?et.alphaMode:null,this.bitmap=null,this._load=null,et.autoLoad!==!1&&this.load()}load(_){return this._load?this._load:(_!==void 0&&(this.createBitmap=_),this._load=new Promise((et,tt)=>{const rt=this.source;this.url=rt.src;const it=()=>{this.destroyed||(rt.onload=null,rt.onerror=null,this.update(),this._load=null,this.createBitmap?et(this.process()):et(this))};rt.complete&&rt.src?it():(rt.onload=it,rt.onerror=st=>{tt(st),this.onError.emit(st)})}),this._load)}process(){const _=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const et=globalThis.createImageBitmap,tt=!_.crossOrigin||_.crossOrigin==="anonymous";return this._process=fetch(_.src,{mode:tt?"cors":"no-cors"}).then(rt=>rt.blob()).then(rt=>et(rt,0,0,_.width,_.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===ALPHA_MODES.UNPACK?"premultiply":"none"})).then(rt=>this.destroyed?Promise.reject():(this.bitmap=rt,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(_,et,tt){if(typeof this.alphaMode=="number"&&(et.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(_,et,tt);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(_,et,tt,this.bitmap),!this.preserveBitmap){let rt=!0;const it=et._glTextures;for(const st in it){const at=it[st];if(at!==tt&&at.dirtyId!==et.dirtyId){rt=!1;break}}rt&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(_){return typeof HTMLImageElement<"u"&&(typeof _=="string"||_ instanceof HTMLImageElement)}}class TextureUvs{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(_,et,tt){const rt=et.width,it=et.height;if(tt){const st=_.width/2/rt,at=_.height/2/it,ct=_.x/rt+st,ut=_.y/it+at;tt=groupD8.add(tt,groupD8.NW),this.x0=ct+st*groupD8.uX(tt),this.y0=ut+at*groupD8.uY(tt),tt=groupD8.add(tt,2),this.x1=ct+st*groupD8.uX(tt),this.y1=ut+at*groupD8.uY(tt),tt=groupD8.add(tt,2),this.x2=ct+st*groupD8.uX(tt),this.y2=ut+at*groupD8.uY(tt),tt=groupD8.add(tt,2),this.x3=ct+st*groupD8.uX(tt),this.y3=ut+at*groupD8.uY(tt)}else this.x0=_.x/rt,this.y0=_.y/it,this.x1=(_.x+_.width)/rt,this.y1=_.y/it,this.x2=(_.x+_.width)/rt,this.y2=(_.y+_.height)/it,this.x3=_.x/rt,this.y3=(_.y+_.height)/it;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}}TextureUvs.prototype.toString=function(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`};const DEFAULT_UVS=new TextureUvs;function removeAllHandlers(_e){_e.destroy=function(){},_e.on=function(){},_e.once=function(){},_e.emit=function(){}}class Texture extends EventEmitter{constructor(_,et,tt,rt,it,st,at){if(super(),this.noFrame=!1,et||(this.noFrame=!0,et=new Rectangle(0,0,1,1)),_ instanceof Texture&&(_=_.baseTexture),this.baseTexture=_,this._frame=et,this.trim=rt,this.valid=!1,this.destroyed=!1,this._uvs=DEFAULT_UVS,this.uvMatrix=null,this.orig=tt||et,this._rotate=Number(it||0),it===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=st?new Point(st.x,st.y):new Point(0,0),this.defaultBorders=at,this._updateID=0,this.textureCacheIds=[],_.valid?this.noFrame?_.valid&&this.onBaseTextureUpdated(_):this.frame=et:_.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&_.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(_){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=_.width,this._frame.height=_.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(_){if(this.baseTexture){if(_){const{resource:et}=this.baseTexture;et!=null&&et.url&&TextureCache[et.url]&&Texture.removeFromCache(et.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,Texture.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}clone(){var rt;const _=this._frame.clone(),et=this._frame===this.orig?_:this.orig.clone(),tt=new Texture(this.baseTexture,!this.noFrame&&_,et,(rt=this.trim)==null?void 0:rt.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(tt._frame=_),tt}updateUvs(){this._uvs===DEFAULT_UVS&&(this._uvs=new TextureUvs),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(_,et={},tt=settings.STRICT_TEXTURE_CACHE){const rt=typeof _=="string";let it=null;if(rt)it=_;else if(_ instanceof BaseTexture){if(!_.cacheId){const at=(et==null?void 0:et.pixiIdPrefix)||"pixiid";_.cacheId=`${at}-${uid()}`,BaseTexture.addToCache(_,_.cacheId)}it=_.cacheId}else{if(!_._pixiId){const at=(et==null?void 0:et.pixiIdPrefix)||"pixiid";_._pixiId=`${at}_${uid()}`}it=_._pixiId}let st=TextureCache[it];if(rt&&tt&&!st)throw new Error(`The cacheId "${it}" does not exist in TextureCache.`);return!st&&!(_ instanceof BaseTexture)?(et.resolution||(et.resolution=getResolutionOfUrl(_)),st=new Texture(new BaseTexture(_,et)),st.baseTexture.cacheId=it,BaseTexture.addToCache(st.baseTexture,it),Texture.addToCache(st,it)):!st&&_ instanceof BaseTexture&&(st=new Texture(_),Texture.addToCache(st,it)),st}static fromURL(_,et){const tt=Object.assign({autoLoad:!1},et==null?void 0:et.resourceOptions),rt=Texture.from(_,Object.assign({resourceOptions:tt},et),!1),it=rt.baseTexture.resource;return rt.baseTexture.valid?Promise.resolve(rt):it.load().then(()=>Promise.resolve(rt))}static fromBuffer(_,et,tt,rt){return new Texture(BaseTexture.fromBuffer(_,et,tt,rt))}static fromLoader(_,et,tt,rt){const it=new BaseTexture(_,Object.assign({scaleMode:BaseTexture.defaultOptions.scaleMode,resolution:getResolutionOfUrl(et)},rt)),{resource:st}=it;st instanceof ImageResource&&(st.url=et);const at=new Texture(it);return tt||(tt=et),BaseTexture.addToCache(at.baseTexture,tt),Texture.addToCache(at,tt),tt!==et&&(BaseTexture.addToCache(at.baseTexture,et),Texture.addToCache(at,et)),at.baseTexture.valid?Promise.resolve(at):new Promise(ct=>{at.baseTexture.once("loaded",()=>ct(at))})}static addToCache(_,et){et&&(_.textureCacheIds.includes(et)||_.textureCacheIds.push(et),TextureCache[et]&&TextureCache[et]!==_&&console.warn(`Texture added to the cache with an id [${et}] that already had an entry`),TextureCache[et]=_)}static removeFromCache(_){if(typeof _=="string"){const et=TextureCache[_];if(et){const tt=et.textureCacheIds.indexOf(_);return tt>-1&&et.textureCacheIds.splice(tt,1),delete TextureCache[_],et}}else if(_!=null&&_.textureCacheIds){for(let et=0;et<_.textureCacheIds.length;++et)TextureCache[_.textureCacheIds[et]]===_&&delete TextureCache[_.textureCacheIds[et]];return _.textureCacheIds.length=0,_}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(_){this._frame=_,this.noFrame=!1;const{x:et,y:tt,width:rt,height:it}=_,st=et+rt>this.baseTexture.width,at=tt+it>this.baseTexture.height;if(st||at){const ct=st&&at?"and":"or",ut=`X: ${et} + ${rt} = ${et+rt} > ${this.baseTexture.width}`,dt=`Y: ${tt} + ${it} = ${tt+it} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${ut} ${ct} ${dt}`)}this.valid=rt&&it&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=_),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(_){this._rotate=_,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return Texture._EMPTY||(Texture._EMPTY=new Texture(new BaseTexture),removeAllHandlers(Texture._EMPTY),removeAllHandlers(Texture._EMPTY.baseTexture)),Texture._EMPTY}static get WHITE(){if(!Texture._WHITE){const _=settings.ADAPTER.createCanvas(16,16),et=_.getContext("2d");_.width=16,_.height=16,et.fillStyle="white",et.fillRect(0,0,16,16),Texture._WHITE=new Texture(BaseTexture.from(_)),removeAllHandlers(Texture._WHITE),removeAllHandlers(Texture._WHITE.baseTexture)}return Texture._WHITE}}class RenderTexture extends Texture{constructor(_,et){super(_,et),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(_){this.framebuffer.multisample=_}resize(_,et,tt=!0){const rt=this.baseTexture.resolution,it=Math.round(_*rt)/rt,st=Math.round(et*rt)/rt;this.valid=it>0&&st>0,this._frame.width=this.orig.width=it,this._frame.height=this.orig.height=st,tt&&this.baseTexture.resize(it,st),this.updateUvs()}setResolution(_){const{baseTexture:et}=this;et.resolution!==_&&(et.setResolution(_),this.resize(et.width,et.height,!1))}static create(_){return new RenderTexture(new BaseRenderTexture(_))}}class RenderTexturePool{constructor(_){this.texturePool={},this.textureOptions=_||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(_,et,tt=MSAA_QUALITY.NONE){const rt=new BaseRenderTexture(Object.assign({width:_,height:et,resolution:1,multisample:tt},this.textureOptions));return new RenderTexture(rt)}getOptimalTexture(_,et,tt=1,rt=MSAA_QUALITY.NONE){let it;_=Math.max(Math.ceil(_*tt-1e-6),1),et=Math.max(Math.ceil(et*tt-1e-6),1),!this.enableFullScreen||_!==this._pixelsWidth||et!==this._pixelsHeight?(_=nextPow2(_),et=nextPow2(et),it=((_&65535)<<16|et&65535)>>>0,rt>1&&(it+=rt*4294967296)):it=rt>1?-rt:-1,this.texturePool[it]||(this.texturePool[it]=[]);let st=this.texturePool[it].pop();return st||(st=this.createTexture(_,et,rt)),st.filterPoolKey=it,st.setResolution(tt),st}getFilterTexture(_,et,tt){const rt=this.getOptimalTexture(_.width,_.height,et||_.resolution,tt||MSAA_QUALITY.NONE);return rt.filterFrame=_.filterFrame,rt}returnTexture(_){const et=_.filterPoolKey;_.filterFrame=null,this.texturePool[et].push(_)}returnFilterTexture(_){this.returnTexture(_)}clear(_){if(_=_!==!1,_)for(const et in this.texturePool){const tt=this.texturePool[et];if(tt)for(let rt=0;rt<tt.length;rt++)tt[rt].destroy(!0)}this.texturePool={}}setScreenSize(_){if(!(_.width===this._pixelsWidth&&_.height===this._pixelsHeight)){this.enableFullScreen=_.width>0&&_.height>0;for(const et in this.texturePool){if(!(Number(et)<0))continue;const tt=this.texturePool[et];if(tt)for(let rt=0;rt<tt.length;rt++)tt[rt].destroy(!0);this.texturePool[et]=[]}this._pixelsWidth=_.width,this._pixelsHeight=_.height}}}RenderTexturePool.SCREEN_KEY=-1;class Quad extends Geometry{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class QuadUv extends Geometry{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new Buffer(this.vertices),this.uvBuffer=new Buffer(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(_,et){let tt=0,rt=0;return this.uvs[0]=tt,this.uvs[1]=rt,this.uvs[2]=tt+et.width/_.width,this.uvs[3]=rt,this.uvs[4]=tt+et.width/_.width,this.uvs[5]=rt+et.height/_.height,this.uvs[6]=tt,this.uvs[7]=rt+et.height/_.height,tt=et.x,rt=et.y,this.vertices[0]=tt,this.vertices[1]=rt,this.vertices[2]=tt+et.width,this.vertices[3]=rt,this.vertices[4]=tt+et.width,this.vertices[5]=rt+et.height,this.vertices[6]=tt,this.vertices[7]=rt+et.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class FilterState{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=MSAA_QUALITY.NONE,this.sourceFrame=new Rectangle,this.destinationFrame=new Rectangle,this.bindingSourceFrame=new Rectangle,this.bindingDestinationFrame=new Rectangle,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const tempPoints=[new Point,new Point,new Point,new Point],tempMatrix$4=new Matrix;class FilterSystem{constructor(_){this.renderer=_,this.defaultFilterStack=[{}],this.texturePool=new RenderTexturePool,this.statePool=[],this.quad=new Quad,this.quadUv=new QuadUv,this.tempRect=new Rectangle,this.activeState={},this.globalUniforms=new UniformGroup({outputFrame:new Rectangle,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(_,et){const tt=this.renderer,rt=this.defaultFilterStack,it=this.statePool.pop()||new FilterState,st=tt.renderTexture;let at,ct;if(st.current){const gt=st.current;at=gt.resolution,ct=gt.multisample}else at=tt.resolution,ct=tt.multisample;let ut=et[0].resolution||at,dt=et[0].multisample??ct,ot=et[0].padding,nt=et[0].autoFit,lt=et[0].legacy??!0;for(let gt=1;gt<et.length;gt++){const mt=et[gt];ut=Math.min(ut,mt.resolution||at),dt=Math.min(dt,mt.multisample??ct),ot=this.useMaxPadding?Math.max(ot,mt.padding):ot+mt.padding,nt=nt&&mt.autoFit,lt=lt||(mt.legacy??!0)}rt.length===1&&(this.defaultFilterStack[0].renderTexture=st.current),rt.push(it),it.resolution=ut,it.multisample=dt,it.legacy=lt,it.target=_,it.sourceFrame.copyFrom(_.filterArea||_.getBounds(!0)),it.sourceFrame.pad(ot);const ht=this.tempRect.copyFrom(st.sourceFrame);tt.projection.transform&&this.transformAABB(tempMatrix$4.copyFrom(tt.projection.transform).invert(),ht),nt?(it.sourceFrame.fit(ht),(it.sourceFrame.width<=0||it.sourceFrame.height<=0)&&(it.sourceFrame.width=0,it.sourceFrame.height=0)):it.sourceFrame.intersects(ht)||(it.sourceFrame.width=0,it.sourceFrame.height=0),this.roundFrame(it.sourceFrame,st.current?st.current.resolution:tt.resolution,st.sourceFrame,st.destinationFrame,tt.projection.transform),it.renderTexture=this.getOptimalFilterTexture(it.sourceFrame.width,it.sourceFrame.height,ut,dt),it.filters=et,it.destinationFrame.width=it.renderTexture.width,it.destinationFrame.height=it.renderTexture.height;const ft=this.tempRect;ft.x=0,ft.y=0,ft.width=it.sourceFrame.width,ft.height=it.sourceFrame.height,it.renderTexture.filterFrame=it.sourceFrame,it.bindingSourceFrame.copyFrom(st.sourceFrame),it.bindingDestinationFrame.copyFrom(st.destinationFrame),it.transform=tt.projection.transform,tt.projection.transform=null,st.bind(it.renderTexture,it.sourceFrame,ft),tt.framebuffer.clear(0,0,0,0)}pop(){const _=this.defaultFilterStack,et=_.pop(),tt=et.filters;this.activeState=et;const rt=this.globalUniforms.uniforms;rt.outputFrame=et.sourceFrame,rt.resolution=et.resolution;const it=rt.inputSize,st=rt.inputPixel,at=rt.inputClamp;if(it[0]=et.destinationFrame.width,it[1]=et.destinationFrame.height,it[2]=1/it[0],it[3]=1/it[1],st[0]=Math.round(it[0]*et.resolution),st[1]=Math.round(it[1]*et.resolution),st[2]=1/st[0],st[3]=1/st[1],at[0]=.5*st[2],at[1]=.5*st[3],at[2]=et.sourceFrame.width*it[2]-.5*st[2],at[3]=et.sourceFrame.height*it[3]-.5*st[3],et.legacy){const ut=rt.filterArea;ut[0]=et.destinationFrame.width,ut[1]=et.destinationFrame.height,ut[2]=et.sourceFrame.x,ut[3]=et.sourceFrame.y,rt.filterClamp=rt.inputClamp}this.globalUniforms.update();const ct=_[_.length-1];if(this.renderer.framebuffer.blit(),tt.length===1)tt[0].apply(this,et.renderTexture,ct.renderTexture,CLEAR_MODES.BLEND,et),this.returnFilterTexture(et.renderTexture);else{let ut=et.renderTexture,dt=this.getOptimalFilterTexture(ut.width,ut.height,et.resolution);dt.filterFrame=ut.filterFrame;let ot=0;for(ot=0;ot<tt.length-1;++ot){ot===1&&et.multisample>1&&(dt=this.getOptimalFilterTexture(ut.width,ut.height,et.resolution),dt.filterFrame=ut.filterFrame),tt[ot].apply(this,ut,dt,CLEAR_MODES.CLEAR,et);const nt=ut;ut=dt,dt=nt}tt[ot].apply(this,ut,ct.renderTexture,CLEAR_MODES.BLEND,et),ot>1&&et.multisample>1&&this.returnFilterTexture(et.renderTexture),this.returnFilterTexture(ut),this.returnFilterTexture(dt)}et.clear(),this.statePool.push(et)}bindAndClear(_,et=CLEAR_MODES.CLEAR){const{renderTexture:tt,state:rt}=this.renderer;if(_===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,_==null?void 0:_.filterFrame){const st=this.tempRect;st.x=0,st.y=0,st.width=_.filterFrame.width,st.height=_.filterFrame.height,tt.bind(_,_.filterFrame,st)}else _!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?tt.bind(_):this.renderer.renderTexture.bind(_,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const it=rt.stateId&1||this.forceClear;(et===CLEAR_MODES.CLEAR||et===CLEAR_MODES.BLIT&&it)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(_,et,tt,rt){const it=this.renderer;it.state.set(_.state),this.bindAndClear(tt,rt),_.uniforms.uSampler=et,_.uniforms.filterGlobals=this.globalUniforms,it.shader.bind(_),_.legacy=!!_.program.attributeData.aTextureCoord,_.legacy?(this.quadUv.map(et._frame,et.filterFrame),it.geometry.bind(this.quadUv),it.geometry.draw(DRAW_MODES.TRIANGLES)):(it.geometry.bind(this.quad),it.geometry.draw(DRAW_MODES.TRIANGLE_STRIP))}calculateSpriteMatrix(_,et){const{sourceFrame:tt,destinationFrame:rt}=this.activeState,{orig:it}=et._texture,st=_.set(rt.width,0,0,rt.height,tt.x,tt.y),at=et.worldTransform.copyTo(Matrix.TEMP_MATRIX);return at.invert(),st.prepend(at),st.scale(1/it.width,1/it.height),st.translate(et.anchor.x,et.anchor.y),st}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(_,et,tt=1,rt=MSAA_QUALITY.NONE){return this.texturePool.getOptimalTexture(_,et,tt,rt)}getFilterTexture(_,et,tt){if(typeof _=="number"){const it=_;_=et,et=it}_=_||this.activeState.renderTexture;const rt=this.texturePool.getOptimalTexture(_.width,_.height,et||_.resolution,tt||MSAA_QUALITY.NONE);return rt.filterFrame=_.filterFrame,rt}returnFilterTexture(_){this.texturePool.returnTexture(_)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(_,et){const tt=tempPoints[0],rt=tempPoints[1],it=tempPoints[2],st=tempPoints[3];tt.set(et.left,et.top),rt.set(et.left,et.bottom),it.set(et.right,et.top),st.set(et.right,et.bottom),_.apply(tt,tt),_.apply(rt,rt),_.apply(it,it),_.apply(st,st);const at=Math.min(tt.x,rt.x,it.x,st.x),ct=Math.min(tt.y,rt.y,it.y,st.y),ut=Math.max(tt.x,rt.x,it.x,st.x),dt=Math.max(tt.y,rt.y,it.y,st.y);et.x=at,et.y=ct,et.width=ut-at,et.height=dt-ct}roundFrame(_,et,tt,rt,it){if(!(_.width<=0||_.height<=0||tt.width<=0||tt.height<=0)){if(it){const{a:st,b:at,c:ct,d:ut}=it;if((Math.abs(at)>1e-4||Math.abs(ct)>1e-4)&&(Math.abs(st)>1e-4||Math.abs(ut)>1e-4))return}it=it?tempMatrix$4.copyFrom(it):tempMatrix$4.identity(),it.translate(-tt.x,-tt.y).scale(rt.width/tt.width,rt.height/tt.height).translate(rt.x,rt.y),this.transformAABB(it,_),_.ceil(et),this.transformAABB(it.invert(),_)}}}FilterSystem.extension={type:ExtensionType.RendererSystem,name:"filter"};extensions$1.add(FilterSystem);class GLFramebuffer{constructor(_){this.framebuffer=_,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=MSAA_QUALITY.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const tempRectangle=new Rectangle;class FramebufferSystem{constructor(_){this.renderer=_,this.managedFramebuffers=[],this.unknownFramebuffer=new Framebuffer(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const _=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Rectangle,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let et=this.renderer.context.extensions.drawBuffers,tt=this.renderer.context.extensions.depthTexture;settings.PREFER_ENV===ENV.WEBGL_LEGACY&&(et=null,tt=null),et?_.drawBuffers=rt=>et.drawBuffersWEBGL(rt):(this.hasMRT=!1,_.drawBuffers=()=>{}),tt||(this.writeDepthTexture=!1)}else this.msaaSamples=_.getInternalformatParameter(_.RENDERBUFFER,_.RGBA8,_.SAMPLES)}bind(_,et,tt=0){const{gl:rt}=this;if(_){const it=_.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(_);this.current!==_&&(this.current=_,rt.bindFramebuffer(rt.FRAMEBUFFER,it.framebuffer)),it.mipLevel!==tt&&(_.dirtyId++,_.dirtyFormat++,it.mipLevel=tt),it.dirtyId!==_.dirtyId&&(it.dirtyId=_.dirtyId,it.dirtyFormat!==_.dirtyFormat?(it.dirtyFormat=_.dirtyFormat,it.dirtySize=_.dirtySize,this.updateFramebuffer(_,tt)):it.dirtySize!==_.dirtySize&&(it.dirtySize=_.dirtySize,this.resizeFramebuffer(_)));for(let st=0;st<_.colorTextures.length;st++){const at=_.colorTextures[st];this.renderer.texture.unbind(at.parentTextureArray||at)}if(_.depthTexture&&this.renderer.texture.unbind(_.depthTexture),et){const st=et.width>>tt,at=et.height>>tt,ct=st/et.width;this.setViewport(et.x*ct,et.y*ct,st,at)}else{const st=_.width>>tt,at=_.height>>tt;this.setViewport(0,0,st,at)}}else this.current&&(this.current=null,rt.bindFramebuffer(rt.FRAMEBUFFER,null)),et?this.setViewport(et.x,et.y,et.width,et.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(_,et,tt,rt){const it=this.viewport;_=Math.round(_),et=Math.round(et),tt=Math.round(tt),rt=Math.round(rt),(it.width!==tt||it.height!==rt||it.x!==_||it.y!==et)&&(it.x=_,it.y=et,it.width=tt,it.height=rt,this.gl.viewport(_,et,tt,rt))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(_,et,tt,rt,it=BUFFER_BITS.COLOR|BUFFER_BITS.DEPTH){const{gl:st}=this;st.clearColor(_,et,tt,rt),st.clear(it)}initFramebuffer(_){const{gl:et}=this,tt=new GLFramebuffer(et.createFramebuffer());return tt.multisample=this.detectSamples(_.multisample),_.glFramebuffers[this.CONTEXT_UID]=tt,this.managedFramebuffers.push(_),_.disposeRunner.add(this),tt}resizeFramebuffer(_){const{gl:et}=this,tt=_.glFramebuffers[this.CONTEXT_UID];if(tt.stencil){et.bindRenderbuffer(et.RENDERBUFFER,tt.stencil);let st;this.renderer.context.webGLVersion===1?st=et.DEPTH_STENCIL:_.depth&&_.stencil?st=et.DEPTH24_STENCIL8:_.depth?st=et.DEPTH_COMPONENT24:st=et.STENCIL_INDEX8,tt.msaaBuffer?et.renderbufferStorageMultisample(et.RENDERBUFFER,tt.multisample,st,_.width,_.height):et.renderbufferStorage(et.RENDERBUFFER,st,_.width,_.height)}const rt=_.colorTextures;let it=rt.length;et.drawBuffers||(it=Math.min(it,1));for(let st=0;st<it;st++){const at=rt[st],ct=at.parentTextureArray||at;this.renderer.texture.bind(ct,0),st===0&&tt.msaaBuffer&&(et.bindRenderbuffer(et.RENDERBUFFER,tt.msaaBuffer),et.renderbufferStorageMultisample(et.RENDERBUFFER,tt.multisample,ct._glTextures[this.CONTEXT_UID].internalFormat,_.width,_.height))}_.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(_.depthTexture,0)}updateFramebuffer(_,et){const{gl:tt}=this,rt=_.glFramebuffers[this.CONTEXT_UID],it=_.colorTextures;let st=it.length;tt.drawBuffers||(st=Math.min(st,1)),rt.multisample>1&&this.canMultisampleFramebuffer(_)?rt.msaaBuffer=rt.msaaBuffer||tt.createRenderbuffer():rt.msaaBuffer&&(tt.deleteRenderbuffer(rt.msaaBuffer),rt.msaaBuffer=null,rt.blitFramebuffer&&(rt.blitFramebuffer.dispose(),rt.blitFramebuffer=null));const at=[];for(let ct=0;ct<st;ct++){const ut=it[ct],dt=ut.parentTextureArray||ut;this.renderer.texture.bind(dt,0),ct===0&&rt.msaaBuffer?(tt.bindRenderbuffer(tt.RENDERBUFFER,rt.msaaBuffer),tt.renderbufferStorageMultisample(tt.RENDERBUFFER,rt.multisample,dt._glTextures[this.CONTEXT_UID].internalFormat,_.width,_.height),tt.framebufferRenderbuffer(tt.FRAMEBUFFER,tt.COLOR_ATTACHMENT0,tt.RENDERBUFFER,rt.msaaBuffer)):(tt.framebufferTexture2D(tt.FRAMEBUFFER,tt.COLOR_ATTACHMENT0+ct,ut.target,dt._glTextures[this.CONTEXT_UID].texture,et),at.push(tt.COLOR_ATTACHMENT0+ct))}if(at.length>1&&tt.drawBuffers(at),_.depthTexture&&this.writeDepthTexture){const ct=_.depthTexture;this.renderer.texture.bind(ct,0),tt.framebufferTexture2D(tt.FRAMEBUFFER,tt.DEPTH_ATTACHMENT,tt.TEXTURE_2D,ct._glTextures[this.CONTEXT_UID].texture,et)}if((_.stencil||_.depth)&&!(_.depthTexture&&this.writeDepthTexture)){rt.stencil=rt.stencil||tt.createRenderbuffer();let ct,ut;this.renderer.context.webGLVersion===1?(ct=tt.DEPTH_STENCIL_ATTACHMENT,ut=tt.DEPTH_STENCIL):_.depth&&_.stencil?(ct=tt.DEPTH_STENCIL_ATTACHMENT,ut=tt.DEPTH24_STENCIL8):_.depth?(ct=tt.DEPTH_ATTACHMENT,ut=tt.DEPTH_COMPONENT24):(ct=tt.STENCIL_ATTACHMENT,ut=tt.STENCIL_INDEX8),tt.bindRenderbuffer(tt.RENDERBUFFER,rt.stencil),rt.msaaBuffer?tt.renderbufferStorageMultisample(tt.RENDERBUFFER,rt.multisample,ut,_.width,_.height):tt.renderbufferStorage(tt.RENDERBUFFER,ut,_.width,_.height),tt.framebufferRenderbuffer(tt.FRAMEBUFFER,ct,tt.RENDERBUFFER,rt.stencil)}else rt.stencil&&(tt.deleteRenderbuffer(rt.stencil),rt.stencil=null)}canMultisampleFramebuffer(_){return this.renderer.context.webGLVersion!==1&&_.colorTextures.length<=1&&!_.depthTexture}detectSamples(_){const{msaaSamples:et}=this;let tt=MSAA_QUALITY.NONE;if(_<=1||et===null)return tt;for(let rt=0;rt<et.length;rt++)if(et[rt]<=_){tt=et[rt];break}return tt===1&&(tt=MSAA_QUALITY.NONE),tt}blit(_,et,tt){const{current:rt,renderer:it,gl:st,CONTEXT_UID:at}=this;if(it.context.webGLVersion!==2||!rt)return;const ct=rt.glFramebuffers[at];if(!ct)return;if(!_){if(!ct.msaaBuffer)return;const dt=rt.colorTextures[0];if(!dt)return;ct.blitFramebuffer||(ct.blitFramebuffer=new Framebuffer(rt.width,rt.height),ct.blitFramebuffer.addColorTexture(0,dt)),_=ct.blitFramebuffer,_.colorTextures[0]!==dt&&(_.colorTextures[0]=dt,_.dirtyId++,_.dirtyFormat++),(_.width!==rt.width||_.height!==rt.height)&&(_.width=rt.width,_.height=rt.height,_.dirtyId++,_.dirtySize++)}et||(et=tempRectangle,et.width=rt.width,et.height=rt.height),tt||(tt=et);const ut=et.width===tt.width&&et.height===tt.height;this.bind(_),st.bindFramebuffer(st.READ_FRAMEBUFFER,ct.framebuffer),st.blitFramebuffer(et.left,et.top,et.right,et.bottom,tt.left,tt.top,tt.right,tt.bottom,st.COLOR_BUFFER_BIT,ut?st.NEAREST:st.LINEAR),st.bindFramebuffer(st.READ_FRAMEBUFFER,_.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(_,et){const tt=_.glFramebuffers[this.CONTEXT_UID],rt=this.gl;if(!tt)return;delete _.glFramebuffers[this.CONTEXT_UID];const it=this.managedFramebuffers.indexOf(_);it>=0&&this.managedFramebuffers.splice(it,1),_.disposeRunner.remove(this),et||(rt.deleteFramebuffer(tt.framebuffer),tt.msaaBuffer&&rt.deleteRenderbuffer(tt.msaaBuffer),tt.stencil&&rt.deleteRenderbuffer(tt.stencil)),tt.blitFramebuffer&&this.disposeFramebuffer(tt.blitFramebuffer,et)}disposeAll(_){const et=this.managedFramebuffers;this.managedFramebuffers=[];for(let tt=0;tt<et.length;tt++)this.disposeFramebuffer(et[tt],_)}forceStencil(){const _=this.current;if(!_)return;const et=_.glFramebuffers[this.CONTEXT_UID];if(!et||et.stencil&&_.stencil)return;_.stencil=!0;const tt=_.width,rt=_.height,it=this.gl,st=et.stencil=it.createRenderbuffer();it.bindRenderbuffer(it.RENDERBUFFER,st);let at,ct;this.renderer.context.webGLVersion===1?(at=it.DEPTH_STENCIL_ATTACHMENT,ct=it.DEPTH_STENCIL):_.depth?(at=it.DEPTH_STENCIL_ATTACHMENT,ct=it.DEPTH24_STENCIL8):(at=it.STENCIL_ATTACHMENT,ct=it.STENCIL_INDEX8),et.msaaBuffer?it.renderbufferStorageMultisample(it.RENDERBUFFER,et.multisample,ct,tt,rt):it.renderbufferStorage(it.RENDERBUFFER,ct,tt,rt),it.framebufferRenderbuffer(it.FRAMEBUFFER,at,it.RENDERBUFFER,st)}reset(){this.current=this.unknownFramebuffer,this.viewport=new Rectangle}destroy(){this.renderer=null}}FramebufferSystem.extension={type:ExtensionType.RendererSystem,name:"framebuffer"};extensions$1.add(FramebufferSystem);const byteSizeMap={5126:4,5123:2,5121:1};class GeometrySystem{constructor(_){this.renderer=_,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const _=this.gl=this.renderer.gl,et=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,et.webGLVersion!==2){let tt=this.renderer.context.extensions.vertexArrayObject;settings.PREFER_ENV===ENV.WEBGL_LEGACY&&(tt=null),tt?(_.createVertexArray=()=>tt.createVertexArrayOES(),_.bindVertexArray=rt=>tt.bindVertexArrayOES(rt),_.deleteVertexArray=rt=>tt.deleteVertexArrayOES(rt)):(this.hasVao=!1,_.createVertexArray=()=>null,_.bindVertexArray=()=>null,_.deleteVertexArray=()=>null)}if(et.webGLVersion!==2){const tt=_.getExtension("ANGLE_instanced_arrays");tt?(_.vertexAttribDivisor=(rt,it)=>tt.vertexAttribDivisorANGLE(rt,it),_.drawElementsInstanced=(rt,it,st,at,ct)=>tt.drawElementsInstancedANGLE(rt,it,st,at,ct),_.drawArraysInstanced=(rt,it,st,at)=>tt.drawArraysInstancedANGLE(rt,it,st,at)):this.hasInstance=!1}this.canUseUInt32ElementIndex=et.webGLVersion===2||!!et.extensions.uint32ElementIndex}bind(_,et){et=et||this.renderer.shader.shader;const{gl:tt}=this;let rt=_.glVertexArrayObjects[this.CONTEXT_UID],it=!1;rt||(this.managedGeometries[_.id]=_,_.disposeRunner.add(this),_.glVertexArrayObjects[this.CONTEXT_UID]=rt={},it=!0);const st=rt[et.program.id]||this.initGeometryVao(_,et,it);this._activeGeometry=_,this._activeVao!==st&&(this._activeVao=st,this.hasVao?tt.bindVertexArray(st):this.activateVao(_,et.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const _=this._activeGeometry,et=this.renderer.buffer;for(let tt=0;tt<_.buffers.length;tt++){const rt=_.buffers[tt];et.update(rt)}}checkCompatibility(_,et){const tt=_.attributes,rt=et.attributeData;for(const it in rt)if(!tt[it])throw new Error(`shader and geometry incompatible, geometry missing the "${it}" attribute`)}getSignature(_,et){const tt=_.attributes,rt=et.attributeData,it=["g",_.id];for(const st in tt)rt[st]&&it.push(st,rt[st].location);return it.join("-")}initGeometryVao(_,et,tt=!0){const rt=this.gl,it=this.CONTEXT_UID,st=this.renderer.buffer,at=et.program;at.glPrograms[it]||this.renderer.shader.generateProgram(et),this.checkCompatibility(_,at);const ct=this.getSignature(_,at),ut=_.glVertexArrayObjects[this.CONTEXT_UID];let dt=ut[ct];if(dt)return ut[at.id]=dt,dt;const ot=_.buffers,nt=_.attributes,lt={},ht={};for(const ft in ot)lt[ft]=0,ht[ft]=0;for(const ft in nt)!nt[ft].size&&at.attributeData[ft]?nt[ft].size=at.attributeData[ft].size:nt[ft].size||console.warn(`PIXI Geometry attribute '${ft}' size cannot be determined (likely the bound shader does not have the attribute)`),lt[nt[ft].buffer]+=nt[ft].size*byteSizeMap[nt[ft].type];for(const ft in nt){const gt=nt[ft],mt=gt.size;gt.stride===void 0&&(lt[gt.buffer]===mt*byteSizeMap[gt.type]?gt.stride=0:gt.stride=lt[gt.buffer]),gt.start===void 0&&(gt.start=ht[gt.buffer],ht[gt.buffer]+=mt*byteSizeMap[gt.type])}dt=rt.createVertexArray(),rt.bindVertexArray(dt);for(let ft=0;ft<ot.length;ft++){const gt=ot[ft];st.bind(gt),tt&&gt._glBuffers[it].refCount++}return this.activateVao(_,at),ut[at.id]=dt,ut[ct]=dt,rt.bindVertexArray(null),st.unbind(BUFFER_TYPE.ARRAY_BUFFER),dt}disposeGeometry(_,et){var at;if(!this.managedGeometries[_.id])return;delete this.managedGeometries[_.id];const tt=_.glVertexArrayObjects[this.CONTEXT_UID],rt=this.gl,it=_.buffers,st=(at=this.renderer)==null?void 0:at.buffer;if(_.disposeRunner.remove(this),!!tt){if(st)for(let ct=0;ct<it.length;ct++){const ut=it[ct]._glBuffers[this.CONTEXT_UID];ut&&(ut.refCount--,ut.refCount===0&&!et&&st.dispose(it[ct],et))}if(!et){for(const ct in tt)if(ct[0]==="g"){const ut=tt[ct];this._activeVao===ut&&this.unbind(),rt.deleteVertexArray(ut)}}delete _.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(_){const et=Object.keys(this.managedGeometries);for(let tt=0;tt<et.length;tt++)this.disposeGeometry(this.managedGeometries[et[tt]],_)}activateVao(_,et){const tt=this.gl,rt=this.CONTEXT_UID,it=this.renderer.buffer,st=_.buffers,at=_.attributes;_.indexBuffer&&it.bind(_.indexBuffer);let ct=null;for(const ut in at){const dt=at[ut],ot=st[dt.buffer],nt=ot._glBuffers[rt];if(et.attributeData[ut]){ct!==nt&&(it.bind(ot),ct=nt);const lt=et.attributeData[ut].location;if(tt.enableVertexAttribArray(lt),tt.vertexAttribPointer(lt,dt.size,dt.type||tt.FLOAT,dt.normalized,dt.stride,dt.start),dt.instance)if(this.hasInstance)tt.vertexAttribDivisor(lt,dt.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(_,et,tt,rt){const{gl:it}=this,st=this._activeGeometry;if(st.indexBuffer){const at=st.indexBuffer.data.BYTES_PER_ELEMENT,ct=at===2?it.UNSIGNED_SHORT:it.UNSIGNED_INT;at===2||at===4&&this.canUseUInt32ElementIndex?st.instanced?it.drawElementsInstanced(_,et||st.indexBuffer.data.length,ct,(tt||0)*at,rt||1):it.drawElements(_,et||st.indexBuffer.data.length,ct,(tt||0)*at):console.warn("unsupported index buffer type: uint32")}else st.instanced?it.drawArraysInstanced(_,tt,et||st.getSize(),rt||1):it.drawArrays(_,tt,et||st.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}GeometrySystem.extension={type:ExtensionType.RendererSystem,name:"geometry"};extensions$1.add(GeometrySystem);const tempMat$1=new Matrix;class TextureMatrix{constructor(_,et){this._texture=_,this.mapCoord=new Matrix,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof et>"u"?.5:et,this.isSimple=!1}get texture(){return this._texture}set texture(_){this._texture=_,this._textureID=-1}multiplyUvs(_,et){et===void 0&&(et=_);const tt=this.mapCoord;for(let rt=0;rt<_.length;rt+=2){const it=_[rt],st=_[rt+1];et[rt]=it*tt.a+st*tt.c+tt.tx,et[rt+1]=it*tt.b+st*tt.d+tt.ty}return et}update(_){const et=this._texture;if(!et||!et.valid||!_&&this._textureID===et._updateID)return!1;this._textureID=et._updateID,this._updateID++;const tt=et._uvs;this.mapCoord.set(tt.x1-tt.x0,tt.y1-tt.y0,tt.x3-tt.x0,tt.y3-tt.y0,tt.x0,tt.y0);const rt=et.orig,it=et.trim;it&&(tempMat$1.set(rt.width/it.width,0,0,rt.height/it.height,-it.x/it.width,-it.y/it.height),this.mapCoord.append(tempMat$1));const st=et.baseTexture,at=this.uClampFrame,ct=this.clampMargin/st.resolution,ut=this.clampOffset;return at[0]=(et._frame.x+ct+ut)/st.width,at[1]=(et._frame.y+ct+ut)/st.height,at[2]=(et._frame.x+et._frame.width-ct+ut)/st.width,at[3]=(et._frame.y+et._frame.height-ct+ut)/st.height,this.uClampOffset[0]=ut/st.realWidth,this.uClampOffset[1]=ut/st.realHeight,this.isSimple=et._frame.width===st.width&&et._frame.height===st.height&&et.rotate===0,!0}}var fragment$7=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,vertex$4=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;class SpriteMaskFilter extends Filter{constructor(_,et,tt){let rt=null;typeof _!="string"&&et===void 0&&tt===void 0&&(rt=_,_=void 0,et=void 0,tt=void 0),super(_||vertex$4,et||fragment$7,tt),this.maskSprite=rt,this.maskMatrix=new Matrix}get maskSprite(){return this._maskSprite}set maskSprite(_){this._maskSprite=_,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(_,et,tt,rt){const it=this._maskSprite,st=it._texture;st.valid&&(st.uvMatrix||(st.uvMatrix=new TextureMatrix(st,0)),st.uvMatrix.update(),this.uniforms.npmAlpha=st.baseTexture.alphaMode?0:1,this.uniforms.mask=st,this.uniforms.otherMatrix=_.calculateSpriteMatrix(this.maskMatrix,it).prepend(st.uvMatrix.mapCoord),this.uniforms.alpha=it.worldAlpha,this.uniforms.maskClamp=st.uvMatrix.uClampFrame,_.applyFilter(this,et,tt,rt))}}class MaskData{constructor(_=null){this.type=MASK_TYPES.NONE,this.autoDetect=!0,this.maskObject=_||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=Filter.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(_){_?this._filters?this._filters[0]=_:this._filters=[_]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=MASK_TYPES.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(_){_?(this._stencilCounter=_._stencilCounter,this._scissorCounter=_._scissorCounter,this._scissorRect=_._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class MaskSystem{constructor(_){this.renderer=_,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(_){this.maskStack=_,this.renderer.scissor.setMaskStack(_),this.renderer.stencil.setMaskStack(_)}push(_,et){let tt=et;if(!tt.isMaskData){const it=this.maskDataPool.pop()||new MaskData;it.pooled=!0,it.maskObject=et,tt=it}const rt=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(tt.copyCountersOrReset(rt),tt._colorMask=rt?rt._colorMask:15,tt.autoDetect&&this.detect(tt),tt._target=_,tt.type!==MASK_TYPES.SPRITE&&this.maskStack.push(tt),tt.enabled)switch(tt.type){case MASK_TYPES.SCISSOR:this.renderer.scissor.push(tt);break;case MASK_TYPES.STENCIL:this.renderer.stencil.push(tt);break;case MASK_TYPES.SPRITE:tt.copyCountersOrReset(null),this.pushSpriteMask(tt);break;case MASK_TYPES.COLOR:this.pushColorMask(tt);break}tt.type===MASK_TYPES.SPRITE&&this.maskStack.push(tt)}pop(_){const et=this.maskStack.pop();if(!(!et||et._target!==_)){if(et.enabled)switch(et.type){case MASK_TYPES.SCISSOR:this.renderer.scissor.pop(et);break;case MASK_TYPES.STENCIL:this.renderer.stencil.pop(et.maskObject);break;case MASK_TYPES.SPRITE:this.popSpriteMask(et);break;case MASK_TYPES.COLOR:this.popColorMask(et);break}if(et.reset(),et.pooled&&this.maskDataPool.push(et),this.maskStack.length!==0){const tt=this.maskStack[this.maskStack.length-1];tt.type===MASK_TYPES.SPRITE&&tt._filters&&(tt._filters[0].maskSprite=tt.maskObject)}}}detect(_){const et=_.maskObject;et?et.isSprite?_.type=MASK_TYPES.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(_)?_.type=MASK_TYPES.SCISSOR:_.type=MASK_TYPES.STENCIL:_.type=MASK_TYPES.COLOR}pushSpriteMask(_){const{maskObject:et}=_,tt=_._target;let rt=_._filters;rt||(rt=this.alphaMaskPool[this.alphaMaskIndex],rt||(rt=this.alphaMaskPool[this.alphaMaskIndex]=[new SpriteMaskFilter])),rt[0].resolution=_.resolution,rt[0].multisample=_.multisample,rt[0].maskSprite=et;const it=tt.filterArea;tt.filterArea=et.getBounds(!0),this.renderer.filter.push(tt,rt),tt.filterArea=it,_._filters||this.alphaMaskIndex++}popSpriteMask(_){this.renderer.filter.pop(),_._filters?_._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(_){const et=_._colorMask,tt=_._colorMask=et&_.colorMask;tt!==et&&this.renderer.gl.colorMask((tt&1)!==0,(tt&2)!==0,(tt&4)!==0,(tt&8)!==0)}popColorMask(_){const et=_._colorMask,tt=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;tt!==et&&this.renderer.gl.colorMask((tt&1)!==0,(tt&2)!==0,(tt&4)!==0,(tt&8)!==0)}destroy(){this.renderer=null}}MaskSystem.extension={type:ExtensionType.RendererSystem,name:"mask"};extensions$1.add(MaskSystem);class AbstractMaskSystem{constructor(_){this.renderer=_,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(_){const{gl:et}=this.renderer,tt=this.getStackLength();this.maskStack=_;const rt=this.getStackLength();rt!==tt&&(rt===0?et.disable(this.glConst):(et.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const tempMatrix$3=new Matrix,rectPool=[],_ScissorSystem=class _i extends AbstractMaskSystem{constructor(_){super(_),this.glConst=settings.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const _=this.maskStack[this.maskStack.length-1];return _?_._scissorCounter:0}calcScissorRect(_){if(_._scissorRectLocal)return;const et=_._scissorRect,{maskObject:tt}=_,{renderer:rt}=this,it=rt.renderTexture,st=tt.getBounds(!0,rectPool.pop()??new Rectangle);this.roundFrameToPixels(st,it.current?it.current.resolution:rt.resolution,it.sourceFrame,it.destinationFrame,rt.projection.transform),et&&st.fit(et),_._scissorRectLocal=st}static isMatrixRotated(_){if(!_)return!1;const{a:et,b:tt,c:rt,d:it}=_;return(Math.abs(tt)>1e-4||Math.abs(rt)>1e-4)&&(Math.abs(et)>1e-4||Math.abs(it)>1e-4)}testScissor(_){const{maskObject:et}=_;if(!et.isFastRect||!et.isFastRect()||_i.isMatrixRotated(et.worldTransform)||_i.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(_);const tt=_._scissorRectLocal;return tt.width>0&&tt.height>0}roundFrameToPixels(_,et,tt,rt,it){_i.isMatrixRotated(it)||(it=it?tempMatrix$3.copyFrom(it):tempMatrix$3.identity(),it.translate(-tt.x,-tt.y).scale(rt.width/tt.width,rt.height/tt.height).translate(rt.x,rt.y),this.renderer.filter.transformAABB(it,_),_.fit(rt),_.x=Math.round(_.x*et),_.y=Math.round(_.y*et),_.width=Math.round(_.width*et),_.height=Math.round(_.height*et))}push(_){_._scissorRectLocal||this.calcScissorRect(_);const{gl:et}=this.renderer;_._scissorRect||et.enable(et.SCISSOR_TEST),_._scissorCounter++,_._scissorRect=_._scissorRectLocal,this._useCurrent()}pop(_){const{gl:et}=this.renderer;_&&rectPool.push(_._scissorRectLocal),this.getStackLength()>0?this._useCurrent():et.disable(et.SCISSOR_TEST)}_useCurrent(){const _=this.maskStack[this.maskStack.length-1]._scissorRect;let et;this.renderer.renderTexture.current?et=_.y:et=this.renderer.height-_.height-_.y,this.renderer.gl.scissor(_.x,et,_.width,_.height)}};_ScissorSystem.extension={type:ExtensionType.RendererSystem,name:"scissor"};let ScissorSystem=_ScissorSystem;extensions$1.add(ScissorSystem);class StencilSystem extends AbstractMaskSystem{constructor(_){super(_),this.glConst=settings.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const _=this.maskStack[this.maskStack.length-1];return _?_._stencilCounter:0}push(_){const et=_.maskObject,{gl:tt}=this.renderer,rt=_._stencilCounter;rt===0&&(this.renderer.framebuffer.forceStencil(),tt.clearStencil(0),tt.clear(tt.STENCIL_BUFFER_BIT),tt.enable(tt.STENCIL_TEST)),_._stencilCounter++;const it=_._colorMask;it!==0&&(_._colorMask=0,tt.colorMask(!1,!1,!1,!1)),tt.stencilFunc(tt.EQUAL,rt,4294967295),tt.stencilOp(tt.KEEP,tt.KEEP,tt.INCR),et.renderable=!0,et.render(this.renderer),this.renderer.batch.flush(),et.renderable=!1,it!==0&&(_._colorMask=it,tt.colorMask((it&1)!==0,(it&2)!==0,(it&4)!==0,(it&8)!==0)),this._useCurrent()}pop(_){const et=this.renderer.gl;if(this.getStackLength()===0)et.disable(et.STENCIL_TEST);else{const tt=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,rt=tt?tt._colorMask:15;rt!==0&&(tt._colorMask=0,et.colorMask(!1,!1,!1,!1)),et.stencilOp(et.KEEP,et.KEEP,et.DECR),_.renderable=!0,_.render(this.renderer),this.renderer.batch.flush(),_.renderable=!1,rt!==0&&(tt._colorMask=rt,et.colorMask((rt&1)!==0,(rt&2)!==0,(rt&4)!==0,(rt&8)!==0)),this._useCurrent()}}_useCurrent(){const _=this.renderer.gl;_.stencilFunc(_.EQUAL,this.getStackLength(),4294967295),_.stencilOp(_.KEEP,_.KEEP,_.KEEP)}}StencilSystem.extension={type:ExtensionType.RendererSystem,name:"stencil"};extensions$1.add(StencilSystem);class PluginSystem{constructor(_){this.renderer=_,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return deprecation("7.0.0","renderer.plugins.extract has moved to renderer.extract"),_.extract}},prepare:{enumerable:!1,get(){return deprecation("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),_.prepare}},interaction:{enumerable:!1,get(){return deprecation("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),_.events}}})}init(){const _=this.rendererPlugins;for(const et in _)this.plugins[et]=new _[et](this.renderer)}destroy(){for(const _ in this.plugins)this.plugins[_].destroy(),this.plugins[_]=null}}PluginSystem.extension={type:[ExtensionType.RendererSystem,ExtensionType.CanvasRendererSystem],name:"_plugin"};extensions$1.add(PluginSystem);class ProjectionSystem{constructor(_){this.renderer=_,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Matrix,this.transform=null}update(_,et,tt,rt){this.destinationFrame=_||this.destinationFrame||this.defaultFrame,this.sourceFrame=et||this.sourceFrame||_,this.calculateProjection(this.destinationFrame,this.sourceFrame,tt,rt),this.transform&&this.projectionMatrix.append(this.transform);const it=this.renderer;it.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,it.globalUniforms.update(),it.shader.shader&&it.shader.syncUniformGroup(it.shader.shader.uniforms.globals)}calculateProjection(_,et,tt,rt){const it=this.projectionMatrix,st=rt?-1:1;it.identity(),it.a=1/et.width*2,it.d=st*(1/et.height*2),it.tx=-1-et.x*it.a,it.ty=-st-et.y*it.d}setTransform(_){}destroy(){this.renderer=null}}ProjectionSystem.extension={type:ExtensionType.RendererSystem,name:"projection"};extensions$1.add(ProjectionSystem);const tempTransform=new Transform,tempRect$1=new Rectangle;class GenerateTextureSystem{constructor(_){this.renderer=_,this._tempMatrix=new Matrix}generateTexture(_,et){const{region:tt,...rt}=et||{},it=(tt==null?void 0:tt.copyTo(tempRect$1))||_.getLocalBounds(tempRect$1,!0),st=rt.resolution||this.renderer.resolution;it.width=Math.max(it.width,1/st),it.height=Math.max(it.height,1/st),rt.width=it.width,rt.height=it.height,rt.resolution=st,rt.multisample??(rt.multisample=this.renderer.multisample);const at=RenderTexture.create(rt);this._tempMatrix.tx=-it.x,this._tempMatrix.ty=-it.y;const ct=_.transform;return _.transform=tempTransform,this.renderer.render(_,{renderTexture:at,transform:this._tempMatrix,skipUpdateTransform:!!_.parent,blit:!0}),_.transform=ct,at}destroy(){}}GenerateTextureSystem.extension={type:[ExtensionType.RendererSystem,ExtensionType.CanvasRendererSystem],name:"textureGenerator"};extensions$1.add(GenerateTextureSystem);const tempRect=new Rectangle,tempRect2=new Rectangle;class RenderTextureSystem{constructor(_){this.renderer=_,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Rectangle,this.destinationFrame=new Rectangle,this.viewportFrame=new Rectangle}contextChange(){var et;const _=(et=this.renderer)==null?void 0:et.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(_&&_.alpha&&_.premultipliedAlpha)}bind(_=null,et,tt){const rt=this.renderer;this.current=_;let it,st,at;_?(it=_.baseTexture,at=it.resolution,et||(tempRect.width=_.frame.width,tempRect.height=_.frame.height,et=tempRect),tt||(tempRect2.x=_.frame.x,tempRect2.y=_.frame.y,tempRect2.width=et.width,tempRect2.height=et.height,tt=tempRect2),st=it.framebuffer):(at=rt.resolution,et||(tempRect.width=rt._view.screen.width,tempRect.height=rt._view.screen.height,et=tempRect),tt||(tt=tempRect,tt.width=et.width,tt.height=et.height));const ct=this.viewportFrame;ct.x=tt.x*at,ct.y=tt.y*at,ct.width=tt.width*at,ct.height=tt.height*at,_||(ct.y=rt.view.height-(ct.y+ct.height)),ct.ceil(),this.renderer.framebuffer.bind(st,ct),this.renderer.projection.update(tt,et,at,!st),_?this.renderer.mask.setMaskStack(it.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(et),this.destinationFrame.copyFrom(tt)}clear(_,et){const tt=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,rt=Color.shared.setValue(_||tt);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&rt.premultiply(rt.alpha);const it=this.destinationFrame,st=this.current?this.current.baseTexture:this.renderer._view.screen,at=it.width!==st.width||it.height!==st.height;if(at){let{x:ct,y:ut,width:dt,height:ot}=this.viewportFrame;ct=Math.round(ct),ut=Math.round(ut),dt=Math.round(dt),ot=Math.round(ot),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(ct,ut,dt,ot)}this.renderer.framebuffer.clear(rt.red,rt.green,rt.blue,rt.alpha,et),at&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}RenderTextureSystem.extension={type:ExtensionType.RendererSystem,name:"renderTexture"};extensions$1.add(RenderTextureSystem);class GLProgram{constructor(_,et){this.program=_,this.uniformData=et,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function getAttributeData(_e,_){const et={},tt=_.getProgramParameter(_e,_.ACTIVE_ATTRIBUTES);for(let rt=0;rt<tt;rt++){const it=_.getActiveAttrib(_e,rt);if(it.name.startsWith("gl_"))continue;const st=mapType(_,it.type),at={type:st,name:it.name,size:mapSize(st),location:_.getAttribLocation(_e,it.name)};et[it.name]=at}return et}function getUniformData(_e,_){const et={},tt=_.getProgramParameter(_e,_.ACTIVE_UNIFORMS);for(let rt=0;rt<tt;rt++){const it=_.getActiveUniform(_e,rt),st=it.name.replace(/\[.*?\]$/,""),at=!!it.name.match(/\[.*?\]$/),ct=mapType(_,it.type);et[st]={name:st,index:rt,type:ct,size:it.size,isArray:at,value:defaultValue(ct,it.size)}}return et}function generateProgram(_e,_){var at;const et=compileShader(_e,_e.VERTEX_SHADER,_.vertexSrc),tt=compileShader(_e,_e.FRAGMENT_SHADER,_.fragmentSrc),rt=_e.createProgram();_e.attachShader(rt,et),_e.attachShader(rt,tt);const it=(at=_.extra)==null?void 0:at.transformFeedbackVaryings;if(it&&(typeof _e.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):_e.transformFeedbackVaryings(rt,it.names,it.bufferMode==="separate"?_e.SEPARATE_ATTRIBS:_e.INTERLEAVED_ATTRIBS)),_e.linkProgram(rt),_e.getProgramParameter(rt,_e.LINK_STATUS)||logProgramError(_e,rt,et,tt),_.attributeData=getAttributeData(rt,_e),_.uniformData=getUniformData(rt,_e),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(_.vertexSrc)){const ct=Object.keys(_.attributeData);ct.sort((ut,dt)=>ut>dt?1:-1);for(let ut=0;ut<ct.length;ut++)_.attributeData[ct[ut]].location=ut,_e.bindAttribLocation(rt,ut,ct[ut]);_e.linkProgram(rt)}_e.deleteShader(et),_e.deleteShader(tt);const st={};for(const ct in _.uniformData){const ut=_.uniformData[ct];st[ct]={location:_e.getUniformLocation(rt,ct),value:defaultValue(ut.type,ut.size)}}return new GLProgram(rt,st)}function uboUpdate(_e,_,et,tt,rt){et.buffer.update(rt)}const UBO_TO_SINGLE_SETTERS={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},GLSL_TO_STD40_SIZE={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function createUBOElements(_e){const _=_e.map(it=>({data:it,offset:0,dataLen:0,dirty:0}));let et=0,tt=0,rt=0;for(let it=0;it<_.length;it++){const st=_[it];if(et=GLSL_TO_STD40_SIZE[st.data.type],st.data.size>1&&(et=Math.max(et,16)*st.data.size),st.dataLen=et,tt%et!==0&&tt<16){const at=tt%et%16;tt+=at,rt+=at}tt+et>16?(rt=Math.ceil(rt/16)*16,st.offset=rt,rt+=et,tt=et):(st.offset=rt,tt+=et,rt+=et)}return rt=Math.ceil(rt/16)*16,{uboElements:_,size:rt}}function getUBOData(_e,_){const et=[];for(const tt in _e)_[tt]&&et.push(_[tt]);return et.sort((tt,rt)=>tt.index-rt.index),et}function generateUniformBufferSync(_e,_){if(!_e.autoManage)return{size:0,syncFunc:uboUpdate};const et=getUBOData(_e.uniforms,_),{uboElements:tt,size:rt}=createUBOElements(et),it=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let st=0;st<tt.length;st++){const at=tt[st],ct=_e.uniforms[at.data.name],ut=at.data.name;let dt=!1;for(let ot=0;ot<uniformParsers.length;ot++){const nt=uniformParsers[ot];if(nt.codeUbo&&nt.test(at.data,ct)){it.push(`offset = ${at.offset/4};`,uniformParsers[ot].codeUbo(at.data.name,ct)),dt=!0;break}}if(!dt)if(at.data.size>1){const ot=mapSize(at.data.type),nt=Math.max(GLSL_TO_STD40_SIZE[at.data.type]/16,1),lt=ot/nt,ht=(4-lt%4)%4;it.push(`
                cv = ud.${ut}.value;
                v = uv.${ut};
                offset = ${at.offset/4};

                t = 0;

                for(var i=0; i < ${at.data.size*nt}; i++)
                {
                    for(var j = 0; j < ${lt}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${ht};
                }

                `)}else{const ot=UBO_TO_SINGLE_SETTERS[at.data.type];it.push(`
                cv = ud.${ut}.value;
                v = uv.${ut};
                offset = ${at.offset/4};
                ${ot};
                `)}}return it.push(`
       renderer.buffer.update(buffer);
    `),{size:rt,syncFunc:new Function("ud","uv","renderer","syncData","buffer",it.join(`
`))}}let UID=0;const defaultSyncData={textureCount:0,uboCount:0};class ShaderSystem{constructor(_){this.destroyed=!1,this.renderer=_,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=UID++}systemCheck(){if(!unsafeEvalSupported())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(_){this.gl=_,this.reset()}bind(_,et){_.disposeRunner.add(this),_.uniforms.globals=this.renderer.globalUniforms;const tt=_.program,rt=tt.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(_);return this.shader=_,this.program!==tt&&(this.program=tt,this.gl.useProgram(rt.program)),et||(defaultSyncData.textureCount=0,defaultSyncData.uboCount=0,this.syncUniformGroup(_.uniformGroup,defaultSyncData)),rt}setUniforms(_){const et=this.shader.program,tt=et.glPrograms[this.renderer.CONTEXT_UID];et.syncUniforms(tt.uniformData,_,this.renderer)}syncUniformGroup(_,et){const tt=this.getGlProgram();(!_.static||_.dirtyId!==tt.uniformDirtyGroups[_.id])&&(tt.uniformDirtyGroups[_.id]=_.dirtyId,this.syncUniforms(_,tt,et))}syncUniforms(_,et,tt){(_.syncUniforms[this.shader.program.id]||this.createSyncGroups(_))(et.uniformData,_.uniforms,this.renderer,tt)}createSyncGroups(_){const et=this.getSignature(_,this.shader.program.uniformData,"u");return this.cache[et]||(this.cache[et]=generateUniformsSync(_,this.shader.program.uniformData)),_.syncUniforms[this.shader.program.id]=this.cache[et],_.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(_,et){const tt=this.getGlProgram();if(!_.static||_.dirtyId!==0||!tt.uniformGroups[_.id]){_.dirtyId=0;const rt=tt.uniformGroups[_.id]||this.createSyncBufferGroup(_,tt,et);_.buffer.update(),rt(tt.uniformData,_.uniforms,this.renderer,defaultSyncData,_.buffer)}this.renderer.buffer.bindBufferBase(_.buffer,tt.uniformBufferBindings[et])}createSyncBufferGroup(_,et,tt){const{gl:rt}=this.renderer;this.renderer.buffer.bind(_.buffer);const it=this.gl.getUniformBlockIndex(et.program,tt);et.uniformBufferBindings[tt]=this.shader.uniformBindCount,rt.uniformBlockBinding(et.program,it,this.shader.uniformBindCount),this.shader.uniformBindCount++;const st=this.getSignature(_,this.shader.program.uniformData,"ubo");let at=this._uboCache[st];if(at||(at=this._uboCache[st]=generateUniformBufferSync(_,this.shader.program.uniformData)),_.autoManage){const ct=new Float32Array(at.size/4);_.buffer.update(ct)}return et.uniformGroups[_.id]=at.syncFunc,et.uniformGroups[_.id]}getSignature(_,et,tt){const rt=_.uniforms,it=[`${tt}-`];for(const st in rt)it.push(st),et[st]&&it.push(et[st].type);return it.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(_){const et=this.gl,tt=_.program,rt=generateProgram(et,tt);return tt.glPrograms[this.renderer.CONTEXT_UID]=rt,rt}reset(){this.program=null,this.shader=null}disposeShader(_){this.shader===_&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}ShaderSystem.extension={type:ExtensionType.RendererSystem,name:"shader"};extensions$1.add(ShaderSystem);class StartupSystem{constructor(_){this.renderer=_}run(_){const{renderer:et}=this;et.runners.init.emit(et.options),_.hello&&console.log(`PixiJS 7.4.2 - ${et.rendererLogId} - https://pixijs.com`),et.resize(et.screen.width,et.screen.height)}destroy(){}}StartupSystem.defaultOptions={hello:!1},StartupSystem.extension={type:[ExtensionType.RendererSystem,ExtensionType.CanvasRendererSystem],name:"startup"};extensions$1.add(StartupSystem);function mapWebGLBlendModesToPixi(_e,_=[]){return _[BLEND_MODES.NORMAL]=[_e.ONE,_e.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.ADD]=[_e.ONE,_e.ONE],_[BLEND_MODES.MULTIPLY]=[_e.DST_COLOR,_e.ONE_MINUS_SRC_ALPHA,_e.ONE,_e.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.SCREEN]=[_e.ONE,_e.ONE_MINUS_SRC_COLOR,_e.ONE,_e.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.OVERLAY]=[_e.ONE,_e.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.DARKEN]=[_e.ONE,_e.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.LIGHTEN]=[_e.ONE,_e.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.COLOR_DODGE]=[_e.ONE,_e.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.COLOR_BURN]=[_e.ONE,_e.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.HARD_LIGHT]=[_e.ONE,_e.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.SOFT_LIGHT]=[_e.ONE,_e.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.DIFFERENCE]=[_e.ONE,_e.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.EXCLUSION]=[_e.ONE,_e.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.HUE]=[_e.ONE,_e.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.SATURATION]=[_e.ONE,_e.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.COLOR]=[_e.ONE,_e.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.LUMINOSITY]=[_e.ONE,_e.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.NONE]=[0,0],_[BLEND_MODES.NORMAL_NPM]=[_e.SRC_ALPHA,_e.ONE_MINUS_SRC_ALPHA,_e.ONE,_e.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.ADD_NPM]=[_e.SRC_ALPHA,_e.ONE,_e.ONE,_e.ONE],_[BLEND_MODES.SCREEN_NPM]=[_e.SRC_ALPHA,_e.ONE_MINUS_SRC_COLOR,_e.ONE,_e.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.SRC_IN]=[_e.DST_ALPHA,_e.ZERO],_[BLEND_MODES.SRC_OUT]=[_e.ONE_MINUS_DST_ALPHA,_e.ZERO],_[BLEND_MODES.SRC_ATOP]=[_e.DST_ALPHA,_e.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.DST_OVER]=[_e.ONE_MINUS_DST_ALPHA,_e.ONE],_[BLEND_MODES.DST_IN]=[_e.ZERO,_e.SRC_ALPHA],_[BLEND_MODES.DST_OUT]=[_e.ZERO,_e.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.DST_ATOP]=[_e.ONE_MINUS_DST_ALPHA,_e.SRC_ALPHA],_[BLEND_MODES.XOR]=[_e.ONE_MINUS_DST_ALPHA,_e.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.SUBTRACT]=[_e.ONE,_e.ONE,_e.ONE,_e.ONE,_e.FUNC_REVERSE_SUBTRACT,_e.FUNC_ADD],_}const BLEND=0,OFFSET=1,CULLING=2,DEPTH_TEST=3,WINDING=4,DEPTH_MASK=5,_StateSystem=class cs{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=BLEND_MODES.NONE,this._blendEq=!1,this.map=[],this.map[BLEND]=this.setBlend,this.map[OFFSET]=this.setOffset,this.map[CULLING]=this.setCullFace,this.map[DEPTH_TEST]=this.setDepthTest,this.map[WINDING]=this.setFrontFace,this.map[DEPTH_MASK]=this.setDepthMask,this.checks=[],this.defaultState=new State,this.defaultState.blend=!0}contextChange(_){this.gl=_,this.blendModes=mapWebGLBlendModesToPixi(_),this.set(this.defaultState),this.reset()}set(_){if(_=_||this.defaultState,this.stateId!==_.data){let et=this.stateId^_.data,tt=0;for(;et;)et&1&&this.map[tt].call(this,!!(_.data&1<<tt)),et=et>>1,tt++;this.stateId=_.data}for(let et=0;et<this.checks.length;et++)this.checks[et](this,_)}forceState(_){_=_||this.defaultState;for(let et=0;et<this.map.length;et++)this.map[et].call(this,!!(_.data&1<<et));for(let et=0;et<this.checks.length;et++)this.checks[et](this,_);this.stateId=_.data}setBlend(_){this.updateCheck(cs.checkBlendMode,_),this.gl[_?"enable":"disable"](this.gl.BLEND)}setOffset(_){this.updateCheck(cs.checkPolygonOffset,_),this.gl[_?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(_){this.gl[_?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(_){this.gl.depthMask(_)}setCullFace(_){this.gl[_?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(_){this.gl.frontFace(this.gl[_?"CW":"CCW"])}setBlendMode(_){if(_===this.blendMode)return;this.blendMode=_;const et=this.blendModes[_],tt=this.gl;et.length===2?tt.blendFunc(et[0],et[1]):tt.blendFuncSeparate(et[0],et[1],et[2],et[3]),et.length===6?(this._blendEq=!0,tt.blendEquationSeparate(et[4],et[5])):this._blendEq&&(this._blendEq=!1,tt.blendEquationSeparate(tt.FUNC_ADD,tt.FUNC_ADD))}setPolygonOffset(_,et){this.gl.polygonOffset(_,et)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(_,et){const tt=this.checks.indexOf(_);et&&tt===-1?this.checks.push(_):!et&&tt!==-1&&this.checks.splice(tt,1)}static checkBlendMode(_,et){_.setBlendMode(et.blendMode)}static checkPolygonOffset(_,et){_.setPolygonOffset(1,et.polygonOffset)}destroy(){this.gl=null}};_StateSystem.extension={type:ExtensionType.RendererSystem,name:"state"};let StateSystem=_StateSystem;extensions$1.add(StateSystem);class SystemManager extends EventEmitter{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(_){this.addRunners(..._.runners);const et=(_.priority??[]).filter(rt=>_.systems[rt]),tt=[...et,...Object.keys(_.systems).filter(rt=>!et.includes(rt))];for(const rt of tt)this.addSystem(_.systems[rt],rt)}addRunners(..._){_.forEach(et=>{this.runners[et]=new Runner(et)})}addSystem(_,et){const tt=new _(this);if(this[et])throw new Error(`Whoops! The name "${et}" is already in use`);this[et]=tt,this._systemsHash[et]=tt;for(const rt in this.runners)this.runners[rt].add(tt);return this}emitWithCustomOptions(_,et){const tt=Object.keys(this._systemsHash);_.items.forEach(rt=>{const it=tt.find(st=>this._systemsHash[st]===rt);rt[_.name](et[it])})}destroy(){Object.values(this.runners).forEach(_=>{_.destroy()}),this._systemsHash={}}}const _TextureGCSystem=class es{constructor(_){this.renderer=_,this.count=0,this.checkCount=0,this.maxIdle=es.defaultMaxIdle,this.checkCountMax=es.defaultCheckCountMax,this.mode=es.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==GC_MODES.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const _=this.renderer.texture,et=_.managedTextures;let tt=!1;for(let rt=0;rt<et.length;rt++){const it=et[rt];it.resource&&this.count-it.touched>this.maxIdle&&(_.destroyTexture(it,!0),et[rt]=null,tt=!0)}if(tt){let rt=0;for(let it=0;it<et.length;it++)et[it]!==null&&(et[rt++]=et[it]);et.length=rt}}unload(_){const et=this.renderer.texture,tt=_._texture;tt&&!tt.framebuffer&&et.destroyTexture(tt);for(let rt=_.children.length-1;rt>=0;rt--)this.unload(_.children[rt])}destroy(){this.renderer=null}};_TextureGCSystem.defaultMode=GC_MODES.AUTO,_TextureGCSystem.defaultMaxIdle=60*60,_TextureGCSystem.defaultCheckCountMax=60*10,_TextureGCSystem.extension={type:ExtensionType.RendererSystem,name:"textureGC"};let TextureGCSystem=_TextureGCSystem;extensions$1.add(TextureGCSystem);class GLTexture{constructor(_){this.texture=_,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=TYPES.UNSIGNED_BYTE,this.internalFormat=FORMATS.RGBA,this.samplerType=0}}function mapInternalFormatToSamplerType(_e){let _;return"WebGL2RenderingContext"in globalThis&&_e instanceof globalThis.WebGL2RenderingContext?_={[_e.RGB]:SAMPLER_TYPES.FLOAT,[_e.RGBA]:SAMPLER_TYPES.FLOAT,[_e.ALPHA]:SAMPLER_TYPES.FLOAT,[_e.LUMINANCE]:SAMPLER_TYPES.FLOAT,[_e.LUMINANCE_ALPHA]:SAMPLER_TYPES.FLOAT,[_e.R8]:SAMPLER_TYPES.FLOAT,[_e.R8_SNORM]:SAMPLER_TYPES.FLOAT,[_e.RG8]:SAMPLER_TYPES.FLOAT,[_e.RG8_SNORM]:SAMPLER_TYPES.FLOAT,[_e.RGB8]:SAMPLER_TYPES.FLOAT,[_e.RGB8_SNORM]:SAMPLER_TYPES.FLOAT,[_e.RGB565]:SAMPLER_TYPES.FLOAT,[_e.RGBA4]:SAMPLER_TYPES.FLOAT,[_e.RGB5_A1]:SAMPLER_TYPES.FLOAT,[_e.RGBA8]:SAMPLER_TYPES.FLOAT,[_e.RGBA8_SNORM]:SAMPLER_TYPES.FLOAT,[_e.RGB10_A2]:SAMPLER_TYPES.FLOAT,[_e.RGB10_A2UI]:SAMPLER_TYPES.FLOAT,[_e.SRGB8]:SAMPLER_TYPES.FLOAT,[_e.SRGB8_ALPHA8]:SAMPLER_TYPES.FLOAT,[_e.R16F]:SAMPLER_TYPES.FLOAT,[_e.RG16F]:SAMPLER_TYPES.FLOAT,[_e.RGB16F]:SAMPLER_TYPES.FLOAT,[_e.RGBA16F]:SAMPLER_TYPES.FLOAT,[_e.R32F]:SAMPLER_TYPES.FLOAT,[_e.RG32F]:SAMPLER_TYPES.FLOAT,[_e.RGB32F]:SAMPLER_TYPES.FLOAT,[_e.RGBA32F]:SAMPLER_TYPES.FLOAT,[_e.R11F_G11F_B10F]:SAMPLER_TYPES.FLOAT,[_e.RGB9_E5]:SAMPLER_TYPES.FLOAT,[_e.R8I]:SAMPLER_TYPES.INT,[_e.R8UI]:SAMPLER_TYPES.UINT,[_e.R16I]:SAMPLER_TYPES.INT,[_e.R16UI]:SAMPLER_TYPES.UINT,[_e.R32I]:SAMPLER_TYPES.INT,[_e.R32UI]:SAMPLER_TYPES.UINT,[_e.RG8I]:SAMPLER_TYPES.INT,[_e.RG8UI]:SAMPLER_TYPES.UINT,[_e.RG16I]:SAMPLER_TYPES.INT,[_e.RG16UI]:SAMPLER_TYPES.UINT,[_e.RG32I]:SAMPLER_TYPES.INT,[_e.RG32UI]:SAMPLER_TYPES.UINT,[_e.RGB8I]:SAMPLER_TYPES.INT,[_e.RGB8UI]:SAMPLER_TYPES.UINT,[_e.RGB16I]:SAMPLER_TYPES.INT,[_e.RGB16UI]:SAMPLER_TYPES.UINT,[_e.RGB32I]:SAMPLER_TYPES.INT,[_e.RGB32UI]:SAMPLER_TYPES.UINT,[_e.RGBA8I]:SAMPLER_TYPES.INT,[_e.RGBA8UI]:SAMPLER_TYPES.UINT,[_e.RGBA16I]:SAMPLER_TYPES.INT,[_e.RGBA16UI]:SAMPLER_TYPES.UINT,[_e.RGBA32I]:SAMPLER_TYPES.INT,[_e.RGBA32UI]:SAMPLER_TYPES.UINT,[_e.DEPTH_COMPONENT16]:SAMPLER_TYPES.FLOAT,[_e.DEPTH_COMPONENT24]:SAMPLER_TYPES.FLOAT,[_e.DEPTH_COMPONENT32F]:SAMPLER_TYPES.FLOAT,[_e.DEPTH_STENCIL]:SAMPLER_TYPES.FLOAT,[_e.DEPTH24_STENCIL8]:SAMPLER_TYPES.FLOAT,[_e.DEPTH32F_STENCIL8]:SAMPLER_TYPES.FLOAT}:_={[_e.RGB]:SAMPLER_TYPES.FLOAT,[_e.RGBA]:SAMPLER_TYPES.FLOAT,[_e.ALPHA]:SAMPLER_TYPES.FLOAT,[_e.LUMINANCE]:SAMPLER_TYPES.FLOAT,[_e.LUMINANCE_ALPHA]:SAMPLER_TYPES.FLOAT,[_e.DEPTH_STENCIL]:SAMPLER_TYPES.FLOAT},_}function mapTypeAndFormatToInternalFormat(_e){let _;return"WebGL2RenderingContext"in globalThis&&_e instanceof globalThis.WebGL2RenderingContext?_={[TYPES.UNSIGNED_BYTE]:{[FORMATS.RGBA]:_e.RGBA8,[FORMATS.RGB]:_e.RGB8,[FORMATS.RG]:_e.RG8,[FORMATS.RED]:_e.R8,[FORMATS.RGBA_INTEGER]:_e.RGBA8UI,[FORMATS.RGB_INTEGER]:_e.RGB8UI,[FORMATS.RG_INTEGER]:_e.RG8UI,[FORMATS.RED_INTEGER]:_e.R8UI,[FORMATS.ALPHA]:_e.ALPHA,[FORMATS.LUMINANCE]:_e.LUMINANCE,[FORMATS.LUMINANCE_ALPHA]:_e.LUMINANCE_ALPHA},[TYPES.BYTE]:{[FORMATS.RGBA]:_e.RGBA8_SNORM,[FORMATS.RGB]:_e.RGB8_SNORM,[FORMATS.RG]:_e.RG8_SNORM,[FORMATS.RED]:_e.R8_SNORM,[FORMATS.RGBA_INTEGER]:_e.RGBA8I,[FORMATS.RGB_INTEGER]:_e.RGB8I,[FORMATS.RG_INTEGER]:_e.RG8I,[FORMATS.RED_INTEGER]:_e.R8I},[TYPES.UNSIGNED_SHORT]:{[FORMATS.RGBA_INTEGER]:_e.RGBA16UI,[FORMATS.RGB_INTEGER]:_e.RGB16UI,[FORMATS.RG_INTEGER]:_e.RG16UI,[FORMATS.RED_INTEGER]:_e.R16UI,[FORMATS.DEPTH_COMPONENT]:_e.DEPTH_COMPONENT16},[TYPES.SHORT]:{[FORMATS.RGBA_INTEGER]:_e.RGBA16I,[FORMATS.RGB_INTEGER]:_e.RGB16I,[FORMATS.RG_INTEGER]:_e.RG16I,[FORMATS.RED_INTEGER]:_e.R16I},[TYPES.UNSIGNED_INT]:{[FORMATS.RGBA_INTEGER]:_e.RGBA32UI,[FORMATS.RGB_INTEGER]:_e.RGB32UI,[FORMATS.RG_INTEGER]:_e.RG32UI,[FORMATS.RED_INTEGER]:_e.R32UI,[FORMATS.DEPTH_COMPONENT]:_e.DEPTH_COMPONENT24},[TYPES.INT]:{[FORMATS.RGBA_INTEGER]:_e.RGBA32I,[FORMATS.RGB_INTEGER]:_e.RGB32I,[FORMATS.RG_INTEGER]:_e.RG32I,[FORMATS.RED_INTEGER]:_e.R32I},[TYPES.FLOAT]:{[FORMATS.RGBA]:_e.RGBA32F,[FORMATS.RGB]:_e.RGB32F,[FORMATS.RG]:_e.RG32F,[FORMATS.RED]:_e.R32F,[FORMATS.DEPTH_COMPONENT]:_e.DEPTH_COMPONENT32F},[TYPES.HALF_FLOAT]:{[FORMATS.RGBA]:_e.RGBA16F,[FORMATS.RGB]:_e.RGB16F,[FORMATS.RG]:_e.RG16F,[FORMATS.RED]:_e.R16F},[TYPES.UNSIGNED_SHORT_5_6_5]:{[FORMATS.RGB]:_e.RGB565},[TYPES.UNSIGNED_SHORT_4_4_4_4]:{[FORMATS.RGBA]:_e.RGBA4},[TYPES.UNSIGNED_SHORT_5_5_5_1]:{[FORMATS.RGBA]:_e.RGB5_A1},[TYPES.UNSIGNED_INT_2_10_10_10_REV]:{[FORMATS.RGBA]:_e.RGB10_A2,[FORMATS.RGBA_INTEGER]:_e.RGB10_A2UI},[TYPES.UNSIGNED_INT_10F_11F_11F_REV]:{[FORMATS.RGB]:_e.R11F_G11F_B10F},[TYPES.UNSIGNED_INT_5_9_9_9_REV]:{[FORMATS.RGB]:_e.RGB9_E5},[TYPES.UNSIGNED_INT_24_8]:{[FORMATS.DEPTH_STENCIL]:_e.DEPTH24_STENCIL8},[TYPES.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[FORMATS.DEPTH_STENCIL]:_e.DEPTH32F_STENCIL8}}:_={[TYPES.UNSIGNED_BYTE]:{[FORMATS.RGBA]:_e.RGBA,[FORMATS.RGB]:_e.RGB,[FORMATS.ALPHA]:_e.ALPHA,[FORMATS.LUMINANCE]:_e.LUMINANCE,[FORMATS.LUMINANCE_ALPHA]:_e.LUMINANCE_ALPHA},[TYPES.UNSIGNED_SHORT_5_6_5]:{[FORMATS.RGB]:_e.RGB},[TYPES.UNSIGNED_SHORT_4_4_4_4]:{[FORMATS.RGBA]:_e.RGBA},[TYPES.UNSIGNED_SHORT_5_5_5_1]:{[FORMATS.RGBA]:_e.RGBA}},_}class TextureSystem{constructor(_){this.renderer=_,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new BaseTexture,this.hasIntegerTextures=!1}contextChange(){const _=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=mapTypeAndFormatToInternalFormat(_),this.samplerTypes=mapInternalFormatToSamplerType(_);const et=_.getParameter(_.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=et;for(let rt=0;rt<et;rt++)this.boundTextures[rt]=null;this.emptyTextures={};const tt=new GLTexture(_.createTexture());_.bindTexture(_.TEXTURE_2D,tt.texture),_.texImage2D(_.TEXTURE_2D,0,_.RGBA,1,1,0,_.RGBA,_.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[_.TEXTURE_2D]=tt,this.emptyTextures[_.TEXTURE_CUBE_MAP]=new GLTexture(_.createTexture()),_.bindTexture(_.TEXTURE_CUBE_MAP,this.emptyTextures[_.TEXTURE_CUBE_MAP].texture);for(let rt=0;rt<6;rt++)_.texImage2D(_.TEXTURE_CUBE_MAP_POSITIVE_X+rt,0,_.RGBA,1,1,0,_.RGBA,_.UNSIGNED_BYTE,null);_.texParameteri(_.TEXTURE_CUBE_MAP,_.TEXTURE_MAG_FILTER,_.LINEAR),_.texParameteri(_.TEXTURE_CUBE_MAP,_.TEXTURE_MIN_FILTER,_.LINEAR);for(let rt=0;rt<this.boundTextures.length;rt++)this.bind(null,rt)}bind(_,et=0){const{gl:tt}=this;if(_=_==null?void 0:_.castToBaseTexture(),(_==null?void 0:_.valid)&&!_.parentTextureArray){_.touched=this.renderer.textureGC.count;const rt=_._glTextures[this.CONTEXT_UID]||this.initTexture(_);this.boundTextures[et]!==_&&(this.currentLocation!==et&&(this.currentLocation=et,tt.activeTexture(tt.TEXTURE0+et)),tt.bindTexture(_.target,rt.texture)),rt.dirtyId!==_.dirtyId?(this.currentLocation!==et&&(this.currentLocation=et,tt.activeTexture(tt.TEXTURE0+et)),this.updateTexture(_)):rt.dirtyStyleId!==_.dirtyStyleId&&this.updateTextureStyle(_),this.boundTextures[et]=_}else this.currentLocation!==et&&(this.currentLocation=et,tt.activeTexture(tt.TEXTURE0+et)),tt.bindTexture(tt.TEXTURE_2D,this.emptyTextures[tt.TEXTURE_2D].texture),this.boundTextures[et]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let _=0;_<this.boundTextures.length;_++)this.boundTextures[_]=this.unknownTexture}unbind(_){const{gl:et,boundTextures:tt}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let rt=0;rt<tt.length;rt++)tt[rt]===this.unknownTexture&&this.bind(null,rt)}for(let rt=0;rt<tt.length;rt++)tt[rt]===_&&(this.currentLocation!==rt&&(et.activeTexture(et.TEXTURE0+rt),this.currentLocation=rt),et.bindTexture(_.target,this.emptyTextures[_.target].texture),tt[rt]=null)}ensureSamplerType(_){const{boundTextures:et,hasIntegerTextures:tt,CONTEXT_UID:rt}=this;if(tt)for(let it=_-1;it>=0;--it){const st=et[it];st&&st._glTextures[rt].samplerType!==SAMPLER_TYPES.FLOAT&&this.renderer.texture.unbind(st)}}initTexture(_){const et=new GLTexture(this.gl.createTexture());return et.dirtyId=-1,_._glTextures[this.CONTEXT_UID]=et,this.managedTextures.push(_),_.on("dispose",this.destroyTexture,this),et}initTextureType(_,et){var tt;et.internalFormat=((tt=this.internalFormats[_.type])==null?void 0:tt[_.format])??_.format,et.samplerType=this.samplerTypes[et.internalFormat]??SAMPLER_TYPES.FLOAT,this.webGLVersion===2&&_.type===TYPES.HALF_FLOAT?et.type=this.gl.HALF_FLOAT:et.type=_.type}updateTexture(_){var rt;const et=_._glTextures[this.CONTEXT_UID];if(!et)return;const tt=this.renderer;if(this.initTextureType(_,et),(rt=_.resource)==null?void 0:rt.upload(tt,_,et))et.samplerType!==SAMPLER_TYPES.FLOAT&&(this.hasIntegerTextures=!0);else{const it=_.realWidth,st=_.realHeight,at=tt.gl;(et.width!==it||et.height!==st||et.dirtyId<0)&&(et.width=it,et.height=st,at.texImage2D(_.target,0,et.internalFormat,it,st,0,_.format,et.type,null))}_.dirtyStyleId!==et.dirtyStyleId&&this.updateTextureStyle(_),et.dirtyId=_.dirtyId}destroyTexture(_,et){const{gl:tt}=this;if(_=_.castToBaseTexture(),_._glTextures[this.CONTEXT_UID]&&(this.unbind(_),tt.deleteTexture(_._glTextures[this.CONTEXT_UID].texture),_.off("dispose",this.destroyTexture,this),delete _._glTextures[this.CONTEXT_UID],!et)){const rt=this.managedTextures.indexOf(_);rt!==-1&&removeItems(this.managedTextures,rt,1)}}updateTextureStyle(_){var tt;const et=_._glTextures[this.CONTEXT_UID];et&&((_.mipmap===MIPMAP_MODES.POW2||this.webGLVersion!==2)&&!_.isPowerOfTwo?et.mipmap=!1:et.mipmap=_.mipmap>=1,this.webGLVersion!==2&&!_.isPowerOfTwo?et.wrapMode=WRAP_MODES.CLAMP:et.wrapMode=_.wrapMode,(tt=_.resource)!=null&&tt.style(this.renderer,_,et)||this.setStyle(_,et),et.dirtyStyleId=_.dirtyStyleId)}setStyle(_,et){const tt=this.gl;if(et.mipmap&&_.mipmap!==MIPMAP_MODES.ON_MANUAL&&tt.generateMipmap(_.target),tt.texParameteri(_.target,tt.TEXTURE_WRAP_S,et.wrapMode),tt.texParameteri(_.target,tt.TEXTURE_WRAP_T,et.wrapMode),et.mipmap){tt.texParameteri(_.target,tt.TEXTURE_MIN_FILTER,_.scaleMode===SCALE_MODES.LINEAR?tt.LINEAR_MIPMAP_LINEAR:tt.NEAREST_MIPMAP_NEAREST);const rt=this.renderer.context.extensions.anisotropicFiltering;if(rt&&_.anisotropicLevel>0&&_.scaleMode===SCALE_MODES.LINEAR){const it=Math.min(_.anisotropicLevel,tt.getParameter(rt.MAX_TEXTURE_MAX_ANISOTROPY_EXT));tt.texParameterf(_.target,rt.TEXTURE_MAX_ANISOTROPY_EXT,it)}}else tt.texParameteri(_.target,tt.TEXTURE_MIN_FILTER,_.scaleMode===SCALE_MODES.LINEAR?tt.LINEAR:tt.NEAREST);tt.texParameteri(_.target,tt.TEXTURE_MAG_FILTER,_.scaleMode===SCALE_MODES.LINEAR?tt.LINEAR:tt.NEAREST)}destroy(){this.renderer=null}}TextureSystem.extension={type:ExtensionType.RendererSystem,name:"texture"};extensions$1.add(TextureSystem);class TransformFeedbackSystem{constructor(_){this.renderer=_}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(_){const{gl:et,CONTEXT_UID:tt}=this,rt=_._glTransformFeedbacks[tt]||this.createGLTransformFeedback(_);et.bindTransformFeedback(et.TRANSFORM_FEEDBACK,rt)}unbind(){const{gl:_}=this;_.bindTransformFeedback(_.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(_,et){const{gl:tt,renderer:rt}=this;et&&rt.shader.bind(et),tt.beginTransformFeedback(_)}endTransformFeedback(){const{gl:_}=this;_.endTransformFeedback()}createGLTransformFeedback(_){const{gl:et,renderer:tt,CONTEXT_UID:rt}=this,it=et.createTransformFeedback();_._glTransformFeedbacks[rt]=it,et.bindTransformFeedback(et.TRANSFORM_FEEDBACK,it);for(let st=0;st<_.buffers.length;st++){const at=_.buffers[st];at&&(tt.buffer.update(at),at._glBuffers[rt].refCount++,et.bindBufferBase(et.TRANSFORM_FEEDBACK_BUFFER,st,at._glBuffers[rt].buffer||null))}return et.bindTransformFeedback(et.TRANSFORM_FEEDBACK,null),_.disposeRunner.add(this),it}disposeTransformFeedback(_,et){const tt=_._glTransformFeedbacks[this.CONTEXT_UID],rt=this.gl;_.disposeRunner.remove(this);const it=this.renderer.buffer;if(it)for(let st=0;st<_.buffers.length;st++){const at=_.buffers[st];if(!at)continue;const ct=at._glBuffers[this.CONTEXT_UID];ct&&(ct.refCount--,ct.refCount===0&&!et&&it.dispose(at,et))}tt&&(et||rt.deleteTransformFeedback(tt),delete _._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}TransformFeedbackSystem.extension={type:ExtensionType.RendererSystem,name:"transformFeedback"};extensions$1.add(TransformFeedbackSystem);class ViewSystem{constructor(_){this.renderer=_}init(_){this.screen=new Rectangle(0,0,_.width,_.height),this.element=_.view||settings.ADAPTER.createCanvas(),this.resolution=_.resolution||settings.RESOLUTION,this.autoDensity=!!_.autoDensity}resizeView(_,et){this.element.width=Math.round(_*this.resolution),this.element.height=Math.round(et*this.resolution);const tt=this.element.width/this.resolution,rt=this.element.height/this.resolution;this.screen.width=tt,this.screen.height=rt,this.autoDensity&&(this.element.style.width=`${tt}px`,this.element.style.height=`${rt}px`),this.renderer.emit("resize",tt,rt),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(_){var et;_&&((et=this.element.parentNode)==null||et.removeChild(this.element)),this.renderer=null,this.element=null,this.screen=null}}ViewSystem.defaultOptions={width:800,height:600,resolution:void 0,autoDensity:!1},ViewSystem.extension={type:[ExtensionType.RendererSystem,ExtensionType.CanvasRendererSystem],name:"_view"};extensions$1.add(ViewSystem);settings.PREFER_ENV=ENV.WEBGL2;settings.STRICT_TEXTURE_CACHE=!1;settings.RENDER_OPTIONS={...ContextSystem.defaultOptions,...BackgroundSystem.defaultOptions,...ViewSystem.defaultOptions,...StartupSystem.defaultOptions};Object.defineProperties(settings,{WRAP_MODE:{get(){return BaseTexture.defaultOptions.wrapMode},set(_e){deprecation("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),BaseTexture.defaultOptions.wrapMode=_e}},SCALE_MODE:{get(){return BaseTexture.defaultOptions.scaleMode},set(_e){deprecation("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),BaseTexture.defaultOptions.scaleMode=_e}},MIPMAP_TEXTURES:{get(){return BaseTexture.defaultOptions.mipmap},set(_e){deprecation("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),BaseTexture.defaultOptions.mipmap=_e}},ANISOTROPIC_LEVEL:{get(){return BaseTexture.defaultOptions.anisotropicLevel},set(_e){deprecation("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),BaseTexture.defaultOptions.anisotropicLevel=_e}},FILTER_RESOLUTION:{get(){return deprecation("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),Filter.defaultResolution},set(_e){Filter.defaultResolution=_e}},FILTER_MULTISAMPLE:{get(){return deprecation("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),Filter.defaultMultisample},set(_e){Filter.defaultMultisample=_e}},SPRITE_MAX_TEXTURES:{get(){return BatchRenderer.defaultMaxTextures},set(_e){deprecation("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),BatchRenderer.defaultMaxTextures=_e}},SPRITE_BATCH_SIZE:{get(){return BatchRenderer.defaultBatchSize},set(_e){deprecation("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),BatchRenderer.defaultBatchSize=_e}},CAN_UPLOAD_SAME_BUFFER:{get(){return BatchRenderer.canUploadSameBuffer},set(_e){deprecation("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),BatchRenderer.canUploadSameBuffer=_e}},GC_MODE:{get(){return TextureGCSystem.defaultMode},set(_e){deprecation("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),TextureGCSystem.defaultMode=_e}},GC_MAX_IDLE:{get(){return TextureGCSystem.defaultMaxIdle},set(_e){deprecation("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),TextureGCSystem.defaultMaxIdle=_e}},GC_MAX_CHECK_COUNT:{get(){return TextureGCSystem.defaultCheckCountMax},set(_e){deprecation("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),TextureGCSystem.defaultCheckCountMax=_e}},PRECISION_VERTEX:{get(){return Program.defaultVertexPrecision},set(_e){deprecation("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),Program.defaultVertexPrecision=_e}},PRECISION_FRAGMENT:{get(){return Program.defaultFragmentPrecision},set(_e){deprecation("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),Program.defaultFragmentPrecision=_e}}});var UPDATE_PRIORITY=(_e=>(_e[_e.INTERACTION=50]="INTERACTION",_e[_e.HIGH=25]="HIGH",_e[_e.NORMAL=0]="NORMAL",_e[_e.LOW=-25]="LOW",_e[_e.UTILITY=-50]="UTILITY",_e))(UPDATE_PRIORITY||{});class TickerListener{constructor(_,et=null,tt=0,rt=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=_,this.context=et,this.priority=tt,this.once=rt}match(_,et=null){return this.fn===_&&this.context===et}emit(_){this.fn&&(this.context?this.fn.call(this.context,_):this.fn(_));const et=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),et}connect(_){this.previous=_,_.next&&(_.next.previous=this),this.next=_.next,_.next=this}destroy(_=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const et=this.next;return this.next=_?null:et,this.previous=null,et}}const _Ticker=class Kr{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new TickerListener(null,null,1/0),this.deltaMS=1/Kr.targetFPMS,this.elapsedMS=1/Kr.targetFPMS,this._tick=_=>{this._requestId=null,this.started&&(this.update(_),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(_,et,tt=UPDATE_PRIORITY.NORMAL){return this._addListener(new TickerListener(_,et,tt))}addOnce(_,et,tt=UPDATE_PRIORITY.NORMAL){return this._addListener(new TickerListener(_,et,tt,!0))}_addListener(_){let et=this._head.next,tt=this._head;if(!et)_.connect(tt);else{for(;et;){if(_.priority>et.priority){_.connect(tt);break}tt=et,et=et.next}_.previous||_.connect(tt)}return this._startIfPossible(),this}remove(_,et){let tt=this._head.next;for(;tt;)tt.match(_,et)?tt=tt.destroy():tt=tt.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let _=0,et=this._head;for(;et=et.next;)_++;return _}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let _=this._head.next;for(;_;)_=_.destroy(!0);this._head.destroy(),this._head=null}}update(_=performance.now()){let et;if(_>this.lastTime){if(et=this.elapsedMS=_-this.lastTime,et>this._maxElapsedMS&&(et=this._maxElapsedMS),et*=this.speed,this._minElapsedMS){const it=_-this._lastFrame|0;if(it<this._minElapsedMS)return;this._lastFrame=_-it%this._minElapsedMS}this.deltaMS=et,this.deltaTime=this.deltaMS*Kr.targetFPMS;const tt=this._head;let rt=tt.next;for(;rt;)rt=rt.emit(this.deltaTime);tt.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=_}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(_){const et=Math.min(this.maxFPS,_),tt=Math.min(Math.max(0,et)/1e3,Kr.targetFPMS);this._maxElapsedMS=1/tt}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(_){if(_===0)this._minElapsedMS=0;else{const et=Math.max(this.minFPS,_);this._minElapsedMS=1/(et/1e3)}}static get shared(){if(!Kr._shared){const _=Kr._shared=new Kr;_.autoStart=!0,_._protected=!0}return Kr._shared}static get system(){if(!Kr._system){const _=Kr._system=new Kr;_.autoStart=!0,_._protected=!0}return Kr._system}};_Ticker.targetFPMS=.06;let Ticker=_Ticker;Object.defineProperties(settings,{TARGET_FPMS:{get(){return Ticker.targetFPMS},set(_e){deprecation("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),Ticker.targetFPMS=_e}}});class TickerPlugin{static init(_){_=Object.assign({autoStart:!0,sharedTicker:!1},_),Object.defineProperty(this,"ticker",{set(et){this._ticker&&this._ticker.remove(this.render,this),this._ticker=et,et&&et.add(this.render,this,UPDATE_PRIORITY.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=_.sharedTicker?Ticker.shared:new Ticker,_.autoStart&&this.start()}static destroy(){if(this._ticker){const _=this._ticker;this.ticker=null,_.destroy()}}}TickerPlugin.extension=ExtensionType.Application;extensions$1.add(TickerPlugin);const renderers=[];extensions$1.handleByList(ExtensionType.Renderer,renderers);function autoDetectRenderer(_e){for(const _ of renderers)if(_.test(_e))return new _(_e);throw new Error("Unable to auto-detect a suitable renderer.")}var $defaultVertex=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,$defaultFilterVertex=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const defaultVertex=$defaultVertex,defaultFilterVertex=$defaultFilterVertex;class MultisampleSystem{constructor(_){this.renderer=_}contextChange(_){let et;if(this.renderer.context.webGLVersion===1){const tt=_.getParameter(_.FRAMEBUFFER_BINDING);_.bindFramebuffer(_.FRAMEBUFFER,null),et=_.getParameter(_.SAMPLES),_.bindFramebuffer(_.FRAMEBUFFER,tt)}else{const tt=_.getParameter(_.DRAW_FRAMEBUFFER_BINDING);_.bindFramebuffer(_.DRAW_FRAMEBUFFER,null),et=_.getParameter(_.SAMPLES),_.bindFramebuffer(_.DRAW_FRAMEBUFFER,tt)}et>=MSAA_QUALITY.HIGH?this.multisample=MSAA_QUALITY.HIGH:et>=MSAA_QUALITY.MEDIUM?this.multisample=MSAA_QUALITY.MEDIUM:et>=MSAA_QUALITY.LOW?this.multisample=MSAA_QUALITY.LOW:this.multisample=MSAA_QUALITY.NONE}destroy(){}}MultisampleSystem.extension={type:ExtensionType.RendererSystem,name:"_multisample"};extensions$1.add(MultisampleSystem);class GLBuffer{constructor(_){this.buffer=_||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class BufferSystem{constructor(_){this.renderer=_,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(_){const{gl:et,CONTEXT_UID:tt}=this,rt=_._glBuffers[tt]||this.createGLBuffer(_);et.bindBuffer(_.type,rt.buffer)}unbind(_){const{gl:et}=this;et.bindBuffer(_,null)}bindBufferBase(_,et){const{gl:tt,CONTEXT_UID:rt}=this;if(this.boundBufferBases[et]!==_){const it=_._glBuffers[rt]||this.createGLBuffer(_);this.boundBufferBases[et]=_,tt.bindBufferBase(tt.UNIFORM_BUFFER,et,it.buffer)}}bindBufferRange(_,et,tt){const{gl:rt,CONTEXT_UID:it}=this;tt=tt||0;const st=_._glBuffers[it]||this.createGLBuffer(_);rt.bindBufferRange(rt.UNIFORM_BUFFER,et||0,st.buffer,tt*256,256)}update(_){const{gl:et,CONTEXT_UID:tt}=this,rt=_._glBuffers[tt]||this.createGLBuffer(_);if(_._updateID!==rt.updateID)if(rt.updateID=_._updateID,et.bindBuffer(_.type,rt.buffer),rt.byteLength>=_.data.byteLength)et.bufferSubData(_.type,0,_.data);else{const it=_.static?et.STATIC_DRAW:et.DYNAMIC_DRAW;rt.byteLength=_.data.byteLength,et.bufferData(_.type,_.data,it)}}dispose(_,et){if(!this.managedBuffers[_.id])return;delete this.managedBuffers[_.id];const tt=_._glBuffers[this.CONTEXT_UID],rt=this.gl;_.disposeRunner.remove(this),tt&&(et||rt.deleteBuffer(tt.buffer),delete _._glBuffers[this.CONTEXT_UID])}disposeAll(_){const et=Object.keys(this.managedBuffers);for(let tt=0;tt<et.length;tt++)this.dispose(this.managedBuffers[et[tt]],_)}createGLBuffer(_){const{CONTEXT_UID:et,gl:tt}=this;return _._glBuffers[et]=new GLBuffer(tt.createBuffer()),this.managedBuffers[_.id]=_,_.disposeRunner.add(this),_._glBuffers[et]}}BufferSystem.extension={type:ExtensionType.RendererSystem,name:"buffer"};extensions$1.add(BufferSystem);class ObjectRendererSystem{constructor(_){this.renderer=_}render(_,et){const tt=this.renderer;let rt,it,st,at;if(et&&(rt=et.renderTexture,it=et.clear,st=et.transform,at=et.skipUpdateTransform),this.renderingToScreen=!rt,tt.runners.prerender.emit(),tt.emit("prerender"),tt.projection.transform=st,!tt.context.isLost){if(rt||(this.lastObjectRendered=_),!at){const ct=_.enableTempParent();_.updateTransform(),_.disableTempParent(ct)}tt.renderTexture.bind(rt),tt.batch.currentRenderer.start(),(it??tt.background.clearBeforeRender)&&tt.renderTexture.clear(),_.render(tt),tt.batch.currentRenderer.flush(),rt&&(et.blit&&tt.framebuffer.blit(),rt.baseTexture.update()),tt.runners.postrender.emit(),tt.projection.transform=null,tt.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}ObjectRendererSystem.extension={type:ExtensionType.RendererSystem,name:"objectRenderer"};extensions$1.add(ObjectRendererSystem);const _Renderer=class ds extends SystemManager{constructor(_){super(),this.type=RENDERER_TYPE.WEBGL,_=Object.assign({},settings.RENDER_OPTIONS,_),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new UniformGroup({projectionMatrix:new Matrix},!0);const et={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:ds.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(et),"useContextAlpha"in _&&(deprecation("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),_.premultipliedAlpha=_.useContextAlpha&&_.useContextAlpha!=="notMultiplied",_.backgroundAlpha=_.useContextAlpha===!1?1:_.backgroundAlpha),this._plugin.rendererPlugins=ds.__plugins,this.options=_,this.startup.run(this.options)}static test(_){return _!=null&&_.forceCanvas?!1:isWebGLSupported()}render(_,et){this.objectRenderer.render(_,et)}resize(_,et){this._view.resizeView(_,et)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(_=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:_}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(_){this._view.resolution=_,this.runners.resolutionChange.emit(_)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return deprecation("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return deprecation("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return deprecation("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return deprecation("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(_){deprecation("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=_}get backgroundAlpha(){return deprecation("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(_){deprecation("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=_}get powerPreference(){return deprecation("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(_,et){return this.textureGenerator.generateTexture(_,et)}};_Renderer.extension={type:ExtensionType.Renderer,priority:1},_Renderer.__plugins={},_Renderer.__systems={};let Renderer=_Renderer;extensions$1.handleByMap(ExtensionType.RendererPlugin,Renderer.__plugins);extensions$1.handleByMap(ExtensionType.RendererSystem,Renderer.__systems);extensions$1.add(Renderer);class AbstractMultiResource extends Resource{constructor(_,et){const{width:tt,height:rt}=et||{};super(tt,rt),this.items=[],this.itemDirtyIds=[];for(let it=0;it<_;it++){const st=new BaseTexture;this.items.push(st),this.itemDirtyIds.push(-2)}this.length=_,this._load=null,this.baseTexture=null}initFromArray(_,et){for(let tt=0;tt<this.length;tt++)_[tt]&&(_[tt].castToBaseTexture?this.addBaseTextureAt(_[tt].castToBaseTexture(),tt):_[tt]instanceof Resource?this.addResourceAt(_[tt],tt):this.addResourceAt(autoDetectResource(_[tt],et),tt))}dispose(){for(let _=0,et=this.length;_<et;_++)this.items[_].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(_,et){if(!this.items[et])throw new Error(`Index ${et} is out of bounds`);return _.valid&&!this.valid&&this.resize(_.width,_.height),this.items[et].setResource(_),this}bind(_){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(_);for(let et=0;et<this.length;et++)this.items[et].parentTextureArray=_,this.items[et].on("update",_.update,_)}unbind(_){super.unbind(_);for(let et=0;et<this.length;et++)this.items[et].parentTextureArray=null,this.items[et].off("update",_.update,_)}load(){if(this._load)return this._load;const _=this.items.map(et=>et.resource).filter(et=>et).map(et=>et.load());return this._load=Promise.all(_).then(()=>{const{realWidth:et,realHeight:tt}=this.items[0];return this.resize(et,tt),this.update(),Promise.resolve(this)}),this._load}}class ArrayResource extends AbstractMultiResource{constructor(_,et){const{width:tt,height:rt}=et||{};let it,st;Array.isArray(_)?(it=_,st=_.length):st=_,super(st,{width:tt,height:rt}),it&&this.initFromArray(it,et)}addBaseTextureAt(_,et){if(_.resource)this.addResourceAt(_.resource,et);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(_){super.bind(_),_.target=TARGETS.TEXTURE_2D_ARRAY}upload(_,et,tt){const{length:rt,itemDirtyIds:it,items:st}=this,{gl:at}=_;tt.dirtyId<0&&at.texImage3D(at.TEXTURE_2D_ARRAY,0,tt.internalFormat,this._width,this._height,rt,0,et.format,tt.type,null);for(let ct=0;ct<rt;ct++){const ut=st[ct];it[ct]<ut.dirtyId&&(it[ct]=ut.dirtyId,ut.valid&&at.texSubImage3D(at.TEXTURE_2D_ARRAY,0,0,0,ct,ut.resource.width,ut.resource.height,1,et.format,tt.type,ut.resource.source))}return!0}}class CanvasResource extends BaseImageResource{constructor(_){super(_)}static test(_){const{OffscreenCanvas:et}=globalThis;return et&&_ instanceof et?!0:globalThis.HTMLCanvasElement&&_ instanceof HTMLCanvasElement}}const _CubeResource=class zn extends AbstractMultiResource{constructor(_,et){const{width:tt,height:rt,autoLoad:it,linkBaseTexture:st}=et||{};if(_&&_.length!==zn.SIDES)throw new Error(`Invalid length. Got ${_.length}, expected 6`);super(6,{width:tt,height:rt});for(let at=0;at<zn.SIDES;at++)this.items[at].target=TARGETS.TEXTURE_CUBE_MAP_POSITIVE_X+at;this.linkBaseTexture=st!==!1,_&&this.initFromArray(_,et),it!==!1&&this.load()}bind(_){super.bind(_),_.target=TARGETS.TEXTURE_CUBE_MAP}addBaseTextureAt(_,et,tt){if(tt===void 0&&(tt=this.linkBaseTexture),!this.items[et])throw new Error(`Index ${et} is out of bounds`);if(!this.linkBaseTexture||_.parentTextureArray||Object.keys(_._glTextures).length>0)if(_.resource)this.addResourceAt(_.resource,et);else throw new Error("CubeResource does not support copying of renderTexture.");else _.target=TARGETS.TEXTURE_CUBE_MAP_POSITIVE_X+et,_.parentTextureArray=this.baseTexture,this.items[et]=_;return _.valid&&!this.valid&&this.resize(_.realWidth,_.realHeight),this.items[et]=_,this}upload(_,et,tt){const rt=this.itemDirtyIds;for(let it=0;it<zn.SIDES;it++){const st=this.items[it];(rt[it]<st.dirtyId||tt.dirtyId<et.dirtyId)&&(st.valid&&st.resource?(st.resource.upload(_,st,tt),rt[it]=st.dirtyId):rt[it]<-1&&(_.gl.texImage2D(st.target,0,tt.internalFormat,et.realWidth,et.realHeight,0,et.format,tt.type,null),rt[it]=-1))}return!0}static test(_){return Array.isArray(_)&&_.length===zn.SIDES}};_CubeResource.SIDES=6;let CubeResource=_CubeResource;class ImageBitmapResource extends BaseImageResource{constructor(_,et){et=et||{};let tt,rt,it;typeof _=="string"?(tt=ImageBitmapResource.EMPTY,rt=_,it=!0):(tt=_,rt=null,it=!1),super(tt),this.url=rt,this.crossOrigin=et.crossOrigin??!0,this.alphaMode=typeof et.alphaMode=="number"?et.alphaMode:null,this.ownsImageBitmap=et.ownsImageBitmap??it,this._load=null,et.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(_,et)=>{if(this.url===null){_(this);return}try{const tt=await settings.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const rt=await tt.blob();if(this.destroyed)return;const it=await createImageBitmap(rt,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===ALPHA_MODES.UNPACK?"premultiply":"none"});if(this.destroyed){it.close();return}this.source=it,this.update(),_(this)}catch(tt){if(this.destroyed)return;et(tt),this.onError.emit(tt)}}),this._load)}upload(_,et,tt){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(et.alphaMode=this.alphaMode),super.upload(_,et,tt)):(this.load(),!1)}dispose(){this.ownsImageBitmap&&this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(_){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof _=="string"||_ instanceof ImageBitmap)}static get EMPTY(){return ImageBitmapResource._EMPTY=ImageBitmapResource._EMPTY??settings.ADAPTER.createCanvas(0,0),ImageBitmapResource._EMPTY}}const _SVGResource=class ts extends BaseImageResource{constructor(_,et){et=et||{},super(settings.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=_,this.scale=et.scale||1,this._overrideWidth=et.width,this._overrideHeight=et.height,this._resolve=null,this._crossorigin=et.crossorigin,this._load=null,et.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(_=>{if(this._resolve=()=>{this.update(),_(this)},ts.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const _=new Image;BaseImageResource.crossOrigin(_,this.svg,this._crossorigin),_.src=this.svg,_.onerror=et=>{this._resolve&&(_.onerror=null,this.onError.emit(et))},_.onload=()=>{if(!this._resolve)return;const et=_.width,tt=_.height;if(!et||!tt)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let rt=et*this.scale,it=tt*this.scale;(this._overrideWidth||this._overrideHeight)&&(rt=this._overrideWidth||this._overrideHeight/tt*et,it=this._overrideHeight||this._overrideWidth/et*tt),rt=Math.round(rt),it=Math.round(it);const st=this.source;st.width=rt,st.height=it,st._pixiId=`canvas_${uid()}`,st.getContext("2d").drawImage(_,0,0,et,tt,0,0,rt,it),this._resolve(),this._resolve=null}}static getSize(_){const et=ts.SVG_SIZE.exec(_),tt={};return et&&(tt[et[1]]=Math.round(parseFloat(et[3])),tt[et[5]]=Math.round(parseFloat(et[7]))),tt}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(_,et){return et==="svg"||typeof _=="string"&&_.startsWith("data:image/svg+xml")||typeof _=="string"&&ts.SVG_XML.test(_)}};_SVGResource.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,_SVGResource.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;let SVGResource=_SVGResource;class VideoFrameResource extends BaseImageResource{constructor(_){super(_)}static test(_){return!!globalThis.VideoFrame&&_ instanceof globalThis.VideoFrame}}const _VideoResource=class hs extends BaseImageResource{constructor(_,et){if(et=et||{},!(_ instanceof HTMLVideoElement)){const tt=document.createElement("video");et.autoLoad!==!1&&tt.setAttribute("preload","auto"),et.playsinline!==!1&&(tt.setAttribute("webkit-playsinline",""),tt.setAttribute("playsinline","")),et.muted===!0&&(tt.setAttribute("muted",""),tt.muted=!0),et.loop===!0&&tt.setAttribute("loop",""),et.autoPlay!==!1&&tt.setAttribute("autoplay",""),typeof _=="string"&&(_=[_]);const rt=_[0].src||_[0];BaseImageResource.crossOrigin(tt,rt,et.crossorigin);for(let it=0;it<_.length;++it){const st=document.createElement("source");let{src:at,mime:ct}=_[it];if(at=at||_[it],at.startsWith("data:"))ct=at.slice(5,at.indexOf(";"));else if(!at.startsWith("blob:")){const ut=at.split("?").shift().toLowerCase(),dt=ut.slice(ut.lastIndexOf(".")+1);ct=ct||hs.MIME_TYPES[dt]||`video/${dt}`}st.src=at,ct&&(st.type=ct),tt.appendChild(st)}_=tt}super(_),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=et.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=et.autoPlay!==!1,this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),et.autoLoad!==!1&&this.load()}update(_=0){if(!this.destroyed){if(this._updateFPS){const et=Ticker.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-et)}(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}_videoFrameRequestCallback(){this.update(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback)}load(){if(this._load)return this._load;const _=this.source;return(_.readyState===_.HAVE_ENOUGH_DATA||_.readyState===_.HAVE_FUTURE_DATA)&&_.width&&_.height&&(_.complete=!0),_.addEventListener("play",this._onPlayStart),_.addEventListener("pause",this._onPlayStop),_.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._onCanPlay():(_.addEventListener("canplay",this._onCanPlay),_.addEventListener("canplaythrough",this._onCanPlay),_.addEventListener("error",this._onError,!0)),this._load=new Promise((et,tt)=>{this.valid?et(this):(this._resolve=et,this._reject=tt,_.load())}),this._load}_onError(_){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(_),this._reject&&(this._reject(_),this._reject=null,this._resolve=null)}_isSourcePlaying(){const _=this.source;return!_.paused&&!_.ended}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0)}_onCanPlay(){const _=this.source;_.removeEventListener("canplay",this._onCanPlay),_.removeEventListener("canplaythrough",this._onCanPlay);const et=this.valid;this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0,!et&&this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&_.play()}dispose(){this._configureAutoUpdate();const _=this.source;_&&(_.removeEventListener("play",this._onPlayStart),_.removeEventListener("pause",this._onPlayStop),_.removeEventListener("seeked",this._onSeeked),_.removeEventListener("canplay",this._onCanPlay),_.removeEventListener("canplaythrough",this._onCanPlay),_.removeEventListener("error",this._onError,!0),_.pause(),_.src="",_.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(_){_!==this._autoUpdate&&(this._autoUpdate=_,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(_){_!==this._updateFPS&&(this._updateFPS=_,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.source.requestVideoFrameCallback?(this._isConnectedToTicker&&(Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(Ticker.shared.add(this.update,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(_,et){return globalThis.HTMLVideoElement&&_ instanceof HTMLVideoElement||hs.TYPES.includes(et)}};_VideoResource.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],_VideoResource.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let VideoResource=_VideoResource;INSTALLED.push(ImageBitmapResource,ImageResource,CanvasResource,VideoResource,VideoFrameResource,SVGResource,BufferResource,CubeResource,ArrayResource);class Bounds{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(_){return this.minX>this.maxX||this.minY>this.maxY?Rectangle.EMPTY:(_=_||new Rectangle(0,0,1,1),_.x=this.minX,_.y=this.minY,_.width=this.maxX-this.minX,_.height=this.maxY-this.minY,_)}addPoint(_){this.minX=Math.min(this.minX,_.x),this.maxX=Math.max(this.maxX,_.x),this.minY=Math.min(this.minY,_.y),this.maxY=Math.max(this.maxY,_.y)}addPointMatrix(_,et){const{a:tt,b:rt,c:it,d:st,tx:at,ty:ct}=_,ut=tt*et.x+it*et.y+at,dt=rt*et.x+st*et.y+ct;this.minX=Math.min(this.minX,ut),this.maxX=Math.max(this.maxX,ut),this.minY=Math.min(this.minY,dt),this.maxY=Math.max(this.maxY,dt)}addQuad(_){let et=this.minX,tt=this.minY,rt=this.maxX,it=this.maxY,st=_[0],at=_[1];et=st<et?st:et,tt=at<tt?at:tt,rt=st>rt?st:rt,it=at>it?at:it,st=_[2],at=_[3],et=st<et?st:et,tt=at<tt?at:tt,rt=st>rt?st:rt,it=at>it?at:it,st=_[4],at=_[5],et=st<et?st:et,tt=at<tt?at:tt,rt=st>rt?st:rt,it=at>it?at:it,st=_[6],at=_[7],et=st<et?st:et,tt=at<tt?at:tt,rt=st>rt?st:rt,it=at>it?at:it,this.minX=et,this.minY=tt,this.maxX=rt,this.maxY=it}addFrame(_,et,tt,rt,it){this.addFrameMatrix(_.worldTransform,et,tt,rt,it)}addFrameMatrix(_,et,tt,rt,it){const st=_.a,at=_.b,ct=_.c,ut=_.d,dt=_.tx,ot=_.ty;let nt=this.minX,lt=this.minY,ht=this.maxX,ft=this.maxY,gt=st*et+ct*tt+dt,mt=at*et+ut*tt+ot;nt=gt<nt?gt:nt,lt=mt<lt?mt:lt,ht=gt>ht?gt:ht,ft=mt>ft?mt:ft,gt=st*rt+ct*tt+dt,mt=at*rt+ut*tt+ot,nt=gt<nt?gt:nt,lt=mt<lt?mt:lt,ht=gt>ht?gt:ht,ft=mt>ft?mt:ft,gt=st*et+ct*it+dt,mt=at*et+ut*it+ot,nt=gt<nt?gt:nt,lt=mt<lt?mt:lt,ht=gt>ht?gt:ht,ft=mt>ft?mt:ft,gt=st*rt+ct*it+dt,mt=at*rt+ut*it+ot,nt=gt<nt?gt:nt,lt=mt<lt?mt:lt,ht=gt>ht?gt:ht,ft=mt>ft?mt:ft,this.minX=nt,this.minY=lt,this.maxX=ht,this.maxY=ft}addVertexData(_,et,tt){let rt=this.minX,it=this.minY,st=this.maxX,at=this.maxY;for(let ct=et;ct<tt;ct+=2){const ut=_[ct],dt=_[ct+1];rt=ut<rt?ut:rt,it=dt<it?dt:it,st=ut>st?ut:st,at=dt>at?dt:at}this.minX=rt,this.minY=it,this.maxX=st,this.maxY=at}addVertices(_,et,tt,rt){this.addVerticesMatrix(_.worldTransform,et,tt,rt)}addVerticesMatrix(_,et,tt,rt,it=0,st=it){const at=_.a,ct=_.b,ut=_.c,dt=_.d,ot=_.tx,nt=_.ty;let lt=this.minX,ht=this.minY,ft=this.maxX,gt=this.maxY;for(let mt=tt;mt<rt;mt+=2){const yt=et[mt],bt=et[mt+1],_t=at*yt+ut*bt+ot,vt=dt*bt+ct*yt+nt;lt=Math.min(lt,_t-it),ft=Math.max(ft,_t+it),ht=Math.min(ht,vt-st),gt=Math.max(gt,vt+st)}this.minX=lt,this.minY=ht,this.maxX=ft,this.maxY=gt}addBounds(_){const et=this.minX,tt=this.minY,rt=this.maxX,it=this.maxY;this.minX=_.minX<et?_.minX:et,this.minY=_.minY<tt?_.minY:tt,this.maxX=_.maxX>rt?_.maxX:rt,this.maxY=_.maxY>it?_.maxY:it}addBoundsMask(_,et){const tt=_.minX>et.minX?_.minX:et.minX,rt=_.minY>et.minY?_.minY:et.minY,it=_.maxX<et.maxX?_.maxX:et.maxX,st=_.maxY<et.maxY?_.maxY:et.maxY;if(tt<=it&&rt<=st){const at=this.minX,ct=this.minY,ut=this.maxX,dt=this.maxY;this.minX=tt<at?tt:at,this.minY=rt<ct?rt:ct,this.maxX=it>ut?it:ut,this.maxY=st>dt?st:dt}}addBoundsMatrix(_,et){this.addFrameMatrix(et,_.minX,_.minY,_.maxX,_.maxY)}addBoundsArea(_,et){const tt=_.minX>et.x?_.minX:et.x,rt=_.minY>et.y?_.minY:et.y,it=_.maxX<et.x+et.width?_.maxX:et.x+et.width,st=_.maxY<et.y+et.height?_.maxY:et.y+et.height;if(tt<=it&&rt<=st){const at=this.minX,ct=this.minY,ut=this.maxX,dt=this.maxY;this.minX=tt<at?tt:at,this.minY=rt<ct?rt:ct,this.maxX=it>ut?it:ut,this.maxY=st>dt?st:dt}}pad(_=0,et=_){this.isEmpty()||(this.minX-=_,this.maxX+=_,this.minY-=et,this.maxY+=et)}addFramePad(_,et,tt,rt,it,st){_-=it,et-=st,tt+=it,rt+=st,this.minX=this.minX<_?this.minX:_,this.maxX=this.maxX>tt?this.maxX:tt,this.minY=this.minY<et?this.minY:et,this.maxY=this.maxY>rt?this.maxY:rt}}class DisplayObject extends EventEmitter{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new Transform,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new Bounds,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(_){const et=Object.keys(_);for(let tt=0;tt<et.length;++tt){const rt=et[tt];Object.defineProperty(DisplayObject.prototype,rt,Object.getOwnPropertyDescriptor(_,rt))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(_,et){return _||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),et||(this._boundsRect||(this._boundsRect=new Rectangle),et=this._boundsRect),this._bounds.getRectangle(et)}getLocalBounds(_){_||(this._localBoundsRect||(this._localBoundsRect=new Rectangle),_=this._localBoundsRect),this._localBounds||(this._localBounds=new Bounds);const et=this.transform,tt=this.parent;this.parent=null,this._tempDisplayObjectParent.worldAlpha=(tt==null?void 0:tt.worldAlpha)??1,this.transform=this._tempDisplayObjectParent.transform;const rt=this._bounds,it=this._boundsID;this._bounds=this._localBounds;const st=this.getBounds(!1,_);return this.parent=tt,this.transform=et,this._bounds=rt,this._bounds.updateID+=this._boundsID-it,st}toGlobal(_,et,tt=!1){return tt||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(_,et)}toLocal(_,et,tt,rt){return et&&(_=et.toGlobal(_,tt,rt)),rt||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(_,tt)}setParent(_){if(!_||!_.addChild)throw new Error("setParent: Argument must be a Container");return _.addChild(this),_}removeFromParent(){var _;(_=this.parent)==null||_.removeChild(this)}setTransform(_=0,et=0,tt=1,rt=1,it=0,st=0,at=0,ct=0,ut=0){return this.position.x=_,this.position.y=et,this.scale.x=tt||1,this.scale.y=rt||1,this.rotation=it,this.skew.x=st,this.skew.y=at,this.pivot.x=ct,this.pivot.y=ut,this}destroy(_){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new TemporaryDisplayObject),this.tempDisplayObjectParent}enableTempParent(){const _=this.parent;return this.parent=this._tempDisplayObjectParent,_}disableTempParent(_){this.parent=_}get x(){return this.position.x}set x(_){this.transform.position.x=_}get y(){return this.position.y}set y(_){this.transform.position.y=_}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(_){this.transform.position.copyFrom(_)}get scale(){return this.transform.scale}set scale(_){this.transform.scale.copyFrom(_)}get pivot(){return this.transform.pivot}set pivot(_){this.transform.pivot.copyFrom(_)}get skew(){return this.transform.skew}set skew(_){this.transform.skew.copyFrom(_)}get rotation(){return this.transform.rotation}set rotation(_){this.transform.rotation=_}get angle(){return this.transform.rotation*RAD_TO_DEG}set angle(_){this.transform.rotation=_*DEG_TO_RAD}get zIndex(){return this._zIndex}set zIndex(_){this._zIndex!==_&&(this._zIndex=_,this.parent&&(this.parent.sortDirty=!0))}get worldVisible(){let _=this;do{if(!_.visible)return!1;_=_.parent}while(_);return!0}get mask(){return this._mask}set mask(_){if(this._mask!==_){if(this._mask){const et=this._mask.isMaskData?this._mask.maskObject:this._mask;et&&(et._maskRefCount--,et._maskRefCount===0&&(et.renderable=!0,et.isMask=!1))}if(this._mask=_,this._mask){const et=this._mask.isMaskData?this._mask.maskObject:this._mask;et&&(et._maskRefCount===0&&(et.renderable=!1,et.isMask=!0),et._maskRefCount++)}}}}class TemporaryDisplayObject extends DisplayObject{constructor(){super(...arguments),this.sortDirty=null}}DisplayObject.prototype.displayObjectUpdateTransform=DisplayObject.prototype.updateTransform;const tempMatrix$2=new Matrix;function sortChildren(_e,_){return _e.zIndex===_.zIndex?_e._lastSortedIndex-_._lastSortedIndex:_e.zIndex-_.zIndex}const _Container=class fs extends DisplayObject{constructor(){super(),this.children=[],this.sortableChildren=fs.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(_){}addChild(..._){if(_.length>1)for(let et=0;et<_.length;et++)this.addChild(_[et]);else{const et=_[0];et.parent&&et.parent.removeChild(et),et.parent=this,this.sortDirty=!0,et.transform._parentID=-1,this.children.push(et),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",et,this,this.children.length-1),et.emit("added",this)}return _[0]}addChildAt(_,et){if(et<0||et>this.children.length)throw new Error(`${_}addChildAt: The index ${et} supplied is out of bounds ${this.children.length}`);return _.parent&&_.parent.removeChild(_),_.parent=this,this.sortDirty=!0,_.transform._parentID=-1,this.children.splice(et,0,_),this._boundsID++,this.onChildrenChange(et),_.emit("added",this),this.emit("childAdded",_,this,et),_}swapChildren(_,et){if(_===et)return;const tt=this.getChildIndex(_),rt=this.getChildIndex(et);this.children[tt]=et,this.children[rt]=_,this.onChildrenChange(tt<rt?tt:rt)}getChildIndex(_){const et=this.children.indexOf(_);if(et===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return et}setChildIndex(_,et){if(et<0||et>=this.children.length)throw new Error(`The index ${et} supplied is out of bounds ${this.children.length}`);const tt=this.getChildIndex(_);removeItems(this.children,tt,1),this.children.splice(et,0,_),this.onChildrenChange(et)}getChildAt(_){if(_<0||_>=this.children.length)throw new Error(`getChildAt: Index (${_}) does not exist.`);return this.children[_]}removeChild(..._){if(_.length>1)for(let et=0;et<_.length;et++)this.removeChild(_[et]);else{const et=_[0],tt=this.children.indexOf(et);if(tt===-1)return null;et.parent=null,et.transform._parentID=-1,removeItems(this.children,tt,1),this._boundsID++,this.onChildrenChange(tt),et.emit("removed",this),this.emit("childRemoved",et,this,tt)}return _[0]}removeChildAt(_){const et=this.getChildAt(_);return et.parent=null,et.transform._parentID=-1,removeItems(this.children,_,1),this._boundsID++,this.onChildrenChange(_),et.emit("removed",this),this.emit("childRemoved",et,this,_),et}removeChildren(_=0,et=this.children.length){const tt=_,rt=et,it=rt-tt;let st;if(it>0&&it<=rt){st=this.children.splice(tt,it);for(let at=0;at<st.length;++at)st[at].parent=null,st[at].transform&&(st[at].transform._parentID=-1);this._boundsID++,this.onChildrenChange(_);for(let at=0;at<st.length;++at)st[at].emit("removed",this),this.emit("childRemoved",st[at],this,at);return st}else if(it===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let _=!1;for(let et=0,tt=this.children.length;et<tt;++et){const rt=this.children[et];rt._lastSortedIndex=et,!_&&rt.zIndex!==0&&(_=!0)}_&&this.children.length>1&&this.children.sort(sortChildren),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let _=0,et=this.children.length;_<et;++_){const tt=this.children[_];tt.visible&&tt.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let _=0;_<this.children.length;_++){const et=this.children[_];if(!(!et.visible||!et.renderable))if(et.calculateBounds(),et._mask){const tt=et._mask.isMaskData?et._mask.maskObject:et._mask;tt?(tt.calculateBounds(),this._bounds.addBoundsMask(et._bounds,tt._bounds)):this._bounds.addBounds(et._bounds)}else et.filterArea?this._bounds.addBoundsArea(et._bounds,et.filterArea):this._bounds.addBounds(et._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(_,et=!1){const tt=super.getLocalBounds(_);if(!et)for(let rt=0,it=this.children.length;rt<it;++rt){const st=this.children[rt];st.visible&&st.updateTransform()}return tt}_calculateBounds(){}_renderWithCulling(_){const et=_.renderTexture.sourceFrame;if(!(et.width>0&&et.height>0))return;let tt,rt;this.cullArea?(tt=this.cullArea,rt=this.worldTransform):this._render!==fs.prototype._render&&(tt=this.getBounds(!0));const it=_.projection.transform;if(it&&(rt?(rt=tempMatrix$2.copyFrom(rt),rt.prepend(it)):rt=it),tt&&et.intersects(tt,rt))this._render(_);else if(this.cullArea)return;for(let st=0,at=this.children.length;st<at;++st){const ct=this.children[st],ut=ct.cullable;ct.cullable=ut||!this.cullArea,ct.render(_),ct.cullable=ut}}render(_){var et;if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||(et=this.filters)!=null&&et.length)this.renderAdvanced(_);else if(this.cullable)this._renderWithCulling(_);else{this._render(_);for(let tt=0,rt=this.children.length;tt<rt;++tt)this.children[tt].render(_)}}renderAdvanced(_){var it,st,at;const et=this.filters,tt=this._mask;if(et){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let ct=0;ct<et.length;ct++)et[ct].enabled&&this._enabledFilters.push(et[ct])}const rt=et&&((it=this._enabledFilters)==null?void 0:it.length)||tt&&(!tt.isMaskData||tt.enabled&&(tt.autoDetect||tt.type!==MASK_TYPES.NONE));if(rt&&_.batch.flush(),et&&((st=this._enabledFilters)!=null&&st.length)&&_.filter.push(this,this._enabledFilters),tt&&_.mask.push(this,this._mask),this.cullable)this._renderWithCulling(_);else{this._render(_);for(let ct=0,ut=this.children.length;ct<ut;++ct)this.children[ct].render(_)}rt&&_.batch.flush(),tt&&_.mask.pop(this),et&&((at=this._enabledFilters)!=null&&at.length)&&_.filter.pop()}_render(_){}destroy(_){super.destroy(),this.sortDirty=!1;const et=typeof _=="boolean"?_:_==null?void 0:_.children,tt=this.removeChildren(0,this.children.length);if(et)for(let rt=0;rt<tt.length;++rt)tt[rt].destroy(_)}get width(){return this.scale.x*this.getLocalBounds().width}set width(_){const et=this.getLocalBounds().width;et!==0?this.scale.x=_/et:this.scale.x=1,this._width=_}get height(){return this.scale.y*this.getLocalBounds().height}set height(_){const et=this.getLocalBounds().height;et!==0?this.scale.y=_/et:this.scale.y=1,this._height=_}};_Container.defaultSortableChildren=!1;let Container=_Container;Container.prototype.containerUpdateTransform=Container.prototype.updateTransform;Object.defineProperties(settings,{SORTABLE_CHILDREN:{get(){return Container.defaultSortableChildren},set(_e){deprecation("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),Container.defaultSortableChildren=_e}}});const tempPoint$2=new Point,indices=new Uint16Array([0,1,2,0,2,3]);class Sprite extends Container{constructor(_){super(),this._anchor=new ObservablePoint(this._onAnchorUpdate,this,_?_.defaultAnchor.x:0,_?_.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new Color(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=BLEND_MODES.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=_||Texture.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=indices,this.pluginName="batch",this.isSprite=!0,this._roundPixels=settings.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=sign(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=sign(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const _=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===_._updateID)return;this._textureID!==_._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=_._updateID;const et=this.transform.worldTransform,tt=et.a,rt=et.b,it=et.c,st=et.d,at=et.tx,ct=et.ty,ut=this.vertexData,dt=_.trim,ot=_.orig,nt=this._anchor;let lt=0,ht=0,ft=0,gt=0;if(dt?(ht=dt.x-nt._x*ot.width,lt=ht+dt.width,gt=dt.y-nt._y*ot.height,ft=gt+dt.height):(ht=-nt._x*ot.width,lt=ht+ot.width,gt=-nt._y*ot.height,ft=gt+ot.height),ut[0]=tt*ht+it*gt+at,ut[1]=st*gt+rt*ht+ct,ut[2]=tt*lt+it*gt+at,ut[3]=st*gt+rt*lt+ct,ut[4]=tt*lt+it*ft+at,ut[5]=st*ft+rt*lt+ct,ut[6]=tt*ht+it*ft+at,ut[7]=st*ft+rt*ht+ct,this._roundPixels){const mt=settings.RESOLUTION;for(let yt=0;yt<ut.length;++yt)ut[yt]=Math.round(ut[yt]*mt)/mt}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const _=this._texture,et=this.vertexTrimmedData,tt=_.orig,rt=this._anchor,it=this.transform.worldTransform,st=it.a,at=it.b,ct=it.c,ut=it.d,dt=it.tx,ot=it.ty,nt=-rt._x*tt.width,lt=nt+tt.width,ht=-rt._y*tt.height,ft=ht+tt.height;if(et[0]=st*nt+ct*ht+dt,et[1]=ut*ht+at*nt+ot,et[2]=st*lt+ct*ht+dt,et[3]=ut*ht+at*lt+ot,et[4]=st*lt+ct*ft+dt,et[5]=ut*ft+at*lt+ot,et[6]=st*nt+ct*ft+dt,et[7]=ut*ft+at*nt+ot,this._roundPixels){const gt=settings.RESOLUTION;for(let mt=0;mt<et.length;++mt)et[mt]=Math.round(et[mt]*gt)/gt}}_render(_){this.calculateVertices(),_.batch.setObjectRenderer(_.plugins[this.pluginName]),_.plugins[this.pluginName].render(this)}_calculateBounds(){const _=this._texture.trim,et=this._texture.orig;!_||_.width===et.width&&_.height===et.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(_){return this.children.length===0?(this._localBounds||(this._localBounds=new Bounds),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),_||(this._localBoundsRect||(this._localBoundsRect=new Rectangle),_=this._localBoundsRect),this._localBounds.getRectangle(_)):super.getLocalBounds.call(this,_)}containsPoint(_){this.worldTransform.applyInverse(_,tempPoint$2);const et=this._texture.orig.width,tt=this._texture.orig.height,rt=-et*this.anchor.x;let it=0;return tempPoint$2.x>=rt&&tempPoint$2.x<rt+et&&(it=-tt*this.anchor.y,tempPoint$2.y>=it&&tempPoint$2.y<it+tt)}destroy(_){if(super.destroy(_),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof _=="boolean"?_:_==null?void 0:_.texture){const et=typeof _=="boolean"?_:_==null?void 0:_.baseTexture;this._texture.destroy(!!et)}this._texture=null}static from(_,et){const tt=_ instanceof Texture?_:Texture.from(_,et);return new Sprite(tt)}set roundPixels(_){this._roundPixels!==_&&(this._transformID=-1,this._transformTrimmedID=-1),this._roundPixels=_}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(_){const et=sign(this.scale.x)||1;this.scale.x=et*_/this._texture.orig.width,this._width=_}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(_){const et=sign(this.scale.y)||1;this.scale.y=et*_/this._texture.orig.height,this._height=_}get anchor(){return this._anchor}set anchor(_){this._anchor.copyFrom(_)}get tint(){return this._tintColor.value}set tint(_){this._tintColor.setValue(_),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(_){this._texture!==_&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=_||Texture.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,_&&(_.baseTexture.valid?this._onTextureUpdate():_.once("update",this._onTextureUpdate,this)))}}const _tempMatrix=new Matrix;DisplayObject.prototype._cacheAsBitmap=!1;DisplayObject.prototype._cacheData=null;DisplayObject.prototype._cacheAsBitmapResolution=null;DisplayObject.prototype._cacheAsBitmapMultisample=null;class CacheData{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(DisplayObject.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(_e){_e!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=_e,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(_e){_e!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=_e,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(_e){if(this._cacheAsBitmap===_e)return;this._cacheAsBitmap=_e;let _;_e?(this._cacheData||(this._cacheData=new CacheData),_=this._cacheData,_.originalRender=this.render,_.originalRenderCanvas=this.renderCanvas,_.originalUpdateTransform=this.updateTransform,_.originalCalculateBounds=this.calculateBounds,_.originalGetLocalBounds=this.getLocalBounds,_.originalDestroy=this.destroy,_.originalContainsPoint=this.containsPoint,_.originalMask=this._mask,_.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(_=this._cacheData,_.sprite&&this._destroyCachedDisplayObject(),this.render=_.originalRender,this.renderCanvas=_.originalRenderCanvas,this.calculateBounds=_.originalCalculateBounds,this.getLocalBounds=_.originalGetLocalBounds,this.destroy=_.originalDestroy,this.updateTransform=_.originalUpdateTransform,this.containsPoint=_.originalContainsPoint,this._mask=_.originalMask,this.filterArea=_.originalFilterArea)}}});DisplayObject.prototype._renderCached=function(_e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(_e),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(_e))};DisplayObject.prototype._initCachedDisplayObject=function(_e){var nt,lt;if((nt=this._cacheData)!=null&&nt.sprite)return;const _=this.alpha;this.alpha=1,_e.batch.flush();const et=this.getLocalBounds(new Rectangle,!0);if((lt=this.filters)!=null&&lt.length){const ht=this.filters[0].padding;et.pad(ht)}const tt=this.cacheAsBitmapResolution||_e.resolution;et.ceil(tt),et.width=Math.max(et.width,1/tt),et.height=Math.max(et.height,1/tt);const rt=_e.renderTexture.current,it=_e.renderTexture.sourceFrame.clone(),st=_e.renderTexture.destinationFrame.clone(),at=_e.projection.transform,ct=RenderTexture.create({width:et.width,height:et.height,resolution:tt,multisample:this.cacheAsBitmapMultisample??_e.multisample}),ut=`cacheAsBitmap_${uid()}`;this._cacheData.textureCacheId=ut,BaseTexture.addToCache(ct.baseTexture,ut),Texture.addToCache(ct,ut);const dt=this.transform.localTransform.copyTo(_tempMatrix).invert().translate(-et.x,-et.y);this.render=this._cacheData.originalRender,_e.render(this,{renderTexture:ct,clear:!0,transform:dt,skipUpdateTransform:!1}),_e.framebuffer.blit(),_e.projection.transform=at,_e.renderTexture.bind(rt,it,st),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=_;const ot=new Sprite(ct);ot.transform.worldTransform=this.transform.worldTransform,ot.anchor.x=-(et.x/et.width),ot.anchor.y=-(et.y/et.height),ot.alpha=_,ot._bounds=this._bounds,this._cacheData.sprite=ot,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=ot.containsPoint.bind(ot)};DisplayObject.prototype._renderCachedCanvas=function(_e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(_e),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(_e))};DisplayObject.prototype._initCachedDisplayObjectCanvas=function(_e){var dt;if((dt=this._cacheData)!=null&&dt.sprite)return;const _=this.getLocalBounds(new Rectangle,!0),et=this.alpha;this.alpha=1;const tt=_e.canvasContext.activeContext,rt=_e._projTransform,it=this.cacheAsBitmapResolution||_e.resolution;_.ceil(it),_.width=Math.max(_.width,1/it),_.height=Math.max(_.height,1/it);const st=RenderTexture.create({width:_.width,height:_.height,resolution:it}),at=`cacheAsBitmap_${uid()}`;this._cacheData.textureCacheId=at,BaseTexture.addToCache(st.baseTexture,at),Texture.addToCache(st,at);const ct=_tempMatrix;this.transform.localTransform.copyTo(ct),ct.invert(),ct.tx-=_.x,ct.ty-=_.y,this.renderCanvas=this._cacheData.originalRenderCanvas,_e.render(this,{renderTexture:st,clear:!0,transform:ct,skipUpdateTransform:!1}),_e.canvasContext.activeContext=tt,_e._projTransform=rt,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=et;const ut=new Sprite(st);ut.transform.worldTransform=this.transform.worldTransform,ut.anchor.x=-(_.x/_.width),ut.anchor.y=-(_.y/_.height),ut.alpha=et,ut._bounds=this._bounds,this._cacheData.sprite=ut,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=_e._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=ut.containsPoint.bind(ut)};DisplayObject.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};DisplayObject.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};DisplayObject.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,BaseTexture.removeFromCache(this._cacheData.textureCacheId),Texture.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};DisplayObject.prototype._cacheAsBitmapDestroy=function(_e){this.cacheAsBitmap=!1,this.destroy(_e)};DisplayObject.prototype.name=null;Container.prototype.getChildByName=function(_e,_){for(let et=0,tt=this.children.length;et<tt;et++)if(this.children[et].name===_e)return this.children[et];if(_)for(let et=0,tt=this.children.length;et<tt;et++){const rt=this.children[et];if(!rt.getChildByName)continue;const it=rt.getChildByName(_e,!0);if(it)return it}return null};DisplayObject.prototype.getGlobalPosition=function(_e=new Point,_=!1){return this.parent?this.parent.toGlobal(this.position,_e,_):(_e.x=this.position.x,_e.y=this.position.y),_e};var fragment$6=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;class AlphaFilter extends Filter{constructor(_=1){super(defaultVertex,fragment$6,{uAlpha:1}),this.alpha=_}get alpha(){return this.uniforms.uAlpha}set alpha(_){this.uniforms.uAlpha=_}}const GAUSSIAN_VALUES={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},fragTemplate=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function generateBlurFragSource(_e){const _=GAUSSIAN_VALUES[_e],et=_.length;let tt=fragTemplate,rt="";const it="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";let st;for(let at=0;at<_e;at++){let ct=it.replace("%index%",at.toString());st=at,at>=et&&(st=_e-at-1),ct=ct.replace("%value%",_[st].toString()),rt+=ct,rt+=`
`}return tt=tt.replace("%blur%",rt),tt=tt.replace("%size%",_e.toString()),tt}const vertTemplate=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function generateBlurVertSource(_e,_){const et=Math.ceil(_e/2);let tt=vertTemplate,rt="",it;_?it="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":it="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let st=0;st<_e;st++){let at=it.replace("%index%",st.toString());at=at.replace("%sampleIndex%",`${st-(et-1)}.0`),rt+=at,rt+=`
`}return tt=tt.replace("%blur%",rt),tt=tt.replace("%size%",_e.toString()),tt}class BlurFilterPass extends Filter{constructor(_,et=8,tt=4,rt=Filter.defaultResolution,it=5){const st=generateBlurVertSource(it,_),at=generateBlurFragSource(it);super(st,at),this.horizontal=_,this.resolution=rt,this._quality=0,this.quality=tt,this.blur=et}apply(_,et,tt,rt){if(tt?this.horizontal?this.uniforms.strength=1/tt.width*(tt.width/et.width):this.uniforms.strength=1/tt.height*(tt.height/et.height):this.horizontal?this.uniforms.strength=1/_.renderer.width*(_.renderer.width/et.width):this.uniforms.strength=1/_.renderer.height*(_.renderer.height/et.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)_.applyFilter(this,et,tt,rt);else{const it=_.getFilterTexture(),st=_.renderer;let at=et,ct=it;this.state.blend=!1,_.applyFilter(this,at,ct,CLEAR_MODES.CLEAR);for(let ut=1;ut<this.passes-1;ut++){_.bindAndClear(at,CLEAR_MODES.BLIT),this.uniforms.uSampler=ct;const dt=ct;ct=at,at=dt,st.shader.bind(this),st.geometry.draw(5)}this.state.blend=!0,_.applyFilter(this,ct,tt,rt),_.returnFilterTexture(it)}}get blur(){return this.strength}set blur(_){this.padding=1+Math.abs(_)*2,this.strength=_}get quality(){return this._quality}set quality(_){this._quality=_,this.passes=_}}class BlurFilter extends Filter{constructor(_=8,et=4,tt=Filter.defaultResolution,rt=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new BlurFilterPass(!0,_,et,tt,rt),this.blurYFilter=new BlurFilterPass(!1,_,et,tt,rt),this.resolution=tt,this.quality=et,this.blur=_,this.repeatEdgePixels=!1}apply(_,et,tt,rt){const it=Math.abs(this.blurXFilter.strength),st=Math.abs(this.blurYFilter.strength);if(it&&st){const at=_.getFilterTexture();this.blurXFilter.apply(_,et,at,CLEAR_MODES.CLEAR),this.blurYFilter.apply(_,at,tt,rt),_.returnFilterTexture(at)}else st?this.blurYFilter.apply(_,et,tt,rt):this.blurXFilter.apply(_,et,tt,rt)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(_){this.blurXFilter.blur=this.blurYFilter.blur=_,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(_){this.blurXFilter.quality=this.blurYFilter.quality=_}get blurX(){return this.blurXFilter.blur}set blurX(_){this.blurXFilter.blur=_,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(_){this.blurYFilter.blur=_,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(_){this.blurYFilter.blendMode=_}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(_){this._repeatEdgePixels=_,this.updatePadding()}}var fragment$5=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;class ColorMatrixFilter extends Filter{constructor(){const _={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(defaultFilterVertex,fragment$5,_),this.alpha=1}_loadMatrix(_,et=!1){let tt=_;et&&(this._multiply(tt,this.uniforms.m,_),tt=this._colorMatrix(tt)),this.uniforms.m=tt}_multiply(_,et,tt){return _[0]=et[0]*tt[0]+et[1]*tt[5]+et[2]*tt[10]+et[3]*tt[15],_[1]=et[0]*tt[1]+et[1]*tt[6]+et[2]*tt[11]+et[3]*tt[16],_[2]=et[0]*tt[2]+et[1]*tt[7]+et[2]*tt[12]+et[3]*tt[17],_[3]=et[0]*tt[3]+et[1]*tt[8]+et[2]*tt[13]+et[3]*tt[18],_[4]=et[0]*tt[4]+et[1]*tt[9]+et[2]*tt[14]+et[3]*tt[19]+et[4],_[5]=et[5]*tt[0]+et[6]*tt[5]+et[7]*tt[10]+et[8]*tt[15],_[6]=et[5]*tt[1]+et[6]*tt[6]+et[7]*tt[11]+et[8]*tt[16],_[7]=et[5]*tt[2]+et[6]*tt[7]+et[7]*tt[12]+et[8]*tt[17],_[8]=et[5]*tt[3]+et[6]*tt[8]+et[7]*tt[13]+et[8]*tt[18],_[9]=et[5]*tt[4]+et[6]*tt[9]+et[7]*tt[14]+et[8]*tt[19]+et[9],_[10]=et[10]*tt[0]+et[11]*tt[5]+et[12]*tt[10]+et[13]*tt[15],_[11]=et[10]*tt[1]+et[11]*tt[6]+et[12]*tt[11]+et[13]*tt[16],_[12]=et[10]*tt[2]+et[11]*tt[7]+et[12]*tt[12]+et[13]*tt[17],_[13]=et[10]*tt[3]+et[11]*tt[8]+et[12]*tt[13]+et[13]*tt[18],_[14]=et[10]*tt[4]+et[11]*tt[9]+et[12]*tt[14]+et[13]*tt[19]+et[14],_[15]=et[15]*tt[0]+et[16]*tt[5]+et[17]*tt[10]+et[18]*tt[15],_[16]=et[15]*tt[1]+et[16]*tt[6]+et[17]*tt[11]+et[18]*tt[16],_[17]=et[15]*tt[2]+et[16]*tt[7]+et[17]*tt[12]+et[18]*tt[17],_[18]=et[15]*tt[3]+et[16]*tt[8]+et[17]*tt[13]+et[18]*tt[18],_[19]=et[15]*tt[4]+et[16]*tt[9]+et[17]*tt[14]+et[18]*tt[19]+et[19],_}_colorMatrix(_){const et=new Float32Array(_);return et[4]/=255,et[9]/=255,et[14]/=255,et[19]/=255,et}brightness(_,et){const tt=[_,0,0,0,0,0,_,0,0,0,0,0,_,0,0,0,0,0,1,0];this._loadMatrix(tt,et)}tint(_,et){const[tt,rt,it]=Color.shared.setValue(_).toArray(),st=[tt,0,0,0,0,0,rt,0,0,0,0,0,it,0,0,0,0,0,1,0];this._loadMatrix(st,et)}greyscale(_,et){const tt=[_,_,_,0,0,_,_,_,0,0,_,_,_,0,0,0,0,0,1,0];this._loadMatrix(tt,et)}blackAndWhite(_){const et=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(et,_)}hue(_,et){_=(_||0)/180*Math.PI;const tt=Math.cos(_),rt=Math.sin(_),it=Math.sqrt,st=1/3,at=it(st),ct=tt+(1-tt)*st,ut=st*(1-tt)-at*rt,dt=st*(1-tt)+at*rt,ot=st*(1-tt)+at*rt,nt=tt+st*(1-tt),lt=st*(1-tt)-at*rt,ht=st*(1-tt)-at*rt,ft=st*(1-tt)+at*rt,gt=tt+st*(1-tt),mt=[ct,ut,dt,0,0,ot,nt,lt,0,0,ht,ft,gt,0,0,0,0,0,1,0];this._loadMatrix(mt,et)}contrast(_,et){const tt=(_||0)+1,rt=-.5*(tt-1),it=[tt,0,0,0,rt,0,tt,0,0,rt,0,0,tt,0,rt,0,0,0,1,0];this._loadMatrix(it,et)}saturate(_=0,et){const tt=_*2/3+1,rt=(tt-1)*-.5,it=[tt,rt,rt,0,0,rt,tt,rt,0,0,rt,rt,tt,0,0,0,0,0,1,0];this._loadMatrix(it,et)}desaturate(){this.saturate(-1)}negative(_){const et=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(et,_)}sepia(_){const et=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(et,_)}technicolor(_){const et=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(et,_)}polaroid(_){const et=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(et,_)}toBGR(_){const et=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(et,_)}kodachrome(_){const et=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(et,_)}browni(_){const et=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(et,_)}vintage(_){const et=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(et,_)}colorTone(_,et,tt,rt,it){_=_||.2,et=et||.15,tt=tt||16770432,rt=rt||3375104;const st=Color.shared,[at,ct,ut]=st.setValue(tt).toArray(),[dt,ot,nt]=st.setValue(rt).toArray(),lt=[.3,.59,.11,0,0,at,ct,ut,_,0,dt,ot,nt,et,0,at-dt,ct-ot,ut-nt,0,0];this._loadMatrix(lt,it)}night(_,et){_=_||.1;const tt=[_*-2,-_,0,0,0,-_,0,_,0,0,0,_,_*2,0,0,0,0,0,1,0];this._loadMatrix(tt,et)}predator(_,et){const tt=[11.224130630493164*_,-4.794486999511719*_,-2.8746118545532227*_,0*_,.40342438220977783*_,-3.6330697536468506*_,9.193157196044922*_,-2.951810836791992*_,0*_,-1.316135048866272*_,-3.2184197902679443*_,-4.2375030517578125*_,7.476448059082031*_,0*_,.8044459223747253*_,0,0,0,1,0];this._loadMatrix(tt,et)}lsd(_){const et=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(et,_)}reset(){const _=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(_,!1)}get matrix(){return this.uniforms.m}set matrix(_){this.uniforms.m=_}get alpha(){return this.uniforms.uAlpha}set alpha(_){this.uniforms.uAlpha=_}}ColorMatrixFilter.prototype.grayscale=ColorMatrixFilter.prototype.greyscale;var fragment$4=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,vertex$3=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;class DisplacementFilter extends Filter{constructor(_,et){const tt=new Matrix;_.renderable=!1,super(vertex$3,fragment$4,{mapSampler:_._texture,filterMatrix:tt,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=_,this.maskMatrix=tt,et==null&&(et=20),this.scale=new Point(et,et)}apply(_,et,tt,rt){this.uniforms.filterMatrix=_.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const it=this.maskSprite.worldTransform,st=Math.sqrt(it.a*it.a+it.b*it.b),at=Math.sqrt(it.c*it.c+it.d*it.d);st!==0&&at!==0&&(this.uniforms.rotation[0]=it.a/st,this.uniforms.rotation[1]=it.b/st,this.uniforms.rotation[2]=it.c/at,this.uniforms.rotation[3]=it.d/at),_.applyFilter(this,et,tt,rt)}get map(){return this.uniforms.mapSampler}set map(_){this.uniforms.mapSampler=_}}var fragment$3=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,vertex$2=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;class FXAAFilter extends Filter{constructor(){super(vertex$2,fragment$3)}}var fragment$2=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;class NoiseFilter extends Filter{constructor(_=.5,et=Math.random()){super(defaultFilterVertex,fragment$2,{uNoise:0,uSeed:0}),this.noise=_,this.seed=et}get noise(){return this.uniforms.uNoise}set noise(_){this.uniforms.uNoise=_}get seed(){return this.uniforms.uSeed}set seed(_){this.uniforms.uSeed=_}}const filters={AlphaFilter,BlurFilter,BlurFilterPass,ColorMatrixFilter,DisplacementFilter,FXAAFilter,NoiseFilter};Object.entries(filters).forEach(([_e,_])=>{Object.defineProperty(filters,_e,{get(){return deprecation("7.1.0",`filters.${_e} has moved to ${_e}`),_}})});class EventsTickerClass{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(_){this.removeTickerListener(),this.events=_,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(_){this._pauseUpdate=_}addTickerListener(){this.tickerAdded||!this.domElement||(Ticker.system.add(this.tickerUpdate,this,UPDATE_PRIORITY.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(Ticker.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const _=this.events.rootPointerEvent;this.events.supportsTouchEvents&&_.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:_.clientX,clientY:_.clientY}))}tickerUpdate(_){this._deltaTime+=_,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}}const EventsTicker=new EventsTickerClass;class FederatedEvent{constructor(_){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=FederatedEvent.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new Point,this.page=new Point,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=_}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(_,et,tt){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(_,et,tt,rt,it){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class FederatedMouseEvent extends FederatedEvent{constructor(){super(...arguments),this.client=new Point,this.movement=new Point,this.offset=new Point,this.global=new Point,this.screen=new Point}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(_,et,tt){return _.worldTransform.applyInverse(tt||this.global,et)}getModifierState(_){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(_)}initMouseEvent(_,et,tt,rt,it,st,at,ct,ut,dt,ot,nt,lt,ht,ft){throw new Error("Method not implemented.")}}class FederatedPointerEvent extends FederatedMouseEvent{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class FederatedWheelEvent extends FederatedMouseEvent{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}FederatedWheelEvent.DOM_DELTA_PIXEL=0,FederatedWheelEvent.DOM_DELTA_LINE=1,FederatedWheelEvent.DOM_DELTA_PAGE=2;const PROPAGATION_LIMIT=2048,tempHitLocation=new Point,tempLocalMapping=new Point;class EventBoundary{constructor(_){this.dispatch=new EventEmitter,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=_,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(_,et){this.mappingTable[_]||(this.mappingTable[_]=[]),this.mappingTable[_].push({fn:et,priority:0}),this.mappingTable[_].sort((tt,rt)=>tt.priority-rt.priority)}dispatchEvent(_,et){_.propagationStopped=!1,_.propagationImmediatelyStopped=!1,this.propagate(_,et),this.dispatch.emit(et||_.type,_)}mapEvent(_){if(!this.rootTarget)return;const et=this.mappingTable[_.type];if(et)for(let tt=0,rt=et.length;tt<rt;tt++)et[tt].fn(_);else console.warn(`[EventBoundary]: Event mapping not defined for ${_.type}`)}hitTest(_,et){EventsTicker.pauseUpdate=!0;const tt=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",rt=this[tt](this.rootTarget,this.rootTarget.eventMode,tempHitLocation.set(_,et),this.hitTestFn,this.hitPruneFn);return rt&&rt[0]}propagate(_,et){if(!_.target)return;const tt=_.composedPath();_.eventPhase=_.CAPTURING_PHASE;for(let rt=0,it=tt.length-1;rt<it;rt++)if(_.currentTarget=tt[rt],this.notifyTarget(_,et),_.propagationStopped||_.propagationImmediatelyStopped)return;if(_.eventPhase=_.AT_TARGET,_.currentTarget=_.target,this.notifyTarget(_,et),!(_.propagationStopped||_.propagationImmediatelyStopped)){_.eventPhase=_.BUBBLING_PHASE;for(let rt=tt.length-2;rt>=0;rt--)if(_.currentTarget=tt[rt],this.notifyTarget(_,et),_.propagationStopped||_.propagationImmediatelyStopped)return}}all(_,et,tt=this._allInteractiveElements){if(tt.length===0)return;_.eventPhase=_.BUBBLING_PHASE;const rt=Array.isArray(et)?et:[et];for(let it=tt.length-1;it>=0;it--)rt.forEach(st=>{_.currentTarget=tt[it],this.notifyTarget(_,st)})}propagationPath(_){const et=[_];for(let tt=0;tt<PROPAGATION_LIMIT&&_!==this.rootTarget;tt++){if(!_.parent)throw new Error("Cannot find propagation path to disconnected target");et.push(_.parent),_=_.parent}return et.reverse(),et}hitTestMoveRecursive(_,et,tt,rt,it,st=!1){let at=!1;if(this._interactivePrune(_))return null;if((_.eventMode==="dynamic"||et==="dynamic")&&(EventsTicker.pauseUpdate=!1),_.interactiveChildren&&_.children){const dt=_.children;for(let ot=dt.length-1;ot>=0;ot--){const nt=dt[ot],lt=this.hitTestMoveRecursive(nt,this._isInteractive(et)?et:nt.eventMode,tt,rt,it,st||it(_,tt));if(lt){if(lt.length>0&&!lt[lt.length-1].parent)continue;const ht=_.isInteractive();(lt.length>0||ht)&&(ht&&this._allInteractiveElements.push(_),lt.push(_)),this._hitElements.length===0&&(this._hitElements=lt),at=!0}}}const ct=this._isInteractive(et),ut=_.isInteractive();return ct&&ut&&this._allInteractiveElements.push(_),st||this._hitElements.length>0?null:at?this._hitElements:ct&&!it(_,tt)&&rt(_,tt)?ut?[_]:[]:null}hitTestRecursive(_,et,tt,rt,it){if(this._interactivePrune(_)||it(_,tt))return null;if((_.eventMode==="dynamic"||et==="dynamic")&&(EventsTicker.pauseUpdate=!1),_.interactiveChildren&&_.children){const ct=_.children;for(let ut=ct.length-1;ut>=0;ut--){const dt=ct[ut],ot=this.hitTestRecursive(dt,this._isInteractive(et)?et:dt.eventMode,tt,rt,it);if(ot){if(ot.length>0&&!ot[ot.length-1].parent)continue;const nt=_.isInteractive();return(ot.length>0||nt)&&ot.push(_),ot}}}const st=this._isInteractive(et),at=_.isInteractive();return st&&rt(_,tt)?at?[_]:[]:null}_isInteractive(_){return _==="static"||_==="dynamic"}_interactivePrune(_){return!!(!_||_.isMask||!_.visible||!_.renderable||_.eventMode==="none"||_.eventMode==="passive"&&!_.interactiveChildren||_.isMask)}hitPruneFn(_,et){var tt;if(_.hitArea&&(_.worldTransform.applyInverse(et,tempLocalMapping),!_.hitArea.contains(tempLocalMapping.x,tempLocalMapping.y)))return!0;if(_._mask){const rt=_._mask.isMaskData?_._mask.maskObject:_._mask;if(rt&&!((tt=rt.containsPoint)!=null&&tt.call(rt,et)))return!0}return!1}hitTestFn(_,et){return _.eventMode==="passive"?!1:_.hitArea?!0:_.containsPoint?_.containsPoint(et):!1}notifyTarget(_,et){var it,st;et=et??_.type;const tt=`on${et}`;(st=(it=_.currentTarget)[tt])==null||st.call(it,_);const rt=_.eventPhase===_.CAPTURING_PHASE||_.eventPhase===_.AT_TARGET?`${et}capture`:et;this.notifyListeners(_,rt),_.eventPhase===_.AT_TARGET&&this.notifyListeners(_,et)}mapPointerDown(_){if(!(_ instanceof FederatedPointerEvent)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const et=this.createPointerEvent(_);if(this.dispatchEvent(et,"pointerdown"),et.pointerType==="touch")this.dispatchEvent(et,"touchstart");else if(et.pointerType==="mouse"||et.pointerType==="pen"){const rt=et.button===2;this.dispatchEvent(et,rt?"rightdown":"mousedown")}const tt=this.trackingData(_.pointerId);tt.pressTargetsByButton[_.button]=et.composedPath(),this.freeEvent(et)}mapPointerMove(_){var ct,ut;if(!(_ instanceof FederatedPointerEvent)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const et=this.createPointerEvent(_);this._isPointerMoveEvent=!1;const tt=et.pointerType==="mouse"||et.pointerType==="pen",rt=this.trackingData(_.pointerId),it=this.findMountedTarget(rt.overTargets);if(((ct=rt.overTargets)==null?void 0:ct.length)>0&&it!==et.target){const dt=_.type==="mousemove"?"mouseout":"pointerout",ot=this.createPointerEvent(_,dt,it);if(this.dispatchEvent(ot,"pointerout"),tt&&this.dispatchEvent(ot,"mouseout"),!et.composedPath().includes(it)){const nt=this.createPointerEvent(_,"pointerleave",it);for(nt.eventPhase=nt.AT_TARGET;nt.target&&!et.composedPath().includes(nt.target);)nt.currentTarget=nt.target,this.notifyTarget(nt),tt&&this.notifyTarget(nt,"mouseleave"),nt.target=nt.target.parent;this.freeEvent(nt)}this.freeEvent(ot)}if(it!==et.target){const dt=_.type==="mousemove"?"mouseover":"pointerover",ot=this.clonePointerEvent(et,dt);this.dispatchEvent(ot,"pointerover"),tt&&this.dispatchEvent(ot,"mouseover");let nt=it==null?void 0:it.parent;for(;nt&&nt!==this.rootTarget.parent&&nt!==et.target;)nt=nt.parent;if(!nt||nt===this.rootTarget.parent){const lt=this.clonePointerEvent(et,"pointerenter");for(lt.eventPhase=lt.AT_TARGET;lt.target&&lt.target!==it&&lt.target!==this.rootTarget.parent;)lt.currentTarget=lt.target,this.notifyTarget(lt),tt&&this.notifyTarget(lt,"mouseenter"),lt.target=lt.target.parent;this.freeEvent(lt)}this.freeEvent(ot)}const st=[],at=this.enableGlobalMoveEvents??!0;this.moveOnAll?st.push("pointermove"):this.dispatchEvent(et,"pointermove"),at&&st.push("globalpointermove"),et.pointerType==="touch"&&(this.moveOnAll?st.splice(1,0,"touchmove"):this.dispatchEvent(et,"touchmove"),at&&st.push("globaltouchmove")),tt&&(this.moveOnAll?st.splice(1,0,"mousemove"):this.dispatchEvent(et,"mousemove"),at&&st.push("globalmousemove"),this.cursor=(ut=et.target)==null?void 0:ut.cursor),st.length>0&&this.all(et,st),this._allInteractiveElements.length=0,this._hitElements.length=0,rt.overTargets=et.composedPath(),this.freeEvent(et)}mapPointerOver(_){var st;if(!(_ instanceof FederatedPointerEvent)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const et=this.trackingData(_.pointerId),tt=this.createPointerEvent(_),rt=tt.pointerType==="mouse"||tt.pointerType==="pen";this.dispatchEvent(tt,"pointerover"),rt&&this.dispatchEvent(tt,"mouseover"),tt.pointerType==="mouse"&&(this.cursor=(st=tt.target)==null?void 0:st.cursor);const it=this.clonePointerEvent(tt,"pointerenter");for(it.eventPhase=it.AT_TARGET;it.target&&it.target!==this.rootTarget.parent;)it.currentTarget=it.target,this.notifyTarget(it),rt&&this.notifyTarget(it,"mouseenter"),it.target=it.target.parent;et.overTargets=tt.composedPath(),this.freeEvent(tt),this.freeEvent(it)}mapPointerOut(_){if(!(_ instanceof FederatedPointerEvent)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const et=this.trackingData(_.pointerId);if(et.overTargets){const tt=_.pointerType==="mouse"||_.pointerType==="pen",rt=this.findMountedTarget(et.overTargets),it=this.createPointerEvent(_,"pointerout",rt);this.dispatchEvent(it),tt&&this.dispatchEvent(it,"mouseout");const st=this.createPointerEvent(_,"pointerleave",rt);for(st.eventPhase=st.AT_TARGET;st.target&&st.target!==this.rootTarget.parent;)st.currentTarget=st.target,this.notifyTarget(st),tt&&this.notifyTarget(st,"mouseleave"),st.target=st.target.parent;et.overTargets=null,this.freeEvent(it),this.freeEvent(st)}this.cursor=null}mapPointerUp(_){if(!(_ instanceof FederatedPointerEvent)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const et=performance.now(),tt=this.createPointerEvent(_);if(this.dispatchEvent(tt,"pointerup"),tt.pointerType==="touch")this.dispatchEvent(tt,"touchend");else if(tt.pointerType==="mouse"||tt.pointerType==="pen"){const at=tt.button===2;this.dispatchEvent(tt,at?"rightup":"mouseup")}const rt=this.trackingData(_.pointerId),it=this.findMountedTarget(rt.pressTargetsByButton[_.button]);let st=it;if(it&&!tt.composedPath().includes(it)){let at=it;for(;at&&!tt.composedPath().includes(at);){if(tt.currentTarget=at,this.notifyTarget(tt,"pointerupoutside"),tt.pointerType==="touch")this.notifyTarget(tt,"touchendoutside");else if(tt.pointerType==="mouse"||tt.pointerType==="pen"){const ct=tt.button===2;this.notifyTarget(tt,ct?"rightupoutside":"mouseupoutside")}at=at.parent}delete rt.pressTargetsByButton[_.button],st=at}if(st){const at=this.clonePointerEvent(tt,"click");at.target=st,at.path=null,rt.clicksByButton[_.button]||(rt.clicksByButton[_.button]={clickCount:0,target:at.target,timeStamp:et});const ct=rt.clicksByButton[_.button];if(ct.target===at.target&&et-ct.timeStamp<200?++ct.clickCount:ct.clickCount=1,ct.target=at.target,ct.timeStamp=et,at.detail=ct.clickCount,at.pointerType==="mouse"){const ut=at.button===2;this.dispatchEvent(at,ut?"rightclick":"click")}else at.pointerType==="touch"&&this.dispatchEvent(at,"tap");this.dispatchEvent(at,"pointertap"),this.freeEvent(at)}this.freeEvent(tt)}mapPointerUpOutside(_){if(!(_ instanceof FederatedPointerEvent)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const et=this.trackingData(_.pointerId),tt=this.findMountedTarget(et.pressTargetsByButton[_.button]),rt=this.createPointerEvent(_);if(tt){let it=tt;for(;it;)rt.currentTarget=it,this.notifyTarget(rt,"pointerupoutside"),rt.pointerType==="touch"?this.notifyTarget(rt,"touchendoutside"):(rt.pointerType==="mouse"||rt.pointerType==="pen")&&this.notifyTarget(rt,rt.button===2?"rightupoutside":"mouseupoutside"),it=it.parent;delete et.pressTargetsByButton[_.button]}this.freeEvent(rt)}mapWheel(_){if(!(_ instanceof FederatedWheelEvent)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const et=this.createWheelEvent(_);this.dispatchEvent(et),this.freeEvent(et)}findMountedTarget(_){if(!_)return null;let et=_[0];for(let tt=1;tt<_.length&&_[tt].parent===et;tt++)et=_[tt];return et}createPointerEvent(_,et,tt){const rt=this.allocateEvent(FederatedPointerEvent);return this.copyPointerData(_,rt),this.copyMouseData(_,rt),this.copyData(_,rt),rt.nativeEvent=_.nativeEvent,rt.originalEvent=_,rt.target=tt??this.hitTest(rt.global.x,rt.global.y)??this._hitElements[0],typeof et=="string"&&(rt.type=et),rt}createWheelEvent(_){const et=this.allocateEvent(FederatedWheelEvent);return this.copyWheelData(_,et),this.copyMouseData(_,et),this.copyData(_,et),et.nativeEvent=_.nativeEvent,et.originalEvent=_,et.target=this.hitTest(et.global.x,et.global.y),et}clonePointerEvent(_,et){const tt=this.allocateEvent(FederatedPointerEvent);return tt.nativeEvent=_.nativeEvent,tt.originalEvent=_.originalEvent,this.copyPointerData(_,tt),this.copyMouseData(_,tt),this.copyData(_,tt),tt.target=_.target,tt.path=_.composedPath().slice(),tt.type=et??tt.type,tt}copyWheelData(_,et){et.deltaMode=_.deltaMode,et.deltaX=_.deltaX,et.deltaY=_.deltaY,et.deltaZ=_.deltaZ}copyPointerData(_,et){_ instanceof FederatedPointerEvent&&et instanceof FederatedPointerEvent&&(et.pointerId=_.pointerId,et.width=_.width,et.height=_.height,et.isPrimary=_.isPrimary,et.pointerType=_.pointerType,et.pressure=_.pressure,et.tangentialPressure=_.tangentialPressure,et.tiltX=_.tiltX,et.tiltY=_.tiltY,et.twist=_.twist)}copyMouseData(_,et){_ instanceof FederatedMouseEvent&&et instanceof FederatedMouseEvent&&(et.altKey=_.altKey,et.button=_.button,et.buttons=_.buttons,et.client.copyFrom(_.client),et.ctrlKey=_.ctrlKey,et.metaKey=_.metaKey,et.movement.copyFrom(_.movement),et.screen.copyFrom(_.screen),et.shiftKey=_.shiftKey,et.global.copyFrom(_.global))}copyData(_,et){et.isTrusted=_.isTrusted,et.srcElement=_.srcElement,et.timeStamp=performance.now(),et.type=_.type,et.detail=_.detail,et.view=_.view,et.which=_.which,et.layer.copyFrom(_.layer),et.page.copyFrom(_.page)}trackingData(_){return this.mappingState.trackingData[_]||(this.mappingState.trackingData[_]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[_]}allocateEvent(_){this.eventPool.has(_)||this.eventPool.set(_,[]);const et=this.eventPool.get(_).pop()||new _(this);return et.eventPhase=et.NONE,et.currentTarget=null,et.path=null,et.target=null,et}freeEvent(_){if(_.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const et=_.constructor;this.eventPool.has(et)||this.eventPool.set(et,[]),this.eventPool.get(et).push(_)}notifyListeners(_,et){const tt=_.currentTarget._events[et];if(tt&&_.currentTarget.isInteractive())if("fn"in tt)tt.once&&_.currentTarget.removeListener(et,tt.fn,void 0,!0),tt.fn.call(tt.context,_);else for(let rt=0,it=tt.length;rt<it&&!_.propagationImmediatelyStopped;rt++)tt[rt].once&&_.currentTarget.removeListener(et,tt[rt].fn,void 0,!0),tt[rt].fn.call(tt[rt].context,_)}}const MOUSE_POINTER_ID=1,TOUCH_TO_POINTER={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},_EventSystem=class ps{constructor(_){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=_,this.rootBoundary=new EventBoundary(null),EventsTicker.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new FederatedPointerEvent(null),this.rootWheelEvent=new FederatedWheelEvent(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...ps.defaultEventFeatures},{set:(et,tt,rt)=>(tt==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=rt),et[tt]=rt,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(_){const{view:et,resolution:tt}=this.renderer;this.setTargetElement(et),this.resolution=tt,ps._defaultEventMode=_.eventMode??"auto",Object.assign(this.features,_.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(_){this.resolution=_}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(_){_=_||"default";let et=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(et=!1),this.currentCursor===_)return;this.currentCursor=_;const tt=this.cursorStyles[_];if(tt)switch(typeof tt){case"string":et&&(this.domElement.style.cursor=tt);break;case"function":tt(_);break;case"object":et&&Object.assign(this.domElement.style,tt);break}else et&&typeof _=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,_)&&(this.domElement.style.cursor=_)}get pointer(){return this.rootPointerEvent}onPointerDown(_){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const et=this.normalizeToPointerData(_);this.autoPreventDefault&&et[0].isNormalized&&(_.cancelable||!("cancelable"in _))&&_.preventDefault();for(let tt=0,rt=et.length;tt<rt;tt++){const it=et[tt],st=this.bootstrapEvent(this.rootPointerEvent,it);this.rootBoundary.mapEvent(st)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(_){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,EventsTicker.pointerMoved();const et=this.normalizeToPointerData(_);for(let tt=0,rt=et.length;tt<rt;tt++){const it=this.bootstrapEvent(this.rootPointerEvent,et[tt]);this.rootBoundary.mapEvent(it)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(_){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let et=_.target;_.composedPath&&_.composedPath().length>0&&(et=_.composedPath()[0]);const tt=et!==this.domElement?"outside":"",rt=this.normalizeToPointerData(_);for(let it=0,st=rt.length;it<st;it++){const at=this.bootstrapEvent(this.rootPointerEvent,rt[it]);at.type+=tt,this.rootBoundary.mapEvent(at)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(_){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const et=this.normalizeToPointerData(_);for(let tt=0,rt=et.length;tt<rt;tt++){const it=this.bootstrapEvent(this.rootPointerEvent,et[tt]);this.rootBoundary.mapEvent(it)}this.setCursor(this.rootBoundary.cursor)}onWheel(_){if(!this.features.wheel)return;const et=this.normalizeWheelEvent(_);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(et)}setTargetElement(_){this.removeEvents(),this.domElement=_,EventsTicker.domElement=_,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;EventsTicker.addTickerListener();const _=this.domElement.style;_&&(globalThis.navigator.msPointerEnabled?(_.msContentZooming="none",_.msTouchAction="none"):this.supportsPointerEvents&&(_.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;EventsTicker.removeTickerListener();const _=this.domElement.style;globalThis.navigator.msPointerEnabled?(_.msContentZooming="",_.msTouchAction=""):this.supportsPointerEvents&&(_.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(_,et,tt){const rt=this.domElement.isConnected?this.domElement.getBoundingClientRect():{x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0},it=1/this.resolution;_.x=(et-rt.left)*(this.domElement.width/rt.width)*it,_.y=(tt-rt.top)*(this.domElement.height/rt.height)*it}normalizeToPointerData(_){const et=[];if(this.supportsTouchEvents&&_ instanceof TouchEvent)for(let tt=0,rt=_.changedTouches.length;tt<rt;tt++){const it=_.changedTouches[tt];typeof it.button>"u"&&(it.button=0),typeof it.buttons>"u"&&(it.buttons=1),typeof it.isPrimary>"u"&&(it.isPrimary=_.touches.length===1&&_.type==="touchstart"),typeof it.width>"u"&&(it.width=it.radiusX||1),typeof it.height>"u"&&(it.height=it.radiusY||1),typeof it.tiltX>"u"&&(it.tiltX=0),typeof it.tiltY>"u"&&(it.tiltY=0),typeof it.pointerType>"u"&&(it.pointerType="touch"),typeof it.pointerId>"u"&&(it.pointerId=it.identifier||0),typeof it.pressure>"u"&&(it.pressure=it.force||.5),typeof it.twist>"u"&&(it.twist=0),typeof it.tangentialPressure>"u"&&(it.tangentialPressure=0),typeof it.layerX>"u"&&(it.layerX=it.offsetX=it.clientX),typeof it.layerY>"u"&&(it.layerY=it.offsetY=it.clientY),it.isNormalized=!0,it.type=_.type,et.push(it)}else if(!globalThis.MouseEvent||_ instanceof MouseEvent&&(!this.supportsPointerEvents||!(_ instanceof globalThis.PointerEvent))){const tt=_;typeof tt.isPrimary>"u"&&(tt.isPrimary=!0),typeof tt.width>"u"&&(tt.width=1),typeof tt.height>"u"&&(tt.height=1),typeof tt.tiltX>"u"&&(tt.tiltX=0),typeof tt.tiltY>"u"&&(tt.tiltY=0),typeof tt.pointerType>"u"&&(tt.pointerType="mouse"),typeof tt.pointerId>"u"&&(tt.pointerId=MOUSE_POINTER_ID),typeof tt.pressure>"u"&&(tt.pressure=.5),typeof tt.twist>"u"&&(tt.twist=0),typeof tt.tangentialPressure>"u"&&(tt.tangentialPressure=0),tt.isNormalized=!0,et.push(tt)}else et.push(_);return et}normalizeWheelEvent(_){const et=this.rootWheelEvent;return this.transferMouseData(et,_),et.deltaX=_.deltaX,et.deltaY=_.deltaY,et.deltaZ=_.deltaZ,et.deltaMode=_.deltaMode,this.mapPositionToPoint(et.screen,_.clientX,_.clientY),et.global.copyFrom(et.screen),et.offset.copyFrom(et.screen),et.nativeEvent=_,et.type=_.type,et}bootstrapEvent(_,et){return _.originalEvent=null,_.nativeEvent=et,_.pointerId=et.pointerId,_.width=et.width,_.height=et.height,_.isPrimary=et.isPrimary,_.pointerType=et.pointerType,_.pressure=et.pressure,_.tangentialPressure=et.tangentialPressure,_.tiltX=et.tiltX,_.tiltY=et.tiltY,_.twist=et.twist,this.transferMouseData(_,et),this.mapPositionToPoint(_.screen,et.clientX,et.clientY),_.global.copyFrom(_.screen),_.offset.copyFrom(_.screen),_.isTrusted=et.isTrusted,_.type==="pointerleave"&&(_.type="pointerout"),_.type.startsWith("mouse")&&(_.type=_.type.replace("mouse","pointer")),_.type.startsWith("touch")&&(_.type=TOUCH_TO_POINTER[_.type]||_.type),_}transferMouseData(_,et){_.isTrusted=et.isTrusted,_.srcElement=et.srcElement,_.timeStamp=performance.now(),_.type=et.type,_.altKey=et.altKey,_.button=et.button,_.buttons=et.buttons,_.client.x=et.clientX,_.client.y=et.clientY,_.ctrlKey=et.ctrlKey,_.metaKey=et.metaKey,_.movement.x=et.movementX,_.movement.y=et.movementY,_.page.x=et.pageX,_.page.y=et.pageY,_.relatedTarget=null,_.shiftKey=et.shiftKey}};_EventSystem.extension={name:"events",type:[ExtensionType.RendererSystem,ExtensionType.CanvasRendererSystem]},_EventSystem.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};let EventSystem=_EventSystem;extensions$1.add(EventSystem);function convertEventModeToInteractiveMode(_e){return _e==="dynamic"||_e==="static"}const FederatedDisplayObject={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??convertEventModeToInteractiveMode(EventSystem.defaultEventMode)},set interactive(_e){deprecation("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=_e,this.eventMode=_e?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??EventSystem.defaultEventMode},set eventMode(_e){this._internalInteractive=convertEventModeToInteractiveMode(_e),this._internalEventMode=_e},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(_e,_,et){const tt=typeof et=="boolean"&&et||typeof et=="object"&&et.capture,rt=typeof et=="object"?et.signal:void 0,it=typeof et=="object"?et.once===!0:!1,st=typeof _=="function"?void 0:_;_e=tt?`${_e}capture`:_e;const at=typeof _=="function"?_:_.handleEvent,ct=this;rt&&rt.addEventListener("abort",()=>{ct.off(_e,at,st)}),it?ct.once(_e,at,st):ct.on(_e,at,st)},removeEventListener(_e,_,et){const tt=typeof et=="boolean"&&et||typeof et=="object"&&et.capture,rt=typeof _=="function"?void 0:_;_e=tt?`${_e}capture`:_e,_=typeof _=="function"?_:_.handleEvent,this.off(_e,_,rt)},dispatchEvent(_e){if(!(_e instanceof FederatedEvent))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return _e.defaultPrevented=!1,_e.path=null,_e.target=this,_e.manager.dispatchEvent(_e),!_e.defaultPrevented}};DisplayObject.mixin(FederatedDisplayObject);const accessibleTarget={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};DisplayObject.mixin(accessibleTarget);const KEY_CODE_TAB=9,DIV_TOUCH_SIZE=100,DIV_TOUCH_POS_X=0,DIV_TOUCH_POS_Y=0,DIV_TOUCH_ZINDEX=2,DIV_HOOK_SIZE=1,DIV_HOOK_POS_X=-1e3,DIV_HOOK_POS_Y=-1e3,DIV_HOOK_ZINDEX=2;class AccessibilityManager{constructor(_){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(isMobile.tablet||isMobile.phone)&&this.createTouchHook();const et=document.createElement("div");et.style.width=`${DIV_TOUCH_SIZE}px`,et.style.height=`${DIV_TOUCH_SIZE}px`,et.style.position="absolute",et.style.top=`${DIV_TOUCH_POS_X}px`,et.style.left=`${DIV_TOUCH_POS_Y}px`,et.style.zIndex=DIV_TOUCH_ZINDEX.toString(),this.div=et,this.renderer=_,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const _=document.createElement("button");_.style.width=`${DIV_HOOK_SIZE}px`,_.style.height=`${DIV_HOOK_SIZE}px`,_.style.position="absolute",_.style.top=`${DIV_HOOK_POS_X}px`,_.style.left=`${DIV_HOOK_POS_Y}px`,_.style.zIndex=DIV_HOOK_ZINDEX.toString(),_.style.backgroundColor="#FF0000",_.title="select to enable accessibility for this content",_.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(_),this._hookDiv=_}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){var _;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(_=this.renderer.view.parentNode)==null||_.appendChild(this.div))}deactivate(){var _;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(_=this.div.parentNode)==null||_.removeChild(this.div))}updateAccessibleObjects(_){if(!_.visible||!_.accessibleChildren)return;_.accessible&&_.isInteractive()&&(_._accessibleActive||this.addChild(_),_.renderId=this.renderId);const et=_.children;if(et)for(let tt=0;tt<et.length;tt++)this.updateAccessibleObjects(et[tt])}update(){const _=performance.now();if(isMobile.android.device&&_<this.androidUpdateCount||(this.androidUpdateCount=_+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:et,y:tt,width:rt,height:it}=this.renderer.view.getBoundingClientRect(),{width:st,height:at,resolution:ct}=this.renderer,ut=rt/st*ct,dt=it/at*ct;let ot=this.div;ot.style.left=`${et}px`,ot.style.top=`${tt}px`,ot.style.width=`${st}px`,ot.style.height=`${at}px`;for(let nt=0;nt<this.children.length;nt++){const lt=this.children[nt];if(lt.renderId!==this.renderId)lt._accessibleActive=!1,removeItems(this.children,nt,1),this.div.removeChild(lt._accessibleDiv),this.pool.push(lt._accessibleDiv),lt._accessibleDiv=null,nt--;else{ot=lt._accessibleDiv;let ht=lt.hitArea;const ft=lt.worldTransform;lt.hitArea?(ot.style.left=`${(ft.tx+ht.x*ft.a)*ut}px`,ot.style.top=`${(ft.ty+ht.y*ft.d)*dt}px`,ot.style.width=`${ht.width*ft.a*ut}px`,ot.style.height=`${ht.height*ft.d*dt}px`):(ht=lt.getBounds(),this.capHitArea(ht),ot.style.left=`${ht.x*ut}px`,ot.style.top=`${ht.y*dt}px`,ot.style.width=`${ht.width*ut}px`,ot.style.height=`${ht.height*dt}px`,ot.title!==lt.accessibleTitle&&lt.accessibleTitle!==null&&(ot.title=lt.accessibleTitle),ot.getAttribute("aria-label")!==lt.accessibleHint&&lt.accessibleHint!==null&&ot.setAttribute("aria-label",lt.accessibleHint)),(lt.accessibleTitle!==ot.title||lt.tabIndex!==ot.tabIndex)&&(ot.title=lt.accessibleTitle,ot.tabIndex=lt.tabIndex,this.debug&&this.updateDebugHTML(ot))}}this.renderId++}updateDebugHTML(_){_.innerHTML=`type: ${_.type}</br> title : ${_.title}</br> tabIndex: ${_.tabIndex}`}capHitArea(_){_.x<0&&(_.width+=_.x,_.x=0),_.y<0&&(_.height+=_.y,_.y=0);const{width:et,height:tt}=this.renderer;_.x+_.width>et&&(_.width=et-_.x),_.y+_.height>tt&&(_.height=tt-_.y)}addChild(_){let et=this.pool.pop();et||(et=document.createElement("button"),et.style.width=`${DIV_TOUCH_SIZE}px`,et.style.height=`${DIV_TOUCH_SIZE}px`,et.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",et.style.position="absolute",et.style.zIndex=DIV_TOUCH_ZINDEX.toString(),et.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?et.setAttribute("aria-live","off"):et.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?et.setAttribute("aria-relevant","additions"):et.setAttribute("aria-relevant","text"),et.addEventListener("click",this._onClick.bind(this)),et.addEventListener("focus",this._onFocus.bind(this)),et.addEventListener("focusout",this._onFocusOut.bind(this))),et.style.pointerEvents=_.accessiblePointerEvents,et.type=_.accessibleType,_.accessibleTitle&&_.accessibleTitle!==null?et.title=_.accessibleTitle:(!_.accessibleHint||_.accessibleHint===null)&&(et.title=`displayObject ${_.tabIndex}`),_.accessibleHint&&_.accessibleHint!==null&&et.setAttribute("aria-label",_.accessibleHint),this.debug&&this.updateDebugHTML(et),_._accessibleActive=!0,_._accessibleDiv=et,et.displayObject=_,this.children.push(_),this.div.appendChild(_._accessibleDiv),_._accessibleDiv.tabIndex=_.tabIndex}_dispatchEvent(_,et){const{displayObject:tt}=_.target,rt=this.renderer.events.rootBoundary,it=Object.assign(new FederatedEvent(rt),{target:tt});rt.rootTarget=this.renderer.lastObjectRendered,et.forEach(st=>rt.dispatchEvent(it,st))}_onClick(_){this._dispatchEvent(_,["click","pointertap","tap"])}_onFocus(_){_.target.getAttribute("aria-live")||_.target.setAttribute("aria-live","assertive"),this._dispatchEvent(_,["mouseover"])}_onFocusOut(_){_.target.getAttribute("aria-live")||_.target.setAttribute("aria-live","polite"),this._dispatchEvent(_,["mouseout"])}_onKeyDown(_){_.keyCode===KEY_CODE_TAB&&this.activate()}_onMouseMove(_){_.movementX===0&&_.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}AccessibilityManager.extension={name:"accessibility",type:[ExtensionType.RendererPlugin,ExtensionType.CanvasRendererPlugin]};extensions$1.add(AccessibilityManager);const _Application=class gs{constructor(_){this.stage=new Container,_=Object.assign({forceCanvas:!1},_),this.renderer=autoDetectRenderer(_),gs._plugins.forEach(et=>{et.init.call(this,_)})}render(){this.renderer.render(this.stage)}get view(){var _;return(_=this.renderer)==null?void 0:_.view}get screen(){var _;return(_=this.renderer)==null?void 0:_.screen}destroy(_,et){const tt=gs._plugins.slice(0);tt.reverse(),tt.forEach(rt=>{rt.destroy.call(this)}),this.stage.destroy(et),this.stage=null,this.renderer.destroy(_),this.renderer=null}};_Application._plugins=[];let Application=_Application;extensions$1.handleByList(ExtensionType.Application,Application._plugins);class ResizePlugin{static init(_){Object.defineProperty(this,"resizeTo",{set(et){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=et,et&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let et,tt;if(this._resizeTo===globalThis.window)et=globalThis.innerWidth,tt=globalThis.innerHeight;else{const{clientWidth:rt,clientHeight:it}=this._resizeTo;et=rt,tt=it}this.renderer.resize(et,tt),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=_.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}ResizePlugin.extension=ExtensionType.Application;extensions$1.add(ResizePlugin);const assetKeyMap={loader:ExtensionType.LoadParser,resolver:ExtensionType.ResolveParser,cache:ExtensionType.CacheParser,detection:ExtensionType.DetectionParser};extensions$1.handle(ExtensionType.Asset,_e=>{const _=_e.ref;Object.entries(assetKeyMap).filter(([et])=>!!_[et]).forEach(([et,tt])=>extensions$1.add(Object.assign(_[et],{extension:_[et].extension??tt})))},_e=>{const _=_e.ref;Object.keys(assetKeyMap).filter(et=>!!_[et]).forEach(et=>extensions$1.remove(_[et]))});class BackgroundLoader{constructor(_,et=!1){this._loader=_,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=et}add(_){_.forEach(et=>{this._assetList.push(et)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const _=[],et=Math.min(this._assetList.length,this._maxConcurrent);for(let tt=0;tt<et;tt++)_.push(this._assetList.pop());await this._loader.load(_),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(_){this._isActive!==_&&(this._isActive=_,_&&!this._isLoading&&this._next())}}function checkDataUrl(_e,_){if(Array.isArray(_)){for(const et of _)if(_e.startsWith(`data:${et}`))return!0;return!1}return _e.startsWith(`data:${_}`)}function checkExtension(_e,_){const et=_e.split("?")[0],tt=path.extname(et).toLowerCase();return Array.isArray(_)?_.includes(tt):tt===_}const convertToList=(_e,_,et=!1)=>(Array.isArray(_e)||(_e=[_e]),_?_e.map(tt=>typeof tt=="string"||et?_(tt):tt):_e),copySearchParams=(_e,_)=>{const et=_.split("?")[1];return et&&(_e+=`?${et}`),_e};function processX(_e,_,et,tt,rt){const it=_[et];for(let st=0;st<it.length;st++){const at=it[st];et<_.length-1?processX(_e.replace(tt[et],at),_,et+1,tt,rt):rt.push(_e.replace(tt[et],at))}}function createStringVariations(_e){const _=/\{(.*?)\}/g,et=_e.match(_),tt=[];if(et){const rt=[];et.forEach(it=>{const st=it.substring(1,it.length-1).split(",");rt.push(st)}),processX(_e,rt,0,et,tt)}else tt.push(_e);return tt}const isSingleItem=_e=>!Array.isArray(_e);class CacheClass{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(_){return this._cache.has(_)}get(_){const et=this._cache.get(_);return et||console.warn(`[Assets] Asset id ${_} was not found in the Cache`),et}set(_,et){const tt=convertToList(_);let rt;for(let at=0;at<this.parsers.length;at++){const ct=this.parsers[at];if(ct.test(et)){rt=ct.getCacheableAssets(tt,et);break}}rt||(rt={},tt.forEach(at=>{rt[at]=et}));const it=Object.keys(rt),st={cacheKeys:it,keys:tt};if(tt.forEach(at=>{this._cacheMap.set(at,st)}),it.forEach(at=>{this._cache.has(at)&&this._cache.get(at)!==et&&console.warn("[Cache] already has key:",at),this._cache.set(at,rt[at])}),et instanceof Texture){const at=et;tt.forEach(ct=>{at.baseTexture!==Texture.EMPTY.baseTexture&&BaseTexture.addToCache(at.baseTexture,ct),Texture.addToCache(at,ct)})}}remove(_){if(!this._cacheMap.has(_)){console.warn(`[Assets] Asset id ${_} was not found in the Cache`);return}const et=this._cacheMap.get(_);et.cacheKeys.forEach(tt=>{this._cache.delete(tt)}),et.keys.forEach(tt=>{this._cacheMap.delete(tt)})}get parsers(){return this._parsers}}const Cache=new CacheClass;class Loader{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(_,et,tt)=>(this._parsersValidated=!1,_[et]=tt,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(_,et){const tt={promise:null,parser:null};return tt.promise=(async()=>{var st,at;let rt=null,it=null;if(et.loadParser&&(it=this._parserHash[et.loadParser],it||console.warn(`[Assets] specified load parser "${et.loadParser}" not found while loading ${_}`)),!it){for(let ct=0;ct<this.parsers.length;ct++){const ut=this.parsers[ct];if(ut.load&&((st=ut.test)!=null&&st.call(ut,_,et,this))){it=ut;break}}if(!it)return console.warn(`[Assets] ${_} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}rt=await it.load(_,et,this),tt.parser=it;for(let ct=0;ct<this.parsers.length;ct++){const ut=this.parsers[ct];ut.parse&&ut.parse&&await((at=ut.testParse)==null?void 0:at.call(ut,rt,et,this))&&(rt=await ut.parse(rt,et,this)||rt,tt.parser=ut)}return rt})(),tt}async load(_,et){this._parsersValidated||this._validateParsers();let tt=0;const rt={},it=isSingleItem(_),st=convertToList(_,ut=>({alias:[ut],src:ut})),at=st.length,ct=st.map(async ut=>{const dt=path.toAbsolute(ut.src);if(!rt[ut.src])try{this.promiseCache[dt]||(this.promiseCache[dt]=this._getLoadPromiseAndParser(dt,ut)),rt[ut.src]=await this.promiseCache[dt].promise,et&&et(++tt/at)}catch(ot){throw delete this.promiseCache[dt],delete rt[ut.src],new Error(`[Loader.load] Failed to load ${dt}.
${ot}`)}});return await Promise.all(ct),it?rt[st[0].src]:rt}async unload(_){const et=convertToList(_,tt=>({alias:[tt],src:tt})).map(async tt=>{var st,at;const rt=path.toAbsolute(tt.src),it=this.promiseCache[rt];if(it){const ct=await it.promise;delete this.promiseCache[rt],(at=(st=it.parser)==null?void 0:st.unload)==null||at.call(st,ct,tt,this)}});await Promise.all(et)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(_=>_.name).reduce((_,et)=>(_[et.name]&&console.warn(`[Assets] loadParser name conflict "${et.name}"`),{..._,[et.name]:et}),{})}}var LoaderParserPriority=(_e=>(_e[_e.Low=0]="Low",_e[_e.Normal=1]="Normal",_e[_e.High=2]="High",_e))(LoaderParserPriority||{});const validJSONExtension=".json",validJSONMIME="application/json",loadJson={extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.Low},name:"loadJson",test(_e){return checkDataUrl(_e,validJSONMIME)||checkExtension(_e,validJSONExtension)},async load(_e){return await(await settings.ADAPTER.fetch(_e)).json()}};extensions$1.add(loadJson);const validTXTExtension=".txt",validTXTMIME="text/plain",loadTxt={name:"loadTxt",extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.Low},test(_e){return checkDataUrl(_e,validTXTMIME)||checkExtension(_e,validTXTExtension)},async load(_e){return await(await settings.ADAPTER.fetch(_e)).text()}};extensions$1.add(loadTxt);const validWeights=["normal","bold","100","200","300","400","500","600","700","800","900"],validFontExtensions=[".ttf",".otf",".woff",".woff2"],validFontMIMEs=["font/ttf","font/otf","font/woff","font/woff2"],CSS_IDENT_TOKEN_REGEX=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function getFontFamilyName(_e){const _=path.extname(_e),et=path.basename(_e,_).replace(/(-|_)/g," ").toLowerCase().split(" ").map(it=>it.charAt(0).toUpperCase()+it.slice(1));let tt=et.length>0;for(const it of et)if(!it.match(CSS_IDENT_TOKEN_REGEX)){tt=!1;break}let rt=et.join(" ");return tt||(rt=`"${rt.replace(/[\\"]/g,"\\$&")}"`),rt}const validURICharactersRegex=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function encodeURIWhenNeeded(_e){return validURICharactersRegex.test(_e)?_e:encodeURI(_e)}const loadWebFont={extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.Low},name:"loadWebFont",test(_e){return checkDataUrl(_e,validFontMIMEs)||checkExtension(_e,validFontExtensions)},async load(_e,_){var tt,rt,it;const et=settings.ADAPTER.getFontFaceSet();if(et){const st=[],at=((tt=_.data)==null?void 0:tt.family)??getFontFamilyName(_e),ct=((it=(rt=_.data)==null?void 0:rt.weights)==null?void 0:it.filter(dt=>validWeights.includes(dt)))??["normal"],ut=_.data??{};for(let dt=0;dt<ct.length;dt++){const ot=ct[dt],nt=new FontFace(at,`url(${encodeURIWhenNeeded(_e)})`,{...ut,weight:ot});await nt.load(),et.add(nt),st.push(nt)}return st.length===1?st[0]:st}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(_e){(Array.isArray(_e)?_e:[_e]).forEach(_=>settings.ADAPTER.getFontFaceSet().delete(_))}};extensions$1.add(loadWebFont);const WORKER_CODE$1=`(function() {
  "use strict";
  const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
  async function checkImageBitmap() {
    try {
      if (typeof createImageBitmap != "function")
        return !1;
      const imageBlob = await (await fetch(WHITE_PNG)).blob(), imageBitmap = await createImageBitmap(imageBlob);
      return imageBitmap.width === 1 && imageBitmap.height === 1;
    } catch {
      return !1;
    }
  }
  checkImageBitmap().then((result) => {
    self.postMessage(result);
  });
})();
`;let WORKER_URL$1=null,WorkerInstance$1=class{constructor(){WORKER_URL$1||(WORKER_URL$1=URL.createObjectURL(new Blob([WORKER_CODE$1],{type:"application/javascript"}))),this.worker=new Worker(WORKER_URL$1)}};WorkerInstance$1.revokeObjectURL=function(){WORKER_URL$1&&(URL.revokeObjectURL(WORKER_URL$1),WORKER_URL$1=null)};const WORKER_CODE=`(function() {
  "use strict";
  async function loadImageBitmap(url) {
    const response = await fetch(url);
    if (!response.ok)
      throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
    const imageBlob = await response.blob();
    return await createImageBitmap(imageBlob);
  }
  self.onmessage = async (event) => {
    try {
      const imageBitmap = await loadImageBitmap(event.data.data[0]);
      self.postMessage({
        data: imageBitmap,
        uuid: event.data.uuid,
        id: event.data.id
      }, [imageBitmap]);
    } catch (e) {
      self.postMessage({
        error: e,
        uuid: event.data.uuid,
        id: event.data.id
      });
    }
  };
})();
`;let WORKER_URL=null;class WorkerInstance{constructor(){WORKER_URL||(WORKER_URL=URL.createObjectURL(new Blob([WORKER_CODE],{type:"application/javascript"}))),this.worker=new Worker(WORKER_URL)}}WorkerInstance.revokeObjectURL=function(){WORKER_URL&&(URL.revokeObjectURL(WORKER_URL),WORKER_URL=null)};let UUID=0,MAX_WORKERS;class WorkerManagerClass{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(_=>{const{worker:et}=new WorkerInstance$1;et.addEventListener("message",tt=>{et.terminate(),WorkerInstance$1.revokeObjectURL(),_(tt.data)})}),this._isImageBitmapSupported)}loadImageBitmap(_){return this._run("loadImageBitmap",[_])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){MAX_WORKERS===void 0&&(MAX_WORKERS=navigator.hardwareConcurrency||4);let _=this.workerPool.pop();return!_&&this._createdWorkers<MAX_WORKERS&&(this._createdWorkers++,_=new WorkerInstance().worker,_.addEventListener("message",et=>{this.complete(et.data),this.returnWorker(et.target),this.next()})),_}returnWorker(_){this.workerPool.push(_)}complete(_){_.error!==void 0?this.resolveHash[_.uuid].reject(_.error):this.resolveHash[_.uuid].resolve(_.data),this.resolveHash[_.uuid]=null}async _run(_,et){await this._initWorkers();const tt=new Promise((rt,it)=>{this.queue.push({id:_,arguments:et,resolve:rt,reject:it})});return this.next(),tt}next(){if(!this.queue.length)return;const _=this.getWorker();if(!_)return;const et=this.queue.pop(),tt=et.id;this.resolveHash[UUID]={resolve:et.resolve,reject:et.reject},_.postMessage({data:et.arguments,uuid:UUID++,id:tt})}}const WorkerManager=new WorkerManagerClass;function createTexture$1(_e,_,et){_e.resource.internal=!0;const tt=new Texture(_e),rt=()=>{delete _.promiseCache[et],Cache.has(et)&&Cache.remove(et)};return tt.baseTexture.once("destroyed",()=>{et in _.promiseCache&&(console.warn("[Assets] A BaseTexture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the BaseTexture."),rt())}),tt.once("destroyed",()=>{_e.destroyed||(console.warn("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),rt())}),tt}const validImageExtensions=[".jpeg",".jpg",".png",".webp",".avif"],validImageMIMEs=["image/jpeg","image/png","image/webp","image/avif"];async function loadImageBitmap(_e){const _=await settings.ADAPTER.fetch(_e);if(!_.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${_e}: ${_.status} ${_.statusText}`);const et=await _.blob();return await createImageBitmap(et)}const loadTextures={name:"loadTextures",extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(_e){return checkDataUrl(_e,validImageMIMEs)||checkExtension(_e,validImageExtensions)},async load(_e,_,et){var at;const tt=globalThis.createImageBitmap&&this.config.preferCreateImageBitmap;let rt;tt?this.config.preferWorkers&&await WorkerManager.isImageBitmapSupported()?rt=await WorkerManager.loadImageBitmap(_e):rt=await loadImageBitmap(_e):rt=await new Promise((ct,ut)=>{const dt=new Image;dt.crossOrigin=this.config.crossOrigin,dt.src=_e,dt.complete?ct(dt):(dt.onload=()=>ct(dt),dt.onerror=ot=>ut(ot))});const it={..._.data};it.resolution??(it.resolution=getResolutionOfUrl(_e)),tt&&((at=it.resourceOptions)==null?void 0:at.ownsImageBitmap)===void 0&&(it.resourceOptions={...it.resourceOptions},it.resourceOptions.ownsImageBitmap=!0);const st=new BaseTexture(rt,it);return st.resource.src=_e,createTexture$1(st,et,_e)},unload(_e){_e.destroy(!0)}};extensions$1.add(loadTextures);const validSVGExtension=".svg",validSVGMIME="image/svg+xml",loadSVG={extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.High},name:"loadSVG",test(_e){return checkDataUrl(_e,validSVGMIME)||checkExtension(_e,validSVGExtension)},async testParse(_e){return SVGResource.test(_e)},async parse(_e,_,et){var it;const tt=new SVGResource(_e,(it=_==null?void 0:_.data)==null?void 0:it.resourceOptions);await tt.load();const rt=new BaseTexture(tt,{resolution:getResolutionOfUrl(_e),..._==null?void 0:_.data});return rt.resource.src=_.src,createTexture$1(rt,et,_.src)},async load(_e,_){return(await settings.ADAPTER.fetch(_e)).text()},unload:loadTextures.unload};extensions$1.add(loadSVG);const validVideoExtensions=[".mp4",".m4v",".webm",".ogv"],validVideoMIMEs=["video/mp4","video/webm","video/ogg"],loadVideo={name:"loadVideo",extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.High},config:{defaultAutoPlay:!0,defaultUpdateFPS:0,defaultLoop:!1,defaultMuted:!1,defaultPlaysinline:!0},test(_e){return checkDataUrl(_e,validVideoMIMEs)||checkExtension(_e,validVideoExtensions)},async load(_e,_,et){var st;let tt;const rt=await(await settings.ADAPTER.fetch(_e)).blob(),it=URL.createObjectURL(rt);try{const at={autoPlay:this.config.defaultAutoPlay,updateFPS:this.config.defaultUpdateFPS,loop:this.config.defaultLoop,muted:this.config.defaultMuted,playsinline:this.config.defaultPlaysinline,...(st=_==null?void 0:_.data)==null?void 0:st.resourceOptions,autoLoad:!0},ct=new VideoResource(it,at);await ct.load();const ut=new BaseTexture(ct,{alphaMode:await detectVideoAlphaMode(),resolution:getResolutionOfUrl(_e),..._==null?void 0:_.data});ut.resource.src=_e,tt=createTexture$1(ut,et,_e),tt.baseTexture.once("destroyed",()=>{URL.revokeObjectURL(it)})}catch(at){throw URL.revokeObjectURL(it),at}return tt},unload(_e){_e.destroy(!0)}};extensions$1.add(loadVideo);class Resolver{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(_,et)=>`${_}${this._bundleIdConnector}${et}`,extractAssetIdFromBundle:(_,et)=>et.replace(`${_}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(_){if(this._bundleIdConnector=_.connector??this._bundleIdConnector,this._createBundleAssetId=_.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=_.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(..._){_.forEach(et=>{this._preferredOrder.push(et),et.priority||(et.priority=Object.keys(et.params))}),this._resolverHash={}}set basePath(_){this._basePath=_}get basePath(){return this._basePath}set rootPath(_){this._rootPath=_}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(_){if(typeof _=="string")this._defaultSearchParams=_;else{const et=_;this._defaultSearchParams=Object.keys(et).map(tt=>`${encodeURIComponent(tt)}=${encodeURIComponent(et[tt])}`).join("&")}}getAlias(_){const{alias:et,name:tt,src:rt,srcs:it}=_;return convertToList(et||tt||rt||it,st=>typeof st=="string"?st:Array.isArray(st)?st.map(at=>(at==null?void 0:at.src)??(at==null?void 0:at.srcs)??at):st!=null&&st.src||st!=null&&st.srcs?st.src??st.srcs:st,!0)}addManifest(_){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=_,_.bundles.forEach(et=>{this.addBundle(et.name,et.assets)})}addBundle(_,et){const tt=[];Array.isArray(et)?et.forEach(rt=>{const it=rt.src??rt.srcs,st=rt.alias??rt.name;let at;if(typeof st=="string"){const ct=this._createBundleAssetId(_,st);tt.push(ct),at=[st,ct]}else{const ct=st.map(ut=>this._createBundleAssetId(_,ut));tt.push(...ct),at=[...st,...ct]}this.add({...rt,alias:at,src:it})}):Object.keys(et).forEach(rt=>{const it=[rt,this._createBundleAssetId(_,rt)];if(typeof et[rt]=="string")this.add({alias:it,src:et[rt]});else if(Array.isArray(et[rt]))this.add({alias:it,src:et[rt]});else{const st=et[rt],at=st.src??st.srcs;this.add({...st,alias:it,src:Array.isArray(at)?at:[at]})}tt.push(...it)}),this._bundles[_]=tt}add(_,et,tt,rt,it){const st=[];typeof _=="string"||Array.isArray(_)&&typeof _[0]=="string"?(deprecation("7.2.0",`Assets.add now uses an object instead of individual parameters.
Please use Assets.add({ alias, src, data, format, loadParser }) instead.`),st.push({alias:_,src:et,data:tt,format:rt,loadParser:it})):Array.isArray(_)?st.push(..._):st.push(_);let at;at=ct=>{this.hasKey(ct)&&console.warn(`[Resolver] already has key: ${ct} overwriting`)},convertToList(st).forEach(ct=>{const{src:ut,srcs:dt}=ct;let{data:ot,format:nt,loadParser:lt}=ct;const ht=convertToList(ut||dt).map(mt=>typeof mt=="string"?createStringVariations(mt):Array.isArray(mt)?mt:[mt]),ft=this.getAlias(ct);Array.isArray(ft)?ft.forEach(at):at(ft);const gt=[];ht.forEach(mt=>{mt.forEach(yt=>{let bt={};if(typeof yt!="object"){bt.src=yt;for(let _t=0;_t<this._parsers.length;_t++){const vt=this._parsers[_t];if(vt.test(yt)){bt=vt.parse(yt);break}}}else ot=yt.data??ot,nt=yt.format??nt,lt=yt.loadParser??lt,bt={...bt,...yt};if(!ft)throw new Error(`[Resolver] alias is undefined for this asset: ${bt.src}`);bt=this.buildResolvedAsset(bt,{aliases:ft,data:ot,format:nt,loadParser:lt}),gt.push(bt)})}),ft.forEach(mt=>{this._assetMap[mt]=gt})})}resolveBundle(_){const et=isSingleItem(_);_=convertToList(_);const tt={};return _.forEach(rt=>{const it=this._bundles[rt];if(it){const st=this.resolve(it),at={};for(const ct in st){const ut=st[ct];at[this._extractAssetIdFromBundle(rt,ct)]=ut}tt[rt]=at}}),et?tt[_[0]]:tt}resolveUrl(_){const et=this.resolve(_);if(typeof _!="string"){const tt={};for(const rt in et)tt[rt]=et[rt].src;return tt}return et.src}resolve(_){const et=isSingleItem(_);_=convertToList(_);const tt={};return _.forEach(rt=>{if(!this._resolverHash[rt])if(this._assetMap[rt]){let it=this._assetMap[rt];const st=it[0],at=this._getPreferredOrder(it);at==null||at.priority.forEach(ct=>{at.params[ct].forEach(ut=>{const dt=it.filter(ot=>ot[ct]?ot[ct]===ut:!1);dt.length&&(it=dt)})}),this._resolverHash[rt]=it[0]??st}else this._resolverHash[rt]=this.buildResolvedAsset({alias:[rt],src:rt},{});tt[rt]=this._resolverHash[rt]}),et?tt[_[0]]:tt}hasKey(_){return!!this._assetMap[_]}hasBundle(_){return!!this._bundles[_]}_getPreferredOrder(_){for(let et=0;et<_.length;et++){const tt=_[0],rt=this._preferredOrder.find(it=>it.params.format.includes(tt.format));if(rt)return rt}return this._preferredOrder[0]}_appendDefaultSearchParams(_){if(!this._defaultSearchParams)return _;const et=/\?/.test(_)?"&":"?";return`${_}${et}${this._defaultSearchParams}`}buildResolvedAsset(_,et){const{aliases:tt,data:rt,loadParser:it,format:st}=et;return(this._basePath||this._rootPath)&&(_.src=path.toAbsolute(_.src,this._basePath,this._rootPath)),_.alias=tt??_.alias??[_.src],_.src=this._appendDefaultSearchParams(_.src),_.data={...rt||{},..._.data},_.loadParser=it??_.loadParser,_.format=st??_.format??path.extname(_.src).slice(1),_.srcs=_.src,_.name=_.alias,_}}class AssetsClass{constructor(){this._detections=[],this._initialized=!1,this.resolver=new Resolver,this.loader=new Loader,this.cache=Cache,this._backgroundLoader=new BackgroundLoader(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(_={}){var it,st;if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,_.defaultSearchParams&&this.resolver.setDefaultSearchParams(_.defaultSearchParams),_.basePath&&(this.resolver.basePath=_.basePath),_.bundleIdentifier&&this.resolver.setBundleIdentifier(_.bundleIdentifier),_.manifest){let at=_.manifest;typeof at=="string"&&(at=await this.load(at)),this.resolver.addManifest(at)}const et=((it=_.texturePreference)==null?void 0:it.resolution)??1,tt=typeof et=="number"?[et]:et,rt=await this._detectFormats({preferredFormats:(st=_.texturePreference)==null?void 0:st.format,skipDetections:_.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:rt,resolution:tt}}),_.preferences&&this.setPreferences(_.preferences)}add(_,et,tt,rt,it){this.resolver.add(_,et,tt,rt,it)}async load(_,et){this._initialized||await this.init();const tt=isSingleItem(_),rt=convertToList(_).map(at=>{if(typeof at!="string"){const ct=this.resolver.getAlias(at);return ct.some(ut=>!this.resolver.hasKey(ut))&&this.add(at),Array.isArray(ct)?ct[0]:ct}return this.resolver.hasKey(at)||this.add({alias:at,src:at}),at}),it=this.resolver.resolve(rt),st=await this._mapLoadToResolve(it,et);return tt?st[rt[0]]:st}addBundle(_,et){this.resolver.addBundle(_,et)}async loadBundle(_,et){this._initialized||await this.init();let tt=!1;typeof _=="string"&&(tt=!0,_=[_]);const rt=this.resolver.resolveBundle(_),it={},st=Object.keys(rt);let at=0,ct=0;const ut=()=>{et==null||et(++at/ct)},dt=st.map(ot=>{const nt=rt[ot];return ct+=Object.keys(nt).length,this._mapLoadToResolve(nt,ut).then(lt=>{it[ot]=lt})});return await Promise.all(dt),tt?it[_[0]]:it}async backgroundLoad(_){this._initialized||await this.init(),typeof _=="string"&&(_=[_]);const et=this.resolver.resolve(_);this._backgroundLoader.add(Object.values(et))}async backgroundLoadBundle(_){this._initialized||await this.init(),typeof _=="string"&&(_=[_]);const et=this.resolver.resolveBundle(_);Object.values(et).forEach(tt=>{this._backgroundLoader.add(Object.values(tt))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(_){if(typeof _=="string")return Cache.get(_);const et={};for(let tt=0;tt<_.length;tt++)et[tt]=Cache.get(_[tt]);return et}async _mapLoadToResolve(_,et){const tt=Object.values(_),rt=Object.keys(_);this._backgroundLoader.active=!1;const it=await this.loader.load(tt,et);this._backgroundLoader.active=!0;const st={};return tt.forEach((at,ct)=>{const ut=it[at.src],dt=[at.src];at.alias&&dt.push(...at.alias),st[rt[ct]]=ut,Cache.set(dt,ut)}),st}async unload(_){this._initialized||await this.init();const et=convertToList(_).map(rt=>typeof rt!="string"?rt.src:rt),tt=this.resolver.resolve(et);await this._unloadFromResolved(tt)}async unloadBundle(_){this._initialized||await this.init(),_=convertToList(_);const et=this.resolver.resolveBundle(_),tt=Object.keys(et).map(rt=>this._unloadFromResolved(et[rt]));await Promise.all(tt)}async _unloadFromResolved(_){const et=Object.values(_);et.forEach(tt=>{Cache.remove(tt.src)}),await this.loader.unload(et)}async _detectFormats(_){let et=[];_.preferredFormats&&(et=Array.isArray(_.preferredFormats)?_.preferredFormats:[_.preferredFormats]);for(const tt of _.detections)_.skipDetections||await tt.test()?et=await tt.add(et):_.skipDetections||(et=await tt.remove(et));return et=et.filter((tt,rt)=>et.indexOf(tt)===rt),et}get detections(){return this._detections}get preferWorkers(){return loadTextures.config.preferWorkers}set preferWorkers(_){deprecation("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:_})}setPreferences(_){this.loader.parsers.forEach(et=>{et.config&&Object.keys(et.config).filter(tt=>tt in _).forEach(tt=>{et.config[tt]=_[tt]})})}}const Assets=new AssetsClass;extensions$1.handleByList(ExtensionType.LoadParser,Assets.loader.parsers).handleByList(ExtensionType.ResolveParser,Assets.resolver.parsers).handleByList(ExtensionType.CacheParser,Assets.cache.parsers).handleByList(ExtensionType.DetectionParser,Assets.detections);const cacheTextureArray={extension:ExtensionType.CacheParser,test:_e=>Array.isArray(_e)&&_e.every(_=>_ instanceof Texture),getCacheableAssets:(_e,_)=>{const et={};return _e.forEach(tt=>{_.forEach((rt,it)=>{et[tt+(it===0?"":it+1)]=rt})}),et}};extensions$1.add(cacheTextureArray);async function testImageFormat(_e){if("Image"in globalThis)return new Promise(_=>{const et=new Image;et.onload=()=>{_(!0)},et.onerror=()=>{_(!1)},et.src=_e});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const _=await(await fetch(_e)).blob();await createImageBitmap(_)}catch{return!1}return!0}return!1}const detectAvif={extension:{type:ExtensionType.DetectionParser,priority:1},test:async()=>testImageFormat("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async _e=>[..._e,"avif"],remove:async _e=>_e.filter(_=>_!=="avif")};extensions$1.add(detectAvif);const detectWebp={extension:{type:ExtensionType.DetectionParser,priority:0},test:async()=>testImageFormat("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async _e=>[..._e,"webp"],remove:async _e=>_e.filter(_=>_!=="webp")};extensions$1.add(detectWebp);const imageFormats=["png","jpg","jpeg"],detectDefaults={extension:{type:ExtensionType.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async _e=>[..._e,...imageFormats],remove:async _e=>_e.filter(_=>!imageFormats.includes(_))};extensions$1.add(detectDefaults);const inWorker="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function testVideoFormat(_e){return inWorker?!1:document.createElement("video").canPlayType(_e)!==""}const detectWebm={extension:{type:ExtensionType.DetectionParser,priority:0},test:async()=>testVideoFormat("video/webm"),add:async _e=>[..._e,"webm"],remove:async _e=>_e.filter(_=>_!=="webm")};extensions$1.add(detectWebm);const detectMp4={extension:{type:ExtensionType.DetectionParser,priority:0},test:async()=>testVideoFormat("video/mp4"),add:async _e=>[..._e,"mp4","m4v"],remove:async _e=>_e.filter(_=>_!=="mp4"&&_!=="m4v")};extensions$1.add(detectMp4);const detectOgv={extension:{type:ExtensionType.DetectionParser,priority:0},test:async()=>testVideoFormat("video/ogg"),add:async _e=>[..._e,"ogv"],remove:async _e=>_e.filter(_=>_!=="ogv")};extensions$1.add(detectOgv);const resolveTextureUrl={extension:ExtensionType.ResolveParser,test:loadTextures.test,parse:_e=>{var _;return{resolution:parseFloat(((_=settings.RETINA_PREFIX.exec(_e))==null?void 0:_[1])??"1"),format:path.extname(_e).slice(1),src:_e}}};extensions$1.add(resolveTextureUrl);var INTERNAL_FORMATS=(_e=>(_e[_e.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",_e[_e.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",_e[_e.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",_e[_e.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",_e[_e.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",_e[_e.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",_e[_e.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",_e[_e.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",_e[_e.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",_e[_e.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",_e[_e.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",_e[_e.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",_e[_e.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",_e[_e.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",_e[_e.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",_e[_e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",_e[_e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",_e[_e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",_e[_e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",_e[_e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",_e[_e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",_e[_e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",_e[_e.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",_e[_e.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",_e[_e.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35987]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",_e[_e.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",_e[_e.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",_e[_e.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",_e[_e.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",_e[_e.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",_e[_e.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",_e))(INTERNAL_FORMATS||{});const INTERNAL_FORMAT_TO_BYTES_PER_PIXEL={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35987:1,34798:1,37808:1,36492:1,36493:1,36494:1,36495:1};let storedGl,extensions;function getCompressedTextureExtensions(){extensions={bptc:storedGl.getExtension("EXT_texture_compression_bptc"),astc:storedGl.getExtension("WEBGL_compressed_texture_astc"),etc:storedGl.getExtension("WEBGL_compressed_texture_etc"),s3tc:storedGl.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:storedGl.getExtension("WEBGL_compressed_texture_s3tc_srgb"),pvrtc:storedGl.getExtension("WEBGL_compressed_texture_pvrtc")||storedGl.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),etc1:storedGl.getExtension("WEBGL_compressed_texture_etc1"),atc:storedGl.getExtension("WEBGL_compressed_texture_atc")}}const detectCompressedTextures={extension:{type:ExtensionType.DetectionParser,priority:2},test:async()=>{const _e=settings.ADAPTER.createCanvas().getContext("webgl");return _e?(storedGl=_e,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async _e=>{extensions||getCompressedTextureExtensions();const _=[];for(const et in extensions)extensions[et]&&_.push(et);return[..._,..._e]},remove:async _e=>(extensions||getCompressedTextureExtensions(),_e.filter(_=>!(_ in extensions)))};extensions$1.add(detectCompressedTextures);class BlobResource extends BufferResource{constructor(_,et={width:1,height:1,autoLoad:!0}){let tt,rt;typeof _=="string"?(tt=_,rt=new Uint8Array):(tt=null,rt=_),super(rt,et),this.origin=tt,this.buffer=rt?new ViewableBuffer(rt):null,this._load=null,this.loaded=!1,this.origin!==null&&et.autoLoad!==!1&&this.load(),this.origin===null&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(_){}load(){return this._load?this._load:(this._load=fetch(this.origin).then(_=>_.blob()).then(_=>_.arrayBuffer()).then(_=>(this.data=new Uint32Array(_),this.buffer=new ViewableBuffer(_),this.loaded=!0,this.onBlobLoaded(_),this.update(),this)),this._load)}}class CompressedTextureResource extends BlobResource{constructor(_,et){super(_,et),this.format=et.format,this.levels=et.levels||1,this._width=et.width,this._height=et.height,this._extension=CompressedTextureResource._formatToExtension(this.format),(et.levelBuffers||this.buffer)&&(this._levelBuffers=et.levelBuffers||CompressedTextureResource._createLevelBuffers(_ instanceof Uint8Array?_:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(_,et,tt){const rt=_.gl;if(!_.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;rt.pixelStorei(rt.UNPACK_ALIGNMENT,4);for(let it=0,st=this.levels;it<st;it++){const{levelID:at,levelWidth:ct,levelHeight:ut,levelBuffer:dt}=this._levelBuffers[it];rt.compressedTexImage2D(rt.TEXTURE_2D,at,this.format,ct,ut,0,dt)}return!0}onBlobLoaded(){this._levelBuffers=CompressedTextureResource._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(_){if(_>=33776&&_<=33779)return"s3tc";if(_>=35916&&_<=35919)return"s3tc_sRGB";if(_>=37488&&_<=37497)return"etc";if(_>=35840&&_<=35843)return"pvrtc";if(_===36196)return"etc1";if(_===35986||_===35987||_===34798)return"atc";if(_>=36492&&_<=36495)return"bptc";if(_===37808)return"astc";throw new Error(`Invalid (compressed) texture format given: ${_}`)}static _createLevelBuffers(_,et,tt,rt,it,st,at){const ct=new Array(tt);let ut=_.byteOffset,dt=st,ot=at,nt=dt+rt-1&~(rt-1),lt=ot+it-1&~(it-1),ht=nt*lt*INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[et];for(let ft=0;ft<tt;ft++)ct[ft]={levelID:ft,levelWidth:tt>1?dt:nt,levelHeight:tt>1?ot:lt,levelBuffer:new Uint8Array(_.buffer,ut,ht)},ut+=ht,dt=dt>>1||1,ot=ot>>1||1,nt=dt+rt-1&~(rt-1),lt=ot+it-1&~(it-1),ht=nt*lt*INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[et];return ct}}const DDS_MAGIC_SIZE=4,DDS_HEADER_SIZE=124,DDS_HEADER_PF_SIZE=32,DDS_HEADER_DX10_SIZE=20,DDS_MAGIC=542327876,DDS_FIELDS={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},DDS_PF_FIELDS={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},DDS_DX10_FIELDS={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},PF_FLAGS=1,DDPF_ALPHA=2,DDPF_FOURCC=4,DDPF_RGB=64,DDPF_YUV=512,DDPF_LUMINANCE=131072,FOURCC_DXT1=827611204,FOURCC_DXT3=861165636,FOURCC_DXT5=894720068,FOURCC_DX10=808540228,DDS_RESOURCE_MISC_TEXTURECUBE=4,FOURCC_TO_FORMAT={[FOURCC_DXT1]:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT,[FOURCC_DXT3]:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT,[FOURCC_DXT5]:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT},DXGI_TO_FORMAT={70:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,96:INTERNAL_FORMATS.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT,95:INTERNAL_FORMATS.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT,98:INTERNAL_FORMATS.COMPRESSED_RGBA_BPTC_UNORM_EXT,99:INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT};function parseDDS(_e){const _=new Uint32Array(_e);if(_[0]!==DDS_MAGIC)throw new Error("Invalid DDS file magic word");const et=new Uint32Array(_e,0,DDS_HEADER_SIZE/Uint32Array.BYTES_PER_ELEMENT),tt=et[DDS_FIELDS.HEIGHT],rt=et[DDS_FIELDS.WIDTH],it=et[DDS_FIELDS.MIPMAP_COUNT],st=new Uint32Array(_e,DDS_FIELDS.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,DDS_HEADER_PF_SIZE/Uint32Array.BYTES_PER_ELEMENT),at=st[PF_FLAGS];if(at&DDPF_FOURCC){const ct=st[DDS_PF_FIELDS.FOURCC];if(ct!==FOURCC_DX10){const yt=FOURCC_TO_FORMAT[ct],bt=DDS_MAGIC_SIZE+DDS_HEADER_SIZE,_t=new Uint8Array(_e,bt);return[new CompressedTextureResource(_t,{format:yt,width:rt,height:tt,levels:it})]}const ut=DDS_MAGIC_SIZE+DDS_HEADER_SIZE,dt=new Uint32Array(_.buffer,ut,DDS_HEADER_DX10_SIZE/Uint32Array.BYTES_PER_ELEMENT),ot=dt[DDS_DX10_FIELDS.DXGI_FORMAT],nt=dt[DDS_DX10_FIELDS.RESOURCE_DIMENSION],lt=dt[DDS_DX10_FIELDS.MISC_FLAG],ht=dt[DDS_DX10_FIELDS.ARRAY_SIZE],ft=DXGI_TO_FORMAT[ot];if(ft===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${ot}`);if(lt===DDS_RESOURCE_MISC_TEXTURECUBE)throw new Error("DDSParser does not support cubemap textures");if(nt===6)throw new Error("DDSParser does not supported 3D texture data");const gt=new Array,mt=DDS_MAGIC_SIZE+DDS_HEADER_SIZE+DDS_HEADER_DX10_SIZE;if(ht===1)gt.push(new Uint8Array(_e,mt));else{const yt=INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[ft];let bt=0,_t=rt,vt=tt;for(let wt=0;wt<it;wt++){const Tt=Math.max(1,_t+3&-4),St=Math.max(1,vt+3&-4),Et=Tt*St*yt;bt+=Et,_t=_t>>>1,vt=vt>>>1}let xt=mt;for(let wt=0;wt<ht;wt++)gt.push(new Uint8Array(_e,xt,bt)),xt+=bt}return gt.map(yt=>new CompressedTextureResource(yt,{format:ft,width:rt,height:tt,levels:it}))}throw at&DDPF_RGB?new Error("DDSParser does not support uncompressed texture data."):at&DDPF_YUV?new Error("DDSParser does not supported YUV uncompressed texture data."):at&DDPF_LUMINANCE?new Error("DDSParser does not support single-channel (lumninance) texture data!"):at&DDPF_ALPHA?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}const FILE_IDENTIFIER=[171,75,84,88,32,49,49,187,13,10,26,10],ENDIANNESS=67305985,KTX_FIELDS={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},FILE_HEADER_SIZE=64,TYPES_TO_BYTES_PER_COMPONENT={[TYPES.UNSIGNED_BYTE]:1,[TYPES.UNSIGNED_SHORT]:2,[TYPES.INT]:4,[TYPES.UNSIGNED_INT]:4,[TYPES.FLOAT]:4,[TYPES.HALF_FLOAT]:8},FORMATS_TO_COMPONENTS={[FORMATS.RGBA]:4,[FORMATS.RGB]:3,[FORMATS.RG]:2,[FORMATS.RED]:1,[FORMATS.LUMINANCE]:1,[FORMATS.LUMINANCE_ALPHA]:2,[FORMATS.ALPHA]:1},TYPES_TO_BYTES_PER_PIXEL={[TYPES.UNSIGNED_SHORT_4_4_4_4]:2,[TYPES.UNSIGNED_SHORT_5_5_5_1]:2,[TYPES.UNSIGNED_SHORT_5_6_5]:2};function parseKTX(_e,_,et=!1){const tt=new DataView(_);if(!validate(_e,tt))return null;const rt=tt.getUint32(KTX_FIELDS.ENDIANNESS,!0)===ENDIANNESS,it=tt.getUint32(KTX_FIELDS.GL_TYPE,rt),st=tt.getUint32(KTX_FIELDS.GL_FORMAT,rt),at=tt.getUint32(KTX_FIELDS.GL_INTERNAL_FORMAT,rt),ct=tt.getUint32(KTX_FIELDS.PIXEL_WIDTH,rt),ut=tt.getUint32(KTX_FIELDS.PIXEL_HEIGHT,rt)||1,dt=tt.getUint32(KTX_FIELDS.PIXEL_DEPTH,rt)||1,ot=tt.getUint32(KTX_FIELDS.NUMBER_OF_ARRAY_ELEMENTS,rt)||1,nt=tt.getUint32(KTX_FIELDS.NUMBER_OF_FACES,rt),lt=tt.getUint32(KTX_FIELDS.NUMBER_OF_MIPMAP_LEVELS,rt),ht=tt.getUint32(KTX_FIELDS.BYTES_OF_KEY_VALUE_DATA,rt);if(ut===0||dt!==1)throw new Error("Only 2D textures are supported");if(nt!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(ot!==1)throw new Error("WebGL does not support array textures");const ft=4,gt=4,mt=ct+3&-4,yt=ut+3&-4,bt=new Array(ot);let _t=ct*ut;it===0&&(_t=mt*yt);let vt;if(it!==0?TYPES_TO_BYTES_PER_COMPONENT[it]?vt=TYPES_TO_BYTES_PER_COMPONENT[it]*FORMATS_TO_COMPONENTS[st]:vt=TYPES_TO_BYTES_PER_PIXEL[it]:vt=INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[at],vt===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const xt=et?parseKvData(tt,ht,rt):null;let wt=_t*vt,Tt=ct,St=ut,Et=mt,Ot=yt,Rt=FILE_HEADER_SIZE+ht;for(let Pt=0;Pt<lt;Pt++){const Mt=tt.getUint32(Rt,rt);let $t=Rt+4;for(let kt=0;kt<ot;kt++){let Lt=bt[kt];Lt||(Lt=bt[kt]=new Array(lt)),Lt[Pt]={levelID:Pt,levelWidth:lt>1||it!==0?Tt:Et,levelHeight:lt>1||it!==0?St:Ot,levelBuffer:new Uint8Array(_,$t,wt)},$t+=wt}Rt+=Mt+4,Rt=Rt%4!==0?Rt+4-Rt%4:Rt,Tt=Tt>>1||1,St=St>>1||1,Et=Tt+ft-1&-4,Ot=St+gt-1&-4,wt=Et*Ot*vt}return it!==0?{uncompressed:bt.map(Pt=>{let Mt=Pt[0].levelBuffer,$t=!1;return it===TYPES.FLOAT?Mt=new Float32Array(Pt[0].levelBuffer.buffer,Pt[0].levelBuffer.byteOffset,Pt[0].levelBuffer.byteLength/4):it===TYPES.UNSIGNED_INT?($t=!0,Mt=new Uint32Array(Pt[0].levelBuffer.buffer,Pt[0].levelBuffer.byteOffset,Pt[0].levelBuffer.byteLength/4)):it===TYPES.INT&&($t=!0,Mt=new Int32Array(Pt[0].levelBuffer.buffer,Pt[0].levelBuffer.byteOffset,Pt[0].levelBuffer.byteLength/4)),{resource:new BufferResource(Mt,{width:Pt[0].levelWidth,height:Pt[0].levelHeight}),type:it,format:$t?convertFormatToInteger(st):st}}),kvData:xt}:{compressed:bt.map(Pt=>new CompressedTextureResource(null,{format:at,width:ct,height:ut,levels:lt,levelBuffers:Pt})),kvData:xt}}function validate(_e,_){for(let et=0;et<FILE_IDENTIFIER.length;et++)if(_.getUint8(et)!==FILE_IDENTIFIER[et])return console.error(`${_e} is not a valid *.ktx file!`),!1;return!0}function convertFormatToInteger(_e){switch(_e){case FORMATS.RGBA:return FORMATS.RGBA_INTEGER;case FORMATS.RGB:return FORMATS.RGB_INTEGER;case FORMATS.RG:return FORMATS.RG_INTEGER;case FORMATS.RED:return FORMATS.RED_INTEGER;default:return _e}}function parseKvData(_e,_,et){const tt=new Map;let rt=0;for(;rt<_;){const it=_e.getUint32(FILE_HEADER_SIZE+rt,et),st=FILE_HEADER_SIZE+rt+4,at=3-(it+3)%4;if(it===0||it>_-rt){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let ct=0;for(;ct<it&&_e.getUint8(st+ct)!==0;ct++);if(ct===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const ut=new TextDecoder().decode(new Uint8Array(_e.buffer,st,ct)),dt=new DataView(_e.buffer,st+ct+1,it-ct-1);tt.set(ut,dt),rt+=4+it+at}return tt}const loadDDS={extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.High},name:"loadDDS",test(_e){return checkExtension(_e,".dds")},async load(_e,_,et){const tt=await(await settings.ADAPTER.fetch(_e)).arrayBuffer(),rt=parseDDS(tt).map(it=>{const st=new BaseTexture(it,{mipmap:MIPMAP_MODES.OFF,alphaMode:ALPHA_MODES.NO_PREMULTIPLIED_ALPHA,resolution:getResolutionOfUrl(_e),..._.data});return createTexture$1(st,et,_e)});return rt.length===1?rt[0]:rt},unload(_e){Array.isArray(_e)?_e.forEach(_=>_.destroy(!0)):_e.destroy(!0)}};extensions$1.add(loadDDS);const loadKTX={extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.High},name:"loadKTX",test(_e){return checkExtension(_e,".ktx")},async load(_e,_,et){const tt=await(await settings.ADAPTER.fetch(_e)).arrayBuffer(),{compressed:rt,uncompressed:it,kvData:st}=parseKTX(_e,tt),at=rt??it,ct={mipmap:MIPMAP_MODES.OFF,alphaMode:ALPHA_MODES.NO_PREMULTIPLIED_ALPHA,resolution:getResolutionOfUrl(_e),..._.data},ut=at.map(dt=>{at===it&&Object.assign(ct,{type:dt.type,format:dt.format});const ot=dt.resource??dt,nt=new BaseTexture(ot,ct);return nt.ktxKeyValueData=st,createTexture$1(nt,et,_e)});return ut.length===1?ut[0]:ut},unload(_e){Array.isArray(_e)?_e.forEach(_=>_.destroy(!0)):_e.destroy(!0)}};extensions$1.add(loadKTX);const knownFormats=["s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc"],resolveCompressedTextureUrl={extension:ExtensionType.ResolveParser,test:_e=>{const _=path.extname(_e).slice(1);return["basis","ktx","dds"].includes(_)},parse:_e=>{var tt,rt;const _=_e.split("."),et=_.pop();if(["ktx","dds"].includes(et)){const it=_.pop();if(knownFormats.includes(it))return{resolution:parseFloat(((tt=settings.RETINA_PREFIX.exec(_e))==null?void 0:tt[1])??"1"),format:it,src:_e}}return{resolution:parseFloat(((rt=settings.RETINA_PREFIX.exec(_e))==null?void 0:rt[1])??"1"),format:et,src:_e}}};extensions$1.add(resolveCompressedTextureUrl);const TEMP_RECT=new Rectangle,BYTES_PER_PIXEL=4,_Extract=class Vn{constructor(_){this.renderer=_,this._rendererPremultipliedAlpha=!1}contextChange(){var et;const _=(et=this.renderer)==null?void 0:et.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(_&&_.alpha&&_.premultipliedAlpha)}async image(_,et,tt,rt){const it=new Image;return it.src=await this.base64(_,et,tt,rt),it}async base64(_,et,tt,rt){const it=this.canvas(_,rt);if(it.toBlob!==void 0)return new Promise((st,at)=>{it.toBlob(ct=>{if(!ct){at(new Error("ICanvas.toBlob failed!"));return}const ut=new FileReader;ut.onload=()=>st(ut.result),ut.onerror=at,ut.readAsDataURL(ct)},et,tt)});if(it.toDataURL!==void 0)return it.toDataURL(et,tt);if(it.convertToBlob!==void 0){const st=await it.convertToBlob({type:et,quality:tt});return new Promise((at,ct)=>{const ut=new FileReader;ut.onload=()=>at(ut.result),ut.onerror=ct,ut.readAsDataURL(st)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(_,et){const{pixels:tt,width:rt,height:it,flipY:st,premultipliedAlpha:at}=this._rawPixels(_,et);st&&Vn._flipY(tt,rt,it),at&&Vn._unpremultiplyAlpha(tt);const ct=new CanvasRenderTarget(rt,it,1),ut=new ImageData(new Uint8ClampedArray(tt.buffer),rt,it);return ct.context.putImageData(ut,0,0),ct.canvas}pixels(_,et){const{pixels:tt,width:rt,height:it,flipY:st,premultipliedAlpha:at}=this._rawPixels(_,et);return st&&Vn._flipY(tt,rt,it),at&&Vn._unpremultiplyAlpha(tt),tt}_rawPixels(_,et){const tt=this.renderer;if(!tt)throw new Error("The Extract has already been destroyed");let rt,it=!1,st=!1,at,ct=!1;_&&(_ instanceof RenderTexture?at=_:(at=tt.generateTexture(_,{region:et,resolution:tt.resolution,multisample:tt.multisample}),ct=!0,et&&(TEMP_RECT.width=et.width,TEMP_RECT.height=et.height,et=TEMP_RECT)));const ut=tt.gl;if(at){if(rt=at.baseTexture.resolution,et=et??at.frame,it=!1,st=at.baseTexture.alphaMode>0&&at.baseTexture.format===FORMATS.RGBA,!ct){tt.renderTexture.bind(at);const lt=at.framebuffer.glFramebuffers[tt.CONTEXT_UID];lt.blitFramebuffer&&tt.framebuffer.bind(lt.blitFramebuffer)}}else rt=tt.resolution,et||(et=TEMP_RECT,et.width=tt.width/rt,et.height=tt.height/rt),it=!0,st=this._rendererPremultipliedAlpha,tt.renderTexture.bind();const dt=Math.max(Math.round(et.width*rt),1),ot=Math.max(Math.round(et.height*rt),1),nt=new Uint8Array(BYTES_PER_PIXEL*dt*ot);return ut.readPixels(Math.round(et.x*rt),Math.round(et.y*rt),dt,ot,ut.RGBA,ut.UNSIGNED_BYTE,nt),ct&&(at==null||at.destroy(!0)),{pixels:nt,width:dt,height:ot,flipY:it,premultipliedAlpha:st}}destroy(){this.renderer=null}static _flipY(_,et,tt){const rt=et<<2,it=tt>>1,st=new Uint8Array(rt);for(let at=0;at<it;at++){const ct=at*rt,ut=(tt-at-1)*rt;st.set(_.subarray(ct,ct+rt)),_.copyWithin(ct,ut,ut+rt),_.set(st,ut)}}static _unpremultiplyAlpha(_){_ instanceof Uint8ClampedArray&&(_=new Uint8Array(_.buffer));const et=_.length;for(let tt=0;tt<et;tt+=4){const rt=_[tt+3];if(rt!==0){const it=255.001/rt;_[tt]=_[tt]*it+.5,_[tt+1]=_[tt+1]*it+.5,_[tt+2]=_[tt+2]*it+.5}}}};_Extract.extension={name:"extract",type:ExtensionType.RendererSystem};let Extract=_Extract;extensions$1.add(Extract);const buildCircle={build(_e){const _=_e.points;let et,tt,rt,it,st,at;if(_e.type===SHAPES.CIRC){const ht=_e.shape;et=ht.x,tt=ht.y,st=at=ht.radius,rt=it=0}else if(_e.type===SHAPES.ELIP){const ht=_e.shape;et=ht.x,tt=ht.y,st=ht.width,at=ht.height,rt=it=0}else{const ht=_e.shape,ft=ht.width/2,gt=ht.height/2;et=ht.x+ft,tt=ht.y+gt,st=at=Math.max(0,Math.min(ht.radius,Math.min(ft,gt))),rt=ft-st,it=gt-at}if(!(st>=0&&at>=0&&rt>=0&&it>=0)){_.length=0;return}const ct=Math.ceil(2.3*Math.sqrt(st+at)),ut=ct*8+(rt?4:0)+(it?4:0);if(_.length=ut,ut===0)return;if(ct===0){_.length=8,_[0]=_[6]=et+rt,_[1]=_[3]=tt+it,_[2]=_[4]=et-rt,_[5]=_[7]=tt-it;return}let dt=0,ot=ct*4+(rt?2:0)+2,nt=ot,lt=ut;{const ht=rt+st,ft=it,gt=et+ht,mt=et-ht,yt=tt+ft;if(_[dt++]=gt,_[dt++]=yt,_[--ot]=yt,_[--ot]=mt,it){const bt=tt-ft;_[nt++]=mt,_[nt++]=bt,_[--lt]=bt,_[--lt]=gt}}for(let ht=1;ht<ct;ht++){const ft=Math.PI/2*(ht/ct),gt=rt+Math.cos(ft)*st,mt=it+Math.sin(ft)*at,yt=et+gt,bt=et-gt,_t=tt+mt,vt=tt-mt;_[dt++]=yt,_[dt++]=_t,_[--ot]=_t,_[--ot]=bt,_[nt++]=bt,_[nt++]=vt,_[--lt]=vt,_[--lt]=yt}{const ht=rt,ft=it+at,gt=et+ht,mt=et-ht,yt=tt+ft,bt=tt-ft;_[dt++]=gt,_[dt++]=yt,_[--lt]=bt,_[--lt]=gt,rt&&(_[dt++]=mt,_[dt++]=yt,_[--lt]=bt,_[--lt]=mt)}},triangulate(_e,_){const et=_e.points,tt=_.points,rt=_.indices;if(et.length===0)return;let it=tt.length/2;const st=it;let at,ct;if(_e.type!==SHAPES.RREC){const dt=_e.shape;at=dt.x,ct=dt.y}else{const dt=_e.shape;at=dt.x+dt.width/2,ct=dt.y+dt.height/2}const ut=_e.matrix;tt.push(_e.matrix?ut.a*at+ut.c*ct+ut.tx:at,_e.matrix?ut.b*at+ut.d*ct+ut.ty:ct),it++,tt.push(et[0],et[1]);for(let dt=2;dt<et.length;dt+=2)tt.push(et[dt],et[dt+1]),rt.push(it++,st,it);rt.push(st+1,st,it)}};function fixOrientation(_e,_=!1){const et=_e.length;if(et<6)return;let tt=0;for(let rt=0,it=_e[et-2],st=_e[et-1];rt<et;rt+=2){const at=_e[rt],ct=_e[rt+1];tt+=(at-it)*(ct+st),it=at,st=ct}if(!_&&tt>0||_&&tt<=0){const rt=et/2;for(let it=rt+rt%2;it<et;it+=2){const st=et-it-2,at=et-it-1,ct=it,ut=it+1;[_e[st],_e[ct]]=[_e[ct],_e[st]],[_e[at],_e[ut]]=[_e[ut],_e[at]]}}}const buildPoly={build(_e){_e.points=_e.shape.points.slice()},triangulate(_e,_){let et=_e.points;const tt=_e.holes,rt=_.points,it=_.indices;if(et.length>=6){fixOrientation(et,!1);const st=[];for(let ut=0;ut<tt.length;ut++){const dt=tt[ut];fixOrientation(dt.points,!0),st.push(et.length/2),et=et.concat(dt.points)}const at=earcut$1(et,st,2);if(!at)return;const ct=rt.length/2;for(let ut=0;ut<at.length;ut+=3)it.push(at[ut]+ct),it.push(at[ut+1]+ct),it.push(at[ut+2]+ct);for(let ut=0;ut<et.length;ut++)rt.push(et[ut])}}},buildRectangle={build(_e){const _=_e.shape,et=_.x,tt=_.y,rt=_.width,it=_.height,st=_e.points;st.length=0,rt>=0&&it>=0&&st.push(et,tt,et+rt,tt,et+rt,tt+it,et,tt+it)},triangulate(_e,_){const et=_e.points,tt=_.points;if(et.length===0)return;const rt=tt.length/2;tt.push(et[0],et[1],et[2],et[3],et[6],et[7],et[4],et[5]),_.indices.push(rt,rt+1,rt+2,rt+1,rt+2,rt+3)}},buildRoundedRectangle={build(_e){buildCircle.build(_e)},triangulate(_e,_){buildCircle.triangulate(_e,_)}};var LINE_JOIN=(_e=>(_e.MITER="miter",_e.BEVEL="bevel",_e.ROUND="round",_e))(LINE_JOIN||{}),LINE_CAP=(_e=>(_e.BUTT="butt",_e.ROUND="round",_e.SQUARE="square",_e))(LINE_CAP||{});const curves={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(_e,_=20){if(!this.adaptive||!_e||isNaN(_e))return _;let et=Math.ceil(_e/this.maxLength);return et<this.minSegments?et=this.minSegments:et>this.maxSegments&&(et=this.maxSegments),et}};class ArcUtils{static curveTo(_,et,tt,rt,it,st){const at=st[st.length-2],ct=st[st.length-1]-et,ut=at-_,dt=rt-et,ot=tt-_,nt=Math.abs(ct*ot-ut*dt);if(nt<1e-8||it===0)return(st[st.length-2]!==_||st[st.length-1]!==et)&&st.push(_,et),null;const lt=ct*ct+ut*ut,ht=dt*dt+ot*ot,ft=ct*dt+ut*ot,gt=it*Math.sqrt(lt)/nt,mt=it*Math.sqrt(ht)/nt,yt=gt*ft/lt,bt=mt*ft/ht,_t=gt*ot+mt*ut,vt=gt*dt+mt*ct,xt=ut*(mt+yt),wt=ct*(mt+yt),Tt=ot*(gt+bt),St=dt*(gt+bt),Et=Math.atan2(wt-vt,xt-_t),Ot=Math.atan2(St-vt,Tt-_t);return{cx:_t+_,cy:vt+et,radius:it,startAngle:Et,endAngle:Ot,anticlockwise:ut*dt>ot*ct}}static arc(_,et,tt,rt,it,st,at,ct,ut){const dt=at-st,ot=curves._segmentsCount(Math.abs(dt)*it,Math.ceil(Math.abs(dt)/PI_2)*40),nt=dt/(ot*2),lt=nt*2,ht=Math.cos(nt),ft=Math.sin(nt),gt=ot-1,mt=gt%1/gt;for(let yt=0;yt<=gt;++yt){const bt=yt+mt*yt,_t=nt+st+lt*bt,vt=Math.cos(_t),xt=-Math.sin(_t);ut.push((ht*vt+ft*xt)*it+tt,(ht*-xt+ft*vt)*it+rt)}}}class BatchPart{constructor(){this.reset()}begin(_,et,tt){this.reset(),this.style=_,this.start=et,this.attribStart=tt}end(_,et){this.attribSize=et-this.attribStart,this.size=_-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}class BezierUtils{static curveLength(_,et,tt,rt,it,st,at,ct){let ut=0,dt=0,ot=0,nt=0,lt=0,ht=0,ft=0,gt=0,mt=0,yt=0,bt=0,_t=_,vt=et;for(let xt=1;xt<=10;++xt)dt=xt/10,ot=dt*dt,nt=ot*dt,lt=1-dt,ht=lt*lt,ft=ht*lt,gt=ft*_+3*ht*dt*tt+3*lt*ot*it+nt*at,mt=ft*et+3*ht*dt*rt+3*lt*ot*st+nt*ct,yt=_t-gt,bt=vt-mt,_t=gt,vt=mt,ut+=Math.sqrt(yt*yt+bt*bt);return ut}static curveTo(_,et,tt,rt,it,st,at){const ct=at[at.length-2],ut=at[at.length-1];at.length-=2;const dt=curves._segmentsCount(BezierUtils.curveLength(ct,ut,_,et,tt,rt,it,st));let ot=0,nt=0,lt=0,ht=0,ft=0;at.push(ct,ut);for(let gt=1,mt=0;gt<=dt;++gt)mt=gt/dt,ot=1-mt,nt=ot*ot,lt=nt*ot,ht=mt*mt,ft=ht*mt,at.push(lt*ct+3*nt*mt*_+3*ot*ht*tt+ft*it,lt*ut+3*nt*mt*et+3*ot*ht*rt+ft*st)}}function square(_e,_,et,tt,rt,it,st,at){const ct=_e-et*rt,ut=_-tt*rt,dt=_e+et*it,ot=_+tt*it;let nt,lt;st?(nt=tt,lt=-et):(nt=-tt,lt=et);const ht=ct+nt,ft=ut+lt,gt=dt+nt,mt=ot+lt;return at.push(ht,ft,gt,mt),2}function round(_e,_,et,tt,rt,it,st,at){const ct=et-_e,ut=tt-_;let dt=Math.atan2(ct,ut),ot=Math.atan2(rt-_e,it-_);at&&dt<ot?dt+=Math.PI*2:!at&&dt>ot&&(ot+=Math.PI*2);let nt=dt;const lt=ot-dt,ht=Math.abs(lt),ft=Math.sqrt(ct*ct+ut*ut),gt=(15*ht*Math.sqrt(ft)/Math.PI>>0)+1,mt=lt/gt;if(nt+=mt,at){st.push(_e,_,et,tt);for(let yt=1,bt=nt;yt<gt;yt++,bt+=mt)st.push(_e,_,_e+Math.sin(bt)*ft,_+Math.cos(bt)*ft);st.push(_e,_,rt,it)}else{st.push(et,tt,_e,_);for(let yt=1,bt=nt;yt<gt;yt++,bt+=mt)st.push(_e+Math.sin(bt)*ft,_+Math.cos(bt)*ft,_e,_);st.push(rt,it,_e,_)}return gt*2}function buildNonNativeLine(_e,_){const et=_e.shape;let tt=_e.points||et.points.slice();const rt=_.closePointEps;if(tt.length===0)return;const it=_e.lineStyle,st=new Point(tt[0],tt[1]),at=new Point(tt[tt.length-2],tt[tt.length-1]),ct=et.type!==SHAPES.POLY||et.closeStroke,ut=Math.abs(st.x-at.x)<rt&&Math.abs(st.y-at.y)<rt;if(ct){tt=tt.slice(),ut&&(tt.pop(),tt.pop(),at.set(tt[tt.length-2],tt[tt.length-1]));const Lt=(st.x+at.x)*.5,Nt=(at.y+st.y)*.5;tt.unshift(Lt,Nt),tt.push(Lt,Nt)}const dt=_.points,ot=tt.length/2;let nt=tt.length;const lt=dt.length/2,ht=it.width/2,ft=ht*ht,gt=it.miterLimit*it.miterLimit;let mt=tt[0],yt=tt[1],bt=tt[2],_t=tt[3],vt=0,xt=0,wt=-(yt-_t),Tt=mt-bt,St=0,Et=0,Ot=Math.sqrt(wt*wt+Tt*Tt);wt/=Ot,Tt/=Ot,wt*=ht,Tt*=ht;const Rt=it.alignment,Pt=(1-Rt)*2,Mt=Rt*2;ct||(it.cap===LINE_CAP.ROUND?nt+=round(mt-wt*(Pt-Mt)*.5,yt-Tt*(Pt-Mt)*.5,mt-wt*Pt,yt-Tt*Pt,mt+wt*Mt,yt+Tt*Mt,dt,!0)+2:it.cap===LINE_CAP.SQUARE&&(nt+=square(mt,yt,wt,Tt,Pt,Mt,!0,dt))),dt.push(mt-wt*Pt,yt-Tt*Pt,mt+wt*Mt,yt+Tt*Mt);for(let Lt=1;Lt<ot-1;++Lt){mt=tt[(Lt-1)*2],yt=tt[(Lt-1)*2+1],bt=tt[Lt*2],_t=tt[Lt*2+1],vt=tt[(Lt+1)*2],xt=tt[(Lt+1)*2+1],wt=-(yt-_t),Tt=mt-bt,Ot=Math.sqrt(wt*wt+Tt*Tt),wt/=Ot,Tt/=Ot,wt*=ht,Tt*=ht,St=-(_t-xt),Et=bt-vt,Ot=Math.sqrt(St*St+Et*Et),St/=Ot,Et/=Ot,St*=ht,Et*=ht;const Nt=bt-mt,zt=yt-_t,Ut=bt-vt,Vt=xt-_t,Ht=Nt*Ut+zt*Vt,sr=zt*Ut-Vt*Nt,ir=sr<0;if(Math.abs(sr)<.001*Math.abs(Ht)){dt.push(bt-wt*Pt,_t-Tt*Pt,bt+wt*Mt,_t+Tt*Mt),Ht>=0&&(it.join===LINE_JOIN.ROUND?nt+=round(bt,_t,bt-wt*Pt,_t-Tt*Pt,bt-St*Pt,_t-Et*Pt,dt,!1)+4:nt+=2,dt.push(bt-St*Mt,_t-Et*Mt,bt+St*Pt,_t+Et*Pt));continue}const er=(-wt+mt)*(-Tt+_t)-(-wt+bt)*(-Tt+yt),dr=(-St+vt)*(-Et+_t)-(-St+bt)*(-Et+xt),gr=(Nt*dr-Ut*er)/sr,Qt=(Vt*er-zt*dr)/sr,Jt=(gr-bt)*(gr-bt)+(Qt-_t)*(Qt-_t),nr=bt+(gr-bt)*Pt,lr=_t+(Qt-_t)*Pt,hr=bt-(gr-bt)*Mt,ur=_t-(Qt-_t)*Mt,mr=Math.min(Nt*Nt+zt*zt,Ut*Ut+Vt*Vt),Mr=ir?Pt:Mt,Fr=mr+Mr*Mr*ft,Gr=Jt<=Fr;let Nr=it.join;if(Nr===LINE_JOIN.MITER&&Jt/ft>gt&&(Nr=LINE_JOIN.BEVEL),Gr)switch(Nr){case LINE_JOIN.MITER:{dt.push(nr,lr,hr,ur);break}case LINE_JOIN.BEVEL:{ir?dt.push(nr,lr,bt+wt*Mt,_t+Tt*Mt,nr,lr,bt+St*Mt,_t+Et*Mt):dt.push(bt-wt*Pt,_t-Tt*Pt,hr,ur,bt-St*Pt,_t-Et*Pt,hr,ur),nt+=2;break}case LINE_JOIN.ROUND:{ir?(dt.push(nr,lr,bt+wt*Mt,_t+Tt*Mt),nt+=round(bt,_t,bt+wt*Mt,_t+Tt*Mt,bt+St*Mt,_t+Et*Mt,dt,!0)+4,dt.push(nr,lr,bt+St*Mt,_t+Et*Mt)):(dt.push(bt-wt*Pt,_t-Tt*Pt,hr,ur),nt+=round(bt,_t,bt-wt*Pt,_t-Tt*Pt,bt-St*Pt,_t-Et*Pt,dt,!1)+4,dt.push(bt-St*Pt,_t-Et*Pt,hr,ur));break}}else{switch(dt.push(bt-wt*Pt,_t-Tt*Pt,bt+wt*Mt,_t+Tt*Mt),Nr){case LINE_JOIN.MITER:{ir?dt.push(hr,ur,hr,ur):dt.push(nr,lr,nr,lr),nt+=2;break}case LINE_JOIN.ROUND:{ir?nt+=round(bt,_t,bt+wt*Mt,_t+Tt*Mt,bt+St*Mt,_t+Et*Mt,dt,!0)+2:nt+=round(bt,_t,bt-wt*Pt,_t-Tt*Pt,bt-St*Pt,_t-Et*Pt,dt,!1)+2;break}}dt.push(bt-St*Pt,_t-Et*Pt,bt+St*Mt,_t+Et*Mt),nt+=2}}mt=tt[(ot-2)*2],yt=tt[(ot-2)*2+1],bt=tt[(ot-1)*2],_t=tt[(ot-1)*2+1],wt=-(yt-_t),Tt=mt-bt,Ot=Math.sqrt(wt*wt+Tt*Tt),wt/=Ot,Tt/=Ot,wt*=ht,Tt*=ht,dt.push(bt-wt*Pt,_t-Tt*Pt,bt+wt*Mt,_t+Tt*Mt),ct||(it.cap===LINE_CAP.ROUND?nt+=round(bt-wt*(Pt-Mt)*.5,_t-Tt*(Pt-Mt)*.5,bt-wt*Pt,_t-Tt*Pt,bt+wt*Mt,_t+Tt*Mt,dt,!1)+2:it.cap===LINE_CAP.SQUARE&&(nt+=square(bt,_t,wt,Tt,Pt,Mt,!1,dt)));const $t=_.indices,kt=curves.epsilon*curves.epsilon;for(let Lt=lt;Lt<nt+lt-2;++Lt)mt=dt[Lt*2],yt=dt[Lt*2+1],bt=dt[(Lt+1)*2],_t=dt[(Lt+1)*2+1],vt=dt[(Lt+2)*2],xt=dt[(Lt+2)*2+1],!(Math.abs(mt*(_t-xt)+bt*(xt-yt)+vt*(yt-_t))<kt)&&$t.push(Lt,Lt+1,Lt+2)}function buildNativeLine(_e,_){let et=0;const tt=_e.shape,rt=_e.points||tt.points,it=tt.type!==SHAPES.POLY||tt.closeStroke;if(rt.length===0)return;const st=_.points,at=_.indices,ct=rt.length/2,ut=st.length/2;let dt=ut;for(st.push(rt[0],rt[1]),et=1;et<ct;et++)st.push(rt[et*2],rt[et*2+1]),at.push(dt,dt+1),dt++;it&&at.push(dt,ut)}function buildLine(_e,_){_e.lineStyle.native?buildNativeLine(_e,_):buildNonNativeLine(_e,_)}class QuadraticUtils{static curveLength(_,et,tt,rt,it,st){const at=_-2*tt+it,ct=et-2*rt+st,ut=2*tt-2*_,dt=2*rt-2*et,ot=4*(at*at+ct*ct),nt=4*(at*ut+ct*dt),lt=ut*ut+dt*dt,ht=2*Math.sqrt(ot+nt+lt),ft=Math.sqrt(ot),gt=2*ot*ft,mt=2*Math.sqrt(lt),yt=nt/ft;return(gt*ht+ft*nt*(ht-mt)+(4*lt*ot-nt*nt)*Math.log((2*ft+yt+ht)/(yt+mt)))/(4*gt)}static curveTo(_,et,tt,rt,it){const st=it[it.length-2],at=it[it.length-1],ct=curves._segmentsCount(QuadraticUtils.curveLength(st,at,_,et,tt,rt));let ut=0,dt=0;for(let ot=1;ot<=ct;++ot){const nt=ot/ct;ut=st+(_-st)*nt,dt=at+(et-at)*nt,it.push(ut+(_+(tt-_)*nt-ut)*nt,dt+(et+(rt-et)*nt-dt)*nt)}}}const FILL_COMMANDS={[SHAPES.POLY]:buildPoly,[SHAPES.CIRC]:buildCircle,[SHAPES.ELIP]:buildCircle,[SHAPES.RECT]:buildRectangle,[SHAPES.RREC]:buildRoundedRectangle},BATCH_POOL=[],DRAW_CALL_POOL=[];class GraphicsData{constructor(_,et=null,tt=null,rt=null){this.points=[],this.holes=[],this.shape=_,this.lineStyle=tt,this.fillStyle=et,this.matrix=rt,this.type=_.type}clone(){return new GraphicsData(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}const tmpPoint=new Point,_GraphicsGeometry=class na extends BatchGeometry{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new Bounds,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let _=0;_<this.drawCalls.length;_++)this.drawCalls[_].texArray.clear(),DRAW_CALL_POOL.push(this.drawCalls[_]);this.drawCalls.length=0;for(let _=0;_<this.batches.length;_++){const et=this.batches[_];et.reset(),BATCH_POOL.push(et)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(_,et=null,tt=null,rt=null){const it=new GraphicsData(_,et,tt,rt);return this.graphicsData.push(it),this.dirty++,this}drawHole(_,et=null){if(!this.graphicsData.length)return null;const tt=new GraphicsData(_,null,null,et),rt=this.graphicsData[this.graphicsData.length-1];return tt.lineStyle=rt.lineStyle,rt.holes.push(tt),this.dirty++,this}destroy(){super.destroy();for(let _=0;_<this.graphicsData.length;++_)this.graphicsData[_].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(_){const et=this.graphicsData;for(let tt=0;tt<et.length;++tt){const rt=et[tt];if(rt.fillStyle.visible&&rt.shape&&(rt.matrix?rt.matrix.applyInverse(_,tmpPoint):tmpPoint.copyFrom(_),rt.shape.contains(tmpPoint.x,tmpPoint.y))){let it=!1;if(rt.holes){for(let st=0;st<rt.holes.length;st++)if(rt.holes[st].shape.contains(tmpPoint.x,tmpPoint.y)){it=!0;break}}if(!it)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const _=this.uvs,et=this.graphicsData;let tt=null,rt=null;this.batches.length>0&&(tt=this.batches[this.batches.length-1],rt=tt.style);for(let ct=this.shapeIndex;ct<et.length;ct++){this.shapeIndex++;const ut=et[ct],dt=ut.fillStyle,ot=ut.lineStyle;FILL_COMMANDS[ut.type].build(ut),ut.matrix&&this.transformPoints(ut.points,ut.matrix),(dt.visible||ot.visible)&&this.processHoles(ut.holes);for(let nt=0;nt<2;nt++){const lt=nt===0?dt:ot;if(!lt.visible)continue;const ht=lt.texture.baseTexture,ft=this.indices.length,gt=this.points.length/2;ht.wrapMode=WRAP_MODES.REPEAT,nt===0?this.processFill(ut):this.processLine(ut);const mt=this.points.length/2-gt;mt!==0&&(tt&&!this._compareStyles(rt,lt)&&(tt.end(ft,gt),tt=null),tt||(tt=BATCH_POOL.pop()||new BatchPart,tt.begin(lt,ft,gt),this.batches.push(tt),rt=lt),this.addUvs(this.points,_,lt.texture,gt,mt,lt.matrix))}}const it=this.indices.length,st=this.points.length/2;if(tt&&tt.end(it,st),this.batches.length===0){this.batchable=!0;return}const at=st>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&at===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=at?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(_,et){return!(!_||!et||_.texture.baseTexture!==et.texture.baseTexture||_.color+_.alpha!==et.color+et.alpha||!!_.native!=!!et.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let _=0,et=this.graphicsData.length;_<et;_++){const tt=this.graphicsData[_],rt=tt.fillStyle,it=tt.lineStyle;if(rt&&!rt.texture.baseTexture.valid||it&&!it.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const _=this.batches;for(let et=0,tt=_.length;et<tt;et++){const rt=_[et];for(let it=0;it<rt.size;it++){const st=rt.start+it;this.indicesUint16[st]=this.indicesUint16[st]-rt.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const _=this.batches;for(let et=0;et<_.length;et++)if(_[et].style.native)return!1;return this.points.length<na.BATCHABLE_SIZE*2}buildDrawCalls(){let _=++BaseTexture._globalBatch;for(let ot=0;ot<this.drawCalls.length;ot++)this.drawCalls[ot].texArray.clear(),DRAW_CALL_POOL.push(this.drawCalls[ot]);this.drawCalls.length=0;const et=this.colors,tt=this.textureIds;let rt=DRAW_CALL_POOL.pop();rt||(rt=new BatchDrawCall,rt.texArray=new BatchTextureArray),rt.texArray.count=0,rt.start=0,rt.size=0,rt.type=DRAW_MODES.TRIANGLES;let it=0,st=null,at=0,ct=!1,ut=DRAW_MODES.TRIANGLES,dt=0;this.drawCalls.push(rt);for(let ot=0;ot<this.batches.length;ot++){const nt=this.batches[ot],lt=8,ht=nt.style,ft=ht.texture.baseTexture;ct!==!!ht.native&&(ct=!!ht.native,ut=ct?DRAW_MODES.LINES:DRAW_MODES.TRIANGLES,st=null,it=lt,_++),st!==ft&&(st=ft,ft._batchEnabled!==_&&(it===lt&&(_++,it=0,rt.size>0&&(rt=DRAW_CALL_POOL.pop(),rt||(rt=new BatchDrawCall,rt.texArray=new BatchTextureArray),this.drawCalls.push(rt)),rt.start=dt,rt.size=0,rt.texArray.count=0,rt.type=ut),ft.touched=1,ft._batchEnabled=_,ft._batchLocation=it,ft.wrapMode=WRAP_MODES.REPEAT,rt.texArray.elements[rt.texArray.count++]=ft,it++)),rt.size+=nt.size,dt+=nt.size,at=ft._batchLocation,this.addColors(et,ht.color,ht.alpha,nt.attribSize,nt.attribStart),this.addTextureIds(tt,at,nt.attribSize,nt.attribStart)}BaseTexture._globalBatch=_,this.packAttributes()}packAttributes(){const _=this.points,et=this.uvs,tt=this.colors,rt=this.textureIds,it=new ArrayBuffer(_.length*3*4),st=new Float32Array(it),at=new Uint32Array(it);let ct=0;for(let ut=0;ut<_.length/2;ut++)st[ct++]=_[ut*2],st[ct++]=_[ut*2+1],st[ct++]=et[ut*2],st[ct++]=et[ut*2+1],at[ct++]=tt[ut],st[ct++]=rt[ut];this._buffer.update(it),this._indexBuffer.update(this.indicesUint16)}processFill(_){_.holes.length?buildPoly.triangulate(_,this):FILL_COMMANDS[_.type].triangulate(_,this)}processLine(_){buildLine(_,this);for(let et=0;et<_.holes.length;et++)buildLine(_.holes[et],this)}processHoles(_){for(let et=0;et<_.length;et++){const tt=_[et];FILL_COMMANDS[tt.type].build(tt),tt.matrix&&this.transformPoints(tt.points,tt.matrix)}}calculateBounds(){const _=this._bounds;_.clear(),_.addVertexData(this.points,0,this.points.length),_.pad(this.boundsPadding,this.boundsPadding)}transformPoints(_,et){for(let tt=0;tt<_.length/2;tt++){const rt=_[tt*2],it=_[tt*2+1];_[tt*2]=et.a*rt+et.c*it+et.tx,_[tt*2+1]=et.b*rt+et.d*it+et.ty}}addColors(_,et,tt,rt,it=0){const st=Color.shared.setValue(et).toLittleEndianNumber(),at=Color.shared.setValue(st).toPremultiplied(tt);_.length=Math.max(_.length,it+rt);for(let ct=0;ct<rt;ct++)_[it+ct]=at}addTextureIds(_,et,tt,rt=0){_.length=Math.max(_.length,rt+tt);for(let it=0;it<tt;it++)_[rt+it]=et}addUvs(_,et,tt,rt,it,st=null){let at=0;const ct=et.length,ut=tt.frame;for(;at<it;){let ot=_[(rt+at)*2],nt=_[(rt+at)*2+1];if(st){const lt=st.a*ot+st.c*nt+st.tx;nt=st.b*ot+st.d*nt+st.ty,ot=lt}at++,et.push(ot/ut.width,nt/ut.height)}const dt=tt.baseTexture;(ut.width<dt.width||ut.height<dt.height)&&this.adjustUvs(et,tt,ct,it)}adjustUvs(_,et,tt,rt){const it=et.baseTexture,st=1e-6,at=tt+rt*2,ct=et.frame,ut=ct.width/it.width,dt=ct.height/it.height;let ot=ct.x/ct.width,nt=ct.y/ct.height,lt=Math.floor(_[tt]+st),ht=Math.floor(_[tt+1]+st);for(let ft=tt+2;ft<at;ft+=2)lt=Math.min(lt,Math.floor(_[ft]+st)),ht=Math.min(ht,Math.floor(_[ft+1]+st));ot-=lt,nt-=ht;for(let ft=tt;ft<at;ft+=2)_[ft]=(_[ft]+ot)*ut,_[ft+1]=(_[ft+1]+nt)*dt}};_GraphicsGeometry.BATCHABLE_SIZE=100;let GraphicsGeometry=_GraphicsGeometry;class FillStyle{constructor(){this.color=16777215,this.alpha=1,this.texture=Texture.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const _=new FillStyle;return _.color=this.color,_.alpha=this.alpha,_.texture=this.texture,_.matrix=this.matrix,_.visible=this.visible,_}reset(){this.color=16777215,this.alpha=1,this.texture=Texture.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class LineStyle extends FillStyle{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=LINE_CAP.BUTT,this.join=LINE_JOIN.MITER,this.miterLimit=10}clone(){const _=new LineStyle;return _.color=this.color,_.alpha=this.alpha,_.texture=this.texture,_.matrix=this.matrix,_.visible=this.visible,_.width=this.width,_.alignment=this.alignment,_.native=this.native,_.cap=this.cap,_.join=this.join,_.miterLimit=this.miterLimit,_}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1,this.cap=LINE_CAP.BUTT,this.join=LINE_JOIN.MITER,this.miterLimit=10}}const DEFAULT_SHADERS={},_Graphics=class rs extends Container{constructor(_=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new FillStyle,this._lineStyle=new LineStyle,this._matrix=null,this._holeMode=!1,this.state=State.for2d(),this._geometry=_||new GraphicsGeometry,this._geometry.refCount++,this._transformID=-1,this._tintColor=new Color(16777215),this.blendMode=BLEND_MODES.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new rs(this._geometry)}set blendMode(_){this.state.blendMode=_}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(_){this._tintColor.setValue(_)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(_=null,et=0,tt,rt=.5,it=!1){return typeof _=="number"&&(_={width:_,color:et,alpha:tt,alignment:rt,native:it}),this.lineTextureStyle(_)}lineTextureStyle(_){const et={width:0,texture:Texture.WHITE,color:_!=null&&_.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:LINE_CAP.BUTT,join:LINE_JOIN.MITER,miterLimit:10};_=Object.assign(et,_),this.normalizeColor(_),this.currentPath&&this.startPoly();const tt=_.width>0&&_.alpha>0;return tt?(_.matrix&&(_.matrix=_.matrix.clone(),_.matrix.invert()),Object.assign(this._lineStyle,{visible:tt},_)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const _=this.currentPath.points,et=this.currentPath.points.length;et>2&&(this.drawShape(this.currentPath),this.currentPath=new Polygon,this.currentPath.closeStroke=!1,this.currentPath.points.push(_[et-2],_[et-1]))}else this.currentPath=new Polygon,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(_,et){return this.startPoly(),this.currentPath.points[0]=_,this.currentPath.points[1]=et,this}lineTo(_,et){this.currentPath||this.moveTo(0,0);const tt=this.currentPath.points,rt=tt[tt.length-2],it=tt[tt.length-1];return(rt!==_||it!==et)&&tt.push(_,et),this}_initCurve(_=0,et=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[_,et]):this.moveTo(_,et)}quadraticCurveTo(_,et,tt,rt){this._initCurve();const it=this.currentPath.points;return it.length===0&&this.moveTo(0,0),QuadraticUtils.curveTo(_,et,tt,rt,it),this}bezierCurveTo(_,et,tt,rt,it,st){return this._initCurve(),BezierUtils.curveTo(_,et,tt,rt,it,st,this.currentPath.points),this}arcTo(_,et,tt,rt,it){this._initCurve(_,et);const st=this.currentPath.points,at=ArcUtils.curveTo(_,et,tt,rt,it,st);if(at){const{cx:ct,cy:ut,radius:dt,startAngle:ot,endAngle:nt,anticlockwise:lt}=at;this.arc(ct,ut,dt,ot,nt,lt)}return this}arc(_,et,tt,rt,it,st=!1){if(rt===it)return this;if(!st&&it<=rt?it+=PI_2:st&&rt<=it&&(rt+=PI_2),it-rt===0)return this;const at=_+Math.cos(rt)*tt,ct=et+Math.sin(rt)*tt,ut=this._geometry.closePointEps;let dt=this.currentPath?this.currentPath.points:null;if(dt){const ot=Math.abs(dt[dt.length-2]-at),nt=Math.abs(dt[dt.length-1]-ct);ot<ut&&nt<ut||dt.push(at,ct)}else this.moveTo(at,ct),dt=this.currentPath.points;return ArcUtils.arc(at,ct,_,et,tt,rt,it,st,dt),this}beginFill(_=0,et){return this.beginTextureFill({texture:Texture.WHITE,color:_,alpha:et})}normalizeColor(_){const et=Color.shared.setValue(_.color??0);_.color=et.toNumber(),_.alpha??(_.alpha=et.alpha)}beginTextureFill(_){const et={texture:Texture.WHITE,color:16777215,matrix:null};_=Object.assign(et,_),this.normalizeColor(_),this.currentPath&&this.startPoly();const tt=_.alpha>0;return tt?(_.matrix&&(_.matrix=_.matrix.clone(),_.matrix.invert()),Object.assign(this._fillStyle,{visible:tt},_)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(_,et,tt,rt){return this.drawShape(new Rectangle(_,et,tt,rt))}drawRoundedRect(_,et,tt,rt,it){return this.drawShape(new RoundedRectangle(_,et,tt,rt,it))}drawCircle(_,et,tt){return this.drawShape(new Circle(_,et,tt))}drawEllipse(_,et,tt,rt){return this.drawShape(new Ellipse(_,et,tt,rt))}drawPolygon(..._){let et,tt=!0;const rt=_[0];rt.points?(tt=rt.closeStroke,et=rt.points):Array.isArray(_[0])?et=_[0]:et=_;const it=new Polygon(et);return it.closeStroke=tt,this.drawShape(it),this}drawShape(_){return this._holeMode?this._geometry.drawHole(_,this._matrix):this._geometry.drawShape(_,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const _=this._geometry.graphicsData;return _.length===1&&_[0].shape.type===SHAPES.RECT&&!_[0].matrix&&!_[0].holes.length&&!(_[0].lineStyle.visible&&_[0].lineStyle.width)}_render(_){this.finishPoly();const et=this._geometry;et.updateBatches(),et.batchable?(this.batchDirty!==et.batchDirty&&this._populateBatches(),this._renderBatched(_)):(_.batch.flush(),this._renderDirect(_))}_populateBatches(){const _=this._geometry,et=this.blendMode,tt=_.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=_.batchDirty,this.batches.length=tt,this.vertexData=new Float32Array(_.points);for(let rt=0;rt<tt;rt++){const it=_.batches[rt],st=it.style.color,at=new Float32Array(this.vertexData.buffer,it.attribStart*4*2,it.attribSize*2),ct=new Float32Array(_.uvsFloat32.buffer,it.attribStart*4*2,it.attribSize*2),ut=new Uint16Array(_.indicesUint16.buffer,it.start*2,it.size),dt={vertexData:at,blendMode:et,indices:ut,uvs:ct,_batchRGB:Color.shared.setValue(st).toRgbArray(),_tintRGB:st,_texture:it.style.texture,alpha:it.style.alpha,worldAlpha:1};this.batches[rt]=dt}}_renderBatched(_){if(this.batches.length){_.batch.setObjectRenderer(_.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let et=0,tt=this.batches.length;et<tt;et++){const rt=this.batches[et];rt.worldAlpha=this.worldAlpha*rt.alpha,_.plugins[this.pluginName].render(rt)}}}_renderDirect(_){const et=this._resolveDirectShader(_),tt=this._geometry,rt=this.worldAlpha,it=et.uniforms,st=tt.drawCalls;it.translationMatrix=this.transform.worldTransform,Color.shared.setValue(this._tintColor).premultiply(rt).toArray(it.tint),_.shader.bind(et),_.geometry.bind(tt,et),_.state.set(this.state);for(let at=0,ct=st.length;at<ct;at++)this._renderDrawCallDirect(_,tt.drawCalls[at])}_renderDrawCallDirect(_,et){const{texArray:tt,type:rt,size:it,start:st}=et,at=tt.count;for(let ct=0;ct<at;ct++)_.texture.bind(tt.elements[ct],ct);_.geometry.draw(rt,it,st)}_resolveDirectShader(_){let et=this.shader;const tt=this.pluginName;if(!et){if(!DEFAULT_SHADERS[tt]){const{maxTextures:rt}=_.plugins[tt],it=new Int32Array(rt);for(let ct=0;ct<rt;ct++)it[ct]=ct;const st={tint:new Float32Array([1,1,1,1]),translationMatrix:new Matrix,default:UniformGroup.from({uSamplers:it},!0)},at=_.plugins[tt]._shader.program;DEFAULT_SHADERS[tt]=new Shader(at,st)}et=DEFAULT_SHADERS[tt]}return et}_calculateBounds(){this.finishPoly();const _=this._geometry;if(!_.graphicsData.length)return;const{minX:et,minY:tt,maxX:rt,maxY:it}=_.bounds;this._bounds.addFrame(this.transform,et,tt,rt,it)}containsPoint(_){return this.worldTransform.applyInverse(_,rs._TEMP_POINT),this._geometry.containsPoint(rs._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let _=0;_<this.batches.length;_++){const et=this.batches[_];et._tintRGB=Color.shared.setValue(this._tintColor).multiply(et._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const _=this.transform._worldID;if(this._transformID===_)return;this._transformID=_;const et=this.transform.worldTransform,tt=et.a,rt=et.b,it=et.c,st=et.d,at=et.tx,ct=et.ty,ut=this._geometry.points,dt=this.vertexData;let ot=0;for(let nt=0;nt<ut.length;nt+=2){const lt=ut[nt],ht=ut[nt+1];dt[ot++]=tt*lt+it*ht+at,dt[ot++]=st*ht+rt*lt+ct}}closePath(){const _=this.currentPath;return _&&(_.closeStroke=!0,this.finishPoly()),this}setMatrix(_){return this._matrix=_,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(_){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(_)}};_Graphics.curves=curves,_Graphics._TEMP_POINT=new Point;let Graphics=_Graphics;class MeshBatchUvs{constructor(_,et){this.uvBuffer=_,this.uvMatrix=et,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(_){if(!_&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const et=this.uvBuffer.data;(!this.data||this.data.length!==et.length)&&(this.data=new Float32Array(et.length)),this.uvMatrix.multiplyUvs(et,this.data),this._updateID++}}const tempPoint$1=new Point,tempPolygon=new Polygon,_Mesh=class ga extends Container{constructor(_,et,tt,rt=DRAW_MODES.TRIANGLES){super(),this.geometry=_,this.shader=et,this.state=tt||State.for2d(),this.drawMode=rt,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=settings.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(_){this._geometry!==_&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=_,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(_){this.shader=_}get material(){return this.shader}set blendMode(_){this.state.blendMode=_}get blendMode(){return this.state.blendMode}set roundPixels(_){this._roundPixels!==_&&(this._transformID=-1),this._roundPixels=_}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(_){this.shader.tint=_}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(_){this.shader.texture=_}_render(_){const et=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===DRAW_MODES.TRIANGLES&&et.length<ga.BATCHABLE_SIZE*2?this._renderToBatch(_):this._renderDefault(_)}_renderDefault(_){const et=this.shader;et.alpha=this.worldAlpha,et.update&&et.update(),_.batch.flush(),et.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),_.shader.bind(et),_.state.set(this.state),_.geometry.bind(this.geometry,et),_.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(_){const et=this.geometry,tt=this.shader;tt.uvMatrix&&(tt.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=et.indexBuffer.data,this._tintRGB=tt._tintRGB,this._texture=tt.texture;const rt=this.material.pluginName;_.batch.setObjectRenderer(_.plugins[rt]),_.plugins[rt].render(this)}calculateVertices(){const _=this.geometry.buffers[0],et=_.data,tt=_._updateID;if(tt===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==et.length&&(this.vertexData=new Float32Array(et.length));const rt=this.transform.worldTransform,it=rt.a,st=rt.b,at=rt.c,ct=rt.d,ut=rt.tx,dt=rt.ty,ot=this.vertexData;for(let nt=0;nt<ot.length/2;nt++){const lt=et[nt*2],ht=et[nt*2+1];ot[nt*2]=it*lt+at*ht+ut,ot[nt*2+1]=st*lt+ct*ht+dt}if(this._roundPixels){const nt=settings.RESOLUTION;for(let lt=0;lt<ot.length;++lt)ot[lt]=Math.round(ot[lt]*nt)/nt}this.vertexDirty=tt}calculateUvs(){const _=this.geometry.buffers[1],et=this.shader;et.uvMatrix.isSimple?this.uvs=_.data:(this.batchUvs||(this.batchUvs=new MeshBatchUvs(_,et.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(_){if(!this.getBounds().contains(_.x,_.y))return!1;this.worldTransform.applyInverse(_,tempPoint$1);const et=this.geometry.getBuffer("aVertexPosition").data,tt=tempPolygon.points,rt=this.geometry.getIndex().data,it=rt.length,st=this.drawMode===4?3:1;for(let at=0;at+2<it;at+=st){const ct=rt[at]*2,ut=rt[at+1]*2,dt=rt[at+2]*2;if(tt[0]=et[ct],tt[1]=et[ct+1],tt[2]=et[ut],tt[3]=et[ut+1],tt[4]=et[dt],tt[5]=et[dt+1],tempPolygon.contains(tempPoint$1.x,tempPoint$1.y))return!0}return!1}destroy(_){super.destroy(_),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};_Mesh.BATCHABLE_SIZE=100;let Mesh=_Mesh;class MeshGeometry extends Geometry{constructor(_,et,tt){super();const rt=new Buffer(_),it=new Buffer(et,!0),st=new Buffer(tt,!0,!0);this.addAttribute("aVertexPosition",rt,2,!1,TYPES.FLOAT).addAttribute("aTextureCoord",it,2,!1,TYPES.FLOAT).addIndex(st),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}var fragment$1=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,vertex$1=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;class MeshMaterial extends Shader{constructor(_,et){const tt={uSampler:_,alpha:1,uTextureMatrix:Matrix.IDENTITY,uColor:new Float32Array([1,1,1,1])};et=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},et),et.uniforms&&Object.assign(tt,et.uniforms),super(et.program||Program.from(vertex$1,fragment$1),tt),this._colorDirty=!1,this.uvMatrix=new TextureMatrix(_),this.batchable=et.program===void 0,this.pluginName=et.pluginName,this._tintColor=new Color(et.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=et.alpha}get texture(){return this.uniforms.uSampler}set texture(_){this.uniforms.uSampler!==_&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!_.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=_,this.uvMatrix.texture=_)}set alpha(_){_!==this._alpha&&(this._alpha=_,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(_){_!==this.tint&&(this._tintColor.setValue(_),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const _=this.texture.baseTexture.alphaMode;Color.shared.setValue(this._tintColor).premultiply(this._alpha,_).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class ParticleBuffer{constructor(_,et,tt){this.geometry=new Geometry,this.indexBuffer=null,this.size=tt,this.dynamicProperties=[],this.staticProperties=[];for(let rt=0;rt<_.length;++rt){let it=_[rt];it={attributeName:it.attributeName,size:it.size,uploadFunction:it.uploadFunction,type:it.type||TYPES.FLOAT,offset:it.offset},et[rt]?this.dynamicProperties.push(it):this.staticProperties.push(it)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const _=this.geometry;let et=0;this.indexBuffer=new Buffer(createIndicesForQuads(this.size),!0,!0),_.addIndex(this.indexBuffer),this.dynamicStride=0;for(let st=0;st<this.dynamicProperties.length;++st){const at=this.dynamicProperties[st];at.offset=et,et+=at.size,this.dynamicStride+=at.size}const tt=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(tt),this.dynamicDataUint32=new Uint32Array(tt),this.dynamicBuffer=new Buffer(this.dynamicData,!1,!1);let rt=0;this.staticStride=0;for(let st=0;st<this.staticProperties.length;++st){const at=this.staticProperties[st];at.offset=rt,rt+=at.size,this.staticStride+=at.size}const it=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(it),this.staticDataUint32=new Uint32Array(it),this.staticBuffer=new Buffer(this.staticData,!0,!1);for(let st=0;st<this.dynamicProperties.length;++st){const at=this.dynamicProperties[st];_.addAttribute(at.attributeName,this.dynamicBuffer,0,at.type===TYPES.UNSIGNED_BYTE,at.type,this.dynamicStride*4,at.offset*4)}for(let st=0;st<this.staticProperties.length;++st){const at=this.staticProperties[st];_.addAttribute(at.attributeName,this.staticBuffer,0,at.type===TYPES.UNSIGNED_BYTE,at.type,this.staticStride*4,at.offset*4)}}uploadDynamic(_,et,tt){for(let rt=0;rt<this.dynamicProperties.length;rt++){const it=this.dynamicProperties[rt];it.uploadFunction(_,et,tt,it.type===TYPES.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,it.offset)}this.dynamicBuffer._updateID++}uploadStatic(_,et,tt){for(let rt=0;rt<this.staticProperties.length;rt++){const it=this.staticProperties[rt];it.uploadFunction(_,et,tt,it.type===TYPES.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,it.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}var fragment=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,vertex=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;class ParticleRenderer extends ObjectRenderer{constructor(_){super(_),this.shader=null,this.properties=null,this.tempMatrix=new Matrix,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:TYPES.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=Shader.from(vertex,fragment,{}),this.state=State.for2d()}render(_){const et=_.children,tt=_._maxSize,rt=_._batchSize,it=this.renderer;let st=et.length;if(st===0)return;st>tt&&!_.autoResize&&(st=tt);let at=_._buffers;at||(at=_._buffers=this.generateBuffers(_));const ct=et[0]._texture.baseTexture,ut=ct.alphaMode>0;this.state.blendMode=correctBlendMode(_.blendMode,ut),it.state.set(this.state);const dt=it.gl,ot=_.worldTransform.copyTo(this.tempMatrix);ot.prepend(it.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=ot.toArray(!0),this.shader.uniforms.uColor=Color.shared.setValue(_.tintRgb).premultiply(_.worldAlpha,ut).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=ct,this.renderer.shader.bind(this.shader);let nt=!1;for(let lt=0,ht=0;lt<st;lt+=rt,ht+=1){let ft=st-lt;ft>rt&&(ft=rt),ht>=at.length&&at.push(this._generateOneMoreBuffer(_));const gt=at[ht];gt.uploadDynamic(et,lt,ft);const mt=_._bufferUpdateIDs[ht]||0;nt=nt||gt._updateID<mt,nt&&(gt._updateID=_._updateID,gt.uploadStatic(et,lt,ft)),it.geometry.bind(gt.geometry),dt.drawElements(dt.TRIANGLES,ft*6,dt.UNSIGNED_SHORT,0)}}generateBuffers(_){const et=[],tt=_._maxSize,rt=_._batchSize,it=_._properties;for(let st=0;st<tt;st+=rt)et.push(new ParticleBuffer(this.properties,it,rt));return et}_generateOneMoreBuffer(_){const et=_._batchSize,tt=_._properties;return new ParticleBuffer(this.properties,tt,et)}uploadVertices(_,et,tt,rt,it,st){let at=0,ct=0,ut=0,dt=0;for(let ot=0;ot<tt;++ot){const nt=_[et+ot],lt=nt._texture,ht=nt.scale.x,ft=nt.scale.y,gt=lt.trim,mt=lt.orig;gt?(ct=gt.x-nt.anchor.x*mt.width,at=ct+gt.width,dt=gt.y-nt.anchor.y*mt.height,ut=dt+gt.height):(at=mt.width*(1-nt.anchor.x),ct=mt.width*-nt.anchor.x,ut=mt.height*(1-nt.anchor.y),dt=mt.height*-nt.anchor.y),rt[st]=ct*ht,rt[st+1]=dt*ft,rt[st+it]=at*ht,rt[st+it+1]=dt*ft,rt[st+it*2]=at*ht,rt[st+it*2+1]=ut*ft,rt[st+it*3]=ct*ht,rt[st+it*3+1]=ut*ft,st+=it*4}}uploadPosition(_,et,tt,rt,it,st){for(let at=0;at<tt;at++){const ct=_[et+at].position;rt[st]=ct.x,rt[st+1]=ct.y,rt[st+it]=ct.x,rt[st+it+1]=ct.y,rt[st+it*2]=ct.x,rt[st+it*2+1]=ct.y,rt[st+it*3]=ct.x,rt[st+it*3+1]=ct.y,st+=it*4}}uploadRotation(_,et,tt,rt,it,st){for(let at=0;at<tt;at++){const ct=_[et+at].rotation;rt[st]=ct,rt[st+it]=ct,rt[st+it*2]=ct,rt[st+it*3]=ct,st+=it*4}}uploadUvs(_,et,tt,rt,it,st){for(let at=0;at<tt;++at){const ct=_[et+at]._texture._uvs;ct?(rt[st]=ct.x0,rt[st+1]=ct.y0,rt[st+it]=ct.x1,rt[st+it+1]=ct.y1,rt[st+it*2]=ct.x2,rt[st+it*2+1]=ct.y2,rt[st+it*3]=ct.x3,rt[st+it*3+1]=ct.y3,st+=it*4):(rt[st]=0,rt[st+1]=0,rt[st+it]=0,rt[st+it+1]=0,rt[st+it*2]=0,rt[st+it*2+1]=0,rt[st+it*3]=0,rt[st+it*3+1]=0,st+=it*4)}}uploadTint(_,et,tt,rt,it,st){for(let at=0;at<tt;++at){const ct=_[et+at],ut=Color.shared.setValue(ct._tintRGB).toPremultiplied(ct.alpha,ct.texture.baseTexture.alphaMode>0);rt[st]=ut,rt[st+it]=ut,rt[st+it*2]=ut,rt[st+it*3]=ut,st+=it*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}ParticleRenderer.extension={name:"particle",type:ExtensionType.RendererPlugin};extensions$1.add(ParticleRenderer);var TEXT_GRADIENT=(_e=>(_e[_e.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",_e[_e.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",_e))(TEXT_GRADIENT||{});const contextSettings={willReadFrequently:!0},_TextMetrics=class cr{static get experimentalLetterSpacingSupported(){let _=cr._experimentalLetterSpacingSupported;if(_!==void 0){const et=settings.ADAPTER.getCanvasRenderingContext2D().prototype;_=cr._experimentalLetterSpacingSupported="letterSpacing"in et||"textLetterSpacing"in et}return _}constructor(_,et,tt,rt,it,st,at,ct,ut){this.text=_,this.style=et,this.width=tt,this.height=rt,this.lines=it,this.lineWidths=st,this.lineHeight=at,this.maxLineWidth=ct,this.fontProperties=ut}static measureText(_,et,tt,rt=cr._canvas){tt=tt??et.wordWrap;const it=et.toFontString(),st=cr.measureFont(it);st.fontSize===0&&(st.fontSize=et.fontSize,st.ascent=et.fontSize);const at=rt.getContext("2d",contextSettings);at.font=it;const ct=(tt?cr.wordWrap(_,et,rt):_).split(/(?:\r\n|\r|\n)/),ut=new Array(ct.length);let dt=0;for(let ht=0;ht<ct.length;ht++){const ft=cr._measureText(ct[ht],et.letterSpacing,at);ut[ht]=ft,dt=Math.max(dt,ft)}let ot=dt+et.strokeThickness;et.dropShadow&&(ot+=et.dropShadowDistance);const nt=et.lineHeight||st.fontSize+et.strokeThickness;let lt=Math.max(nt,st.fontSize+et.strokeThickness*2)+et.leading+(ct.length-1)*(nt+et.leading);return et.dropShadow&&(lt+=et.dropShadowDistance),new cr(_,et,ot,lt,ct,ut,nt+et.leading,dt,st)}static _measureText(_,et,tt){let rt=!1;cr.experimentalLetterSpacingSupported&&(cr.experimentalLetterSpacing?(tt.letterSpacing=`${et}px`,tt.textLetterSpacing=`${et}px`,rt=!0):(tt.letterSpacing="0px",tt.textLetterSpacing="0px"));let it=tt.measureText(_).width;return it>0&&(rt?it-=et:it+=(cr.graphemeSegmenter(_).length-1)*et),it}static wordWrap(_,et,tt=cr._canvas){const rt=tt.getContext("2d",contextSettings);let it=0,st="",at="";const ct=Object.create(null),{letterSpacing:ut,whiteSpace:dt}=et,ot=cr.collapseSpaces(dt),nt=cr.collapseNewlines(dt);let lt=!ot;const ht=et.wordWrapWidth+ut,ft=cr.tokenize(_);for(let gt=0;gt<ft.length;gt++){let mt=ft[gt];if(cr.isNewline(mt)){if(!nt){at+=cr.addLine(st),lt=!ot,st="",it=0;continue}mt=" "}if(ot){const bt=cr.isBreakingSpace(mt),_t=cr.isBreakingSpace(st[st.length-1]);if(bt&&_t)continue}const yt=cr.getFromCache(mt,ut,ct,rt);if(yt>ht)if(st!==""&&(at+=cr.addLine(st),st="",it=0),cr.canBreakWords(mt,et.breakWords)){const bt=cr.wordWrapSplit(mt);for(let _t=0;_t<bt.length;_t++){let vt=bt[_t],xt=vt,wt=1;for(;bt[_t+wt];){const St=bt[_t+wt];if(!cr.canBreakChars(xt,St,mt,_t,et.breakWords))vt+=St;else break;xt=St,wt++}_t+=wt-1;const Tt=cr.getFromCache(vt,ut,ct,rt);Tt+it>ht&&(at+=cr.addLine(st),lt=!1,st="",it=0),st+=vt,it+=Tt}}else{st.length>0&&(at+=cr.addLine(st),st="",it=0);const bt=gt===ft.length-1;at+=cr.addLine(mt,!bt),lt=!1,st="",it=0}else yt+it>ht&&(lt=!1,at+=cr.addLine(st),st="",it=0),(st.length>0||!cr.isBreakingSpace(mt)||lt)&&(st+=mt,it+=yt)}return at+=cr.addLine(st,!1),at}static addLine(_,et=!0){return _=cr.trimRight(_),_=et?`${_}
`:_,_}static getFromCache(_,et,tt,rt){let it=tt[_];return typeof it!="number"&&(it=cr._measureText(_,et,rt)+et,tt[_]=it),it}static collapseSpaces(_){return _==="normal"||_==="pre-line"}static collapseNewlines(_){return _==="normal"}static trimRight(_){if(typeof _!="string")return"";for(let et=_.length-1;et>=0;et--){const tt=_[et];if(!cr.isBreakingSpace(tt))break;_=_.slice(0,-1)}return _}static isNewline(_){return typeof _!="string"?!1:cr._newlines.includes(_.charCodeAt(0))}static isBreakingSpace(_,et){return typeof _!="string"?!1:cr._breakingSpaces.includes(_.charCodeAt(0))}static tokenize(_){const et=[];let tt="";if(typeof _!="string")return et;for(let rt=0;rt<_.length;rt++){const it=_[rt],st=_[rt+1];if(cr.isBreakingSpace(it,st)||cr.isNewline(it)){tt!==""&&(et.push(tt),tt=""),et.push(it);continue}tt+=it}return tt!==""&&et.push(tt),et}static canBreakWords(_,et){return et}static canBreakChars(_,et,tt,rt,it){return!0}static wordWrapSplit(_){return cr.graphemeSegmenter(_)}static measureFont(_){if(cr._fonts[_])return cr._fonts[_];const et={ascent:0,descent:0,fontSize:0},tt=cr._canvas,rt=cr._context;rt.font=_;const it=cr.METRICS_STRING+cr.BASELINE_SYMBOL,st=Math.ceil(rt.measureText(it).width);let at=Math.ceil(rt.measureText(cr.BASELINE_SYMBOL).width);const ct=Math.ceil(cr.HEIGHT_MULTIPLIER*at);if(at=at*cr.BASELINE_MULTIPLIER|0,st===0||ct===0)return cr._fonts[_]=et,et;tt.width=st,tt.height=ct,rt.fillStyle="#f00",rt.fillRect(0,0,st,ct),rt.font=_,rt.textBaseline="alphabetic",rt.fillStyle="#000",rt.fillText(it,0,at);const ut=rt.getImageData(0,0,st,ct).data,dt=ut.length,ot=st*4;let nt=0,lt=0,ht=!1;for(nt=0;nt<at;++nt){for(let ft=0;ft<ot;ft+=4)if(ut[lt+ft]!==255){ht=!0;break}if(!ht)lt+=ot;else break}for(et.ascent=at-nt,lt=dt-ot,ht=!1,nt=ct;nt>at;--nt){for(let ft=0;ft<ot;ft+=4)if(ut[lt+ft]!==255){ht=!0;break}if(!ht)lt-=ot;else break}return et.descent=nt-at,et.fontSize=et.ascent+et.descent,cr._fonts[_]=et,et}static clearMetrics(_=""){_?delete cr._fonts[_]:cr._fonts={}}static get _canvas(){var _;if(!cr.__canvas){let et;try{const tt=new OffscreenCanvas(0,0);if((_=tt.getContext("2d",contextSettings))!=null&&_.measureText)return cr.__canvas=tt,tt;et=settings.ADAPTER.createCanvas()}catch{et=settings.ADAPTER.createCanvas()}et.width=et.height=10,cr.__canvas=et}return cr.__canvas}static get _context(){return cr.__context||(cr.__context=cr._canvas.getContext("2d",contextSettings)),cr.__context}};_TextMetrics.METRICS_STRING="|ÉqÅ",_TextMetrics.BASELINE_SYMBOL="M",_TextMetrics.BASELINE_MULTIPLIER=1.4,_TextMetrics.HEIGHT_MULTIPLIER=2,_TextMetrics.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const _e=new Intl.Segmenter;return _=>[..._e.segment(_)].map(et=>et.segment)}return _e=>[..._e]})(),_TextMetrics.experimentalLetterSpacing=!1,_TextMetrics._fonts={},_TextMetrics._newlines=[10,13],_TextMetrics._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];let TextMetrics=_TextMetrics;const genericFontFamilies=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],_TextStyle=class Gn{constructor(_){this.styleID=0,this.reset(),deepCopyProperties(this,_,_)}clone(){const _={};return deepCopyProperties(_,this,Gn.defaultStyle),new Gn(_)}reset(){deepCopyProperties(this,Gn.defaultStyle,Gn.defaultStyle)}get align(){return this._align}set align(_){this._align!==_&&(this._align=_,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(_){this._breakWords!==_&&(this._breakWords=_,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(_){this._dropShadow!==_&&(this._dropShadow=_,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(_){this._dropShadowAlpha!==_&&(this._dropShadowAlpha=_,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(_){this._dropShadowAngle!==_&&(this._dropShadowAngle=_,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(_){this._dropShadowBlur!==_&&(this._dropShadowBlur=_,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(_){const et=getColor(_);this._dropShadowColor!==et&&(this._dropShadowColor=et,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(_){this._dropShadowDistance!==_&&(this._dropShadowDistance=_,this.styleID++)}get fill(){return this._fill}set fill(_){const et=getColor(_);this._fill!==et&&(this._fill=et,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(_){this._fillGradientType!==_&&(this._fillGradientType=_,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(_){areArraysEqual(this._fillGradientStops,_)||(this._fillGradientStops=_,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(_){this.fontFamily!==_&&(this._fontFamily=_,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(_){this._fontSize!==_&&(this._fontSize=_,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(_){this._fontStyle!==_&&(this._fontStyle=_,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(_){this._fontVariant!==_&&(this._fontVariant=_,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(_){this._fontWeight!==_&&(this._fontWeight=_,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(_){this._letterSpacing!==_&&(this._letterSpacing=_,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(_){this._lineHeight!==_&&(this._lineHeight=_,this.styleID++)}get leading(){return this._leading}set leading(_){this._leading!==_&&(this._leading=_,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(_){this._lineJoin!==_&&(this._lineJoin=_,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(_){this._miterLimit!==_&&(this._miterLimit=_,this.styleID++)}get padding(){return this._padding}set padding(_){this._padding!==_&&(this._padding=_,this.styleID++)}get stroke(){return this._stroke}set stroke(_){const et=getColor(_);this._stroke!==et&&(this._stroke=et,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(_){this._strokeThickness!==_&&(this._strokeThickness=_,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(_){this._textBaseline!==_&&(this._textBaseline=_,this.styleID++)}get trim(){return this._trim}set trim(_){this._trim!==_&&(this._trim=_,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(_){this._whiteSpace!==_&&(this._whiteSpace=_,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(_){this._wordWrap!==_&&(this._wordWrap=_,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(_){this._wordWrapWidth!==_&&(this._wordWrapWidth=_,this.styleID++)}toFontString(){const _=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize;let et=this.fontFamily;Array.isArray(this.fontFamily)||(et=this.fontFamily.split(","));for(let tt=et.length-1;tt>=0;tt--){let rt=et[tt].trim();!/([\"\'])[^\'\"]+\1/.test(rt)&&!genericFontFamilies.includes(rt)&&(rt=`"${rt}"`),et[tt]=rt}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${_} ${et.join(",")}`}};_TextStyle.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:TEXT_GRADIENT.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let TextStyle=_TextStyle;function getColor(_e){const _=Color.shared,et=tt=>{const rt=_.setValue(tt);return rt.alpha===1?rt.toHex():rt.toRgbaString()};return Array.isArray(_e)?_e.map(et):et(_e)}function areArraysEqual(_e,_){if(!Array.isArray(_e)||!Array.isArray(_)||_e.length!==_.length)return!1;for(let et=0;et<_e.length;++et)if(_e[et]!==_[et])return!1;return!0}function deepCopyProperties(_e,_,et){for(const tt in et)Array.isArray(_[tt])?_e[tt]=_[tt].slice():_e[tt]=_[tt]}const defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},_Text=class ms extends Sprite{constructor(_,et,tt){let rt=!1;tt||(tt=settings.ADAPTER.createCanvas(),rt=!0),tt.width=3,tt.height=3;const it=Texture.from(tt);it.orig=new Rectangle,it.trim=new Rectangle,super(it),this._ownCanvas=rt,this.canvas=tt,this.context=tt.getContext("2d",{willReadFrequently:!0}),this._resolution=ms.defaultResolution??settings.RESOLUTION,this._autoResolution=ms.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=_,this.style=et,this.localStyleID=-1}static get experimentalLetterSpacing(){return TextMetrics.experimentalLetterSpacing}static set experimentalLetterSpacing(_){deprecation("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),TextMetrics.experimentalLetterSpacing=_}updateText(_){const et=this._style;if(this.localStyleID!==et.styleID&&(this.dirty=!0,this.localStyleID=et.styleID),!this.dirty&&_)return;this._font=this._style.toFontString();const tt=this.context,rt=TextMetrics.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),it=rt.width,st=rt.height,at=rt.lines,ct=rt.lineHeight,ut=rt.lineWidths,dt=rt.maxLineWidth,ot=rt.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,it)+et.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,st)+et.padding*2)*this._resolution),tt.scale(this._resolution,this._resolution),tt.clearRect(0,0,this.canvas.width,this.canvas.height),tt.font=this._font,tt.lineWidth=et.strokeThickness,tt.textBaseline=et.textBaseline,tt.lineJoin=et.lineJoin,tt.miterLimit=et.miterLimit;let nt,lt;const ht=et.dropShadow?2:1;for(let ft=0;ft<ht;++ft){const gt=et.dropShadow&&ft===0,mt=gt?Math.ceil(Math.max(1,st)+et.padding*2):0,yt=mt*this._resolution;if(gt){tt.fillStyle="black",tt.strokeStyle="black";const _t=et.dropShadowColor,vt=et.dropShadowBlur*this._resolution,xt=et.dropShadowDistance*this._resolution;tt.shadowColor=Color.shared.setValue(_t).setAlpha(et.dropShadowAlpha).toRgbaString(),tt.shadowBlur=vt,tt.shadowOffsetX=Math.cos(et.dropShadowAngle)*xt,tt.shadowOffsetY=Math.sin(et.dropShadowAngle)*xt+yt}else tt.fillStyle=this._generateFillStyle(et,at,rt),tt.strokeStyle=et.stroke,tt.shadowColor="black",tt.shadowBlur=0,tt.shadowOffsetX=0,tt.shadowOffsetY=0;let bt=(ct-ot.fontSize)/2;ct-ot.fontSize<0&&(bt=0);for(let _t=0;_t<at.length;_t++)nt=et.strokeThickness/2,lt=et.strokeThickness/2+_t*ct+ot.ascent+bt,et.align==="right"?nt+=dt-ut[_t]:et.align==="center"&&(nt+=(dt-ut[_t])/2),et.stroke&&et.strokeThickness&&this.drawLetterSpacing(at[_t],nt+et.padding,lt+et.padding-mt,!0),et.fill&&this.drawLetterSpacing(at[_t],nt+et.padding,lt+et.padding-mt)}this.updateTexture()}drawLetterSpacing(_,et,tt,rt=!1){const it=this._style.letterSpacing;let st=!1;if(TextMetrics.experimentalLetterSpacingSupported&&(TextMetrics.experimentalLetterSpacing?(this.context.letterSpacing=`${it}px`,this.context.textLetterSpacing=`${it}px`,st=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),it===0||st){rt?this.context.strokeText(_,et,tt):this.context.fillText(_,et,tt);return}let at=et;const ct=TextMetrics.graphemeSegmenter(_);let ut=this.context.measureText(_).width,dt=0;for(let ot=0;ot<ct.length;++ot){const nt=ct[ot];rt?this.context.strokeText(nt,at,tt):this.context.fillText(nt,at,tt);let lt="";for(let ht=ot+1;ht<ct.length;++ht)lt+=ct[ht];dt=this.context.measureText(lt).width,at+=ut-dt+it,ut=dt}}updateTexture(){const _=this.canvas;if(this._style.trim){const st=trimCanvas(_);st.data&&(_.width=st.width,_.height=st.height,this.context.putImageData(st.data,0,0))}const et=this._texture,tt=this._style,rt=tt.trim?0:tt.padding,it=et.baseTexture;et.trim.width=et._frame.width=_.width/this._resolution,et.trim.height=et._frame.height=_.height/this._resolution,et.trim.x=-rt,et.trim.y=-rt,et.orig.width=et._frame.width-rt*2,et.orig.height=et._frame.height-rt*2,this._onTextureUpdate(),it.setRealSize(_.width,_.height,this._resolution),et.updateUvs(),this.dirty=!1}_render(_){this._autoResolution&&this._resolution!==_.resolution&&(this._resolution=_.resolution,this.dirty=!0),this.updateText(!0),super._render(_)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(_,et){return this.updateText(!0),this._textureID===-1&&(_=!1),super.getBounds(_,et)}getLocalBounds(_){return this.updateText(!0),super.getLocalBounds.call(this,_)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(_,et,tt){const rt=_.fill;if(Array.isArray(rt)){if(rt.length===1)return rt[0]}else return rt;let it;const st=_.dropShadow?_.dropShadowDistance:0,at=_.padding||0,ct=this.canvas.width/this._resolution-st-at*2,ut=this.canvas.height/this._resolution-st-at*2,dt=rt.slice(),ot=_.fillGradientStops.slice();if(!ot.length){const nt=dt.length+1;for(let lt=1;lt<nt;++lt)ot.push(lt/nt)}if(dt.unshift(rt[0]),ot.unshift(0),dt.push(rt[rt.length-1]),ot.push(1),_.fillGradientType===TEXT_GRADIENT.LINEAR_VERTICAL){it=this.context.createLinearGradient(ct/2,at,ct/2,ut+at);const nt=tt.fontProperties.fontSize+_.strokeThickness;for(let lt=0;lt<et.length;lt++){const ht=tt.lineHeight*(lt-1)+nt,ft=tt.lineHeight*lt;let gt=ft;lt>0&&ht>ft&&(gt=(ft+ht)/2);const mt=ft+nt,yt=tt.lineHeight*(lt+1);let bt=mt;lt+1<et.length&&yt<mt&&(bt=(mt+yt)/2);const _t=(bt-gt)/ut;for(let vt=0;vt<dt.length;vt++){let xt=0;typeof ot[vt]=="number"?xt=ot[vt]:xt=vt/dt.length;let wt=Math.min(1,Math.max(0,gt/ut+xt*_t));wt=Number(wt.toFixed(5)),it.addColorStop(wt,dt[vt])}}}else{it=this.context.createLinearGradient(at,ut/2,ct+at,ut/2);const nt=dt.length+1;let lt=1;for(let ht=0;ht<dt.length;ht++){let ft;typeof ot[ht]=="number"?ft=ot[ht]:ft=lt/nt,it.addColorStop(ft,dt[ht]),lt++}}return it}destroy(_){typeof _=="boolean"&&(_={children:_}),_=Object.assign({},defaultDestroyOptions,_),super.destroy(_),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(_){this.updateText(!0);const et=sign(this.scale.x)||1;this.scale.x=et*_/this._texture.orig.width,this._width=_}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(_){this.updateText(!0);const et=sign(this.scale.y)||1;this.scale.y=et*_/this._texture.orig.height,this._height=_}get style(){return this._style}set style(_){_=_||{},_ instanceof TextStyle?this._style=_:this._style=new TextStyle(_),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(_){_=String(_??""),this._text!==_&&(this._text=_,this.dirty=!0)}get resolution(){return this._resolution}set resolution(_){this._autoResolution=!1,this._resolution!==_&&(this._resolution=_,this.dirty=!0)}};_Text.defaultAutoResolution=!0;let Text=_Text;class CountLimiter{constructor(_){this.maxItemsPerFrame=_,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function findMultipleBaseTextures(_e,_){var tt;let et=!1;if((tt=_e==null?void 0:_e._textures)!=null&&tt.length){for(let rt=0;rt<_e._textures.length;rt++)if(_e._textures[rt]instanceof Texture){const it=_e._textures[rt].baseTexture;_.includes(it)||(_.push(it),et=!0)}}return et}function findBaseTexture(_e,_){if(_e.baseTexture instanceof BaseTexture){const et=_e.baseTexture;return _.includes(et)||_.push(et),!0}return!1}function findTexture(_e,_){if(_e._texture&&_e._texture instanceof Texture){const et=_e._texture.baseTexture;return _.includes(et)||_.push(et),!0}return!1}function drawText(_e,_){return _ instanceof Text?(_.updateText(!0),!0):!1}function calculateTextStyle(_e,_){if(_ instanceof TextStyle){const et=_.toFontString();return TextMetrics.measureFont(et),!0}return!1}function findText(_e,_){if(_e instanceof Text){_.includes(_e.style)||_.push(_e.style),_.includes(_e)||_.push(_e);const et=_e._texture.baseTexture;return _.includes(et)||_.push(et),!0}return!1}function findTextStyle(_e,_){return _e instanceof TextStyle?(_.includes(_e)||_.push(_e),!0):!1}const _BasePrepare=class ba{constructor(_){this.limiter=new CountLimiter(ba.uploadsPerFrame),this.renderer=_,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(findText),this.registerFindHook(findTextStyle),this.registerFindHook(findMultipleBaseTextures),this.registerFindHook(findBaseTexture),this.registerFindHook(findTexture),this.registerUploadHook(drawText),this.registerUploadHook(calculateTextStyle)}upload(_){return new Promise(et=>{_&&this.add(_),this.queue.length?(this.completes.push(et),this.ticking||(this.ticking=!0,Ticker.system.addOnce(this.tick,this,UPDATE_PRIORITY.UTILITY))):et()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const _=this.queue[0];let et=!1;if(_&&!_._destroyed){for(let tt=0,rt=this.uploadHooks.length;tt<rt;tt++)if(this.uploadHooks[tt](this.uploadHookHelper,_)){this.queue.shift(),et=!0;break}}et||this.queue.shift()}if(this.queue.length)Ticker.system.addOnce(this.tick,this,UPDATE_PRIORITY.UTILITY);else{this.ticking=!1;const _=this.completes.slice(0);this.completes.length=0;for(let et=0,tt=_.length;et<tt;et++)_[et]()}}registerFindHook(_){return _&&this.addHooks.push(_),this}registerUploadHook(_){return _&&this.uploadHooks.push(_),this}add(_){for(let et=0,tt=this.addHooks.length;et<tt&&!this.addHooks[et](_,this.queue);et++);if(_ instanceof Container)for(let et=_.children.length-1;et>=0;et--)this.add(_.children[et]);return this}destroy(){this.ticking&&Ticker.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};_BasePrepare.uploadsPerFrame=4;let BasePrepare=_BasePrepare;Object.defineProperties(settings,{UPLOADS_PER_FRAME:{get(){return BasePrepare.uploadsPerFrame},set(_e){deprecation("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),BasePrepare.uploadsPerFrame=_e}}});function uploadBaseTextures(_e,_){return _ instanceof BaseTexture?(_._glTextures[_e.CONTEXT_UID]||_e.texture.bind(_),!0):!1}function uploadGraphics(_e,_){if(!(_ instanceof Graphics))return!1;const{geometry:et}=_;_.finishPoly(),et.updateBatches();const{batches:tt}=et;for(let rt=0;rt<tt.length;rt++){const{texture:it}=tt[rt].style;it&&uploadBaseTextures(_e,it.baseTexture)}return et.batchable||_e.geometry.bind(et,_._resolveDirectShader(_e)),!0}function findGraphics(_e,_){return _e instanceof Graphics?(_.push(_e),!0):!1}class Prepare extends BasePrepare{constructor(_){super(_),this.uploadHookHelper=this.renderer,this.registerFindHook(findGraphics),this.registerUploadHook(uploadBaseTextures),this.registerUploadHook(uploadGraphics)}}Prepare.extension={name:"prepare",type:ExtensionType.RendererSystem};extensions$1.add(Prepare);var gl2FragmentSrc=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,gl2VertexSrc=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,gl1FragmentSrc=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,gl1VertexSrc=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,fragmentSimpleSrc=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;const tempMat=new Matrix;class TilingSpriteRenderer extends ObjectRenderer{constructor(_){super(_),_.runners.contextChange.add(this),this.quad=new QuadUv,this.state=State.for2d()}contextChange(){const _=this.renderer,et={globals:_.globalUniforms};this.simpleShader=Shader.from(gl1VertexSrc,fragmentSimpleSrc,et),this.shader=_.context.webGLVersion>1?Shader.from(gl2VertexSrc,gl2FragmentSrc,et):Shader.from(gl1VertexSrc,gl1FragmentSrc,et)}render(_){const et=this.renderer,tt=this.quad;let rt=tt.vertices;rt[0]=rt[6]=_._width*-_.anchor.x,rt[1]=rt[3]=_._height*-_.anchor.y,rt[2]=rt[4]=_._width*(1-_.anchor.x),rt[5]=rt[7]=_._height*(1-_.anchor.y);const it=_.uvRespectAnchor?_.anchor.x:0,st=_.uvRespectAnchor?_.anchor.y:0;rt=tt.uvs,rt[0]=rt[6]=-it,rt[1]=rt[3]=-st,rt[2]=rt[4]=1-it,rt[5]=rt[7]=1-st,tt.invalidate();const at=_._texture,ct=at.baseTexture,ut=ct.alphaMode>0,dt=_.tileTransform.localTransform,ot=_.uvMatrix;let nt=ct.isPowerOfTwo&&at.frame.width===ct.width&&at.frame.height===ct.height;nt&&(ct._glTextures[et.CONTEXT_UID]?nt=ct.wrapMode!==WRAP_MODES.CLAMP:ct.wrapMode===WRAP_MODES.CLAMP&&(ct.wrapMode=WRAP_MODES.REPEAT));const lt=nt?this.simpleShader:this.shader,ht=at.width,ft=at.height,gt=_._width,mt=_._height;tempMat.set(dt.a*ht/gt,dt.b*ht/mt,dt.c*ft/gt,dt.d*ft/mt,dt.tx/gt,dt.ty/mt),tempMat.invert(),nt?tempMat.prepend(ot.mapCoord):(lt.uniforms.uMapCoord=ot.mapCoord.toArray(!0),lt.uniforms.uClampFrame=ot.uClampFrame,lt.uniforms.uClampOffset=ot.uClampOffset),lt.uniforms.uTransform=tempMat.toArray(!0),lt.uniforms.uColor=Color.shared.setValue(_.tint).premultiply(_.worldAlpha,ut).toArray(lt.uniforms.uColor),lt.uniforms.translationMatrix=_.transform.worldTransform.toArray(!0),lt.uniforms.uSampler=at,et.shader.bind(lt),et.geometry.bind(tt),this.state.blendMode=correctBlendMode(_.blendMode,ut),et.state.set(this.state),et.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}TilingSpriteRenderer.extension={name:"tilingSprite",type:ExtensionType.RendererPlugin};extensions$1.add(TilingSpriteRenderer);const _Spritesheet=class Wn{constructor(_,et,tt){this.linkedSheets=[],(_ instanceof BaseTexture||_ instanceof Texture)&&(_={texture:_,data:et,resolutionFilename:tt});const{texture:rt,data:it,resolutionFilename:st=null,cachePrefix:at=""}=_;this.cachePrefix=at,this._texture=rt instanceof Texture?rt:null,this.baseTexture=rt instanceof BaseTexture?rt:this._texture.baseTexture,this.textures={},this.animations={},this.data=it;const ct=this.baseTexture.resource;this.resolution=this._updateResolution(st||(ct?ct.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(_=null){const{scale:et}=this.data.meta;let tt=getResolutionOfUrl(_,null);return tt===null&&(tt=typeof et=="number"?et:parseFloat(et??"1")),tt!==1&&this.baseTexture.setResolution(tt),tt}parse(){return new Promise(_=>{this._callback=_,this._batchIndex=0,this._frameKeys.length<=Wn.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(_){let et=_;const tt=Wn.BATCH_SIZE;for(;et-_<tt&&et<this._frameKeys.length;){const rt=this._frameKeys[et],it=this._frames[rt],st=it.frame;if(st){let at=null,ct=null;const ut=it.trimmed!==!1&&it.sourceSize?it.sourceSize:it.frame,dt=new Rectangle(0,0,Math.floor(ut.w)/this.resolution,Math.floor(ut.h)/this.resolution);it.rotated?at=new Rectangle(Math.floor(st.x)/this.resolution,Math.floor(st.y)/this.resolution,Math.floor(st.h)/this.resolution,Math.floor(st.w)/this.resolution):at=new Rectangle(Math.floor(st.x)/this.resolution,Math.floor(st.y)/this.resolution,Math.floor(st.w)/this.resolution,Math.floor(st.h)/this.resolution),it.trimmed!==!1&&it.spriteSourceSize&&(ct=new Rectangle(Math.floor(it.spriteSourceSize.x)/this.resolution,Math.floor(it.spriteSourceSize.y)/this.resolution,Math.floor(st.w)/this.resolution,Math.floor(st.h)/this.resolution)),this.textures[rt]=new Texture(this.baseTexture,at,dt,ct,it.rotated?2:0,it.anchor,it.borders),Texture.addToCache(this.textures[rt],this.cachePrefix+rt.toString())}et++}}_processAnimations(){const _=this.data.animations||{};for(const et in _){this.animations[et]=[];for(let tt=0;tt<_[et].length;tt++){const rt=_[et][tt];this.animations[et].push(this.textures[rt])}}}_parseComplete(){const _=this._callback;this._callback=null,this._batchIndex=0,_.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*Wn.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*Wn.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(_=!1){var et;for(const tt in this.textures)this.textures[tt].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,_&&((et=this._texture)==null||et.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};_Spritesheet.BATCH_SIZE=1e3;let Spritesheet=_Spritesheet;const validImages=["jpg","png","jpeg","avif","webp","s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc"];function getCacheableAssets(_e,_,et){const tt={};if(_e.forEach(rt=>{tt[rt]=_}),Object.keys(_.textures).forEach(rt=>{tt[`${_.cachePrefix}${rt}`]=_.textures[rt]}),!et){const rt=path.dirname(_e[0]);_.linkedSheets.forEach((it,st)=>{Object.assign(tt,getCacheableAssets([`${rt}/${_.data.meta.related_multi_packs[st]}`],it,!0))})}return tt}const spritesheetAsset={extension:ExtensionType.Asset,cache:{test:_e=>_e instanceof Spritesheet,getCacheableAssets:(_e,_)=>getCacheableAssets(_e,_,!1)},resolver:{test:_e=>{const _=_e.split("?")[0].split("."),et=_.pop(),tt=_.pop();return et==="json"&&validImages.includes(tt)},parse:_e=>{var et;const _=_e.split(".");return{resolution:parseFloat(((et=settings.RETINA_PREFIX.exec(_e))==null?void 0:et[1])??"1"),format:_[_.length-2],src:_e}}},loader:{name:"spritesheetLoader",extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.Normal},async testParse(_e,_){return path.extname(_.src).toLowerCase()===".json"&&!!_e.frames},async parse(_e,_,et){var dt,ot;const{texture:tt,imageFilename:rt,cachePrefix:it}=(_==null?void 0:_.data)??{};let st=path.dirname(_.src);st&&st.lastIndexOf("/")!==st.length-1&&(st+="/");let at;if(tt&&tt.baseTexture)at=tt;else{const nt=copySearchParams(st+(rt??_e.meta.image),_.src);at=(await et.load([nt]))[nt]}const ct=new Spritesheet({texture:at.baseTexture,data:_e,resolutionFilename:_.src,cachePrefix:it});await ct.parse();const ut=(dt=_e==null?void 0:_e.meta)==null?void 0:dt.related_multi_packs;if(Array.isArray(ut)){const nt=[];for(const ht of ut){if(typeof ht!="string")continue;let ft=st+ht;(ot=_.data)!=null&&ot.ignoreMultiPack||(ft=copySearchParams(ft,_.src),nt.push(et.load({src:ft,data:{ignoreMultiPack:!0}})))}const lt=await Promise.all(nt);ct.linkedSheets=lt,lt.forEach(ht=>{ht.linkedSheets=[ct].concat(ct.linkedSheets.filter(ft=>ft!==ht))})}return ct},unload(_e){_e.destroy(!0)}}};extensions$1.add(spritesheetAsset);class BitmapFontData{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class TextFormat{static test(_){return typeof _=="string"&&_.startsWith("info face=")}static parse(_){const et=_.match(/^[a-z]+\s+.+$/gm),tt={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const it in et){const st=et[it].match(/^[a-z]+/gm)[0],at=et[it].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),ct={};for(const ut in at){const dt=at[ut].split("="),ot=dt[0],nt=dt[1].replace(/"/gm,""),lt=parseFloat(nt),ht=isNaN(lt)?nt:lt;ct[ot]=ht}tt[st].push(ct)}const rt=new BitmapFontData;return tt.info.forEach(it=>rt.info.push({face:it.face,size:parseInt(it.size,10)})),tt.common.forEach(it=>rt.common.push({lineHeight:parseInt(it.lineHeight,10)})),tt.page.forEach(it=>rt.page.push({id:parseInt(it.id,10),file:it.file})),tt.char.forEach(it=>rt.char.push({id:parseInt(it.id,10),page:parseInt(it.page,10),x:parseInt(it.x,10),y:parseInt(it.y,10),width:parseInt(it.width,10),height:parseInt(it.height,10),xoffset:parseInt(it.xoffset,10),yoffset:parseInt(it.yoffset,10),xadvance:parseInt(it.xadvance,10)})),tt.kerning.forEach(it=>rt.kerning.push({first:parseInt(it.first,10),second:parseInt(it.second,10),amount:parseInt(it.amount,10)})),tt.distanceField.forEach(it=>rt.distanceField.push({distanceRange:parseInt(it.distanceRange,10),fieldType:it.fieldType})),rt}}class XMLFormat{static test(_){const et=_;return typeof _!="string"&&"getElementsByTagName"in _&&et.getElementsByTagName("page").length&&et.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(_){const et=new BitmapFontData,tt=_.getElementsByTagName("info"),rt=_.getElementsByTagName("common"),it=_.getElementsByTagName("page"),st=_.getElementsByTagName("char"),at=_.getElementsByTagName("kerning"),ct=_.getElementsByTagName("distanceField");for(let ut=0;ut<tt.length;ut++)et.info.push({face:tt[ut].getAttribute("face"),size:parseInt(tt[ut].getAttribute("size"),10)});for(let ut=0;ut<rt.length;ut++)et.common.push({lineHeight:parseInt(rt[ut].getAttribute("lineHeight"),10)});for(let ut=0;ut<it.length;ut++)et.page.push({id:parseInt(it[ut].getAttribute("id"),10)||0,file:it[ut].getAttribute("file")});for(let ut=0;ut<st.length;ut++){const dt=st[ut];et.char.push({id:parseInt(dt.getAttribute("id"),10),page:parseInt(dt.getAttribute("page"),10)||0,x:parseInt(dt.getAttribute("x"),10),y:parseInt(dt.getAttribute("y"),10),width:parseInt(dt.getAttribute("width"),10),height:parseInt(dt.getAttribute("height"),10),xoffset:parseInt(dt.getAttribute("xoffset"),10),yoffset:parseInt(dt.getAttribute("yoffset"),10),xadvance:parseInt(dt.getAttribute("xadvance"),10)})}for(let ut=0;ut<at.length;ut++)et.kerning.push({first:parseInt(at[ut].getAttribute("first"),10),second:parseInt(at[ut].getAttribute("second"),10),amount:parseInt(at[ut].getAttribute("amount"),10)});for(let ut=0;ut<ct.length;ut++)et.distanceField.push({fieldType:ct[ut].getAttribute("fieldType"),distanceRange:parseInt(ct[ut].getAttribute("distanceRange"),10)});return et}}class XMLStringFormat{static test(_){return typeof _=="string"&&_.includes("<font>")?XMLFormat.test(settings.ADAPTER.parseXML(_)):!1}static parse(_){return XMLFormat.parse(settings.ADAPTER.parseXML(_))}}const formats=[TextFormat,XMLFormat,XMLStringFormat];function autoDetectFormat(_e){for(let _=0;_<formats.length;_++)if(formats[_].test(_e))return formats[_];return null}function generateFillStyle(_e,_,et,tt,rt,it){const st=et.fill;if(Array.isArray(st)){if(st.length===1)return st[0]}else return st;let at;const ct=et.dropShadow?et.dropShadowDistance:0,ut=et.padding||0,dt=_e.width/tt-ct-ut*2,ot=_e.height/tt-ct-ut*2,nt=st.slice(),lt=et.fillGradientStops.slice();if(!lt.length){const ht=nt.length+1;for(let ft=1;ft<ht;++ft)lt.push(ft/ht)}if(nt.unshift(st[0]),lt.unshift(0),nt.push(st[st.length-1]),lt.push(1),et.fillGradientType===TEXT_GRADIENT.LINEAR_VERTICAL){at=_.createLinearGradient(dt/2,ut,dt/2,ot+ut);let ht=0;const ft=(it.fontProperties.fontSize+et.strokeThickness)/ot;for(let gt=0;gt<rt.length;gt++){const mt=it.lineHeight*gt;for(let yt=0;yt<nt.length;yt++){let bt=0;typeof lt[yt]=="number"?bt=lt[yt]:bt=yt/nt.length;const _t=mt/ot+bt*ft;let vt=Math.max(ht,_t);vt=Math.min(vt,1),at.addColorStop(vt,nt[yt]),ht=vt}}}else{at=_.createLinearGradient(ut,ot/2,dt+ut,ot/2);const ht=nt.length+1;let ft=1;for(let gt=0;gt<nt.length;gt++){let mt;typeof lt[gt]=="number"?mt=lt[gt]:mt=ft/ht,at.addColorStop(mt,nt[gt]),ft++}}return at}function drawGlyph(_e,_,et,tt,rt,it,st){const at=et.text,ct=et.fontProperties;_.translate(tt,rt),_.scale(it,it);const ut=st.strokeThickness/2,dt=-(st.strokeThickness/2);if(_.font=st.toFontString(),_.lineWidth=st.strokeThickness,_.textBaseline=st.textBaseline,_.lineJoin=st.lineJoin,_.miterLimit=st.miterLimit,_.fillStyle=generateFillStyle(_e,_,st,it,[at],et),_.strokeStyle=st.stroke,st.dropShadow){const ot=st.dropShadowColor,nt=st.dropShadowBlur*it,lt=st.dropShadowDistance*it;_.shadowColor=Color.shared.setValue(ot).setAlpha(st.dropShadowAlpha).toRgbaString(),_.shadowBlur=nt,_.shadowOffsetX=Math.cos(st.dropShadowAngle)*lt,_.shadowOffsetY=Math.sin(st.dropShadowAngle)*lt}else _.shadowColor="black",_.shadowBlur=0,_.shadowOffsetX=0,_.shadowOffsetY=0;st.stroke&&st.strokeThickness&&_.strokeText(at,ut,dt+et.lineHeight-ct.descent),st.fill&&_.fillText(at,ut,dt+et.lineHeight-ct.descent),_.setTransform(1,0,0,1,0,0),_.fillStyle="rgba(0, 0, 0, 0)"}function extractCharCode(_e){return _e.codePointAt?_e.codePointAt(0):_e.charCodeAt(0)}function splitTextToCharacters(_e){return Array.from?Array.from(_e):_e.split("")}function resolveCharacters(_e){typeof _e=="string"&&(_e=[_e]);const _=[];for(let et=0,tt=_e.length;et<tt;et++){const rt=_e[et];if(Array.isArray(rt)){if(rt.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${rt.length}.`);const it=rt[0].charCodeAt(0),st=rt[1].charCodeAt(0);if(st<it)throw new Error("[BitmapFont]: Invalid character range.");for(let at=it,ct=st;at<=ct;at++)_.push(String.fromCharCode(at))}else _.push(...splitTextToCharacters(rt))}if(_.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return _}const _BitmapFont=class nn{constructor(_,et,tt){var dt;const[rt]=_.info,[it]=_.common,[st]=_.page,[at]=_.distanceField,ct=getResolutionOfUrl(st.file),ut={};this._ownsTextures=tt,this.font=rt.face,this.size=rt.size,this.lineHeight=it.lineHeight/ct,this.chars={},this.pageTextures=ut;for(let ot=0;ot<_.page.length;ot++){const{id:nt,file:lt}=_.page[ot];ut[nt]=et instanceof Array?et[ot]:et[lt],at!=null&&at.fieldType&&at.fieldType!=="none"&&(ut[nt].baseTexture.alphaMode=ALPHA_MODES.NO_PREMULTIPLIED_ALPHA,ut[nt].baseTexture.mipmap=MIPMAP_MODES.OFF)}for(let ot=0;ot<_.char.length;ot++){const{id:nt,page:lt}=_.char[ot];let{x:ht,y:ft,width:gt,height:mt,xoffset:yt,yoffset:bt,xadvance:_t}=_.char[ot];ht/=ct,ft/=ct,gt/=ct,mt/=ct,yt/=ct,bt/=ct,_t/=ct;const vt=new Rectangle(ht+ut[lt].frame.x/ct,ft+ut[lt].frame.y/ct,gt,mt);this.chars[nt]={xOffset:yt,yOffset:bt,xAdvance:_t,kerning:{},texture:new Texture(ut[lt].baseTexture,vt),page:lt}}for(let ot=0;ot<_.kerning.length;ot++){let{first:nt,second:lt,amount:ht}=_.kerning[ot];nt/=ct,lt/=ct,ht/=ct,this.chars[lt]&&(this.chars[lt].kerning[nt]=ht)}this.distanceFieldRange=at==null?void 0:at.distanceRange,this.distanceFieldType=((dt=at==null?void 0:at.fieldType)==null?void 0:dt.toLowerCase())??"none"}destroy(){for(const _ in this.chars)this.chars[_].texture.destroy(),this.chars[_].texture=null;for(const _ in this.pageTextures)this._ownsTextures&&this.pageTextures[_].destroy(!0),this.pageTextures[_]=null;this.chars=null,this.pageTextures=null}static install(_,et,tt){let rt;if(_ instanceof BitmapFontData)rt=_;else{const st=autoDetectFormat(_);if(!st)throw new Error("Unrecognized data format for font.");rt=st.parse(_)}et instanceof Texture&&(et=[et]);const it=new nn(rt,et,tt);return nn.available[it.font]=it,it}static uninstall(_){const et=nn.available[_];if(!et)throw new Error(`No font found named '${_}'`);et.destroy(),delete nn.available[_]}static from(_,et,tt){if(!_)throw new Error("[BitmapFont] Property `name` is required.");const{chars:rt,padding:it,resolution:st,textureWidth:at,textureHeight:ct,...ut}=Object.assign({},nn.defaultOptions,tt),dt=resolveCharacters(rt),ot=et instanceof TextStyle?et:new TextStyle(et),nt=at,lt=new BitmapFontData;lt.info[0]={face:ot.fontFamily,size:ot.fontSize},lt.common[0]={lineHeight:ot.fontSize};let ht=0,ft=0,gt,mt,yt,bt=0;const _t=[];for(let xt=0;xt<dt.length;xt++){gt||(gt=settings.ADAPTER.createCanvas(),gt.width=at,gt.height=ct,mt=gt.getContext("2d"),yt=new BaseTexture(gt,{resolution:st,...ut}),_t.push(new Texture(yt)),lt.page.push({id:_t.length-1,file:""}));const wt=dt[xt],Tt=TextMetrics.measureText(wt,ot,!1,gt),St=Tt.width,Et=Math.ceil(Tt.height),Ot=Math.ceil((ot.fontStyle==="italic"?2:1)*St);if(ft>=ct-Et*st){if(ft===0)throw new Error(`[BitmapFont] textureHeight ${ct}px is too small (fontFamily: '${ot.fontFamily}', fontSize: ${ot.fontSize}px, char: '${wt}')`);--xt,gt=null,mt=null,yt=null,ft=0,ht=0,bt=0;continue}if(bt=Math.max(Et+Tt.fontProperties.descent,bt),Ot*st+ht>=nt){if(ht===0)throw new Error(`[BitmapFont] textureWidth ${at}px is too small (fontFamily: '${ot.fontFamily}', fontSize: ${ot.fontSize}px, char: '${wt}')`);--xt,ft+=bt*st,ft=Math.ceil(ft),ht=0,bt=0;continue}drawGlyph(gt,mt,Tt,ht,ft,st,ot);const Rt=extractCharCode(Tt.text);lt.char.push({id:Rt,page:_t.length-1,x:ht/st,y:ft/st,width:Ot,height:Et,xoffset:0,yoffset:0,xadvance:St-(ot.dropShadow?ot.dropShadowDistance:0)-(ot.stroke?ot.strokeThickness:0)}),ht+=(Ot+2*it)*st,ht=Math.ceil(ht)}if(!(tt!=null&&tt.skipKerning))for(let xt=0,wt=dt.length;xt<wt;xt++){const Tt=dt[xt];for(let St=0;St<wt;St++){const Et=dt[St],Ot=mt.measureText(Tt).width,Rt=mt.measureText(Et).width,Pt=mt.measureText(Tt+Et).width-(Ot+Rt);Pt&&lt.kerning.push({first:extractCharCode(Tt),second:extractCharCode(Et),amount:Pt})}}const vt=new nn(lt,_t,!0);return nn.available[_]!==void 0&&nn.uninstall(_),nn.available[_]=vt,vt}};_BitmapFont.ALPHA=[["a","z"],["A","Z"]," "],_BitmapFont.NUMERIC=[["0","9"]],_BitmapFont.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],_BitmapFont.ASCII=[[" ","~"]],_BitmapFont.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:_BitmapFont.ALPHANUMERIC},_BitmapFont.available={};let BitmapFont=_BitmapFont;var msdfFrag=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // Gamma correction for coverage-like alpha\r
  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r
  float gamma = mix(1.0, 1.0 / 2.2, luma);\r
  float coverage = pow(uColor.a * alpha, gamma);  \r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, coverage);\r
}\r
`,msdfVert=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;const pageMeshDataDefaultPageMeshData=[],pageMeshDataMSDFPageMeshData=[],charRenderDataPool=[],_BitmapText=class xa extends Container{constructor(_,et={}){super();const{align:tt,tint:rt,maxWidth:it,letterSpacing:st,fontName:at,fontSize:ct}=Object.assign({},xa.styleDefaults,et);if(!BitmapFont.available[at])throw new Error(`Missing BitmapFont "${at}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=tt,this._tintColor=new Color(rt),this._font=void 0,this._fontName=at,this._fontSize=ct,this.text=_,this._maxWidth=it,this._maxLineHeight=0,this._letterSpacing=st,this._anchor=new ObservablePoint(()=>{this.dirty=!0},this,0,0),this._roundPixels=settings.ROUND_PIXELS,this.dirty=!0,this._resolution=settings.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){var Ot;const _=BitmapFont.available[this._fontName],et=this.fontSize,tt=et/_.size,rt=new Point,it=[],st=[],at=[],ct=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",ut=splitTextToCharacters(ct),dt=this._maxWidth*_.size/et,ot=_.distanceFieldType==="none"?pageMeshDataDefaultPageMeshData:pageMeshDataMSDFPageMeshData;let nt=null,lt=0,ht=0,ft=0,gt=-1,mt=0,yt=0,bt=0,_t=0;for(let Rt=0;Rt<ut.length;Rt++){const Pt=ut[Rt],Mt=extractCharCode(Pt);if(/(?:\s)/.test(Pt)&&(gt=Rt,mt=lt,_t++),Pt==="\r"||Pt===`
`){st.push(lt),at.push(-1),ht=Math.max(ht,lt),++ft,++yt,rt.x=0,rt.y+=_.lineHeight,nt=null,_t=0;continue}const $t=_.chars[Mt];if(!$t)continue;nt&&$t.kerning[nt]&&(rt.x+=$t.kerning[nt]);const kt=charRenderDataPool.pop()||{texture:Texture.EMPTY,line:0,charCode:0,prevSpaces:0,position:new Point};kt.texture=$t.texture,kt.line=ft,kt.charCode=Mt,kt.position.x=Math.round(rt.x+$t.xOffset+this._letterSpacing/2),kt.position.y=Math.round(rt.y+$t.yOffset),kt.prevSpaces=_t,it.push(kt),lt=kt.position.x+Math.max($t.xAdvance-$t.xOffset,$t.texture.orig.width),rt.x+=$t.xAdvance+this._letterSpacing,bt=Math.max(bt,$t.yOffset+$t.texture.height),nt=Mt,gt!==-1&&dt>0&&rt.x>dt&&(++yt,removeItems(it,1+gt-yt,1+Rt-gt),Rt=gt,gt=-1,st.push(mt),at.push(it.length>0?it[it.length-1].prevSpaces:0),ht=Math.max(ht,mt),ft++,rt.x=0,rt.y+=_.lineHeight,nt=null,_t=0)}const vt=ut[ut.length-1];vt!=="\r"&&vt!==`
`&&(/(?:\s)/.test(vt)&&(lt=mt),st.push(lt),ht=Math.max(ht,lt),at.push(-1));const xt=[];for(let Rt=0;Rt<=ft;Rt++){let Pt=0;this._align==="right"?Pt=ht-st[Rt]:this._align==="center"?Pt=(ht-st[Rt])/2:this._align==="justify"&&(Pt=at[Rt]<0?0:(ht-st[Rt])/at[Rt]),xt.push(Pt)}const wt=it.length,Tt={},St=[],Et=this._activePagesMeshData;ot.push(...Et);for(let Rt=0;Rt<wt;Rt++){const Pt=it[Rt].texture,Mt=Pt.baseTexture.uid;if(!Tt[Mt]){let $t=ot.pop();if(!$t){const Lt=new MeshGeometry;let Nt,zt;_.distanceFieldType==="none"?(Nt=new MeshMaterial(Texture.EMPTY),zt=BLEND_MODES.NORMAL):(Nt=new MeshMaterial(Texture.EMPTY,{program:Program.from(msdfVert,msdfFrag),uniforms:{uFWidth:0}}),zt=BLEND_MODES.NORMAL_NPM);const Ut=new Mesh(Lt,Nt);Ut.blendMode=zt,$t={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:Ut,vertices:null,uvs:null,indices:null}}$t.index=0,$t.indexCount=0,$t.vertexCount=0,$t.uvsCount=0,$t.total=0;const{_textureCache:kt}=this;kt[Mt]=kt[Mt]||new Texture(Pt.baseTexture),$t.mesh.texture=kt[Mt],$t.mesh.tint=this._tintColor.value,St.push($t),Tt[Mt]=$t}Tt[Mt].total++}for(let Rt=0;Rt<Et.length;Rt++)St.includes(Et[Rt])||this.removeChild(Et[Rt].mesh);for(let Rt=0;Rt<St.length;Rt++)St[Rt].mesh.parent!==this&&this.addChild(St[Rt].mesh);this._activePagesMeshData=St;for(const Rt in Tt){const Pt=Tt[Rt],Mt=Pt.total;if(!(((Ot=Pt.indices)==null?void 0:Ot.length)>6*Mt)||Pt.vertices.length<Mesh.BATCHABLE_SIZE*2)Pt.vertices=new Float32Array(4*2*Mt),Pt.uvs=new Float32Array(4*2*Mt),Pt.indices=new Uint16Array(6*Mt);else{const $t=Pt.total,kt=Pt.vertices;for(let Lt=$t*4*2;Lt<kt.length;Lt++)kt[Lt]=0}Pt.mesh.size=6*Mt}for(let Rt=0;Rt<wt;Rt++){const Pt=it[Rt];let Mt=Pt.position.x+xt[Pt.line]*(this._align==="justify"?Pt.prevSpaces:1);this._roundPixels&&(Mt=Math.round(Mt));const $t=Mt*tt,kt=Pt.position.y*tt,Lt=Pt.texture,Nt=Tt[Lt.baseTexture.uid],zt=Lt.frame,Ut=Lt._uvs,Vt=Nt.index++;Nt.indices[Vt*6+0]=0+Vt*4,Nt.indices[Vt*6+1]=1+Vt*4,Nt.indices[Vt*6+2]=2+Vt*4,Nt.indices[Vt*6+3]=0+Vt*4,Nt.indices[Vt*6+4]=2+Vt*4,Nt.indices[Vt*6+5]=3+Vt*4,Nt.vertices[Vt*8+0]=$t,Nt.vertices[Vt*8+1]=kt,Nt.vertices[Vt*8+2]=$t+zt.width*tt,Nt.vertices[Vt*8+3]=kt,Nt.vertices[Vt*8+4]=$t+zt.width*tt,Nt.vertices[Vt*8+5]=kt+zt.height*tt,Nt.vertices[Vt*8+6]=$t,Nt.vertices[Vt*8+7]=kt+zt.height*tt,Nt.uvs[Vt*8+0]=Ut.x0,Nt.uvs[Vt*8+1]=Ut.y0,Nt.uvs[Vt*8+2]=Ut.x1,Nt.uvs[Vt*8+3]=Ut.y1,Nt.uvs[Vt*8+4]=Ut.x2,Nt.uvs[Vt*8+5]=Ut.y2,Nt.uvs[Vt*8+6]=Ut.x3,Nt.uvs[Vt*8+7]=Ut.y3}this._textWidth=ht*tt,this._textHeight=(rt.y+_.lineHeight)*tt;for(const Rt in Tt){const Pt=Tt[Rt];if(this.anchor.x!==0||this.anchor.y!==0){let Lt=0;const Nt=this._textWidth*this.anchor.x,zt=this._textHeight*this.anchor.y;for(let Ut=0;Ut<Pt.total;Ut++)Pt.vertices[Lt++]-=Nt,Pt.vertices[Lt++]-=zt,Pt.vertices[Lt++]-=Nt,Pt.vertices[Lt++]-=zt,Pt.vertices[Lt++]-=Nt,Pt.vertices[Lt++]-=zt,Pt.vertices[Lt++]-=Nt,Pt.vertices[Lt++]-=zt}this._maxLineHeight=bt*tt;const Mt=Pt.mesh.geometry.getBuffer("aVertexPosition"),$t=Pt.mesh.geometry.getBuffer("aTextureCoord"),kt=Pt.mesh.geometry.getIndex();Mt.data=Pt.vertices,$t.data=Pt.uvs,kt.data=Pt.indices,Mt.update(),$t.update(),kt.update()}for(let Rt=0;Rt<it.length;Rt++)charRenderDataPool.push(it[Rt]);this._font=_,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(_){this._autoResolution&&this._resolution!==_.resolution&&(this._resolution=_.resolution,this.dirty=!0);const{distanceFieldRange:et,distanceFieldType:tt,size:rt}=BitmapFont.available[this._fontName];if(tt!=="none"){const{a:it,b:st,c:at,d:ct}=this.worldTransform,ut=Math.sqrt(it*it+st*st),dt=Math.sqrt(at*at+ct*ct),ot=(Math.abs(ut)+Math.abs(dt))/2,nt=this.fontSize/rt,lt=_._view.resolution;for(const ht of this._activePagesMeshData)ht.mesh.shader.uniforms.uFWidth=ot*et*nt*lt}super._render(_)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const _=BitmapFont.available[this._fontName];if(!_)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==_&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(_){if(this.tint!==_){this._tintColor.setValue(_);for(let et=0;et<this._activePagesMeshData.length;et++)this._activePagesMeshData[et].mesh.tint=_}}get align(){return this._align}set align(_){this._align!==_&&(this._align=_,this.dirty=!0)}get fontName(){return this._fontName}set fontName(_){if(!BitmapFont.available[_])throw new Error(`Missing BitmapFont "${_}"`);this._fontName!==_&&(this._fontName=_,this.dirty=!0)}get fontSize(){return this._fontSize??BitmapFont.available[this._fontName].size}set fontSize(_){this._fontSize!==_&&(this._fontSize=_,this.dirty=!0)}get anchor(){return this._anchor}set anchor(_){typeof _=="number"?this._anchor.set(_):this._anchor.copyFrom(_)}get text(){return this._text}set text(_){_=String(_??""),this._text!==_&&(this._text=_,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(_){this._maxWidth!==_&&(this._maxWidth=_,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(_){this._letterSpacing!==_&&(this._letterSpacing=_,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(_){_!==this._roundPixels&&(this._roundPixels=_,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(_){this._autoResolution=!1,this._resolution!==_&&(this._resolution=_,this.dirty=!0)}destroy(_){const{_textureCache:et}=this,tt=BitmapFont.available[this._fontName].distanceFieldType==="none"?pageMeshDataDefaultPageMeshData:pageMeshDataMSDFPageMeshData;tt.push(...this._activePagesMeshData);for(const rt of this._activePagesMeshData)this.removeChild(rt.mesh);this._activePagesMeshData=[],tt.filter(rt=>et[rt.mesh.texture.baseTexture.uid]).forEach(rt=>{rt.mesh.texture=Texture.EMPTY});for(const rt in et)et[rt].destroy(),delete et[rt];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(_)}};_BitmapText.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};const validExtensions=[".xml",".fnt"],loadBitmapFont={extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.Normal},name:"loadBitmapFont",test(_e){return validExtensions.includes(path.extname(_e).toLowerCase())},async testParse(_e){return TextFormat.test(_e)||XMLStringFormat.test(_e)},async parse(_e,_,et){const tt=TextFormat.test(_e)?TextFormat.parse(_e):XMLStringFormat.parse(_e),{src:rt}=_,{page:it}=tt,st=[];for(let ut=0;ut<it.length;++ut){const dt=it[ut].file;let ot=path.join(path.dirname(rt),dt);ot=copySearchParams(ot,rt),st.push(ot)}const at=await et.load(st),ct=st.map(ut=>at[ut]);return BitmapFont.install(tt,ct,!0)},async load(_e,_){return(await settings.ADAPTER.fetch(_e)).text()},unload(_e){_e.destroy()}};extensions$1.add(loadBitmapFont);const _HTMLTextStyle=class wn extends TextStyle{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(_){return new wn(Object.keys(wn.defaultOptions).reduce((et,tt)=>({...et,[tt]:_[tt]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(_=>{URL.revokeObjectURL(_.src),_.refs--,_.refs===0&&(_.fontFace&&document.fonts.delete(_.fontFace),delete wn.availableFonts[_.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(_,et={}){const{availableFonts:tt}=wn;if(tt[_]){const rt=tt[_];return this._fonts.push(rt),rt.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return settings.ADAPTER.fetch(_).then(rt=>rt.blob()).then(async rt=>new Promise((it,st)=>{const at=URL.createObjectURL(rt),ct=new FileReader;ct.onload=()=>it([at,ct.result]),ct.onerror=st,ct.readAsDataURL(rt)})).then(async([rt,it])=>{const st=Object.assign({family:path.basename(_,path.extname(_)),weight:"normal",style:"normal",display:"auto",src:rt,dataSrc:it,refs:1,originalUrl:_,fontFace:null},et);tt[_]=st,this._fonts.push(st),this.styleID++;const at=new FontFace(st.family,`url(${st.src})`,{weight:st.weight,style:st.style,display:st.display});st.fontFace=at,await at.load(),document.fonts.add(at),await document.fonts.ready,this.styleID++,this.fontsDirty=!0})}addOverride(..._){const et=_.filter(tt=>!this._overrides.includes(tt));et.length>0&&(this._overrides.push(...et),this.styleID++)}removeOverride(..._){const et=_.filter(tt=>this._overrides.includes(tt));et.length>0&&(this._overrides=this._overrides.filter(tt=>!et.includes(tt)),this.styleID++)}toCSS(_){return[`transform: scale(${_})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?[`word-wrap: ${this.breakWords?"break-all":"break-word"}`,`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((_,et)=>`${_}
            @font-face {
                font-family: "${et.family}";
                src: url('${et.dataSrc}');
                font-weight: ${et.weight};
                font-style: ${et.style};
                font-display: ${et.display};
            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(_){this._stylesheet!==_&&(this._stylesheet=_,this.styleID++)}normalizeColor(_){return Array.isArray(_)&&(_=rgb2hex(_)),typeof _=="number"?hex2string(_):_}dropShadowToCSS(){let _=this.normalizeColor(this.dropShadowColor);const et=this.dropShadowAlpha,tt=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),rt=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);_.startsWith("#")&&et<1&&(_+=(et*255|0).toString(16).padStart(2,"0"));const it=`${tt}px ${rt}px`;return this.dropShadowBlur>0?`text-shadow: ${it} ${this.dropShadowBlur}px ${_}`:`text-shadow: ${it} ${_}`}reset(){Object.assign(this,wn.defaultOptions)}onBeforeDraw(){const{fontsDirty:_}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&_?new Promise(et=>setTimeout(et,100)):Promise.resolve()}get isSafari(){const{userAgent:_}=settings.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(_)}set fillGradientStops(_){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(_){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(_){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(_){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(_){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(_){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(_){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};_HTMLTextStyle.availableFonts={},_HTMLTextStyle.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};let HTMLTextStyle=_HTMLTextStyle;const _HTMLText=class Tn extends Sprite{constructor(_="",et={}){super(Texture.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this.localStyleID=-1,this.dirty=!1,this._updateID=0,this.ownsStyle=!1;const tt=new Image,rt=Texture.from(tt,{scaleMode:settings.SCALE_MODE,resourceOptions:{autoLoad:!1}});rt.orig=new Rectangle,rt.trim=new Rectangle,this.texture=rt;const it="http://www.w3.org/2000/svg",st="http://www.w3.org/1999/xhtml",at=document.createElementNS(it,"svg"),ct=document.createElementNS(it,"foreignObject"),ut=document.createElementNS(st,"div"),dt=document.createElementNS(st,"style");ct.setAttribute("width","10000"),ct.setAttribute("height","10000"),ct.style.overflow="hidden",at.appendChild(ct),this.maxWidth=Tn.defaultMaxWidth,this.maxHeight=Tn.defaultMaxHeight,this._domElement=ut,this._styleElement=dt,this._svgRoot=at,this._foreignObject=ct,this._foreignObject.appendChild(dt),this._foreignObject.appendChild(ut),this._image=tt,this._loadImage=new Image,this._autoResolution=Tn.defaultAutoResolution,this._resolution=Tn.defaultResolution??settings.RESOLUTION,this.text=_,this.style=et}measureText(_){var dt,ot;const{text:et,style:tt,resolution:rt}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},_);Object.assign(this._domElement,{innerHTML:et,style:tt.toCSS(rt)}),this._styleElement.textContent=tt.toGlobalCSS(),document.body.appendChild(this._svgRoot);const it=this._domElement.getBoundingClientRect();this._svgRoot.remove();const{width:st,height:at}=it;(st>this.maxWidth||at>this.maxHeight)&&console.warn("[HTMLText] Large expanse of text, increase HTMLText.maxWidth or HTMLText.maxHeight property.");const ct=Math.min(this.maxWidth,Math.ceil(st)),ut=Math.min(this.maxHeight,Math.ceil(at));return this._svgRoot.setAttribute("width",ct.toString()),this._svgRoot.setAttribute("height",ut.toString()),et!==this._text&&(this._domElement.innerHTML=this._text),tt!==this._style&&(Object.assign(this._domElement,{style:(dt=this._style)==null?void 0:dt.toCSS(rt)}),this._styleElement.textContent=(ot=this._style)==null?void 0:ot.toGlobalCSS()),{width:ct+tt.padding*2,height:ut+tt.padding*2}}async updateText(_=!0){const{style:et,_image:tt,_loadImage:rt}=this;if(this.localStyleID!==et.styleID&&(this.dirty=!0,this.localStyleID=et.styleID),!this.dirty&&_)return;const{width:it,height:st}=this.measureText();tt.width=rt.width=Math.ceil(Math.max(1,it)),tt.height=rt.height=Math.ceil(Math.max(1,st)),this._updateID++;const at=this._updateID;await new Promise(ct=>{rt.onload=async()=>{if(at<this._updateID){ct();return}await et.onBeforeDraw(),tt.src=rt.src,rt.onload=null,rt.src="",this.updateTexture(),ct()};const ut=new XMLSerializer().serializeToString(this._svgRoot);rt.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(ut)}`})}get source(){return this._image}updateTexture(){const{style:_,texture:et,_image:tt,resolution:rt}=this,{padding:it}=_,{baseTexture:st}=et;et.trim.width=et._frame.width=tt.width/rt,et.trim.height=et._frame.height=tt.height/rt,et.trim.x=-it,et.trim.y=-it,et.orig.width=et._frame.width-it*2,et.orig.height=et._frame.height-it*2,this._onTextureUpdate(),st.setRealSize(tt.width,tt.height,rt),this.dirty=!1}_render(_){this._autoResolution&&this._resolution!==_.resolution&&(this._resolution=_.resolution,this.dirty=!0),this.updateText(!0),super._render(_)}_renderCanvas(_){this._autoResolution&&this._resolution!==_.resolution&&(this._resolution=_.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(_)}getLocalBounds(_){return this.updateText(!0),super.getLocalBounds(_)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(_){var tt,rt,it,st,at;typeof _=="boolean"&&(_={children:_}),_=Object.assign({},Tn.defaultDestroyOptions,_),super.destroy(_);const et=null;this.ownsStyle&&((tt=this._style)==null||tt.cleanFonts()),this._style=et,(rt=this._svgRoot)==null||rt.remove(),this._svgRoot=et,(it=this._domElement)==null||it.remove(),this._domElement=et,(st=this._foreignObject)==null||st.remove(),this._foreignObject=et,(at=this._styleElement)==null||at.remove(),this._styleElement=et,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=et,this._image.src="",this._image=et}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(_){this.updateText(!0);const et=sign(this.scale.x)||1;this.scale.x=et*_/this._image.width/this.resolution,this._width=_}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(_){this.updateText(!0);const et=sign(this.scale.y)||1;this.scale.y=et*_/this._image.height/this.resolution,this._height=_}get style(){return this._style}set style(_){this._style!==_&&(_=_||{},_ instanceof HTMLTextStyle?(this.ownsStyle=!1,this._style=_):_ instanceof TextStyle?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=HTMLTextStyle.from(_)):(this.ownsStyle=!0,this._style=new HTMLTextStyle(_)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(_){_=String(_===""||_===null||_===void 0?" ":_),_=this.sanitiseText(_),this._text!==_&&(this._text=_,this.dirty=!0)}get resolution(){return this._resolution}set resolution(_){this._autoResolution=!1,this._resolution!==_&&(this._resolution=_,this.dirty=!0)}sanitiseText(_){return _.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};_HTMLText.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},_HTMLText.defaultMaxWidth=2024,_HTMLText.defaultMaxHeight=2024,_HTMLText.defaultAutoResolution=!0;var __defProp=Object.defineProperty,__pow=Math.pow,__defNormalProp=(_e,_,et)=>_ in _e?__defProp(_e,_,{enumerable:!0,configurable:!0,writable:!0,value:et}):_e[_]=et,__publicField=(_e,_,et)=>(__defNormalProp(_e,typeof _!="symbol"?_+"":_,et),et),__async=(_e,_,et)=>new Promise((tt,rt)=>{var it=ct=>{try{at(et.next(ct))}catch(ut){rt(ut)}},st=ct=>{try{at(et.throw(ct))}catch(ut){rt(ut)}},at=ct=>ct.done?tt(ct.value):Promise.resolve(ct.value).then(it,st);at((et=et.apply(_e,_)).next())});const LOGICAL_WIDTH=2,LOGICAL_HEIGHT=2;var CubismConfig;(_e=>{_e.supportMoreMaskDivisions=!0,_e.setOpacityFromMotion=!1})(CubismConfig||(CubismConfig={}));const LOG_LEVEL_VERBOSE=0,LOG_LEVEL_WARNING=1,LOG_LEVEL_ERROR=2,LOG_LEVEL_NONE=999,config={LOG_LEVEL_VERBOSE,LOG_LEVEL_WARNING,LOG_LEVEL_ERROR,LOG_LEVEL_NONE,logLevel:LOG_LEVEL_WARNING,sound:!0,motionSync:!0,motionFadingDuration:500,idleMotionFadingDuration:2e3,expressionFadingDuration:500,preserveExpressionOnMotion:!0,cubism4:CubismConfig},logger={log(_e,..._){},warn(_e,..._){console.warn(`[${_e}]`,..._)},error(_e,..._){console.error(`[${_e}]`,..._)}};function clamp(_e,_,et){return _e<_?_:_e>et?et:_e}function rand(_e,_){return Math.random()*(_-_e)+_e}function copyProperty(_e,_,et,tt,rt){const it=_[tt];it!==null&&typeof it===_e&&(et[rt]=it)}function copyArray(_e,_,et,tt,rt){const it=_[tt];Array.isArray(it)&&(et[rt]=it.filter(st=>st!==null&&typeof st===_e))}function applyMixins(_e,_){_.forEach(et=>{Object.getOwnPropertyNames(et.prototype).forEach(tt=>{tt!=="constructor"&&Object.defineProperty(_e.prototype,tt,Object.getOwnPropertyDescriptor(et.prototype,tt))})})}function folderName(_e){let _=_e.lastIndexOf("/");return _!=-1&&(_e=_e.slice(0,_)),_=_e.lastIndexOf("/"),_!==-1&&(_e=_e.slice(_+1)),_e}function remove(_e,_){const et=_e.indexOf(_);et!==-1&&_e.splice(et,1)}class ExpressionManager extends EventEmitter{constructor(_,et){super(),__publicField(this,"tag"),__publicField(this,"settings"),__publicField(this,"expressions",[]),__publicField(this,"defaultExpression"),__publicField(this,"currentExpression"),__publicField(this,"reserveExpressionIndex",-1),__publicField(this,"destroyed",!1),this.settings=_,this.tag=`ExpressionManager(${_.name})`}init(){this.defaultExpression=this.createExpression({},void 0),this.currentExpression=this.defaultExpression,this.stopAllExpressions()}loadExpression(_){return __async(this,null,function*(){if(!this.definitions[_]){logger.warn(this.tag,`Undefined expression at [${_}]`);return}if(this.expressions[_]===null){logger.warn(this.tag,`Cannot set expression at [${_}] because it's already failed in loading.`);return}if(this.expressions[_])return this.expressions[_];const et=yield this._loadExpression(_);return this.expressions[_]=et,et})}_loadExpression(_){throw new Error("Not implemented.")}setRandomExpression(){return __async(this,null,function*(){if(this.definitions.length){const _=[];for(let et=0;et<this.definitions.length;et++)this.expressions[et]!==null&&this.expressions[et]!==this.currentExpression&&et!==this.reserveExpressionIndex&&_.push(et);if(_.length){const et=Math.floor(Math.random()*_.length);return this.setExpression(et)}}return!1})}resetExpression(){this._setExpression(this.defaultExpression)}restoreExpression(){this._setExpression(this.currentExpression)}setExpression(_){return __async(this,null,function*(){if(typeof _!="number"&&(_=this.getExpressionIndex(_)),!(_>-1&&_<this.definitions.length)||_===this.expressions.indexOf(this.currentExpression))return!1;this.reserveExpressionIndex=_;const et=yield this.loadExpression(_);return!et||this.reserveExpressionIndex!==_?!1:(this.reserveExpressionIndex=-1,this.currentExpression=et,this._setExpression(et),!0)})}update(_,et){return this.isFinished()?!1:this.updateParameters(_,et)}destroy(){this.destroyed=!0,this.emit("destroy");const _=this;_.definitions=void 0,_.expressions=void 0}}const EPSILON=.01,MAX_SPEED=40/7.5,ACCELERATION_TIME=1/(.15*1e3);class FocusController{constructor(){__publicField(this,"targetX",0),__publicField(this,"targetY",0),__publicField(this,"x",0),__publicField(this,"y",0),__publicField(this,"vx",0),__publicField(this,"vy",0)}focus(_,et,tt=!1){this.targetX=clamp(_,-1,1),this.targetY=clamp(et,-1,1),tt&&(this.x=this.targetX,this.y=this.targetY)}update(_){const et=this.targetX-this.x,tt=this.targetY-this.y;if(Math.abs(et)<EPSILON&&Math.abs(tt)<EPSILON)return;const rt=Math.sqrt(__pow(et,2)+__pow(tt,2)),it=MAX_SPEED/(1e3/_);let st=it*(et/rt)-this.vx,at=it*(tt/rt)-this.vy;const ct=Math.sqrt(__pow(st,2)+__pow(at,2)),ut=it*ACCELERATION_TIME*_;ct>ut&&(st*=ut/ct,at*=ut/ct),this.vx+=st,this.vy+=at;const dt=Math.sqrt(__pow(this.vx,2)+__pow(this.vy,2)),ot=.5*(Math.sqrt(__pow(ut,2)+8*ut*rt)-ut);dt>ot&&(this.vx*=ot/dt,this.vy*=ot/dt),this.x+=this.vx,this.y+=this.vy}}class ModelSettings{constructor(_){__publicField(this,"json"),__publicField(this,"name"),__publicField(this,"url"),__publicField(this,"pose"),__publicField(this,"physics"),this.json=_;const et=_.url;if(typeof et!="string")throw new TypeError("The `url` field in settings JSON must be defined as a string.");this.url=et,this.name=folderName(this.url)}resolveURL(_){return url.resolve(this.url,_)}replaceFiles(_){this.moc=_(this.moc,"moc"),this.pose!==void 0&&(this.pose=_(this.pose,"pose")),this.physics!==void 0&&(this.physics=_(this.physics,"physics"));for(let et=0;et<this.textures.length;et++)this.textures[et]=_(this.textures[et],`textures[${et}]`)}getDefinedFiles(){const _=[];return this.replaceFiles(et=>(_.push(et),et)),_}validateFiles(_){const et=(it,st)=>{const at=this.resolveURL(it);if(!_.includes(at)){if(st)throw new Error(`File "${it}" is defined in settings, but doesn't exist in given files`);return!1}return!0};return[this.moc,...this.textures].forEach(it=>et(it,!0)),this.getDefinedFiles().filter(it=>et(it,!1))}}var MotionPriority=(_e=>(_e[_e.NONE=0]="NONE",_e[_e.IDLE=1]="IDLE",_e[_e.NORMAL=2]="NORMAL",_e[_e.FORCE=3]="FORCE",_e))(MotionPriority||{});class MotionState{constructor(){__publicField(this,"tag"),__publicField(this,"debug",!1),__publicField(this,"currentPriority",0),__publicField(this,"reservePriority",0),__publicField(this,"currentGroup"),__publicField(this,"currentIndex"),__publicField(this,"reservedGroup"),__publicField(this,"reservedIndex"),__publicField(this,"reservedIdleGroup"),__publicField(this,"reservedIdleIndex")}reserve(_,et,tt){if(tt<=0)return logger.log(this.tag,"Cannot start a motion with MotionPriority.NONE."),!1;if(_===this.currentGroup&&et===this.currentIndex)return logger.log(this.tag,"Motion is already playing.",this.dump(_,et)),!1;if(_===this.reservedGroup&&et===this.reservedIndex||_===this.reservedIdleGroup&&et===this.reservedIdleIndex)return logger.log(this.tag,"Motion is already reserved.",this.dump(_,et)),!1;if(tt===1){if(this.currentPriority!==0)return logger.log(this.tag,"Cannot start idle motion because another motion is playing.",this.dump(_,et)),!1;if(this.reservedIdleGroup!==void 0)return logger.log(this.tag,"Cannot start idle motion because another idle motion has reserved.",this.dump(_,et)),!1;this.setReservedIdle(_,et)}else{if(tt<3){if(tt<=this.currentPriority)return logger.log(this.tag,"Cannot start motion because another motion is playing as an equivalent or higher priority.",this.dump(_,et)),!1;if(tt<=this.reservePriority)return logger.log(this.tag,"Cannot start motion because another motion has reserved as an equivalent or higher priority.",this.dump(_,et)),!1}this.setReserved(_,et,tt)}return!0}start(_,et,tt,rt){if(rt===1){if(this.setReservedIdle(void 0,void 0),this.currentPriority!==0)return logger.log(this.tag,"Cannot start idle motion because another motion is playing.",this.dump(et,tt)),!1}else{if(et!==this.reservedGroup||tt!==this.reservedIndex)return logger.log(this.tag,"Cannot start motion because another motion has taken the place.",this.dump(et,tt)),!1;this.setReserved(void 0,void 0,0)}return _?(this.setCurrent(et,tt,rt),!0):!1}complete(){this.setCurrent(void 0,void 0,0)}setCurrent(_,et,tt){this.currentPriority=tt,this.currentGroup=_,this.currentIndex=et}setReserved(_,et,tt){this.reservePriority=tt,this.reservedGroup=_,this.reservedIndex=et}setReservedIdle(_,et){this.reservedIdleGroup=_,this.reservedIdleIndex=et}isActive(_,et){return _===this.currentGroup&&et===this.currentIndex||_===this.reservedGroup&&et===this.reservedIndex||_===this.reservedIdleGroup&&et===this.reservedIdleIndex}reset(){this.setCurrent(void 0,void 0,0),this.setReserved(void 0,void 0,0),this.setReservedIdle(void 0,void 0)}shouldRequestIdleMotion(){return this.currentGroup===void 0&&this.reservedIdleGroup===void 0}shouldOverrideExpression(){return!1}dump(_,et){if(this.debug){const tt=["currentPriority","reservePriority","currentGroup","currentIndex","reservedGroup","reservedIndex","reservedIdleGroup","reservedIdleIndex"];return`
<Requested> group = "${_}", index = ${et}
`+tt.map(rt=>"["+rt+"] "+this[rt]).join(`
`)}return""}}const TAG$2="SoundManager",VOLUME=.5;class SoundManager{static get volume(){return this._volume}static set volume(_){this._volume=(_>1?1:_<0?0:_)||0,this.audios.forEach(et=>et.volume=this._volume)}static add(_,et,tt,rt){const it=new Audio(_);return it.volume=this._volume,it.preload="auto",it.crossOrigin=rt,it.addEventListener("ended",()=>{this.dispose(it),et==null||et()}),it.addEventListener("error",st=>{this.dispose(it),logger.warn(TAG$2,`Error occurred on "${_}"`,st.error),tt==null||tt(st.error)}),this.audios.push(it),it}static play(_){return new Promise((et,tt)=>{var rt;(rt=_.play())==null||rt.catch(it=>{_.dispatchEvent(new ErrorEvent("error",{error:it})),tt(it)}),_.readyState===_.HAVE_ENOUGH_DATA?et():_.addEventListener("canplaythrough",et)})}static addContext(_){const et=new AudioContext;return this.contexts.push(et),et}static addAnalyzer(_,et){const tt=et.createMediaElementSource(_),rt=et.createAnalyser();return rt.fftSize=256,rt.minDecibels=-90,rt.maxDecibels=-10,rt.smoothingTimeConstant=.85,tt.connect(rt),rt.connect(et.destination),this.analysers.push(rt),rt}static analyze(_){if(_!=null){const et=new Float32Array(_.fftSize);let tt=0;_.getFloatTimeDomainData(et);for(const rt of et)tt+=rt*rt;return parseFloat(Math.sqrt(tt/et.length*20).toFixed(1))}else return parseFloat(Math.random().toFixed(1))}static dispose(_){_.pause(),_.removeAttribute("src"),remove(this.audios,_)}static destroy(){for(let _=this.contexts.length-1;_>=0;_--)this.contexts[_].close();for(let _=this.audios.length-1;_>=0;_--)this.dispose(this.audios[_])}}__publicField(SoundManager,"audios",[]);__publicField(SoundManager,"analysers",[]);__publicField(SoundManager,"contexts",[]);__publicField(SoundManager,"_volume",VOLUME);var MotionPreloadStrategy=(_e=>(_e.ALL="ALL",_e.IDLE="IDLE",_e.NONE="NONE",_e))(MotionPreloadStrategy||{});class MotionManager extends EventEmitter{constructor(_,et){super(),__publicField(this,"tag"),__publicField(this,"settings"),__publicField(this,"motionGroups",{}),__publicField(this,"state",new MotionState),__publicField(this,"currentAudio"),__publicField(this,"currentAnalyzer"),__publicField(this,"currentContext"),__publicField(this,"playing",!1),__publicField(this,"destroyed",!1),this.settings=_,this.tag=`MotionManager(${_.name})`,this.state.tag=this.tag}init(_){_!=null&&_.idleMotionGroup&&(this.groups.idle=_.idleMotionGroup),this.setupMotions(_),this.stopAllMotions()}setupMotions(_){for(const tt of Object.keys(this.definitions))this.motionGroups[tt]=[];let et;switch(_==null?void 0:_.motionPreload){case"NONE":return;case"ALL":et=Object.keys(this.definitions);break;case"IDLE":default:et=[this.groups.idle];break}for(const tt of et)if(this.definitions[tt])for(let rt=0;rt<this.definitions[tt].length;rt++)this.loadMotion(tt,rt).then()}loadMotion(_,et){return __async(this,null,function*(){var tt;if(!((tt=this.definitions[_])!=null&&tt[et])){logger.warn(this.tag,`Undefined motion at "${_}"[${et}]`);return}if(this.motionGroups[_][et]===null){logger.warn(this.tag,`Cannot start motion at "${_}"[${et}] because it's already failed in loading.`);return}if(this.motionGroups[_][et])return this.motionGroups[_][et];const rt=yield this._loadMotion(_,et);if(!this.destroyed)return this.motionGroups[_][et]=rt??null,rt})}_loadMotion(_,et){throw new Error("Not implemented.")}speak(_){return __async(this,arguments,function*(et,{volume:tt=VOLUME,expression:rt,resetExpression:it=!0,crossOrigin:st,onFinish:at,onError:ct}={}){let ut,dt,ot;if(this.currentAudio&&!this.currentAudio.ended)return!1;let nt;const lt=et&&et.startsWith("data:");if(console.log(at),et&&!lt){const ft=document.createElement("a");ft.href=et,et=ft.href,nt=et}else nt="data:audio/";const ht=et;if(ht)try{ut=SoundManager.add(ht,(ft=this)=>{console.log("Audio finished playing"),at==null||at(),it&&rt&&ft.expressionManager&&ft.expressionManager.resetExpression(),ft.currentAudio=void 0},(ft,gt=this)=>{console.log("Error during audio playback:",ft),ct==null||ct(ft),it&&rt&&gt.expressionManager&&gt.expressionManager.resetExpression(),gt.currentAudio=void 0},st),this.currentAudio=ut,SoundManager.volume=tt,ot=SoundManager.addContext(this.currentAudio),this.currentContext=ot,dt=SoundManager.addAnalyzer(this.currentAudio,this.currentContext),this.currentAnalyzer=dt}catch(ft){return logger.warn(this.tag,"Failed to create audio",nt,ft),!1}if(ut){let ft=!0;if(yield SoundManager.play(ut).catch(mt=>{logger.warn(this.tag,"Failed to play audio",ut.src,mt),ft=!1}),!ft)return!1}return this.state.shouldOverrideExpression()&&this.expressionManager&&this.expressionManager.resetExpression(),rt&&this.expressionManager&&this.expressionManager.setExpression(rt),this.playing=!0,!0})}startMotion(_,et){return __async(this,arguments,function*(tt,rt,it=MotionPriority.NORMAL,{sound:st=void 0,volume:at=VOLUME,expression:ct=void 0,resetExpression:ut=!0,crossOrigin:dt,onFinish:ot,onError:nt}={}){var lt;if(!this.state.reserve(tt,rt,it)||this.currentAudio&&!this.currentAudio.ended&&it!=MotionPriority.FORCE)return!1;const ht=(lt=this.definitions[tt])==null?void 0:lt[rt];if(!ht)return!1;this.currentAudio&&SoundManager.dispose(this.currentAudio);let ft,gt,mt,yt;const bt=st&&st.startsWith("data:");if(st&&!bt){const xt=document.createElement("a");xt.href=st,st=xt.href,yt=st}else yt=this.getSoundFile(ht),yt&&(yt=this.settings.resolveURL(yt));const _t=yt;if(_t)try{ft=SoundManager.add(_t,(xt=this)=>{console.log("Audio finished playing"),ot==null||ot(),console.log(ot),ut&&ct&&xt.expressionManager&&xt.expressionManager.resetExpression(),xt.currentAudio=void 0},(xt,wt=this)=>{console.log("Error during audio playback:",xt),nt==null||nt(xt),ut&&ct&&wt.expressionManager&&wt.expressionManager.resetExpression(),wt.currentAudio=void 0},dt),this.currentAudio=ft,SoundManager.volume=at,mt=SoundManager.addContext(this.currentAudio),this.currentContext=mt,gt=SoundManager.addAnalyzer(this.currentAudio,this.currentContext),this.currentAnalyzer=gt}catch(xt){logger.warn(this.tag,"Failed to create audio",yt,xt)}const vt=yield this.loadMotion(tt,rt);return ft&&(yield SoundManager.play(ft).catch(wt=>logger.warn(this.tag,"Failed to play audio",ft.src,wt))),this.state.start(vt,tt,rt,it)?(this.state.shouldOverrideExpression()&&this.expressionManager&&this.expressionManager.resetExpression(),logger.log(this.tag,"Start motion:",this.getMotionName(ht)),this.emit("motionStart",tt,rt,ft),ct&&this.expressionManager&&this.state.shouldOverrideExpression()&&this.expressionManager.setExpression(ct),this.playing=!0,this._startMotion(vt),!0):(ft&&(SoundManager.dispose(ft),this.currentAudio=void 0),!1)})}startRandomMotion(_,et){return __async(this,arguments,function*(tt,rt,{sound:it,volume:st=VOLUME,expression:at,resetExpression:ct=!0,crossOrigin:ut,onFinish:dt,onError:ot}={}){const nt=this.definitions[tt];if(nt!=null&&nt.length){const lt=[];for(let ht=0;ht<nt.length;ht++)this.motionGroups[tt][ht]!==null&&!this.state.isActive(tt,ht)&&lt.push(ht);if(lt.length){const ht=lt[Math.floor(Math.random()*lt.length)];return this.startMotion(tt,ht,rt,{sound:it,volume:st,expression:at,resetExpression:ct,crossOrigin:ut,onFinish:dt,onError:ot})}}return!1})}stopSpeaking(){this.currentAudio&&(SoundManager.dispose(this.currentAudio),this.currentAudio=void 0)}stopAllMotions(){this._stopAllMotions(),this.state.reset(),this.stopSpeaking()}update(_,et){var tt;return this.isFinished()&&(this.playing&&(this.playing=!1,this.emit("motionFinish")),this.state.shouldOverrideExpression()&&((tt=this.expressionManager)==null||tt.restoreExpression()),this.state.complete(),this.state.shouldRequestIdleMotion()&&this.startRandomMotion(this.groups.idle,MotionPriority.IDLE)),this.updateParameters(_,et)}mouthSync(){return this.currentAnalyzer?SoundManager.analyze(this.currentAnalyzer):0}destroy(){var _;this.destroyed=!0,this.emit("destroy"),this.stopAllMotions(),(_=this.expressionManager)==null||_.destroy();const et=this;et.definitions=void 0,et.motionGroups=void 0}}const tempBounds={x:0,y:0,width:0,height:0};class InternalModel extends EventEmitter{constructor(){super(...arguments),__publicField(this,"focusController",new FocusController),__publicField(this,"pose"),__publicField(this,"physics"),__publicField(this,"originalWidth",0),__publicField(this,"originalHeight",0),__publicField(this,"width",0),__publicField(this,"height",0),__publicField(this,"localTransform",new Matrix),__publicField(this,"drawingMatrix",new Matrix),__publicField(this,"hitAreas",{}),__publicField(this,"textureFlipY",!1),__publicField(this,"viewport",[0,0,0,0]),__publicField(this,"destroyed",!1)}init(){this.setupLayout(),this.setupHitAreas()}setupLayout(){const _=this,et=this.getSize();_.originalWidth=et[0],_.originalHeight=et[1];const tt=Object.assign({width:LOGICAL_WIDTH,height:LOGICAL_HEIGHT},this.getLayout());this.localTransform.scale(tt.width/LOGICAL_WIDTH,tt.height/LOGICAL_HEIGHT),_.width=this.originalWidth*this.localTransform.a,_.height=this.originalHeight*this.localTransform.d;const rt=tt.x!==void 0&&tt.x-tt.width/2||tt.centerX!==void 0&&tt.centerX||tt.left!==void 0&&tt.left-tt.width/2||tt.right!==void 0&&tt.right+tt.width/2||0,it=tt.y!==void 0&&tt.y-tt.height/2||tt.centerY!==void 0&&tt.centerY||tt.top!==void 0&&tt.top-tt.height/2||tt.bottom!==void 0&&tt.bottom+tt.height/2||0;this.localTransform.translate(this.width*rt,-this.height*it)}setupHitAreas(){const _=this.getHitAreaDefs().filter(et=>et.index>=0);for(const et of _)this.hitAreas[et.name]=et}hitTest(_,et){return Object.keys(this.hitAreas).filter(tt=>this.isHit(tt,_,et))}isHit(_,et,tt){if(!this.hitAreas[_])return!1;const rt=this.hitAreas[_].index,it=this.getDrawableBounds(rt,tempBounds);return it.x<=et&&et<=it.x+it.width&&it.y<=tt&&tt<=it.y+it.height}getDrawableBounds(_,et){const tt=this.getDrawableVertices(_);let rt=tt[0],it=tt[0],st=tt[1],at=tt[1];for(let ct=0;ct<tt.length;ct+=2){const ut=tt[ct],dt=tt[ct+1];rt=Math.min(ut,rt),it=Math.max(ut,it),st=Math.min(dt,st),at=Math.max(dt,at)}return et??(et={}),et.x=rt,et.y=st,et.width=it-rt,et.height=at-st,et}updateTransform(_){this.drawingMatrix.copyFrom(_).append(this.localTransform)}update(_,et){this.focusController.update(_)}destroy(){this.destroyed=!0,this.emit("destroy"),this.motionManager.destroy(),this.motionManager=void 0}}const TAG$1="XHRLoader";class NetworkError extends Error{constructor(_,et,tt,rt=!1){super(_),this.url=et,this.status=tt,this.aborted=rt}}const _XHRLoader=class qr{static createXHR(_,et,tt,rt,it){const st=new XMLHttpRequest;if(qr.allXhrSet.add(st),_){let at=qr.xhrMap.get(_);at?at.add(st):(at=new Set([st]),qr.xhrMap.set(_,at)),_.listeners("destroy").includes(qr.cancelXHRs)||_.once("destroy",qr.cancelXHRs)}return st.open("GET",et),st.responseType=tt,st.onload=()=>{(st.status===200||st.status===0)&&st.response?rt(st.response):st.onerror()},st.onerror=()=>{logger.warn(TAG$1,`Failed to load resource as ${st.responseType} (Status ${st.status}): ${et}`),it(new NetworkError("Network error.",et,st.status))},st.onabort=()=>it(new NetworkError("Aborted.",et,st.status,!0)),st.onloadend=()=>{var at;qr.allXhrSet.delete(st),_&&((at=qr.xhrMap.get(_))==null||at.delete(st))},st}static cancelXHRs(){var _;(_=qr.xhrMap.get(this))==null||_.forEach(et=>{et.abort(),qr.allXhrSet.delete(et)}),qr.xhrMap.delete(this)}static release(){qr.allXhrSet.forEach(_=>_.abort()),qr.allXhrSet.clear(),qr.xhrMap=new WeakMap}};__publicField(_XHRLoader,"xhrMap",new WeakMap);__publicField(_XHRLoader,"allXhrSet",new Set);__publicField(_XHRLoader,"loader",(_e,_)=>new Promise((et,tt)=>{_XHRLoader.createXHR(_e.target,_e.settings?_e.settings.resolveURL(_e.url):_e.url,_e.type,it=>{_e.result=it,et()},tt).send()}));let XHRLoader=_XHRLoader;function runMiddlewares(_e,_){let et=-1;return tt(0);function tt(rt,it){if(it)return Promise.reject(it);if(rt<=et)return Promise.reject(new Error("next() called multiple times"));et=rt;const st=_e[rt];if(!st)return Promise.resolve();try{return Promise.resolve(st(_,tt.bind(null,rt+1)))}catch(at){return Promise.reject(at)}}}class Live2DLoader{static load(_){return runMiddlewares(this.middlewares,_).then(()=>_.result)}}__publicField(Live2DLoader,"middlewares",[XHRLoader.loader]);function createTexture(_e,_={}){var et;const tt={resourceOptions:{crossorigin:_.crossOrigin}};if(Texture.fromURL)return Texture.fromURL(_e,tt).catch(st=>{if(st instanceof Error)throw st;const at=new Error("Texture loading error");throw at.event=st,at});tt.resourceOptions.autoLoad=!1;const rt=Texture.from(_e,tt);if(rt.baseTexture.valid)return Promise.resolve(rt);const it=rt.baseTexture.resource;return(et=it._live2d_load)!=null||(it._live2d_load=new Promise((st,at)=>{const ct=ut=>{it.source.removeEventListener("error",ct);const dt=new Error("Texture loading error");dt.event=ut,at(dt)};it.source.addEventListener("error",ct),it.load().then(()=>st(rt)).catch(ct)})),it._live2d_load}function noop(){}const TAG="Live2DFactory",urlToJSON=(_e,_)=>__async(void 0,null,function*(){if(typeof _e.source=="string"){const et=yield Live2DLoader.load({url:_e.source,type:"json",target:_e.live2dModel});et.url=_e.source,_e.source=et,_e.live2dModel.emit("settingsJSONLoaded",et)}return _()}),jsonToSettings=(_e,_)=>__async(void 0,null,function*(){if(_e.source instanceof ModelSettings)return _e.settings=_e.source,_();if(typeof _e.source=="object"){const et=Live2DFactory.findRuntime(_e.source);if(et){const tt=et.createModelSettings(_e.source);return _e.settings=tt,_e.live2dModel.emit("settingsLoaded",tt),_()}}throw new TypeError("Unknown settings format.")}),waitUntilReady=(_e,_)=>{if(_e.settings){const et=Live2DFactory.findRuntime(_e.settings);if(et)return et.ready().then(_)}return _()},setupOptionals=(_e,_)=>__async(void 0,null,function*(){yield _();const et=_e.internalModel;if(et){const tt=_e.settings,rt=Live2DFactory.findRuntime(tt);if(rt){const it=[];tt.pose&&it.push(Live2DLoader.load({settings:tt,url:tt.pose,type:"json",target:et}).then(st=>{et.pose=rt.createPose(et.coreModel,st),_e.live2dModel.emit("poseLoaded",et.pose)}).catch(st=>{_e.live2dModel.emit("poseLoadError",st),logger.warn(TAG,"Failed to load pose.",st)})),tt.physics&&it.push(Live2DLoader.load({settings:tt,url:tt.physics,type:"json",target:et}).then(st=>{et.physics=rt.createPhysics(et.coreModel,st),_e.live2dModel.emit("physicsLoaded",et.physics)}).catch(st=>{_e.live2dModel.emit("physicsLoadError",st),logger.warn(TAG,"Failed to load physics.",st)})),it.length&&(yield Promise.all(it))}}}),setupEssentials=(_e,_)=>__async(void 0,null,function*(){if(_e.settings){const et=_e.live2dModel,tt=Promise.all(_e.settings.textures.map(rt=>{const it=_e.settings.resolveURL(rt);return createTexture(it,{crossOrigin:_e.options.crossOrigin})}));if(tt.catch(noop),yield _(),_e.internalModel)et.internalModel=_e.internalModel,et.emit("modelLoaded",_e.internalModel);else throw new TypeError("Missing internal model.");et.textures=yield tt,et.emit("textureLoaded",et.textures)}else throw new TypeError("Missing settings.")}),createInternalModel=(_e,_)=>__async(void 0,null,function*(){const et=_e.settings;if(et instanceof ModelSettings){const tt=Live2DFactory.findRuntime(et);if(!tt)throw new TypeError("Unknown model settings.");const rt=yield Live2DLoader.load({settings:et,url:et.moc,type:"arraybuffer",target:_e.live2dModel});if(!tt.isValidMoc(rt))throw new Error("Invalid moc data");const it=tt.createCoreModel(rt);return _e.internalModel=tt.createInternalModel(it,et,_e.options),_()}throw new TypeError("Missing settings.")}),_ZipLoader=class En{static unzip(_,et){return __async(this,null,function*(){const tt=yield En.getFilePaths(_),rt=[];for(const st of et.getDefinedFiles()){const at=decodeURI(url.resolve(et.url,st));tt.includes(at)&&rt.push(at)}const it=yield En.getFiles(_,rt);for(let st=0;st<it.length;st++){const at=rt[st],ct=it[st];Object.defineProperty(ct,"webkitRelativePath",{value:at})}return it})}static createSettings(_){return __async(this,null,function*(){const tt=(yield En.getFilePaths(_)).find(at=>at.endsWith("model.json")||at.endsWith("model3.json"));if(!tt)throw new Error("Settings file not found");const rt=yield En.readText(_,tt);if(!rt)throw new Error("Empty settings file: "+tt);const it=JSON.parse(rt);it.url=tt;const st=En.live2dFactory.findRuntime(it);if(!st)throw new Error("Unknown settings JSON");return st.createModelSettings(it)})}static zipReader(_,et){return __async(this,null,function*(){throw new Error("Not implemented")})}static getFilePaths(_){return __async(this,null,function*(){throw new Error("Not implemented")})}static getFiles(_,et){return __async(this,null,function*(){throw new Error("Not implemented")})}static readText(_,et){return __async(this,null,function*(){throw new Error("Not implemented")})}static releaseReader(_){}};__publicField(_ZipLoader,"live2dFactory");__publicField(_ZipLoader,"ZIP_PROTOCOL","zip://");__publicField(_ZipLoader,"uid",0);__publicField(_ZipLoader,"factory",(_e,_)=>__async(_ZipLoader,null,function*(){const et=_e.source;let tt,rt,it;if(typeof et=="string"&&(et.endsWith(".zip")||et.startsWith(_ZipLoader.ZIP_PROTOCOL))?(et.startsWith(_ZipLoader.ZIP_PROTOCOL)?tt=et.slice(_ZipLoader.ZIP_PROTOCOL.length):tt=et,rt=yield Live2DLoader.load({url:tt,type:"blob",target:_e.live2dModel})):Array.isArray(et)&&et.length===1&&et[0]instanceof File&&et[0].name.endsWith(".zip")&&(rt=et[0],tt=URL.createObjectURL(rt),it=et.settings),rt){if(!rt.size)throw new Error("Empty zip file");const st=yield _ZipLoader.zipReader(rt,tt);it||(it=yield _ZipLoader.createSettings(st)),it._objectURL=_ZipLoader.ZIP_PROTOCOL+_ZipLoader.uid+"/"+it.url;const at=yield _ZipLoader.unzip(st,it);at.settings=it,_e.source=at,tt.startsWith("blob:")&&_e.live2dModel.once("modelLoaded",ct=>{ct.once("destroy",function(){URL.revokeObjectURL(tt)})}),_ZipLoader.releaseReader(st)}return _()}));let ZipLoader=_ZipLoader;const _FileLoader=class ns{static resolveURL(_,et){var tt;const rt=(tt=ns.filesMap[_])==null?void 0:tt[et];if(rt===void 0)throw new Error("Cannot find this file from uploaded files: "+et);return rt}static upload(_,et){return __async(this,null,function*(){const tt={};for(const rt of et.getDefinedFiles()){const it=decodeURI(url.resolve(et.url,rt)),st=_.find(at=>at.webkitRelativePath===it);st&&(tt[rt]=URL.createObjectURL(st))}ns.filesMap[et._objectURL]=tt})}static createSettings(_){return __async(this,null,function*(){const et=_.find(at=>at.name.endsWith("model.json")||at.name.endsWith("model3.json"));if(!et)throw new TypeError("Settings file not found");const tt=yield ns.readText(et),rt=JSON.parse(tt);rt.url=et.webkitRelativePath;const it=Live2DFactory.findRuntime(rt);if(!it)throw new Error("Unknown settings JSON");const st=it.createModelSettings(rt);return st._objectURL=URL.createObjectURL(et),st})}static readText(_){return __async(this,null,function*(){return new Promise((et,tt)=>{const rt=new FileReader;rt.onload=()=>et(rt.result),rt.onerror=tt,rt.readAsText(_,"utf8")})})}};__publicField(_FileLoader,"live2dFactory");__publicField(_FileLoader,"filesMap",{});__publicField(_FileLoader,"factory",(_e,_)=>__async(_FileLoader,null,function*(){if(Array.isArray(_e.source)&&_e.source[0]instanceof File){const et=_e.source;let tt=et.settings;if(!tt)tt=yield _FileLoader.createSettings(et);else if(!tt._objectURL)throw new Error('"_objectURL" must be specified in ModelSettings');tt.validateFiles(et.map(rt=>encodeURI(rt.webkitRelativePath))),yield _FileLoader.upload(et,tt),tt.resolveURL=function(rt){return _FileLoader.resolveURL(this._objectURL,rt)},_e.source=tt,_e.live2dModel.once("modelLoaded",rt=>{rt.once("destroy",function(){const it=this.settings._objectURL;if(URL.revokeObjectURL(it),_FileLoader.filesMap[it])for(const st of Object.values(_FileLoader.filesMap[it]))URL.revokeObjectURL(st);delete _FileLoader.filesMap[it]})})}return _()}));let FileLoader=_FileLoader;const _Live2DFactory=class Vr{static registerRuntime(_){Vr.runtimes.push(_),Vr.runtimes.sort((et,tt)=>tt.version-et.version)}static findRuntime(_){for(const et of Vr.runtimes)if(et.test(_))return et}static setupLive2DModel(_,et,tt){return __async(this,null,function*(){const rt=new Promise(at=>_.once("textureLoaded",at)),it=new Promise(at=>_.once("modelLoaded",at)),st=Promise.all([rt,it]).then(()=>_.emit("ready"));yield runMiddlewares(Vr.live2DModelMiddlewares,{live2dModel:_,source:et,options:tt||{}}),yield st,_.emit("load")})}static loadMotion(_,et,tt){var rt,it;const st=at=>_.emit("motionLoadError",et,tt,at);try{const at=(rt=_.definitions[et])==null?void 0:rt[tt];if(!at)return Promise.resolve(void 0);_.listeners("destroy").includes(Vr.releaseTasks)||_.once("destroy",Vr.releaseTasks);let ct=Vr.motionTasksMap.get(_);ct||(ct={},Vr.motionTasksMap.set(_,ct));let ut=ct[et];ut||(ut=[],ct[et]=ut);const dt=_.getMotionFile(at);return(it=ut[tt])!=null||(ut[tt]=Live2DLoader.load({url:dt,settings:_.settings,type:_.motionDataType,target:_}).then(ot=>{var nt;const lt=(nt=Vr.motionTasksMap.get(_))==null?void 0:nt[et];lt&&delete lt[tt];const ht=_.createMotion(ot,et,at);return _.emit("motionLoaded",et,tt,ht),ht}).catch(ot=>{logger.warn(_.tag,`Failed to load motion: ${dt}
`,ot),st(ot)})),ut[tt]}catch(at){logger.warn(_.tag,`Failed to load motion at "${et}"[${tt}]
`,at),st(at)}return Promise.resolve(void 0)}static loadExpression(_,et){var tt;const rt=it=>_.emit("expressionLoadError",et,it);try{const it=_.definitions[et];if(!it)return Promise.resolve(void 0);_.listeners("destroy").includes(Vr.releaseTasks)||_.once("destroy",Vr.releaseTasks);let st=Vr.expressionTasksMap.get(_);st||(st=[],Vr.expressionTasksMap.set(_,st));const at=_.getExpressionFile(it);return(tt=st[et])!=null||(st[et]=Live2DLoader.load({url:at,settings:_.settings,type:"json",target:_}).then(ct=>{const ut=Vr.expressionTasksMap.get(_);ut&&delete ut[et];const dt=_.createExpression(ct,it);return _.emit("expressionLoaded",et,dt),dt}).catch(ct=>{logger.warn(_.tag,`Failed to load expression: ${at}
`,ct),rt(ct)})),st[et]}catch(it){logger.warn(_.tag,`Failed to load expression at [${et}]
`,it),rt(it)}return Promise.resolve(void 0)}static releaseTasks(){this instanceof MotionManager?Vr.motionTasksMap.delete(this):Vr.expressionTasksMap.delete(this)}};__publicField(_Live2DFactory,"runtimes",[]);__publicField(_Live2DFactory,"urlToJSON",urlToJSON);__publicField(_Live2DFactory,"jsonToSettings",jsonToSettings);__publicField(_Live2DFactory,"waitUntilReady",waitUntilReady);__publicField(_Live2DFactory,"setupOptionals",setupOptionals);__publicField(_Live2DFactory,"setupEssentials",setupEssentials);__publicField(_Live2DFactory,"createInternalModel",createInternalModel);__publicField(_Live2DFactory,"live2DModelMiddlewares",[ZipLoader.factory,FileLoader.factory,urlToJSON,jsonToSettings,waitUntilReady,setupOptionals,setupEssentials,createInternalModel]);__publicField(_Live2DFactory,"motionTasksMap",new WeakMap);__publicField(_Live2DFactory,"expressionTasksMap",new WeakMap);let Live2DFactory=_Live2DFactory;MotionManager.prototype._loadMotion=function(_e,_){return Live2DFactory.loadMotion(this,_e,_)};ExpressionManager.prototype._loadExpression=function(_e){return Live2DFactory.loadExpression(this,_e)};FileLoader.live2dFactory=Live2DFactory;ZipLoader.live2dFactory=Live2DFactory;const _Automator=class ys{constructor(_,{autoUpdate:et=!0,autoHitTest:tt=!0,autoFocus:rt=!0,autoInteract:it,ticker:st}={}){__publicField(this,"model"),__publicField(this,"destroyed",!1),__publicField(this,"_ticker"),__publicField(this,"_autoUpdate",!1),__publicField(this,"_autoHitTest",!1),__publicField(this,"_autoFocus",!1),st||(ys.defaultTicker?st=ys.defaultTicker:typeof PIXI<"u"&&(st=PIXI.Ticker.shared)),it!==void 0&&(tt=it,rt=it,logger.warn(_.tag,"options.autoInteract is deprecated since v0.5.0, use autoHitTest and autoFocus instead.")),this.model=_,this.ticker=st,this.autoUpdate=et,this.autoHitTest=tt,this.autoFocus=rt,(tt||rt)&&(this.model.eventMode="static")}get ticker(){return this._ticker}set ticker(_){var et;this._ticker&&this._ticker.remove(onTickerUpdate,this),this._ticker=_,this._autoUpdate&&((et=this._ticker)==null||et.add(onTickerUpdate,this))}get autoUpdate(){return this._autoUpdate}set autoUpdate(_){var et;this.destroyed||(_?this._ticker?(this._ticker.add(onTickerUpdate,this),this._autoUpdate=!0):logger.warn(this.model.tag,"No Ticker to be used for automatic updates. Either set option.ticker when creating Live2DModel, or expose PIXI to global scope (window.PIXI = PIXI)."):((et=this._ticker)==null||et.remove(onTickerUpdate,this),this._autoUpdate=!1))}get autoHitTest(){return this._autoHitTest}set autoHitTest(_){_!==this.autoHitTest&&(_?this.model.on("pointertap",onTap,this):this.model.off("pointertap",onTap,this),this._autoHitTest=_)}get autoFocus(){return this._autoFocus}set autoFocus(_){_!==this.autoFocus&&(_?this.model.on("globalpointermove",onPointerMove,this):this.model.off("globalpointermove",onPointerMove,this),this._autoFocus=_)}get autoInteract(){return this._autoHitTest&&this._autoFocus}set autoInteract(_){this.autoHitTest=_,this.autoFocus=_}onTickerUpdate(){const _=this.ticker.deltaMS;this.model.update(_)}onTap(_){this.model.tap(_.global.x,_.global.y)}onPointerMove(_){this.model.focus(_.global.x,_.global.y)}destroy(){this.autoFocus=!1,this.autoHitTest=!1,this.autoUpdate=!1,this.ticker=void 0,this.destroyed=!0}};__publicField(_Automator,"defaultTicker");let Automator=_Automator;function onTickerUpdate(){this.onTickerUpdate()}function onTap(_e){this.onTap(_e)}function onPointerMove(_e){this.onPointerMove(_e)}class Live2DTransform extends Transform{}const tempPoint=new Point,tempMatrix$1=new Matrix;class Live2DModel extends Container{constructor(_){super(),__publicField(this,"tag","Live2DModel(uninitialized)"),__publicField(this,"internalModel"),__publicField(this,"textures",[]),__publicField(this,"transform",new Live2DTransform),__publicField(this,"anchor",new ObservablePoint(this.onAnchorChange,this,0,0)),__publicField(this,"glContextID",-1),__publicField(this,"elapsedTime",0),__publicField(this,"deltaTime",0),__publicField(this,"automator"),this.automator=new Automator(this,_),this.once("modelLoaded",()=>this.init(_))}static from(_,et){const tt=new this(et);return Live2DFactory.setupLive2DModel(tt,_,et).then(()=>tt)}static fromSync(_,et){const tt=new this(et);return Live2DFactory.setupLive2DModel(tt,_,et).then(et==null?void 0:et.onLoad).catch(et==null?void 0:et.onError),tt}static registerTicker(_){Automator.defaultTicker=_.shared}init(_){this.tag=`Live2DModel(${this.internalModel.settings.name})`}onAnchorChange(){this.pivot.set(this.anchor.x*this.internalModel.width,this.anchor.y*this.internalModel.height)}motion(_,et,tt,{sound:rt=void 0,volume:it=VOLUME,expression:st=void 0,resetExpression:at=!0,crossOrigin:ct,onFinish:ut,onError:dt}={}){return et===void 0?this.internalModel.motionManager.startRandomMotion(_,tt,{sound:rt,volume:it,expression:st,resetExpression:at,crossOrigin:ct,onFinish:ut,onError:dt}):this.internalModel.motionManager.startMotion(_,et,tt,{sound:rt,volume:it,expression:st,resetExpression:at,crossOrigin:ct,onFinish:ut,onError:dt})}stopMotions(){return this.internalModel.motionManager.stopAllMotions()}speak(_,{volume:et=VOLUME,expression:tt,resetExpression:rt=!0,crossOrigin:it,onFinish:st,onError:at}={}){return this.internalModel.motionManager.speak(_,{volume:et,expression:tt,resetExpression:rt,crossOrigin:it,onFinish:st,onError:at})}stopSpeaking(){return this.internalModel.motionManager.stopSpeaking()}expression(_){return this.internalModel.motionManager.expressionManager?_===void 0?this.internalModel.motionManager.expressionManager.setRandomExpression():this.internalModel.motionManager.expressionManager.setExpression(_):Promise.resolve(!1)}focus(_,et,tt=!1){tempPoint.x=_,tempPoint.y=et,this.toModelPosition(tempPoint,tempPoint,!0);const rt=tempPoint.x/this.internalModel.originalWidth*2-1,it=tempPoint.y/this.internalModel.originalHeight*2-1,st=Math.atan2(it,rt);this.internalModel.focusController.focus(Math.cos(st),-Math.sin(st),tt)}tap(_,et){const tt=this.hitTest(_,et);tt.length&&(logger.log(this.tag,"Hit",tt),this.emit("hit",tt))}hitTest(_,et){return tempPoint.x=_,tempPoint.y=et,this.toModelPosition(tempPoint,tempPoint),this.internalModel.hitTest(tempPoint.x,tempPoint.y)}toModelPosition(_,et=_.clone(),tt){return tt||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.transform.worldTransform.applyInverse(_,et),this.internalModel.localTransform.applyInverse(et,et),et}containsPoint(_){return this.getBounds(!0).contains(_.x,_.y)}_calculateBounds(){this._bounds.addFrame(this.transform,0,0,this.internalModel.width,this.internalModel.height)}update(_){this.deltaTime+=_,this.elapsedTime+=_}_render(_){_.batch.reset(),_.geometry.reset(),_.shader.reset(),_.state.reset();let et=!1;this.glContextID!==_.CONTEXT_UID&&(this.glContextID=_.CONTEXT_UID,this.internalModel.updateWebGLContext(_.gl,this.glContextID),et=!0);for(let it=0;it<this.textures.length;it++){const st=this.textures[it];st.valid&&((et||!st.baseTexture._glTextures[this.glContextID])&&(_.gl.pixelStorei(WebGLRenderingContext.UNPACK_FLIP_Y_WEBGL,this.internalModel.textureFlipY),_.texture.bind(st.baseTexture,0)),this.internalModel.bindTexture(it,st.baseTexture._glTextures[this.glContextID].texture),st.baseTexture.touched=_.textureGC.count)}const tt=_.framebuffer.viewport;this.internalModel.viewport=[tt.x,tt.y,tt.width,tt.height],this.deltaTime&&(this.internalModel.update(this.deltaTime,this.elapsedTime),this.deltaTime=0);const rt=tempMatrix$1.copyFrom(_.globalUniforms.uniforms.projectionMatrix).append(this.worldTransform);this.internalModel.updateTransform(rt),this.internalModel.draw(_.gl),_.state.reset(),_.texture.reset()}destroy(_){this.emit("destroy"),_!=null&&_.texture&&this.textures.forEach(et=>et.destroy(_.baseTexture)),this.automator.destroy(),this.internalModel.destroy(),super.destroy(_)}}if(!window.Live2D)throw new Error("Could not find Cubism 2 runtime. This plugin requires live2d.min.js to be loaded.");const originalUpdateParam=Live2DMotion.prototype.updateParam;Live2DMotion.prototype.updateParam=function(_e,_){originalUpdateParam.call(this,_e,_),_.isFinished()&&this.onFinishHandler&&(this.onFinishHandler(this),delete this.onFinishHandler)};class Live2DExpression extends AMotion{constructor(_){super(),__publicField(this,"params",[]),this.setFadeIn(_.fade_in>0?_.fade_in:config.expressionFadingDuration),this.setFadeOut(_.fade_out>0?_.fade_out:config.expressionFadingDuration),Array.isArray(_.params)&&_.params.forEach(et=>{const tt=et.calc||"add";if(tt==="add"){const rt=et.def||0;et.val-=rt}else if(tt==="mult"){const rt=et.def||1;et.val/=rt}this.params.push({calc:tt,val:et.val,id:et.id})})}updateParamExe(_,et,tt,rt){this.params.forEach(it=>{_.setParamFloat(it.id,it.val*tt)})}}class Cubism2ExpressionManager extends ExpressionManager{constructor(_,et){var tt;super(_,et),__publicField(this,"queueManager",new MotionQueueManager),__publicField(this,"definitions"),this.definitions=(tt=this.settings.expressions)!=null?tt:[],this.init()}isFinished(){return this.queueManager.isFinished()}getExpressionIndex(_){return this.definitions.findIndex(et=>et.name===_)}getExpressionFile(_){return _.file}createExpression(_,et){return new Live2DExpression(_)}_setExpression(_){return this.queueManager.startMotion(_)}stopAllExpressions(){this.queueManager.stopAllMotions()}updateParameters(_,et){return this.queueManager.updateParam(_)}}class Cubism2MotionManager extends MotionManager{constructor(_,et){super(_,et),__publicField(this,"definitions"),__publicField(this,"groups",{idle:"idle"}),__publicField(this,"motionDataType","arraybuffer"),__publicField(this,"queueManager",new MotionQueueManager),__publicField(this,"lipSyncIds"),__publicField(this,"expressionManager"),this.definitions=this.settings.motions,this.init(et),this.lipSyncIds=["PARAM_MOUTH_OPEN_Y"]}init(_){super.init(_),this.settings.expressions&&(this.expressionManager=new Cubism2ExpressionManager(this.settings,_))}isFinished(){return this.queueManager.isFinished()}createMotion(_,et,tt){const rt=Live2DMotion.loadMotion(_),it=et===this.groups.idle?config.idleMotionFadingDuration:config.motionFadingDuration;return rt.setFadeIn(tt.fade_in>0?tt.fade_in:it),rt.setFadeOut(tt.fade_out>0?tt.fade_out:it),rt}getMotionFile(_){return _.file}getMotionName(_){return _.file}getSoundFile(_){return _.sound}_startMotion(_,et){return _.onFinishHandler=et,this.queueManager.stopAllMotions(),this.queueManager.startMotion(_)}_stopAllMotions(){this.queueManager.stopAllMotions()}updateParameters(_,et){return this.queueManager.updateParam(_)}destroy(){super.destroy(),this.queueManager=void 0}}class Live2DEyeBlink{constructor(_){__publicField(this,"leftParam"),__publicField(this,"rightParam"),__publicField(this,"blinkInterval",4e3),__publicField(this,"closingDuration",100),__publicField(this,"closedDuration",50),__publicField(this,"openingDuration",150),__publicField(this,"eyeState",0),__publicField(this,"eyeParamValue",1),__publicField(this,"closedTimer",0),__publicField(this,"nextBlinkTimeLeft",this.blinkInterval),this.coreModel=_,this.leftParam=_.getParamIndex("PARAM_EYE_L_OPEN"),this.rightParam=_.getParamIndex("PARAM_EYE_R_OPEN")}setEyeParams(_){this.eyeParamValue=clamp(_,0,1),this.coreModel.setParamFloat(this.leftParam,this.eyeParamValue),this.coreModel.setParamFloat(this.rightParam,this.eyeParamValue)}update(_){switch(this.eyeState){case 0:this.nextBlinkTimeLeft-=_,this.nextBlinkTimeLeft<0&&(this.eyeState=1,this.nextBlinkTimeLeft=this.blinkInterval+this.closingDuration+this.closedDuration+this.openingDuration+rand(0,2e3));break;case 1:this.setEyeParams(this.eyeParamValue+_/this.closingDuration),this.eyeParamValue<=0&&(this.eyeState=2,this.closedTimer=0);break;case 2:this.closedTimer+=_,this.closedTimer>=this.closedDuration&&(this.eyeState=3);break;case 3:this.setEyeParams(this.eyeParamValue+_/this.openingDuration),this.eyeParamValue>=1&&(this.eyeState=0)}}}const tempMatrixArray=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class Cubism2InternalModel extends InternalModel{constructor(_,et,tt){super(),__publicField(this,"settings"),__publicField(this,"coreModel"),__publicField(this,"motionManager"),__publicField(this,"eyeBlink"),__publicField(this,"eyeballXParamIndex"),__publicField(this,"eyeballYParamIndex"),__publicField(this,"angleXParamIndex"),__publicField(this,"angleYParamIndex"),__publicField(this,"angleZParamIndex"),__publicField(this,"bodyAngleXParamIndex"),__publicField(this,"breathParamIndex"),__publicField(this,"textureFlipY",!0),__publicField(this,"lipSync",!0),__publicField(this,"drawDataCount",0),__publicField(this,"disableCulling",!1),__publicField(this,"hasDrawn",!1),this.coreModel=_,this.settings=et,this.motionManager=new Cubism2MotionManager(et,tt),this.eyeBlink=new Live2DEyeBlink(_),this.eyeballXParamIndex=_.getParamIndex("PARAM_EYE_BALL_X"),this.eyeballYParamIndex=_.getParamIndex("PARAM_EYE_BALL_Y"),this.angleXParamIndex=_.getParamIndex("PARAM_ANGLE_X"),this.angleYParamIndex=_.getParamIndex("PARAM_ANGLE_Y"),this.angleZParamIndex=_.getParamIndex("PARAM_ANGLE_Z"),this.bodyAngleXParamIndex=_.getParamIndex("PARAM_BODY_ANGLE_X"),this.breathParamIndex=_.getParamIndex("PARAM_BREATH"),this.init()}init(){super.init(),this.settings.initParams&&this.settings.initParams.forEach(({id:it,value:st})=>this.coreModel.setParamFloat(it,st)),this.settings.initOpacities&&this.settings.initOpacities.forEach(({id:it,value:st})=>this.coreModel.setPartsOpacity(it,st)),this.coreModel.saveParam();const _=this.coreModel.getModelContext()._$aS;_!=null&&_.length&&(this.drawDataCount=_.length);let et=this.coreModel.drawParamWebGL.culling;Object.defineProperty(this.coreModel.drawParamWebGL,"culling",{set:it=>et=it,get:()=>this.disableCulling?!1:et});const tt=this.coreModel.getModelContext().clipManager,rt=tt.setupClip;tt.setupClip=(it,st)=>{rt.call(tt,it,st),st.gl.viewport(...this.viewport)}}getSize(){return[this.coreModel.getCanvasWidth(),this.coreModel.getCanvasHeight()]}getLayout(){const _={};if(this.settings.layout)for(const[et,tt]of Object.entries(this.settings.layout)){let rt=et;et==="center_x"?rt="centerX":et==="center_y"&&(rt="centerY"),_[rt]=tt}return _}updateWebGLContext(_,et){const tt=this.coreModel.drawParamWebGL;tt.firstDraw=!0,tt.setGL(_),tt.glno=et;for(const[st,at]of Object.entries(tt))at instanceof WebGLBuffer&&(tt[st]=null);const rt=this.coreModel.getModelContext().clipManager;rt.curFrameNo=et;const it=_.getParameter(_.FRAMEBUFFER_BINDING);rt.getMaskRenderTexture(),_.bindFramebuffer(_.FRAMEBUFFER,it)}bindTexture(_,et){this.coreModel.setTexture(_,et)}getHitAreaDefs(){var _;return((_=this.settings.hitAreas)==null?void 0:_.map(et=>({id:et.id,name:et.name,index:this.coreModel.getDrawDataIndex(et.id)})))||[]}getDrawableIDs(){const _=this.coreModel.getModelContext(),et=[];for(let tt=0;tt<this.drawDataCount;tt++){const rt=_.getDrawData(tt);rt&&et.push(rt.getDrawDataID().id)}return et}getDrawableIndex(_){return this.coreModel.getDrawDataIndex(_)}getDrawableVertices(_){if(typeof _=="string"&&(_=this.coreModel.getDrawDataIndex(_),_===-1))throw new TypeError("Unable to find drawable ID: "+_);return this.coreModel.getTransformedPoints(_).slice()}hitTest(_,et){return this.hasDrawn||logger.warn("Trying to hit-test a Cubism 2 model that has not been rendered yet. The result will always be empty since the draw data is not ready."),super.hitTest(_,et)}update(_,et){var tt,rt,it,st;super.update(_,et);const at=this.coreModel;this.emit("beforeMotionUpdate");const ct=this.motionManager.update(this.coreModel,et);if(this.emit("afterMotionUpdate"),at.saveParam(),(tt=this.motionManager.expressionManager)==null||tt.update(at,et),ct||(rt=this.eyeBlink)==null||rt.update(_),this.updateFocus(),this.updateNaturalMovements(_,et),this.lipSync&&this.motionManager.currentAudio){let ut=this.motionManager.mouthSync(),dt=0;const ot=1,nt=1.2,lt=.7;ut>0&&(dt=.4),ut=Math.pow(ut,lt),ut=clamp(ut*nt,dt,ot);for(let ht=0;ht<this.motionManager.lipSyncIds.length;++ht)this.coreModel.setParamFloat(this.coreModel.getParamIndex(this.motionManager.lipSyncIds[ht]),ut)}(it=this.physics)==null||it.update(et),(st=this.pose)==null||st.update(_),this.emit("beforeModelUpdate"),at.update(),at.loadParam()}updateFocus(){this.coreModel.addToParamFloat(this.eyeballXParamIndex,this.focusController.x),this.coreModel.addToParamFloat(this.eyeballYParamIndex,this.focusController.y),this.coreModel.addToParamFloat(this.angleXParamIndex,this.focusController.x*30),this.coreModel.addToParamFloat(this.angleYParamIndex,this.focusController.y*30),this.coreModel.addToParamFloat(this.angleZParamIndex,this.focusController.x*this.focusController.y*-30),this.coreModel.addToParamFloat(this.bodyAngleXParamIndex,this.focusController.x*10)}updateNaturalMovements(_,et){const tt=et/1e3*2*Math.PI;this.coreModel.addToParamFloat(this.angleXParamIndex,15*Math.sin(tt/6.5345)*.5),this.coreModel.addToParamFloat(this.angleYParamIndex,8*Math.sin(tt/3.5345)*.5),this.coreModel.addToParamFloat(this.angleZParamIndex,10*Math.sin(tt/5.5345)*.5),this.coreModel.addToParamFloat(this.bodyAngleXParamIndex,4*Math.sin(tt/15.5345)*.5),this.coreModel.setParamFloat(this.breathParamIndex,.5+.5*Math.sin(tt/3.2345))}draw(_){const et=this.disableCulling;_.getParameter(_.FRAMEBUFFER_BINDING)&&(this.disableCulling=!0);const tt=this.drawingMatrix;tempMatrixArray[0]=tt.a,tempMatrixArray[1]=tt.b,tempMatrixArray[4]=tt.c,tempMatrixArray[5]=tt.d,tempMatrixArray[12]=tt.tx,tempMatrixArray[13]=tt.ty,this.coreModel.setMatrix(tempMatrixArray),this.coreModel.draw(),this.hasDrawn=!0,this.disableCulling=et}destroy(){super.destroy(),this.coreModel=void 0}}class Cubism2ModelSettings extends ModelSettings{constructor(_){if(super(_),__publicField(this,"moc"),__publicField(this,"textures"),__publicField(this,"layout"),__publicField(this,"hitAreas"),__publicField(this,"initParams"),__publicField(this,"initOpacities"),__publicField(this,"expressions"),__publicField(this,"motions",{}),!Cubism2ModelSettings.isValidJSON(_))throw new TypeError("Invalid JSON.");this.moc=_.model,copyArray("string",_,this,"textures","textures"),this.copy(_)}static isValidJSON(_){var et;return!!_&&typeof _.model=="string"&&((et=_.textures)==null?void 0:et.length)>0&&_.textures.every(tt=>typeof tt=="string")}copy(_){copyProperty("string",_,this,"name","name"),copyProperty("string",_,this,"pose","pose"),copyProperty("string",_,this,"physics","physics"),copyProperty("object",_,this,"layout","layout"),copyProperty("object",_,this,"motions","motions"),copyArray("object",_,this,"hit_areas","hitAreas"),copyArray("object",_,this,"expressions","expressions"),copyArray("object",_,this,"init_params","initParams"),copyArray("object",_,this,"init_opacities","initOpacities")}replaceFiles(_){super.replaceFiles(_);for(const[et,tt]of Object.entries(this.motions))for(let rt=0;rt<tt.length;rt++)tt[rt].file=_(tt[rt].file,`motions.${et}[${rt}].file`),tt[rt].sound!==void 0&&(tt[rt].sound=_(tt[rt].sound,`motions.${et}[${rt}].sound`));if(this.expressions)for(let et=0;et<this.expressions.length;et++)this.expressions[et].file=_(this.expressions[et].file,`expressions[${et}].file`)}}const SRC_TYPE_MAP={x:PhysicsHair.Src.SRC_TO_X,y:PhysicsHair.Src.SRC_TO_Y,angle:PhysicsHair.Src.SRC_TO_G_ANGLE},TARGET_TYPE_MAP={x:PhysicsHair.Src.SRC_TO_X,y:PhysicsHair.Src.SRC_TO_Y,angle:PhysicsHair.Src.SRC_TO_G_ANGLE};class Live2DPhysics{constructor(_,et){__publicField(this,"physicsHairs",[]),this.coreModel=_,et.physics_hair&&(this.physicsHairs=et.physics_hair.map(tt=>{const rt=new PhysicsHair;return rt.setup(tt.setup.length,tt.setup.regist,tt.setup.mass),tt.src.forEach(({id:it,ptype:st,scale:at,weight:ct})=>{const ut=SRC_TYPE_MAP[st];ut&&rt.addSrcParam(ut,it,at,ct)}),tt.targets.forEach(({id:it,ptype:st,scale:at,weight:ct})=>{const ut=TARGET_TYPE_MAP[st];ut&&rt.addTargetParam(ut,it,at,ct)}),rt}))}update(_){this.physicsHairs.forEach(et=>et.update(this.coreModel,_))}}class Live2DPartsParam{constructor(_){__publicField(this,"paramIndex",-1),__publicField(this,"partsIndex",-1),__publicField(this,"link",[]),this.id=_}initIndex(_){this.paramIndex=_.getParamIndex("VISIBLE:"+this.id),this.partsIndex=_.getPartsDataIndex(PartsDataID.getID(this.id)),_.setParamFloat(this.paramIndex,1)}}class Live2DPose{constructor(_,et){__publicField(this,"opacityAnimDuration",500),__publicField(this,"partsGroups",[]),this.coreModel=_,et.parts_visible&&(this.partsGroups=et.parts_visible.map(({group:tt})=>tt.map(({id:rt,link:it})=>{const st=new Live2DPartsParam(rt);return it&&(st.link=it.map(at=>new Live2DPartsParam(at))),st})),this.init())}init(){this.partsGroups.forEach(_=>{_.forEach(et=>{if(et.initIndex(this.coreModel),et.paramIndex>=0){const tt=this.coreModel.getParamFloat(et.paramIndex)!==0;this.coreModel.setPartsOpacity(et.partsIndex,tt?1:0),this.coreModel.setParamFloat(et.paramIndex,tt?1:0),et.link.length>0&&et.link.forEach(rt=>rt.initIndex(this.coreModel))}})})}normalizePartsOpacityGroup(_,et){const tt=this.coreModel,rt=.5,it=.15;let st=1,at=_.findIndex(({paramIndex:ct,partsIndex:ut})=>ut>=0&&tt.getParamFloat(ct)!==0);if(at>=0){const ct=tt.getPartsOpacity(_[at].partsIndex);st=clamp(ct+et/this.opacityAnimDuration,0,1)}else at=0,st=1;_.forEach(({partsIndex:ct},ut)=>{if(ct>=0)if(at==ut)tt.setPartsOpacity(ct,st);else{let dt=tt.getPartsOpacity(ct),ot;st<rt?ot=st*(rt-1)/rt+1:ot=(1-st)*rt/(1-rt),(1-ot)*(1-st)>it&&(ot=1-it/(1-st)),dt>ot&&(dt=ot),tt.setPartsOpacity(ct,dt)}})}copyOpacity(_){const et=this.coreModel;_.forEach(({partsIndex:tt,link:rt})=>{if(tt>=0&&rt){const it=et.getPartsOpacity(tt);rt.forEach(({partsIndex:st})=>{st>=0&&et.setPartsOpacity(st,it)})}})}update(_){this.partsGroups.forEach(et=>{this.normalizePartsOpacityGroup(et,_),this.copyOpacity(et)})}}Live2DFactory.registerRuntime({version:2,test(_e){return _e instanceof Cubism2ModelSettings||Cubism2ModelSettings.isValidJSON(_e)},ready(){return Promise.resolve()},isValidMoc(_e){if(_e.byteLength<3)return!1;const _=new Int8Array(_e,0,3);return String.fromCharCode(..._)==="moc"},createModelSettings(_e){return new Cubism2ModelSettings(_e)},createCoreModel(_e){const _=Live2DModelWebGL.loadModel(_e),et=Live2D.getError();if(et)throw et;return _},createInternalModel(_e,_,et){return new Cubism2InternalModel(_e,_,et)},createPose(_e,_){return new Live2DPose(_e,_)},createPhysics(_e,_){return new Live2DPhysics(_e,_)}});if(!window.Live2DCubismCore)throw new Error("Could not find Cubism 4 runtime. This plugin requires live2dcubismcore.js to be loaded.");class CubismVector2{constructor(_,et){this.x=_||0,this.y=et||0}add(_){const et=new CubismVector2(0,0);return et.x=this.x+_.x,et.y=this.y+_.y,et}substract(_){const et=new CubismVector2(0,0);return et.x=this.x-_.x,et.y=this.y-_.y,et}multiply(_){const et=new CubismVector2(0,0);return et.x=this.x*_.x,et.y=this.y*_.y,et}multiplyByScaler(_){return this.multiply(new CubismVector2(_,_))}division(_){const et=new CubismVector2(0,0);return et.x=this.x/_.x,et.y=this.y/_.y,et}divisionByScalar(_){return this.division(new CubismVector2(_,_))}getLength(){return Math.sqrt(this.x*this.x+this.y*this.y)}getDistanceWith(_){return Math.sqrt((this.x-_.x)*(this.x-_.x)+(this.y-_.y)*(this.y-_.y))}dot(_){return this.x*_.x+this.y*_.y}normalize(){const _=Math.pow(this.x*this.x+this.y*this.y,.5);this.x=this.x/_,this.y=this.y/_}isEqual(_){return this.x==_.x&&this.y==_.y}isNotEqual(_){return!this.isEqual(_)}}const _CubismMath=class is{static range(_,et,tt){return _<et?_=et:_>tt&&(_=tt),_}static sin(_){return Math.sin(_)}static cos(_){return Math.cos(_)}static abs(_){return Math.abs(_)}static sqrt(_){return Math.sqrt(_)}static cbrt(_){if(_===0)return _;let et=_;const tt=et<0;tt&&(et=-et);let rt;return et===1/0?rt=1/0:(rt=Math.exp(Math.log(et)/3),rt=(et/(rt*rt)+2*rt)/3),tt?-rt:rt}static getEasingSine(_){return _<0?0:_>1?1:.5-.5*this.cos(_*Math.PI)}static max(_,et){return _>et?_:et}static min(_,et){return _>et?et:_}static degreesToRadian(_){return _/180*Math.PI}static radianToDegrees(_){return _*180/Math.PI}static directionToRadian(_,et){const tt=Math.atan2(et.y,et.x),rt=Math.atan2(_.y,_.x);let it=tt-rt;for(;it<-Math.PI;)it+=Math.PI*2;for(;it>Math.PI;)it-=Math.PI*2;return it}static directionToDegrees(_,et){const tt=this.directionToRadian(_,et);let rt=this.radianToDegrees(tt);return et.x-_.x>0&&(rt=-rt),rt}static radianToDirection(_){const et=new CubismVector2;return et.x=this.sin(_),et.y=this.cos(_),et}static quadraticEquation(_,et,tt){return this.abs(_)<is.Epsilon?this.abs(et)<is.Epsilon?-tt:-tt/et:-(et+this.sqrt(et*et-4*_*tt))/(2*_)}static cardanoAlgorithmForBezier(_,et,tt,rt){if(this.sqrt(_)<is.Epsilon)return this.range(this.quadraticEquation(et,tt,rt),0,1);const it=et/_,st=tt/_,at=rt/_,ct=(3*st-it*it)/3,ut=ct/3,dt=(2*it*it*it-9*it*st+27*at)/27,ot=dt/2,nt=ot*ot+ut*ut*ut,lt=.5,ht=lt+.01;if(nt<0){const bt=-ct/3,_t=bt*bt*bt,vt=this.sqrt(_t),xt=-dt/(2*vt),wt=this.range(xt,-1,1),Tt=Math.acos(wt),Et=2*this.cbrt(vt),Ot=Et*this.cos(Tt/3)-it/3;if(this.abs(Ot-lt)<ht)return this.range(Ot,0,1);const Rt=Et*this.cos((Tt+2*Math.PI)/3)-it/3;if(this.abs(Rt-lt)<ht)return this.range(Rt,0,1);const Pt=Et*this.cos((Tt+4*Math.PI)/3)-it/3;return this.range(Pt,0,1)}if(nt==0){let bt;ot<0?bt=this.cbrt(-ot):bt=-this.cbrt(ot);const _t=2*bt-it/3;if(this.abs(_t-lt)<ht)return this.range(_t,0,1);const vt=-bt-it/3;return this.range(vt,0,1)}const ft=this.sqrt(nt),gt=this.cbrt(ft-ot),mt=this.cbrt(ft+ot),yt=gt-mt-it/3;return this.range(yt,0,1)}constructor(){}};_CubismMath.Epsilon=1e-5;let CubismMath=_CubismMath;class CubismMatrix44{constructor(){this._tr=new Float32Array(16),this.loadIdentity()}static multiply(_,et,tt){const rt=new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),it=4;for(let st=0;st<it;++st)for(let at=0;at<it;++at)for(let ct=0;ct<it;++ct)rt[at+st*4]+=_[ct+st*4]*et[at+ct*4];for(let st=0;st<16;++st)tt[st]=rt[st]}loadIdentity(){const _=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);this.setMatrix(_)}setMatrix(_){for(let et=0;et<16;++et)this._tr[et]=_[et]}getArray(){return this._tr}getScaleX(){return this._tr[0]}getScaleY(){return this._tr[5]}getTranslateX(){return this._tr[12]}getTranslateY(){return this._tr[13]}transformX(_){return this._tr[0]*_+this._tr[12]}transformY(_){return this._tr[5]*_+this._tr[13]}invertTransformX(_){return(_-this._tr[12])/this._tr[0]}invertTransformY(_){return(_-this._tr[13])/this._tr[5]}translateRelative(_,et){const tt=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,_,et,0,1]);CubismMatrix44.multiply(tt,this._tr,this._tr)}translate(_,et){this._tr[12]=_,this._tr[13]=et}translateX(_){this._tr[12]=_}translateY(_){this._tr[13]=_}scaleRelative(_,et){const tt=new Float32Array([_,0,0,0,0,et,0,0,0,0,1,0,0,0,0,1]);CubismMatrix44.multiply(tt,this._tr,this._tr)}scale(_,et){this._tr[0]=_,this._tr[5]=et}multiplyByMatrix(_){CubismMatrix44.multiply(_.getArray(),this._tr,this._tr)}clone(){const _=new CubismMatrix44;for(let et=0;et<this._tr.length;et++)_._tr[et]=this._tr[et];return _}}class CubismRenderer{initialize(_){this._model=_}drawModel(){this.getModel()!=null&&(this.saveProfile(),this.doDrawModel(),this.restoreProfile())}setMvpMatrix(_){this._mvpMatrix4x4.setMatrix(_.getArray())}getMvpMatrix(){return this._mvpMatrix4x4}setModelColor(_,et,tt,rt){_<0?_=0:_>1&&(_=1),et<0?et=0:et>1&&(et=1),tt<0?tt=0:tt>1&&(tt=1),rt<0?rt=0:rt>1&&(rt=1),this._modelColor.R=_,this._modelColor.G=et,this._modelColor.B=tt,this._modelColor.A=rt}getModelColor(){return Object.assign({},this._modelColor)}setIsPremultipliedAlpha(_){this._isPremultipliedAlpha=_}isPremultipliedAlpha(){return this._isPremultipliedAlpha}setIsCulling(_){this._isCulling=_}isCulling(){return this._isCulling}setAnisotropy(_){this._anisotropy=_}getAnisotropy(){return this._anisotropy}getModel(){return this._model}useHighPrecisionMask(_){this._useHighPrecisionMask=_}isUsingHighPrecisionMask(){return this._useHighPrecisionMask}constructor(){this._isCulling=!1,this._isPremultipliedAlpha=!1,this._anisotropy=0,this._modelColor=new CubismTextureColor,this._useHighPrecisionMask=!1,this._mvpMatrix4x4=new CubismMatrix44,this._mvpMatrix4x4.loadIdentity()}}var CubismBlendMode=(_e=>(_e[_e.CubismBlendMode_Normal=0]="CubismBlendMode_Normal",_e[_e.CubismBlendMode_Additive=1]="CubismBlendMode_Additive",_e[_e.CubismBlendMode_Multiplicative=2]="CubismBlendMode_Multiplicative",_e))(CubismBlendMode||{});class CubismTextureColor{constructor(_=1,et=1,tt=1,rt=1){this.R=_,this.G=et,this.B=tt,this.A=rt}}let s_isStarted=!1,s_isInitialized=!1,s_option;const Constant={vertexOffset:0,vertexStep:2};class CubismFramework{static startUp(_){if(s_isStarted)return CubismLogInfo("CubismFramework.startUp() is already done."),s_isStarted;if(Live2DCubismCore._isStarted)return s_isStarted=!0,!0;if(Live2DCubismCore._isStarted=!0,s_option=_,s_option&&Live2DCubismCore.Logging.csmSetLogFunction(s_option.logFunction),s_isStarted=!0,s_isStarted){const et=Live2DCubismCore.Version.csmGetVersion(),tt=(et&4278190080)>>24,rt=(et&16711680)>>16,it=et&65535,st=et;CubismLogInfo("Live2D Cubism Core version: {0}.{1}.{2} ({3})",("00"+tt).slice(-2),("00"+rt).slice(-2),("0000"+it).slice(-4),st)}return CubismLogInfo("CubismFramework.startUp() is complete."),s_isStarted}static cleanUp(){s_isStarted=!1,s_isInitialized=!1,s_option=void 0}static initialize(_=0){if(!s_isStarted){CubismLogWarning("CubismFramework is not started.");return}if(s_isInitialized){CubismLogWarning("CubismFramework.initialize() skipped, already initialized.");return}Live2DCubismCore.Memory.initializeAmountOfMemory(_),s_isInitialized=!0,CubismLogInfo("CubismFramework.initialize() is complete.")}static dispose(){if(!s_isStarted){CubismLogWarning("CubismFramework is not started.");return}if(!s_isInitialized){CubismLogWarning("CubismFramework.dispose() skipped, not initialized.");return}CubismRenderer.staticRelease(),s_isInitialized=!1,CubismLogInfo("CubismFramework.dispose() is complete.")}static isStarted(){return s_isStarted}static isInitialized(){return s_isInitialized}static coreLogFunction(_){Live2DCubismCore.Logging.csmGetLogFunction()&&Live2DCubismCore.Logging.csmGetLogFunction()(_)}static getLoggingLevel(){return s_option!=null?s_option.loggingLevel:5}constructor(){}}var LogLevel=(_e=>(_e[_e.LogLevel_Verbose=0]="LogLevel_Verbose",_e[_e.LogLevel_Debug=1]="LogLevel_Debug",_e[_e.LogLevel_Info=2]="LogLevel_Info",_e[_e.LogLevel_Warning=3]="LogLevel_Warning",_e[_e.LogLevel_Error=4]="LogLevel_Error",_e[_e.LogLevel_Off=5]="LogLevel_Off",_e))(LogLevel||{});const CSM_ASSERT=typeof process<"u"?()=>{}:_e=>console.assert(_e);function CubismLogDebug(_e,..._){CubismDebug.print(LogLevel.LogLevel_Debug,"[CSM][D]"+_e+`
`,_)}function CubismLogInfo(_e,..._){CubismDebug.print(LogLevel.LogLevel_Info,"[CSM][I]"+_e+`
`,_)}function CubismLogWarning(_e,..._){CubismDebug.print(LogLevel.LogLevel_Warning,"[CSM][W]"+_e+`
`,_)}function CubismLogError(_e,..._){CubismDebug.print(LogLevel.LogLevel_Error,"[CSM][E]"+_e+`
`,_)}class CubismDebug{static print(_,et,tt){if(_<CubismFramework.getLoggingLevel())return;const rt=CubismFramework.coreLogFunction;if(!rt)return;const it=et.replace(/{(\d+)}/g,(st,at)=>tt[at]);rt(it)}static dumpBytes(_,et,tt){for(let rt=0;rt<tt;rt++)rt%16==0&&rt>0?this.print(_,`
`):rt%8==0&&rt>0&&this.print(_,"  "),this.print(_,"{0} ",[et[rt]&255]);this.print(_,`
`)}constructor(){}}class ACubismMotion{constructor(){this._fadeInSeconds=-1,this._fadeOutSeconds=-1,this._weight=1,this._offsetSeconds=0,this._firedEventValues=[]}release(){this._weight=0}updateParameters(_,et,tt){if(!et.isAvailable()||et.isFinished())return;if(!et.isStarted()){et.setIsStarted(!0),et.setStartTime(tt-this._offsetSeconds),et.setFadeInStartTime(tt);const at=this.getDuration();et.getEndTime()<0&&et.setEndTime(at<=0?-1:et.getStartTime()+at)}let rt=this._weight;const it=this._fadeInSeconds==0?1:CubismMath.getEasingSine((tt-et.getFadeInStartTime())/this._fadeInSeconds),st=this._fadeOutSeconds==0||et.getEndTime()<0?1:CubismMath.getEasingSine((et.getEndTime()-tt)/this._fadeOutSeconds);rt=rt*it*st,et.setState(tt,rt),CSM_ASSERT(0<=rt&&rt<=1),this.doUpdateParameters(_,tt,rt,et),et.getEndTime()>0&&et.getEndTime()<tt&&et.setIsFinished(!0)}setFadeInTime(_){this._fadeInSeconds=_}setFadeOutTime(_){this._fadeOutSeconds=_}getFadeOutTime(){return this._fadeOutSeconds}getFadeInTime(){return this._fadeInSeconds}setWeight(_){this._weight=_}getWeight(){return this._weight}getDuration(){return-1}getLoopDuration(){return-1}setOffsetTime(_){this._offsetSeconds=_}getFiredEvent(_,et){return this._firedEventValues}setFinishedMotionHandler(_){this._onFinishedMotion=_}getFinishedMotionHandler(){return this._onFinishedMotion}isExistModelOpacity(){return!1}getModelOpacityIndex(){return-1}getModelOpacityId(_){}getModelOpacityValue(){return 1}}const DefaultFadeTime=1;class CubismExpressionMotion extends ACubismMotion{static create(_){const et=new CubismExpressionMotion;return et.parse(_),et}doUpdateParameters(_,et,tt,rt){for(let it=0;it<this._parameters.length;++it){const st=this._parameters[it];switch(st.blendType){case 0:{_.addParameterValueById(st.parameterId,st.value,tt);break}case 1:{_.multiplyParameterValueById(st.parameterId,st.value,tt);break}case 2:{_.setParameterValueById(st.parameterId,st.value,tt);break}}}}parse(_){this.setFadeInTime(_.FadeInTime!=null?_.FadeInTime:DefaultFadeTime),this.setFadeOutTime(_.FadeOutTime!=null?_.FadeOutTime:DefaultFadeTime);const et=(_.Parameters||[]).length;for(let tt=0;tt<et;++tt){const rt=_.Parameters[tt],it=rt.Id,st=rt.Value;let at;!rt.Blend||rt.Blend==="Add"?at=0:rt.Blend==="Multiply"?at=1:rt.Blend==="Overwrite"?at=2:at=0;const ct={parameterId:it,blendType:at,value:st};this._parameters.push(ct)}}constructor(){super(),this._parameters=[]}}class CubismMotionQueueEntry{constructor(){this._autoDelete=!1,this._available=!0,this._finished=!1,this._started=!1,this._startTimeSeconds=-1,this._fadeInStartTimeSeconds=0,this._endTimeSeconds=-1,this._stateTimeSeconds=0,this._stateWeight=0,this._lastEventCheckSeconds=0,this._motionQueueEntryHandle=this,this._fadeOutSeconds=0,this._isTriggeredFadeOut=!1}release(){this._autoDelete&&this._motion&&this._motion.release()}setFadeOut(_){this._fadeOutSeconds=_,this._isTriggeredFadeOut=!0}startFadeOut(_,et){const tt=et+_;this._isTriggeredFadeOut=!0,(this._endTimeSeconds<0||tt<this._endTimeSeconds)&&(this._endTimeSeconds=tt)}isFinished(){return this._finished}isStarted(){return this._started}getStartTime(){return this._startTimeSeconds}getFadeInStartTime(){return this._fadeInStartTimeSeconds}getEndTime(){return this._endTimeSeconds}setStartTime(_){this._startTimeSeconds=_}setFadeInStartTime(_){this._fadeInStartTimeSeconds=_}setEndTime(_){this._endTimeSeconds=_}setIsFinished(_){this._finished=_}setIsStarted(_){this._started=_}isAvailable(){return this._available}setIsAvailable(_){this._available=_}setState(_,et){this._stateTimeSeconds=_,this._stateWeight=et}getStateTime(){return this._stateTimeSeconds}getStateWeight(){return this._stateWeight}getLastCheckEventSeconds(){return this._lastEventCheckSeconds}setLastCheckEventSeconds(_){this._lastEventCheckSeconds=_}isTriggeredFadeOut(){return this._isTriggeredFadeOut}getFadeOutSeconds(){return this._fadeOutSeconds}}class CubismMotionQueueManager{constructor(){this._userTimeSeconds=0,this._eventCustomData=null,this._motions=[]}release(){for(let _=0;_<this._motions.length;++_)this._motions[_]&&this._motions[_].release();this._motions=void 0}startMotion(_,et,tt){if(_==null)return InvalidMotionQueueEntryHandleValue;let rt;for(let it=0;it<this._motions.length;++it)rt=this._motions[it],rt!=null&&rt.setFadeOut(rt._motion.getFadeOutTime());return rt=new CubismMotionQueueEntry,rt._autoDelete=et,rt._motion=_,this._motions.push(rt),rt._motionQueueEntryHandle}isFinished(){let _=0;for(;_<this._motions.length;){const et=this._motions[_];if(et==null){this._motions.splice(_,1);continue}if(et._motion==null){et.release(),this._motions.splice(_,1);continue}if(!et.isFinished())return!1;_++}return!0}isFinishedByHandle(_){for(let et=0;et<this._motions.length;et++){const tt=this._motions[et];if(tt!=null&&tt._motionQueueEntryHandle==_&&!tt.isFinished())return!1}return!0}stopAllMotions(){for(let _=0;_<this._motions.length;_++){const et=this._motions[_];et!=null&&et.release()}this._motions=[]}getCubismMotionQueueEntry(_){return this._motions.find(et=>et!=null&&et._motionQueueEntryHandle==_)}setEventCallback(_,et=null){this._eventCallBack=_,this._eventCustomData=et}doUpdateMotion(_,et){let tt=!1,rt=0;for(;rt<this._motions.length;){const it=this._motions[rt];if(it==null){this._motions.splice(rt,1);continue}const st=it._motion;if(st==null){it.release(),this._motions.splice(rt,1);continue}st.updateParameters(_,it,et),tt=!0;const at=st.getFiredEvent(it.getLastCheckEventSeconds()-it.getStartTime(),et-it.getStartTime());for(let ct=0;ct<at.length;++ct)this._eventCallBack(this,at[ct],this._eventCustomData);it.setLastCheckEventSeconds(et),it.isFinished()?(it.release(),this._motions.splice(rt,1)):(it.isTriggeredFadeOut()&&it.startFadeOut(it.getFadeOutSeconds(),et),rt++)}return tt}}const InvalidMotionQueueEntryHandleValue=-1;class Cubism4ExpressionManager extends ExpressionManager{constructor(_,et){var tt;super(_,et),__publicField(this,"queueManager",new CubismMotionQueueManager),__publicField(this,"definitions"),this.definitions=(tt=_.expressions)!=null?tt:[],this.init()}isFinished(){return this.queueManager.isFinished()}getExpressionIndex(_){return this.definitions.findIndex(et=>et.Name===_)}getExpressionFile(_){return _.File}createExpression(_,et){return CubismExpressionMotion.create(_)}_setExpression(_){return this.queueManager.startMotion(_,!1,performance.now())}stopAllExpressions(){this.queueManager.stopAllMotions()}updateParameters(_,et){return this.queueManager.doUpdateMotion(_,et)}}var CubismMotionCurveTarget=(_e=>(_e[_e.CubismMotionCurveTarget_Model=0]="CubismMotionCurveTarget_Model",_e[_e.CubismMotionCurveTarget_Parameter=1]="CubismMotionCurveTarget_Parameter",_e[_e.CubismMotionCurveTarget_PartOpacity=2]="CubismMotionCurveTarget_PartOpacity",_e))(CubismMotionCurveTarget||{}),CubismMotionSegmentType=(_e=>(_e[_e.CubismMotionSegmentType_Linear=0]="CubismMotionSegmentType_Linear",_e[_e.CubismMotionSegmentType_Bezier=1]="CubismMotionSegmentType_Bezier",_e[_e.CubismMotionSegmentType_Stepped=2]="CubismMotionSegmentType_Stepped",_e[_e.CubismMotionSegmentType_InverseStepped=3]="CubismMotionSegmentType_InverseStepped",_e))(CubismMotionSegmentType||{});class CubismMotionPoint{constructor(_=0,et=0){this.time=_,this.value=et}}class CubismMotionSegment{constructor(){this.basePointIndex=0,this.segmentType=0}}class CubismMotionCurve{constructor(){this.id="",this.type=0,this.segmentCount=0,this.baseSegmentIndex=0,this.fadeInTime=0,this.fadeOutTime=0}}class CubismMotionEvent{constructor(){this.fireTime=0,this.value=""}}class CubismMotionData{constructor(){this.duration=0,this.loop=!1,this.curveCount=0,this.eventCount=0,this.fps=0,this.curves=[],this.segments=[],this.points=[],this.events=[]}}class CubismMotionJson{constructor(_){this._json=_}release(){this._json=void 0}getMotionDuration(){return this._json.Meta.Duration}isMotionLoop(){return this._json.Meta.Loop||!1}getEvaluationOptionFlag(_){return _==0?!!this._json.Meta.AreBeziersRestricted:!1}getMotionCurveCount(){return this._json.Meta.CurveCount}getMotionFps(){return this._json.Meta.Fps}getMotionTotalSegmentCount(){return this._json.Meta.TotalSegmentCount}getMotionTotalPointCount(){return this._json.Meta.TotalPointCount}getMotionFadeInTime(){return this._json.Meta.FadeInTime}getMotionFadeOutTime(){return this._json.Meta.FadeOutTime}getMotionCurveTarget(_){return this._json.Curves[_].Target}getMotionCurveId(_){return this._json.Curves[_].Id}getMotionCurveFadeInTime(_){return this._json.Curves[_].FadeInTime}getMotionCurveFadeOutTime(_){return this._json.Curves[_].FadeOutTime}getMotionCurveSegmentCount(_){return this._json.Curves[_].Segments.length}getMotionCurveSegment(_,et){return this._json.Curves[_].Segments[et]}getEventCount(){return this._json.Meta.UserDataCount||0}getTotalEventValueSize(){return this._json.Meta.TotalUserDataSize}getEventTime(_){return this._json.UserData[_].Time}getEventValue(_){return this._json.UserData[_].Value}}var EvaluationOptionFlag=(_e=>(_e[_e.EvaluationOptionFlag_AreBeziersRistricted=0]="EvaluationOptionFlag_AreBeziersRistricted",_e))(EvaluationOptionFlag||{});const EffectNameEyeBlink="EyeBlink",EffectNameLipSync="LipSync",TargetNameModel="Model",TargetNameParameter="Parameter",TargetNamePartOpacity="PartOpacity",IdNameOpacity="Opacity",UseOldBeziersCurveMotion=!1;function lerpPoints(_e,_,et){const tt=new CubismMotionPoint;return tt.time=_e.time+(_.time-_e.time)*et,tt.value=_e.value+(_.value-_e.value)*et,tt}function linearEvaluate(_e,_){let et=(_-_e[0].time)/(_e[1].time-_e[0].time);return et<0&&(et=0),_e[0].value+(_e[1].value-_e[0].value)*et}function bezierEvaluate(_e,_){let et=(_-_e[0].time)/(_e[3].time-_e[0].time);et<0&&(et=0);const tt=lerpPoints(_e[0],_e[1],et),rt=lerpPoints(_e[1],_e[2],et),it=lerpPoints(_e[2],_e[3],et),st=lerpPoints(tt,rt,et),at=lerpPoints(rt,it,et);return lerpPoints(st,at,et).value}function bezierEvaluateCardanoInterpretation(_e,_){const et=_,tt=_e[0].time,rt=_e[3].time,it=_e[1].time,st=_e[2].time,at=rt-3*st+3*it-tt,ct=3*st-6*it+3*tt,ut=3*it-3*tt,dt=tt-et,ot=CubismMath.cardanoAlgorithmForBezier(at,ct,ut,dt),nt=lerpPoints(_e[0],_e[1],ot),lt=lerpPoints(_e[1],_e[2],ot),ht=lerpPoints(_e[2],_e[3],ot),ft=lerpPoints(nt,lt,ot),gt=lerpPoints(lt,ht,ot);return lerpPoints(ft,gt,ot).value}function steppedEvaluate(_e,_){return _e[0].value}function inverseSteppedEvaluate(_e,_){return _e[1].value}function evaluateCurve(_e,_,et){const tt=_e.curves[_];let rt=-1;const it=tt.baseSegmentIndex+tt.segmentCount;let st=0;for(let ct=tt.baseSegmentIndex;ct<it;++ct)if(st=_e.segments[ct].basePointIndex+(_e.segments[ct].segmentType==CubismMotionSegmentType.CubismMotionSegmentType_Bezier?3:1),_e.points[st].time>et){rt=ct;break}if(rt==-1)return _e.points[st].value;const at=_e.segments[rt];return at.evaluate(_e.points.slice(at.basePointIndex),et)}class CubismMotion extends ACubismMotion{constructor(){super(),this._eyeBlinkParameterIds=[],this._lipSyncParameterIds=[],this._sourceFrameRate=30,this._loopDurationSeconds=-1,this._isLoop=!1,this._isLoopFadeIn=!0,this._lastWeight=0,this._modelOpacity=1}static create(_,et){const tt=new CubismMotion;return tt.parse(_),tt._sourceFrameRate=tt._motionData.fps,tt._loopDurationSeconds=tt._motionData.duration,tt._onFinishedMotion=et,tt}doUpdateParameters(_,et,tt,rt){this._modelCurveIdEyeBlink==null&&(this._modelCurveIdEyeBlink=EffectNameEyeBlink),this._modelCurveIdLipSync==null&&(this._modelCurveIdLipSync=EffectNameLipSync),this._modelCurveIdOpacity==null&&(this._modelCurveIdOpacity=IdNameOpacity);let it=et-rt.getStartTime();it<0&&(it=0);let st=Number.MAX_VALUE,at=Number.MAX_VALUE;const ct=64;let ut=0,dt=0;this._eyeBlinkParameterIds.length>ct&&CubismLogDebug("too many eye blink targets : {0}",this._eyeBlinkParameterIds.length),this._lipSyncParameterIds.length>ct&&CubismLogDebug("too many lip sync targets : {0}",this._lipSyncParameterIds.length);const ot=this._fadeInSeconds<=0?1:CubismMath.getEasingSine((et-rt.getFadeInStartTime())/this._fadeInSeconds),nt=this._fadeOutSeconds<=0||rt.getEndTime()<0?1:CubismMath.getEasingSine((rt.getEndTime()-et)/this._fadeOutSeconds);let lt,ht,ft,gt=it;if(this._isLoop)for(;gt>this._motionData.duration;)gt-=this._motionData.duration;const mt=this._motionData.curves;for(ht=0;ht<this._motionData.curveCount&&mt[ht].type==CubismMotionCurveTarget.CubismMotionCurveTarget_Model;++ht)lt=evaluateCurve(this._motionData,ht,gt),mt[ht].id==this._modelCurveIdEyeBlink?at=lt:mt[ht].id==this._modelCurveIdLipSync?st=lt:mt[ht].id==this._modelCurveIdOpacity&&(this._modelOpacity=lt,_.setModelOapcity(this.getModelOpacityValue()));for(;ht<this._motionData.curveCount&&mt[ht].type==CubismMotionCurveTarget.CubismMotionCurveTarget_Parameter;++ht){if(ft=_.getParameterIndex(mt[ht].id),ft==-1)continue;const yt=_.getParameterValueByIndex(ft);if(lt=evaluateCurve(this._motionData,ht,gt),at!=Number.MAX_VALUE){for(let _t=0;_t<this._eyeBlinkParameterIds.length&&_t<ct;++_t)if(this._eyeBlinkParameterIds[_t]==mt[ht].id){lt*=at,dt|=1<<_t;break}}if(st!=Number.MAX_VALUE){for(let _t=0;_t<this._lipSyncParameterIds.length&&_t<ct;++_t)if(this._lipSyncParameterIds[_t]==mt[ht].id){lt+=st,ut|=1<<_t;break}}let bt;if(mt[ht].fadeInTime<0&&mt[ht].fadeOutTime<0)bt=yt+(lt-yt)*tt;else{let _t,vt;mt[ht].fadeInTime<0?_t=ot:_t=mt[ht].fadeInTime==0?1:CubismMath.getEasingSine((et-rt.getFadeInStartTime())/mt[ht].fadeInTime),mt[ht].fadeOutTime<0?vt=nt:vt=mt[ht].fadeOutTime==0||rt.getEndTime()<0?1:CubismMath.getEasingSine((rt.getEndTime()-et)/mt[ht].fadeOutTime);const xt=this._weight*_t*vt;bt=yt+(lt-yt)*xt}_.setParameterValueByIndex(ft,bt,1)}{if(at!=Number.MAX_VALUE)for(let yt=0;yt<this._eyeBlinkParameterIds.length&&yt<ct;++yt){const bt=_.getParameterValueById(this._eyeBlinkParameterIds[yt]);if(dt>>yt&1)continue;const _t=bt+(at-bt)*tt;_.setParameterValueById(this._eyeBlinkParameterIds[yt],_t)}if(st!=Number.MAX_VALUE)for(let yt=0;yt<this._lipSyncParameterIds.length&&yt<ct;++yt){const bt=_.getParameterValueById(this._lipSyncParameterIds[yt]);if(ut>>yt&1)continue;const _t=bt+(st-bt)*tt;_.setParameterValueById(this._lipSyncParameterIds[yt],_t)}}for(;ht<this._motionData.curveCount&&mt[ht].type==CubismMotionCurveTarget.CubismMotionCurveTarget_PartOpacity;++ht)if(lt=evaluateCurve(this._motionData,ht,gt),CubismConfig.setOpacityFromMotion)_.setPartOpacityById(mt[ht].id,lt);else{if(ft=_.getParameterIndex(mt[ht].id),ft==-1)continue;_.setParameterValueByIndex(ft,lt)}it>=this._motionData.duration&&(this._isLoop?(rt.setStartTime(et),this._isLoopFadeIn&&rt.setFadeInStartTime(et)):(this._onFinishedMotion&&this._onFinishedMotion(this),rt.setIsFinished(!0))),this._lastWeight=tt}setIsLoop(_){this._isLoop=_}isLoop(){return this._isLoop}setIsLoopFadeIn(_){this._isLoopFadeIn=_}isLoopFadeIn(){return this._isLoopFadeIn}getDuration(){return this._isLoop?-1:this._loopDurationSeconds}getLoopDuration(){return this._loopDurationSeconds}setParameterFadeInTime(_,et){const tt=this._motionData.curves;for(let rt=0;rt<this._motionData.curveCount;++rt)if(_==tt[rt].id){tt[rt].fadeInTime=et;return}}setParameterFadeOutTime(_,et){const tt=this._motionData.curves;for(let rt=0;rt<this._motionData.curveCount;++rt)if(_==tt[rt].id){tt[rt].fadeOutTime=et;return}}getParameterFadeInTime(_){const et=this._motionData.curves;for(let tt=0;tt<this._motionData.curveCount;++tt)if(_==et[tt].id)return et[tt].fadeInTime;return-1}getParameterFadeOutTime(_){const et=this._motionData.curves;for(let tt=0;tt<this._motionData.curveCount;++tt)if(_==et[tt].id)return et[tt].fadeOutTime;return-1}setEffectIds(_,et){this._eyeBlinkParameterIds=_,this._lipSyncParameterIds=et}release(){this._motionData=void 0}parse(_){this._motionData=new CubismMotionData;const et=new CubismMotionJson(_);this._motionData.duration=et.getMotionDuration(),this._motionData.loop=et.isMotionLoop(),this._motionData.curveCount=et.getMotionCurveCount(),this._motionData.fps=et.getMotionFps(),this._motionData.eventCount=et.getEventCount();const tt=et.getEvaluationOptionFlag(EvaluationOptionFlag.EvaluationOptionFlag_AreBeziersRistricted),rt=et.getMotionFadeInTime(),it=et.getMotionFadeOutTime();rt!==void 0?this._fadeInSeconds=rt<0?1:rt:this._fadeInSeconds=1,it!==void 0?this._fadeOutSeconds=it<0?1:it:this._fadeOutSeconds=1,this._motionData.curves=Array.from({length:this._motionData.curveCount}).map(()=>new CubismMotionCurve),this._motionData.segments=Array.from({length:et.getMotionTotalSegmentCount()}).map(()=>new CubismMotionSegment),this._motionData.events=Array.from({length:this._motionData.eventCount}).map(()=>new CubismMotionEvent),this._motionData.points=[];let st=0,at=0;for(let ct=0;ct<this._motionData.curveCount;++ct){const ut=this._motionData.curves[ct];switch(et.getMotionCurveTarget(ct)){case TargetNameModel:ut.type=CubismMotionCurveTarget.CubismMotionCurveTarget_Model;break;case TargetNameParameter:ut.type=CubismMotionCurveTarget.CubismMotionCurveTarget_Parameter;break;case TargetNamePartOpacity:ut.type=CubismMotionCurveTarget.CubismMotionCurveTarget_PartOpacity;break;default:CubismLogWarning('Warning : Unable to get segment type from Curve! The number of "CurveCount" may be incorrect!')}ut.id=et.getMotionCurveId(ct),ut.baseSegmentIndex=at;const dt=et.getMotionCurveFadeInTime(ct),ot=et.getMotionCurveFadeOutTime(ct);ut.fadeInTime=dt!==void 0?dt:-1,ut.fadeOutTime=ot!==void 0?ot:-1;for(let nt=0;nt<et.getMotionCurveSegmentCount(ct);){switch(nt==0?(this._motionData.segments[at].basePointIndex=st,this._motionData.points[st]=new CubismMotionPoint(et.getMotionCurveSegment(ct,nt),et.getMotionCurveSegment(ct,nt+1)),st+=1,nt+=2):this._motionData.segments[at].basePointIndex=st-1,et.getMotionCurveSegment(ct,nt)){case CubismMotionSegmentType.CubismMotionSegmentType_Linear:{this._motionData.segments[at].segmentType=CubismMotionSegmentType.CubismMotionSegmentType_Linear,this._motionData.segments[at].evaluate=linearEvaluate,this._motionData.points[st]=new CubismMotionPoint(et.getMotionCurveSegment(ct,nt+1),et.getMotionCurveSegment(ct,nt+2)),st+=1,nt+=3;break}case CubismMotionSegmentType.CubismMotionSegmentType_Bezier:{this._motionData.segments[at].segmentType=CubismMotionSegmentType.CubismMotionSegmentType_Bezier,tt||UseOldBeziersCurveMotion?this._motionData.segments[at].evaluate=bezierEvaluate:this._motionData.segments[at].evaluate=bezierEvaluateCardanoInterpretation,this._motionData.points[st]=new CubismMotionPoint(et.getMotionCurveSegment(ct,nt+1),et.getMotionCurveSegment(ct,nt+2)),this._motionData.points[st+1]=new CubismMotionPoint(et.getMotionCurveSegment(ct,nt+3),et.getMotionCurveSegment(ct,nt+4)),this._motionData.points[st+2]=new CubismMotionPoint(et.getMotionCurveSegment(ct,nt+5),et.getMotionCurveSegment(ct,nt+6)),st+=3,nt+=7;break}case CubismMotionSegmentType.CubismMotionSegmentType_Stepped:{this._motionData.segments[at].segmentType=CubismMotionSegmentType.CubismMotionSegmentType_Stepped,this._motionData.segments[at].evaluate=steppedEvaluate,this._motionData.points[st]=new CubismMotionPoint(et.getMotionCurveSegment(ct,nt+1),et.getMotionCurveSegment(ct,nt+2)),st+=1,nt+=3;break}case CubismMotionSegmentType.CubismMotionSegmentType_InverseStepped:{this._motionData.segments[at].segmentType=CubismMotionSegmentType.CubismMotionSegmentType_InverseStepped,this._motionData.segments[at].evaluate=inverseSteppedEvaluate,this._motionData.points[st]=new CubismMotionPoint(et.getMotionCurveSegment(ct,nt+1),et.getMotionCurveSegment(ct,nt+2)),st+=1,nt+=3;break}default:{CSM_ASSERT(0);break}}++ut.segmentCount,++at}this._motionData.curves.push(ut)}for(let ct=0;ct<et.getEventCount();++ct)this._motionData.events[ct].fireTime=et.getEventTime(ct),this._motionData.events[ct].value=et.getEventValue(ct);et.release()}getFiredEvent(_,et){this._firedEventValues.length=0;for(let tt=0;tt<this._motionData.eventCount;++tt)this._motionData.events[tt].fireTime>_&&this._motionData.events[tt].fireTime<=et&&this._firedEventValues.push(this._motionData.events[tt].value);return this._firedEventValues}isExistModelOpacity(){for(let _=0;_<this._motionData.curveCount;_++){const et=this._motionData.curves[_];if(et.type==CubismMotionCurveTarget.CubismMotionCurveTarget_Model&&et.id===IdNameOpacity)return!0}return!1}getModelOpacityIndex(){if(this.isExistModelOpacity())for(let _=0;_<this._motionData.curveCount;_++){const et=this._motionData.curves[_];if(et.type==CubismMotionCurveTarget.CubismMotionCurveTarget_Model&&et.id===IdNameOpacity)return _}return-1}getModelOpacityId(_){if(_!=-1){const et=this._motionData.curves[_];if(et.type==CubismMotionCurveTarget.CubismMotionCurveTarget_Model&&et.id===IdNameOpacity)return et.id}}getModelOpacityValue(){return this._modelOpacity}}class Cubism4MotionManager extends MotionManager{constructor(_,et){var tt;super(_,et),__publicField(this,"definitions"),__publicField(this,"groups",{idle:"Idle"}),__publicField(this,"motionDataType","json"),__publicField(this,"queueManager",new CubismMotionQueueManager),__publicField(this,"expressionManager"),__publicField(this,"eyeBlinkIds"),__publicField(this,"lipSyncIds",["ParamMouthOpenY"]),this.definitions=(tt=_.motions)!=null?tt:{},this.eyeBlinkIds=_.getEyeBlinkParameters()||[];const rt=_.getLipSyncParameters();rt!=null&&rt.length&&(this.lipSyncIds=rt),this.init(et)}init(_){super.init(_),this.settings.expressions&&(this.expressionManager=new Cubism4ExpressionManager(this.settings,_)),this.queueManager.setEventCallback((et,tt,rt)=>{this.emit("motion:"+tt)})}isFinished(){return this.queueManager.isFinished()}_startMotion(_,et){return _.setFinishedMotionHandler(et),this.queueManager.stopAllMotions(),this.queueManager.startMotion(_,!1,performance.now())}_stopAllMotions(){this.queueManager.stopAllMotions()}createMotion(_,et,tt){const rt=CubismMotion.create(_),it=new CubismMotionJson(_),st=(et===this.groups.idle?config.idleMotionFadingDuration:config.motionFadingDuration)/1e3;return it.getMotionFadeInTime()===void 0&&rt.setFadeInTime(tt.FadeInTime>0?tt.FadeInTime:st),it.getMotionFadeOutTime()===void 0&&rt.setFadeOutTime(tt.FadeOutTime>0?tt.FadeOutTime:st),rt.setEffectIds(this.eyeBlinkIds,this.lipSyncIds),rt}getMotionFile(_){return _.File}getMotionName(_){return _.File}getSoundFile(_){return _.Sound}updateParameters(_,et){return this.queueManager.doUpdateMotion(_,et)}destroy(){super.destroy(),this.queueManager.release(),this.queueManager=void 0}}const ParamAngleX="ParamAngleX",ParamAngleY="ParamAngleY",ParamAngleZ="ParamAngleZ",ParamEyeBallX="ParamEyeBallX",ParamEyeBallY="ParamEyeBallY",ParamMouthForm="ParamMouthForm",ParamBodyAngleX="ParamBodyAngleX",ParamBreath="ParamBreath";class CubismBreath{constructor(){this._breathParameters=[],this._currentTime=0}static create(){return new CubismBreath}setParameters(_){this._breathParameters=_}getParameters(){return this._breathParameters}updateParameters(_,et){this._currentTime+=et;const tt=this._currentTime*2*3.14159;for(let rt=0;rt<this._breathParameters.length;++rt){const it=this._breathParameters[rt];_.addParameterValueById(it.parameterId,it.offset+it.peak*Math.sin(tt/it.cycle),it.weight)}}}class BreathParameterData{constructor(_,et,tt,rt,it){this.parameterId=_??void 0,this.offset=et??0,this.peak=tt??0,this.cycle=rt??0,this.weight=it??0}}const _CubismEyeBlink=class bs{static create(_){return new bs(_)}setBlinkingInterval(_){this._blinkingIntervalSeconds=_}setBlinkingSetting(_,et,tt){this._closingSeconds=_,this._closedSeconds=et,this._openingSeconds=tt}setParameterIds(_){this._parameterIds=_}getParameterIds(){return this._parameterIds}updateParameters(_,et){this._userTimeSeconds+=et;let tt,rt=0;switch(this._blinkingState){case 2:rt=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._closingSeconds,rt>=1&&(rt=1,this._blinkingState=3,this._stateStartTimeSeconds=this._userTimeSeconds),tt=1-rt;break;case 3:rt=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._closedSeconds,rt>=1&&(this._blinkingState=4,this._stateStartTimeSeconds=this._userTimeSeconds),tt=0;break;case 4:rt=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._openingSeconds,rt>=1&&(rt=1,this._blinkingState=1,this._nextBlinkingTime=this.determinNextBlinkingTiming()),tt=rt;break;case 1:this._nextBlinkingTime<this._userTimeSeconds&&(this._blinkingState=2,this._stateStartTimeSeconds=this._userTimeSeconds),tt=1;break;case 0:default:this._blinkingState=1,this._nextBlinkingTime=this.determinNextBlinkingTiming(),tt=1;break}bs.CloseIfZero||(tt=-tt);for(let it=0;it<this._parameterIds.length;++it)_.setParameterValueById(this._parameterIds[it],tt)}constructor(_){var et,tt;this._blinkingState=0,this._nextBlinkingTime=0,this._stateStartTimeSeconds=0,this._blinkingIntervalSeconds=4,this._closingSeconds=.1,this._closedSeconds=.05,this._openingSeconds=.15,this._userTimeSeconds=0,this._parameterIds=[],_!=null&&(this._parameterIds=(tt=(et=_.getEyeBlinkParameters())==null?void 0:et.slice())!=null?tt:this._parameterIds)}determinNextBlinkingTiming(){const _=Math.random();return this._userTimeSeconds+_*(2*this._blinkingIntervalSeconds-1)}};_CubismEyeBlink.CloseIfZero=!0;let CubismEyeBlink=_CubismEyeBlink;class csmRect{constructor(_=0,et=0,tt=0,rt=0){this.x=_,this.y=et,this.width=tt,this.height=rt}getCenterX(){return this.x+.5*this.width}getCenterY(){return this.y+.5*this.height}getRight(){return this.x+this.width}getBottom(){return this.y+this.height}setRect(_){this.x=_.x,this.y=_.y,this.width=_.width,this.height=_.height}expand(_,et){this.x-=_,this.y-=et,this.width+=_*2,this.height+=et*2}}const ColorChannelCount=4,ClippingMaskMaxCountOnDefault=36,ClippingMaskMaxCountOnMultiRenderTexture=32,ShaderCount=10;let s_instance,s_viewport,s_fbo;class CubismClippingManager_WebGL{getChannelFlagAsColor(_){return this._channelColors[_]}getMaskRenderTexture(){if(this._maskTexture&&this._maskTexture.textures!=null)this._maskTexture.frameNo=this._currentFrameNo;else{this._maskRenderTextures=[],this._maskColorBuffers=[];const _=this._clippingMaskBufferSize;for(let et=0;et<this._renderTextureCount;et++)this._maskColorBuffers.push(this.gl.createTexture()),this.gl.bindTexture(this.gl.TEXTURE_2D,this._maskColorBuffers[et]),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,_,_,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,null),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.bindTexture(this.gl.TEXTURE_2D,null),this._maskRenderTextures.push(this.gl.createFramebuffer()),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this._maskRenderTextures[et]),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,this._maskColorBuffers[et],0);this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,s_fbo),this._maskTexture=new CubismRenderTextureResource(this._currentFrameNo,this._maskRenderTextures)}return this._maskTexture.textures}setGL(_){this.gl=_}calcClippedDrawTotalBounds(_,et){let tt=Number.MAX_VALUE,rt=Number.MAX_VALUE,it=Number.MIN_VALUE,st=Number.MIN_VALUE;const at=et._clippedDrawableIndexList.length;for(let ct=0;ct<at;ct++){const ut=et._clippedDrawableIndexList[ct],dt=_.getDrawableVertexCount(ut),ot=_.getDrawableVertices(ut);let nt=Number.MAX_VALUE,lt=Number.MAX_VALUE,ht=-Number.MAX_VALUE,ft=-Number.MAX_VALUE;const gt=dt*Constant.vertexStep;for(let mt=Constant.vertexOffset;mt<gt;mt+=Constant.vertexStep){const yt=ot[mt],bt=ot[mt+1];yt<nt&&(nt=yt),yt>ht&&(ht=yt),bt<lt&&(lt=bt),bt>ft&&(ft=bt)}if(nt!=Number.MAX_VALUE)if(nt<tt&&(tt=nt),lt<rt&&(rt=lt),ht>it&&(it=ht),ft>st&&(st=ft),tt==Number.MAX_VALUE)et._allClippedDrawRect.x=0,et._allClippedDrawRect.y=0,et._allClippedDrawRect.width=0,et._allClippedDrawRect.height=0,et._isUsing=!1;else{et._isUsing=!0;const mt=it-tt,yt=st-rt;et._allClippedDrawRect.x=tt,et._allClippedDrawRect.y=rt,et._allClippedDrawRect.width=mt,et._allClippedDrawRect.height=yt}}}constructor(){this._currentMaskRenderTexture=null,this._currentFrameNo=0,this._renderTextureCount=0,this._clippingMaskBufferSize=256,this._clippingContextListForMask=[],this._clippingContextListForDraw=[],this._channelColors=[],this._tmpBoundsOnModel=new csmRect,this._tmpMatrix=new CubismMatrix44,this._tmpMatrixForMask=new CubismMatrix44,this._tmpMatrixForDraw=new CubismMatrix44;let _=new CubismTextureColor;_.R=1,_.G=0,_.B=0,_.A=0,this._channelColors.push(_),_=new CubismTextureColor,_.R=0,_.G=1,_.B=0,_.A=0,this._channelColors.push(_),_=new CubismTextureColor,_.R=0,_.G=0,_.B=1,_.A=0,this._channelColors.push(_),_=new CubismTextureColor,_.R=0,_.G=0,_.B=0,_.A=1,this._channelColors.push(_)}release(){var _;const et=this;for(let tt=0;tt<this._clippingContextListForMask.length;tt++)this._clippingContextListForMask[tt]&&((_=this._clippingContextListForMask[tt])==null||_.release());if(et._clippingContextListForMask=void 0,et._clippingContextListForDraw=void 0,this._maskTexture){for(let tt=0;tt<this._maskTexture.textures.length;tt++)this.gl.deleteFramebuffer(this._maskTexture.textures[tt]);this._maskTexture=void 0}if(et._channelColors=void 0,this._maskColorBuffers)for(let tt=0;tt<this._maskColorBuffers.length;tt++)this.gl.deleteTexture(this._maskColorBuffers[tt]);this._maskColorBuffers=void 0,this._maskRenderTextures=void 0,this._clearedFrameBufferflags=void 0}initialize(_,et,tt,rt,it){it%1!=0&&(CubismLogWarning("The number of render textures must be specified as an integer. The decimal point is rounded down and corrected to an integer."),it=~~it),it<1&&CubismLogWarning("The number of render textures must be an integer greater than or equal to 1. Set the number of render textures to 1."),this._renderTextureCount=it<1?1:it,this._clearedFrameBufferflags=[];for(let st=0;st<et;st++){if(rt[st]<=0){this._clippingContextListForDraw.push(null);continue}let at=this.findSameClip(tt[st],rt[st]);at==null&&(at=new CubismClippingContext(this,tt[st],rt[st]),this._clippingContextListForMask.push(at)),at.addClippedDrawable(st),this._clippingContextListForDraw.push(at)}}setupClippingContext(_,et){this._currentFrameNo++;let tt=0;for(let rt=0;rt<this._clippingContextListForMask.length;rt++){const it=this._clippingContextListForMask[rt];this.calcClippedDrawTotalBounds(_,it),it._isUsing&&tt++}if(tt>0){this.setupLayoutBounds(et.isUsingHighPrecisionMask()?0:tt),et.isUsingHighPrecisionMask()||(this.gl.viewport(0,0,this._clippingMaskBufferSize,this._clippingMaskBufferSize),this._currentMaskRenderTexture=this.getMaskRenderTexture()[0],et.preDraw(),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this._currentMaskRenderTexture)),this._clearedFrameBufferflags||(this._clearedFrameBufferflags=[]);for(let rt=0;rt<this._renderTextureCount;rt++)this._clearedFrameBufferflags[rt]=!1;for(let rt=0;rt<this._clippingContextListForMask.length;rt++){const it=this._clippingContextListForMask[rt],st=it._allClippedDrawRect,at=it._layoutBounds,ct=.05;let ut=0,dt=0;const ot=this.getMaskRenderTexture()[it._bufferIndex];if(this._currentMaskRenderTexture!=ot&&!et.isUsingHighPrecisionMask()&&(this._currentMaskRenderTexture=ot,et.preDraw(),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this._currentMaskRenderTexture)),et.isUsingHighPrecisionMask()){const nt=_.getPixelsPerUnit(),lt=it.getClippingManager()._clippingMaskBufferSize,ht=at.width*lt,ft=at.height*lt;this._tmpBoundsOnModel.setRect(st),this._tmpBoundsOnModel.width*nt>ht?(this._tmpBoundsOnModel.expand(st.width*ct,0),ut=at.width/this._tmpBoundsOnModel.width):ut=nt/ht,this._tmpBoundsOnModel.height*nt>ft?(this._tmpBoundsOnModel.expand(0,st.height*ct),dt=at.height/this._tmpBoundsOnModel.height):dt=nt/ft}else this._tmpBoundsOnModel.setRect(st),this._tmpBoundsOnModel.expand(st.width*ct,st.height*ct),ut=at.width/this._tmpBoundsOnModel.width,dt=at.height/this._tmpBoundsOnModel.height;if(this._tmpMatrix.loadIdentity(),this._tmpMatrix.translateRelative(-1,-1),this._tmpMatrix.scaleRelative(2,2),this._tmpMatrix.translateRelative(at.x,at.y),this._tmpMatrix.scaleRelative(ut,dt),this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x,-this._tmpBoundsOnModel.y),this._tmpMatrixForMask.setMatrix(this._tmpMatrix.getArray()),this._tmpMatrix.loadIdentity(),this._tmpMatrix.translateRelative(at.x,at.y),this._tmpMatrix.scaleRelative(ut,dt),this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x,-this._tmpBoundsOnModel.y),this._tmpMatrixForDraw.setMatrix(this._tmpMatrix.getArray()),it._matrixForMask.setMatrix(this._tmpMatrixForMask.getArray()),it._matrixForDraw.setMatrix(this._tmpMatrixForDraw.getArray()),!et.isUsingHighPrecisionMask()){const nt=it._clippingIdCount;for(let lt=0;lt<nt;lt++){const ht=it._clippingIdList[lt];_.getDrawableDynamicFlagVertexPositionsDidChange(ht)&&(et.setIsCulling(_.getDrawableCulling(ht)!=!1),this._clearedFrameBufferflags[it._bufferIndex]||(this.gl.clearColor(1,1,1,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this._clearedFrameBufferflags[it._bufferIndex]=!0),et.setClippingContextBufferForMask(it),et.drawMesh(_.getDrawableTextureIndex(ht),_.getDrawableVertexIndexCount(ht),_.getDrawableVertexCount(ht),_.getDrawableVertexIndices(ht),_.getDrawableVertices(ht),_.getDrawableVertexUvs(ht),_.getMultiplyColor(ht),_.getScreenColor(ht),_.getDrawableOpacity(ht),CubismBlendMode.CubismBlendMode_Normal,!1))}}}et.isUsingHighPrecisionMask()||(this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,s_fbo),et.setClippingContextBufferForMask(null),this.gl.viewport(s_viewport[0],s_viewport[1],s_viewport[2],s_viewport[3]))}}findSameClip(_,et){for(let tt=0;tt<this._clippingContextListForMask.length;tt++){const rt=this._clippingContextListForMask[tt],it=rt._clippingIdCount;if(it!=et)continue;let st=0;for(let at=0;at<it;at++){const ct=rt._clippingIdList[at];for(let ut=0;ut<it;ut++)if(_[ut]==ct){st++;break}}if(st==it)return rt}return null}setupLayoutBounds(_){const et=this._renderTextureCount<=1?ClippingMaskMaxCountOnDefault:ClippingMaskMaxCountOnMultiRenderTexture*this._renderTextureCount;if(_<=0||_>et){_>et&&CubismLogError(`not supported mask count : {0}
[Details] render texture count : {1}, mask count : {2}`,_-et,this._renderTextureCount,_);for(let ut=0;ut<this._clippingContextListForMask.length;ut++){const dt=this._clippingContextListForMask[ut];dt._layoutChannelNo=0,dt._layoutBounds.x=0,dt._layoutBounds.y=0,dt._layoutBounds.width=1,dt._layoutBounds.height=1,dt._bufferIndex=0}return}const tt=this._renderTextureCount<=1?9:8;let rt=_/this._renderTextureCount,it=_%this._renderTextureCount;rt=~~rt,it=~~it;let st=rt/ColorChannelCount,at=rt%ColorChannelCount;st=~~st,at=~~at;let ct=0;for(let ut=0;ut<this._renderTextureCount;ut++)for(let dt=0;dt<ColorChannelCount;dt++){let ot=st+(dt<at?1:0);const nt=at+1>=ColorChannelCount?0:at+1;if(ot<tt&&dt==nt&&(ot+=ut<it?1:0),ot!=0)if(ot==1){const lt=this._clippingContextListForMask[ct++];lt._layoutChannelNo=dt,lt._layoutBounds.x=0,lt._layoutBounds.y=0,lt._layoutBounds.width=1,lt._layoutBounds.height=1,lt._bufferIndex=ut}else if(ot==2)for(let lt=0;lt<ot;lt++){let ht=lt%2;ht=~~ht;const ft=this._clippingContextListForMask[ct++];ft._layoutChannelNo=dt,ft._layoutBounds.x=ht*.5,ft._layoutBounds.y=0,ft._layoutBounds.width=.5,ft._layoutBounds.height=1,ft._bufferIndex=ut}else if(ot<=4)for(let lt=0;lt<ot;lt++){let ht=lt%2,ft=lt/2;ht=~~ht,ft=~~ft;const gt=this._clippingContextListForMask[ct++];gt._layoutChannelNo=dt,gt._layoutBounds.x=ht*.5,gt._layoutBounds.y=ft*.5,gt._layoutBounds.width=.5,gt._layoutBounds.height=.5,gt._bufferIndex=ut}else if(ot<=tt)for(let lt=0;lt<ot;lt++){let ht=lt%3,ft=lt/3;ht=~~ht,ft=~~ft;const gt=this._clippingContextListForMask[ct++];gt._layoutChannelNo=dt,gt._layoutBounds.x=ht/3,gt._layoutBounds.y=ft/3,gt._layoutBounds.width=1/3,gt._layoutBounds.height=1/3,gt._bufferIndex=ut}else if(CubismConfig.supportMoreMaskDivisions&&ot<=16)for(let lt=0;lt<ot;lt++){let ht=lt%4,ft=lt/4;ht=~~ht,ft=~~ft;const gt=this._clippingContextListForMask[ct++];gt._layoutChannelNo=dt,gt._layoutBounds.x=ht/4,gt._layoutBounds.y=ft/4,gt._layoutBounds.width=1/4,gt._layoutBounds.height=1/4,gt._bufferIndex=ut}else{CubismLogError(`not supported mask count : {0}
[Details] render texture count : {1}, mask count : {2}`,_-et,this._renderTextureCount,_);for(let lt=0;lt<ot;lt++){const ht=this._clippingContextListForMask[ct++];ht._layoutChannelNo=0,ht._layoutBounds.x=0,ht._layoutBounds.y=0,ht._layoutBounds.width=1,ht._layoutBounds.height=1,ht._bufferIndex=0}}}}getColorBuffer(){return this._maskColorBuffers}getClippingContextListForDraw(){return this._clippingContextListForDraw}getClippingMaskCount(){return this._clippingContextListForMask.length}setClippingMaskBufferSize(_){this._clippingMaskBufferSize=_}getClippingMaskBufferSize(){return this._clippingMaskBufferSize}getRenderTextureCount(){return this._renderTextureCount}}class CubismRenderTextureResource{constructor(_,et){this.frameNo=_,this.textures=et}}class CubismClippingContext{constructor(_,et,tt){this._isUsing=!1,this._owner=_,this._clippingIdList=et,this._clippingIdCount=tt,this._allClippedDrawRect=new csmRect,this._layoutBounds=new csmRect,this._clippedDrawableIndexList=[],this._matrixForMask=new CubismMatrix44,this._matrixForDraw=new CubismMatrix44,this._bufferIndex=0}release(){const _=this;_._layoutBounds=void 0,_._allClippedDrawRect=void 0,_._clippedDrawableIndexList=void 0}addClippedDrawable(_){this._clippedDrawableIndexList.push(_)}getClippingManager(){return this._owner}setGl(_){this._owner.setGL(_)}}class CubismRendererProfile_WebGL{setGlEnable(_,et){et?this.gl.enable(_):this.gl.disable(_)}setGlEnableVertexAttribArray(_,et){et?this.gl.enableVertexAttribArray(_):this.gl.disableVertexAttribArray(_)}save(){if(this.gl==null){CubismLogError(`'gl' is null. WebGLRenderingContext is required.
Please call 'CubimRenderer_WebGL.startUp' function.`);return}this._lastArrayBufferBinding=this.gl.getParameter(this.gl.ARRAY_BUFFER_BINDING),this._lastArrayBufferBinding=this.gl.getParameter(this.gl.ELEMENT_ARRAY_BUFFER_BINDING),this._lastProgram=this.gl.getParameter(this.gl.CURRENT_PROGRAM),this._lastActiveTexture=this.gl.getParameter(this.gl.ACTIVE_TEXTURE),this.gl.activeTexture(this.gl.TEXTURE1),this._lastTexture1Binding2D=this.gl.getParameter(this.gl.TEXTURE_BINDING_2D),this.gl.activeTexture(this.gl.TEXTURE0),this._lastTexture0Binding2D=this.gl.getParameter(this.gl.TEXTURE_BINDING_2D),this._lastVertexAttribArrayEnabled[0]=this.gl.getVertexAttrib(0,this.gl.VERTEX_ATTRIB_ARRAY_ENABLED),this._lastVertexAttribArrayEnabled[1]=this.gl.getVertexAttrib(1,this.gl.VERTEX_ATTRIB_ARRAY_ENABLED),this._lastVertexAttribArrayEnabled[2]=this.gl.getVertexAttrib(2,this.gl.VERTEX_ATTRIB_ARRAY_ENABLED),this._lastVertexAttribArrayEnabled[3]=this.gl.getVertexAttrib(3,this.gl.VERTEX_ATTRIB_ARRAY_ENABLED),this._lastScissorTest=this.gl.isEnabled(this.gl.SCISSOR_TEST),this._lastStencilTest=this.gl.isEnabled(this.gl.STENCIL_TEST),this._lastDepthTest=this.gl.isEnabled(this.gl.DEPTH_TEST),this._lastCullFace=this.gl.isEnabled(this.gl.CULL_FACE),this._lastBlend=this.gl.isEnabled(this.gl.BLEND),this._lastFrontFace=this.gl.getParameter(this.gl.FRONT_FACE),this._lastColorMask=this.gl.getParameter(this.gl.COLOR_WRITEMASK),this._lastBlending[0]=this.gl.getParameter(this.gl.BLEND_SRC_RGB),this._lastBlending[1]=this.gl.getParameter(this.gl.BLEND_DST_RGB),this._lastBlending[2]=this.gl.getParameter(this.gl.BLEND_SRC_ALPHA),this._lastBlending[3]=this.gl.getParameter(this.gl.BLEND_DST_ALPHA),this._lastFBO=this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING),this._lastViewport=this.gl.getParameter(this.gl.VIEWPORT)}restore(){if(this.gl==null){CubismLogError(`'gl' is null. WebGLRenderingContext is required.
Please call 'CubimRenderer_WebGL.startUp' function.`);return}this.gl.useProgram(this._lastProgram),this.setGlEnableVertexAttribArray(0,this._lastVertexAttribArrayEnabled[0]),this.setGlEnableVertexAttribArray(1,this._lastVertexAttribArrayEnabled[1]),this.setGlEnableVertexAttribArray(2,this._lastVertexAttribArrayEnabled[2]),this.setGlEnableVertexAttribArray(3,this._lastVertexAttribArrayEnabled[3]),this.setGlEnable(this.gl.SCISSOR_TEST,this._lastScissorTest),this.setGlEnable(this.gl.STENCIL_TEST,this._lastStencilTest),this.setGlEnable(this.gl.DEPTH_TEST,this._lastDepthTest),this.setGlEnable(this.gl.CULL_FACE,this._lastCullFace),this.setGlEnable(this.gl.BLEND,this._lastBlend),this.gl.frontFace(this._lastFrontFace),this.gl.colorMask(this._lastColorMask[0],this._lastColorMask[1],this._lastColorMask[2],this._lastColorMask[3]),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this._lastArrayBufferBinding),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this._lastElementArrayBufferBinding),this.gl.activeTexture(this.gl.TEXTURE1),this.gl.bindTexture(this.gl.TEXTURE_2D,this._lastTexture1Binding2D),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,this._lastTexture0Binding2D),this.gl.activeTexture(this._lastActiveTexture),this.gl.blendFuncSeparate(this._lastBlending[0],this._lastBlending[1],this._lastBlending[2],this._lastBlending[3])}setGl(_){this.gl=_}constructor(){this._lastVertexAttribArrayEnabled=new Array(4),this._lastColorMask=new Array(4),this._lastBlending=new Array(4),this._lastViewport=new Array(4)}}class CubismShader_WebGL{static getInstance(){return s_instance==null&&(s_instance=new CubismShader_WebGL),s_instance}static deleteInstance(){s_instance&&(s_instance.release(),s_instance=void 0)}constructor(){this._shaderSets=[]}release(){this.releaseShaderProgram()}setupShaderProgram(_,et,tt,rt,it,st,at,ct,ut,dt,ot,nt,lt,ht,ft){lt||CubismLogError("NoPremultipliedAlpha is not allowed"),this._shaderSets.length==0&&this.generateShaders();let gt,mt,yt,bt;const _t=_.getClippingContextBufferForMask();if(_t!=null){const vt=this._shaderSets[0];this.gl.useProgram(vt.shaderProgram),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,et),this.gl.uniform1i(vt.samplerTexture0Location,0),at.vertex==null&&(at.vertex=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,at.vertex),this.gl.bufferData(this.gl.ARRAY_BUFFER,rt,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(vt.attributePositionLocation),this.gl.vertexAttribPointer(vt.attributePositionLocation,2,this.gl.FLOAT,!1,0,0),at.uv==null&&(at.uv=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,at.uv),this.gl.bufferData(this.gl.ARRAY_BUFFER,st,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(vt.attributeTexCoordLocation),this.gl.vertexAttribPointer(vt.attributeTexCoordLocation,2,this.gl.FLOAT,!1,0,0);const xt=_t._layoutChannelNo,wt=_t.getClippingManager().getChannelFlagAsColor(xt);this.gl.uniform4f(vt.uniformChannelFlagLocation,wt.R,wt.G,wt.B,wt.A),this.gl.uniformMatrix4fv(vt.uniformClipMatrixLocation,!1,_t._matrixForMask.getArray());const Tt=_t._layoutBounds;this.gl.uniform4f(vt.uniformBaseColorLocation,Tt.x*2-1,Tt.y*2-1,Tt.getRight()*2-1,Tt.getBottom()*2-1),this.gl.uniform4f(vt.uniformMultiplyColorLocation,ot.R,ot.G,ot.B,ot.A),this.gl.uniform4f(vt.uniformScreenColorLocation,nt.R,nt.G,nt.B,nt.A),gt=this.gl.ZERO,mt=this.gl.ONE_MINUS_SRC_COLOR,yt=this.gl.ZERO,bt=this.gl.ONE_MINUS_SRC_ALPHA}else{const vt=_.getClippingContextBufferForDraw(),wt=vt!=null?ft?2:1:0;let Tt;switch(ut){case CubismBlendMode.CubismBlendMode_Normal:default:Tt=this._shaderSets[1+wt],gt=this.gl.ONE,mt=this.gl.ONE_MINUS_SRC_ALPHA,yt=this.gl.ONE,bt=this.gl.ONE_MINUS_SRC_ALPHA;break;case CubismBlendMode.CubismBlendMode_Additive:Tt=this._shaderSets[4+wt],gt=this.gl.ONE,mt=this.gl.ONE,yt=this.gl.ZERO,bt=this.gl.ONE;break;case CubismBlendMode.CubismBlendMode_Multiplicative:Tt=this._shaderSets[7+wt],gt=this.gl.DST_COLOR,mt=this.gl.ONE_MINUS_SRC_ALPHA,yt=this.gl.ZERO,bt=this.gl.ONE;break}if(this.gl.useProgram(Tt.shaderProgram),at.vertex==null&&(at.vertex=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,at.vertex),this.gl.bufferData(this.gl.ARRAY_BUFFER,rt,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(Tt.attributePositionLocation),this.gl.vertexAttribPointer(Tt.attributePositionLocation,2,this.gl.FLOAT,!1,0,0),at.uv==null&&(at.uv=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,at.uv),this.gl.bufferData(this.gl.ARRAY_BUFFER,st,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(Tt.attributeTexCoordLocation),this.gl.vertexAttribPointer(Tt.attributeTexCoordLocation,2,this.gl.FLOAT,!1,0,0),vt!=null){this.gl.activeTexture(this.gl.TEXTURE1);const St=vt.getClippingManager().getColorBuffer()[_.getClippingContextBufferForDraw()._bufferIndex];this.gl.bindTexture(this.gl.TEXTURE_2D,St),this.gl.uniform1i(Tt.samplerTexture1Location,1),this.gl.uniformMatrix4fv(Tt.uniformClipMatrixLocation,!1,vt._matrixForDraw.getArray());const Et=vt._layoutChannelNo,Ot=vt.getClippingManager().getChannelFlagAsColor(Et);this.gl.uniform4f(Tt.uniformChannelFlagLocation,Ot.R,Ot.G,Ot.B,Ot.A)}this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,et),this.gl.uniform1i(Tt.samplerTexture0Location,0),this.gl.uniformMatrix4fv(Tt.uniformMatrixLocation,!1,ht.getArray()),this.gl.uniform4f(Tt.uniformBaseColorLocation,dt.R,dt.G,dt.B,dt.A),this.gl.uniform4f(Tt.uniformMultiplyColorLocation,ot.R,ot.G,ot.B,ot.A),this.gl.uniform4f(Tt.uniformScreenColorLocation,nt.R,nt.G,nt.B,nt.A)}at.index==null&&(at.index=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,at.index),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,it,this.gl.DYNAMIC_DRAW),this.gl.blendFuncSeparate(gt,mt,yt,bt)}releaseShaderProgram(){for(let _=0;_<this._shaderSets.length;_++)this.gl.deleteProgram(this._shaderSets[_].shaderProgram),this._shaderSets[_].shaderProgram=0;this._shaderSets=[]}generateShaders(){for(let _=0;_<ShaderCount;_++)this._shaderSets.push({});this._shaderSets[0].shaderProgram=this.loadShaderProgram(vertexShaderSrcSetupMask,fragmentShaderSrcsetupMask),this._shaderSets[1].shaderProgram=this.loadShaderProgram(vertexShaderSrc,fragmentShaderSrcPremultipliedAlpha),this._shaderSets[2].shaderProgram=this.loadShaderProgram(vertexShaderSrcMasked,fragmentShaderSrcMaskPremultipliedAlpha),this._shaderSets[3].shaderProgram=this.loadShaderProgram(vertexShaderSrcMasked,fragmentShaderSrcMaskInvertedPremultipliedAlpha),this._shaderSets[4].shaderProgram=this._shaderSets[1].shaderProgram,this._shaderSets[5].shaderProgram=this._shaderSets[2].shaderProgram,this._shaderSets[6].shaderProgram=this._shaderSets[3].shaderProgram,this._shaderSets[7].shaderProgram=this._shaderSets[1].shaderProgram,this._shaderSets[8].shaderProgram=this._shaderSets[2].shaderProgram,this._shaderSets[9].shaderProgram=this._shaderSets[3].shaderProgram,this._shaderSets[0].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[0].shaderProgram,"a_position"),this._shaderSets[0].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[0].shaderProgram,"a_texCoord"),this._shaderSets[0].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[0].shaderProgram,"s_texture0"),this._shaderSets[0].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[0].shaderProgram,"u_clipMatrix"),this._shaderSets[0].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[0].shaderProgram,"u_channelFlag"),this._shaderSets[0].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[0].shaderProgram,"u_baseColor"),this._shaderSets[0].uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets[0].shaderProgram,"u_multiplyColor"),this._shaderSets[0].uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets[0].shaderProgram,"u_screenColor"),this._shaderSets[1].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[1].shaderProgram,"a_position"),this._shaderSets[1].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[1].shaderProgram,"a_texCoord"),this._shaderSets[1].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[1].shaderProgram,"s_texture0"),this._shaderSets[1].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[1].shaderProgram,"u_matrix"),this._shaderSets[1].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[1].shaderProgram,"u_baseColor"),this._shaderSets[1].uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets[1].shaderProgram,"u_multiplyColor"),this._shaderSets[1].uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets[1].shaderProgram,"u_screenColor"),this._shaderSets[2].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[2].shaderProgram,"a_position"),this._shaderSets[2].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[2].shaderProgram,"a_texCoord"),this._shaderSets[2].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"s_texture0"),this._shaderSets[2].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"s_texture1"),this._shaderSets[2].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"u_matrix"),this._shaderSets[2].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"u_clipMatrix"),this._shaderSets[2].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"u_channelFlag"),this._shaderSets[2].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"u_baseColor"),this._shaderSets[2].uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"u_multiplyColor"),this._shaderSets[2].uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"u_screenColor"),this._shaderSets[3].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[3].shaderProgram,"a_position"),this._shaderSets[3].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[3].shaderProgram,"a_texCoord"),this._shaderSets[3].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"s_texture0"),this._shaderSets[3].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"s_texture1"),this._shaderSets[3].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"u_matrix"),this._shaderSets[3].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"u_clipMatrix"),this._shaderSets[3].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"u_channelFlag"),this._shaderSets[3].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"u_baseColor"),this._shaderSets[3].uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"u_multiplyColor"),this._shaderSets[3].uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"u_screenColor"),this._shaderSets[4].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[4].shaderProgram,"a_position"),this._shaderSets[4].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[4].shaderProgram,"a_texCoord"),this._shaderSets[4].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[4].shaderProgram,"s_texture0"),this._shaderSets[4].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[4].shaderProgram,"u_matrix"),this._shaderSets[4].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[4].shaderProgram,"u_baseColor"),this._shaderSets[4].uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets[4].shaderProgram,"u_multiplyColor"),this._shaderSets[4].uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets[4].shaderProgram,"u_screenColor"),this._shaderSets[5].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[5].shaderProgram,"a_position"),this._shaderSets[5].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[5].shaderProgram,"a_texCoord"),this._shaderSets[5].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"s_texture0"),this._shaderSets[5].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"s_texture1"),this._shaderSets[5].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"u_matrix"),this._shaderSets[5].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"u_clipMatrix"),this._shaderSets[5].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"u_channelFlag"),this._shaderSets[5].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"u_baseColor"),this._shaderSets[5].uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"u_multiplyColor"),this._shaderSets[5].uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"u_screenColor"),this._shaderSets[6].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[6].shaderProgram,"a_position"),this._shaderSets[6].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[6].shaderProgram,"a_texCoord"),this._shaderSets[6].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"s_texture0"),this._shaderSets[6].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"s_texture1"),this._shaderSets[6].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"u_matrix"),this._shaderSets[6].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"u_clipMatrix"),this._shaderSets[6].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"u_channelFlag"),this._shaderSets[6].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"u_baseColor"),this._shaderSets[6].uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"u_multiplyColor"),this._shaderSets[6].uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"u_screenColor"),this._shaderSets[7].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[7].shaderProgram,"a_position"),this._shaderSets[7].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[7].shaderProgram,"a_texCoord"),this._shaderSets[7].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[7].shaderProgram,"s_texture0"),this._shaderSets[7].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[7].shaderProgram,"u_matrix"),this._shaderSets[7].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[7].shaderProgram,"u_baseColor"),this._shaderSets[7].uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets[7].shaderProgram,"u_multiplyColor"),this._shaderSets[7].uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets[7].shaderProgram,"u_screenColor"),this._shaderSets[8].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[8].shaderProgram,"a_position"),this._shaderSets[8].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[8].shaderProgram,"a_texCoord"),this._shaderSets[8].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"s_texture0"),this._shaderSets[8].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"s_texture1"),this._shaderSets[8].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"u_matrix"),this._shaderSets[8].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"u_clipMatrix"),this._shaderSets[8].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"u_channelFlag"),this._shaderSets[8].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"u_baseColor"),this._shaderSets[8].uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"u_multiplyColor"),this._shaderSets[8].uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"u_screenColor"),this._shaderSets[9].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[9].shaderProgram,"a_position"),this._shaderSets[9].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[9].shaderProgram,"a_texCoord"),this._shaderSets[9].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"s_texture0"),this._shaderSets[9].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"s_texture1"),this._shaderSets[9].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"u_matrix"),this._shaderSets[9].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"u_clipMatrix"),this._shaderSets[9].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"u_channelFlag"),this._shaderSets[9].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"u_baseColor"),this._shaderSets[9].uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"u_multiplyColor"),this._shaderSets[9].uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"u_screenColor")}loadShaderProgram(_,et){const tt=this.gl.createProgram(),rt=this.compileShaderSource(this.gl.VERTEX_SHADER,_);if(!rt)return CubismLogError("Vertex shader compile error!"),0;const it=this.compileShaderSource(this.gl.FRAGMENT_SHADER,et);return it?(this.gl.attachShader(tt,rt),this.gl.attachShader(tt,it),this.gl.linkProgram(tt),this.gl.getProgramParameter(tt,this.gl.LINK_STATUS)?(this.gl.deleteShader(rt),this.gl.deleteShader(it),tt):(CubismLogError("Failed to link program: {0}",tt),this.gl.deleteShader(rt),this.gl.deleteShader(it),tt&&this.gl.deleteProgram(tt),0)):(CubismLogError("Vertex shader compile error!"),0)}compileShaderSource(_,et){const tt=et,rt=this.gl.createShader(_);if(this.gl.shaderSource(rt,tt),this.gl.compileShader(rt),!rt){const st=this.gl.getShaderInfoLog(rt);CubismLogError("Shader compile log: {0} ",st)}return this.gl.getShaderParameter(rt,this.gl.COMPILE_STATUS)?rt:(this.gl.deleteShader(rt),null)}setGl(_){this.gl=_}}const vertexShaderSrcSetupMask="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_myPos;uniform mat4       u_clipMatrix;void main(){   gl_Position = u_clipMatrix * a_position;   v_myPos = u_clipMatrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",fragmentShaderSrcsetupMask="precision mediump float;varying vec2       v_texCoord;varying vec4       v_myPos;uniform vec4       u_baseColor;uniform vec4       u_channelFlag;uniform sampler2D  s_texture0;void main(){   float isInside =        step(u_baseColor.x, v_myPos.x/v_myPos.w)       * step(u_baseColor.y, v_myPos.y/v_myPos.w)       * step(v_myPos.x/v_myPos.w, u_baseColor.z)       * step(v_myPos.y/v_myPos.w, u_baseColor.w);   gl_FragColor = u_channelFlag * texture2D(s_texture0, v_texCoord).a * isInside;}",vertexShaderSrc="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;uniform mat4       u_matrix;void main(){   gl_Position = u_matrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",vertexShaderSrcMasked="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_clipPos;uniform mat4       u_matrix;uniform mat4       u_clipMatrix;void main(){   gl_Position = u_matrix * a_position;   v_clipPos = u_clipMatrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",fragmentShaderSrcPremultipliedAlpha="precision mediump float;varying vec2       v_texCoord;uniform vec4       u_baseColor;uniform sampler2D  s_texture0;uniform vec4       u_multiplyColor;uniform vec4       u_screenColor;void main(){   vec4 texColor = texture2D(s_texture0, v_texCoord);   texColor.rgb = texColor.rgb * u_multiplyColor.rgb;   texColor.rgb = (texColor.rgb + u_screenColor.rgb * texColor.a) - (texColor.rgb * u_screenColor.rgb);   vec4 color = texColor * u_baseColor;   gl_FragColor = vec4(color.rgb, color.a);}",fragmentShaderSrcMaskPremultipliedAlpha="precision mediump float;varying vec2       v_texCoord;varying vec4       v_clipPos;uniform vec4       u_baseColor;uniform vec4       u_channelFlag;uniform sampler2D  s_texture0;uniform sampler2D  s_texture1;uniform vec4       u_multiplyColor;uniform vec4       u_screenColor;void main(){   vec4 texColor = texture2D(s_texture0, v_texCoord);   texColor.rgb = texColor.rgb * u_multiplyColor.rgb;   texColor.rgb = (texColor.rgb + u_screenColor.rgb * texColor.a) - (texColor.rgb * u_screenColor.rgb);   vec4 col_formask = texColor * u_baseColor;   vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;   float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;   col_formask = col_formask * maskVal;   gl_FragColor = col_formask;}",fragmentShaderSrcMaskInvertedPremultipliedAlpha="precision mediump float;varying vec2      v_texCoord;varying vec4      v_clipPos;uniform sampler2D s_texture0;uniform sampler2D s_texture1;uniform vec4      u_channelFlag;uniform vec4      u_baseColor;uniform vec4      u_multiplyColor;uniform vec4      u_screenColor;void main(){   vec4 texColor = texture2D(s_texture0, v_texCoord);   texColor.rgb = texColor.rgb * u_multiplyColor.rgb;   texColor.rgb = (texColor.rgb + u_screenColor.rgb * texColor.a) - (texColor.rgb * u_screenColor.rgb);   vec4 col_formask = texColor * u_baseColor;   vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;   float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;   col_formask = col_formask * (1.0 - maskVal);   gl_FragColor = col_formask;}";class CubismRenderer_WebGL extends CubismRenderer{initialize(_,et=1){_.isUsingMasking()&&(this._clippingManager=new CubismClippingManager_WebGL,this._clippingManager.initialize(_,_.getDrawableCount(),_.getDrawableMasks(),_.getDrawableMaskCounts(),et));for(let tt=_.getDrawableCount()-1;tt>=0;tt--)this._sortedDrawableIndexList[tt]=0;super.initialize(_)}bindTexture(_,et){this._textures[_]=et}getBindedTextures(){return this._textures}setClippingMaskBufferSize(_){if(!this._model.isUsingMasking())return;const et=this._clippingManager.getRenderTextureCount();this._clippingManager.release(),this._clippingManager=new CubismClippingManager_WebGL,this._clippingManager.setClippingMaskBufferSize(_),this._clippingManager.initialize(this.getModel(),this.getModel().getDrawableCount(),this.getModel().getDrawableMasks(),this.getModel().getDrawableMaskCounts(),et)}getClippingMaskBufferSize(){return this._model.isUsingMasking()?this._clippingManager.getClippingMaskBufferSize():-1}getRenderTextureCount(){return this._model.isUsingMasking()?this._clippingManager.getRenderTextureCount():-1}constructor(){super(),this._clippingContextBufferForMask=null,this._clippingContextBufferForDraw=null,this._rendererProfile=new CubismRendererProfile_WebGL,this.firstDraw=!0,this._textures={},this._sortedDrawableIndexList=[],this._bufferData={vertex:null,uv:null,index:null}}release(){var _,et,tt;const rt=this;this._clippingManager.release(),rt._clippingManager=void 0,(_=this.gl)==null||_.deleteBuffer(this._bufferData.vertex),this._bufferData.vertex=null,(et=this.gl)==null||et.deleteBuffer(this._bufferData.uv),this._bufferData.uv=null,(tt=this.gl)==null||tt.deleteBuffer(this._bufferData.index),this._bufferData.index=null,rt._bufferData=void 0,rt._textures=void 0}doDrawModel(){if(this.gl==null){CubismLogError(`'gl' is null. WebGLRenderingContext is required.
Please call 'CubimRenderer_WebGL.startUp' function.`);return}this._clippingManager!=null&&(this.preDraw(),this._clippingManager.setupClippingContext(this.getModel(),this)),this.preDraw();const _=this.getModel().getDrawableCount(),et=this.getModel().getDrawableRenderOrders();for(let tt=0;tt<_;++tt){const rt=et[tt];this._sortedDrawableIndexList[rt]=tt}for(let tt=0;tt<_;++tt){const rt=this._sortedDrawableIndexList[tt];if(!this.getModel().getDrawableDynamicFlagIsVisible(rt))continue;const it=this._clippingManager!=null?this._clippingManager.getClippingContextListForDraw()[rt]:null;if(it!=null&&this.isUsingHighPrecisionMask()){it._isUsing&&(this.gl.viewport(0,0,this._clippingManager.getClippingMaskBufferSize(),this._clippingManager.getClippingMaskBufferSize()),this.preDraw(),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,it.getClippingManager().getMaskRenderTexture()[it._bufferIndex]),this.gl.clearColor(1,1,1,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT));{const st=it._clippingIdCount;for(let at=0;at<st;at++){const ct=it._clippingIdList[at];this._model.getDrawableDynamicFlagVertexPositionsDidChange(ct)&&(this.setIsCulling(this._model.getDrawableCulling(ct)!=!1),this.setClippingContextBufferForMask(it),this.drawMesh(this.getModel().getDrawableTextureIndex(ct),this.getModel().getDrawableVertexIndexCount(ct),this.getModel().getDrawableVertexCount(ct),this.getModel().getDrawableVertexIndices(ct),this.getModel().getDrawableVertices(ct),this.getModel().getDrawableVertexUvs(ct),this.getModel().getMultiplyColor(ct),this.getModel().getScreenColor(ct),this.getModel().getDrawableOpacity(ct),CubismBlendMode.CubismBlendMode_Normal,!1))}}this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,s_fbo),this.setClippingContextBufferForMask(null),this.gl.viewport(s_viewport[0],s_viewport[1],s_viewport[2],s_viewport[3]),this.preDraw()}this.setClippingContextBufferForDraw(it),this.setIsCulling(this.getModel().getDrawableCulling(rt)),this.drawMesh(this.getModel().getDrawableTextureIndex(rt),this.getModel().getDrawableVertexIndexCount(rt),this.getModel().getDrawableVertexCount(rt),this.getModel().getDrawableVertexIndices(rt),this.getModel().getDrawableVertices(rt),this.getModel().getDrawableVertexUvs(rt),this.getModel().getMultiplyColor(rt),this.getModel().getScreenColor(rt),this.getModel().getDrawableOpacity(rt),this.getModel().getDrawableBlendMode(rt),this.getModel().getDrawableInvertedMaskBit(rt))}}drawMesh(_,et,tt,rt,it,st,at,ct,ut,dt,ot){this.isCulling()?this.gl.enable(this.gl.CULL_FACE):this.gl.disable(this.gl.CULL_FACE),this.gl.frontFace(this.gl.CCW);const nt=this.getModelColor();this.getClippingContextBufferForMask()==null&&(nt.A*=ut,this.isPremultipliedAlpha()&&(nt.R*=nt.A,nt.G*=nt.A,nt.B*=nt.A));let lt=null;this._textures[_]!=null&&(lt=this._textures[_]),CubismShader_WebGL.getInstance().setupShaderProgram(this,lt,tt,it,rt,st,this._bufferData,ut,dt,nt,at,ct,this.isPremultipliedAlpha(),this.getMvpMatrix(),ot),this.gl.drawElements(this.gl.TRIANGLES,et,this.gl.UNSIGNED_SHORT,0),this.gl.useProgram(null),this.setClippingContextBufferForDraw(null),this.setClippingContextBufferForMask(null)}saveProfile(){this._rendererProfile.save()}restoreProfile(){this._rendererProfile.restore()}static doStaticRelease(){CubismShader_WebGL.deleteInstance()}setRenderState(_,et){s_fbo=_,s_viewport=et}preDraw(){if(this.firstDraw&&(this.firstDraw=!1),this.gl.disable(this.gl.SCISSOR_TEST),this.gl.disable(this.gl.STENCIL_TEST),this.gl.disable(this.gl.DEPTH_TEST),this.gl.frontFace(this.gl.CW),this.gl.enable(this.gl.BLEND),this.gl.colorMask(!0,!0,!0,!0),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,null),this.getAnisotropy()>0&&this._extension)for(const _ of Object.entries(this._textures))this.gl.bindTexture(this.gl.TEXTURE_2D,_),this.gl.texParameterf(this.gl.TEXTURE_2D,this._extension.TEXTURE_MAX_ANISOTROPY_EXT,this.getAnisotropy())}setClippingContextBufferForMask(_){this._clippingContextBufferForMask=_}getClippingContextBufferForMask(){return this._clippingContextBufferForMask}setClippingContextBufferForDraw(_){this._clippingContextBufferForDraw=_}getClippingContextBufferForDraw(){return this._clippingContextBufferForDraw}startUp(_){this.gl=_,this._clippingManager&&this._clippingManager.setGL(_),CubismShader_WebGL.getInstance().setGl(_),this._rendererProfile.setGl(_),this._extension=this.gl.getExtension("EXT_texture_filter_anisotropic")||this.gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||this.gl.getExtension("MOZ_EXT_texture_filter_anisotropic")}}CubismRenderer.staticRelease=()=>{CubismRenderer_WebGL.doStaticRelease()};const tempMatrix=new CubismMatrix44;class Cubism4InternalModel extends InternalModel{constructor(_,et,tt){super(),__publicField(this,"settings"),__publicField(this,"coreModel"),__publicField(this,"motionManager"),__publicField(this,"lipSync",!0),__publicField(this,"breath",CubismBreath.create()),__publicField(this,"eyeBlink"),__publicField(this,"userData"),__publicField(this,"renderer",new CubismRenderer_WebGL),__publicField(this,"idParamAngleX",ParamAngleX),__publicField(this,"idParamAngleY",ParamAngleY),__publicField(this,"idParamAngleZ",ParamAngleZ),__publicField(this,"idParamEyeBallX",ParamEyeBallX),__publicField(this,"idParamEyeBallY",ParamEyeBallY),__publicField(this,"idParamBodyAngleX",ParamBodyAngleX),__publicField(this,"idParamBreath",ParamBreath),__publicField(this,"idParamMouthForm",ParamMouthForm),__publicField(this,"pixelsPerUnit",1),__publicField(this,"centeringTransform",new Matrix),this.coreModel=_,this.settings=et,this.motionManager=new Cubism4MotionManager(et,tt),this.init()}init(){var _;super.init(),(_=this.settings.getEyeBlinkParameters())!=null&&_.length&&(this.eyeBlink=CubismEyeBlink.create(this.settings)),this.breath.setParameters([new BreathParameterData(this.idParamAngleX,0,15,6.5345,.5),new BreathParameterData(this.idParamAngleY,0,8,3.5345,.5),new BreathParameterData(this.idParamAngleZ,0,10,5.5345,.5),new BreathParameterData(this.idParamBodyAngleX,0,4,15.5345,.5),new BreathParameterData(this.idParamBreath,0,.5,3.2345,.5)]),this.renderer.initialize(this.coreModel),this.renderer.setIsPremultipliedAlpha(!0)}getSize(){return[this.coreModel.getModel().canvasinfo.CanvasWidth,this.coreModel.getModel().canvasinfo.CanvasHeight]}getLayout(){const _={};if(this.settings.layout)for(const[et,tt]of Object.entries(this.settings.layout)){const rt=et.charAt(0).toLowerCase()+et.slice(1);_[rt]=tt}return _}setupLayout(){super.setupLayout(),this.pixelsPerUnit=this.coreModel.getModel().canvasinfo.PixelsPerUnit,this.centeringTransform.scale(this.pixelsPerUnit,this.pixelsPerUnit).translate(this.originalWidth/2,this.originalHeight/2)}updateWebGLContext(_,et){this.renderer.firstDraw=!0,this.renderer._bufferData={vertex:null,uv:null,index:null},this.renderer.startUp(_),this.renderer._clippingManager._currentFrameNo=et,this.renderer._clippingManager._maskTexture=void 0,CubismShader_WebGL.getInstance()._shaderSets=[]}bindTexture(_,et){this.renderer.bindTexture(_,et)}getHitAreaDefs(){var _,et;return(et=(_=this.settings.hitAreas)==null?void 0:_.map(tt=>({id:tt.Id,name:tt.Name,index:this.coreModel.getDrawableIndex(tt.Id)})))!=null?et:[]}getDrawableIDs(){return this.coreModel.getDrawableIds()}getDrawableIndex(_){return this.coreModel.getDrawableIndex(_)}getDrawableVertices(_){if(typeof _=="string"&&(_=this.coreModel.getDrawableIndex(_),_===-1))throw new TypeError("Unable to find drawable ID: "+_);const et=this.coreModel.getDrawableVertices(_).slice();for(let tt=0;tt<et.length;tt+=2)et[tt]=et[tt]*this.pixelsPerUnit+this.originalWidth/2,et[tt+1]=-et[tt+1]*this.pixelsPerUnit+this.originalHeight/2;return et}updateTransform(_){this.drawingMatrix.copyFrom(this.centeringTransform).prepend(this.localTransform).prepend(_)}update(_,et){var tt,rt,it,st;super.update(_,et),_/=1e3,et/=1e3;const at=this.coreModel;this.emit("beforeMotionUpdate");const ct=this.motionManager.update(this.coreModel,et);if(this.emit("afterMotionUpdate"),at.saveParameters(),(tt=this.motionManager.expressionManager)==null||tt.update(at,et),ct||(rt=this.eyeBlink)==null||rt.updateParameters(at,_),this.updateFocus(),this.updateNaturalMovements(_*1e3,et*1e3),this.lipSync&&this.motionManager.currentAudio){let ut=this.motionManager.mouthSync(),dt=0;const ot=1,nt=1.2;ut>0&&(dt=.4),ut=clamp(ut*nt,dt,ot);for(let lt=0;lt<this.motionManager.lipSyncIds.length;++lt)at.addParameterValueById(this.motionManager.lipSyncIds[lt],ut,.8)}(it=this.physics)==null||it.evaluate(at,_),(st=this.pose)==null||st.updateParameters(at,_),this.emit("beforeModelUpdate"),at.update(),at.loadParameters()}updateFocus(){this.coreModel.addParameterValueById(this.idParamEyeBallX,this.focusController.x),this.coreModel.addParameterValueById(this.idParamEyeBallY,this.focusController.y),this.coreModel.addParameterValueById(this.idParamAngleX,this.focusController.x*30),this.coreModel.addParameterValueById(this.idParamAngleY,this.focusController.y*30),this.coreModel.addParameterValueById(this.idParamAngleZ,this.focusController.x*this.focusController.y*-30),this.coreModel.addParameterValueById(this.idParamBodyAngleX,this.focusController.x*10)}updateFacialEmotion(_){this.coreModel.addParameterValueById(this.idParamMouthForm,_)}updateNaturalMovements(_,et){var tt;(tt=this.breath)==null||tt.updateParameters(this.coreModel,_/1e3)}draw(_){const et=this.drawingMatrix,tt=tempMatrix.getArray();tt[0]=et.a,tt[1]=et.b,tt[4]=-et.c,tt[5]=-et.d,tt[12]=et.tx,tt[13]=et.ty,this.renderer.setMvpMatrix(tempMatrix),this.renderer.setRenderState(_.getParameter(_.FRAMEBUFFER_BINDING),this.viewport),this.renderer.drawModel()}destroy(){super.destroy(),this.renderer.release(),this.coreModel.release(),this.renderer=void 0,this.coreModel=void 0}}class CubismModelSettingsJson{constructor(_){this.groups=_.Groups,this.hitAreas=_.HitAreas,this.layout=_.Layout,this.moc=_.FileReferences.Moc,this.expressions=_.FileReferences.Expressions,this.motions=_.FileReferences.Motions,this.textures=_.FileReferences.Textures,this.physics=_.FileReferences.Physics,this.pose=_.FileReferences.Pose}getEyeBlinkParameters(){var _,et;return(et=(_=this.groups)==null?void 0:_.find(tt=>tt.Name==="EyeBlink"))==null?void 0:et.Ids}getLipSyncParameters(){var _,et;return(et=(_=this.groups)==null?void 0:_.find(tt=>tt.Name==="LipSync"))==null?void 0:et.Ids}}class Cubism4ModelSettings extends ModelSettings{constructor(_){if(super(_),__publicField(this,"moc"),__publicField(this,"textures"),!Cubism4ModelSettings.isValidJSON(_))throw new TypeError("Invalid JSON.");Object.assign(this,new CubismModelSettingsJson(_))}static isValidJSON(_){var et;return!!(_!=null&&_.FileReferences)&&typeof _.FileReferences.Moc=="string"&&((et=_.FileReferences.Textures)==null?void 0:et.length)>0&&_.FileReferences.Textures.every(tt=>typeof tt=="string")}replaceFiles(_){if(super.replaceFiles(_),this.motions)for(const[et,tt]of Object.entries(this.motions))for(let rt=0;rt<tt.length;rt++)tt[rt].File=_(tt[rt].File,`motions.${et}[${rt}].File`),tt[rt].Sound!==void 0&&(tt[rt].Sound=_(tt[rt].Sound,`motions.${et}[${rt}].Sound`));if(this.expressions)for(let et=0;et<this.expressions.length;et++)this.expressions[et].File=_(this.expressions[et].File,`expressions[${et}].File`)}}applyMixins(Cubism4ModelSettings,[CubismModelSettingsJson]);let startupPromise,startupRetries=20;function cubism4Ready(){return CubismFramework.isStarted()?Promise.resolve():(startupPromise??(startupPromise=new Promise((_e,_)=>{function et(){try{startUpCubism4(),_e()}catch(tt){if(startupRetries--,startupRetries<0){const rt=new Error("Failed to start up Cubism 4 framework.");rt.cause=tt,_(rt);return}setTimeout(et,10)}}et()})),startupPromise)}function startUpCubism4(_e){_e=Object.assign({logFunction:console.log,loggingLevel:LogLevel.LogLevel_Verbose},_e),CubismFramework.startUp(_e),CubismFramework.initialize()}const Epsilon=.001,DefaultFadeInSeconds=.5;class CubismPose{static create(_){const et=new CubismPose;typeof _.FadeInTime=="number"&&(et._fadeTimeSeconds=_.FadeInTime,et._fadeTimeSeconds<=0&&(et._fadeTimeSeconds=DefaultFadeInSeconds));const tt=_.Groups,rt=tt.length;for(let it=0;it<rt;++it){const st=tt[it],at=st.length;let ct=0;for(let ut=0;ut<at;++ut){const dt=st[ut],ot=new PartData;ot.partId=dt.Id;const nt=dt.Link;if(nt){const lt=nt.length;for(let ht=0;ht<lt;++ht){const ft=new PartData;ft.partId=nt[ht],ot.link.push(ft)}}et._partGroups.push(ot),++ct}et._partGroupCounts.push(ct)}return et}updateParameters(_,et){_!=this._lastModel&&this.reset(_),this._lastModel=_,et<0&&(et=0);let tt=0;for(let rt=0;rt<this._partGroupCounts.length;rt++){const it=this._partGroupCounts[rt];this.doFade(_,et,tt,it),tt+=it}this.copyPartOpacities(_)}reset(_){let et=0;for(let tt=0;tt<this._partGroupCounts.length;++tt){const rt=this._partGroupCounts[tt];for(let it=et;it<et+rt;++it){this._partGroups[it].initialize(_);const st=this._partGroups[it].partIndex,at=this._partGroups[it].parameterIndex;if(!(st<0)){_.setPartOpacityByIndex(st,it==et?1:0),_.setParameterValueByIndex(at,it==et?1:0);for(let ct=0;ct<this._partGroups[it].link.length;++ct)this._partGroups[it].link[ct].initialize(_)}}et+=rt}}copyPartOpacities(_){for(let et=0;et<this._partGroups.length;++et){const tt=this._partGroups[et];if(tt.link.length==0)continue;const rt=this._partGroups[et].partIndex,it=_.getPartOpacityByIndex(rt);for(let st=0;st<tt.link.length;++st){const ct=tt.link[st].partIndex;ct<0||_.setPartOpacityByIndex(ct,it)}}}doFade(_,et,tt,rt){let it=-1,st=1;const at=.5,ct=.15;for(let ut=tt;ut<tt+rt;++ut){const dt=this._partGroups[ut].partIndex,ot=this._partGroups[ut].parameterIndex;if(_.getParameterValueByIndex(ot)>Epsilon){if(it>=0)break;it=ut,st=_.getPartOpacityByIndex(dt),st+=et/this._fadeTimeSeconds,st>1&&(st=1)}}it<0&&(it=0,st=1);for(let ut=tt;ut<tt+rt;++ut){const dt=this._partGroups[ut].partIndex;if(it==ut)_.setPartOpacityByIndex(dt,st);else{let ot=_.getPartOpacityByIndex(dt),nt;st<at?nt=st*(at-1)/at+1:nt=(1-st)*at/(1-at),(1-nt)*(1-st)>ct&&(nt=1-ct/(1-st)),ot>nt&&(ot=nt),_.setPartOpacityByIndex(dt,ot)}}}constructor(){this._fadeTimeSeconds=DefaultFadeInSeconds,this._lastModel=void 0,this._partGroups=[],this._partGroupCounts=[]}}class PartData{constructor(_){this.parameterIndex=0,this.partIndex=0,this.partId="",this.link=[],_!=null&&this.assignment(_)}assignment(_){return this.partId=_.partId,this.link=_.link.map(et=>et.clone()),this}initialize(_){this.parameterIndex=_.getParameterIndex(this.partId),this.partIndex=_.getPartIndex(this.partId),_.setParameterValueByIndex(this.parameterIndex,1)}clone(){const _=new PartData;return _.partId=this.partId,_.parameterIndex=this.parameterIndex,_.partIndex=this.partIndex,_.link=this.link.map(et=>et.clone()),_}}class DrawableColorData{constructor(_=!1,et=new CubismTextureColor){this.isOverwritten=_,this.Color=et}}class PartColorData{constructor(_=!1,et=new CubismTextureColor){this.isOverwritten=_,this.Color=et}}class DrawableCullingData{constructor(_=!1,et=!1){this.isOverwritten=_,this.isCulling=et}}class CubismModel{update(){this._model.update(),this._model.drawables.resetDynamicFlags()}getPixelsPerUnit(){return this._model==null?0:this._model.canvasinfo.PixelsPerUnit}getCanvasWidth(){return this._model==null?0:this._model.canvasinfo.CanvasWidth/this._model.canvasinfo.PixelsPerUnit}getCanvasHeight(){return this._model==null?0:this._model.canvasinfo.CanvasHeight/this._model.canvasinfo.PixelsPerUnit}saveParameters(){const _=this._model.parameters.count,et=this._savedParameters.length;for(let tt=0;tt<_;++tt)tt<et?this._savedParameters[tt]=this._parameterValues[tt]:this._savedParameters.push(this._parameterValues[tt])}getMultiplyColor(_){return this.getOverwriteFlagForModelMultiplyColors()||this.getOverwriteFlagForDrawableMultiplyColors(_)?this._userMultiplyColors[_].Color:this.getDrawableMultiplyColor(_)}getScreenColor(_){return this.getOverwriteFlagForModelScreenColors()||this.getOverwriteFlagForDrawableScreenColors(_)?this._userScreenColors[_].Color:this.getDrawableScreenColor(_)}setMultiplyColorByTextureColor(_,et){this.setMultiplyColorByRGBA(_,et.R,et.G,et.B,et.A)}setMultiplyColorByRGBA(_,et,tt,rt,it=1){this._userMultiplyColors[_].Color.R=et,this._userMultiplyColors[_].Color.G=tt,this._userMultiplyColors[_].Color.B=rt,this._userMultiplyColors[_].Color.A=it}setScreenColorByTextureColor(_,et){this.setScreenColorByRGBA(_,et.R,et.G,et.B,et.A)}setScreenColorByRGBA(_,et,tt,rt,it=1){this._userScreenColors[_].Color.R=et,this._userScreenColors[_].Color.G=tt,this._userScreenColors[_].Color.B=rt,this._userScreenColors[_].Color.A=it}getPartMultiplyColor(_){return this._userPartMultiplyColors[_].Color}getPartScreenColor(_){return this._userPartScreenColors[_].Color}setPartColor(_,et,tt,rt,it,st,at){if(st[_].Color.R=et,st[_].Color.G=tt,st[_].Color.B=rt,st[_].Color.A=it,st[_].isOverwritten)for(let ct=0;ct<this._partChildDrawables[_].length;++ct){const ut=this._partChildDrawables[_][ct];at[ut].Color.R=et,at[ut].Color.G=tt,at[ut].Color.B=rt,at[ut].Color.A=it}}setPartMultiplyColorByTextureColor(_,et){this.setPartMultiplyColorByRGBA(_,et.R,et.G,et.B,et.A)}setPartMultiplyColorByRGBA(_,et,tt,rt,it){this.setPartColor(_,et,tt,rt,it,this._userPartMultiplyColors,this._userMultiplyColors)}setPartScreenColorByTextureColor(_,et){this.setPartScreenColorByRGBA(_,et.R,et.G,et.B,et.A)}setPartScreenColorByRGBA(_,et,tt,rt,it){this.setPartColor(_,et,tt,rt,it,this._userPartScreenColors,this._userScreenColors)}getOverwriteFlagForModelMultiplyColors(){return this._isOverwrittenModelMultiplyColors}getOverwriteFlagForModelScreenColors(){return this._isOverwrittenModelScreenColors}setOverwriteFlagForModelMultiplyColors(_){this._isOverwrittenModelMultiplyColors=_}setOverwriteFlagForModelScreenColors(_){this._isOverwrittenModelScreenColors=_}getOverwriteFlagForDrawableMultiplyColors(_){return this._userMultiplyColors[_].isOverwritten}getOverwriteFlagForDrawableScreenColors(_){return this._userScreenColors[_].isOverwritten}setOverwriteFlagForDrawableMultiplyColors(_,et){this._userMultiplyColors[_].isOverwritten=et}setOverwriteFlagForDrawableScreenColors(_,et){this._userScreenColors[_].isOverwritten=et}getOverwriteColorForPartMultiplyColors(_){return this._userPartMultiplyColors[_].isOverwritten}getOverwriteColorForPartScreenColors(_){return this._userPartScreenColors[_].isOverwritten}setOverwriteColorForPartColors(_,et,tt,rt){tt[_].isOverwritten=et;for(let it=0;it<this._partChildDrawables[_].length;++it){const st=this._partChildDrawables[_][it];rt[st].isOverwritten=et,et&&(rt[st].Color.R=tt[_].Color.R,rt[st].Color.G=tt[_].Color.G,rt[st].Color.B=tt[_].Color.B,rt[st].Color.A=tt[_].Color.A)}}setOverwriteColorForPartMultiplyColors(_,et){this._userPartMultiplyColors[_].isOverwritten=et,this.setOverwriteColorForPartColors(_,et,this._userPartMultiplyColors,this._userMultiplyColors)}setOverwriteColorForPartScreenColors(_,et){this._userPartScreenColors[_].isOverwritten=et,this.setOverwriteColorForPartColors(_,et,this._userPartScreenColors,this._userScreenColors)}getDrawableCulling(_){if(this.getOverwriteFlagForModelCullings()||this.getOverwriteFlagForDrawableCullings(_))return this._userCullings[_].isCulling;const et=this._model.drawables.constantFlags;return!Live2DCubismCore.Utils.hasIsDoubleSidedBit(et[_])}setDrawableCulling(_,et){this._userCullings[_].isCulling=et}getOverwriteFlagForModelCullings(){return this._isOverwrittenCullings}setOverwriteFlagForModelCullings(_){this._isOverwrittenCullings=_}getOverwriteFlagForDrawableCullings(_){return this._userCullings[_].isOverwritten}setOverwriteFlagForDrawableCullings(_,et){this._userCullings[_].isOverwritten=et}getModelOapcity(){return this._modelOpacity}setModelOapcity(_){this._modelOpacity=_}getModel(){return this._model}getPartIndex(_){let et;const tt=this._model.parts.count;for(et=0;et<tt;++et)if(_==this._partIds[et])return et;return _ in this._notExistPartId?this._notExistPartId[_]:(et=tt+this._notExistPartId.length,this._notExistPartId[_]=et,this._notExistPartOpacities[et]=0,et)}getPartId(_){return this._model.parts.ids[_]}getPartCount(){return this._model.parts.count}setPartOpacityByIndex(_,et){if(_ in this._notExistPartOpacities){this._notExistPartOpacities[_]=et;return}CSM_ASSERT(0<=_&&_<this.getPartCount()),this._partOpacities[_]=et}setPartOpacityById(_,et){const tt=this.getPartIndex(_);tt<0||this.setPartOpacityByIndex(tt,et)}getPartOpacityByIndex(_){return _ in this._notExistPartOpacities?this._notExistPartOpacities[_]:(CSM_ASSERT(0<=_&&_<this.getPartCount()),this._partOpacities[_])}getPartOpacityById(_){const et=this.getPartIndex(_);return et<0?0:this.getPartOpacityByIndex(et)}getParameterIndex(_){let et;const tt=this._model.parameters.count;for(et=0;et<tt;++et)if(_==this._parameterIds[et])return et;return _ in this._notExistParameterId?this._notExistParameterId[_]:(et=this._model.parameters.count+Object.keys(this._notExistParameterId).length,this._notExistParameterId[_]=et,this._notExistParameterValues[et]=0,et)}getParameterCount(){return this._model.parameters.count}getParameterType(_){return this._model.parameters.types[_]}getParameterMaximumValue(_){return this._model.parameters.maximumValues[_]}getParameterMinimumValue(_){return this._model.parameters.minimumValues[_]}getParameterDefaultValue(_){return this._model.parameters.defaultValues[_]}getParameterValueByIndex(_){return _ in this._notExistParameterValues?this._notExistParameterValues[_]:(CSM_ASSERT(0<=_&&_<this.getParameterCount()),this._parameterValues[_])}getParameterValueById(_){const et=this.getParameterIndex(_);return this.getParameterValueByIndex(et)}setParameterValueByIndex(_,et,tt=1){if(_ in this._notExistParameterValues){this._notExistParameterValues[_]=tt==1?et:this._notExistParameterValues[_]*(1-tt)+et*tt;return}CSM_ASSERT(0<=_&&_<this.getParameterCount()),this._model.parameters.maximumValues[_]<et&&(et=this._model.parameters.maximumValues[_]),this._model.parameters.minimumValues[_]>et&&(et=this._model.parameters.minimumValues[_]),this._parameterValues[_]=tt==1?et:this._parameterValues[_]=this._parameterValues[_]*(1-tt)+et*tt}setParameterValueById(_,et,tt=1){const rt=this.getParameterIndex(_);this.setParameterValueByIndex(rt,et,tt)}addParameterValueByIndex(_,et,tt=1){this.setParameterValueByIndex(_,this.getParameterValueByIndex(_)+et*tt)}addParameterValueById(_,et,tt=1){const rt=this.getParameterIndex(_);this.addParameterValueByIndex(rt,et,tt)}multiplyParameterValueById(_,et,tt=1){const rt=this.getParameterIndex(_);this.multiplyParameterValueByIndex(rt,et,tt)}multiplyParameterValueByIndex(_,et,tt=1){this.setParameterValueByIndex(_,this.getParameterValueByIndex(_)*(1+(et-1)*tt))}getDrawableIds(){return this._drawableIds.slice()}getDrawableIndex(_){const et=this._model.drawables.count;for(let tt=0;tt<et;++tt)if(this._drawableIds[tt]==_)return tt;return-1}getDrawableCount(){return this._model.drawables.count}getDrawableId(_){return this._model.drawables.ids[_]}getDrawableRenderOrders(){return this._model.drawables.renderOrders}getDrawableTextureIndices(_){return this.getDrawableTextureIndex(_)}getDrawableTextureIndex(_){return this._model.drawables.textureIndices[_]}getDrawableDynamicFlagVertexPositionsDidChange(_){const et=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasVertexPositionsDidChangeBit(et[_])}getDrawableVertexIndexCount(_){return this._model.drawables.indexCounts[_]}getDrawableVertexCount(_){return this._model.drawables.vertexCounts[_]}getDrawableVertices(_){return this.getDrawableVertexPositions(_)}getDrawableVertexIndices(_){return this._model.drawables.indices[_]}getDrawableVertexPositions(_){return this._model.drawables.vertexPositions[_]}getDrawableVertexUvs(_){return this._model.drawables.vertexUvs[_]}getDrawableOpacity(_){return this._model.drawables.opacities[_]}getDrawableMultiplyColor(_){const et=this._model.drawables.multiplyColors,tt=_*4,rt=new CubismTextureColor;return rt.R=et[tt],rt.G=et[tt+1],rt.B=et[tt+2],rt.A=et[tt+3],rt}getDrawableScreenColor(_){const et=this._model.drawables.screenColors,tt=_*4,rt=new CubismTextureColor;return rt.R=et[tt],rt.G=et[tt+1],rt.B=et[tt+2],rt.A=et[tt+3],rt}getDrawableParentPartIndex(_){return this._model.drawables.parentPartIndices[_]}getDrawableBlendMode(_){const et=this._model.drawables.constantFlags;return Live2DCubismCore.Utils.hasBlendAdditiveBit(et[_])?CubismBlendMode.CubismBlendMode_Additive:Live2DCubismCore.Utils.hasBlendMultiplicativeBit(et[_])?CubismBlendMode.CubismBlendMode_Multiplicative:CubismBlendMode.CubismBlendMode_Normal}getDrawableInvertedMaskBit(_){const et=this._model.drawables.constantFlags;return Live2DCubismCore.Utils.hasIsInvertedMaskBit(et[_])}getDrawableMasks(){return this._model.drawables.masks}getDrawableMaskCounts(){return this._model.drawables.maskCounts}isUsingMasking(){for(let _=0;_<this._model.drawables.count;++_)if(!(this._model.drawables.maskCounts[_]<=0))return!0;return!1}getDrawableDynamicFlagIsVisible(_){const et=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasIsVisibleBit(et[_])}getDrawableDynamicFlagVisibilityDidChange(_){const et=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasVisibilityDidChangeBit(et[_])}getDrawableDynamicFlagOpacityDidChange(_){const et=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasOpacityDidChangeBit(et[_])}getDrawableDynamicFlagRenderOrderDidChange(_){const et=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasRenderOrderDidChangeBit(et[_])}getDrawableDynamicFlagBlendColorDidChange(_){const et=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasBlendColorDidChangeBit(et[_])}loadParameters(){let _=this._model.parameters.count;const et=this._savedParameters.length;_>et&&(_=et);for(let tt=0;tt<_;++tt)this._parameterValues[tt]=this._savedParameters[tt]}initialize(){this._parameterValues=this._model.parameters.values,this._partOpacities=this._model.parts.opacities,this._parameterMaximumValues=this._model.parameters.maximumValues,this._parameterMinimumValues=this._model.parameters.minimumValues;{const et=this._model.parameters.ids,tt=this._model.parameters.count;for(let rt=0;rt<tt;++rt)this._parameterIds.push(et[rt])}const _=this._model.parts.count;{const et=this._model.parts.ids;for(let tt=0;tt<_;++tt)this._partIds.push(et[tt])}{const et=this._model.drawables.ids,tt=this._model.drawables.count,rt=new DrawableCullingData(!1,!1);for(let it=0;it<_;++it){const st=new CubismTextureColor(1,1,1,1),at=new CubismTextureColor(0,0,0,1),ct=new PartColorData(!1,st),ut=new PartColorData(!1,at);this._userPartMultiplyColors.push(ct),this._userPartScreenColors.push(ut),this._partChildDrawables.push([])}for(let it=0;it<tt;++it){const st=new CubismTextureColor(1,1,1,1),at=new CubismTextureColor(0,0,0,1),ct=new DrawableColorData(!1,st),ut=new DrawableColorData(!1,at);this._drawableIds.push(et[it]),this._userMultiplyColors.push(ct),this._userScreenColors.push(ut),this._userCullings.push(rt);const dt=this.getDrawableParentPartIndex(it);dt>=0&&this._partChildDrawables[dt].push(it)}}}constructor(_){this._model=_,this._savedParameters=[],this._parameterIds=[],this._drawableIds=[],this._partIds=[],this._isOverwrittenModelMultiplyColors=!1,this._isOverwrittenModelScreenColors=!1,this._isOverwrittenCullings=!1,this._modelOpacity=1,this._userMultiplyColors=[],this._userScreenColors=[],this._userCullings=[],this._userPartMultiplyColors=[],this._userPartScreenColors=[],this._partChildDrawables=[],this._notExistPartId={},this._notExistParameterId={},this._notExistParameterValues={},this._notExistPartOpacities={},this.initialize()}release(){this._model.release(),this._model=void 0}}class CubismMoc{static create(_,et){if(et&&!this.hasMocConsistency(_))throw new Error("Inconsistent MOC3.");const tt=Live2DCubismCore.Moc.fromArrayBuffer(_);if(tt){const rt=new CubismMoc(tt);return rt._mocVersion=Live2DCubismCore.Version.csmGetMocVersion(tt,_),rt}throw new Error("Failed to CubismMoc.create().")}createModel(){let _;const et=Live2DCubismCore.Model.fromMoc(this._moc);if(et)return _=new CubismModel(et),++this._modelCount,_;throw new Error("Unknown error")}deleteModel(_){_!=null&&--this._modelCount}constructor(_){this._moc=_,this._modelCount=0,this._mocVersion=0}release(){this._moc._release(),this._moc=void 0}getLatestMocVersion(){return Live2DCubismCore.Version.csmGetLatestMocVersion()}getMocVersion(){return this._mocVersion}static hasMocConsistency(_){return Live2DCubismCore.Moc.prototype.hasMocConsistency(_)===1}}var CubismPhysicsTargetType=(_e=>(_e[_e.CubismPhysicsTargetType_Parameter=0]="CubismPhysicsTargetType_Parameter",_e))(CubismPhysicsTargetType||{}),CubismPhysicsSource=(_e=>(_e[_e.CubismPhysicsSource_X=0]="CubismPhysicsSource_X",_e[_e.CubismPhysicsSource_Y=1]="CubismPhysicsSource_Y",_e[_e.CubismPhysicsSource_Angle=2]="CubismPhysicsSource_Angle",_e))(CubismPhysicsSource||{});class CubismPhysicsParticle{constructor(){this.initialPosition=new CubismVector2(0,0),this.position=new CubismVector2(0,0),this.lastPosition=new CubismVector2(0,0),this.lastGravity=new CubismVector2(0,0),this.force=new CubismVector2(0,0),this.velocity=new CubismVector2(0,0)}}class CubismPhysicsSubRig{constructor(){this.normalizationPosition={},this.normalizationAngle={}}}class CubismPhysicsInput{constructor(){this.source={}}}class CubismPhysicsOutput{constructor(){this.destination={},this.translationScale=new CubismVector2(0,0)}}class CubismPhysicsRig{constructor(){this.settings=[],this.inputs=[],this.outputs=[],this.particles=[],this.gravity=new CubismVector2(0,0),this.wind=new CubismVector2(0,0),this.fps=0}}class CubismPhysicsJson{constructor(_){this._json=_}release(){this._json=void 0}getGravity(){const _=new CubismVector2(0,0);return _.x=this._json.Meta.EffectiveForces.Gravity.X,_.y=this._json.Meta.EffectiveForces.Gravity.Y,_}getWind(){const _=new CubismVector2(0,0);return _.x=this._json.Meta.EffectiveForces.Wind.X,_.y=this._json.Meta.EffectiveForces.Wind.Y,_}getFps(){return this._json.Meta.Fps||0}getSubRigCount(){return this._json.Meta.PhysicsSettingCount}getTotalInputCount(){return this._json.Meta.TotalInputCount}getTotalOutputCount(){return this._json.Meta.TotalOutputCount}getVertexCount(){return this._json.Meta.VertexCount}getNormalizationPositionMinimumValue(_){return this._json.PhysicsSettings[_].Normalization.Position.Minimum}getNormalizationPositionMaximumValue(_){return this._json.PhysicsSettings[_].Normalization.Position.Maximum}getNormalizationPositionDefaultValue(_){return this._json.PhysicsSettings[_].Normalization.Position.Default}getNormalizationAngleMinimumValue(_){return this._json.PhysicsSettings[_].Normalization.Angle.Minimum}getNormalizationAngleMaximumValue(_){return this._json.PhysicsSettings[_].Normalization.Angle.Maximum}getNormalizationAngleDefaultValue(_){return this._json.PhysicsSettings[_].Normalization.Angle.Default}getInputCount(_){return this._json.PhysicsSettings[_].Input.length}getInputWeight(_,et){return this._json.PhysicsSettings[_].Input[et].Weight}getInputReflect(_,et){return this._json.PhysicsSettings[_].Input[et].Reflect}getInputType(_,et){return this._json.PhysicsSettings[_].Input[et].Type}getInputSourceId(_,et){return this._json.PhysicsSettings[_].Input[et].Source.Id}getOutputCount(_){return this._json.PhysicsSettings[_].Output.length}getOutputVertexIndex(_,et){return this._json.PhysicsSettings[_].Output[et].VertexIndex}getOutputAngleScale(_,et){return this._json.PhysicsSettings[_].Output[et].Scale}getOutputWeight(_,et){return this._json.PhysicsSettings[_].Output[et].Weight}getOutputDestinationId(_,et){return this._json.PhysicsSettings[_].Output[et].Destination.Id}getOutputType(_,et){return this._json.PhysicsSettings[_].Output[et].Type}getOutputReflect(_,et){return this._json.PhysicsSettings[_].Output[et].Reflect}getParticleCount(_){return this._json.PhysicsSettings[_].Vertices.length}getParticleMobility(_,et){return this._json.PhysicsSettings[_].Vertices[et].Mobility}getParticleDelay(_,et){return this._json.PhysicsSettings[_].Vertices[et].Delay}getParticleAcceleration(_,et){return this._json.PhysicsSettings[_].Vertices[et].Acceleration}getParticleRadius(_,et){return this._json.PhysicsSettings[_].Vertices[et].Radius}getParticlePosition(_,et){const tt=new CubismVector2(0,0);return tt.x=this._json.PhysicsSettings[_].Vertices[et].Position.X,tt.y=this._json.PhysicsSettings[_].Vertices[et].Position.Y,tt}}const PhysicsTypeTagX="X",PhysicsTypeTagY="Y",PhysicsTypeTagAngle="Angle",AirResistance=5,MaximumWeight=100,MovementThreshold=.001,MaxDeltaTime=5;class CubismPhysics{static create(_){const et=new CubismPhysics;return et.parse(_),et._physicsRig.gravity.y=0,et}static delete(_){_!=null&&_.release()}parse(_){this._physicsRig=new CubismPhysicsRig;const et=new CubismPhysicsJson(_);this._physicsRig.gravity=et.getGravity(),this._physicsRig.wind=et.getWind(),this._physicsRig.subRigCount=et.getSubRigCount(),this._physicsRig.fps=et.getFps(),this._currentRigOutputs=[],this._previousRigOutputs=[];let tt=0,rt=0,it=0;for(let st=0;st<this._physicsRig.subRigCount;++st){const at=new CubismPhysicsSubRig;at.normalizationPosition.minimum=et.getNormalizationPositionMinimumValue(st),at.normalizationPosition.maximum=et.getNormalizationPositionMaximumValue(st),at.normalizationPosition.defalut=et.getNormalizationPositionDefaultValue(st),at.normalizationAngle.minimum=et.getNormalizationAngleMinimumValue(st),at.normalizationAngle.maximum=et.getNormalizationAngleMaximumValue(st),at.normalizationAngle.defalut=et.getNormalizationAngleDefaultValue(st),at.inputCount=et.getInputCount(st),at.baseInputIndex=tt,tt+=at.inputCount;for(let dt=0;dt<at.inputCount;++dt){const ot=new CubismPhysicsInput;switch(ot.sourceParameterIndex=-1,ot.weight=et.getInputWeight(st,dt),ot.reflect=et.getInputReflect(st,dt),et.getInputType(st,dt)){case PhysicsTypeTagX:ot.type=CubismPhysicsSource.CubismPhysicsSource_X,ot.getNormalizedParameterValue=getInputTranslationXFromNormalizedParameterValue;break;case PhysicsTypeTagY:ot.type=CubismPhysicsSource.CubismPhysicsSource_Y,ot.getNormalizedParameterValue=getInputTranslationYFromNormalizedParamterValue;break;case PhysicsTypeTagAngle:ot.type=CubismPhysicsSource.CubismPhysicsSource_Angle,ot.getNormalizedParameterValue=getInputAngleFromNormalizedParameterValue;break}ot.source.targetType=CubismPhysicsTargetType.CubismPhysicsTargetType_Parameter,ot.source.id=et.getInputSourceId(st,dt),this._physicsRig.inputs.push(ot)}at.outputCount=et.getOutputCount(st),at.baseOutputIndex=rt;const ct=new PhysicsOutput,ut=new PhysicsOutput;for(let dt=0;dt<at.outputCount;++dt){ct.outputs[dt]=0,ut.outputs[dt]=0;let ot=this._physicsRig.outputs[rt+dt];switch(ot||(ot=new CubismPhysicsOutput,this._physicsRig.outputs[rt+dt]=ot),ot.destinationParameterIndex=-1,ot.vertexIndex=et.getOutputVertexIndex(st,dt),ot.angleScale=et.getOutputAngleScale(st,dt),ot.weight=et.getOutputWeight(st,dt),ot.destination.targetType=CubismPhysicsTargetType.CubismPhysicsTargetType_Parameter,ot.destination.id=et.getOutputDestinationId(st,dt),et.getOutputType(st,dt)){case PhysicsTypeTagX:ot.type=CubismPhysicsSource.CubismPhysicsSource_X,ot.getValue=getOutputTranslationX,ot.getScale=getOutputScaleTranslationX;break;case PhysicsTypeTagY:ot.type=CubismPhysicsSource.CubismPhysicsSource_Y,ot.getValue=getOutputTranslationY,ot.getScale=getOutputScaleTranslationY;break;case PhysicsTypeTagAngle:ot.type=CubismPhysicsSource.CubismPhysicsSource_Angle,ot.getValue=getOutputAngle,ot.getScale=getOutputScaleAngle;break}ot.reflect=et.getOutputReflect(st,dt)}this._currentRigOutputs.push(ct),this._previousRigOutputs.push(ut),rt+=at.outputCount,at.particleCount=et.getParticleCount(st),at.baseParticleIndex=it,it+=at.particleCount;for(let dt=0;dt<at.particleCount;++dt){const ot=new CubismPhysicsParticle;ot.mobility=et.getParticleMobility(st,dt),ot.delay=et.getParticleDelay(st,dt),ot.acceleration=et.getParticleAcceleration(st,dt),ot.radius=et.getParticleRadius(st,dt),ot.position=et.getParticlePosition(st,dt),this._physicsRig.particles.push(ot)}this._physicsRig.settings.push(at)}this.initialize(),et.release()}stabilization(_){var et,tt,rt,it;let st,at,ct,ut;const dt=new CubismVector2;let ot,nt,lt,ht,ft,gt,mt,yt;ft=_.getModel().parameters.values,gt=_.getModel().parameters.maximumValues,mt=_.getModel().parameters.minimumValues,yt=_.getModel().parameters.defaultValues,((tt=(et=this._parameterCaches)==null?void 0:et.length)!=null?tt:0)<_.getParameterCount()&&(this._parameterCaches=new Float32Array(_.getParameterCount())),((it=(rt=this._parameterInputCaches)==null?void 0:rt.length)!=null?it:0)<_.getParameterCount()&&(this._parameterInputCaches=new Float32Array(_.getParameterCount()));for(let bt=0;bt<_.getParameterCount();++bt)this._parameterCaches[bt]=ft[bt],this._parameterInputCaches[bt]=ft[bt];for(let bt=0;bt<this._physicsRig.subRigCount;++bt){st={angle:0},dt.x=0,dt.y=0,ot=this._physicsRig.settings[bt],nt=this._physicsRig.inputs.slice(ot.baseInputIndex),lt=this._physicsRig.outputs.slice(ot.baseOutputIndex),ht=this._physicsRig.particles.slice(ot.baseParticleIndex);for(let _t=0;_t<ot.inputCount;++_t)at=nt[_t].weight/MaximumWeight,nt[_t].sourceParameterIndex==-1&&(nt[_t].sourceParameterIndex=_.getParameterIndex(nt[_t].source.id)),nt[_t].getNormalizedParameterValue(dt,st,ft[nt[_t].sourceParameterIndex],mt[nt[_t].sourceParameterIndex],gt[nt[_t].sourceParameterIndex],yt[nt[_t].sourceParameterIndex],ot.normalizationPosition,ot.normalizationAngle,nt[_t].reflect,at),this._parameterCaches[nt[_t].sourceParameterIndex]=ft[nt[_t].sourceParameterIndex];ct=CubismMath.degreesToRadian(-st.angle),dt.x=dt.x*CubismMath.cos(ct)-dt.y*CubismMath.sin(ct),dt.y=dt.x*CubismMath.sin(ct)+dt.y*CubismMath.cos(ct),updateParticlesForStabilization(ht,ot.particleCount,dt,st.angle,this._options.wind,MovementThreshold*ot.normalizationPosition.maximum);for(let _t=0;_t<ot.outputCount;++_t){const vt=lt[_t].vertexIndex;if(lt[_t].destinationParameterIndex==-1&&(lt[_t].destinationParameterIndex=_.getParameterIndex(lt[_t].destination.id)),vt<1||vt>=ot.particleCount)continue;let xt=new CubismVector2;xt=ht[vt].position.substract(ht[vt-1].position),ut=lt[_t].getValue(xt,ht,vt,lt[_t].reflect,this._options.gravity),this._currentRigOutputs[bt].outputs[_t]=ut,this._previousRigOutputs[bt].outputs[_t]=ut;const wt=lt[_t].destinationParameterIndex,Tt=!Float32Array.prototype.slice&&"subarray"in Float32Array.prototype?JSON.parse(JSON.stringify(ft.subarray(wt))):ft.slice(wt);updateOutputParameterValue(Tt,mt[wt],gt[wt],ut,lt[_t]);for(let St=wt,Et=0;St<this._parameterCaches.length;St++,Et++)ft[St]=this._parameterCaches[St]=Tt[Et]}}}evaluate(_,et){var tt,rt,it,st;let at,ct,ut,dt;const ot=new CubismVector2;let nt,lt,ht,ft;if(0>=et)return;let gt,mt,yt,bt,_t;if(this._currentRemainTime+=et,this._currentRemainTime>MaxDeltaTime&&(this._currentRemainTime=0),gt=_.getModel().parameters.values,mt=_.getModel().parameters.maximumValues,yt=_.getModel().parameters.minimumValues,bt=_.getModel().parameters.defaultValues,((rt=(tt=this._parameterCaches)==null?void 0:tt.length)!=null?rt:0)<_.getParameterCount()&&(this._parameterCaches=new Float32Array(_.getParameterCount())),((st=(it=this._parameterInputCaches)==null?void 0:it.length)!=null?st:0)<_.getParameterCount()){this._parameterInputCaches=new Float32Array(_.getParameterCount());for(let xt=0;xt<_.getParameterCount();++xt)this._parameterInputCaches[xt]=gt[xt]}for(this._physicsRig.fps>0?_t=1/this._physicsRig.fps:_t=et;this._currentRemainTime>=_t;){for(let wt=0;wt<this._physicsRig.subRigCount;++wt){nt=this._physicsRig.settings[wt],ht=this._physicsRig.outputs.slice(nt.baseOutputIndex);for(let Tt=0;Tt<nt.outputCount;++Tt)this._previousRigOutputs[wt].outputs[Tt]=this._currentRigOutputs[wt].outputs[Tt]}const xt=_t/this._currentRemainTime;for(let wt=0;wt<_.getParameterCount();++wt)this._parameterCaches[wt]=this._parameterInputCaches[wt]*(1-xt)+gt[wt]*xt,this._parameterInputCaches[wt]=this._parameterCaches[wt];for(let wt=0;wt<this._physicsRig.subRigCount;++wt){at={angle:0},ot.x=0,ot.y=0,nt=this._physicsRig.settings[wt],lt=this._physicsRig.inputs.slice(nt.baseInputIndex),ht=this._physicsRig.outputs.slice(nt.baseOutputIndex),ft=this._physicsRig.particles.slice(nt.baseParticleIndex);for(let Tt=0;Tt<nt.inputCount;++Tt)ct=lt[Tt].weight/MaximumWeight,lt[Tt].sourceParameterIndex==-1&&(lt[Tt].sourceParameterIndex=_.getParameterIndex(lt[Tt].source.id)),lt[Tt].getNormalizedParameterValue(ot,at,this._parameterCaches[lt[Tt].sourceParameterIndex],yt[lt[Tt].sourceParameterIndex],mt[lt[Tt].sourceParameterIndex],bt[lt[Tt].sourceParameterIndex],nt.normalizationPosition,nt.normalizationAngle,lt[Tt].reflect,ct);ut=CubismMath.degreesToRadian(-at.angle),ot.x=ot.x*CubismMath.cos(ut)-ot.y*CubismMath.sin(ut),ot.y=ot.x*CubismMath.sin(ut)+ot.y*CubismMath.cos(ut),updateParticles(ft,nt.particleCount,ot,at.angle,this._options.wind,MovementThreshold*nt.normalizationPosition.maximum,_t,AirResistance);for(let Tt=0;Tt<nt.outputCount;++Tt){const St=ht[Tt].vertexIndex;if(ht[Tt].destinationParameterIndex==-1&&(ht[Tt].destinationParameterIndex=_.getParameterIndex(ht[Tt].destination.id)),St<1||St>=nt.particleCount)continue;const Et=new CubismVector2;Et.x=ft[St].position.x-ft[St-1].position.x,Et.y=ft[St].position.y-ft[St-1].position.y,dt=ht[Tt].getValue(Et,ft,St,ht[Tt].reflect,this._options.gravity),this._currentRigOutputs[wt].outputs[Tt]=dt;const Ot=ht[Tt].destinationParameterIndex,Rt=!Float32Array.prototype.slice&&"subarray"in Float32Array.prototype?JSON.parse(JSON.stringify(this._parameterCaches.subarray(Ot))):this._parameterCaches.slice(Ot);updateOutputParameterValue(Rt,yt[Ot],mt[Ot],dt,ht[Tt]);for(let Pt=Ot,Mt=0;Pt<this._parameterCaches.length;Pt++,Mt++)this._parameterCaches[Pt]=Rt[Mt]}}this._currentRemainTime-=_t}const vt=this._currentRemainTime/_t;this.interpolate(_,vt)}interpolate(_,et){let tt,rt,it,st,at;it=_.getModel().parameters.values,st=_.getModel().parameters.maximumValues,at=_.getModel().parameters.minimumValues;for(let ct=0;ct<this._physicsRig.subRigCount;++ct){rt=this._physicsRig.settings[ct],tt=this._physicsRig.outputs.slice(rt.baseOutputIndex);for(let ut=0;ut<rt.outputCount;++ut){if(tt[ut].destinationParameterIndex==-1)continue;const dt=tt[ut].destinationParameterIndex,ot=!Float32Array.prototype.slice&&"subarray"in Float32Array.prototype?JSON.parse(JSON.stringify(it.subarray(dt))):it.slice(dt);updateOutputParameterValue(ot,at[dt],st[dt],this._previousRigOutputs[ct].outputs[ut]*(1-et)+this._currentRigOutputs[ct].outputs[ut]*et,tt[ut]);for(let nt=dt,lt=0;nt<it.length;nt++,lt++)it[nt]=ot[lt]}}}setOptions(_){this._options=_}getOption(){return this._options}constructor(){this._options=new Options,this._options.gravity.y=-1,this._options.gravity.x=0,this._options.wind.x=0,this._options.wind.y=0,this._currentRigOutputs=[],this._previousRigOutputs=[],this._currentRemainTime=0}release(){this._physicsRig=void 0}initialize(){let _,et,tt;for(let rt=0;rt<this._physicsRig.subRigCount;++rt){et=this._physicsRig.settings[rt],_=this._physicsRig.particles.slice(et.baseParticleIndex),_[0].initialPosition=new CubismVector2(0,0),_[0].lastPosition=new CubismVector2(_[0].initialPosition.x,_[0].initialPosition.y),_[0].lastGravity=new CubismVector2(0,-1),_[0].lastGravity.y*=-1,_[0].velocity=new CubismVector2(0,0),_[0].force=new CubismVector2(0,0);for(let it=1;it<et.particleCount;++it)tt=new CubismVector2(0,0),tt.y=_[it].radius,_[it].initialPosition=new CubismVector2(_[it-1].initialPosition.x+tt.x,_[it-1].initialPosition.y+tt.y),_[it].position=new CubismVector2(_[it].initialPosition.x,_[it].initialPosition.y),_[it].lastPosition=new CubismVector2(_[it].initialPosition.x,_[it].initialPosition.y),_[it].lastGravity=new CubismVector2(0,-1),_[it].lastGravity.y*=-1,_[it].velocity=new CubismVector2(0,0),_[it].force=new CubismVector2(0,0)}}}class Options{constructor(){this.gravity=new CubismVector2(0,0),this.wind=new CubismVector2(0,0)}}class PhysicsOutput{constructor(){this.outputs=[]}}function getInputTranslationXFromNormalizedParameterValue(_e,_,et,tt,rt,it,st,at,ct,ut){_e.x+=normalizeParameterValue(et,tt,rt,it,st.minimum,st.maximum,st.defalut,ct)*ut}function getInputTranslationYFromNormalizedParamterValue(_e,_,et,tt,rt,it,st,at,ct,ut){_e.y+=normalizeParameterValue(et,tt,rt,it,st.minimum,st.maximum,st.defalut,ct)*ut}function getInputAngleFromNormalizedParameterValue(_e,_,et,tt,rt,it,st,at,ct,ut){_.angle+=normalizeParameterValue(et,tt,rt,it,at.minimum,at.maximum,at.defalut,ct)*ut}function getOutputTranslationX(_e,_,et,tt,rt){let it=_e.x;return tt&&(it*=-1),it}function getOutputTranslationY(_e,_,et,tt,rt){let it=_e.y;return tt&&(it*=-1),it}function getOutputAngle(_e,_,et,tt,rt){let it;return et>=2?rt=_[et-1].position.substract(_[et-2].position):rt=rt.multiplyByScaler(-1),it=CubismMath.directionToRadian(rt,_e),tt&&(it*=-1),it}function getRangeValue(_e,_){return Math.abs(Math.max(_e,_)-Math.min(_e,_))}function getDefaultValue(_e,_){return Math.min(_e,_)+getRangeValue(_e,_)/2}function getOutputScaleTranslationX(_e,_){return _e.x}function getOutputScaleTranslationY(_e,_){return _e.y}function getOutputScaleAngle(_e,_){return _}function updateParticles(_e,_,et,tt,rt,it,st,at){let ct,ut,dt,ot,nt=new CubismVector2(0,0),lt=new CubismVector2(0,0),ht=new CubismVector2(0,0),ft=new CubismVector2(0,0);_e[0].position=new CubismVector2(et.x,et.y),ct=CubismMath.degreesToRadian(tt),ot=CubismMath.radianToDirection(ct),ot.normalize();for(let gt=1;gt<_;++gt)_e[gt].force=ot.multiplyByScaler(_e[gt].acceleration).add(rt),_e[gt].lastPosition=new CubismVector2(_e[gt].position.x,_e[gt].position.y),ut=_e[gt].delay*st*30,nt=_e[gt].position.substract(_e[gt-1].position),dt=CubismMath.directionToRadian(_e[gt].lastGravity,ot)/at,nt.x=CubismMath.cos(dt)*nt.x-nt.y*CubismMath.sin(dt),nt.y=CubismMath.sin(dt)*nt.x+nt.y*CubismMath.cos(dt),_e[gt].position=_e[gt-1].position.add(nt),lt=_e[gt].velocity.multiplyByScaler(ut),ht=_e[gt].force.multiplyByScaler(ut).multiplyByScaler(ut),_e[gt].position=_e[gt].position.add(lt).add(ht),ft=_e[gt].position.substract(_e[gt-1].position),ft.normalize(),_e[gt].position=_e[gt-1].position.add(ft.multiplyByScaler(_e[gt].radius)),CubismMath.abs(_e[gt].position.x)<it&&(_e[gt].position.x=0),ut!=0&&(_e[gt].velocity=_e[gt].position.substract(_e[gt].lastPosition),_e[gt].velocity=_e[gt].velocity.divisionByScalar(ut),_e[gt].velocity=_e[gt].velocity.multiplyByScaler(_e[gt].mobility)),_e[gt].force=new CubismVector2(0,0),_e[gt].lastGravity=new CubismVector2(ot.x,ot.y)}function updateParticlesForStabilization(_e,_,et,tt,rt,it){let st,at,ct=new CubismVector2(0,0);_e[0].position=new CubismVector2(et.x,et.y),st=CubismMath.degreesToRadian(tt),at=CubismMath.radianToDirection(st),at.normalize();for(let ut=1;ut<_;++ut)_e[ut].force=at.multiplyByScaler(_e[ut].acceleration).add(rt),_e[ut].lastPosition=new CubismVector2(_e[ut].position.x,_e[ut].position.y),_e[ut].velocity=new CubismVector2(0,0),ct=_e[ut].force,ct.normalize(),ct=ct.multiplyByScaler(_e[ut].radius),_e[ut].position=_e[ut-1].position.add(ct),CubismMath.abs(_e[ut].position.x)<it&&(_e[ut].position.x=0),_e[ut].force=new CubismVector2(0,0),_e[ut].lastGravity=new CubismVector2(at.x,at.y)}function updateOutputParameterValue(_e,_,et,tt,rt){let it,st,at;it=rt.getScale(rt.translationScale,rt.angleScale),st=tt*it,st<_?(st<rt.valueBelowMinimum&&(rt.valueBelowMinimum=st),st=_):st>et&&(st>rt.valueExceededMaximum&&(rt.valueExceededMaximum=st),st=et),at=rt.weight/MaximumWeight,at>=1||(st=_e[0]*(1-at)+st*at),_e[0]=st}function normalizeParameterValue(_e,_,et,tt,rt,it,st,at){let ct=0;const ut=CubismMath.max(et,_);ut<_e&&(_e=ut);const dt=CubismMath.min(et,_);dt>_e&&(_e=dt);const ot=CubismMath.min(rt,it),nt=CubismMath.max(rt,it),lt=st,ht=getDefaultValue(dt,ut),ft=_e-ht;switch(Math.sign(ft)){case 1:{const gt=nt-lt,mt=ut-ht;mt!=0&&(ct=ft*(gt/mt),ct+=lt);break}case-1:{const gt=ot-lt,mt=dt-ht;mt!=0&&(ct=ft*(gt/mt),ct+=lt);break}case 0:{ct=lt;break}}return at?ct:ct*-1}Live2DFactory.registerRuntime({version:4,ready:cubism4Ready,test(_e){return _e instanceof Cubism4ModelSettings||Cubism4ModelSettings.isValidJSON(_e)},isValidMoc(_e){if(_e.byteLength<4)return!1;const _=new Int8Array(_e,0,4);return String.fromCharCode(..._)==="MOC3"},createModelSettings(_e){return new Cubism4ModelSettings(_e)},createCoreModel(_e,_){const et=CubismMoc.create(_e,!!(_!=null&&_.checkMocConsistency));try{const tt=et.createModel();return tt.__moc=et,tt}catch(tt){try{et.release()}catch{}throw tt}},createInternalModel(_e,_,et){const tt=new Cubism4InternalModel(_e,_,et),rt=_e;return rt.__moc&&(tt.__moc=rt.__moc,delete rt.__moc,tt.once("destroy",releaseMoc)),tt},createPhysics(_e,_){return CubismPhysics.create(_)},createPose(_e,_){return CubismPose.create(_)}});function releaseMoc(){var _e;(_e=this.__moc)==null||_e.release()}const DEFAULT_MODEL_STATE={currentModel:null},Live2DModelContext=reactExports.createContext(null),Live2DModelProvider=reactExports.memo(({children:_e})=>{const[_,et]=reactExports.useState(DEFAULT_MODEL_STATE.currentModel),tt=reactExports.useCallback(it=>{et(st=>st?Object.assign(st,it):null)},[]),rt=reactExports.useMemo(()=>({currentModel:_,setCurrentModel:et,updateModelState:tt}),[_,tt]);return jsxRuntimeExports.jsx(Live2DModelContext.Provider,{value:rt,children:_e})});function useLive2DModel$1(){const _e=reactExports.useContext(Live2DModelContext);if(!_e)throw new Error("useLive2DModel must be used within a Live2DModelProvider");return _e}const SCALE_SPEED=.01,resetModelPosition=(_e,_,et,tt,rt)=>{if(!_e)return;const it=Number(tt||0),st=Number(rt||0),at=(_-_e.width)/2+it,ct=(et-_e.height)/2+st;_e.position.set(at,ct)},handleModelScale=(_e,_)=>{const et=_>0?-.01:SCALE_SPEED,tt=_e.scale.x,rt=tt+et,st=tt+(rt-tt)*.3;return _e.scale.set(st),st},setModelSize=(_e,_)=>{if(!_e||!_)return;const et=Number(window.devicePixelRatio||1);_e.scale.set(Number(_)),_e.filters&&_e.filters.forEach(tt=>{"resolution"in tt&&Object.defineProperty(tt,"resolution",{value:et})})},useLive2DResize=(_e,_,et,tt,rt)=>{const{updateModelScale:it}=useLive2DConfig(),st=reactExports.useRef(null),at=reactExports.useRef(null),ct=reactExports.useCallback(ut=>{if(!et.current||!(tt!=null&&tt.scrollToResize))return;ut.preventDefault();const dt=handleModelScale(et.current,ut.deltaY);(!at.current||Math.abs(dt-at.current)>1e-4)&&(st.current&&clearTimeout(st.current),st.current=setTimeout(()=>{it(dt),at.current=dt},500))},[et,tt==null?void 0:tt.scrollToResize,it]);reactExports.useEffect(()=>{var dt;const ut=(dt=_e.current)==null?void 0:dt.querySelector("canvas");if(ut)return ut.addEventListener("wheel",ct,{passive:!1}),()=>ut.removeEventListener("wheel",ct)},[ct,_e]),reactExports.useEffect(()=>{const ut=new ResizeObserver(()=>{var dt;if(et.current&&_.current){const{width:ot,height:nt}=rt?{width:window.innerWidth,height:window.innerHeight}:((dt=_e.current)==null?void 0:dt.getBoundingClientRect())||{width:0,height:0};_.current.renderer.resize(ot,nt),_.current.renderer.clear(),resetModelPosition(et.current,ot,nt,tt==null?void 0:tt.initialXshift,tt==null?void 0:tt.initialYshift)}});return _e.current&&ut.observe(_e.current),()=>{ut.disconnect()}},[et,_e,rt,_]),reactExports.useEffect(()=>()=>{st.current&&clearTimeout(st.current)},[])},useLive2DModel=({isPet:_e,modelInfo:_})=>{const et=reactExports.useRef(null),tt=reactExports.useRef(null),rt=reactExports.useRef(null),it=reactExports.useRef(null),st=reactExports.useRef(void 0),{setCurrentModel:at}=useLive2DModel$1(),{setIsLoading:ct}=useLive2DConfig(),ut=reactExports.useRef(!1),{setAiState:dt,aiState:ot}=useAiState(),[nt,lt]=reactExports.useState(!1),{forceIgnoreMouse:ht}=useForceIgnoreMouse(),ft=reactExports.useCallback(()=>{rt.current&&(rt.current.removeAllListeners(),at(null),tt.current&&(tt.current.stage.removeChild(rt.current),rt.current.destroy({children:!0,texture:!0,baseTexture:!0}),clearTextureCache(),rt.current=null)),lt(!1)},[at]),gt=reactExports.useCallback(()=>{tt.current&&(rt.current&&ft(),tt.current.stage.removeChildren(),clearTextureCache(),tt.current.renderer.clear(),tt.current.destroy(!0,{children:!0,texture:!0,baseTexture:!0}),destroyTextureCache(),tt.current=null)},[ft]);reactExports.useEffect(()=>{if(!tt.current&&et.current){const xt=new Application({view:et.current,autoStart:!0,width:window.innerWidth,height:window.innerHeight,backgroundAlpha:0,antialias:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,powerPreference:"high-performance",resolution:window.devicePixelRatio||1,autoDensity:!0});xt.ticker.add(()=>{xt.renderer&&xt.renderer.render(xt.stage)}),tt.current=xt}return()=>{gt()}},[gt]);const mt=reactExports.useCallback(async xt=>{!tt.current||!_||(rt.current&&(rt.current.removeAllListeners(),tt.current.stage.removeChild(rt.current),rt.current.destroy({children:!0,texture:!0,baseTexture:!0}),clearTextureCache()),rt.current=xt,at(xt),tt.current.stage.addChild(xt),xt.interactive=!0,xt.cursor="pointer",lt(!0))},[at]),yt=reactExports.useCallback(()=>{var Tt;if(!rt.current)return;setModelSize(rt.current,st.current);const{width:xt,height:wt}=_e?{width:window.innerWidth,height:window.innerHeight}:((Tt=it.current)==null?void 0:Tt.getBoundingClientRect())||{width:0,height:0};resetModelPosition(rt.current,xt,wt,_==null?void 0:_.initialXshift,_==null?void 0:_.initialYshift)},[_==null?void 0:_.initialXshift,_==null?void 0:_.initialYshift]),bt=reactExports.useCallback(async()=>{if(!(!(_!=null&&_.url)||!tt.current)&&!ut.current){console.log("Loading model:",_.url);try{ut.current=!0,ct(!0),dt(AiStateEnum.LOADING);const xt=await Live2DModel.from(_.url,{autoHitTest:!0,autoFocus:_.pointerInteractive??!1,autoUpdate:!0,ticker:Ticker.shared,motionPreload:MotionPreloadStrategy.IDLE,idleMotionGroup:_.idleMotionGroupName});await mt(xt)}catch(xt){console.error("Failed to load Live2D model:",xt)}finally{ut.current=!1,ct(!1),dt(AiStateEnum.IDLE)}}},[_==null?void 0:_.url,_==null?void 0:_.pointerInteractive,ct,mt]),_t=reactExports.useCallback(xt=>{if(!xt)return;if(xt.removeAllListeners("pointerenter"),xt.removeAllListeners("pointerleave"),xt.removeAllListeners("rightdown"),xt.removeAllListeners("pointerdown"),xt.removeAllListeners("pointermove"),xt.removeAllListeners("pointerup"),xt.removeAllListeners("pointerupoutside"),ht&&_e){xt.interactive=!1,xt.cursor="default";return}xt.interactive=!0,xt.cursor="pointer";let wt=!1,Tt=0,St=0,Et=!1;const Ot=5;_e&&(xt.on("pointerenter",()=>{var Rt;(Rt=window.api)==null||Rt.updateComponentHover("live2d-model",!0)}),xt.on("pointerleave",()=>{var Rt;wt||(Rt=window.api)==null||Rt.updateComponentHover("live2d-model",!1)}),xt.on("rightdown",Rt=>{Rt.data.originalEvent.preventDefault(),window.api.showContextMenu()})),xt.on("pointerdown",Rt=>{Rt.button===0&&(wt=!0,Et=!0,Tt=Rt.global.x-xt.x,St=Rt.global.y-xt.y)}),xt.on("pointermove",Rt=>{if(wt){const Pt=Rt.global.x-Tt,Mt=Rt.global.y-St,$t=Pt-xt.x,kt=Mt-xt.y;Math.hypot($t,kt)>Ot&&(Et=!1),xt.position.x=Pt,xt.position.y=Mt}}),xt.on("pointerup",Rt=>{wt&&(wt=!1,Et&&vt(xt,Rt.global.x,Rt.global.y))}),xt.on("pointerupoutside",()=>{wt=!1})},[_e,ht]),vt=reactExports.useCallback((xt,wt,Tt)=>{if(!(_!=null&&_.tapMotions))return;console.log("handleTapMotion",_==null?void 0:_.tapMotions);const St=xt.toLocal(new Point(wt,Tt));if(!xt.hitTest(St.x,St.y).find(Rt=>{var Mt;const Pt=(Mt=_==null?void 0:_.tapMotions)==null?void 0:Mt[Rt];return Pt?(console.log(`Found motion group for area ${Rt}:`,Pt),playRandomMotion(xt,Pt),!0):!1})&&Object.keys(_.tapMotions).length>0){const Rt=getMergedMotionGroup(_.tapMotions);playRandomMotion(xt,Rt)}},[_==null?void 0:_.tapMotions]);return reactExports.useEffect(()=>{var xt,wt,Tt,St;ot===AiStateEnum.IDLE&&(console.log("defaultEmotion: ",_==null?void 0:_.defaultEmotion),_!=null&&_.defaultEmotion?(wt=(xt=rt.current)==null?void 0:xt.internalModel.motionManager.expressionManager)==null||wt.setExpression(_.defaultEmotion):(St=(Tt=rt.current)==null?void 0:Tt.internalModel.motionManager.expressionManager)==null||St.resetExpression())},[rt.current,ot,_==null?void 0:_.defaultEmotion]),reactExports.useEffect(()=>(_!=null&&_.url&&bt(),()=>{ft()}),[_==null?void 0:_.url,_==null?void 0:_.pointerInteractive,bt,ft]),reactExports.useEffect(()=>{st.current=_==null?void 0:_.kScale},[_==null?void 0:_.kScale]),reactExports.useEffect(()=>{yt()},[nt,yt]),reactExports.useEffect(()=>{rt.current&&nt&&_t(rt.current)},[nt,_t,ht]),{canvasRef:et,appRef:tt,modelRef:rt,containerRef:it}},playRandomMotion=(_e,_)=>{if(!_||Object.keys(_).length===0)return;const et=Object.values(_).reduce((rt,it)=>rt+it,0);let tt=Math.random()*et;Object.entries(_).find(([rt,it])=>{if(tt-=it,tt<=0){const st=audioTaskQueue.hasTask()?MotionPriority.NORMAL:MotionPriority.FORCE;return console.log(`Playing weighted motion: ${rt} (weight: ${it}/${et}, priority: ${st})`),_e.motion(rt,void 0,st),!0}return!1})},getMergedMotionGroup=_e=>{const _={};return Object.values(_e).flatMap(et=>Object.entries(et)).reduce((et,[tt,rt])=>(et[tt]||(et[tt]={total:0,count:0}),et[tt].total+=rt,et[tt].count+=1,et),_),Object.entries(_).reduce((et,[tt,{total:rt,count:it}])=>({...et,[tt]:rt/it}),{})},DEFAULT_HISTORY={messages:[],historyList:[],currentHistoryUid:null,fullResponse:""},ChatHistoryContext=reactExports.createContext(null);function ChatHistoryProvider({children:_e}){const[_,et]=reactExports.useState(DEFAULT_HISTORY.messages),[tt,rt]=reactExports.useState(DEFAULT_HISTORY.historyList),[it,st]=reactExports.useState(DEFAULT_HISTORY.currentHistoryUid),[at,ct]=reactExports.useState(DEFAULT_HISTORY.fullResponse),[ut,dt]=reactExports.useState(!1),ot=reactExports.useCallback(mt=>{const yt={id:Date.now().toString(),content:mt,role:"human",timestamp:new Date().toISOString()};et(bt=>[...bt,yt])},[]),nt=reactExports.useCallback((mt,yt,bt)=>{et(_t=>{const vt=_t[_t.length-1];return ut||!vt||vt.role!=="ai"?(dt(!1),[..._t,{id:Date.now().toString(),content:mt,role:"ai",timestamp:new Date().toISOString(),name:yt,avatar:bt}]):[..._t.slice(0,-1),{...vt,content:vt.content+mt,timestamp:new Date().toISOString()}]})},[ut,dt]),lt=reactExports.useCallback((mt,yt)=>{mt||console.error("updateHistoryList: uid is null"),it||console.error("updateHistoryList: currentHistoryUid is null"),rt(bt=>bt.map(_t=>_t.uid===mt?{..._t,latest_message:yt?{content:yt.content,role:yt.role,timestamp:yt.timestamp}:null,timestamp:(yt==null?void 0:yt.timestamp)||_t.timestamp}:_t))},[it]),ht=reactExports.useCallback(mt=>{ct(yt=>yt+(mt||""))},[]),ft=reactExports.useCallback(()=>{ct(DEFAULT_HISTORY.fullResponse)},[]),gt=reactExports.useMemo(()=>({messages:_,historyList:tt,currentHistoryUid:it,appendHumanMessage:ot,appendAIMessage:nt,setMessages:et,setHistoryList:rt,setCurrentHistoryUid:st,updateHistoryList:lt,fullResponse:at,setFullResponse:ct,appendResponse:ht,clearResponse:ft,setForceNewMessage:dt}),[_,tt,it,ot,nt,lt,at,ht,ft,dt]);return jsxRuntimeExports.jsx(ChatHistoryContext.Provider,{value:gt,children:_e})}function useChatHistory(){const _e=reactExports.useContext(ChatHistoryContext);if(!_e)throw new Error("useChatHistory must be used within a ChatHistoryProvider");return _e}const useInterrupt=()=>{const{aiState:_e,setAiState:_}=useAiState(),{sendMessage:et}=useWebSocket(),{fullResponse:tt,clearResponse:rt}=useChatHistory(),{currentModel:it}=useLive2DModel$1(),{subtitleText:st,setSubtitleText:at}=useSubtitle();return{interrupt:(ut=!0)=>{_e==="thinking-speaking"&&(console.log("Interrupting conversation chain"),ut&&et({type:"interrupt-signal",text:tt}),_("interrupted"),audioTaskQueue.clearQueue(),it?it.stopSpeaking():console.error("Live2D model is not initialized"),rt(),st==="Thinking..."&&at(""),console.log("Interrupted!"))}}},useAudioTask=()=>{const{aiState:_e,backendSynthComplete:_,setBackendSynthComplete:et}=useAiState(),{setSubtitleText:tt}=useSubtitle(),{appendResponse:rt,appendAIMessage:it}=useChatHistory(),{currentModel:st}=useLive2DModel$1(),{sendMessage:at}=useWebSocket(),ct=reactExports.useRef({aiState:_e,currentModel:st,setSubtitleText:tt,appendResponse:rt,appendAIMessage:it});ct.current={aiState:_e,currentModel:st,setSubtitleText:tt,appendResponse:rt,appendAIMessage:it};const ut=ot=>new Promise(nt=>{const{aiState:lt,currentModel:ht,setSubtitleText:ft,appendResponse:gt,appendAIMessage:mt}=ct.current;if(lt==="interrupted"){console.error("Audio playback blocked. State:",lt),nt();return}const{audioBase64:yt,displayText:bt,expressions:_t,forwarded:vt}=ot;if(bt&&(gt(bt.text),mt(bt.text,bt.name,bt.avatar),yt&&ft(bt.text),vt||at({type:"audio-play-start",display_text:bt,forwarded:!0})),!ht){console.error("Model not initialized"),nt();return}try{(_t==null?void 0:_t[0])!==void 0&&ht.expression(_t[0]);let xt=!1;yt?ht.speak(`data:audio/wav;base64,${yt}`,{onFinish:()=>{console.log("Voiceline is over"),xt=!0,nt()},onError:Tt=>{console.error("Audio playback error:",Tt),xt=!0,nt()}}):nt();const wt=()=>{xt||setTimeout(wt,100)};wt()}catch(xt){console.error("Speak function error:",xt),nt()}});return reactExports.useEffect(()=>{let ot=!0;return(async()=>{await audioTaskQueue.waitForCompletion(),ot&&_&&(at({type:"frontend-playback-complete"}),et(!1))})(),()=>{ot=!1}},[_,at,et]),{addAudioTask:async ot=>{var lt;const{aiState:nt}=ct.current;if(nt==="interrupted"){console.log("Skipping audio task due to interrupted state");return}console.log(`Adding audio task ${(lt=ot.displayText)==null?void 0:lt.text} to queue`),audioTaskQueue.addTask(()=>ut(ot))},appendResponse:rt}},Live2D$1=reactExports.memo(({isPet:_e})=>{const{modelInfo:_,isLoading:et}=useLive2DConfig(),{forceIgnoreMouse:tt}=useForceIgnoreMouse();useIpcHandlers({isPet:_e});const{canvasRef:rt,appRef:it,modelRef:st,containerRef:at}=useLive2DModel({isPet:_e,modelInfo:_});return useLive2DResize(at,it,st,_,_e),useInterrupt(),useAudioTask(),reactExports.useEffect(()=>(st.current&&(window.live2d={expression:ct=>{var ut;return(ut=st.current)==null?void 0:ut.expression(ct)},setExpression:ct=>{var ut,dt;ct!==void 0&&((dt=(ut=st.current)==null?void 0:ut.internalModel.motionManager.expressionManager)==null||dt.setExpression(ct))},setRandomExpression:()=>{var ct,ut;return(ut=(ct=st.current)==null?void 0:ct.internalModel.motionManager.expressionManager)==null?void 0:ut.setRandomExpression()},getExpressions:()=>{var ct,ut;return(ut=(ct=st.current)==null?void 0:ct.internalModel.motionManager.expressionManager)==null?void 0:ut.definitions.map(dt=>dt.name)}}),()=>{delete window.live2d}),[st.current]),jsxRuntimeExports.jsx("div",{ref:at,style:{width:_e?"100vw":"100%",height:_e?"100vh":"100%",pointerEvents:_e&&tt?"none":"auto",overflow:"hidden",opacity:et?0:1,transition:"opacity 0.3s ease-in-out"},children:jsxRuntimeExports.jsx("canvas",{id:"canvas",ref:rt,style:{width:"100%",height:"100%",pointerEvents:_e&&tt?"none":"auto",display:"block"}})})});Live2D$1.displayName="Live2D";function Canvas(){return jsxRuntimeExports.jsx(Background,{children:jsxRuntimeExports.jsxs(Box,{...canvasStyles.canvas.container,children:[jsxRuntimeExports.jsx(Live2D$1,{isPet:!1}),jsxRuntimeExports.jsx(WebSocketStatus,{})]})})}const GroupContext=reactExports.createContext(null);function GroupProvider({children:_e}){const[_,et]=reactExports.useState(""),[tt,rt]=reactExports.useState([]),[it,st]=reactExports.useState(!1),at=()=>{rt([]),st(!1)},ct=reactExports.useMemo(()=>tt.includes(_)?[_,...tt.filter(ut=>ut!==_)]:tt,[tt,_]);return jsxRuntimeExports.jsx(GroupContext.Provider,{value:{selfUid:_,groupMembers:tt,isOwner:it,setSelfUid:et,setGroupMembers:rt,setIsOwner:st,sortedGroupMembers:ct,resetGroupState:at},children:_e})}function useGroup(){const _e=reactExports.useContext(GroupContext);if(!_e)throw new Error("useGroup must be used within a GroupProvider");return _e}function WebSocketHandler({children:_e}){const[_,et]=reactExports.useState("CLOSED"),[tt,rt]=useLocalStorage("wsUrl",defaultWsUrl),[it,st]=useLocalStorage("baseUrl",defaultBaseUrl),{aiState:at,setAiState:ct,backendSynthComplete:ut,setBackendSynthComplete:dt}=useAiState(),{setModelInfo:ot}=useLive2DConfig(),{setSubtitleText:nt}=useSubtitle(),{clearResponse:lt,setForceNewMessage:ht}=useChatHistory(),{addAudioTask:ft}=useAudioTask(),gt=useBgUrl(),{confUid:mt,setConfName:yt,setConfUid:bt,setConfigFiles:_t}=useConfig(),[vt,xt]=reactExports.useState(void 0),{setSelfUid:wt,setGroupMembers:Tt,setIsOwner:St}=useGroup(),{startMic:Et,stopMic:Ot,autoStartMicOnConvEnd:Rt}=useVAD(),Pt=reactExports.useRef(Rt),{interrupt:Mt}=useInterrupt();reactExports.useEffect(()=>{Pt.current=Rt},[Rt]),reactExports.useEffect(()=>{vt&&(ot(vt),xt(void 0))},[vt,ot,mt]);const{setCurrentHistoryUid:$t,setMessages:kt,setHistoryList:Lt,appendHumanMessage:Nt}=useChatHistory(),zt=reactExports.useCallback(Ht=>{switch(Ht){case"start-mic":console.log("Starting microphone..."),Et();break;case"stop-mic":console.log("Stopping microphone..."),Ot();break;case"conversation-chain-start":ct("thinking-speaking"),audioTaskQueue.clearQueue(),lt();break;case"conversation-chain-end":audioTaskQueue.addTask(()=>new Promise(sr=>{ct(ir=>ir==="thinking-speaking"?(Pt.current&&Et(),"idle"):ir),sr()}));break;default:console.warn("Unknown control command:",Ht)}},[ct,lt,ht,Et,Ot]),Ut=reactExports.useCallback(Ht=>{var sr,ir;switch(console.log("Received message from server:",Ht),Ht.type){case"control":Ht.text&&zt(Ht.text);break;case"set-model-and-conf":if(ct("loading"),Ht.conf_name&&yt(Ht.conf_name),Ht.conf_uid&&(bt(Ht.conf_uid),console.log("confUid",Ht.conf_uid)),Ht.client_uid&&wt(Ht.client_uid),xt(Ht.model_info),Ht.model_info&&!Ht.model_info.url.startsWith("http")){const er=it+Ht.model_info.url;Ht.model_info.url=er}ct("idle");break;case"full-text":Ht.text&&nt(Ht.text);break;case"config-files":Ht.configs&&_t(Ht.configs);break;case"config-switched":ct("idle"),nt("New Character Loaded"),wsService.sendMessage({type:"fetch-history-list"}),wsService.sendMessage({type:"create-new-history"});break;case"background-files":Ht.files&&(gt==null||gt.setBackgroundFiles(Ht.files));break;case"audio":at==="interrupted"||at==="listening"?console.log("Audio playback intercepted. Sentence:",(sr=Ht.display_text)==null?void 0:sr.text):(console.log("actions",Ht.actions),ft({audioBase64:Ht.audio||"",volumes:Ht.volumes||[],sliceLength:Ht.slice_length||0,displayText:Ht.display_text||null,expressions:((ir=Ht.actions)==null?void 0:ir.expressions)||null,forwarded:Ht.forwarded||!1}));break;case"history-data":Ht.messages&&kt(Ht.messages);break;case"new-history-created":if(ct("idle"),nt("New Conversation Started"),Ht.history_uid){$t(Ht.history_uid),kt([]);const er={uid:Ht.history_uid,latest_message:null,timestamp:new Date().toISOString()};Lt(dr=>[er,...dr])}break;case"history-deleted":break;case"history-list":Ht.histories&&(Lt(Ht.histories),Ht.histories.length>0&&$t(Ht.histories[0].uid));break;case"user-input-transcription":console.log("user-input-transcription: ",Ht.text),Ht.text&&Nt(Ht.text);break;case"error":break;case"group-update":console.log("Received group-update:",Ht.members),Ht.members&&Tt(Ht.members),Ht.is_owner!==void 0&&St(Ht.is_owner);break;case"group-operation-result":break;case"backend-synth-complete":dt(!0);break;case"conversation-chain-end":audioTaskQueue.hasTask()||ct(er=>er==="thinking-speaking"?"idle":er);break;case"force-new-message":ht(!0);break;case"interrupt-signal":Mt(!1);break;default:console.warn("Unknown message type:",Ht.type)}},[at,ft,Nt,it,gt,ct,yt,bt,_t,$t,Lt,kt,ot,nt,Et,Ot,wt,Tt,St,ut,dt,lt]);reactExports.useEffect(()=>{wsService.connect(tt)},[tt]),reactExports.useEffect(()=>{const Ht=wsService.onStateChange(et),sr=wsService.onMessage(Ut);return()=>{Ht.unsubscribe(),sr.unsubscribe()}},[tt,Ut]);const Vt=reactExports.useMemo(()=>({sendMessage:wsService.sendMessage.bind(wsService),wsState:_,reconnect:()=>wsService.connect(tt),wsUrl:tt,setWsUrl:rt,baseUrl:it,setBaseUrl:st}),[_,tt,it]);return reactExports.useEffect(()=>{rt(defaultWsUrl),st(defaultBaseUrl),console.log(defaultBaseUrl,"-----000000")},[rt,st]),jsxRuntimeExports.jsx(WebSocketContext.Provider,{value:Vt,children:_e})}const toaster=createToaster({placement:"top-end",pauseOnPageIdle:!0,max:5});function Toaster(){return jsxRuntimeExports.jsx(Portal,{children:jsxRuntimeExports.jsx(Toaster$1,{toaster,insetInline:{mdDown:"4"},children:_e=>{var _;return jsxRuntimeExports.jsxs(ToastRoot,{width:{md:"sm"},children:[_e.type==="loading"?jsxRuntimeExports.jsx(Spinner,{size:"sm",color:"blue.solid"}):jsxRuntimeExports.jsx(ToastIndicator,{}),jsxRuntimeExports.jsxs(Stack,{gap:"1",flex:"1",maxWidth:"100%",children:[_e.title&&jsxRuntimeExports.jsx(ToastTitle,{children:_e.title}),_e.description&&jsxRuntimeExports.jsx(ToastDescription,{children:_e.description})]}),_e.action&&jsxRuntimeExports.jsx(ToastActionTrigger,{children:_e.action.label}),((_=_e.meta)==null?void 0:_.closable)&&jsxRuntimeExports.jsx(ToastCloseTrigger,{})]})}})})}function useTriggerSpeak(){const{sendMessage:_e}=useWebSocket(),{captureAllMedia:_}=useMediaCapture();return{sendTriggerSignal:reactExports.useCallback(async tt=>{const rt=await _();_e({type:"ai-speak-signal",idle_time:tt,images:rt})},[_e,_])}}const defaultSettings={allowProactiveSpeak:!1,idleSecondsToSpeak:5,allowButtonTrigger:!1},ProactiveSpeakContext=reactExports.createContext(null);function ProactiveSpeakProvider({children:_e}){const[_,et]=useLocalStorage("proactiveSpeakSettings",defaultSettings),{aiState:tt}=useAiState(),{sendTriggerSignal:rt}=useTriggerSpeak(),it=reactExports.useRef(null),st=reactExports.useRef(null),at=reactExports.useCallback(()=>{it.current&&(clearTimeout(it.current),it.current=null),st.current=null},[]),ct=reactExports.useCallback(()=>{at(),_.allowProactiveSpeak&&(st.current=Date.now(),it.current=setTimeout(()=>{const ot=(Date.now()-st.current)/1e3;rt(ot)},_.idleSecondsToSpeak*1e3))},[_.allowProactiveSpeak,_.idleSecondsToSpeak,rt,at]);reactExports.useEffect(()=>{tt===AiStateEnum.IDLE?ct():at()},[tt,ct,at]),reactExports.useEffect(()=>()=>{at()},[at]);const ut=reactExports.useCallback(ot=>{et(ot)},[et]),dt=reactExports.useMemo(()=>({settings:_,updateSettings:ut}),[_,ut]);return jsxRuntimeExports.jsx(ProactiveSpeakContext.Provider,{value:dt,children:_e})}function NewsFeed(){const[_e,_]=reactExports.useState(null),{setNewsImageUrl:et}=useBgUrl(),[tt,rt]=reactExports.useState(null),it=reactExports.useRef(null),st=reactExports.useRef(!1),at=useWebSocket(),ct=reactExports.useCallback(async()=>{if(st.current){console.log("Already loading, skipping fetch...");return}st.current=!0,rt(null);try{console.log("Fetching news...");const ut=await fetch("https://backend.spredd.markets/dashboard/news");if(ut.status===404){console.log("No unread news available"),rt("No unread news available");return}if(!ut.ok)throw new Error(`HTTP error! status: ${ut.status}`);const dt=await ut.json();dt.success&&dt.data?it.current!==dt.data.id?(_(dt.data),et(dt.data.image),it.current=dt.data.id,console.log("New news fetched:",dt.data.title)):console.log("Same news as before, skipping..."):rt(dt.message||"Failed to fetch news")}catch(ut){console.error("Error fetching news:",ut),rt(ut instanceof Error?ut.message:"Unknown error occurred")}finally{st.current=!1}},[]);return reactExports.useEffect(()=>{if(_e==null||!at)return;const ut=`
            New News Alert! 📰
            Title: ${_e.title}
            Description: ${_e.description}
            Source: ${_e.source}
        `.trim();try{at.sendMessage({type:"text-input",text:ut}),console.log("News sent to websocket:",_e.id)}catch(dt){console.error("Error sending message to websocket:",dt)}_(null)},[_e,at]),reactExports.useEffect(()=>{console.log("Component mounted, fetching initial news"),ct()},[]),reactExports.useEffect(()=>{console.log("Setting up 15-second interval");const ut=setInterval(()=>{console.log("Interval triggered - fetching news"),ct()},6e4);return()=>{console.log("Cleaning up interval"),clearInterval(ut)}},[]),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{})}function App(){const[_e,_]=reactExports.useState("window"),et=window.api!==void 0,tt=reactExports.useRef(null);return reactExports.useEffect(()=>{const rt=tt.current;rt!==null&&(rt.loop=!0,rt.volume=.1,rt.play().catch(it=>console.log("Autoplay blocked:",it)))},[]),reactExports.useEffect(()=>{et&&window.electron.ipcRenderer.on("pre-mode-changed",(rt,it)=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{window.electron.ipcRenderer.send("renderer-ready-for-mode-change",it)})})})},[et]),reactExports.useEffect(()=>{et&&window.electron.ipcRenderer.on("mode-changed",(rt,it)=>{_(it),requestAnimationFrame(()=>{requestAnimationFrame(()=>{window.electron.ipcRenderer.send("mode-change-rendered")})})})},[et]),reactExports.useEffect(()=>{const rt=()=>{const it=window.innerHeight*.01;document.documentElement.style.setProperty("--vh",`${it}px`)};return rt(),window.addEventListener("resize",rt),()=>window.removeEventListener("resize",rt)},[]),jsxRuntimeExports.jsx(ChakraProvider,{value:defaultSystem,children:jsxRuntimeExports.jsx(Live2DModelProvider,{children:jsxRuntimeExports.jsx(CameraProvider,{children:jsxRuntimeExports.jsx(ScreenCaptureProvider,{children:jsxRuntimeExports.jsx(CharacterConfigProvider,{children:jsxRuntimeExports.jsx(ChatHistoryProvider,{children:jsxRuntimeExports.jsx(AiStateProvider,{children:jsxRuntimeExports.jsx(ProactiveSpeakProvider,{children:jsxRuntimeExports.jsx(Live2DConfigProvider,{children:jsxRuntimeExports.jsx(SubtitleProvider,{children:jsxRuntimeExports.jsx(VADProvider,{children:jsxRuntimeExports.jsx(BgUrlProvider,{children:jsxRuntimeExports.jsx(GroupProvider,{children:jsxRuntimeExports.jsxs(WebSocketHandler,{children:[jsxRuntimeExports.jsx(Toaster,{}),jsxRuntimeExports.jsx(Canvas,{}),jsxRuntimeExports.jsx(NewsFeed,{}),jsxRuntimeExports.jsx("audio",{ref:tt,children:jsxRuntimeExports.jsx("source",{src:"background.mp3",type:"audio/mpeg"})})]})})})})})})})})})})})})})})}const originalConsoleWarn=console.warn;console.warn=(..._e)=>{typeof _e[0]=="string"&&_e[0].includes("onnxruntime")||originalConsoleWarn.apply(console,_e)};typeof window<"u"&&createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(App,{}));
